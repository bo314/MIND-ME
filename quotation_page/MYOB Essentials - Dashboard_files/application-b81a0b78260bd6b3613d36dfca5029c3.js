Backbone.Router.prototype.before=function(){};Backbone.Router.prototype.after=function(){};Backbone.Router.prototype.route=function(b,a,e){var c=b;_.isRegExp(b)||(b=this._routeToRegExp(b));_.isFunction(a)&&(e=a,a="");e||(e=this[a]);var d=this;Backbone.history.route(b,function(f){var g=d._extractParameters(b,f);d.before(c);e&&e.apply(d,g);d.after.apply(d,arguments);d.trigger.apply(d,["route:"+a].concat(g));d.trigger("route",a,g);Backbone.history.trigger("route",d,a,g)});return this};Backbone.Validation.configure({forceUpdate:!0});
_.extend(Backbone.Validation.callbacks,{valid:function(b,a,e){b=b.$("["+e+'="'+a+'"]');ValidationHelper.clearError(b)},invalid:function(b,a,e,c){b=b.$("["+c+'="'+a+'"]');ValidationHelper.showError(b,e)}});_.extend(Backbone.Validation.patterns,{colour:/^#[0-9a-fA-F]{6}$/,digitsAndAlphanumeric:/^(\d|[a-zA-Z])+$/});_.extend(Backbone.Validation.messages,{required:"This field is required",pattern:"{0} must be {1}",digitsAndAlphanumeric:"{0} must only contain alphanumeric characters"});
Backbone.Validation.labelFormatters.field=function(){return"This field"};Backbone.Validation.configure({labelFormatter:"field"});var backboneValidationRequired=Backbone.Validation.validators.required;
_.extend(Backbone.Validation.validators,{minIfPresent:function(b,a,e,c){if(_(b).isBlank())return"";a=e.min;if(parseFloat(b)<a)return e.msg||"This field must be greater than or equal "+a},greaterThanZero:function(b,a,e,c,d){a=!0;if((a="function"===typeof e["if"]?e["if"](c,d):e)&&(_(b).isBlank()||0>=parseFloat(b)))return e.msg||"This field must be greater than 0"},_compare:function(b,a,e,c,d,f,g){f=d.numeric||!1;g=g[d.field||d];if(!(_(e).isBlank()||_(g).isBlank()||f&&a(parseFloat(e,10),parseFloat(g,
10))||!f&&a(e,g)))return d.message||c+" must be "+b+" "+g},lessThan:function(b,a,e,c,d){return this._compare("less than",function(a,c){return a<=c},b,a,e,c,d)},greaterThan:function(b,a,e,c,d){return this._compare("greater than",function(a,c){return a>=c},b,a,e,c,d)},bsbNumber:function(b,a,e,c){return this.digitNumberWithWhiteSpaces(b,6,e.msg||"This field must be 6 digits")},auTaxFileNumber:function(b,a,e,c){return this.digitNumberWithWhiteSpaces(b,9,e.msg||"TFN must be 9 digits")},phoneNumber:function(b,
a,e,c){return this.digitNumberWithWhiteSpaces(b,10,e.msg)},digitNumberWithWhiteSpaces:function(b,a,e){if(!_(b).isBlank()&&(b=b.replace(/\s/g,""),!(new RegExp("^\\d{"+a+"}$")).test(b)))return e||"This field must be "+a+" digits"},unique:function(b,a,e,c){var d=c.collection||c.get("collection");if(d&&0<d.size()&&d.any(function(e){return e.get("id")!=c.get("id")&&b===e.get(a)}))return e.message||_(a).capitalize()+" has been taken"},noneOrAll:function(b,a,e,c,d){var f=_(b).isBlank();b=e.relatedAttributes;
c=f&&_(b).all(function(a){return _(d[a]).isBlank()});f=!f&&_(b).all(function(a){return!_(d[a]).isBlank()});if(!c&&!f)return e.message||b.join(", ")+" and "+a+" must be provided together"},atLeastOneNoneZeroValue:function(b,a,e,c,d){a=!0;"function"===typeof e["if"]&&(a=e["if"](c,d));if(!a)return"";b=0>=_(b).toNumber();a=e.relatedFunctions;e=_(e.relatedAttributes).all(function(a){return 0>=_(d[a]).toNumber()});a=_(a).all(function(a){return 0>=c[a]()});if(b&&e&&a)return"One of these fields must be greater than 0"},
confirm:function(b,a,e,c){if(!_(b).isUndefined()&&!_(b).isEqual(c.get(e.forElement)))return _.trim("Does not match "+(e.forLabel||""))},atLeastOne:function(b,a,e){a=e.msg||a+" must not be empty";b=b.models||b;if(!b||0===_(b).size()||_(b).all(function(a){return a.isEmpty()}))return a},allValid:function(b,a,e){a=e.msg||"All models must be valid";if((b=b.models||b)&&0<_(b).size()&&_(b).any(function(a){return!a.isEmpty()&&!a.isValid(!0)}))return a},required:function(b,a,e,c,d){var f=!0,f="function"===
typeof e["if"]?e["if"](c,d):e;return backboneValidationRequired.call(this,b,a,f,c,d)},notInFuture:function(b,a,e,c){try{if(this._parseDate(b).isInFuture())return"From date cannot be in future"}catch(d){return d}},sameFinancialYear:function(b,a,e,c,d){try{var f,g;"from"===a?(f=b,g=d.to):(g=b,f=d.from);var h=DateUtils.startOfFinancialYearDate(DateUtils.parseBackendDate(DateUtils.convertToBackendFormat(f))).year(),l=DateUtils.startOfFinancialYearDate(DateUtils.parseBackendDate(DateUtils.convertToBackendFormat(g))).year();
if(1900<=h&&1900<=l&&h!==l)return"string"===typeof e.message?e.message:c.get("invalidMessagePrefix")+" within a financial year. Please change the dates to be within the months of <"+DateUtils.monthName(la.BusinessSettings.getFinancialYearStartMonth())+" - "+DateUtils.monthName(la.BusinessSettings.getFinancialYearEndMonth())+"> for a financial year."}catch(k){}},sameTaxYear:function(b,a,e,c){try{var d,f,g=!0;a===e.from?(d=b,f=c.get(e.to)):(f=b,d=c.get(e.from),g=!1);var h=DateUtils.auTaxYear(d),l=DateUtils.auTaxYear(f);
if((g?h:l)!==c.get("taxYear"))return"The date is outside the current tax year";c.attributes[a]=b}catch(k){}},validDate:function(b,a,e,c,d){a=!0;if(a="function"===typeof e["if"]?e["if"](c,d):e)try{_(b).isBlank()||this._parseDate(b)}catch(f){return f}},_parseDate:function(b){return DateUtils.parseBackendDate(DateUtils.convertToBackendFormat(b))},emailAddresses:function(b,a,e,c){var d=e.required||!1;_(b).isUndefined()||(b=b.filter(function(a){return!_(a.get("email")).isBlank()}));if(_(b).isUndefined()||
0===b.length)return!0===d?Backbone.Validation.messages.required:void 0;emailAddresses=b.map(function(a){return a.get("email")});for(b=0;b<emailAddresses.length;b++)if(d=_(emailAddresses[b]).trim(),!_(d).isBlank()){var f=Backbone.Validation.validators.pattern.call(this,d,a,Backbone.Validation.patterns.email,c);if(!_(f).isUndefined())return e.msg||"'"+d+"' is not a valid email address"}},email:function(b,a,e,c){if(!(_(b).isBlank()||b.match(/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/)&&
256>=b.length))return e.msg||"Invalid email format"},notAllow:function(b,a,e,c){if(_(e.values).include(b))return"This field cannot be "+b},ABN_WEIGHTING_FACTOR:[10,1,3,5,7,9,11,13,15,17,19],ACN_WEIGHTING_FACTOR:[8,7,6,5,4,3,2,1],abn:function(b,a,e,c){if(!this._ifPerformValidate(e,c))return"";var d=backboneValidationRequired.call(this,b,a,e.required||!1,c);if(!_(d).isUndefined())return d;b=b.replace(/\s/g,"");e=e.msg;d=Backbone.Validation.validators.pattern.call(this,b,a,Backbone.Validation.patterns.digits,
c);a=Backbone.Validation.validators.length.call(this,b,a,11,c);return _(d).isUndefined()&&_(a).isUndefined()?this.isValidAbn(b)?"":e||"Invalid ABN":e||"This field must be 11 digits"},abnOrAcn:function(b,a,e,c){if(!this._ifPerformValidate(e,c))return"";var d=backboneValidationRequired.call(this,b,a,e.required||!1,c);if(!_(d).isUndefined())return d;b=b.replace(/\s/g,"");e=e.msg;var d=Backbone.Validation.validators.pattern.call(this,b,a,Backbone.Validation.patterns.digits,c),f=Backbone.Validation.validators.length.call(this,
b,a,11,c);a=Backbone.Validation.validators.length.call(this,b,a,9,c);return _(d).isUndefined()&&(_(f).isUndefined()||_(a).isUndefined())?11===b.length&&!this.isValidAbn(b)||9===b.length&&!this.isValidAcn(b)?e||"Invalid ABN/ACN":"":e||"This field must be 9 or 11 digits"},isValidAbn:function(b){b=b.split("");b[0]=parseInt(b[0],10)-1;return this._isValidAtoNumber(b,this.ABN_WEIGHTING_FACTOR,89)},isValidAcn:function(b){b=b.split("");return this._isValidAcnNumber(b,this.ACN_WEIGHTING_FACTOR)},ird:function(b,
a,e,c){if(!this._ifPerformValidate(e,c))return"";var d=backboneValidationRequired.call(this,b,a,e.required||!1,c);if(!_(d).isUndefined())return d;b=b.replace(/\-/g,"");e=e.msg;d=Backbone.Validation.validators.pattern.call(this,b,a,Backbone.Validation.patterns.digits,c);a=Backbone.Validation.validators.rangeLength.call(this,b,a,[8,9],c);if(!_(d).isUndefined()||!_(a).isUndefined())return e||"IRD/GST number must be 8-9 digits";8===b.length&&(b="0"+b);if(!this._isValidIrdNumber(b))return e||"Invalid IRD/GST number"},
WPN_WEIGHTING_FACTOR:[10,7,8,4,6,3,5,2,1],wpn:function(b,a,e,c){if(!this._ifPerformValidate(e,c))return"";e=backboneValidationRequired.call(this,b,a,e.required||!1,c);if(!_(e).isUndefined())return e;e=Backbone.Validation.validators.pattern.call(this,b,a,Backbone.Validation.patterns.digits,c);a=Backbone.Validation.validators.rangeLength.call(this,b,a,[8,9],c);if(!_(e).isUndefined()||!_(a).isUndefined())return"This field must be 8 or 9 digits";8===b.length&&(b="0"+b);return this._isValidAtoNumber(b.split(""),
this.WPN_WEIGHTING_FACTOR,11)?"":"Invalid WPN number"},_isValidAtoNumber:function(b,a,e){var c=0;_(b).each(function(b,e){c+=parseInt(b,10)*a[e]},this);return 0===c%e},_isValidAcnNumber:function(b,a){var e=0,c=b[8],d=b.slice(0,8);_(d).each(function(c,b){e+=parseInt(c,10)*a[b]},this);d=10-e%10;10===d&&(d=0);return d==c},_isValidIrdNumber:function(b){var a=!1,e=parseInt(b,10);0!==e&&!isNaN(e)&&1E7<=e&&(b=b.split(""),a=(3*b[0]+2*b[1]+7*b[2]+6*b[3]+5*b[4]+4*b[5]+3*b[6]+2*b[7])%11,0===a?a=b[8]==a:1===a?
(a=(7*b[0]+4*b[1]+3*b[2]+2*b[3]+5*b[4]+2*b[5]+7*b[6]+6*b[7])%11,a=0===a?b[8]==a:1===a?!1:b[8]==11-a):a=b[8]==11-a);return a},_ifPerformValidate:function(b,a){return"function"===typeof b["if"]?b["if"](a):!0},checkUsername:function(b,a,e,c){e=Backbone.Validation.validators.required.call(this,b,a,Backbone.Validation.patterns.email,c);if(!_(e).isUndefined())return e;e=Backbone.Validation.validators.pattern.call(this,b,a,Backbone.Validation.patterns.email,c);if(!_(e).isUndefined())return"'"+b+"' is not a valid email address";
if(!0!==c.get("emailValid"))return c.get("emailMessage")},validPassword:function(b,a,e,c){e=Backbone.Validation.validators.required.call(this,b,a,c);if(!_(e).isUndefined())return e;e=Backbone.Validation.validators.pattern.call(this,b,a,/(?=^[\w~!@#$%^&*()_+<>?:,./;'\\|\[\]\{\}]{8,128}$)(?=.*?\d)(?=.*?[a-zA-Z])^[\w~!@#$%^&*()_+<>?:,./;'\\|\[\]\{\}]*$/,c);if(!_(e).isUndefined())return"Password must be at least 8 characters and contain letters and numbers"},validHandlebarsTemplate:function(b){try{Handlebars.parse(b)}catch(a){return"Variables must have double brackets and can\u2019t be empty or contain symbols"}b=
b.match(/\{\{\S+?(\s\S*?)*\}\}/g);if(0<_.filter(b,function(a){return/\s/g.test(a)}).length)return"Variables must not contain any white spaces"},conditionalPattern:function(b,a,e,c){_.isFunction(e)&&(e=e.call(c));return this.pattern.call(this,b,a,e,c)}});
!function(b){var a=function(a,e){this.$element=b(a);this.options=b.extend({},b.fn.laTypeahead.defaults,e);this.matcher=this.options.matcher||this.matcher;this.sorter=this.options.sorter||this.sorter;this.highlighter=this.options.highlighter||this.highlighter;this.updater=this.options.updater||this.updater;this.source=this.options.source;this.container=this.options.container;this.$menu=b(this.options.menu);this.mouseddown=this.shown=!1;this.listen()};a.prototype={constructor:a,select:function(){var a=
this.$menu.find(".active").attr("data-value");this.$element.val(this.updater(a)).change().select();return this.hide()},updater:function(a){return a},show:function(){var a=b.extend({},this.$element.position(),{height:this.$element[0].offsetHeight});this.$menu.appendTo(this.$element.parent()).css({top:a.top+a.height,left:a.left,height:this.container.height,width:this.container.width,position:"absolute","overflow-x":"hidden","overflow-y":"auto"}).show();this.shown=!0;this.$menu.width(this.$menu.find("table tr:nth(0)").width()+
15);this.menuTop=this.$menu.offset().top;this.menuHeight=parseInt(this.$menu.css("height").replace("px",""));return this},hide:function(){this.$menu.hide();this.shown=!1;return this},lookup:function(a,e){var f;this.query=this.$element.val();if(_(this.query).isUndefined()||this.query.length<this.options.minLength)return this.shown?this.hide():this;f=b.isFunction(this.source)?this.source(this.query,b.proxy(this.process,this)):this.source;return this.process(f,e)},process:function(a,e){var f=this;e||
(a=b.grep(a,function(a){return f.matcher(a)}));a=this.sorter(a);return a.length||this.container.customActionName?this.render(a.slice(0,this.options.items),e).show():this.shown?this.hide():this},matcher:function(a){return~a.toLowerCase().indexOf(this.query.toLowerCase())},sorter:function(a){for(var b=[],e=[],g=[],h;h=a.shift();)h.toLowerCase().indexOf(this.query.toLowerCase())?~h.indexOf(this.query)?e.push(h):g.push(h):b.push(h);return b.concat(e,g)},highlighter:function(a){var b=this.query.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,
"\\$&");return a.replace(new RegExp("("+b+")","ig"),function(a,c){return"<strong>"+c+"</strong>"})},render:function(a,e){var f=this;a=b(a).map(function(a,c){var e=b.isFunction(c.get)?c.get(f.container.valueField):c;a=b(f.options.item).attr("data-value",e);e=f.highlighter(c);_(e).each(function(c,b){a.append('<td class="'+f.container.cssClasses[b]+'"><a>'+c+"</a></td>")});return a[0]});0<this.query.length&&a.first().addClass("active");this.$menu.find("table").html(a);this.container.customActionName&&
(this.$menu.find("table").prepend('<thead><tr><th colspan="'+this.container.cssClasses.length+'"></th></tr></thead>'),this.$menu.find("table thead th").prepend('<a class="action" id="'+this.container.customActionName+'">'+this.container.customActionLabel+"</a>"),this.$menu.find("#"+this.container.customActionName).on("click",b.proxy(this.container._performCustomAction,this.container)));return this},next:function(a){a=this.$menu.find(".active").removeClass("active").next();a.length||(a=this.container.customActionName?
b(this.$menu.find("tr")[1]):b(this.$menu.find("tr")[0]));a.addClass("active");this.scrollToCurrent(a)},prev:function(a){a=this.$menu.find(".active").removeClass("active").prev();a.length||(a=this.$menu.find("tr").last());a.addClass("active");this.scrollToCurrent(a)},scrollCurrentToTop:function(a){this.autoScroll=!0;a&&a.offset()&&this.$menu.scrollTop(a.offset().top-this.$menu.offset().top)},scrollToCurrent:function(a){var b=a.offset();if(b){var b=b.top,e=this.$menu.scrollTop(),g=parseInt(a.css("height").replace("px",
""));b<=this.menuTop?a.is("tr:first-child")?this.$menu.scrollTop(0):this.$menu.scrollTop(e-this.menuTop+b):b>=this.menuTop+this.menuHeight-g&&(a.is("tr:last-child")?this.$menu.scrollTop(b-this.menuTop+e):this.$menu.scrollTop(e+b-this.menuTop-this.menuHeight+g))}},listen:function(){this.$element.on("focus",b.proxy(this.focus,this)).on("blur",b.proxy(this.blur,this)).on("keypress",b.proxy(this.keypress,this)).on("keyup",b.proxy(this.keyup,this));if(this.eventSupported("keydown"))this.$element.on("keydown",
b.proxy(this.keydown,this));this.$menu.find("table").on("mouseenter","tr",b.proxy(this.mouseenterrow,this));this.$menu.on("click",b.proxy(this.click,this)).on("blur",b.proxy(this.blur,this)).on("scroll",b.proxy(this.scroll,this)).on("mouseenter",b.proxy(this.mouseenter,this)).on("mouseleave",b.proxy(this.mouseleave,this)).on("mousedown",b.proxy(this.mousedown,this))},eventSupported:function(a){var b=a in this.$element;b||(this.$element.setAttribute(a,"return;"),b="function"===typeof this.$element[a]);
return b},move:function(a){if(this.shown)switch(a.keyCode){case 9:case 13:case 27:a.preventDefault();break;case 38:a.shiftKey||(a.preventDefault(),this.prev());break;case 40:a.shiftKey||(a.preventDefault(),this.next())}},keydown:function(a){this.suppressKeyPressRepeat=~b.inArray(a.keyCode,[40,38,9,13,27]);this.move(a)},keypress:function(a){this.suppressKeyPressRepeat||this.move(a)},keyup:function(a){switch(a.keyCode){case 40:case 38:case 16:case 17:case 18:break;case 9:case 13:if(!this.shown)break;
this.select();break;case 27:if(!this.shown)break;this.hide();break;default:this.lookup()}},focus:function(a){this.focused=!0},blur:function(a){!0===this.mouseddown?(this.container.blurDisabled||this.$element.focus(),this.mouseddown=!1):(this.focused=!1,!this.mousedover&&this.shown&&this.hide())},click:function(a){a.stopPropagation();a.preventDefault();this.select();this.$element.focus();this.mouseddown=!1},mouseenterrow:function(a){this.mousedover=!0;this.$menu.find(".active").removeClass("active");
b(a.currentTarget).addClass("active")},mouseenter:function(a){this.mousedover=!0},mouseleave:function(a){this.mousedover=!1;!this.focused&&this.shown&&this.hide()},mousedown:function(a){this.mouseddown=!0;a.preventDefault()},scroll:function(a){this.mousedover=!this.autoScroll;this.autoScroll=!1;this.focused=!0}};var e=b.fn.laTypeahead;b.fn.laTypeahead=function(c){return this.each(function(){var e=b(this),f=e.data("typeahead"),g="object"==typeof c&&c;f||e.data("typeahead",f=new a(this,g));if("string"==
typeof c)f[c]()})};b.fn.laTypeahead.defaults={source:[],items:8,menu:'<div class="typeahead"><table class="dropdown-menu table table-condensed" style="top: 0; display: block;"></table></div>',item:"<tr></tr>",minLength:1};b.fn.laTypeahead.Constructor=a;b.fn.laTypeahead.noConflict=function(){b.fn.laTypeahead=e;return this}}(window.jQuery);"use strict";
var DEFAULT_URL="compressed.tracemonkey-pldi-09.pdf",DEFAULT_SCALE="auto",DEFAULT_SCALE_DELTA=1.1,UNKNOWN_SCALE=0,DEFAULT_CACHE_SIZE=10,CSS_UNITS=96/72,SCROLLBAR_PADDING=0,VERTICAL_PADDING=5,MAX_AUTO_SCALE=1.25,MIN_SCALE=.25,MAX_SCALE=10,VIEW_HISTORY_MEMORY=20,SCALE_SELECT_CONTAINER_PADDING=8,SCALE_SELECT_PADDING=22,THUMBNAIL_SCROLL_MARGIN=-19,CLEANUP_TIMEOUT=3E4,IGNORE_CURRENT_POSITION_ON_ZOOM=!1,RenderingStates={INITIAL:0,RUNNING:1,PAUSED:2,FINISHED:3},FindStates={FIND_FOUND:0,FIND_NOTFOUND:1,FIND_WRAPPED:2,
FIND_PENDING:3};PDFJS.workerSrc="../pdf.worker.js";PDFJS.cMapPacked=!0;
var mozL10n=document.mozL10n||document.webL10n,CustomStyle=function(){function b(){}var a=["ms","Moz","Webkit","O"],e={};b.getProp=function(c,b){if(1===arguments.length&&"string"===typeof e[c])return e[c];b=b||document.documentElement;var f=b.style,g,h;if("string"===typeof f[c])return e[c]=c;h=c.charAt(0).toUpperCase()+c.slice(1);for(var l=0,k=a.length;l<k;l++)if(g=a[l]+h,"string"===typeof f[g])return e[c]=g;return e[c]="undefined"};b.setProp=function(a,b,e){a=this.getProp(a);"undefined"!==a&&(b.style[a]=
e)};return b}();function getFileName(b){var a=b.indexOf("#"),e=b.indexOf("?"),a=Math.min(0<a?a:b.length,0<e?e:b.length);return b.substring(b.lastIndexOf("/",a)+1,a)}function getOutputScale(b){b=(window.devicePixelRatio||1)/(b.webkitBackingStorePixelRatio||b.mozBackingStorePixelRatio||b.msBackingStorePixelRatio||b.oBackingStorePixelRatio||b.backingStorePixelRatio||1);return{sx:b,sy:b,scaled:1!==b}}
function scrollIntoView(b,a){var e=b.offsetParent,c=b.offsetLeft+b.clientLeft;if(e){for(;e.clientHeight===e.scrollHeight;)if(e.dataset._scaleY&&(c/=e.dataset._scaleX),c+=e.offsetLeft,e=e.offsetParent,!e)return;a&&void 0!==a.left&&(c+=a.left,e.scrollLeft=c);e.scrollTop=0}}function noContextMenuHandler(b){b.preventDefault()}
function getPDFFileNameFromURL(b){var a=/[^\/?#=]+\.pdf\b(?!.*\.pdf\b)/i;b=/^(?:([^:]+:)?\/\/[^\/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/.exec(b);if(b=a.exec(b[1])||a.exec(b[2])||a.exec(b[3]))if(b=b[0],-1!==b.indexOf("%"))try{b=a.exec(decodeURIComponent(b))[0]}catch(e){}return b||"document.pdf"}
var ProgressBar=function(){function b(a,b){this.div=document.querySelector(a+" .progress");this.bar=this.div.parentNode;this.height=b.height||100;this.width=b.width||100;this.units=b.units||"%";this.div.style.height=this.height+this.units;this.percent=0}b.prototype={updateBar:function(){this._indeterminate?(this.div.classList.add("indeterminate"),this.div.style.width=this.width+this.units):(this.div.classList.remove("indeterminate"),this.div.style.width=this.width*this._percent/100+this.units)},get percent(){return this._percent},
set percent(a){this._indeterminate=isNaN(a);this._percent=Math.min(Math.max(a,0),100);this.updateBar()},setWidth:function(a){a&&(a=a.parentNode.offsetWidth-a.offsetWidth,0<a&&this.bar.setAttribute("style","width: calc(100% - "+a+"px);"))},hide:function(){this.bar.classList.add("hidden");this.bar.removeAttribute("style")}};return b}(),Cache=function(b){var a=[];this.push=function(e){var c=a.indexOf(e);0<=c&&a.splice(c,1);a.push(e);a.length>b&&a.shift().destroy()};this.resize=function(e){for(b=e;a.length>
b;)a.shift().destroy()}},DEFAULT_PREFERENCES={showPreviousViewOnLoad:!0,defaultZoomValue:"",sidebarViewOnLoad:0,enableHandToolOnLoad:!1,enableWebGL:!1,disableRange:!1,disableAutoFetch:!1,disableFontFace:!1,disableTextLayer:!1,useOnlyCssZoom:!1},SidebarView={NONE:0,THUMBS:1,OUTLINE:2,ATTACHMENTS:3},Preferences={prefs:Object.create(DEFAULT_PREFERENCES),isInitializedPromiseResolved:!1,initializedPromise:null,initialize:function(){return this.initializedPromise=this._readFromStorage(DEFAULT_PREFERENCES).then(function(b){this.isInitializedPromiseResolved=
!0;b&&(this.prefs=b)}.bind(this))},reset:function(){return this.initializedPromise.then(function(){this.prefs=Object.create(DEFAULT_PREFERENCES);return this._writeToStorage(DEFAULT_PREFERENCES)}.bind(this))},reload:function(){return this.initializedPromise.then(function(){this._readFromStorage(DEFAULT_PREFERENCES).then(function(b){b&&(this.prefs=b)}.bind(this))}.bind(this))},set:function(b,a){return this.initializedPromise.then(function(){if(void 0===DEFAULT_PREFERENCES[b])throw Error("preferencesSet: '"+
b+"' is undefined.");if(void 0===a)throw Error("preferencesSet: no value is specified.");var e=typeof a,c=typeof DEFAULT_PREFERENCES[b];if(e!==c)if("number"===e&&"string"===c)a=a.toString();else throw Error("Preferences_set: '"+a+"' is a \""+e+'", expected "'+c+'".');else if("number"===e&&(a|0)!==a)throw Error("Preferences_set: '"+a+'\' must be an "integer".');this.prefs[b]=a;return this._writeToStorage(this.prefs)}.bind(this))},get:function(b){return this.initializedPromise.then(function(){var a=
DEFAULT_PREFERENCES[b];if(void 0===a)throw Error("preferencesGet: '"+b+"' is undefined.");var e=this.prefs[b];return void 0!==e?e:a}.bind(this))},_writeToStorage:function(b){return new Promise(function(a){localStorage.setItem("pdfjs.preferences",JSON.stringify(b));a()})},_readFromStorage:function(b){return new Promise(function(a){var b=JSON.parse(localStorage.getItem("pdfjs.preferences"));a(b)})}};
(function(){function b(a){var c=document.createEvent("CustomEvent");c.initCustomEvent(a,!1,!1,"custom");window.dispatchEvent(c)}function a(){if(d)if(c(),++f<d.length){var b=d[f];"function"===typeof b.mozPrintCallback?b.mozPrintCallback({context:b.getContext("2d"),abort:e,done:a}):a()}else c(),g.call(window),setTimeout(e,20)}function e(){d&&(d=null,c(),b("afterprint"))}function c(){var a=document.getElementById("mozPrintCallback-shim");if(d){var c=Math.round(100*f/d.length),b=a.querySelector("progress"),
g=a.querySelector(".relative-progress");b.value=c;g.textContent=c+"%";a.removeAttribute("hidden");a.onclick=e}else a.setAttribute("hidden","")}if(!("mozPrintCallback"in document.createElement("canvas"))){HTMLCanvasElement.prototype.mozPrintCallback=void 0;var d,f,g=window.print;window.print=function(){if(d)console.warn("Ignored window.print() because of a pending print job.");else try{b("beforeprint")}finally{d=document.querySelectorAll("canvas"),f=-1,a()}};if("onbeforeprint"in window){var h=function(a){"custom"!==
a.detail&&a.stopImmediatePropagation&&a.stopImmediatePropagation()};window.addEventListener("beforeprint",h,!1);window.addEventListener("afterprint",h,!1)}}})();
var DownloadManager=function(){function b(a,c){var b=document.createElement("a");b.click?(b.href=a,b.target="_parent","download"in b&&(b.download=c),(document.body||document.documentElement).appendChild(b),b.click(),b.parentNode.removeChild(b)):(window.top===window&&a.split("#")[0]===window.location.href.split("#")[0]&&(b=-1===a.indexOf("?")?"?":"&",a=a.replace(/#|$/,b+"$&")),window.open(a,"_parent"))}function a(){}a.prototype={downloadUrl:function(a,c){PDFJS.isValidUrl(a,!0)&&b(a+"#pdfjs.action=download",
c)},downloadData:function(a,c,d){if(navigator.msSaveBlob)return navigator.msSaveBlob(new Blob([a],{type:d}),c);a=PDFJS.createObjectURL(a,d);b(a,c)},download:function(a,c,d){URL?navigator.msSaveBlob?navigator.msSaveBlob(a,d)||this.downloadUrl(c,d):(a=URL.createObjectURL(a),b(a,d)):this.downloadUrl(c,d)}};return a}(),cache=new Cache(DEFAULT_CACHE_SIZE),currentPageNumber=1,ViewHistory=function(){function b(a){this.fingerprint=a;this.isInitializedPromiseResolved=!1;this.initializedPromise=this._readFromStorage().then(function(a){this.isInitializedPromiseResolved=
!0;a=JSON.parse(a||"{}");"files"in a||(a.files=[]);a.files.length>=VIEW_HISTORY_MEMORY&&a.files.shift();for(var c,b=0,f=a.files.length;b<f;b++)if(a.files[b].fingerprint===this.fingerprint){c=b;break}"number"!==typeof c&&(c=a.files.push({fingerprint:this.fingerprint})-1);this.file=a.files[c];this.database=a}.bind(this))}b.prototype={_writeToStorage:function(){return new Promise(function(a){var b=JSON.stringify(this.database);localStorage.setItem("database",b);a()}.bind(this))},_readFromStorage:function(){return new Promise(function(a){a(localStorage.getItem("database"))})},
set:function(a,b){if(this.isInitializedPromiseResolved)return this.file[a]=b,this._writeToStorage()},setMultiple:function(a){if(this.isInitializedPromiseResolved){for(var b in a)this.file[b]=a[b];return this._writeToStorage()}},get:function(a,b){return this.isInitializedPromiseResolved?this.file[a]||b:b}};return b}(),PDFFindBar=function(){function b(a){this.opened=!1;this.bar=a.bar||null;this.toggleButton=a.toggleButton||null;this.findField=a.findField||null;this.highlightAll=a.highlightAllCheckbox||
null;this.caseSensitive=a.caseSensitiveCheckbox||null;this.findMsg=a.findMsg||null;this.findStatusIcon=a.findStatusIcon||null;this.findPreviousButton=a.findPreviousButton||null;this.findNextButton=a.findNextButton||null;this.findController=a.findController||null;if(null===this.findController)throw Error("PDFFindBar cannot be used without a PDFFindController instance.");var b=this;this.toggleButton.addEventListener("click",function(){b.toggle()});this.findField.addEventListener("input",function(){b.dispatchEvent("")});
this.bar.addEventListener("keydown",function(a){switch(a.keyCode){case 13:a.target===b.findField&&b.dispatchEvent("again",a.shiftKey);break;case 27:b.close()}});this.findPreviousButton.addEventListener("click",function(){b.dispatchEvent("again",!0)});this.findNextButton.addEventListener("click",function(){b.dispatchEvent("again",!1)});this.highlightAll.addEventListener("click",function(){b.dispatchEvent("highlightallchange")});this.caseSensitive.addEventListener("click",function(){b.dispatchEvent("casesensitivitychange")})}
b.prototype={dispatchEvent:function(a,b){var c=document.createEvent("CustomEvent");c.initCustomEvent("find"+a,!0,!0,{query:this.findField.value,caseSensitive:this.caseSensitive.checked,highlightAll:this.highlightAll.checked,findPrevious:b});return window.dispatchEvent(c)},updateUIState:function(a,b){var c=!1,d="",f="";switch(a){case FindStates.FIND_PENDING:f="pending";break;case FindStates.FIND_NOTFOUND:d=mozL10n.get("find_not_found",null,"Phrase not found");c=!0;break;case FindStates.FIND_WRAPPED:d=
b?mozL10n.get("find_reached_top",null,"Reached top of document, continued from bottom"):mozL10n.get("find_reached_bottom",null,"Reached end of document, continued from top")}c?this.findField.classList.add("notFound"):this.findField.classList.remove("notFound");this.findField.setAttribute("data-status",f);this.findMsg.textContent=d},open:function(){this.opened||(this.opened=!0,this.toggleButton.classList.add("toggled"),this.bar.classList.remove("hidden"));this.findField.select();this.findField.focus()},
close:function(){this.opened&&(this.opened=!1,this.toggleButton.classList.remove("toggled"),this.bar.classList.add("hidden"),this.findController.active=!1)},toggle:function(){this.opened?this.close():this.open()}};return b}(),PDFFindController=function(){function b(a){this.startedTextExtraction=!1;this.extractTextPromises=[];this.pendingFindMatches={};this.active=!1;this.pageContents=[];this.pageMatches=[];this.selected={pageIdx:-1,matchIdx:-1};this.offset={pageIdx:null,matchIdx:null};this.state=
this.resumePageIdx=null;this.dirtyMatch=!1;this.findTimeout=null;this.pdfPageSource=a.pdfPageSource||null;this.integratedFind=a.integratedFind||!1;this.charactersToNormalize={"\u2018":"'","\u2019":"'","\u201a":"'","\u201b":"'","\u201c":'"',"\u201d":'"',"\u201e":'"',"\u201f":'"',"\u00bc":"1/4","\u00bd":"1/2","\u00be":"3/4"};this.findBar=a.findBar||null;a=Object.keys(this.charactersToNormalize).join("");this.normalizationRegex=new RegExp("["+a+"]","g");a=["find","findagain","findhighlightallchange",
"findcasesensitivitychange"];this.firstPagePromise=new Promise(function(a){this.resolveFirstPage=a}.bind(this));this.handleEvent=this.handleEvent.bind(this);for(var b=0,c=a.length;b<c;b++)window.addEventListener(a[b],this.handleEvent)}b.prototype={setFindBar:function(a){this.findBar=a},reset:function(){this.startedTextExtraction=!1;this.extractTextPromises=[];this.active=!1},normalize:function(a){var b=this;return a.replace(this.normalizationRegex,function(a){return b.charactersToNormalize[a]})},
calcFindMatch:function(a){var b=this.normalize(this.pageContents[a]),c=this.normalize(this.state.query),d=this.state.caseSensitive,f=c.length;if(0!==f){d||(b=b.toLowerCase(),c=c.toLowerCase());for(var d=[],g=-f;;){g=b.indexOf(c,g+f);if(-1===g)break;d.push(g)}this.pageMatches[a]=d;this.updatePage(a);this.resumePageIdx===a&&(this.resumePageIdx=null,this.nextPageMatch())}},extractText:function(){function a(c){f.pdfPageSource.pages[c].getTextContent().then(function(d){d=d.items;for(var l=[],k=0,m=d.length;k<
m;k++)l.push(d[k].str);f.pageContents.push(l.join(""));b[c](c);c+1<f.pdfPageSource.pages.length&&a(c+1)})}if(!this.startedTextExtraction){this.startedTextExtraction=!0;this.pageContents=[];for(var b=[],c=this.pdfPageSource.pdfDocument.numPages,d=0;d<c;d++)this.extractTextPromises.push(new Promise(function(a){b.push(a)}));var f=this;a(0)}},handleEvent:function(a){if(null===this.state||"findagain"!==a.type)this.dirtyMatch=!0;this.state=a.detail;this.updateUIState(FindStates.FIND_PENDING);this.firstPagePromise.then(function(){this.extractText();
clearTimeout(this.findTimeout);"find"===a.type?this.findTimeout=setTimeout(this.nextMatch.bind(this),250):this.nextMatch()}.bind(this))},updatePage:function(a){var b=this.pdfPageSource.pages[a];this.selected.pageIdx===a&&b.scrollIntoView();b.textLayer&&b.textLayer.updateMatches()},nextMatch:function(){var a=this.state.findPrevious,b=this.pdfPageSource.page-1,c=this.pdfPageSource.pages.length;this.active=!0;if(this.dirtyMatch){this.dirtyMatch=!1;this.selected.pageIdx=this.selected.matchIdx=-1;this.offset.pageIdx=
b;this.offset.matchIdx=null;this.hadMatch=!1;this.resumePageIdx=null;this.pageMatches=[];for(var d=this,b=0;b<c;b++)this.updatePage(b),b in this.pendingFindMatches||(this.pendingFindMatches[b]=!0,this.extractTextPromises[b].then(function(a){delete d.pendingFindMatches[a];d.calcFindMatch(a)}))}if(""===this.state.query)this.updateUIState(FindStates.FIND_FOUND);else if(!this.resumePageIdx){c=this.offset;if(null!==c.matchIdx){b=this.pageMatches[c.pageIdx].length;if(!a&&c.matchIdx+1<b||a&&0<c.matchIdx){this.hadMatch=
!0;c.matchIdx=a?c.matchIdx-1:c.matchIdx+1;this.updateMatch(!0);return}this.advanceOffsetPage(a)}this.nextPageMatch()}},matchesReady:function(a){var b=this.offset;a=a.length;var c=this.state.findPrevious;if(a)return this.hadMatch=!0,b.matchIdx=c?a-1:0,this.updateMatch(!0),!0;this.advanceOffsetPage(c);return b.wrapped&&(b.matchIdx=null,!this.hadMatch)?(this.updateMatch(!1),!0):!1},nextPageMatch:function(){null!==this.resumePageIdx&&console.error("There can only be one pending page.");do{var a=this.offset.pageIdx,
b=this.pageMatches[a];if(!b){this.resumePageIdx=a;break}}while(!this.matchesReady(b))},advanceOffsetPage:function(a){var b=this.offset,c=this.extractTextPromises.length;b.pageIdx=a?b.pageIdx-1:b.pageIdx+1;b.matchIdx=null;if(b.pageIdx>=c||0>b.pageIdx)b.pageIdx=a?c-1:0,b.wrapped=!0},updateMatch:function(a){var b=FindStates.FIND_NOTFOUND,c=this.offset.wrapped;this.offset.wrapped=!1;a&&(a=this.selected.pageIdx,this.selected.pageIdx=this.offset.pageIdx,this.selected.matchIdx=this.offset.matchIdx,b=c?FindStates.FIND_WRAPPED:
FindStates.FIND_FOUND,-1!==a&&a!==this.selected.pageIdx&&this.updatePage(a));this.updateUIState(b,this.state.findPrevious);-1!==this.selected.pageIdx&&this.updatePage(this.selected.pageIdx,!0)},updateUIState:function(a,b){if(this.integratedFind)FirefoxCom.request("updateFindControlState",{result:a,findPrevious:b});else{if(null===this.findBar)throw Error("PDFFindController is not initialized with a PDFFindBar instance.");this.findBar.updateUIState(a,b)}}};return b}(),PDFHistory={initialized:!1,initialDestination:null,
initialize:function(b){function a(){var c=e._getPreviousParams(null,!0);c&&(e._pushToHistory(c,!1,!e.current.dest&&e.current.hash!==e.previousHash),e._updatePreviousBookmark());window.removeEventListener("beforeunload",a,!1)}if(!PDFJS.disableHistory&&!PDFView.isViewerEmbedded){this.initialized=!0;this.allowHashChange=this.reInitialized=!1;this.historyUnlocked=!0;this.previousHash=window.location.hash.substring(1);this.currentBookmark="";this.currentPage=0;this.updatePreviousBookmark=!1;this.previousBookmark=
"";this.previousPage=0;this.nextHashParam="";this.fingerprint=b;this.currentUid=this.uid=0;this.current={};b=window.history.state;this._isStateObjectDefined(b)?(b.target.dest?this.initialDestination=b.target.dest:PDFView.initialBookmark=b.target.hash,this.currentUid=b.uid,this.uid=b.uid+1,this.current=b.target):(b&&b.fingerprint&&this.fingerprint!==b.fingerprint&&(this.reInitialized=!0),this._pushOrReplaceState({fingerprint:this.fingerprint},!0));var e=this;window.addEventListener("popstate",function(a){a.preventDefault();
a.stopPropagation();e.historyUnlocked&&(a.state?e._goTo(a.state):(e.previousHash=window.location.hash.substring(1),0===e.uid&&(a=e.previousHash&&e.currentBookmark&&e.previousHash!==e.currentBookmark?{hash:e.currentBookmark,page:e.currentPage}:{page:1},e.historyUnlocked=!1,e.allowHashChange=!1,window.history.back(),e._pushToHistory(a,!1,!0),window.history.forward(),e.historyUnlocked=!0),e._pushToHistory({hash:e.previousHash},!1,!0),e._updatePreviousBookmark()))},!1);window.addEventListener("beforeunload",
a,!1);window.addEventListener("pageshow",function(c){window.addEventListener("beforeunload",a,!1)},!1)}},_isStateObjectDefined:function(b){return b&&0<=b.uid&&b.fingerprint&&this.fingerprint===b.fingerprint&&b.target&&b.target.hash?!0:!1},_pushOrReplaceState:function(b,a){a?window.history.replaceState(b,"",document.URL):window.history.pushState(b,"",document.URL)},get isHashChangeUnlocked(){if(!this.initialized)return!0;var b=this.allowHashChange;this.allowHashChange=!0;return b},_updatePreviousBookmark:function(){this.updatePreviousBookmark&&
this.currentBookmark&&this.currentPage&&(this.previousBookmark=this.currentBookmark,this.previousPage=this.currentPage,this.updatePreviousBookmark=!1)},updateCurrentBookmark:function(b,a){this.initialized&&(this.currentBookmark=b.substring(1),this.currentPage=a|0,this._updatePreviousBookmark())},updateNextHashParam:function(b){this.initialized&&(this.nextHashParam=b)},push:function(b,a){if(this.initialized&&this.historyUnlocked)if(b.dest&&!b.hash&&(b.hash=this.current.hash&&this.current.dest&&this.current.dest===
b.dest?this.current.hash:PDFView.getDestinationHash(b.dest).split("#")[1]),b.page&&(b.page|=0),a){var e=window.history.state.target;e||(this._pushToHistory(b,!1),this.previousHash=window.location.hash.substring(1));this.updatePreviousBookmark=this.nextHashParam?!1:!0;e&&this._updatePreviousBookmark()}else{if(this.nextHashParam){if(this.nextHashParam===b.hash){this.nextHashParam=null;this.updatePreviousBookmark=!0;return}this.nextHashParam=null}b.hash?this.current.hash?this.current.hash!==b.hash?this._pushToHistory(b,
!0):(!this.current.page&&b.page&&this._pushToHistory(b,!1,!0),this.updatePreviousBookmark=!0):this._pushToHistory(b,!0):this.current.page&&b.page&&this.current.page!==b.page&&this._pushToHistory(b,!0)}},_getPreviousParams:function(b,a){if(!this.currentBookmark||!this.currentPage)return null;this.updatePreviousBookmark&&(this.updatePreviousBookmark=!1);if(0<this.uid&&(!this.previousBookmark||!this.previousPage))return null;if(!this.current.dest&&!b||a){if(this.previousBookmark===this.currentBookmark)return null}else if(this.current.page||
b){if(this.previousPage===this.currentPage)return null}else return null;var e={hash:this.currentBookmark,page:this.currentPage};PresentationMode.active&&(e.hash=null);return e},_stateObj:function(b){return{fingerprint:this.fingerprint,uid:this.uid,target:b}},_pushToHistory:function(b,a,e){this.initialized&&(!b.hash&&b.page&&(b.hash="page="+b.page),a&&!e&&(a=this._getPreviousParams())&&this._pushToHistory(a,!1,!this.current.dest&&this.current.hash!==this.previousHash),this._pushOrReplaceState(this._stateObj(b),
e||0===this.uid),this.currentUid=this.uid++,this.current=b,this.updatePreviousBookmark=!0)},_goTo:function(b){if(this.initialized&&this.historyUnlocked&&this._isStateObjectDefined(b)){if(!this.reInitialized&&b.uid<this.currentUid){var a=this._getPreviousParams(!0);if(a){this._pushToHistory(this.current,!1);this._pushToHistory(a,!1);this.currentUid=b.uid;window.history.back();return}}this.historyUnlocked=!1;b.target.dest?PDFView.navigateTo(b.target.dest):PDFView.setHash(b.target.hash);this.currentUid=
b.uid;b.uid>this.uid&&(this.uid=b.uid);this.current=b.target;this.updatePreviousBookmark=!0;b=window.location.hash.substring(1);this.previousHash!==b&&(this.allowHashChange=!1);this.previousHash=b;this.historyUnlocked=!0}},back:function(){this.go(-1)},forward:function(){this.go(1)},go:function(b){if(this.initialized&&this.historyUnlocked){var a=window.history.state;-1===b&&a&&0<a.uid?window.history.back():1===b&&a&&a.uid<this.uid-1&&window.history.forward()}}},SecondaryToolbar={opened:!1,previousContainerHeight:null,
newContainerHeight:null,initialize:function(b){this.toolbar=b.toolbar;this.presentationMode=b.presentationMode;this.documentProperties=b.documentProperties;this.buttonContainer=this.toolbar.firstElementChild;this.toggleButton=b.toggleButton;this.presentationModeButton=b.presentationModeButton;this.openFile=b.openFile;this.print=b.print;this.download=b.download;this.viewBookmark=b.viewBookmark;this.firstPage=b.firstPage;this.lastPage=b.lastPage;this.pageRotateCw=b.pageRotateCw;this.pageRotateCcw=b.pageRotateCcw;
this.documentPropertiesButton=b.documentPropertiesButton;b=[{element:this.toggleButton,handler:this.toggle},{element:this.presentationModeButton,handler:this.presentationModeClick},{element:this.openFile,handler:this.openFileClick},{element:this.print,handler:this.printClick},{element:this.download,handler:this.downloadClick},{element:this.viewBookmark,handler:this.viewBookmarkClick},{element:this.firstPage,handler:this.firstPageClick},{element:this.lastPage,handler:this.lastPageClick},{element:this.pageRotateCw,
handler:this.pageRotateCwClick},{element:this.pageRotateCcw,handler:this.pageRotateCcwClick},{element:this.documentPropertiesButton,handler:this.documentPropertiesClick}];for(var a in b){var e=b[a].element;e&&e.addEventListener("click",b[a].handler.bind(this))}},presentationModeClick:function(b){this.presentationMode.request();this.close()},openFileClick:function(b){document.getElementById("fileInput").click();this.close()},printClick:function(b){window.print();this.close()},downloadClick:function(b){PDFView.download();
this.close()},viewBookmarkClick:function(b){this.close()},firstPageClick:function(b){PDFView.page=1;this.close()},lastPageClick:function(b){PDFView.pdfDocument&&(PDFView.page=PDFView.pdfDocument.numPages);this.close()},pageRotateCwClick:function(b){PDFView.rotatePages(90)},pageRotateCcwClick:function(b){PDFView.rotatePages(-90)},documentPropertiesClick:function(b){this.documentProperties.open();this.close()},setMaxHeight:function(b){b&&this.buttonContainer&&(this.newContainerHeight=b.clientHeight,
this.previousContainerHeight!==this.newContainerHeight&&(this.buttonContainer.setAttribute("style","max-height: "+(this.newContainerHeight-SCROLLBAR_PADDING)+"px;"),this.previousContainerHeight=this.newContainerHeight))},open:function(){this.opened||(this.opened=!0,this.toggleButton.classList.add("toggled"),this.toolbar.classList.remove("hidden"))},close:function(b){!this.opened||b&&!this.toolbar.contains(b)||(this.opened=!1,this.toolbar.classList.add("hidden"),this.toggleButton.classList.remove("toggled"))},
toggle:function(){this.opened?this.close():this.open()}},DELAY_BEFORE_HIDING_CONTROLS=3E3,SELECTOR="presentationControls",DELAY_BEFORE_RESETTING_SWITCH_IN_PROGRESS=1E3,PresentationMode={active:!1,args:null,contextMenuOpen:!1,prevCoords:{x:null,y:null},initialize:function(b){this.container=b.container;this.secondaryToolbar=b.secondaryToolbar;this.viewer=this.container.firstElementChild;this.firstPage=b.firstPage;this.lastPage=b.lastPage;this.pageRotateCw=b.pageRotateCw;this.pageRotateCcw=b.pageRotateCcw;
this.firstPage.addEventListener("click",function(){this.contextMenuOpen=!1;this.secondaryToolbar.firstPageClick()}.bind(this));this.lastPage.addEventListener("click",function(){this.contextMenuOpen=!1;this.secondaryToolbar.lastPageClick()}.bind(this));this.pageRotateCw.addEventListener("click",function(){this.contextMenuOpen=!1;this.secondaryToolbar.pageRotateCwClick()}.bind(this));this.pageRotateCcw.addEventListener("click",function(){this.contextMenuOpen=!1;this.secondaryToolbar.pageRotateCcwClick()}.bind(this))},
get isFullscreen(){return document.fullscreenElement||document.mozFullScreen||document.webkitIsFullScreen||document.msFullscreenElement},_setSwitchInProgress:function(){this.switchInProgress&&clearTimeout(this.switchInProgress);this.switchInProgress=setTimeout(function(){delete this.switchInProgress}.bind(this),DELAY_BEFORE_RESETTING_SWITCH_IN_PROGRESS);PDFView.currentPosition=null},_resetSwitchInProgress:function(){this.switchInProgress&&(clearTimeout(this.switchInProgress),delete this.switchInProgress)},
request:function(){if(!PDFView.supportsFullscreen||this.isFullscreen||!this.viewer.hasChildNodes())return!1;this._setSwitchInProgress();if(this.container.requestFullscreen)this.container.requestFullscreen();else if(this.container.mozRequestFullScreen)this.container.mozRequestFullScreen();else if(this.container.webkitRequestFullScreen)this.container.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT);else if(this.container.msRequestFullscreen)this.container.msRequestFullscreen();else return!1;this.args=
{page:PDFView.page,previousScale:PDFView.currentScaleValue};return!0},enter:function(){this.active=!0;this._resetSwitchInProgress();setTimeout(function(){PDFView.page=this.args.page;PDFView.setScale("page-fit",!0)}.bind(this),0);window.addEventListener("mousemove",this.mouseMove,!1);window.addEventListener("mousedown",this.mouseDown,!1);window.addEventListener("contextmenu",this.contextMenu,!1);this.showControls();HandTool.enterPresentationMode();this.contextMenuOpen=!1;this.container.setAttribute("contextmenu",
"viewerContextMenu")},exit:function(){var b=PDFView.page;setTimeout(function(){this.active=!1;PDFView.setScale(this.args.previousScale);PDFView.page=b;this.args=null}.bind(this),0);window.removeEventListener("mousemove",this.mouseMove,!1);window.removeEventListener("mousedown",this.mouseDown,!1);window.removeEventListener("contextmenu",this.contextMenu,!1);this.hideControls();PDFView.clearMouseScrollState();HandTool.exitPresentationMode();this.container.removeAttribute("contextmenu");this.contextMenuOpen=
!1;scrollIntoView(document.getElementById("thumbnailContainer"+b))},showControls:function(){this.controlsTimeout?clearTimeout(this.controlsTimeout):this.container.classList.add(SELECTOR);this.controlsTimeout=setTimeout(function(){this.container.classList.remove(SELECTOR);delete this.controlsTimeout}.bind(this),DELAY_BEFORE_HIDING_CONTROLS)},hideControls:function(){this.controlsTimeout&&(this.container.classList.remove(SELECTOR),clearTimeout(this.controlsTimeout),delete this.controlsTimeout)},mouseMove:function(b){b=
{x:b.clientX,y:b.clientY};var a=PresentationMode.prevCoords;PresentationMode.prevCoords=b;b.x===a.x&&b.y===a.y||PresentationMode.showControls()},mouseDown:function(b){var a=PresentationMode;a.contextMenuOpen?(a.contextMenuOpen=!1,b.preventDefault()):0!==b.button||b.target.href&&b.target.classList.contains("internalLink")||(b.preventDefault(),PDFView.page+=b.shiftKey?-1:1)},contextMenu:function(b){PresentationMode.contextMenuOpen=!0}};
(function(){function b(a){PresentationMode.isFullscreen?PresentationMode.enter():PresentationMode.exit()}window.addEventListener("fullscreenchange",b,!1);window.addEventListener("mozfullscreenchange",b,!1);window.addEventListener("webkitfullscreenchange",b,!1);window.addEventListener("MSFullscreenChange",b,!1)})();"use strict";
var GrabToPan=function(){function b(a){this.element=a.element;this.document=a.element.ownerDocument;"function"===typeof a.ignoreTarget&&(this.ignoreTarget=a.ignoreTarget);this.onActiveChanged=a.onActiveChanged;this.activate=this.activate.bind(this);this.deactivate=this.deactivate.bind(this);this.toggle=this.toggle.bind(this);this._onmousedown=this._onmousedown.bind(this);this._onmousemove=this._onmousemove.bind(this);this._endPan=this._endPan.bind(this);(this.overlay=document.createElement("div")).className=
"grab-to-pan-grabbing"}b.prototype={CSS_CLASS_GRAB:"grab-to-pan-grab",activate:function(){if(!this.active&&(this.active=!0,this.element.addEventListener("mousedown",this._onmousedown,!0),this.element.classList.add(this.CSS_CLASS_GRAB),this.onActiveChanged))this.onActiveChanged(!0)},deactivate:function(){if(this.active&&(this.active=!1,this.element.removeEventListener("mousedown",this._onmousedown,!0),this._endPan(),this.element.classList.remove(this.CSS_CLASS_GRAB),this.onActiveChanged))this.onActiveChanged(!1)},
toggle:function(){this.active?this.deactivate():this.activate()},ignoreTarget:function(c){return c[a]("a[href], a[href] *, input, textarea, button, button *, select, option")},_onmousedown:function(a){if(0===a.button&&!this.ignoreTarget(a.target)){if(a.originalTarget)try{a.originalTarget.tagName}catch(c){return}this.scrollLeftStart=this.element.scrollLeft;this.scrollTopStart=this.element.scrollTop;this.clientXStart=a.clientX;this.clientYStart=a.clientY;this.document.addEventListener("mousemove",this._onmousemove,
!0);this.document.addEventListener("mouseup",this._endPan,!0);this.element.addEventListener("scroll",this._endPan,!0);a.preventDefault();a.stopPropagation();this.document.documentElement.classList.add(this.CSS_CLASS_GRABBING)}},_onmousemove:function(a){this.element.removeEventListener("scroll",this._endPan,!0);var c;c="buttons"in a&&e?!(a.buttons|1):d||f?0===a.which:void 0;c?this._endPan():(c=a.clientX-this.clientXStart,this.element.scrollTop=this.scrollTopStart-(a.clientY-this.clientYStart),this.element.scrollLeft=
this.scrollLeftStart-c,this.overlay.parentNode||document.body.appendChild(this.overlay))},_endPan:function(){this.element.removeEventListener("scroll",this._endPan,!0);this.document.removeEventListener("mousemove",this._onmousemove,!0);this.document.removeEventListener("mouseup",this._endPan,!0);this.overlay.parentNode&&this.overlay.parentNode.removeChild(this.overlay)}};var a;["webkitM","mozM","msM","oM","m"].some(function(c){c+="atches";c in document.documentElement&&(a=c);c+="Selector";c in document.documentElement&&
(a=c);return a});var e=!document.documentMode||9<document.documentMode,c=window.chrome,d=c&&(c.webstore||c.app),f=/Apple/.test(navigator.vendor)&&/Version\/([6-9]\d*|[1-5]\d+)/.test(navigator.userAgent);return b}(),HandTool={initialize:function(b){var a=b.toggleHandTool;this.handTool=new GrabToPan({element:b.container,onActiveChanged:function(b){a&&(b?(a.title=mozL10n.get("hand_tool_disable.title",null,"Disable hand tool"),a.firstElementChild.textContent=mozL10n.get("hand_tool_disable_label",null,
"Disable hand tool")):(a.title=mozL10n.get("hand_tool_enable.title",null,"Enable hand tool"),a.firstElementChild.textContent=mozL10n.get("hand_tool_enable_label",null,"Enable hand tool")))}});a&&(a.addEventListener("click",this.toggle.bind(this),!1),window.addEventListener("localized",function(a){Preferences.get("enableHandToolOnLoad").then(function(a){a&&this.handTool.activate()}.bind(this),function(a){})}.bind(this)))},toggle:function(){this.handTool.toggle();SecondaryToolbar.close()},enterPresentationMode:function(){this.handTool.active&&
(this.wasActive=!0,this.handTool.deactivate())},exitPresentationMode:function(){this.wasActive&&(this.wasActive=null,this.handTool.activate())}},OverlayManager={overlays:{},active:null,register:function(b,a,e){return new Promise(function(c){var d,f;if(!b||!(d=document.getElementById(b))||!(f=d.parentNode))throw Error("Not enough parameters.");this.overlays[b]||(this.overlays[b]={element:d,container:f,callerCloseMethod:a||null,canForceClose:e||!1},c())}.bind(this))},unregister:function(b){return new Promise(function(a){if(!this.overlays[b])throw Error("The overlay does not exist.");
if(this.active===b)throw Error("The overlay cannot be removed while it is active.");delete this.overlays[b];a()}.bind(this))},open:function(b){return new Promise(function(a){if(!this.overlays[b])throw Error("The overlay does not exist.");if(this.active)if(this.overlays[b].canForceClose)this._closeThroughCaller();else{if(this.active===b)throw Error("The overlay is already active.");throw Error("Another overlay is currently active.");}this.active=b;this.overlays[this.active].element.classList.remove("hidden");
this.overlays[this.active].container.classList.remove("hidden");window.addEventListener("keydown",this._keyDown);a()}.bind(this))},close:function(b){return new Promise(function(a){if(this.overlays[b]){if(!this.active)throw Error("The overlay is currently not active.");if(this.active!==b)throw Error("Another overlay is currently active.");}else throw Error("The overlay does not exist.");this.overlays[this.active].container.classList.add("hidden");this.overlays[this.active].element.classList.add("hidden");
this.active=null;window.removeEventListener("keydown",this._keyDown);a()}.bind(this))},_keyDown:function(b){var a=OverlayManager;a.active&&27===b.keyCode&&(a._closeThroughCaller(),b.preventDefault())},_closeThroughCaller:function(){this.overlays[this.active].callerCloseMethod&&this.overlays[this.active].callerCloseMethod();this.active&&this.close(this.active)}},PasswordPrompt={overlayName:null,updatePassword:null,reason:null,passwordField:null,passwordText:null,passwordSubmit:null,passwordCancel:null,
initialize:function(b){this.overlayName=b.overlayName;this.passwordField=b.passwordField;this.passwordText=b.passwordText;this.passwordSubmit=b.passwordSubmit;this.passwordCancel=b.passwordCancel;this.passwordSubmit.addEventListener("click",this.verifyPassword.bind(this));this.passwordCancel.addEventListener("click",this.close.bind(this));this.passwordField.addEventListener("keydown",function(a){13===a.keyCode&&this.verifyPassword()}.bind(this));OverlayManager.register(this.overlayName,this.close.bind(this),
!0)},open:function(){OverlayManager.open(this.overlayName).then(function(){this.passwordField.focus();var b=mozL10n.get("password_label",null,"Enter the password to open this PDF file.");this.reason===PDFJS.PasswordResponses.INCORRECT_PASSWORD&&(b=mozL10n.get("password_invalid",null,"Invalid password. Please try again."));this.passwordText.textContent=b}.bind(this))},close:function(){OverlayManager.close(this.overlayName).then(function(){this.passwordField.value=""}.bind(this))},verifyPassword:function(){var b=
this.passwordField.value;if(b&&0<b.length)return this.close(),this.updatePassword(b)}},DocumentProperties={overlayName:null,fileName:"",fileSize:"",fileNameField:null,fileSizeField:null,titleField:null,authorField:null,subjectField:null,keywordsField:null,creationDateField:null,modificationDateField:null,creatorField:null,producerField:null,versionField:null,pageCountField:null,initialize:function(b){this.overlayName=b.overlayName;this.fileNameField=b.fileNameField;this.fileSizeField=b.fileSizeField;
this.titleField=b.titleField;this.authorField=b.authorField;this.subjectField=b.subjectField;this.keywordsField=b.keywordsField;this.creationDateField=b.creationDateField;this.modificationDateField=b.modificationDateField;this.creatorField=b.creatorField;this.producerField=b.producerField;this.versionField=b.versionField;this.pageCountField=b.pageCountField;b.closeButton&&b.closeButton.addEventListener("click",this.close.bind(this));this.dataAvailablePromise=new Promise(function(a){this.resolveDataAvailable=
a}.bind(this));OverlayManager.register(this.overlayName,this.close.bind(this))},getProperties:function(){OverlayManager.active&&(this.fileName=getPDFFileNameFromURL(PDFView.url),PDFView.pdfDocument.getDownloadInfo().then(function(b){this.setFileSize(b.length);this.updateUI(this.fileSizeField,this.fileSize)}.bind(this)),PDFView.pdfDocument.getMetadata().then(function(b){b=[{field:this.fileNameField,content:this.fileName},{field:this.titleField,content:b.info.Title},{field:this.authorField,content:b.info.Author},
{field:this.subjectField,content:b.info.Subject},{field:this.keywordsField,content:b.info.Keywords},{field:this.creationDateField,content:this.parseDate(b.info.CreationDate)},{field:this.modificationDateField,content:this.parseDate(b.info.ModDate)},{field:this.creatorField,content:b.info.Creator},{field:this.producerField,content:b.info.Producer},{field:this.versionField,content:b.info.PDFFormatVersion},{field:this.pageCountField,content:PDFView.pdfDocument.numPages}];for(var a in b){var e=b[a];this.updateUI(e.field,
e.content)}}.bind(this)))},updateUI:function(b,a){b&&void 0!==a&&""!==a&&(b.textContent=a)},setFileSize:function(b){var a=b/1024;this.fileSize=1024>a?mozL10n.get("document_properties_kb",{size_kb:(+a.toPrecision(3)).toLocaleString(),size_b:b.toLocaleString()},"{{size_kb}} KB ({{size_b}} bytes)"):mozL10n.get("document_properties_mb",{size_mb:(+(a/1024).toPrecision(3)).toLocaleString(),size_b:b.toLocaleString()},"{{size_mb}} MB ({{size_b}} bytes)")},open:function(){Promise.all([OverlayManager.open(this.overlayName),
this.dataAvailablePromise]).then(function(){this.getProperties()}.bind(this))},close:function(){OverlayManager.close(this.overlayName)},parseDate:function(b){var a=b;if(void 0===a)return"";"D:"===a.substring(0,2)&&(a=a.substring(2));b=parseInt(a.substring(0,4),10);var e=parseInt(a.substring(4,6),10)-1,c=parseInt(a.substring(6,8),10),d=parseInt(a.substring(8,10),10),f=parseInt(a.substring(10,12),10),g=parseInt(a.substring(12,14),10),h=a.substring(14,15),l=parseInt(a.substring(15,17),10),a=parseInt(a.substring(18,
20),10);"-"===h?(d+=l,f+=a):"+"===h&&(d-=l,f+=a);e=new Date(Date.UTC(b,e,c,d,f,g));b=e.toLocaleDateString();e=e.toLocaleTimeString();return mozL10n.get("document_properties_date_string",{date:b,time:e},"{{date}}, {{time}}")}},PDFView={pages:[],thumbnails:[],currentScale:UNKNOWN_SCALE,currentScaleValue:null,initialBookmark:document.location.hash.substring(1),container:null,thumbnailContainer:null,initialized:!1,fellback:!1,pdfDocument:null,sidebarOpen:!1,printing:!1,pageViewScroll:null,thumbnailViewScroll:null,
pageRotation:0,mouseScrollTimeStamp:0,mouseScrollDelta:0,lastScroll:0,previousPageNumber:1,isViewerEmbedded:window.parent!==window,idleTimeout:null,currentPosition:null,url:"",initialize:function(b){var a=this;this.documentUrl=b;b=this.container=document.getElementById("viewerContainer");this.pageViewScroll={};this.watchScroll(b,this.pageViewScroll,updateViewarea);var e=this.thumbnailContainer=document.getElementById("thumbnailView");this.thumbnailViewScroll={};this.watchScroll(e,this.thumbnailViewScroll,
this.renderHighestPriority.bind(this));Preferences.initialize();this.findController=new PDFFindController({pdfPageSource:this,integratedFind:this.supportsIntegratedFind});this.findBar=new PDFFindBar({bar:document.getElementById("findbar"),toggleButton:document.getElementById("viewFind"),findField:document.getElementById("findInput"),highlightAllCheckbox:document.getElementById("findHighlightAll"),caseSensitiveCheckbox:document.getElementById("findMatchCase"),findMsg:document.getElementById("findMsg"),
findStatusIcon:document.getElementById("findStatusIcon"),findPreviousButton:document.getElementById("findPrevious"),findNextButton:document.getElementById("findNext"),findController:this.findController});this.findController.setFindBar(this.findBar);HandTool.initialize({container:b,toggleHandTool:document.getElementById("toggleHandTool")});SecondaryToolbar.initialize({toolbar:document.getElementById("secondaryToolbar"),presentationMode:PresentationMode,toggleButton:document.getElementById("secondaryToolbarToggle"),
presentationModeButton:document.getElementById("secondaryPresentationMode"),openFile:document.getElementById("secondaryOpenFile"),print:document.getElementById("secondaryPrint"),download:document.getElementById("secondaryDownload"),viewBookmark:document.getElementById("secondaryViewBookmark"),firstPage:document.getElementById("firstPage"),lastPage:document.getElementById("lastPage"),pageRotateCw:document.getElementById("pageRotateCw"),pageRotateCcw:document.getElementById("pageRotateCcw"),documentProperties:DocumentProperties,
documentPropertiesButton:document.getElementById("documentProperties")});PresentationMode.initialize({container:b,secondaryToolbar:SecondaryToolbar,firstPage:document.getElementById("contextFirstPage"),lastPage:document.getElementById("contextLastPage"),pageRotateCw:document.getElementById("contextPageRotateCw"),pageRotateCcw:document.getElementById("contextPageRotateCcw")});PasswordPrompt.initialize({overlayName:"passwordOverlay",passwordField:document.getElementById("password"),passwordText:document.getElementById("passwordText"),
passwordSubmit:document.getElementById("passwordSubmit"),passwordCancel:document.getElementById("passwordCancel")});DocumentProperties.initialize({overlayName:"documentPropertiesOverlay",closeButton:document.getElementById("documentPropertiesClose"),fileNameField:document.getElementById("fileNameField"),fileSizeField:document.getElementById("fileSizeField"),titleField:document.getElementById("titleField"),authorField:document.getElementById("authorField"),subjectField:document.getElementById("subjectField"),
keywordsField:document.getElementById("keywordsField"),creationDateField:document.getElementById("creationDateField"),modificationDateField:document.getElementById("modificationDateField"),creatorField:document.getElementById("creatorField"),producerField:document.getElementById("producerField"),versionField:document.getElementById("versionField"),pageCountField:document.getElementById("pageCountField")});b.addEventListener("scroll",function(){a.lastScroll=Date.now()},!1);return Promise.all([Preferences.get("enableWebGL").then(function(a){PDFJS.disableWebGL=
!a}),Preferences.get("sidebarViewOnLoad").then(function(c){a.preferenceSidebarViewOnLoad=c}),Preferences.get("disableTextLayer").then(function(a){!0!==PDFJS.disableTextLayer&&(PDFJS.disableTextLayer=a)}),Preferences.get("disableRange").then(function(a){!0!==PDFJS.disableRange&&(PDFJS.disableRange=a)}),Preferences.get("disableAutoFetch").then(function(a){PDFJS.disableAutoFetch=a}),Preferences.get("disableFontFace").then(function(a){!0!==PDFJS.disableFontFace&&(PDFJS.disableFontFace=a)}),Preferences.get("useOnlyCssZoom").then(function(a){PDFJS.useOnlyCssZoom=
a})]).catch(function(a){}).then(function(){PDFView.initialized=!0})},getPage:function(b){return this.pdfDocument.getPage(b)},watchScroll:function(b,a,e){a.down=!0;a.lastY=b.scrollTop;b.addEventListener("scroll",function(c){if(PDFView.pdfDocument){c=b.scrollTop;var d=a.lastY;c>d?a.down=!0:c<d&&(a.down=!1);a.lastY=c;e()}},!0)},_setScaleUpdatePages:function(b,a,e,c){this.currentScaleValue=a;if(b!==this.currentScale){a=0;for(var d=this.pages.length;a<d;a++)this.pages[a].update(b);this.currentScale=b;
if(!c){c=this.page;var f;this.currentPosition&&!IGNORE_CURRENT_POSITION_ON_ZOOM&&(c=this.currentPosition.page,f=[null,{name:"XYZ"},this.currentPosition.left,this.currentPosition.top,null]);this.pages[c-1].scrollIntoView(f)}f=document.createEvent("UIEvents");f.initUIEvent("scalechange",!1,!1,window,0);f.scale=b;f.resetAutoSettings=e;window.dispatchEvent(f)}},setScale:function(b,a,e){if("custom"!==b){var c=parseFloat(b);if(0<c)this._setScaleUpdatePages(c,b,!0,e);else{var d=this.pages[this.page-1];if(d){c=
(this.container.clientWidth-(PresentationMode.active?0:SCROLLBAR_PADDING))/d.width*d.scale;d=(this.container.clientHeight-(PresentationMode.active?0:VERTICAL_PADDING))/d.height*d.scale;switch(b){case "page-actual":c=1;break;case "page-width":break;case "page-height":c=d;break;case "page-fit":c=Math.min(c,d);break;case "auto":c=Math.min(MAX_AUTO_SCALE,c);break;default:console.error("pdfViewSetScale: '"+b+"' is an unknown zoom value.");return}this._setScaleUpdatePages(c,b,a,e);selectScaleOption(b)}}}},
zoomIn:function(b){var a=this.currentScale;do a=(a*DEFAULT_SCALE_DELTA).toFixed(2),a=Math.ceil(10*a)/10,a=Math.min(MAX_SCALE,a);while(--b&&a<MAX_SCALE);this.setScale(a,!0)},zoomOut:function(b){var a=this.currentScale;do a=(a/DEFAULT_SCALE_DELTA).toFixed(2),a=Math.floor(10*a)/10,a=Math.max(MIN_SCALE,a);while(--b&&a>MIN_SCALE);this.setScale(a,!0)},set page(b){var a=this.pages,e=document.createEvent("UIEvents");e.initUIEvent("pagechange",!1,!1,window,0);0<b&&b<=a.length?(a[b-1].updateStats(),this.previousPageNumber=
currentPageNumber,currentPageNumber=b,e.pageNumber=b,window.dispatchEvent(e),updateViewarea.inProgress||this.loading&&1===b||a[b-1].scrollIntoView()):(this.previousPageNumber=b,e.pageNumber=this.page,window.dispatchEvent(e))},get page(){return currentPageNumber},get supportsPrinting(){var b="mozPrintCallback"in document.createElement("canvas");Object.defineProperty(this,"supportsPrinting",{value:b,enumerable:!0,configurable:!0,writable:!1});return b},get supportsFullscreen(){var b=document.documentElement,
b=b.requestFullscreen||b.mozRequestFullScreen||b.webkitRequestFullScreen||b.msRequestFullscreen;if(!1===document.fullscreenEnabled||!1===document.mozFullScreenEnabled||!1===document.webkitFullscreenEnabled||!1===document.msFullscreenEnabled)b=!1;Object.defineProperty(this,"supportsFullscreen",{value:b,enumerable:!0,configurable:!0,writable:!1});return b},get supportsIntegratedFind(){Object.defineProperty(this,"supportsIntegratedFind",{value:!1,enumerable:!0,configurable:!0,writable:!1});return!1},
get supportsDocumentFonts(){Object.defineProperty(this,"supportsDocumentFonts",{value:!0,enumerable:!0,configurable:!0,writable:!1});return!0},get supportsDocumentColors(){Object.defineProperty(this,"supportsDocumentColors",{value:!0,enumerable:!0,configurable:!0,writable:!1});return!0},get loadingBar(){var b=new ProgressBar("#loadingBar",{});Object.defineProperty(this,"loadingBar",{value:b,enumerable:!0,configurable:!0,writable:!1});return b},get isHorizontalScrollbarEnabled(){return PresentationMode.active?
!1:this.container.scrollWidth>this.container.clientWidth},setTitleUsingUrl:function(b){this.url=b;try{this.setTitle(decodeURIComponent(getFileName(b))||b)}catch(a){this.setTitle(b)}},setTitle:function(b){},close:function(){document.getElementById("errorWrapper").setAttribute("hidden","true");if(this.pdfDocument){this.pdfDocument.destroy();this.pdfDocument=null;for(var b=document.getElementById("thumbnailView");b.hasChildNodes();)b.removeChild(b.lastChild);for(b=document.getElementById("viewer");b.hasChildNodes();)b.removeChild(b.lastChild);
"undefined"!==typeof PDFBug&&PDFBug.cleanup()}},open:function(b,a,e,c,d){this.pdfDocument&&Preferences.reload();this.close();e={password:e};"string"===typeof b?(this.setTitleUsingUrl(b),e.url=b):b&&"byteLength"in b&&(e.data=b);if(d)for(var f in d)e[f]=d[f];var g=this;g.loading=!0;g.downloadComplete=!1;PDFJS.getDocument(e,c,function(a,c){PasswordPrompt.updatePassword=a;PasswordPrompt.reason=c;PasswordPrompt.open()},function(a){g.progress(a.loaded/a.total)}).then(function(c){g.load(c,a);g.loading=!1;
$("#spinner").remove();$("#viewerContainer").focus()},function(a,c){var b=mozL10n.get("loading_error",null,"An error occurred while loading the PDF.");c&&"InvalidPDFException"===c.name&&(b=mozL10n.get("invalid_file_error",null,"Invalid or corrupted PDF file."));c&&"MissingPDFException"===c.name&&(b=mozL10n.get("missing_file_error",null,"Missing PDF file."));g.error(b,{message:a});g.loading=!1;$("#spinner").remove();$("#viewerContainer").focus()})},download:function(){function b(){c.downloadUrl(a,
e)}var a=this.url.split("#")[0],e=getPDFFileNameFromURL(a),c=new DownloadManager;c.onerror=function(a){PDFView.error("PDF failed to download.")};this.pdfDocument?this.downloadComplete?this.pdfDocument.getData().then(function(b){b=PDFJS.createBlob(b,"application/pdf");c.download(b,a,e)},b).then(null,b):b():b()},fallback:function(b){},navigateTo:function(b){var a="",e=this,c=function(d){e.pendingRefStr=null;var f=d instanceof Object?e.pagesRefMap[d.num+" "+d.gen+" R"]:d+1;f?(f>e.pages.length&&(f=e.pages.length),
e.pages[f-1].scrollIntoView(b),PDFHistory.push({dest:b,hash:a,page:f})):e.pdfDocument.getPageIndex(d).then(function(a){e.pagesRefMap[d.num+" "+d.gen+" R"]=a+1;c(d)})};this.destinationsPromise.then(function(){"string"===typeof b&&(a=b,b=e.destinations[b]);b instanceof Array&&c(b[0])})},getDestinationHash:function(b){if("string"===typeof b)return PDFView.getAnchorUrl("#"+escape(b));if(b instanceof Array){var a=b[0];if(a=a instanceof Object?this.pagesRefMap[a.num+" "+a.gen+" R"]:a+1){var a=PDFView.getAnchorUrl("#page="+
a),e=b[1];if("object"===typeof e&&"name"in e&&"XYZ"===e.name){var e=b[4]||this.currentScaleValue,c=parseFloat(e);c&&(e=100*c);a+="&zoom="+e;if(b[2]||b[3])a+=","+(b[2]||0)+","+(b[3]||0)}return a}}return""},getAnchorUrl:function(b){return b},error:function(b,a){var e=mozL10n.get("error_version_info",{version:PDFJS.version||"?",build:PDFJS.build||"?"},"PDF.js v{{version}} (build: {{build}})")+"\n";a&&(e+=mozL10n.get("error_message",{message:a.message},"Message: {{message}}"),a.stack?e+="\n"+mozL10n.get("error_stack",
{stack:a.stack},"Stack: {{stack}}"):(a.filename&&(e+="\n"+mozL10n.get("error_file",{file:a.filename},"File: {{file}}")),a.lineNumber&&(e+="\n"+mozL10n.get("error_line",{line:a.lineNumber},"Line: {{line}}"))));var c=document.getElementById("errorWrapper");c.removeAttribute("hidden");document.getElementById("errorMessage").textContent=b;var d=document.getElementById("errorClose");d.onclick=function(){c.setAttribute("hidden","true")};var f=document.getElementById("errorMoreInfo"),g=document.getElementById("errorShowMore"),
h=document.getElementById("errorShowLess");g.onclick=function(){f.removeAttribute("hidden");g.setAttribute("hidden","true");h.removeAttribute("hidden");f.style.height=f.scrollHeight+"px"};h.onclick=function(){f.setAttribute("hidden","true");g.removeAttribute("hidden");h.setAttribute("hidden","true")};g.oncontextmenu=noContextMenuHandler;h.oncontextmenu=noContextMenuHandler;d.oncontextmenu=noContextMenuHandler;g.removeAttribute("hidden");h.setAttribute("hidden","true");f.value=e},progress:function(b){b=
Math.round(100*b);if(b>PDFView.loadingBar.percent||isNaN(b))PDFView.loadingBar.percent=b},load:function(b,a){function e(a,c){a.onAfterDraw=function(){d||(d=!0,f());c.setImage(a.canvas)}}var c=this,d=!1,f=null,g=new Promise(function(a){f=a});PDFView.findController.reset();this.pdfDocument=b;DocumentProperties.resolveDataAvailable();var h=b.getDownloadInfo().then(function(){c.downloadComplete=!0;PDFView.loadingBar.hide();document.getElementById("outerContainer").classList.remove("loadingInProgress")}),
l=b.numPages,k=b.fingerprint;document.getElementById("numPages").textContent="of "+l;document.getElementById("pageNumber").max=l;PDFView.documentFingerprint=k;var m=PDFView.store=new ViewHistory(k);this.pageRotation=0;var n=this.pages=[],q=this.pagesRefMap={},p=this.thumbnails=[],t;this.pagesPromise=k=new Promise(function(a){t=a});var r=b.getPage(1),u=document.getElementById("viewer"),v=document.getElementById("thumbnailView");r.then(function(d){d=d.getViewport((a||1)*CSS_UNITS);for(var f=1;f<=l;++f){var k=
d.clone(),r=new PageView(u,f,a,c.navigateTo.bind(c),k),k=new ThumbnailView(v,f,k);e(r,k);n.push(r);p.push(k)}g.then(function(){if(PDFJS.disableAutoFetch)t();else for(var a=l,c=1;c<=l;++c)b.getPage(c).then(function(c,b){var e=n[c-1];e.pdfPage||e.setPdfPage(b);q[b.ref.num+" "+b.ref.gen+" R"]=c;a--;a||t()}.bind(null,c))});h.then(function(){var a=document.createEvent("CustomEvent");a.initCustomEvent("documentload",!0,!0,{});window.dispatchEvent(a)});PDFView.loadingBar.setWidth(u);PDFView.findController.resolveFirstPage();
PDFHistory.initialize(c.documentFingerprint)});var z,y=Preferences.get("showPreviousViewOnLoad").then(function(a){z=a}),D,F=Preferences.get("defaultZoomValue").then(function(a){D=a});Promise.all([r,m.initializedPromise,y,F]).then(function(){var b=null;if(z&&m.get("exists",!1))var b=m.get("page","1"),e=D||m.get("zoom",PDFView.currentScale),d=m.get("scrollLeft","0"),f=m.get("scrollTop","0"),b="page="+b+"&zoom="+e+","+d+","+f;else D&&(b="page=1&zoom="+D);c.setInitialView(b,a)},function(b){console.error(b);
r.then(function(){c.setInitialView(null,a)})});k.then(function(){PDFView.supportsPrinting&&b.getJavaScript().then(function(a){a.length&&(console.warn("Warning: JavaScript is not supported"),PDFView.fallback(PDFJS.UNSUPPORTED_FEATURES.javaScript));for(var c=/\bprint\s*\(/g,b=0,e=a.length;b<e;b++){var d=a[b];if(d&&c.test(d)){setTimeout(function(){window.print()});break}}})});y=this.destinationsPromise=b.getDestinations();y.then(function(a){c.destinations=a});Promise.all([k,y,PDFView.animationStartedPromise]).then(function(){b.getOutline().then(function(a){c.outline=
new DocumentOutlineView(a);document.getElementById("viewOutline").disabled=!a;a&&c.preferenceSidebarViewOnLoad===SidebarView.OUTLINE&&c.switchSidebarView("outline",!0)});b.getAttachments().then(function(a){c.attachments=new DocumentAttachmentsView(a);document.getElementById("viewAttachments").disabled=!a;a&&c.preferenceSidebarViewOnLoad===SidebarView.ATTACHMENTS&&c.switchSidebarView("attachments",!0)})});c.preferenceSidebarViewOnLoad===SidebarView.THUMBS&&Promise.all([r,g]).then(function(){c.switchSidebarView("thumbs",
!0)});b.getMetadata().then(function(a){var b=a.info;a=a.metadata;c.documentInfo=b;c.metadata=a;var e;a&&a.has("dc:title")&&(e=a.get("dc:title"));!e&&b&&b.Title&&(e=b.Title);e&&c.setTitle(e+" - "+document.title);b.IsAcroFormPresent&&(console.warn("Warning: AcroForm/XFA is not supported"),PDFView.fallback(PDFJS.UNSUPPORTED_FEATURES.forms))})},setInitialView:function(b,a){this.currentScale=0;this.currentScaleValue=null;document.getElementById("pageNumber").value=currentPageNumber=1;this.currentPosition=
null;PDFHistory.initialDestination?(this.navigateTo(PDFHistory.initialDestination),PDFHistory.initialDestination=null):this.initialBookmark?(this.setHash(this.initialBookmark),PDFHistory.push({hash:this.initialBookmark},!!this.initialBookmark),this.initialBookmark=null):b?this.setHash(b):a&&(this.setScale(a,!0),this.page=1);PDFView.currentScale===UNKNOWN_SCALE&&this.setScale(DEFAULT_SCALE,!0)},renderHighestPriority:function(b){PDFView.idleTimeout&&(clearTimeout(PDFView.idleTimeout),PDFView.idleTimeout=
null);b=b||this.getVisiblePages();if(b=this.getHighestPriority(b,this.pages,this.pageViewScroll.down))this.renderView(b,"page");else{if(this.sidebarOpen&&(b=this.getVisibleThumbs(),b=this.getHighestPriority(b,this.thumbnails,this.thumbnailViewScroll.down))){this.renderView(b,"thumbnail");return}this.printing||(PDFView.idleTimeout=setTimeout(function(){PDFView.cleanup()},CLEANUP_TIMEOUT))}},cleanup:function(){for(var b=0,a=this.pages.length;b<a;b++)this.pages[b]&&this.pages[b].renderingState!==RenderingStates.FINISHED&&
this.pages[b].reset();this.pdfDocument.cleanup();ThumbnailView.tempImageCache=null},getHighestPriority:function(b,a,e){var c=b.views,d=c.length;if(0===d)return!1;for(var f=0;f<d;++f){var g=c[f].view;if(!this.isViewFinished(g))return g}b=e?b.last.id:b.first.id-2;return a[b]&&!this.isViewFinished(a[b])?a[b]:!1},isViewFinished:function(b){return b.renderingState===RenderingStates.FINISHED},renderView:function(b,a){switch(b.renderingState){case RenderingStates.FINISHED:return!1;case RenderingStates.PAUSED:PDFView.highestPriorityPage=
a+b.id;b.resume();break;case RenderingStates.RUNNING:PDFView.highestPriorityPage=a+b.id;break;case RenderingStates.INITIAL:PDFView.highestPriorityPage=a+b.id,b.draw(this.renderHighestPriority.bind(this))}return!0},setHash:function(b){var a="Fit FitB FitH FitBH FitV FitBV FitR".split(" ");if(b)if(0<=b.indexOf("="))if(b=PDFView.parseQueryString(b),"nameddest"in b)PDFHistory.updateNextHashParam(b.nameddest),PDFView.navigateTo(b.nameddest);else{var e,c;"page"in b&&(e=b.page|0||1);if("zoom"in b){c=b.zoom.split(",");
var d=c[0],f=parseFloat(d),g="XYZ";f?d=f/100:0<=a.indexOf(d)&&(g=d);c=[null,{name:g},1<c.length?c[1]|0:null,2<c.length?c[2]|0:null,d]}c?this.pages[(e||this.page)-1].scrollIntoView(c):e&&(this.page=e);"pagemode"in b&&("thumbs"===b.pagemode||"bookmarks"===b.pagemode||"attachments"===b.pagemode?this.switchSidebarView("bookmarks"===b.pagemode?"outline":b.pagemode,!0):"none"===b.pagemode&&this.sidebarOpen&&document.getElementById("sidebarToggle").click())}else/^\d+$/.test(b)?this.page=b:(PDFHistory.updateNextHashParam(unescape(b)),
PDFView.navigateTo(unescape(b)))},switchSidebarView:function(b,a){a&&!this.sidebarOpen&&document.getElementById("sidebarToggle").click();var e=document.getElementById("thumbnailView"),c=document.getElementById("outlineView"),d=document.getElementById("attachmentsView"),f=document.getElementById("viewThumbnail"),g=document.getElementById("viewOutline"),h=document.getElementById("viewAttachments");switch(b){case "thumbs":var l=e.classList.contains("hidden");f.classList.add("toggled");g.classList.remove("toggled");
h.classList.remove("toggled");e.classList.remove("hidden");c.classList.add("hidden");d.classList.add("hidden");PDFView.renderHighestPriority();l&&scrollIntoView(document.getElementById("thumbnailContainer"+this.page));break;case "outline":f.classList.remove("toggled");g.classList.add("toggled");h.classList.remove("toggled");e.classList.add("hidden");c.classList.remove("hidden");d.classList.add("hidden");if(g.getAttribute("disabled"))break;break;case "attachments":f.classList.remove("toggled"),g.classList.remove("toggled"),
h.classList.add("toggled"),e.classList.add("hidden"),c.classList.add("hidden"),d.classList.remove("hidden"),h.getAttribute("disabled")}},getVisiblePages:function(){if(PresentationMode.active){var b=[],a=this.pages[this.page-1];b.push({id:a.id,view:a});return{first:a,last:a,views:b}}return this.getVisibleElements(this.container,this.pages,!0)},getVisibleThumbs:function(){return this.getVisibleElements(this.thumbnailContainer,this.thumbnails)},getVisibleElements:function(b,a,e){var c=b.scrollTop,d=
c+b.clientHeight,f=b.scrollLeft,g=f+b.clientWidth;b=[];for(var h,l,k,m,n,q=0,p=a.length;q<p;++q)if(h=a[q],l=h.el.offsetTop+h.el.clientTop,k=h.el.clientHeight,!(l+k<c)){if(l>d)break;n=h.el.offsetLeft+h.el.clientLeft;m=h.el.clientWidth;n+m<f||n>g||(m=Math.max(0,c-l)+Math.max(0,l+k-d),k=100*(k-m)/k|0,b.push({id:h.id,x:n,y:l,view:h,percent:k}))}a=b[0];c=b[b.length-1];e&&b.sort(function(a,c){var b=a.percent-c.percent;return.001<Math.abs(b)?-b:a.id-c.id});return{first:a,last:c,views:b}},parseQueryString:function(b){b=
b.split("&");for(var a={},e=0,c=b.length;e<c;++e){var d=b[e].split("="),f=1<d.length?d[1]:null;a[decodeURIComponent(d[0])]=decodeURIComponent(f)}return a},beforePrint:function(){if(this.supportsPrinting){var b=!1,a,e;if(this.pages.length)for(a=0,e=this.pages.length;a<e;++a){if(!this.pages[a].pdfPage){b=!0;break}}else b=!0;if(b)b=mozL10n.get("printing_not_ready",null,"Warning: The PDF is not fully loaded for printing."),window.alert(b);else for(this.printing=!0,this.renderHighestPriority(),document.querySelector("body").setAttribute("data-mozPrintCallback",
!0),a=0,e=this.pages.length;a<e;++a)this.pages[a].beforePrint()}else b=mozL10n.get("printing_not_supported",null,"Warning: Printing is not fully supported by this browser."),this.error(b)},afterPrint:function(){for(var b=document.getElementById("printContainer");b.hasChildNodes();)b.removeChild(b.lastChild);this.printing=!1;this.renderHighestPriority()},rotatePages:function(b){var a=this.pages[this.page-1],e;this.pageRotation=(this.pageRotation+360+b)%360;b=0;for(e=this.pages.length;b<e;b++){var c=
this.pages[b];c.update(c.scale,this.pageRotation)}b=0;for(e=this.thumbnails.length;b<e;b++)this.thumbnails[b].update(this.pageRotation);this.setScale(this.currentScaleValue,!0,!0);this.renderHighestPriority();a&&a.scrollIntoView()},mouseScroll:function(b){var a=(new Date).getTime(),e=this.mouseScrollTimeStamp;a>e&&50>a-e||((0<this.mouseScrollDelta&&0>b||0>this.mouseScrollDelta&&0<b)&&this.clearMouseScrollState(),this.mouseScrollDelta+=b,120<=Math.abs(this.mouseScrollDelta)&&(b=0<this.mouseScrollDelta?
-1:1,this.clearMouseScrollState(),e=this.page,1===e&&-1===b||e===this.pages.length&&1===b||(this.page+=b,this.mouseScrollTimeStamp=a)))},clearMouseScrollState:function(){this.mouseScrollDelta=this.mouseScrollTimeStamp=0}},PageView=function(b,a,e,c,d){function f(a,c,b){function e(a,c){a.href=PDFView.getDestinationHash(c);a.onclick=function(){c&&PDFView.navigateTo(c);return!1};c&&(a.className="internalLink")}function d(a,c){a.href=PDFView.getAnchorUrl("");a.onclick=function(){switch(c){case "GoToPage":document.getElementById("pageNumber").focus();
break;case "GoBack":PDFHistory.back();break;case "GoForward":PDFHistory.forward();break;case "Find":PDFView.supportsIntegratedFind||PDFView.findBar.toggle();break;case "NextPage":PDFView.page++;break;case "PrevPage":PDFView.page--;break;case "LastPage":PDFView.page=PDFView.pages.length;break;case "FirstPage":PDFView.page=1}return!1};a.className="internalLink"}c.getAnnotations().then(function(f){b=b.clone({dontFlip:!0});var g="matrix("+b.transform.join(",")+")",r,u,v,z;if(h.annotationLayer){v=0;for(z=
f.length;v<z;v++)r=f[v],(u=h.annotationLayer.querySelector('[data-annotation-id="'+r.id+'"]'))&&CustomStyle.setProp("transform",u,g);h.annotationLayer.removeAttribute("hidden")}else for(v=0,z=f.length;v<z;v++)if((r=f[v])&&r.hasHtml){u=PDFJS.AnnotationUtils.getHtmlElement(r,c.commonObjs);u.setAttribute("data-annotation-id",r.id);mozL10n.translate(u);var y=r.rect,D=c.view,y=PDFJS.Util.normalizeRect([y[0],D[3]-y[1]+D[1],y[2],D[3]-y[3]+D[1]]);u.style.left=y[0]+"px";u.style.top=y[1]+"px";u.style.position=
"absolute";CustomStyle.setProp("transform",u,g);CustomStyle.setProp("transformOrigin",u,-y[0]+"px "+-y[1]+"px");"Link"!==r.subtype||r.url||(y=u.getElementsByTagName("a")[0])&&(r.action?d(y,r.action):e(y,"dest"in r?r.dest:null));h.annotationLayer||(r=document.createElement("div"),r.className="annotationLayer",a.appendChild(r),h.annotationLayer=r);h.annotationLayer.appendChild(u)}})}this.id=a;this.rotation=0;this.scale=e||1;this.viewport=d;this.pdfPageRotate=d.rotation;this.hasRestrictedScaling=!1;
this.renderingState=RenderingStates.INITIAL;this.annotationLayer=this.zoomLayer=this.textLayer=this.resume=null;a=document.createElement("a");a.name=""+this.id;var g=this.el=document.createElement("div");g.id="pageContainer"+this.id;g.className="page";g.style.width=Math.floor(this.viewport.width)+"px";g.style.height=Math.floor(this.viewport.height)+"px";b.appendChild(a);b.appendChild(g);this.setPdfPage=function(a){this.pdfPage=a;this.pdfPageRotate=a.rotate;this.viewport=a.getViewport(this.scale*CSS_UNITS,
(this.rotation+this.pdfPageRotate)%360);this.stats=a.stats;this.reset()};this.destroy=function(){this.zoomLayer=null;this.reset();this.pdfPage&&this.pdfPage.destroy()};this.reset=function(a){this.renderTask&&this.renderTask.cancel();this.resume=null;this.renderingState=RenderingStates.INITIAL;g.style.width=Math.floor(this.viewport.width)+"px";g.style.height=Math.floor(this.viewport.height)+"px";for(var c=g.childNodes,b=g.childNodes.length-1;0<=b;b--){var e=c[b];this.zoomLayer&&this.zoomLayer===e||
a&&this.annotationLayer===e||g.removeChild(e)}g.removeAttribute("data-loaded");a?this.annotationLayer&&this.annotationLayer.setAttribute("hidden","true"):this.annotationLayer=null;this.canvas&&(this.canvas.width=0,this.canvas.height=0,delete this.canvas);this.loadingIconDiv=document.createElement("div");this.loadingIconDiv.className="loadingIcon";g.appendChild(this.loadingIconDiv)};this.update=function(a,c){this.scale=a||this.scale;"undefined"!==typeof c&&(this.rotation=c);this.viewport=this.viewport.clone({scale:this.scale*
CSS_UNITS,rotation:(this.rotation+this.pdfPageRotate)%360});var b=!1;if(this.canvas&&0<PDFJS.maxCanvasPixels){var e=this.canvas.getContext("2d"),e=getOutputScale(e);(Math.floor(this.viewport.width)*e.sx|0)*(Math.floor(this.viewport.height)*e.sy|0)>PDFJS.maxCanvasPixels&&(b=!0)}this.canvas&&(PDFJS.useOnlyCssZoom||this.hasRestrictedScaling&&b)?this.cssTransform(this.canvas,!0):(this.canvas&&!this.zoomLayer&&(this.zoomLayer=this.canvas.parentNode,this.zoomLayer.style.position="absolute"),this.zoomLayer&&
this.cssTransform(this.zoomLayer.firstChild),this.reset(!0))};this.cssTransform=function(a,c){var b=this.viewport.width,e=this.viewport.height;a.style.width=a.parentNode.style.width=g.style.width=Math.floor(b)+"px";a.style.height=a.parentNode.style.height=g.style.height=Math.floor(e)+"px";var d=this.viewport.rotation-a._viewport.rotation,p=Math.abs(d),h=1,r=1;if(90===p||270===p)h=e/b,r=b/e;CustomStyle.setProp("transform",a,"rotate("+d+"deg) scale("+h+","+r+")");if(this.textLayer){p=this.textLayer.viewport;
e=Math.abs(this.viewport.rotation-p.rotation);d=b/p.width;if(90===e||270===e)d=b/p.height;var b=this.textLayer.textLayerDiv,u,v;switch(e){case 0:u=v=0;break;case 90:u=0;v="-"+b.style.height;break;case 180:u="-"+b.style.width;v="-"+b.style.height;break;case 270:u="-"+b.style.width;v=0;break;default:console.error("Bad rotation value.")}CustomStyle.setProp("transform",b,"rotate("+e+"deg) scale("+d+", "+d+") translate("+u+", "+v+")");CustomStyle.setProp("transformOrigin",b,"0% 0%")}c&&this.annotationLayer&&
f(g,this.pdfPage,this.viewport)};Object.defineProperty(this,"width",{get:function(){return this.viewport.width},enumerable:!0});Object.defineProperty(this,"height",{get:function(){return this.viewport.height},enumerable:!0});var h=this;this.getPagePoint=function(a,c){return this.viewport.convertToPdfPoint(a,c)};this.scrollIntoView=function(a){if(PresentationMode.active){if(PDFView.page!==this.id){PDFView.page=this.id;return}a=null;PDFView.setScale(PDFView.currentScaleValue,!0,!0)}if(a){var c=0,b=
0,e=0,d=0,f,h;h=0===this.rotation%180?!1:!0;f=(h?this.height:this.width)/this.scale/CSS_UNITS;h=(h?this.width:this.height)/this.scale/CSS_UNITS;var r=0;switch(a[1].name){case "XYZ":c=a[2];b=a[3];r=a[4];c=null!==c?c:0;b=null!==b?b:h;break;case "Fit":case "FitB":r="page-fit";break;case "FitH":case "FitBH":b=a[2];r="page-width";break;case "FitV":case "FitBV":c=a[2];e=f;d=h;r="page-height";break;case "FitR":c=a[2];b=a[3];e=a[4]-c;d=a[5]-b;f=(PDFView.container.clientWidth-SCROLLBAR_PADDING)/e/CSS_UNITS;
h=(PDFView.container.clientHeight-SCROLLBAR_PADDING)/d/CSS_UNITS;r=Math.min(Math.abs(f),Math.abs(h));break;default:return}r&&r!==PDFView.currentScale?PDFView.setScale(r,!0,!0):PDFView.currentScale===UNKNOWN_SCALE&&PDFView.setScale(DEFAULT_SCALE,!0,!0);"page-fit"!==r||a[4]?(a=[this.viewport.convertToViewportPoint(c,b),this.viewport.convertToViewportPoint(c+e,b+d)],scrollIntoView(g,{left:Math.min(a[0][0],a[1][0]),top:Math.min(a[0][1],a[1][1])})):scrollIntoView(g)}else scrollIntoView(g)};this.getTextContent=
function(){return PDFView.getPage(this.id).then(function(a){return a.getTextContent()})};this.draw=function(a){function c(e){z===v.renderTask&&(v.renderTask=null);if("cancelled"!==e){v.renderingState=RenderingStates.FINISHED;v.loadingIconDiv&&(g.removeChild(v.loadingIconDiv),delete v.loadingIconDiv);v.zoomLayer&&(g.removeChild(v.zoomLayer),v.zoomLayer=null);e&&PDFView.error(mozL10n.get("rendering_error",null,"An error occurred while rendering the page."),e);v.stats=b.stats;v.updateStats();if(v.onAfterDraw)v.onAfterDraw();
e=document.createEvent("CustomEvent");e.initCustomEvent("pagerender",!0,!0,{pageNumber:b.pageNumber});g.dispatchEvent(e);a()}}var b=this.pdfPage;if(!this.pagePdfPromise)if(b){this.renderingState!==RenderingStates.INITIAL&&console.error("Must be in new state before drawing");this.renderingState=RenderingStates.RUNNING;var e=this.viewport,d=document.createElement("div");d.style.width=g.style.width;d.style.height=g.style.height;d.classList.add("canvasWrapper");var p=document.createElement("canvas");
p.id="page"+this.id;d.appendChild(p);this.annotationLayer?g.insertBefore(d,this.annotationLayer):g.appendChild(d);this.canvas=p;var d=p.getContext("2d"),h=getOutputScale(d);if(PDFJS.useOnlyCssZoom){var r=e.clone({scale:CSS_UNITS});h.sx*=r.width/e.width;h.sy*=r.height/e.height;h.scaled=!0}0<PDFJS.maxCanvasPixels&&(r=Math.sqrt(PDFJS.maxCanvasPixels/(e.width*e.height)),h.sx>r||h.sy>r?(h.sx=r,h.sy=r,this.hasRestrictedScaling=h.scaled=!0):this.hasRestrictedScaling=!1);p.width=Math.floor(e.width)*h.sx|
0;p.height=Math.floor(e.height)*h.sy|0;p.style.width=Math.floor(e.width)+"px";p.style.height=Math.floor(e.height)+"px";p._viewport=e;e=null;PDFJS.disableTextLayer||(e=document.createElement("div"),e.className="textLayer",e.style.width=p.style.width,e.style.height=p.style.height,this.annotationLayer?g.insertBefore(e,this.annotationLayer):g.appendChild(e));var u=this.textLayer=e?new TextLayerBuilder({textLayerDiv:e,pageIndex:this.id-1,lastScrollSource:PDFView,viewport:this.viewport,isViewerInPresentationMode:PresentationMode.active,
findController:PDFView.findController}):null;d._scaleX=h.sx;d._scaleY=h.sy;h.scaled&&d.scale(h.sx,h.sy);var v=this,z=this.renderTask=this.pdfPage.render({canvasContext:d,viewport:this.viewport,textLayer:u,continueCallback:function(a){PDFView.highestPriorityPage!=="page"+v.id?(v.renderingState=RenderingStates.PAUSED,v.resume=function(){v.renderingState=RenderingStates.RUNNING;a()}):a()}});this.renderTask.promise.then(function(){c(null);u&&v.getTextContent().then(function(a){u.setTextContent(a)})},
function(a){c(a)});f(g,b,this.viewport);g.setAttribute("data-loaded",!0);cache.push(this)}else p=PDFView.getPage(this.id),p.then(function(c){delete this.pagePdfPromise;this.setPdfPage(c);this.draw(a)}.bind(this)),this.pagePdfPromise=p};this.beforePrint=function(){var a=this.pdfPage,c=a.getViewport(1),b=document.createElement("canvas");b.width=2*Math.floor(c.width);b.height=2*Math.floor(c.height);b.style.width=2*c.width+"pt";b.style.height=2*c.height+"pt";CustomStyle.setProp("transform",b,"scale(0.5, 0.5)");
CustomStyle.setProp("transformOrigin",b,"0% 0%");var e=document.getElementById("printContainer"),d=document.createElement("div");d.style.width=c.width+"pt";d.style.height=c.height+"pt";d.appendChild(b);e.appendChild(d);b.mozPrintCallback=function(e){var d=e.context;d.save();d.fillStyle="rgb(255, 255, 255)";d.fillRect(0,0,b.width,b.height);d.restore();d.scale(2,2);a.render({canvasContext:d,viewport:c,intent:"print"}).promise.then(function(){e.done()},function(a){console.error(a);"abort"in e?e.abort():
e.done()})}};this.updateStats=function(){this.stats&&PDFJS.pdfBug&&Stats.enabled&&Stats.add(this.id,this.stats)}},ThumbnailView=function(b,a,e){function c(a,c){var b=ThumbnailView.tempImageCache;b||(b=document.createElement("canvas"),ThumbnailView.tempImageCache=b);b.width=a;b.height=c;return b}var d=document.createElement("a");d.href=PDFView.getAnchorUrl("#page="+a);d.title="Page "+a;d.onclick=function(){PDFView.page=a;return!1};this.pdfPage=void 0;this.viewport=e;this.pdfPageRotate=e.rotation;this.rotation=
0;this.pageWidth=this.viewport.width;this.pageHeight=this.viewport.height;this.pageRatio=this.pageWidth/this.pageHeight;this.id=a;this.canvasWidth=98;this.canvasHeight=this.canvasWidth/this.pageWidth*this.pageHeight;this.scale=this.canvasWidth/this.pageWidth;var f=this.el=document.createElement("div");f.id="thumbnailContainer"+a;f.className="thumbnail";1===a&&f.classList.add("selected");var g=document.createElement("div");g.className="thumbnailSelectionRing";g.style.width=this.canvasWidth+"px";g.style.height=
this.canvasHeight+"px";f.appendChild(g);d.appendChild(f);b.appendChild(d);this.hasImage=!1;this.renderingState=RenderingStates.INITIAL;this.setPdfPage=function(a){this.pdfPage=a;this.pdfPageRotate=a.rotate;this.viewport=a.getViewport(1,(this.rotation+this.pdfPageRotate)%360);this.update()};this.update=function(a){void 0!==a&&(this.rotation=a);this.viewport=this.viewport.clone({scale:1,rotation:(this.rotation+this.pdfPageRotate)%360});this.pageWidth=this.viewport.width;this.pageHeight=this.viewport.height;
this.pageRatio=this.pageWidth/this.pageHeight;this.canvasHeight=this.canvasWidth/this.pageWidth*this.pageHeight;this.scale=this.canvasWidth/this.pageWidth;f.removeAttribute("data-loaded");g.textContent="";g.style.width=this.canvasWidth+"px";g.style.height=this.canvasHeight+"px";this.hasImage=!1;this.renderingState=RenderingStates.INITIAL;this.resume=null};this.getPageDrawContext=function(){var c=document.createElement("canvas");c.id="thumbnail"+a;c.width=this.canvasWidth;c.height=this.canvasHeight;
c.className="thumbnailImage";c.setAttribute("aria-label","Thumbnail of Page "+a);f.setAttribute("data-loaded",!0);g.appendChild(c);c=c.getContext("2d");c.save();c.fillStyle="rgb(255, 255, 255)";c.fillRect(0,0,this.canvasWidth,this.canvasHeight);c.restore();return c};this.drawingRequired=function(){return!this.hasImage};this.draw=function(a){if(this.pdfPage)if(this.renderingState!==RenderingStates.INITIAL&&console.error("Must be in new state before drawing"),this.renderingState=RenderingStates.RUNNING,
this.hasImage)a();else{var c=this,b=this.getPageDrawContext(),e=this.viewport.clone({scale:this.scale});this.pdfPage.render({canvasContext:b,viewport:e,continueCallback:function(a){PDFView.highestPriorityPage!=="thumbnail"+c.id?(c.renderingState=RenderingStates.PAUSED,c.resume=function(){c.renderingState=RenderingStates.RUNNING;a()}):a()}}).promise.then(function(){c.renderingState=RenderingStates.FINISHED;a()},function(b){c.renderingState=RenderingStates.FINISHED;a()});this.hasImage=!0}else PDFView.getPage(this.id).then(function(c){this.setPdfPage(c);
this.draw(a)}.bind(this))};this.setImage=function(a){if(!this.pdfPage)PDFView.getPage(this.id).then(function(c){this.setPdfPage(c);this.setImage(a)}.bind(this));else if(!this.hasImage&&a){this.renderingState=RenderingStates.FINISHED;var b=this.getPageDrawContext(),e=a,d=a.width,f=a.height;if(2<Math.max(a.width/b.canvas.width,a.height/b.canvas.height)){var d=d>>1,f=f>>1,e=c(d,f),g=e.getContext("2d");for(g.drawImage(a,0,0,a.width,a.height,0,0,d,f);2<Math.max(d/b.canvas.width,f/b.canvas.height);)g.drawImage(e,
0,0,d,f,0,0,d>>1,f>>1),d>>=1,f>>=1}b.drawImage(e,0,0,d,f,0,0,b.canvas.width,b.canvas.height);this.hasImage=!0}}};ThumbnailView.tempImageCache=null;var FIND_SCROLL_OFFSET_TOP=-50,FIND_SCROLL_OFFSET_LEFT=-400,MAX_TEXT_DIVS_TO_RENDER=1E5,RENDER_DELAY=200,NonWhitespaceRegexp=/\S/;function isAllWhitespace(b){return!NonWhitespaceRegexp.test(b)}
var TextLayerBuilder=function(){function b(a){this.textLayerDiv=a.textLayerDiv;this.divContentDone=this.layoutDone=!1;this.pageIdx=a.pageIndex;this.matches=[];this.lastScrollSource=a.lastScrollSource||null;this.viewport=a.viewport;this.isViewerInPresentationMode=a.isViewerInPresentationMode;this.textDivs=[];this.findController=a.findController||null}b.prototype={renderLayer:function(){var a=document.createDocumentFragment(),b=this.textDivs,c=b.length,d=document.createElement("canvas").getContext("2d");
if(!(c>MAX_TEXT_DIVS_TO_RENDER)){for(var f,g,h=0;h<c;h++){var l=b[h];if(void 0===l.dataset.isWhitespace){var k=l.style.fontSize,m=l.style.fontFamily;if(k!==f||m!==g)d.font=k+" "+m,f=k,g=m;m=d.measureText(l.textContent).width;0<m&&(a.appendChild(l),k=l.dataset.angle,m="scale("+l.dataset.canvasWidth/m+", 1)",k&&(m="rotate("+k+"deg) "+m),CustomStyle.setProp("transform",l,m),CustomStyle.setProp("transformOrigin",l,"0% 0%"))}}this.textLayerDiv.appendChild(a);this.renderingDone=!0;this.updateMatches()}},
setupRenderLayoutTimer:function(){var a=this,b=null===this.lastScrollSource?0:this.lastScrollSource.lastScroll;Date.now()-b>RENDER_DELAY?this.renderLayer():(this.renderTimer&&clearTimeout(this.renderTimer),this.renderTimer=setTimeout(function(){a.setupRenderLayoutTimer()},RENDER_DELAY))},appendText:function(a,b){var c=b[a.fontName],d=document.createElement("div");this.textDivs.push(d);if(isAllWhitespace(a.str))d.dataset.isWhitespace=!0;else{var f=PDFJS.Util.transform(this.viewport.transform,a.transform),
g=Math.atan2(f[1],f[0]);c.vertical&&(g+=Math.PI/2);var h=Math.sqrt(f[2]*f[2]+f[3]*f[3]),l=h;c.ascent?l*=c.ascent:c.descent&&(l*=1+c.descent);var k;0===g?(k=f[4],f=f[5]-l):(k=f[4]+l*Math.sin(g),f=f[5]-l*Math.cos(g));d.style.position="absolute";d.style.left=k+"px";d.style.top=f+"px";d.style.fontSize=h+"px";d.style.fontFamily=c.fontFamily;d.textContent=a.str;d.dataset.fontName=a.fontName;0!==g&&(d.dataset.angle=180/Math.PI*g);d.dataset.canvasWidth=c.vertical?a.height*this.viewport.scale:a.width*this.viewport.scale}},
setTextContent:function(a){this.textContent=a;for(var b=a.items,c=0,d=b.length;c<d;c++)this.appendText(b[c],a.styles);this.divContentDone=!0;this.setupRenderLayoutTimer()},convertMatches:function(a){for(var b=0,c=0,d=this.textContent.items,f=d.length-1,g=null===this.findController?0:this.findController.state.query.length,h=[],l=0,k=a.length;l<k;l++){for(var m=a[l];b!==f&&m>=c+d[b].str.length;)c+=d[b].str.length,b++;b===d.length&&console.error("Could not find a matching mapping");for(var n={begin:{divIdx:b,
offset:m-c}},m=m+g;b!==f&&m>c+d[b].str.length;)c+=d[b].str.length,b++;n.end={divIdx:b,offset:m-c};h.push(n)}return h},renderMatches:function(a){function b(a,e){var d=a.divIdx;f[d].textContent="";c(d,0,a.offset,e)}function c(a,c,b,e){var g=f[a];a=d[a].str.substring(c,b);a=document.createTextNode(a);e?(c=document.createElement("span"),c.className=e,c.appendChild(a),g.appendChild(c)):g.appendChild(a)}if(0!==a.length){var d=this.textContent.items,f=this.textDivs,g=null,h=null===this.findController?!1:
this.pageIdx===this.findController.selected.pageIdx,l=null===this.findController?-1:this.findController.selected.matchIdx,k=l,m=k+1;if(null===this.findController?0:this.findController.state.highlightAll)k=0,m=a.length;else if(!h)return;for(;k<m;k++){var n=a[k],q=n.begin,n=n.end,p=h&&k===l,t=p?" selected":"";p&&!this.isViewerInPresentationMode&&scrollIntoView(f[q.divIdx],{top:FIND_SCROLL_OFFSET_TOP,left:FIND_SCROLL_OFFSET_LEFT});g&&q.divIdx===g.divIdx?c(g.divIdx,g.offset,q.offset):(null!==g&&c(g.divIdx,
g.offset,void 0),b(q));if(q.divIdx===n.divIdx)c(q.divIdx,q.offset,n.offset,"highlight"+t);else{c(q.divIdx,q.offset,void 0,"highlight begin"+t);g=q.divIdx+1;for(q=n.divIdx;g<q;g++)f[g].className="highlight middle"+t;b(n,"highlight end"+t)}g=n}g&&c(g.divIdx,g.offset,void 0)}},updateMatches:function(){if(this.renderingDone){for(var a=this.matches,b=this.textDivs,c=this.textContent.items,d=-1,f=0,g=a.length;f<g;f++){for(var h=a[f],d=Math.max(d,h.begin.divIdx),l=h.end.divIdx;d<=l;d++){var k=b[d];k.textContent=
c[d].str;k.className=""}d=h.end.divIdx+1}null!==this.findController&&this.findController.active&&(this.matches=this.convertMatches(null===this.findController?[]:this.findController.pageMatches[this.pageIdx]||[]),this.renderMatches(this.matches))}}};return b}(),DocumentOutlineView=function(b){function a(a,c){a.href=PDFView.getDestinationHash(c.dest);a.onclick=function(a){PDFView.navigateTo(c.dest);return!1}}for(var e=document.getElementById("outlineView");e.firstChild;)e.removeChild(e.firstChild);
if(b)for(b=[{parent:e,items:b}];0<b.length;){var e=b.shift(),c,d=e.items.length;for(c=0;c<d;c++){var f=e.items[c],g=document.createElement("div");g.className="outlineItem";var h=document.createElement("a");a(h,f);h.textContent=f.title;g.appendChild(h);0<f.items.length&&(h=document.createElement("div"),h.className="outlineItems",g.appendChild(h),b.push({parent:h,items:f.items}));e.parent.appendChild(g)}}else e.classList.contains("hidden")||PDFView.switchSidebarView("thumbs")},DocumentAttachmentsView=
function(b){function a(a,c){a.onclick=function(a){(new DownloadManager).downloadData(c.content,getFileName(c.filename),"");return!1}}for(var e=document.getElementById("attachmentsView");e.firstChild;)e.removeChild(e.firstChild);if(b)for(var c=Object.keys(b).sort(function(a,c){return a.toLowerCase().localeCompare(c.toLowerCase())}),d=0,f=c.length;d<f;d++){var g=b[c[d]],h=document.createElement("div");h.className="attachmentsItem";var l=document.createElement("button");a(l,g);l.textContent=getFileName(g.filename);
h.appendChild(l);e.appendChild(h)}else e.classList.contains("hidden")||PDFView.switchSidebarView("thumbs")};function webViewerLoad(b){PDFView.initialize().then(webViewerInitialized)}
function webViewerInitialized(){var b=PDFView.parseQueryString(document.location.search.substring(1)),b="file"in b?b.file:DEFAULT_URL,a=document.location.hash.substring(1),a=PDFView.parseQueryString(a);"disableWorker"in a&&(PDFJS.disableWorker="true"===a.disableWorker);"disableRange"in a&&(PDFJS.disableRange="true"===a.disableRange);"disableAutoFetch"in a&&(PDFJS.disableAutoFetch="true"===a.disableAutoFetch);"disableFontFace"in a&&(PDFJS.disableFontFace="true"===a.disableFontFace);"disableHistory"in
a&&(PDFJS.disableHistory="true"===a.disableHistory);"webgl"in a&&(PDFJS.disableWebGL="true"!==a.webgl);"useOnlyCssZoom"in a&&(PDFJS.useOnlyCssZoom="true"===a.useOnlyCssZoom);"verbosity"in a&&(PDFJS.verbosity=a.verbosity|0);"ignoreCurrentPositionOnZoom"in a&&(IGNORE_CURRENT_POSITION_ON_ZOOM="true"===a.ignoreCurrentPositionOnZoom);var e=PDFJS.locale||navigator.language;"locale"in a&&(e=a.locale);mozL10n.setLanguage(e);if("textLayer"in a)switch(a.textLayer){case "off":PDFJS.disableTextLayer=!0;break;
case "visible":case "shadow":case "hover":document.getElementById("viewer").classList.add("textLayer-"+a.textLayer)}"pdfBug"in a&&(PDFJS.pdfBug=!0,a=a.pdfBug.split(","),PDFBug.enable(a),PDFBug.init());PDFView.supportsPrinting||(document.getElementById("print").classList.add("hidden"),document.getElementById("secondaryPrint").classList.add("hidden"));PDFView.supportsFullscreen||(document.getElementById("presentationMode").classList.add("hidden"),document.getElementById("secondaryPresentationMode").classList.add("hidden"));
PDFView.supportsIntegratedFind&&document.getElementById("viewFind").classList.add("hidden");PDFJS.UnsupportedManager.listen(PDFView.fallback.bind(PDFView));document.getElementById("scaleSelect").oncontextmenu=noContextMenuHandler;var c=document.getElementById("mainContainer"),d=document.getElementById("outerContainer");c.addEventListener("transitionend",function(a){a.target===c&&(a=document.createEvent("UIEvents"),a.initUIEvent("resize",!1,!1,window,0),window.dispatchEvent(a),d.classList.remove("sidebarMoving"))},
!0);document.getElementById("sidebarToggle").addEventListener("click",function(){this.classList.toggle("toggled");d.classList.add("sidebarMoving");d.classList.toggle("sidebarOpen");PDFView.sidebarOpen=d.classList.contains("sidebarOpen");PDFView.renderHighestPriority()});document.getElementById("viewThumbnail").addEventListener("click",function(){PDFView.switchSidebarView("thumbs")});document.getElementById("viewOutline").addEventListener("click",function(){PDFView.switchSidebarView("outline")});document.getElementById("viewAttachments").addEventListener("click",
function(){PDFView.switchSidebarView("attachments")});document.getElementById("previous").addEventListener("click",function(){PDFView.page--});document.getElementById("next").addEventListener("click",function(){PDFView.page++});document.getElementById("zoomIn").addEventListener("click",function(){PDFView.zoomIn()});document.getElementById("zoomOut").addEventListener("click",function(){PDFView.zoomOut()});document.getElementById("pageNumber").addEventListener("click",function(){this.select()});document.getElementById("pageNumber").addEventListener("change",
function(){PDFView.page=this.value|0;this.value!==(this.value|0).toString()&&(this.value=PDFView.page)});document.getElementById("scaleSelect").addEventListener("change",function(){PDFView.setScale(this.value)});document.getElementById("presentationMode").addEventListener("click",SecondaryToolbar.presentationModeClick.bind(SecondaryToolbar));document.getElementById("openFile").addEventListener("click",SecondaryToolbar.openFileClick.bind(SecondaryToolbar));document.getElementById("print").addEventListener("click",
SecondaryToolbar.printClick.bind(SecondaryToolbar));document.getElementById("download").addEventListener("click",SecondaryToolbar.downloadClick.bind(SecondaryToolbar));if(b&&0===b.lastIndexOf("file:",0)){PDFView.setTitleUsingUrl(b);var f=new XMLHttpRequest;f.onload=function(){PDFView.open(new Uint8Array(f.response),0)};try{f.open("GET",b),f.responseType="arraybuffer",f.send()}catch(g){PDFView.error(mozL10n.get("loading_error",null,"An error occurred while loading the PDF."),g)}}else PDFView.open(PDFView.documentUrl,
0)}
function updateViewarea(){if(PDFView.initialized){var b=PDFView.getVisiblePages(),a=b.views;if(0!==a.length){cache.resize(Math.max(DEFAULT_CACHE_SIZE,2*a.length+1));PDFView.renderHighestPriority(b);for(var e=PDFView.page,b=b.first,c=0,d=a.length,f=!1;c<d;++c){var g=a[c];if(100>g.percent)break;if(g.id===PDFView.page){f=!0;break}}f||(e=a[0].id);PresentationMode.active||(updateViewarea.inProgress=!0,PDFView.page=e,updateViewarea.inProgress=!1);var a=PDFView.currentScale,e=PDFView.currentScaleValue,h=
parseFloat(e)===a?Math.round(1E4*a)/100:e,l=b.id,a="#page="+l+("&zoom="+h),e=PDFView.container,b=PDFView.pages[l-1].getPagePoint(e.scrollLeft-b.x,e.scrollTop-b.y),k=Math.round(b[0]),m=Math.round(b[1]),a=a+(","+k+","+m);PDFView.currentPosition=PresentationMode.active||PresentationMode.switchInProgress?null:{page:l,left:k,top:m};PDFView.store.initializedPromise.then(function(){PDFView.store.setMultiple({exists:!0,page:l,zoom:h,scrollLeft:k,scrollTop:m}).catch(function(){})});b=PDFView.getAnchorUrl(a);
document.getElementById("viewBookmark").href=b;document.getElementById("secondaryViewBookmark").href=b;PDFHistory.updateCurrentBookmark(a,l)}}}function selectScaleOption(b){for(var a=document.getElementById("scaleSelect").options,e=!1,c=0;c<a.length;c++){var d=a[c];d.value!==b?d.selected=!1:e=d.selected=!0}return e}
window.addEventListener("localized",function(b){document.getElementsByTagName("html")[0].dir=mozL10n.getDirection();PDFView.animationStartedPromise.then(function(){var a=document.getElementById("scaleSelectContainer");if(0<a.clientWidth){var b=document.getElementById("scaleSelect");b.setAttribute("style","min-width: inherit;");var c=b.clientWidth+SCALE_SELECT_CONTAINER_PADDING;b.setAttribute("style","min-width: "+(c+SCALE_SELECT_PADDING)+"px;");a.setAttribute("style","min-width: "+c+"px; max-width: "+
c+"px;")}SecondaryToolbar.setMaxHeight(PDFView.container)})},!0);
window.addEventListener("scalechange",function(b){document.getElementById("zoomOut").disabled=b.scale===MIN_SCALE;document.getElementById("zoomIn").disabled=b.scale===MAX_SCALE;var a=document.getElementById("customScaleOption");a.selected=!1;!b.resetAutoSettings&&(document.getElementById("pageWidthOption").selected||document.getElementById("pageFitOption").selected||document.getElementById("pageAutoOption").selected)||selectScaleOption(""+b.scale)||(a.textContent=Math.round(1E4*b.scale)/100+"%",a.selected=
!0);updateViewarea()},!0);
window.addEventListener("pagechange",function(b){b=b.pageNumber;if(PDFView.previousPageNumber!==b){document.getElementById("pageNumber").value=b;var a=document.querySelector(".thumbnail.selected");a&&a.classList.remove("selected");a=document.getElementById("thumbnailContainer"+b);a.classList.add("selected");var e=PDFView.getVisibleThumbs(),c=e.views.length;if(0<c){var d=e.first.id,e=1<c?e.last.id:d;(b<=d||b>=e)&&scrollIntoView(a,{top:THUMBNAIL_SCROLL_MARGIN})}}document.getElementById("previous").disabled=1>=
b;document.getElementById("next").disabled=b>=PDFView.pages.length},!0);function handleMouseWheel(b){var a="DOMMouseScroll"===b.type?-b.detail:b.wheelDelta/40,e=0>a?"zoomOut":"zoomIn";b.ctrlKey?(b.preventDefault(),PDFView[e](Math.abs(a))):PresentationMode.active&&PDFView.mouseScroll(40*a)}window.addEventListener("DOMMouseScroll",handleMouseWheel);window.addEventListener("mousewheel",handleMouseWheel);window.addEventListener("beforeprint",function(b){PDFView.beforePrint()});
window.addEventListener("afterprint",function(b){PDFView.afterPrint()});(function(){PDFView.animationStartedPromise=new Promise(function(b){window.requestAnimationFrame(b)})})();
var findClass=function(b){var a=window;b=b.split(".");_(b).each(function(b){a[b]=a[b]||{};a=a[b]});return a},buildNamespace=findClass,ns=function(b,a){a(buildNamespace(b))},createObject=function(b){var a=findClass(b);return construct(a,Array.prototype.slice.call(arguments,1))},construct=function(b,a){function e(){return b.apply(this,a)}e.prototype=b.prototype;return new e},la=la||{};
ns("la",function(b){b.FRONTEND_NEW_URL="webpack/frontend_new.js?v=93.57.13";b.getHighlightedText=function(){if(window.getSelection)return window.getSelection().toString();if(document.selection&&"Control"!==document.selection.type)return document.selection.createRange().text};b.notification=new Backbone.Model;b.fixedNotification=new Backbone.Model});
ns("la",function(b){b.Class=function(){this.initialize.apply(this,arguments)};_.extend(b.Class.prototype,Backbone.Events,{initialize:function(){}});b.Class.extend=Backbone.Model.extend});
var DateUtils=function(){var b=/^(\d{1,2})[.,\/](\d{1,2})(?:(?:[.,\/](\d{1,4})?)?)$/,a=/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}?$/,e="None January February March April May June July August September October November December".split(" ");return{isBackendDateValid:function(a){try{return DateUtils.parseBackendDate(a),!0}catch(b){return!1}},isFrontendDateValid:function(a){try{return null===a.match(b)?!1:!0}catch(e){return!1}},backendToFrontendWithoutException:function(a){try{return DateUtils.backendToFrontend(a)}catch(b){return""}},
backendToFrontendDateTimeWithoutException:function(a){try{return DateUtils.backendToFrontendDateTime(a)}catch(b){return""}},backendToFrontendTimeWithoutException:function(a){try{return DateUtils.backendToFrontendTime(a)}catch(b){return""}},backendToFormatWithoutException:function(a,b){try{return DateUtils.parseBackendDate(a).format(b)}catch(e){return""}},frontendToBackendWithOutException:function(a){try{return DateUtils.parseFrontendDate(a).format("YYYY-MM-DDTHH:mm:ss")}catch(b){return""}},frontendToBackend:function(a){return DateUtils.parseFrontendDate(a).format("YYYY-MM-DDTHH:mm:ss")},
backendToFrontend:function(a){return DateUtils.parseBackendDate(a).format("DD/MM/YYYY")},backendToFrontendDateTime:function(a){return DateUtils.parseBackendDate(a).format("DD/MM/YYYY HH:mm:ss")},backendToFrontendTime:function(a){return DateUtils.parseBackendDateWithTimezone(a).format("h:mma")},parseBackendDate:function(a){return DateUtils.parse(a,"YYYY-MM-DDTHH:mm:ss")},parseBackendDateQuietly:function(a){return moment(a,["YYYY-MM-DDTHH:mm:ss.SSSZ","YYYY-MM-DDTHH:mm:ss"],!0)},parseBackendDateWithTimezone:function(a){return DateUtils.parse(a,
["YYYY-MM-DDTHH:mm:ss","YYYY-MM-DDTHH:mm:ss.SSSZ"])},parseFrontendDate:function(a){return DateUtils.parse(a,"DD/MM/YYYY")},parse:function(a,b){var e=moment(a,b,!0);if(e.isValid())return e;throw"Invalid date";},backendStringToFrontend:function(a){return DateUtils.parse(a,"YYYY-MM-DDTHH:mm:ss").format("DD/MM/YYYY")},convertDOBToFrontendFormat:function(a){var b=this.convertToFrontendFormat(a),e=moment(b);return!a.match(/.*[.,\/]\d{4}$/)&&10<e.year()-moment().year()?b.substring(0,6)+e.subtract("years",
100).year():b},convertDOBToBackendFormat:function(a){var b=this.convertToBackendFormat(a),e=moment(b);return!a.match(/.*[.,\/]\d{4}$/)&&10<e.year()-moment().year()?e.subtract("years",100).year()+b.substring(4):b},convertToFrontendFormat:function(a){return DateUtils._formatTo(a,"DD/MM/YYYY")},convertToBackendFormat:function(a){return DateUtils._formatTo(a,"YYYY-MM-DDTHH:mm:ss")},formatAsBackend:function(a){return a.format("YYYY-MM-DDTHH:mm:ss")},_formatTo:function(c,e){if(_(c).isBlank())return c;c=
$.trim(c);var f=c.match(a);if(!_(f).isNull())return c;if(!DateUtils.isFrontendDateValid(c))throw"Date must be in dd/mm/yyyy format";f=c.match(b);f=moment(_.join("/",f[1],f[2],DateUtils.parseYear(f[3])),"DD/MM/YYYY");if(f.isValid())return f.format(e);throw"Invalid date";},parseYear:function(a){if(_(a).isBlank())throw"Date must be in dd/mm/yyyy format";a=parseInt(a,10);if(1900>a)throw"Date must be in dd/mm/yyyy format";return a},startOfFinancialYear:function(a){return DateUtils.startOfFinancialYearDate(a).format("YYYY-MM-DDTHH:mm:ss")},
startOfFinancialYearDate:function(a){var b=la.BusinessSettings.getFinancialYearStartMonth();a=a.month()>=b-1?a.year():a.year()-1;return DateUtils.parseFrontendDate(_.join("/","01",_.lpad(b,2,"0"),a))},startOfCurrentFinancialYear:function(){return this.startOfFinancialYear(DateUtils.serverDate())},startOfThisWeek:function(){return DateUtils.serverDate().startOf("isoWeek").format("YYYY-MM-DDTHH:mm:ss")},startOfThisMonth:function(){return DateUtils.serverDate().startOf("month").format("YYYY-MM-DDTHH:mm:ss")},
startOfLastMonth:function(){return DateUtils.serverDate().subtract("months",1).startOf("month").format("YYYY-MM-DDTHH:mm:ss")},twoWeeksLater:function(a){return a?a.add("week",2).format("YYYY-MM-DDTHH:mm:ss"):DateUtils.serverDate().add("week",2).format("YYYY-MM-DDTHH:mm:ss")},endOfThisMonthOfDate:function(a){return a.endOf("month").startOf("day").format("YYYY-MM-DDTHH:mm:ss")},startOfThisQuarter:function(){var a=3*(DateUtils.serverDate().quarter()-1);return moment.utc({month:a}).startOf("month").format("YYYY-MM-DDTHH:mm:ss")},
today:function(){return DateUtils.serverDate().format("YYYY-MM-DDTHH:mm:ss")},startOfAuTaxYear:function(a){return DateUtils.parseFrontendDate(_.join("/","01","07",a)).format("YYYY-MM-DDTHH:mm:ss")},isDateValid:function(a){var b=!_(a).isUndefined()&&!_(a).isNull();try{DateUtils.parseBackendDate(a)}catch(e){b=!1}return b},auTaxYear:function(a){a=DateUtils.parseBackendDate(a);var b=a.year(),e=DateUtils.parseFrontendDate("01/07/"+b);return a.isBefore(e)?b:b+1},withinTaxYear:function(a,b){var e=moment(a),
g=this.startOfAuTaxYear(b-1),h=DateUtils.parseBackendDate(g),g=DateUtils.parseBackendDate(g).add("years",1).add("days",-1);return e>=h&&e<=g},withinFinancialYear:function(a,b){var e=moment(a),g=this.startOfFinancialYear(moment(b+"-01-01T00:00:00")),h=moment(g),g=moment(g).add("years",1).add("days",-1);return e>=h&&e<=g},serverDate:function(){return la.BusinessSettings.getServerDate()},monthName:function(a){return e[a]},getAllMonthlyPeriods:function(){var a=_.rest(e,1);return _.map(a,function(b,e){return{start:b,
end:a[0>e-1?a.length+e-1:e-1]}})},getLastDayOfMonthString:function(a,b,e){return moment([a,0,31]).add(b-1,"months").format(e)},startOfYear:function(){return moment(DateUtils.serverDate().year()+"-01-01T00:00:00").format("YYYY-MM-DDTHH:mm:ss")}}}();moment.fn.isInFuture=function(){return 0<this.diff(moment())};moment.fn.isBefore=function(b){return 0>this.diff(b)};moment.fn.isAfter=function(b){return 0<this.diff(b)};
var GoogleTagManagerUtils={pushToDataLayer:function(b){this.getDataLayer().push(b)},getDataLayer:function(){return window.dataLayer||[]}},Activation={sendActivationMessage:function(b){this._shouldSendActivationMessage(b)&&this._sendAndClearMessage(b)},_shouldSendActivationMessage:function(b){return parseInt(store.get("activated_business_id"),10)===parseInt(b,10)},_sendAndClearMessage:function(b){var a=this._getBusinessSettings(b);_.isBlank(a.get("myobCrmId"))||(GoogleTagManagerUtils.pushToDataLayer({conversion_type:"activation",
la_business_id:b,archie_client_id:a.get("myobCrmId")||null,serial_number:a.get("businessSerialNumber")||null,event:"conversionEvent",uid:la.CurrentUserDetails.get("ssoId")||null}),store.remove("activated_business_id"))},_getBusinessSettings:function(b){b=new la.models.commons.BusinessSettings({businessId:b});$.when(b.fetch({async:!1}));return b}};
ns("util",function(b){b.ActivitiesTransformer={transform:function(a){a=this.groupAndSortByDate(a||[]);a=this.flattenAndSortDateGroups(a);return this.transformEmailActivities(a)},groupAndSortByDate:function(a){var b={};a.forEach(function(a){var c=DateUtils.parseBackendDateQuietly(a.date);c.isValid()&&(c=c.startOf("day"),b[c]=b[c]||{date:c,activities:[]},b[c].activities.push(a))});a=[];for(var c in b)a.push(b[c]);a.sort(function(a,c){return c.date.toDate().getTime()-a.date.toDate().getTime()});return a},
flattenAndSortDateGroups:function(a){a=_.map(a,function(a){a.activities.sort(function(a,b){if(a.source&&"transaction"===a.source.type&&b.source&&"transaction"===b.source.type)return 0;if(a.source&&"transaction"===a.source.type)return-1;if(b.source&&"transaction"===b.source.type)return 1;a=moment(a.date);b=moment(b.date);return b.toDate().getTime()-a.toDate().getTime()});a.activities[0].headerDate=DateUtils.formatAsBackend(a.date);a.activities[0].first=!0;a.activities[a.activities.length-1].last=!0;
return a.activities});return _.flatten(a||[],!0)},transformEmailActivities:function(a){a.forEach(function(a){if(a.source&&"invoice_sent"===a.source.type){var c={to:[],cc:[],bcc:[]};a.source.destinations.forEach(function(a){"to"!==a.addressType&&"cc"!==a.addressType&&"bcc"!==a.addressType||c[a.addressType].push(a.email)});a.source.to=c.to.join(", ");a.source.cc=c.cc.join(", ");a.source.bcc=c.bcc.join(", ")}});return a}}});
var ajaxErrorHandlers={400:function(b,a,e){b=$.parseJSON(b.responseText);a=0<_.filter(b.errors,function(a){return"1600"===a.code}).length;e=0<_.filter(b.errors,function(a){return"1800"===a.code}).length;a?ErrorUtils.showErrorMessages({exApiErrorMessage:"Sorry, something went wrong. Try again in a minute or two."}):e||(b=_.map(b.errors,function(a){"1101"===a.code&&(a.message="Sorry, something went wrong. Please try again.");return a}),ErrorUtils.showErrorMessages({errors:{errors:b}}))},401:function(){AuthenticationUtils.cleanCookie();
la.AuthenticationContext.logOut()},403:function(){$("#pageContents").hide();ErrorUtils.showErrorMessages({errorMessage:"Looks like you don\u2019t have permission to access this page."})},404:function(){ErrorUtils.showErrorMessages({errorMessage:"A system error occurred, please try again."})},500:function(b){var a=$.parseJSON(b.responseText);b="A system error occurred, please try again.";a&&(a=_.filter(a.errors,function(a){return"customMessage"===a.field}),0<a.length&&(b=a[0].message));ErrorUtils.showErrorMessages({errorMessage:b})}};
ns("la.views",function(b){b.View=Backbone.View.extend({viewEvents:{"click a":"clickOnHyperlink"},constructor:function(a){this.subviews=[];b.View.__super__.constructor.apply(this,arguments);this.events=this._mergeEvents(this.viewEvents,this.events);a&&(this.container=a.container);this.container&&this.listenTo(this.container,"remove-view",this.remove);return this},_renderTemplate:function(a){this.$el.html(HandlebarsTemplates[this._getTemplateName()](a));return this},_getTemplateName:function(){return this.templateName},
onDomReady:function(){_(this.subviews).each(function(a){a.subview.onDomReady()})},getTopParentView:function(){var a=this.getAllAncestorViews();return 0<a.length?a[a.length-1]:this},getAllAncestorViews:function(){var a=[];this.container&&(a.push(this.container),this.container.getAllAncestorViews&&(a=a.concat(this.container.getAllAncestorViews())));return a},addSubview:function(a,b,c){this.subviews.push({container:b,subview:a,position:c||"html"});return a},removeSubview:function(a){var b=this._findSubviewIndex(function(c){return c.subview===
a}).index;-1!==b&&(a.remove(),this.subviews.splice(b,1))},findSubviewInSelector:function(a){return this._findSubviewIndex(function(b){return b.container===a}).subview},_findSubviewIndex:function(a){for(var b=-1,c,d=0;d<this.subviews.length;d++){var f=this.subviews[d];if(a(f)){c=f.subview;b=d;break}}return{index:b,subview:c}},renderSubviews:function(a){if(_(a).isUndefined())_(this.subviews).each(function(a){this._renderSingleSubView(a)},this);else{var b=_.find(this.subviews,function(c){return c.subview.cid===
a.cid},this);if(_(b).isUndefined())throw"unknown subview";this._renderSingleSubView(b)}},_renderSingleSubView:function(a){var b=a.container,c=a.position;"string"===typeof b&&(b=this.$(b));if("function"===typeof b[c])b[c].call(b,a.subview.render().el);else throw"subview has no appropriate container";},getSubViews:function(){return _(this.subviews).map(function(a){return a.subview})},isSubview:function(a){return _(this.subviews).some(function(b){return $.contains(b.subview.el,a[0])},this)},remove:function(){this._removeSubviews();
this._notifySubviewsOnRemove();Backbone.Validation.unbind(this);this._super()},clickOnHyperlink:function(a){$(a.target).hasClass("disabled")&&a.preventDefault()},_removeSubviews:function(){_.map(this.subviews,function(a){a&&a.subview&&a.subview.remove()})},_notifySubviewsOnRemove:function(){this.trigger("remove-view")},_mergeEvents:function(a,b){var c=_.clone(a);return _.clone(_.extend(c,b))}})});
ns("la.collections",function(b){b.Collection=Backbone.Collection.extend({initialize:function(a,b){this._super(a,b);b=b||{};this.businessId=b.businessId}})});ns("la.models",function(b){b.Model=Backbone.AssociatedModel.extend({getUrl:function(a,b){var c=this.getBaseUrl(a,b);return this.isNew()?c:c+("/"===c.charAt(c.length-1)?"":"/")+this.id},getBaseUrl:function(a,b){return UrlUtils.apiUrl(_.isBlank(b)?la.BusinessSettings.getBusinessId():b,"/"+a)}})});
ns("la.models.commons",function(b){b.ContextHelp=la.models.Model.extend({initialize:function(a){this.reference=a.reference||"";this.content=a.content||""},url:function(){var a=this.get("reference");return UrlUtils.anonymousApiUrl("/contextHelps/")+a}})});
ns("la.collections.commons",function(b){b.ContextHelpManager=la.collections.Collection.extend({model:la.models.commons.ContextHelp,initialize:function(){this.idsToRequest=""},url:function(){return UrlUtils.anonymousApiUrl("/contextHelps/")+this.idsToRequest},_calculateIdsToRequest:function(a){var b=a.split(",");a=this.filter(function(a){return-1!==_(b).indexOf(a.get("reference"))});a=_(a).map(function(a){return a.get("reference")});this.idsToRequest=_.difference(b,a).join(",")},getById:function(a){var b=
_(this.models).filter(function(c){return c.get("reference")===a});if(1===_.size(b))return b[0]},_renderHelpContentForView:function(a,b){var c=a.contextHelp;_.each(_.keys(c),function(d){var f=c[d];d=b.getById(d);_.isUndefined(d)||a.$("#"+f).html(d.get("content"))})},_replacePlaceHoldersInHelpContent:function(){_(this.models).each(function(a){var b=a.get("content"),b=b.replace(/newstack/g,"app/businesses/"+la.BusinessSettings.getBusinessId()).replace(/contextPath/g,UrlUtils.context()).replace(/primestack/g,
"app.htm#businesses/"+la.BusinessSettings.getBusinessId());a.set({content:b})})},renderHelps:function(a,b,c){var d=a.contextHelp;if(!_.isUndefined(d))if(d=_.keys(d).join(","),this._calculateIdsToRequest(d),0===this.idsToRequest.length)this._renderHelpContentForView(a,this);else{var f=_.clone(this.models);this.fetch({success:function(c,d){c._replacePlaceHoldersInHelpContent();var l=_.union(f,c.models);c.models=l;c._renderHelpContentForView(a,c);b&&b()},error:function(){c&&c()}})}}})});
var ContextHelpManager=new la.collections.commons.ContextHelpManager;
ns("la.views",function(b){b.BaseView=b.View.extend({baseViewEvents:{'keypress input[type="text"]':"handleEnterKeyOnTextInputs",'mouseenter [rel="tooltip"]':"showTooltip",'mouseleave [rel="tooltip"]':"hideTooltip",'mouseenter [rel="popover"]':"showPopover",'mouseleave [rel="popover"]':"hidePopover"},showTooltip:function(a){$(a.target).tooltip("show")},hideTooltip:function(a){$(a.target).tooltip("hide")},showPopover:function(a){$(a.target).popover("show")},hidePopover:function(a){$(a.target).popover("hide")},
constructor:function(a){this._setOption(a,"businessId");la.views.BaseView.__super__.constructor.apply(this,arguments);this.events=this._mergeEvents(this.baseViewEvents,this.events);return this},render:function(){var a=this._getTemplateName();a&&this.renderHandlebars(a,this.model,this.options);this.renderSubviews();return this},renderHandlebars:function(a,b,c){c=c||{};c.touch=util.touch.isTouch();$(this.el).html(HandlebarsTemplates[a](this.createHandlebarsContext(b,c)));this.delegateEvents();this.renderWidgets(this);
return this},createHandlebarsContext:function(a,b){var c;c=_.isUndefined(a)?{}:_.isUndefined(a.toJSON)?a:a.toJSON();c.businessId=this.businessId;c.cid=_.isUndefined(a)?void 0:a.cid;return _.extend(b||{},c)},renderWidgets:function(a){this.$("[data-widget]").each(function(){var b=$(this),c={container:a,model:a.model,el:b},d=b.data("collection");_(d).isBlank()||(c.collection=a[d]||a.model.get(d));$(this).data("widget-ref",createObject("la.views.widgets."+b.data("widget"),c).render())})},onDomReady:function(){this._super();
ContextHelpManager.renderHelps(this);$(document).on("click","a",function(){la.breadcrumb.linkClicked()})},_setOption:function(a,b){a&&a[b]&&(this[b]=a[b])},disableForm:function(){this.$("input:not(:disabled)").addClass("formDisabled").attr("disabled","disabled");this.$("select:not(:disabled)").addClass("formDisabled").attr("disabled","disabled");this.$("button:not(:disabled)").addClass("formDisabled").attr("disabled","disabled");this.$("[data-widget]:not([data-disabled])").each(function(){var a=$(this).addClass("formWidgetDisabled").data("widget-ref");
a&&a.enable(!1)})},enableForm:function(){this.$(".formDisabled").removeClass("formDisabled").removeAttr("disabled");this.$("[data-widget].formWidgetDisabled").each(function(){var a=$(this).removeClass("formWidgetDisabled").data("widget-ref");a&&a.enable(!0)})},toggleForm:function(a){this[a?"enableForm":"disableForm"].call(this)},showFixedNotification:function(a,b){la.fixedNotification.set({message:a,type:b||"info"});la.fixedNotification.trigger("show")},showNotification:function(a,b){la.notification.set({message:a,
type:b||"success"});la.notification.trigger("show",{fade:!0})},hideFixedNotification:function(){la.fixedNotification.trigger("hide")},handleEnterKeyOnTextInputs:function(a){if(13===a.keyCode)return!1},showDialog:function(a){this.confirmation=new la.models.commons.Confirmation;this.confirmation.set(a);this.confirmationDialog=new la.views.commons.ConfirmationDialog({businessId:la.BusinessSettings.getBusinessId(),model:this.confirmation,container:this,messageModel:a.messageModel,messageTemplate:a.messageTemplate});
a=this.findOrCreateConfirmationDiv();a.html(this.confirmationDialog.render().$el);a=a.find("button");1===a.length&&a.addClass("btn-primary");this.confirmationDialog.show()},showInformationDialog:function(a,b,c){this.showDialog({buttonOK:!0,title:a,messages:b,okAction:c})},confirmAndAction:function(a){this.showDialog(_(a).extend({buttonYes:!0,buttonNo:!0,buttonClose:!0}))},confirmAndDestroy:function(a){var b=this;this.confirmAndAction(_(a).extend({yesAction:function(){b.model.destroy({success:function(){b.confirmationDialog.hide();
a.success&&a.success()},error:function(){b.confirmationDialog.hide()}})}}))},confirmDestroyAndCallFunction:function(a,b,c,d){var f=this;this.confirmAndDestroy({title:b,messages:[c],success:function(){a();f.showNotification(d)}})},findOrCreateConfirmationDiv:function(){var a=$("body"),b=a.find(".confirmationDialog");1>b.length&&(b=a.append("<div class='confirmationDialog'></div>").find(".confirmationDialog"));return b},saveAndCallback:function(a){a=a||{};var b=a.model||this.model;this.disableForm();
a.button&&a.button.prepend('<i class="fa fa-spinner fa-spin"></i>');var c=function(){this.enableForm();a.button&&$(a.button.find(".fa-spinner")).remove()}.bind(this);b.save({businessId:this.businessId},{async:_(a.async).isUndefined()?!0:a.async,success:function(d,f){$("#pageErrors").remove();a.success&&a.success(d,f);_.defaults(a,{noMessage:!1});a.noMessage||this._showSuccessfulNotification(b,a);c()}.bind(this),error:function(b,e){a.error&&a.error(b,e);c()}.bind(this)})},_showSuccessfulNotification:function(a,
b){b.message?this.showNotification(b.message):_(b.modelName).isUndefined()||this.showNotification(b.modelName+" saved");b.scrollToMessage&&$("html, body").animate({scrollTop:$("#fixedNotification").offset().top},1E3)},saveAndCallFunction:function(a,b){this.saveAndCallback(_(b).extend({success:a}))}})});
ns("la.views.commons",function(b){b.PageErrorsView=la.views.BaseView.extend({id:"pageErrors",className:"alert alert-danger",templateName:"commons/errors",events:{"click .close":"close"},initialize:function(a){var b;_.isUndefined(a.errors)||(b=a.errors.errors);this.model=new la.models.Model({errorMessage:a.errorMessage,exApiErrorMessage:a.exApiErrorMessage,errors:b})},close:function(){this.$el.fadeOut()}})});
ErrorUtils={showErrorMessages:function(b){b=new la.views.commons.PageErrorsView(b);this.addView(b);$("html, body").animate({scrollTop:b.$el.offset().top=-200,easing:"easeInQuart"},380)},removeErrorMessages:function(){$("#pageErrors").remove()},addView:function(b){$("#"+b.id).remove();var a=$(".modal-body");(0<a.size()&&a.is(":visible")?a:$("#errorNotification")).prepend(b.render().el)},hasErrorWithCode:function(b,a){return!_.isUndefined(this.findErrorWithCode(b,a))},findErrorWithCode:function(b,a){return _.find(b.errors,
function(b){return b.code===a})},isErrorWithCode:function(b,a){return b.code===a},isAccountReconciliationError:function(b){return this.isErrorWithCode(b,"1129")},isBusinessLockDateError:function(b){return this.isErrorWithCode(b,"1107")}};la.AUTH_TOKEN_KEY="AuthToken";la.IDS_TOKEN_KEY="Authorization";la.AJAX_EVENT_TRIGGER=_.extend({},Backbone.Events);la.AJAX_401_ERROR="401-error";la.AJAX_LOGIN_SUCCESS="login-success";
$.ajaxSetup({oldType:"POST",beforeSend:function(b,a){var e=$.cookie(la.AUTH_TOKEN_KEY);_.isNull(e)||b.setRequestHeader(la.AUTH_TOKEN_KEY,e);return!0},success:function(){$("#pageContents").show()},error:function(){$("#pageContents").show()},statusCode:ajaxErrorHandlers});var oldAjax=$.ajax;
$.ajax=function(b,a){if(la.AuthenticationContext&&la.AuthenticationContext.getUser()){var e=$.Deferred(),c=null;a=a||{};"object"===typeof b?a=b:a.url=b;var d=$.extend(!0,{},a);if("function"!==typeof d.beforeSend){la.AuthenticationContext.acquireToken(la.AuthenticationContext.options.clientId,function(a,b){if(b)console.log("Error acquiring token: "+b),la.AuthenticationContext.logOut(),e.reject("Acquiring of IDAM token failed: "+b);else{var f=d.headers||{};f[la.IDS_TOKEN_KEY]="Bearer "+a;d.headers=
f;oldAjax.call(this,d).done(function(a,b,e){c&&c(e,b)}).fail(function(a,b,e){c&&c(a,b)}).then(e.resolve,e.reject)}}.bind(this));var f=e.promise();f.complete=function(a){c=a};f.success=f.done;f.error=f.fail;return f}}return oldAjax.apply(this,arguments)};
var ApplicationMessagesUtils={APPLICATION_MESSAGES_KEY:"application_messages",addMessage:function(b,a,e){this.removeMessage(b);var c=this.retrieveMessages();c.push({key:b,data:a,type:e});store.set(this.APPLICATION_MESSAGES_KEY,c)},removeMessage:function(b){var a=this.retrieveMessages(),a=_.reject(a,function(a){return a.key===b});store.set(this.APPLICATION_MESSAGES_KEY,a)},retrieveMessages:function(){var b=store.get(this.APPLICATION_MESSAGES_KEY);return _.isUndefined(b)?[]:b},clearAll:function(){store.set(this.APPLICATION_MESSAGES_KEY,
[])}};Array.prototype.remove=function(b,a){var e=this.slice((a||b)+1||this.length);this.length=0>b?this.length+b:b;return this.push.apply(this,e)};
var Analytics={waitForAnalyticsIds:function(b){!window.analytics&&FeatureTagUtils.isFeatureAvailable(FeatureTag.SEGMENT_TRACK)&&Segment.load(la.Config.get("segmentioWriteKey"));var a={},e="",c="",d="",f=setInterval(function(){c=Analytics._safeGetId(function(){return visitor.getMarketingCloudVisitorID()});e=Analytics._safeGetId(function(){return ga.getAll()[0].get("clientId")});d=Analytics._safeGetId(function(){return analytics._user.anonymousId()});0<c.length&&(a.adobe_visitor_id=c);0<e.length&&(a.ga_client_id=
e);0<d.length&&(a.anonymous_id=d);0<c.length&&0<e.length&&0<d.length&&(clearInterval(f),b(a))}.bind(this),100);setTimeout(function(){clearInterval(f);b(a)}.bind(this),2E3)},_safeGetId:function(b){try{return b()||""}catch(a){}return""}},AuthenticationUtils={CONSTANTS:{USER_INVITATION:"user_invitation",USER_REGISTRATION:"user_registration",ORG_INVITATION:"org_invitation",CHANGE_PASSWORD:"change_password",NZ_PAYROLL_PRODUCT_ID:"13"},login:function(){la.AuthenticationContext.handleOAuth2Callback();la.AuthenticationContext.logIn()},
cleanCookie:function(){$.removeCookie(la.AUTH_TOKEN_KEY,{path:"/"+UrlUtils.context()+"/"});$.removeCookie("JSESSIONID",{path:"/"+UrlUtils.context()+"/"})},createAuthenticationCookie:function(b){AuthenticationUtils.cleanCookie();$.cookie(la.AUTH_TOKEN_KEY,b,{path:"/"+UrlUtils.context()+"/"})},hasAuthenticationCookie:function(){var b=$.cookie(la.AUTH_TOKEN_KEY);return!_.isNull(b)},checkUsername:function(b){var a;if(!_.isUndefined(b))return $.ajax(UrlUtils.url("/usernames/"+b+".html"),{async:!1,statusCode:{400:function(){a=
"Invalid email address"},403:function(){a="Email already registered"},404:function(){}}}),a},registerSME:function(b,a,e){var c={prompt:la.AuthenticationContext.CONSTANTS.PROMPTS.NEW_ACCOUNT,ui_hint:la.AuthenticationContext.CONSTANTS.UI_HINTS.NEW_ORGANIZATION};Analytics.waitForAnalyticsIds(function(d){_.extend(c,d);la.AuthenticationContext.logIn(b,["email","phone"],c,{type:this.CONSTANTS.USER_REGISTRATION,productId:a,email:e})}.bind(this))},acceptUserInvitation:function(b,a){var e={prompt:la.AuthenticationContext.CONSTANTS.PROMPTS.NEW_ACCOUNT,
ui_hint:la.AuthenticationContext.CONSTANTS.UI_HINTS.NEW_USER,login_hint:b};Analytics.waitForAnalyticsIds(function(c){_.extend(e,c);la.AuthenticationContext.logIn(UrlUtils.homeUrl(),["email","phone"],e,{type:this.CONSTANTS.USER_INVITATION,id:a})}.bind(this))},acceptOrgInvitation:function(b,a){var e={prompt:la.AuthenticationContext.CONSTANTS.PROMPTS.LOGIN,login_hint:b};Analytics.waitForAnalyticsIds(function(c){_.extend(e,c);la.AuthenticationContext.logIn(UrlUtils.homeUrl(),["email","phone"],e,{type:this.CONSTANTS.ORG_INVITATION,
id:a})}.bind(this))},acceptOrgInvitationWithoutEmail:function(b){var a=la.AuthenticationContext.CONSTANTS.PROMPTS.LOGIN;la.AuthenticationContext.getUser()&&(a=la.AuthenticationContext.CONSTANTS.PROMPTS.RE_AUTHENTICATE);var e={prompt:a};Analytics.waitForAnalyticsIds(function(a){_.extend(e,a);la.AuthenticationContext.logIn(UrlUtils.homeUrl(),["email","phone"],e,{type:this.CONSTANTS.ORG_INVITATION,id:b})}.bind(this))},changePassword:function(b){var a={prompt:la.AuthenticationContext.CONSTANTS.PROMPTS.CHANGE_PASSWORD};
Analytics.waitForAnalyticsIds(function(e){_.extend(a,e);la.AuthenticationContext.logIn(UrlUtils.homeUrl(),["email","phone"],a,{type:this.CONSTANTS.CHANGE_PASSWORD,id:b})}.bind(this))},navigateToIdamLoginPage:function(b){var a={ui_hint:la.AuthenticationContext.CONSTANTS.UI_HINTS.NEW_ORGANIZATION};Analytics.waitForAnalyticsIds(function(e){_.extend(a,e);la.AuthenticationContext.logIn(b,["email","phone"],a)}.bind(this))},getDefaultBrandingId:function(b,a){var e=UrlUtils.getQueryParamValue("product-id");
return e&&e===this.CONSTANTS.NZ_PAYROLL_PRODUCT_ID?b:a}},BankFeedApplicationAccountUtils={getAccountsToExclude:function(b,a){return b.filter(function(b){var c=_(a.get("linkedChartAccount")).isEmpty()?-1:a.get("linkedChartAccount").id;return!b.get("unlinked")&&b.get("linkedChartAccount").id!==c&&"CC"!==b.get("statusCode")}).map(function(a){return a.get("linkedChartAccount").id})}};
ns("util",function(b){b.BillMatcher=la.Class.extend({findMatchingBill:function(a,b){var c=a.get("ocr_data");if(!c||0===b.length)return[];var d=b.groupBy(function(a){var b=0,e=function(a,c){return a&&a.length&&c&&c.length&&a===c};e(a.get("issueDate"),c.invoiceDate)&&(b+=5);e(a.get("dueDate"),c.invoiceDueDate)&&(b+=1);e(a.get("total"),c.invoiceAmount)&&(b+=2);e(a.get("supplierInvoiceNumber"),c.invoiceNumber)&&(b+=5);return b}),f=_.sortBy(_.keys(d)).slice(-1)[0];return 0<f?d[f]:[]}})});
var BillflowFileValidation={validateFiles:function(b){var a="";if(5<b.length)return a="Too many files. There is a maximum of 5 at a time.",Backbone.trigger("billflow:fatalError",a),!1;var e=!0;_.each(b,function(c){e&&""===c.type&&-1===c.name.toLowerCase().indexOf(".pdf")&&(a="You cannot drop a directory, please drop individual files.",Backbone.trigger("billflow:fatalError",a),e=!1)});return e},isValidFileType:function(b){b=b.toLowerCase();b=b.slice(b.lastIndexOf("."),b.length);return _.contains([".pdf",
".tiff",".jpg",".jpeg",".png"],b)},isValidFileSize:function(b){return 0<b&&2E6>=b}};
ns("la.breadcrumb",function(b){b.onPageRoute=function(a,b){var c=this._getBreadcrumbStack(),c=this._handleBrowserBack(c,a),c=this._addParentBreadcrumbIfNoneExists(c,b),c=this._goBackToExistingBreadcrumbIfExists(c,a),c=this._addPageToStack(c,a);this._saveBreadcrumbStack(c);this.renderBreadcrumbs()};b._addParentBreadcrumbIfNoneExists=function(a,b){if(0===a.length&&b){var c=UrlUtils.appUrl(la.BusinessSettings.getBusinessId(),b.pattern.split(":businessId")[1].split("(/p1-:")[0]);a=this._addPageToStack(a,
b.pageTitle,c)}return a};b._goBackToExistingBreadcrumbIfExists=function(a,b){var c=this._getPageIndex(a,b);-1!==c&&(a=a.splice(0,c));return a};b.linkClicked=function(){window.linkClicked=!0};b._handleBrowserBack=function(a,b){-1===this._getPageIndex(a,b)&&!1===window.linkClicked&&(a=this._clearAndRender(),sessionStore.remove("menu"));window.linkClicked=!1;return a};b.renderBreadcrumbs=function(){var a=this._getBreadcrumbStack(),b=$(".prime-breadcrumb");b.empty();if(0<a.length){var c=['<ol class="breadcrumb">'];
la.BusinessSettings.attributes.payrollStandalone?1<a.length&&this._renderBreadcrumbItems(a,c):(c.push('<li><a href="'+UrlUtils.appUrl(la.BusinessSettings.getBusinessId(),"/home")+'">Home</a></li>'),this._renderBreadcrumbItems(a,c));c.push("</ol>");b.append(c.join(""))}};b._renderBreadcrumbItems=function(a,b){for(var c=0;c<a.length;c++){var d=_.escape(a[c].pageTitle);c===a.length-1?b.push('<li class="active">'+d+"</li>"):b.push('<li><a href="'+a[c].url+'">'+d+"</a></li>")}};b.updateUrlToIncludeAccountAndTransaction=
function(a,b,c,d){var f=this._getBreadcrumbStack();a=f[f.length-1].url.split(a)[0]+a+"/"+b+"/"+c;_(d).isUndefined()||(a=a+"/page-"+d);f[f.length-1].url=a;this._saveBreadcrumbStack(f)};b.clear=function(){this._getBreadcrumbStack();return this._clearAndRender()};b.isEmptyStack=function(){return 0===this._getBreadcrumbStack().length};b._clearAndRender=function(){this._saveBreadcrumbStack([]);this.renderBreadcrumbs();return this._getBreadcrumbStack()};b.removeLastEntry=function(){var a=this._getBreadcrumbStack();
a.pop();this._saveBreadcrumbStack(a);this.renderBreadcrumbs()};b.getPreviousUrl=function(a){var b=this._getBreadcrumbStack();a=a||1;return b.length>a?b[b.length-1-a].url:UrlUtils.appUrl(la.BusinessSettings.getBusinessId(),"/home")};b._getPageIndex=function(a,b){for(var c=0;c<=a.length-1;c++)if(a[c].pageTitle===b)return c;return-1};b._addPageToStack=function(a,b,c){6<=a.length&&(a=[]);a.push({pageTitle:b,url:c||window.location.href});return a};b._getBreadcrumbStack=function(){return sessionStore.get("breadcrumbStack")||
[]};b._saveBreadcrumbStack=function(a){sessionStore.set("breadcrumbStack",a)}});var BrowserDetector=function(b){var a=b.name,e=Number(b.version);return{isSupportedBrowser:!isNaN(e)&&((b.msie?9<=e:!1)||(b.firefox?8<=e:!1)||(b.chrome?17<=e:!1)||(b.safari?6<=e:!1)||(b.ios?6<=e:!1)),name:a,version:e}};
ns("la",function(b){b.ComponentService={_ready:!1,_components:{},_config:null,_queue:[],reset:function(){this._ready=!1;this._components={};this._config=null;this._queue=[]},init:function(a,b){this._config&&!_.isEqual(this._config,a)&&this.reset();this._config=a;this._loadBundle(b)},_loadBundle:function(a){this._config&&head.load(this._config,function(){Object.keys(this._config).forEach(function(a){this._assignComponentLoaders(window[a])}.bind(this));this._ready=!0;this._flushQueue();a&&a()}.bind(this))},
_flushQueue:function(){this._queue&&this._queue.length&&this._queue.forEach(function(a){a()}.bind(this))},_assignComponentLoaders:function(a){Object.keys(a).forEach(function(b){this._components[b]=a[b]}.bind(this))},render:function(a,b,c){if(this._ready)this._components["load"+a](document.querySelector(b),c);else this._queue=(this._queue||[]).concat(function(){this.render(a,b,c)}.bind(this))}}});_.simpleFormat=function(b){return _(b).escapeHTML().replace(/[\r?\n]/g,"<br/>")};
ns("la.utils",function(b){b.FeatureTag={ONLINE_PAYMENTS:"ONLINE_PAYMENTS",PARTNER_CLEANUP_VALIDATE_PARTNER:"PARTNER_CLEANUP_VALIDATE_PARTNER",IDAM_ACCESS_MANAGEMENT:"IDAM_ACCESS_MANAGEMENT",SERVER_PAGINATION:"SERVER_PAGINATION",BARRY:"BARRY",NEW_BANK_FEED_LIST:"NEW_BANK_FEED_LIST",PAY_SUPER_PORTAL_REGISTRATION:"PAY_SUPER_PORTAL_REGISTRATION",CUSTOMER_STATEMENTS:"CUSTOMER_STATEMENTS",SUBSCRIPTION_STATUS:"SUBSCRIPTION_STATUS",COA_SERVICE:"COA_SERVICE",SEGMENT_TRACK:"SEGMENT_TRACK",INCOME_ALLOCATION:"INCOME_ALLOCATION",
CLONE_COA:"CLONE_COA",DATACONVERTER:"DATACONVERTER",NOTIFICATION_SERVICE:"NOTIFICATION_SERVICE",UNCATEGORISED_ACCOUNTS:"UNCATEGORISED_ACCOUNTS",COA_EDIT_SHOW_HEADERS:"COA_EDIT_SHOW_HEADERS",MAP_SYSTEM_ACCOUNTS:"MAP_SYSTEM_ACCOUNTS",BANK_FEED_APPLICATION_WITHOUT_HACKS:"BANK_FEED_APPLICATION_WITHOUT_HACKS",BANKLINK_MIGRATION_CONTACT_FROM_MYDOT:"BANKLINK_MIGRATION_CONTACT_FROM_MYDOT"}});
var FeatureTag=la.utils.FeatureTag,FEATURE_TAG_PREFIX="FeatureTag.",FeatureTagUtils={getAllAvailableFeatures:function(){var b=la.Config?la.Config.get("featureTags")||[]:[],a=la.BusinessSettings?la.BusinessSettings.get("availableFeatures")||[]:[],e=this._currentUserHasDeveloperRole(),b=_(b).filter(function(a){return"ALL"===a.level||"DEVELOPER"===a.level&&e}).map(function(a){return a.name});return _.union(b,a)},isFeatureAvailable:function(b){return this._isOverridden(b)?this._isEnabledOverride(b):this._isBusinessSettingsAvailable()?
this._isFeatureAvailableForBusiness(b):this._isFeatureAvailableGlobally(b)},overrideFeatureTag:function(b,a){window.localStorage&&localStorage.setItem(FEATURE_TAG_PREFIX+b,a)},_isOverridden:function(b){return!!localStorage.getItem(FEATURE_TAG_PREFIX+b)},_isEnabledOverride:function(b){return"true"===localStorage.getItem(FEATURE_TAG_PREFIX+b).toLowerCase()},_isBusinessSettingsAvailable:function(){return la.BusinessSettings&&!_.isUndefined(la.BusinessSettings.get("businessId"))},_isFeatureAvailableForBusiness:function(b){var a=
la.BusinessSettings.get("availableFeatures")||[];return _(a).contains(b)},_isFeatureAvailableGlobally:function(b){b=this._findGlobalFeatureTag(b);return!_.isUndefined(b)&&("ALL"===b.level||"DEVELOPER"===b.level&&this._currentUserHasDeveloperRole())},_findGlobalFeatureTag:function(b){var a=la.Config?la.Config.get("featureTags")||[]:[];return _.find(a,function(a){return a.name===b})},_currentUserHasDeveloperRole:function(){var b=_.isUndefined(la.CurrentUserDetails)?[]:la.CurrentUserDetails.get("roles");
return _(b).contains("ROLE_DEVELOPER")}};ns("util",function(b){b.readFile=function(a,b){var c=new FileReader;c.onload=function(a){b(a.target.result)};c.readAsBinaryString(a.files[0])}});
ns("la",function(b){b.FooterService={render:function(a){la.ComponentService.render("EssentialsFooter","#footerContainer",{aboutUsUrl:la.Config.get("aboutUsUrl"),businessSettings:la.BusinessSettings?la.BusinessSettings.toJSON():null,featureTags:FeatureTagUtils.getAllAvailableFeatures(),isProduction:la.Config.isProduction(),isStaging:la.Config.isStaging(),isTesting:la.Config.isTesting(),privacyUrl:la.Config.get("privacyUrl"),region:la.Config.getRegion(),supportUrl:la.Config.get("supportUrl"),viewName:a.templateName})}}});
la.gettingStartedPreference=function(){return{key:"gettingStarted.pageDockedPreference",isPageDocked:function(b){var a=this.currentUserId();return!!store.get(this.key)&&!!store.get(this.key)[a]&&!!store.get(this.key)[a][b]},setPageDocked:function(b,a){var e=this.currentUserId();store.get(this.key)||store.set(this.key,{});var c=store.get(this.key);c[e]||(c[e]={});c[e][b]=a;store.set(this.key,c)},currentUserId:function(){return la.BusinessSettings.get("userId")}}}();
var GettingStartedUtils={isGettingStartedFeatureOn:function(){return la.Config.isProduction()||la.Config.isStaging()||la.Config.isTesting()}};
ns("la",function(b){b.HeaderService={_headerView:null,_helpTopicId:null,_billflowCount:"",_upgradeLinkLabel:"",_upgradeTextContent:"",reset:function(){this._helpTopicId=this._headerView=null;this._upgradeTextContent=this._upgradeLinkLabel=this._billflowCount=""},getActionsForView:function(a){if(!a||!_.isFunction(a.getSubViews))return{};var b=_.map(a.getSubViews(),this.getActionsForView.bind(this)),c=_.values(a.events).reduce(function(c,b){c[b]=a[b];return c},{});return _.extend.apply(_,[].concat({},
c,b))},updateBillflowCount:function(a){this._headerView?this.render(this._headerView,this._helpTopicId,a,this._upgradeLinkLabel,this._upgradeTextContent):this.billflowCount(a)},updateUpgradeHeader:function(a,b){this._headerView?this.render(this._headerView,this._helpTopicId,this._billflowCount,a,b):(this.upgradeLinkLabel(a),this.upgradeTextContent(b))},headerView:function(a){a&&(this._headerView=a);return this._headerView||{}},billflowCount:function(a){0<=a&&(this._billflowCount=a);return this._billflowCount||
""},upgradeLinkLabel:function(a){a&&(this._upgradeLinkLabel=a);return this._upgradeLinkLabel||""},upgradeTextContent:function(a){a&&(this._upgradeTextContent=a);return this._upgradeTextContent||""},helpTopicId:function(a){a&&(this._helpTopicId=a);return this._helpTopicId},render:function(a,b,c,d,f){la.ComponentService.render("EssentialsHeader","#headerContainer",{actions:this.getActionsForView(a),billflowCount:this.billflowCount(c),upgradeLinkLabel:this.upgradeLinkLabel(d),upgradeTextContent:this.upgradeTextContent(f),
businessSettings:la.BusinessSettings?la.BusinessSettings.toJSON():null,currentUserDetails:la.CurrentUserDetails?la.CurrentUserDetails.toJSON():null,featureTags:FeatureTagUtils.getAllAvailableFeatures(),helpTopicId:this.helpTopicId(b),isAU:la.Config.isAU(),isNZ:la.Config.isNZ(),isProduction:la.Config.isProduction(),isStaging:la.Config.isStaging(),isTesting:la.Config.isTesting(),region:la.Config.getRegion(),rootUrl:UrlUtils.url(""),viewName:this.headerView(a).templateName})}}});
ns("la",function(b){b.Idam={authenticate:function(a,e){var c=a.get("idamRedirectUri"),d={authority:a.get("idamAuthority"),clientId:a.get("idamClientId"),brandingId:AuthenticationUtils.getDefaultBrandingId(a.get("payrollBrandingId"),a.get("brandingId")),postLogoutRedirectUri:a.get("idamPostLogoutRedirectUri"),redirectUri:c,renewTokenRedirectUri:a.get("idamRenewTokenRedirectUri"),storageLocation:"localStorage"};b.AuthenticationContext=new AuthenticationContext(d);if(b.AuthenticationContext.isOAuth2Callback(window.location.hash)){d=
b.AuthenticationContext.parseOAuth2ResponseAndSaveToken();if(!d.user){b.AuthenticationContext.logOut();return}if(!b.AuthenticationContext.getLoginError()){var f=b.AuthenticationContext.getIdToken();this._processAuth(f,d,c,e);return}}this._createSessionAndStartApp(e)},_processAuth:function(a,b,c,d){var f=function(){this._createSessionAndStartAppWithRedirection(d,b.loginLocation)}.bind(this),g=b.user,h=b.loginState;this._isNewBusinessRegistration(g.claims,h,g.userName)?this._handleRegistration(a,g.claims,
h,f):this._isInvitation(h)?this._handleInvitation(a,h,g.userName,d,f):this._isChangePassword(h)?this._handleChangePassword(c,h.id,d):this._createSessionAndStartAppWithRedirection(d.bind(null,!0),b.loginLocation)},_createSessionAndStartAppWithRedirection:function(a,b){UrlUtils.redirect(b);this._createSessionAndStartApp(a)},_createSessionAndStartApp:function(a){$.ajax({url:UrlUtils.url("/app/isLoggedIn.html"),success:function(){a()}})},_isInvitation:function(a){return this._isUserInvitation(a)||this._isOrgInvitation(a)},
_isUserInvitation:function(a){return a.type===AuthenticationUtils.CONSTANTS.USER_INVITATION},_isOrgInvitation:function(a){return a.type===AuthenticationUtils.CONSTANTS.ORG_INVITATION},_isChangePassword:function(a){return a.type===AuthenticationUtils.CONSTANTS.CHANGE_PASSWORD},_isNewBusinessRegistration:function(a,b,c){return a.is_new_organization?!(b.email&&b.email!==c):!1},_handleInvitation:function(a,b,c,d,f){this._isUserInvitation(b)?InvitationUtils.acceptUserInvitation(b.id,a,f):this._isOrgInvitation(b)&&
InvitationUtils.acceptOrgInvitation(b.id,a,f,function(){this._createSessionAndStartApp(d);InvitationUtils.navigateToPartnerBusinessSelection(b.id)}.bind(this),function(){InvitationUtils.navigateToPartnerSignupPage(b.id,c)})},_handleChangePassword:function(a,b,c){a+=UrlUtils.businessUsersSettings(b);this._createSessionAndStartAppWithRedirection(c,a)},_handleRegistration:function(a,b,c,d){a={idToken:a,doNotContact:b.do_not_contact,phoneNumber:b.phone_number,productId:c.productId};$.ajax({url:UrlUtils.url("/api/idamRegistration"),
data:JSON.stringify(a),contentType:"application/json",type:"POST",success:d})}}});
var IE9={isEqualOrLessThanIE9:function(){return $("html").hasClass("lt-ie10")||$("body").hasClass("ext-ie")},supportPlaceHolder:function(b){this.isEqualOrLessThanIE9()&&b.find("[placeholder]").ezpz_hint()}},InvitationUtils={acceptOrgInvitation:function(b,a,e,c,d){InvitationUtils._getInviteeDetailsForIdamUser(b,a).then(function(a){1===a.partnerBusinessIds.length?InvitationUtils.linkPartnerToSme(b,a.partnerBusinessIds[0]).then(e):1<a.partnerBusinessIds.length?c():d()})},linkPartnerToSme:function(b,
a,e){return $.ajax({url:UrlUtils.anonymousApiUrl("/invitations/smetoadvisor/"+b+"/accept/"+a),contentType:"application/json",type:"PUT",success:e})},navigateToPartnerSignupPage:function(b,a){UrlUtils.redirect(UrlUtils.url("/public.htm#invitations/partnersignup/"+b+"/"+a))},navigateToPartnerBusinessSelection:function(b){UrlUtils.redirect(UrlUtils.url("/app.htm#selectAdvisorBusiness/"+b))},acceptUserInvitation:function(b,a,e){$.ajax({url:UrlUtils.anonymousApiUrl("/invitations/"+b+"/idamAccept"),contentType:"application/json",
type:"PUT",success:e,data:JSON.stringify({token:a})})},getInviteeDetails:function(b){return $.ajax({url:UrlUtils.anonymousApiUrl("/invitations/"+b+"/inviteeDetails"),contentType:"application/json",type:"GET"})},_getInviteeDetailsForIdamUser:function(b,a){return $.ajax({url:UrlUtils.anonymousApiUrl("/invitations/"+b+"/inviteeDetailsIdamUser"),headers:{token:a},contentType:"application/json",type:"GET"})}};
ns("util",function(b){b.ItemFileReader=la.Class.extend({initialize:function(a){this.accounts=a},read:function(a){a=a.split("\n");for(var b=[],c=1;c<a.length;c++)_(a[c]).isBlank()||b.push(this.readLine(a[c]));return b},readLine:function(a){a=a.split("\t");var b={};b.number=a[0];b.name=a[1];b.buy="B"===a[2];b.sell="S"===a[3];b.description=a[9];b.unitOfMeasure="QTY";b.active="Y"===a[64]?!1:!0;var c=this.accounts.findByNumber(this._formatAccountId(a[6]));b.saleAccountNumber=a[6];b.saleAccountId=c?c.get("id"):
null;b.salePrice=this._nullifyEmpty(a[24].replace("$","").replace(/,/g,"").replace(/"/g,""),b.sell?"0.00":null);b.saleGstCode=this._getGstCode(a[26]);c=this.accounts.findByNumber(this._formatAccountId(a[7]));b.purchaseAccountNumber=a[7];b.purchaseAccountId=c?c.get("id"):null;b.purchasePrice=b.buy?"0.00":null;b.purchaseGstCode=this._getGstCode(a[19]);return b},_getGstCode:function(a){a=this._nullifyEmpty(a);return la.collections.commons.GstTypes.getAll().hasCode(a)?a:null},_nullifyEmpty:function(a,
b){return _(a).isEmpty()?b||null:a},_formatAccountId:function(a){return _(a).isBlank()?"":a.substring(0,1)+"-"+a.substring(1)}})});
ns("la",function(b){b.feedback={jsLoaded:!1,init:function(){this.jsLoaded||(this.jsLoaded=!0,function(a,b,c,d,f,g,h){a.LeanEngageObject=f;a[f]=a[f]||function(){(a[f].q=a[f].q||[]).push(arguments)};a[f].l=1*new Date;g=b.createElement(c);h=b.getElementsByTagName(c)[0];g.async=1;g.src=d;h.parentNode.insertBefore(g,h)}(window,document,"script","//"+la.Config.get("leanEngageUrl"),"leanengage"));this.sendStartMessage()},sendStartMessage:function(){var a=la.BusinessSettings,b=la.PreselectBusiness;leanengage("start",
{user_id:a.get("region")+"_"+a.get("userId"),name:a.get("userFirstName"),email:"",user_identity_id:a.get("userName"),software_id:(a.get("businessSerialNumber")||"").replace(/\s+/g,""),custom_data:{user_type:a.get("viewedByProfessionalPartner")?"Advisor":"SME",region:a.get("region"),account_status:a.get("accountStatus"),product_type:(b.get("productId")||"")+"_"+(b.get("productName")||"")},company:{company_id:a.get("region")+"_"+a.get("businessId"),name:a.get("businessName"),status:a.get("accountStatus"),
custom_data:{}},app_id:la.Config.isProduction()?"dc8a0287-a9f4-4bae-aacc-093481720718":"74909bb8-f3bd-42d8-b6a3-ddec152a62dd"})},trackEvent:function(a,b){leanengage("trackEvent",a,b||{})},triggerFeedback:function(a){leanengage("triggerFeedback",a)}}});
var LineCalculator=function(b,a,e,c){var d=new TaxCalculator(b,e,c),f=function(){return MO.multiplyByScale(d.netAmount(),a,100)},g=function(){return MO.multiplyByScale(d.tax(),a,100)},h=function(){return MO.add(f(),g())},l=function(a){return c?MO.round(h(),a):MO.add(k(a),m(a))},k=function(a){return MO.round(f(),a)},m=function(a){return MO.round(g(),a)};return{netAmount:f,netAmountWithRounding:k,tax:g,taxWithRounding:m,grossAmount:h,grossAmountWithRounding:l,unitPriceTaxInclusive:function(){return 0===
parseFloat(a,10)?0:MO.divideByScale(MO.add(k(2),m(2)),a,100)},unitPriceTaxExclusive:function(){return 0===parseFloat(a,10)?0:c?MO.divideByScale(MO.subtract(l(2),m(2)),a,100):b}}};accounting.settings.currency.format={pos:"%s%v",neg:"-%s%v",zero:"%s%v"};accounting.settings.number={precision:2,thousand:",",decimal:"."};$.money=accounting;
$.money.format=function(b,a){a=_(a).isUndefined()?accounting.settings.number.precision:a;if($.money.nullOrEmptyString(b))return"";"string"===typeof b&&(b=parseFloat(b));return"number"===typeof b?$.money.formatMoney(b,accounting.settings.currency.symbol,a):""};$.money.nullOrEmptyString=function(b){return null===b||"string"===typeof b&&_(b).isBlank()};$.money.formatNumeric=function(b,a){return $.money.nullOrEmptyString(b)?"":"string"===typeof b||"number"===typeof b?accounting.formatNumber(b,a):""};
var MoneyOperations={precision:10,scale:10,initRoundingPrecision:function(b){this.precision=b},add:function(b,a){if(isNaN(b)||isNaN(a))return b+a;""===b&&(b=0);""===a&&(a=0);return parseFloat((new BigDecimal(b+"")).add(new BigDecimal(a+"")).format(-1,this.precision,-1,-1,MathContext.prototype.SCIENTIFIC,BigDecimal.prototype.ROUND_HALF_UP).toString())},subtract:function(b,a){if(isNaN(b)||isNaN(a))return b-a;""===b&&(b=0);""===a&&(a=0);return parseFloat((new BigDecimal(b+"")).subtract(new BigDecimal(a+
"")).format(-1,this.precision,-1,-1,MathContext.prototype.SCIENTIFIC,BigDecimal.prototype.ROUND_HALF_UP).toString())},multiply:function(b,a){if(isNaN(b)||isNaN(a))return b*a;""===b&&(b=0);""===a&&(a=0);return parseFloat((new BigDecimal(b+"")).multiply(new BigDecimal(a+"")).format(-1,this.precision,-1,-1,MathContext.prototype.SCIENTIFIC,BigDecimal.prototype.ROUND_HALF_UP).toString())},multiplyByScale:function(b,a,e){if(isNaN(b)||isNaN(a))return b*a;""===b&&(b=0);""===a&&(a=0);_(e).isUndefined()&&(e=
this.scale);return parseFloat((new BigDecimal(b+"")).setScale(e).multiply((new BigDecimal(a+"")).setScale(e)).format(-1,this.precision,-1,-1,MathContext.prototype.SCIENTIFIC,BigDecimal.prototype.ROUND_HALF_UP).toString())},divide:function(b,a){if(isNaN(b)||isNaN(a))return b/a;""===b&&(b=0);""===a&&(a=0);return parseFloat((new BigDecimal(b+"")).divide(new BigDecimal(a+""),MathContext.prototype.DEFAULT).format(-1,this.precision,-1,-1,MathContext.prototype.SCIENTIFIC,BigDecimal.prototype.ROUND_HALF_UP).toString())},
divideByScale:function(b,a,e){if(isNaN(b)||isNaN(a))return b/a;""===b&&(b=0);""===a&&(a=0);_(e).isUndefined()&&(e=this.scale);return parseFloat((new BigDecimal(b+"")).setScale(e,MathContext.ROUND_HALF_UP).divide((new BigDecimal(a+"")).setScale(e,MathContext.ROUND_HALF_UP)).format(-1,this.precision,-1,-1,MathContext.prototype.SCIENTIFIC,BigDecimal.prototype.ROUND_HALF_UP).toString())},roundUp:function(b,a){if(isNaN(b))return b;""===b&&(b=0);return parseFloat((new BigDecimal(b+"")).format(-1,a,-1,-1,
MathContext.prototype.SCIENTIFIC,BigDecimal.prototype.ROUND_UP).toString())},roundDown:function(b,a){if(isNaN(b))return b;""===b&&(b=0);return parseFloat((new BigDecimal(b+"")).format(-1,a,-1,-1,MathContext.prototype.SCIENTIFIC,BigDecimal.prototype.ROUND_DOWN).toString())},abs:function(b){if(isNaN(b))return Math.abs(b);""===b&&(b=0);return parseFloat((new BigDecimal(b+"")).abs().toString())},round:function(b,a){if(isNaN(b))return b;""===b&&(b=0);return parseFloat((new BigDecimal(b+"")).format(-1,
a,-1,-1,MathContext.prototype.SCIENTIFIC,BigDecimal.prototype.ROUND_HALF_UP).toString())}},MO=MoneyOperations;
ns("la.notification",function(b){b.showFixedNotification=function(a,b,c){la.fixedNotification.set({message:a,type:b||"info",closeButton:_.isUndefined(c)?!0:c});la.fixedNotification.trigger("show",{scrollIntoView:!0,template:"notification"})};b.hideFixedNotification=function(){la.fixedNotification.trigger("hide")};b.showNotification=function(a,b,c,d){la.notification.set({message:a,type:b||"success",fade:c||!1,closeButton:d||!1});la.notification.trigger("show",{fade:c,template:"notification"})};b.showBanner=
function(a,b){la.notification.set(b);la.notification.trigger("show",{template:a})};b.hideNotification=function(){la.notification.trigger("hide")}});
var NotificationServiceUtils={isClientActive:function(){return this._isClientPresent()&&(la.NotificationServiceClient.client.isOpen()||la.NotificationServiceClient.client.isConnecting())},_isClientPresent:function(){return this._exists(la.NotificationServiceClient)&&this._exists(la.NotificationServiceClient.client)},_exists:function(b){return!_.isUndefined(b)&&!_.isNull(b)}};
ns("la.utils",function(b){b.OnlineInvoicingPreferencesSyncer=function(){this.syncPreferences=function(a){if(FeatureTagUtils.isFeatureAvailable(FeatureTag.ONLINE_PAYMENTS)){var b=this._getPreference("lockOnlineInvoicing"),c=this._getPreference("onlineInvoicing");a.hasApplied()&&!b&&(this._updatePreference("lockOnlineInvoicing",!0),b=!0);b&&!c&&this._updatePreference("onlineInvoicing",!0)}};this._getPreference=function(a){la.BusinessSettings.findOrCreatePreference("invoices",a).getBooleanPreferenceValue()};
this._updatePreference=function(a,b){la.BusinessSettings.findOrCreatePreference("invoices",a).updateBooleanPreference(b)}}});var OnlineInvoicingPreferencesSyncer=new la.utils.OnlineInvoicingPreferencesSyncer;
ns("la.utils",function(b){b.OnlinePaymentOptionsCache=function(){var a=null,b=null,c=null,d=$.Deferred();this.getModel=function(){if(!a||this._isCachedForDifferentBusiness())a=new la.models.settings.invoice.OnlinePaymentOptions({businessId:la.BusinessSettings.getBusinessId()}),b=null,c&&(c.abort(),c=null);!c&&this._isNotCachedOrExpired()&&(d=$.Deferred(),c=a.fetch({async:!0,statusCode:{400:$.noop,401:$.noop,403:$.noop,404:$.noop,500:$.noop}}),c.done(d.resolve).fail(d.reject).done(this._handleSuccess).fail(this._handleError));
return a};this.getPromise=function(){return d};this.clearCache=function(){b=null};this.isFetching=function(){return _.isObject(c)&&4!==c.readyState};this._handleSuccess=function(){c=null;b=moment();OnlineInvoicingPreferencesSyncer.syncPreferences(a)};this._handleError=function(){c=null};this._isNotCachedOrExpired=function(){return!b||moment().isAfter(b.clone().add(60,"minute"))};this._isCachedForDifferentBusiness=function(){return la.BusinessSettings.getBusinessId()!==a.get("businessId")}}});
var OnlinePaymentOptionsCache=new la.utils.OnlinePaymentOptionsCache;ns("util",function(b){b.Queue=function(a,e,c){for(var d=[],f=0;f<a.length;f++)d.push(a[f]);b._processNextItem(d,e,c)};b._processNextItem=function(a,e,c){if(0===a.length)_.isUndefined(c)||c();else{var d=a.shift();e(d,function(){b._processNextItem(a,e,c)})}}});
var ScrollUtils=function(){return{getYInViewPosition:function(b,a,e,c){var d,f;d=$(window).scrollTop();f=d+$(window).height();c=c||0;if(e>=d&&e<=f)return e;if(b<a&&!(a<=d||b>=f)&&!(a<f&&b>d)){if(a<f&&b<d)return Math.min(a,d+c);if(b>d&&a>f)return Math.max(b,f-c)}return e}}}(),sessionStore={get:function(b){b=sessionStorage.getItem(b);return _(b).isEmpty()||"undefined"===b?void 0:JSON.parse(b)},set:function(b,a){sessionStorage.setItem(b,JSON.stringify(a))},remove:function(b){sessionStorage.removeItem(b)},
clear:function(){sessionStorage.clear()}},TaxCalculator=function(b,a,e){var c=b;!0===e&&(c=b/((a+100)/100));var d=a/100*c,f=MO.round(MO.add(c,d),4);return{netAmount:function(){return c},tax:function(){return d},grossAmount:function(){return f}}};ns("util.touch",function(b){b.isTouch=function(){return"ontouchstart"in document.documentElement}});
ns("util.transaction",function(b){b.getTransactionDescription=function(a,b,c,d){var f=_(["INVOICE","SUPPLIER_PAYMENT","SPEND_MONEY","CUSTOMER_REFUND","SUPPLIER_RETURN"]).contains(a)?"to":"from";a=la.models.TransactionType[a].description;b=b?b.get("name"):"";d=d?d:"";return a+" "+c+(0<b.length?" "+f+" "+b:"")+(0<d.length?", "+d:"")}});I18n.translations={};
I18n.translations.defaultMessages={processingMessage:"Processing your request. Please wait...",itemSelection:{one:"You have selected 1 {{item}}.",other:"You have selected {{count}} {{item}}s.",zero:"Please select {{item}} {{action}}."},itemUndeletable:{one:"1 {{item}} is {{region_specific_message}} and cannot be deleted.",other:"{{count}} {{item}}s are {{region_specific_message}} and cannot be deleted.",zero:"All the {{item}}s are {{region_specific_message}} and cannot be deleted."},itemConfirmDelete:{one:"Do you wish to delete this {{item}}?",
other:"Do you wish to delete these {{item}}s?",zero:"Do you wish to continue?"},itemConfirmDeleteTitle:"Delete {{item}}",itemConfirmDeleteNotification:"{{item}} deleted",itemsDeletedNotification:{one:"1 {{item}} deleted",other:"{{count}} {{item}}s deleted"},contactsMarkedReportableNotification:{one:"1 contact marked reportable",other:"{{count}} contacts marked reportable"},itemConfirmDeleteSingle:"Are you sure you want to delete this {{item}}?",contacts:{undeletable:{hasTransactionsOrAllocationRules:"You cannot delete a contact that has been used in any transaction or allocation rule(s). Deselect the active checkbox if you no longer want to use this contact.",
hasTransactions:"You cannot delete a contact that has been used in any transaction. Deselect the active checkbox if you no longer want to use this contact.",hasAllocationRules:"You cannot delete a contact that has been used in allocation rule(s). Deselect the active checkbox if you no longer want to use this contact."},reportableNonSupplier:"To mark Customers or Other Contacts as Reportable, you have to open the Contact and change it there.",deleteDialogTitle:"Delete contact",markReportableTitle:"Mark contact as reportable"},
invoices:{"delete":{title:"Delete invoice",one:"Do you wish to delete this {{item}}?"},historicalInvoiceMessage:"Invoices dated prior to {{openingBalanceDate}} will not automatically update account balances. Remember to include the amounts pertaining to this invoice in the respective account's opening balance",lockedInvoiceMessage:"Your professional partner or an administrator has locked all financial periods up to {{lockDate}}. You cannot enter or edit any transactions on or before {{lockDate}}"},
bills:{"delete":{title:"Delete bill",one:"Do you wish to delete this {{item}}?"},historicalInvoiceMessage:"Bills dated prior to {{openingBalanceDate}} will not automatically update account balances. Remember to include the amounts pertaining to this bill in the respective account's opening balance",lockedInvoiceMessage:"Your professional partner or an administrator has locked all financial periods up to {{lockDate}}. You cannot enter or edit any transactions on or before {{lockDate}}"},quotes:{"delete":{title:"Delete quote",
one:"Do you wish to delete this {{item}}?"}},advisor:{noAUsersMessage:"There are no users.",noManagedBusinessesMessage:"There are no managed businesses.",deleteManagedBusinessDialogTitle:"Are you sure you want to permanently delete this business?",deleteManagedBusinessDialogMessages:["You will not be able to access this business and the data in it again."],unlinkManagedBusinessDialogTitle:"Are you sure you want to stop being a partner for this business?",unlinkManagedBusinessDialogMessages:["You will no longer be able to access this business.",
"If you need access in the future, you will need to ask your client to invite you."],deleteManagedBusinessSuccessful:"Managed business deleted",handoverManagedBusinessDialogTitle:"Transfer ownership",handoverManagedBusinessDialogMessage:"Are you sure that you want to transfer ownership of this business?",handoverManagedBusinessSuccessful:"Business ownership transferred",cancelManagedBusinessHandoverDialogTitle:"Are you sure you want to cancel the transfer of ownership?",cancelManagedBusinessHandoverDialogMessage:"Your client won\u2019t be able to accept ownership of the business you\u2019ve set up for them.",
cancelManagedBusinessHandover:"Transfer request for {{businessName}} has been cancelled",managedBusinessHandoverSuccessful:"Transfer request for {{businessName}} sent",reinviteManagedBusinessDialogTitle:"Resend Invitation",reinviteManagedBusinessDialogMessage:"Are you sure that you want to resend the transfer of ownership invitation to this business?",reinviteManagedBusinessSuccessful:"Business invitation resent",deleteInvitationDialogTitle:"Are you sure you want to cancel this invite?",deleteInvitationDialogMessage1:"If you cancel this invite, your client won't be able to accept your invitation by email.",
deleteInvitationDialogMessage2:"You'll be able to send another invitation though, at any time.",deleteInvitationSuccessful:"Business invitation deleted"},users:{noUsersMessage:"There are no users.","delete":{title:"Are you sure you want to delete this user?",notification:{one:"User {{username}} deleted"}}},logo:{deleteDialogTitle:"Delete logo",deleteDialogMessage:"Are you sure you want to delete this logo?",deleteNotification:"Logo deleted"},header:{deleteDialogTitle:"Delete custom header",deleteDialogMessage:"Are you sure you want to delete this custom header?",
deleteNotification:"Custom header deleted"}};I18n.translations.au=_.extend(_.clone(I18n.translations.defaultMessages),{contactUndeletable:"linked to existing transactions or allocation rules"});I18n.translations.nz=_.extend(_.clone(I18n.translations.defaultMessages),{contactUndeletable:"linked to existing transactions"});
var UncategorisedAccountsChecker={check:function(b){FeatureTagUtils.isFeatureAvailable("UNCATEGORISED_ACCOUNTS")&&$.ajax({url:UrlUtils.apiTokenUrl(b,"/coa/accounts/uncategorised/count"),type:"GET",contentType:"application/json",dataType:"json",success:function(a){0<a.count?la.notification.showBanner("uncategorised_banner",{editAccountsLink:"#/businesses/"+b+"/settings/newCoa/bulkEditAccounts",gstSettingsLink:"#/businesses/"+b+"/settings/gstSettings"}):la.notification.hideNotification()}.bind(this)})},
getMessage:function(b){return'You have uncategorised accounts that may cause some reports to be unbalanced. Please categorise them from your <b><a href="'+UrlUtils.appUrl(b,"/settings/newCoa")+'">Chart of Accounts list</a></b>'}},UnlinkedBankFeedsNotificationUtil={check:function(b){var a=la.BusinessSettings.get("accountStatus");"ACTIVE"!==a&&"TRIAL"!==a||$.ajax({url:UrlUtils.apiTokenUrl(b,"/bankfeed/applications/unlinked/count"),type:"GET",contentType:"application/json",dataType:"json",success:function(a){a=
parseInt(a.number,10);if(0<a){var c=UrlUtils.appUrl(b,"/settings/bankFeeds");la.notification.showFixedNotification("<b>Great news!</b> Your new bank "+(1<a?"feeds are":"feed is")+' now ready to be <a href="'+c+'">linked to an account.</a>',"info",!0)}}})}};la.URL_LOGOUT="/logout.html";la.API_URL_LOGOUT="/logout";
var UrlUtils={domain:function(){return document.domain},requestHref:function(){return window.location.href},requestPath:function(){return window.location.pathname},requestHash:function(){return window.location.hash},context:function(){var b=this.requestPath().split("/")[1];return b?b:"LA.CO.NZ"},assetPath:function(){return"/"+this.context()+"/frontend"},url:function(b){return"/"+this.context()+b},webUrl:function(b,a){return"/"+this.context()+"/app/businesses/"+b+a},appUrl:function(b,a){return"/"+
this.context()+"/app.htm#"+this.appFragment(b,a)},businessUrl:function(b){return"/"+this.context()+"/app.htm#"+this.appFragment(la.BusinessSettings.getBusinessId(),b)},businessUsersSettings:function(b){return"#businesses/"+b+"/settings/users"},adminUrl:function(b){return"/"+this.context()+"/admin.htm#"+b},appFragment:function(b,a){return"businesses/"+b+a},noticeboardUrl:function(){return"/"+this.context()+"/app/noticeboard"},anonymousApiUrl:function(b){return"/"+this.context()+"/api"+b},apiUrl:function(b,
a){return this.anonymousApiUrl("/businesses/"+b+a)},apiTokenUrl:function(b,a,e){e=e||{};e.AuthToken=$.cookie(la.AUTH_TOKEN_KEY);e=_(e).collect(function(a,b){return b+"="+a}).join("&");return this.apiUrl(b,a+"?"+e)},redirect:function(b){window.location=b},reload:function(){window.location.reload()},openWindow:function(b,a){return window.open(b,a||"_blank")},navigateToRoute:function(b,a){window.app.navigate("businesses/"+b+a,{trigger:!0})},navigateToPublicRoute:function(b){window.app.navigate(b,{trigger:!0})},
callRouteHandler:function(b){window.app.callRouteHandler(b)},openXls:function(b){$.browser.msie?window.location=b:this.openWindow(b)},getBusinessIdFromURI:function(){var b=(new RegExp(/.+?\/(\d+)/)).exec(this.requestHash());return b?b[1]:null},getTransactionUrl:function(b,a,e,c){var d=b;"number"===typeof b&&(d=la.models.JournalType.getById(b).shortDescription);switch(d){case "Spend Mny":return this.appUrl(la.BusinessSettings.getBusinessId(),"/banking/spendMoney/p1-1/p3-"+a);case "Receive Mny":return this.appUrl(la.BusinessSettings.getBusinessId(),
"/banking/depositMoney/p1-1/p3-"+a);case "Gen Jrnl":return this.appUrl(la.BusinessSettings.getBusinessId(),"/settings/generalJournals/"+a);case "Transfer":return this.appUrl(la.BusinessSettings.getBusinessId(),"/banking/transferFunds/jsi-"+a);case "Invoice":return this.appUrl(la.BusinessSettings.getBusinessId(),"/invoices/"+a);case "Cust Pmt":case "Sale Disc":return this.appUrl(la.BusinessSettings.getBusinessId(),"/invoices/payment/view/"+a);case "Cust Rfnd":return this.appUrl(la.BusinessSettings.getBusinessId(),
"/invoices/refundToCustomer/jsi-"+a);case "Cust Rtrn":return this.appUrl(la.BusinessSettings.getBusinessId(),"/invoices/return/"+a);case "Credit Note":return this.appUrl(la.BusinessSettings.getBusinessId(),"/invoices/applyReturnToInvoice/jsi-"+a);case "Bill":return this.appUrl(la.BusinessSettings.getBusinessId(),"/bills/"+a);case "Supp Pmt":case "Supp Disc":return this.appUrl(la.BusinessSettings.getBusinessId(),"/bills/payment/view/"+a);case "Supp Rfnd":return this.appUrl(la.BusinessSettings.getBusinessId(),
"/bills/refundFromSupplier/jsi-"+a);case "Supp Rtrn":return this.appUrl(la.BusinessSettings.getBusinessId(),"/bills/return/"+a);case "Debit Note":return this.appUrl(la.BusinessSettings.getBusinessId(),"/bills/applyReturnToBill/jsi-"+a);case "Payroll":return this.appUrl(la.BusinessSettings.getBusinessId(),"/banking/accounts/"+e+"/payrollTransaction/"+a);case "Deposit":case "Withdrawal":return b=DateUtils.frontendToBackend(c).replace("T00:00:00","%2000:00:00"),c="",0<e&&(c="/p2-"+e),e="/banking/reconcileTransactions"+
c+("/p3-"+b),e+="/p4-"+b,e+="/p7-"+a,e+="/p10-3",this.appUrl(la.BusinessSettings.getBusinessId(),e);case "Quote":return this.appUrl(la.BusinessSettings.getBusinessId(),"/quotes/"+a)}},getEnterPaymentUrl:function(b){return this.appUrl(la.BusinessSettings.getBusinessId(),"/invoices/payment/new/to-"+b)},addLoginView:function(b){$("#"+b.id).remove();$("#pageContents").prepend(b.render().el)},getQueryParam:function(b){for(var a=window.location.search.substring(1).split("&"),e=0;e<a.length;e++){var c=a[e].split("=");
if(decodeURIComponent(c[0])===b)return c[1]}},getQueryParamValue:function(b){var a=this.requestHref().split("?")[1];if(a)for(var a=a.split("&"),e=0;e<a.length;e++){var c=a[e].split("=");if(decodeURIComponent(c[0])===b)return c[1]}},getFeatureTagsInParam:function(){var b=this.requestHref().split("?")[1];return b?b.split("&").filter(function(a){return 0===a.split("=")[0].indexOf("FeatureTag")}).map(function(a){a=a.split("=");var b={};b[a[0]]=a[1];return b}):[]},bankFeedPath:function(){return"/settings/bankFeeds"},
_buildFdsDashboardUrlQueryParam:function(b){b=(b||"").replace(/ /,"");var a="";switch(b.length){case 11:a="&abn="+b;break;case 9:a="&acn="+b}return a},navigateToOnlinePaymentSetupPortal:function(){var b=la.BusinessSettings,a=b.get("businessSerialNumber").replace(/\s/g,"");"AU"===la.BusinessSettings.get("region")?(b=this._buildFdsDashboardUrlQueryParam(b.get("abn")),this.openWindow(la.Config.get("onlinePaymentPortal")+"?sn="+a+b)):this.openWindow(la.Config.get("onlinePaymentPortal")+"?sn="+a)},partnerDashboardUrl:function(){var b=
"",b=document.referrer;return b=b.match(/^https?:\/\/(.*?)(partner|practice)(.*?)myob\.com\/ledgers\/live(\/|$)/i)?b:"/"+this.context()+"/app.htm#businesses/"+la.BusinessSettings.get("professionalPartnerBusinessId")+"/advisor"},homeUrl:function(){return UrlUtils.url("/app.htm#myBusinesses/autoRedirect-true")}},ValidationHelper={showError:function(b,a){if(80>a.length){b.addClass("required-empty");var e=b.parents(".form-control-wrapper").first();e.find(".help-inline").is("*")||e.append('<span class="help-inline error-message"></span>');
_(b.val()).isBlank()||e.addClass("focused");e=e.find(".help-inline");_(a).isBlank()||e.text(a+".")}else b.parents(".form-control-wrapper").find(".help-inline").remove()},clearError:function(b){b.removeClass("required-empty");b.parents(".form-control-wrapper").first().remove("focused");b.parents(".form-group").first().find(".help-inline").remove()}},WebSocketClient=function(b){var a=new WebSocket(b);a.onopen=function(){console.log("Connection established with "+b)};a.onclose=function(a){console.log(a)};
a.onmessage=function(a){console.log("Received message: "+a.data)};a.onerror=function(a){console.log(a)};a.isOpen=function(){return a.readyState===WebSocket.OPEN};a.isConnecting=function(){return a.readyState===WebSocket.CONNECTING};return a},Segment={load:function(b){window.analytics=window.analytics||[];window.analytics.methods="identify group track page pageview alias ready on once off trackLink trackForm trackClick trackSubmit".split(" ");window.analytics.factory=function(a){return function(){var b=
Array.prototype.slice.call(arguments);b.unshift(a);window.analytics.push(b);return window.analytics}};for(var a=0;a<window.analytics.methods.length;a++){var e=window.analytics.methods[a];window.analytics[e]=window.analytics.factory(e)}window.analytics.load=function(a){if(!document.getElementById("analytics-js")){var b=document.createElement("script");b.type="text/javascript";b.id="analytics-js";b.async=!0;b.src=("https:"===document.location.protocol?"https://":"http://")+"cdn.segment.io/analytics.js/v1/"+
a+"/analytics.min.js";a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(b,a)}};window.analytics.SNIPPET_VERSION="2.0.9";window.analytics.load(b)}};la.WagonContent=function(){return{loadPages:function(b){var a=this;this.pages?b():WelcomeWagon.Service.loadPages(la.Config.isProduction(),function(e){a.pages=e;b()},function(a){console.error("unable to get Welcome Wagon Pages",a)})},hasHelpOnPage:function(b){return _.contains(this.pages,b)}}}();
(function(){function b(){this.returnValue=!1}function a(){this.cancelBubble=!0}var e=0,c=[],d={},f={},g={"<":"lt",">":"gt","&":"amp",'"':"quot","'":"#39"},h=/[<>&\"\']/g,l=window.setTimeout,k={},m;(function(a){a=a.split(/,/);var c,b,e;for(c=0;c<a.length;c+=2)for(e=a[c+1].split(/ /),b=0;b<e.length;b++)f[e[b]]=a[c]})("application/msword,doc dot,application/pdf,pdf,application/pgp-signature,pgp,application/postscript,ps ai eps,application/rtf,rtf,application/vnd.ms-excel,xls xlb,application/vnd.ms-powerpoint,ppt pps pot,application/zip,zip,application/x-shockwave-flash,swf swfl,application/vnd.openxmlformats-officedocument.wordprocessingml.document,docx,application/vnd.openxmlformats-officedocument.wordprocessingml.template,dotx,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,xlsx,application/vnd.openxmlformats-officedocument.presentationml.presentation,pptx,application/vnd.openxmlformats-officedocument.presentationml.template,potx,application/vnd.openxmlformats-officedocument.presentationml.slideshow,ppsx,application/x-javascript,js,application/json,json,audio/mpeg,mpga mpega mp2 mp3,audio/x-wav,wav,audio/mp4,m4a,image/bmp,bmp,image/gif,gif,image/jpeg,jpeg jpg jpe,image/photoshop,psd,image/png,png,image/svg+xml,svg svgz,image/tiff,tiff tif,text/plain,asc txt text diff log,text/html,htm html xhtml,text/css,css,text/csv,csv,text/rtf,rtf,video/mpeg,mpeg mpg mpe m2v,video/quicktime,qt mov,video/mp4,mp4,video/x-m4v,m4v,video/x-flv,flv,video/x-ms-wmv,wmv,video/avi,avi,video/webm,webm,video/3gpp,3gp,video/3gpp2,3g2,video/vnd.rn-realvideo,rv,application/vnd.oasis.opendocument.formula-template,otf,application/octet-stream,exe");
var n={VERSION:"1.5.7",STOPPED:1,STARTED:2,QUEUED:1,UPLOADING:2,FAILED:4,DONE:5,GENERIC_ERROR:-100,HTTP_ERROR:-200,IO_ERROR:-300,SECURITY_ERROR:-400,INIT_ERROR:-500,FILE_SIZE_ERROR:-600,FILE_EXTENSION_ERROR:-601,IMAGE_FORMAT_ERROR:-700,IMAGE_MEMORY_ERROR:-701,IMAGE_DIMENSIONS_ERROR:-702,mimeTypes:f,ua:function(){var a=navigator,c=a.userAgent,b=a.vendor,e,d;d=(e=/WebKit/.test(c))&&-1!==b.indexOf("Apple");b=window.opera&&window.opera.buildNumber;return{windows:-1!==navigator.platform.indexOf("Win"),
android:/Android/.test(c),ie:!e&&!b&&/MSIE/gi.test(c)&&/Explorer/gi.test(a.appName),webkit:e,gecko:!e&&/Gecko/.test(c),safari:d,opera:!!b}}(),typeOf:function(a){return{}.toString.call(a).match(/\s([a-z|A-Z]+)/)[1].toLowerCase()},extend:function(a){n.each(arguments,function(c,b){0<b&&n.each(c,function(c,b){a[b]=c})});return a},cleanName:function(a){var c,b;b=[/[\300-\306]/g,"A",/[\340-\346]/g,"a",/\307/g,"C",/\347/g,"c",/[\310-\313]/g,"E",/[\350-\353]/g,"e",/[\314-\317]/g,"I",/[\354-\357]/g,"i",/\321/g,
"N",/\361/g,"n",/[\322-\330]/g,"O",/[\362-\370]/g,"o",/[\331-\334]/g,"U",/[\371-\374]/g,"u"];for(c=0;c<b.length;c+=2)a=a.replace(b[c],b[c+1]);a=a.replace(/\s+/g,"_");return a=a.replace(/[^a-z0-9_\-\.]+/gi,"")},addRuntime:function(a,b){b.name=a;c[a]=b;c.push(b);return b},guid:function(){var a=(new Date).getTime().toString(32),c;for(c=0;5>c;c++)a+=Math.floor(65535*Math.random()).toString(32);return(n.guidPrefix||"p")+a+(e++).toString(32)},buildUrl:function(a,c){var b="";n.each(c,function(a,c){b+=(b?
"&":"")+encodeURIComponent(c)+"="+encodeURIComponent(a)});b&&(a+=(0<a.indexOf("?")?"&":"?")+b);return a},each:function(a,c){var b,e;if(a)if(b=a.length,void 0===b)for(e in a){if(a.hasOwnProperty(e)&&!1===c(a[e],e))break}else for(e=0;e<b&&!1!==c(a[e],e);e++);},formatSize:function(a){return void 0===a||/\D/.test(a)?n.translate("N/A"):1073741824<a?Math.round(a/1073741824,1)+" GB":1048576<a?Math.round(a/1048576,1)+" MB":1024<a?Math.round(a/1024,1)+" KB":a+" b"},getPos:function(a,c){function b(a){var c,
e=0;c=0;a&&(c=a.getBoundingClientRect(),a="CSS1Compat"===g.compatMode?g.documentElement:g.body,e=c.left+a.scrollLeft,c=c.top+a.scrollTop);return{x:e,y:c}}var e=0,d=0,f,g=document;c=c||g.body;if(a&&a.getBoundingClientRect&&n.ua.ie&&(!g.documentMode||8>g.documentMode))return e=b(a),d=b(c),{x:e.x-d.x,y:e.y-d.y};for(f=a;f&&f!=c&&f.nodeType;)e+=f.offsetLeft||0,d+=f.offsetTop||0,f=f.offsetParent;for(f=a.parentNode;f&&f!=c&&f.nodeType;)e-=f.scrollLeft||0,d-=f.scrollTop||0,f=f.parentNode;return{x:e,y:d}},
getSize:function(a){return{w:a.offsetWidth||a.clientWidth,h:a.offsetHeight||a.clientHeight}},parseSize:function(a){var c;"string"==typeof a&&(a=/^([0-9]+)([mgk]?)$/.exec(a.toLowerCase().replace(/[^0-9mkg]/g,"")),c=a[2],a=+a[1],"g"==c&&(a*=1073741824),"m"==c&&(a*=1048576),"k"==c&&(a*=1024));return a},xmlEncode:function(a){return a?(""+a).replace(h,function(a){return g[a]?"&"+g[a]+";":a}):a},toArray:function(a){var c,b=[];for(c=0;c<a.length;c++)b[c]=a[c];return b},inArray:function(a,c){if(c){if(Array.prototype.indexOf)return Array.prototype.indexOf.call(c,
a);for(var b=0,e=c.length;b<e;b++)if(c[b]===a)return b}return-1},addI18n:function(a){return n.extend(d,a)},translate:function(a){return d[a]||a},isEmptyObj:function(a){if(void 0===a)return!0;for(var c in a)return!1;return!0},hasClass:function(a,c){return""==a.className?!1:(new RegExp("(^|\\s+)"+c+"(\\s+|$)")).test(a.className)},addClass:function(a,c){n.hasClass(a,c)||(a.className=""==a.className?c:a.className.replace(/\s+$/,"")+" "+c)},removeClass:function(a,c){a.className=a.className.replace(new RegExp("(^|\\s+)"+
c+"(\\s+|$)"),function(a,c,b){return" "===c&&" "===b?" ":""})},getStyle:function(a,c){if(a.currentStyle)return a.currentStyle[c];if(window.getComputedStyle)return window.getComputedStyle(a,null)[c]},addEvent:function(c,e,d,f){var g;e=e.toLowerCase();void 0===m&&(m="Plupload_"+n.guid());c.addEventListener?(g=d,c.addEventListener(e,g,!1)):c.attachEvent&&(g=function(){var c=window.event;c.target||(c.target=c.srcElement);c.preventDefault=b;c.stopPropagation=a;d(c)},c.attachEvent("on"+e,g));void 0===c[m]&&
(c[m]=n.guid());k.hasOwnProperty(c[m])||(k[c[m]]={});c=k[c[m]];c.hasOwnProperty(e)||(c[e]=[]);c[e].push({func:g,orig:d,key:f})},removeEvent:function(a,c,b){var e,d;"function"==typeof b?e=b:d=b;c=c.toLowerCase();if(a[m]&&k[a[m]]&&k[a[m]][c]){b=k[a[m]][c];for(var f=b.length-1;0<=f;f--)if(b[f].key===d||b[f].orig===e)if(a.removeEventListener?a.removeEventListener(c,b[f].func,!1):a.detachEvent&&a.detachEvent("on"+c,b[f].func),b[f].orig=null,b[f].func=null,b.splice(f,1),void 0!==e)break;b.length||delete k[a[m]][c];
if(n.isEmptyObj(k[a[m]])){delete k[a[m]];try{delete a[m]}catch(g){a[m]=void 0}}}},removeAllEvents:function(a,c){void 0!==a[m]&&a[m]&&n.each(k[a[m]],function(b,e){n.removeEvent(a,e,c)})},Uploader:function(a){function b(){var a,c=0,e;if(this.state==n.STARTED){for(e=0;e<g.length;e++)a||g[e].status!=n.QUEUED?c++:(a=g[e],a.status=n.UPLOADING,this.trigger("BeforeUpload",a)&&this.trigger("UploadFile",a));c==g.length&&(this.stop(),this.trigger("UploadComplete",g))}}function e(){var a,c;f.reset();for(a=0;a<
g.length;a++)c=g[a],void 0!==c.size?(f.size+=c.size,f.loaded+=c.loaded):f.size=void 0,c.status==n.DONE?f.uploaded++:c.status==n.FAILED?f.failed++:f.queued++;void 0===f.size?f.percent=0<g.length?Math.ceil(f.uploaded/g.length*100):0:(f.bytesPerSec=Math.ceil(f.loaded/((+new Date-h||1)/1E3)),f.percent=0<f.size?Math.ceil(f.loaded/f.size*100):0)}var d={},f,g=[],h,k=!1;f=new n.QueueProgress;a=n.extend({chunk_size:0,multipart:!0,multi_selection:!0,file_data_name:"file",filters:[]},a);n.extend(this,{state:n.STOPPED,
runtime:"",features:{},files:g,settings:a,total:f,id:n.guid(),init:function(){function d(){var a=u[r++],c,b,e;if(a){c=a.getFeatures();if(b=f.settings.required_features)for(b=b.split(","),e=0;e<b.length;e++)if(!c[b[e]]){d();return}a.init(f,function(b){b&&b.success?(f.features=c,f.runtime=a.name,f.trigger("Init",{runtime:a.name}),f.trigger("PostInit"),f.refresh()):d()})}else f.trigger("Error",{code:n.INIT_ERROR,message:n.translate("Init error.")})}var f=this,k,u,r=0,m;"function"==typeof a.preinit?a.preinit(f):
n.each(a.preinit,function(a,c){f.bind(c,a)});a.page_url=a.page_url||document.location.pathname.replace(/\/[^\/]+$/g,"/");/^(\w+:\/\/|\/)/.test(a.url)||(a.url=a.page_url+a.url);a.chunk_size=n.parseSize(a.chunk_size);a.max_file_size=n.parseSize(a.max_file_size);f.bind("FilesAdded",function(c,b){var e,d,h=0,k;(e=a.filters)&&e.length&&(k=[],n.each(e,function(a){n.each(a.extensions.split(/,/),function(a){/^\s*\*\s*$/.test(a)?k.push("\\.*"):k.push("\\."+a.replace(new RegExp("["+"/^$.*+?|()[]{}\\".replace(/./g,
"\\$&")+"]","g"),"\\$&"))})}),k=new RegExp(k.join("|")+"$","i"));for(e=0;e<b.length;e++)d=b[e],d.loaded=0,d.percent=0,d.status=n.QUEUED,k&&!k.test(d.name)?c.trigger("Error",{code:n.FILE_EXTENSION_ERROR,message:n.translate("File extension error."),file:d}):void 0!==d.size&&d.size>a.max_file_size?c.trigger("Error",{code:n.FILE_SIZE_ERROR,message:n.translate("File size error."),file:d}):(g.push(d),h++);if(h)l(function(){f.trigger("QueueChanged");f.refresh()},1);else return!1});a.unique_names&&f.bind("UploadFile",
function(a,c){var b=c.name.match(/\.([^.]+)$/),e="tmp";b&&(e=b[1]);c.target_name=c.id+"."+e});f.bind("UploadProgress",function(a,c){c.percent=0<c.size?Math.ceil(c.loaded/c.size*100):100;e()});f.bind("StateChanged",function(a){if(a.state==n.STARTED)h=+new Date;else if(a.state==n.STOPPED)for(k=a.files.length-1;0<=k;k--)a.files[k].status==n.UPLOADING&&(a.files[k].status=n.QUEUED,e())});f.bind("QueueChanged",e);f.bind("Error",function(a,c){c.file&&(c.file.status=n.FAILED,e(),a.state==n.STARTED&&l(function(){b.call(f)},
1))});f.bind("FileUploaded",function(a,c){c.status=n.DONE;c.loaded=c.size;a.trigger("UploadProgress",c);l(function(){b.call(f)},1)});if(a.runtimes)for(u=[],m=a.runtimes.split(/\s?,\s?/),k=0;k<m.length;k++)c[m[k]]&&u.push(c[m[k]]);else u=c;d();"function"==typeof a.init?a.init(f):n.each(a.init,function(a,c){f.bind(c,a)})},refresh:function(){this.trigger("Refresh")},start:function(){g.length&&this.state!=n.STARTED&&(this.state=n.STARTED,this.trigger("StateChanged"),b.call(this))},stop:function(){this.state!=
n.STOPPED&&(this.state=n.STOPPED,this.trigger("CancelUpload"),this.trigger("StateChanged"))},disableBrowse:function(a){k=void 0!==a?a:!0;this.trigger("DisableBrowse",k)},getFile:function(a){var c;for(c=g.length-1;0<=c;c--)if(g[c].id===a)return g[c]},removeFile:function(a){var c;for(c=g.length-1;0<=c;c--)if(g[c].id===a.id)return this.splice(c,1)[0]},splice:function(a,c){var b;b=g.splice(void 0===a?0:a,void 0===c?g.length:c);this.trigger("FilesRemoved",b);this.trigger("QueueChanged");return b},trigger:function(a){var c=
d[a.toLowerCase()],b,e;if(c)for(e=Array.prototype.slice.call(arguments),e[0]=this,b=0;b<c.length;b++)if(!1===c[b].func.apply(c[b].scope,e))return!1;return!0},hasEventListener:function(a){return!!d[a.toLowerCase()]},bind:function(a,c,b){var e;a=a.toLowerCase();e=d[a]||[];e.push({func:c,scope:b||this});d[a]=e},unbind:function(a,c){a=a.toLowerCase();var b=d[a],e;if(b){if(void 0!==c)for(e=b.length-1;0<=e;e--){if(b[e].func===c){b.splice(e,1);break}}else b=[];b.length||delete d[a]}},unbindAll:function(){var a=
this;n.each(d,function(c,b){a.unbind(b)})},destroy:function(){this.stop();this.trigger("Destroy");this.unbindAll()}})},File:function(a,c,b){this.id=a;this.name=c;this.size=b;this.status=this.percent=this.loaded=0},Runtime:function(){this.getFeatures=function(){};this.init=function(a,c){}},QueueProgress:function(){var a=this;a.size=0;a.loaded=0;a.uploaded=0;a.failed=0;a.queued=0;a.percent=0;a.bytesPerSec=0;a.reset=function(){a.size=a.loaded=a.uploaded=a.failed=a.queued=a.percent=a.bytesPerSec=0}},
runtimes:{}};window.plupload=n})();
(function(b,a,e,c){function d(a,c){var e;if("FileReader"in b)e=new FileReader,e.readAsDataURL(a),e.onload=function(){c(e.result)};else return c(a.getAsDataURL())}function f(a,c){var e;if("FileReader"in b)e=new FileReader,e.readAsBinaryString(a),e.onload=function(){c(e.result)};else return c(a.getAsBinary())}function g(c,b,e,f){var g,h,n,y=this;d(m[c.id],function(d){g=a.createElement("canvas");g.style.display="none";a.body.appendChild(g);h=new Image;h.onerror=h.onabort=function(){f({success:!1})};
h.onload=function(){var m,w,A,B;b.width||(b.width=h.width);b.height||(b.height=h.height);n=Math.min(b.width/h.width,b.height/h.height);if(1>n)m=Math.round(h.width*n),w=Math.round(h.height*n);else if(b.quality&&"image/jpeg"===e)m=h.width,w=h.height;else{f({success:!1});return}g.width=m;g.height=w;B=h;var C=B.naturalWidth,G=B.naturalHeight,N=m,H=w,I=g.getContext("2d");I.save();var E;E=B.naturalWidth;if(1048576<E*B.naturalHeight){var O=a.createElement("canvas");O.width=O.height=1;O=O.getContext("2d");
O.drawImage(B,-E+1,0);E=0===O.getImageData(0,0,1,1).data[3]}else E=!1;E&&(C/=2,G/=2);E=a.createElement("canvas");E.width=E.height=1024;var O=E.getContext("2d"),Q;Q=G;var L=a.createElement("canvas");L.width=1;L.height=Q;L=L.getContext("2d");L.drawImage(B,0,0);for(var L=L.getImageData(0,0,1,Q).data,T=0,P=Q,R=Q;R>T;)0===L[4*(R-1)+3]?P=R:T=R,R=P+T>>1;Q=R/Q;Q=0===Q?1:Q;for(L=0;L<G;){T=L+1024>G?G-L:1024;for(P=0;P<C;)R=P+1024>C?C-P:1024,O.clearRect(0,0,1024,1024),O.drawImage(B,-P,-L),I.drawImage(E,0,0,R,
T,P*N/C<<0,L*H/G/Q<<0,Math.ceil(R*N/C),Math.ceil(T*H/G/Q)),P+=1024;L+=1024}I.restore();"image/jpeg"===e&&(A=new l(atob(d.substring(d.indexOf("base64,")+7))),A.headers&&A.headers.length&&(B=new k,B.init(A.get("exif")[0])&&(B.setExif("PixelXDimension",m),B.setExif("PixelYDimension",w),A.set("exif",B.getBinary()),y.hasEventListener("ExifData")&&y.trigger("ExifData",c,B.EXIF()),y.hasEventListener("GpsData")&&y.trigger("GpsData",c,B.GPS()))));if(b.quality&&"image/jpeg"===e)try{d=g.toDataURL(e,b.quality/
100)}catch(V){d=g.toDataURL(e)}else d=g.toDataURL(e);d=d.substring(d.indexOf("base64,")+7);d=atob(d);A&&A.headers&&A.headers.length&&(d=A.restore(d),A.purge());g.parentNode.removeChild(g);f({success:!0,data:d})};h.src=d})}function h(){function a(c,b){var f=e?0:-8*(b-1),g=0,h;for(h=0;h<b;h++)g|=d.charCodeAt(c+h)<<Math.abs(f+8*h);return g}function b(a,c,e){e=3===arguments.length?e:d.length-c-1;d=d.substr(0,c)+a+d.substr(e+c)}var e=!1,d;return{II:function(a){if(a===c)return e;e=a},init:function(a){e=
!1;d=a},SEGMENT:function(a,c,e){switch(arguments.length){case 1:return d.substr(a,d.length-a-1);case 2:return d.substr(a,c);case 3:b(e,a,c);break;default:return d}},BYTE:function(c){return a(c,1)},SHORT:function(c){return a(c,2)},LONG:function(d,f){if(f===c)return a(d,4);var g="",h=e?0:-24,k;for(k=0;4>k;k++)g+=String.fromCharCode(f>>Math.abs(h+8*k)&255);b(g,d,4)},SLONG:function(c){c=a(c,4);return 2147483647<c?c-4294967296:c},STRING:function(c,b){var e="";for(b+=c;c<b;c++)e+=String.fromCharCode(a(c,
1));return e}}}function l(a){var b={65505:{app:"EXIF",name:"APP1",signature:"Exif\x00"},65506:{app:"ICC",name:"APP2",signature:"ICC_PROFILE\x00"},65517:{app:"IPTC",name:"APP13",signature:"Photoshop 3.0\x00"}},e=[],d,f,g=c,k=0;d=new h;d.init(a);if(65496===d.SHORT(0)){f=2;for(a=Math.min(1048576,a.length);f<=a;)if(g=d.SHORT(f),65488<=g&&65495>=g)f+=2;else{if(65498===g||65497===g)break;k=d.SHORT(f+2)+2;b[g]&&d.STRING(f+4,b[g].signature.length)===b[g].signature&&e.push({hex:g,app:b[g].app.toUpperCase(),
name:b[g].name.toUpperCase(),start:f,length:k,segment:d.SEGMENT(f,k)});f+=k}d.init(null);return{headers:e,restore:function(a){d.init(a);var c=new l(a);if(!c.headers)return!1;for(a=c.headers.length;0<a;a--){var b=c.headers[a-1];d.SEGMENT(b.start,b.length,"")}c.purge();f=65504==d.SHORT(2)?4+d.SHORT(4):2;a=0;for(c=e.length;a<c;a++)d.SEGMENT(f,0,e[a].segment),f+=e[a].length;return d.SEGMENT()},get:function(a){for(var c=[],b=0,d=e.length;b<d;b++)e[b].app===a.toUpperCase()&&c.push(e[b].segment);return c},
set:function(a,c){var b=[];"string"===typeof c?b.push(c):b=c;for(var d=ii=0,f=e.length;d<f&&!(e[d].app===a.toUpperCase()&&(e[d].segment=b[ii],e[d].length=b[ii].length,ii++),ii>=b.length);d++);},purge:function(){e=[];d.init(null)}}}}function k(){function a(e,d){var h=b.SHORT(e),k,q,n,m,l,t=[],G={};for(k=0;k<h;k++)if(l=e+12*k+2,n=d[b.SHORT(l)],n!==c){q=b.SHORT(l+=2);m=b.LONG(l+=2);l+=4;t=[];switch(q){case 1:case 7:4<m&&(l=b.LONG(l)+f.tiffHeader);for(q=0;q<m;q++)t[q]=b.BYTE(l+q);break;case 2:4<m&&(l=
b.LONG(l)+f.tiffHeader);G[n]=b.STRING(l,m-1);continue;case 3:2<m&&(l=b.LONG(l)+f.tiffHeader);for(q=0;q<m;q++)t[q]=b.SHORT(l+2*q);break;case 4:1<m&&(l=b.LONG(l)+f.tiffHeader);for(q=0;q<m;q++)t[q]=b.LONG(l+4*q);break;case 5:l=b.LONG(l)+f.tiffHeader;for(q=0;q<m;q++)t[q]=b.LONG(l+4*q)/b.LONG(l+4*q+4);break;case 9:l=b.LONG(l)+f.tiffHeader;for(q=0;q<m;q++)t[q]=b.SLONG(l+4*q);break;case 10:l=b.LONG(l)+f.tiffHeader;for(q=0;q<m;q++)t[q]=b.SLONG(l+4*q)/b.SLONG(l+4*q+4);break;default:continue}m=1==m?t[0]:t;
g.hasOwnProperty(n)&&"object"!=typeof m?G[n]=g[n][m]:G[n]=m}return G}var b,d,f={},g;b=new h;d={tiff:{274:"Orientation",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer"},exif:{36864:"ExifVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",36867:"DateTimeOriginal",33434:"ExposureTime",33437:"FNumber",34855:"ISOSpeedRatings",37377:"ShutterSpeedValue",37378:"ApertureValue",37383:"MeteringMode",37384:"LightSource",37385:"Flash",41986:"ExposureMode",41987:"WhiteBalance",41990:"SceneCaptureType",
41988:"DigitalZoomRatio",41992:"Contrast",41993:"Saturation",41994:"Sharpness"},gps:{0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude"}};g={ColorSpace:{1:"sRGB",0:"Uncalibrated"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{1:"Daylight",2:"Fliorescent",3:"Tungsten",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 -5400K)",
14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire.",1:"Flash fired.",5:"Strobe return light not detected.",7:"Strobe return light detected.",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",
16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",
79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},ExposureMode:{0:"Auto exposure",1:"Manual exposure",2:"Auto bracket"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},
Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},GPSLatitudeRef:{N:"North latitude",S:"South latitude"},GPSLongitudeRef:{E:"East longitude",W:"West longitude"}};return{init:function(e){f={tiffHeader:10};if(e===c||!e.length)return!1;b.init(e);return 65505===b.SHORT(0)&&"EXIF\x00"===b.STRING(4,5).toUpperCase()?(e=c,e=f.tiffHeader,b.II(18761==b.SHORT(e)),42!==b.SHORT(e+=2)?e=!1:(f.IFD0=f.tiffHeader+b.LONG(e+
2),e=a(f.IFD0,d.tiff),f.exifIFD="ExifIFDPointer"in e?f.tiffHeader+e.ExifIFDPointer:c,f.gpsIFD="GPSInfoIFDPointer"in e?f.tiffHeader+e.GPSInfoIFDPointer:c,e=!0),e):!1},EXIF:function(){var c;c=a(f.exifIFD,d.exif);if(c.ExifVersion&&"array"===e.typeOf(c.ExifVersion)){for(var b=0,g="";b<c.ExifVersion.length;b++)g+=String.fromCharCode(c.ExifVersion[b]);c.ExifVersion=g}return c},GPS:function(){var c;c=a(f.gpsIFD,d.gps);c.GPSVersionID&&(c.GPSVersionID=c.GPSVersionID.join("."));return c},setExif:function(a,
c){if("PixelXDimension"!==a&&"PixelYDimension"!==a)return!1;var e;e=a;var g,h,k,q=0;if("string"===typeof e)for(hex in g=d.exif,g)if(g[hex]===e){e=hex;break}g=f.exifIFD;h=b.SHORT(g);for(i=0;i<h;i++)if(k=g+12*i+2,b.SHORT(k)==e){q=k+8;break}q?(b.LONG(q,c),e=!0):e=!1;return e},getBinary:function(){return b.SEGMENT()}}}var m={},n;e.runtimes.Html5=e.addRuntime("html5",{getFeatures:function(){var c,d,f,g,h,k;d=f=h=k=!1;b.XMLHttpRequest&&(c=new XMLHttpRequest,f=!!c.upload,d=!(!c.sendAsBinary&&!c.upload));
d&&(g=!!(c.sendAsBinary||b.Uint8Array&&b.ArrayBuffer),h=!(!File||!File.prototype.getAsDataURL&&!b.FileReader||!g),k=!(!File||!(File.prototype.mozSlice||File.prototype.webkitSlice||File.prototype.slice)));n=e.ua.safari&&e.ua.windows;c=d;d=a.createElement("div");return{html5:c,dragdrop:"draggable"in d||"ondragstart"in d&&"ondrop"in d,jpgresize:h,pngresize:h,multipart:h||!!b.FileReader||!!b.FormData,canSendBinary:g,cantSendBlobInFormData:!(!(e.ua.gecko&&b.FormData&&b.FileReader)||FileReader.prototype.readAsArrayBuffer)||
e.ua.android,progress:f,chunks:k,multi_selection:!(e.ua.safari&&e.ua.windows),triggerDialog:e.ua.gecko&&b.FormData||e.ua.webkit}},init:function(c,d){function h(a){var b,d,f=[],g,k={};for(d=0;d<a.length;d++)b=a[d],k[b.name]&&e.ua.safari&&e.ua.windows||(k[b.name]=!0,g=e.guid(),m[g]=b,f.push(new e.File(g,b.fileName||b.name,b.fileSize||b.size)));f.length&&c.trigger("FilesAdded",f)}var k,u;k=this.getFeatures();k.html5?(c.bind("Init",function(b){var d,f,g=[],k,p,n=b.settings.filters,u,m;k=a.body;d=a.createElement("div");
d.id=b.id+"_html5_container";e.extend(d.style,{position:"absolute",background:c.settings.shim_bgcolor||"transparent",width:"100px",height:"100px",overflow:"hidden",zIndex:99999,opacity:c.settings.shim_bgcolor?"":0});d.className="plupload html5";c.settings.container&&(k=a.getElementById(c.settings.container),"static"===e.getStyle(k,"position")&&(k.style.position="relative"));k.appendChild(d);k=0;a:for(;k<n.length;k++)for(u=n[k].extensions.split(/,/),p=0;p<u.length;p++){if("*"===u[p]){g=[];break a}(m=
e.mimeTypes[u[p]])&&-1===e.inArray(m,g)&&g.push(m)}d.innerHTML='<input id="'+c.id+'_html5"  style="font-size:999px" type="file" accept="'+g.join(",")+'" '+(c.settings.multi_selection&&c.features.multi_selection?'multiple="multiple"':"")+" />";d.scrollTop=100;g=a.getElementById(c.id+"_html5");b.features.triggerDialog?e.extend(g.style,{position:"absolute",width:"100%",height:"100%"}):e.extend(g.style,{cssFloat:"right",styleFloat:"right"});g.onchange=function(){h(this.files);this.value=""};if(f=a.getElementById(b.settings.browse_button)){var r=
b.settings.browse_button_hover,l=b.settings.browse_button_active;d=b.features.triggerDialog?f:d;r&&(e.addEvent(d,"mouseover",function(){e.addClass(f,r)},b.id),e.addEvent(d,"mouseout",function(){e.removeClass(f,r)},b.id));l&&(e.addEvent(d,"mousedown",function(){e.addClass(f,l)},b.id),e.addEvent(a.body,"mouseup",function(){e.removeClass(f,l)},b.id));b.features.triggerDialog&&e.addEvent(f,"click",function(c){var e=a.getElementById(b.id+"_html5");e&&!e.disabled&&e.click();c.preventDefault()},b.id)}}),
c.bind("PostInit",function(){var b=a.getElementById(c.settings.drop_element);b&&(n?e.addEvent(b,"dragenter",function(d){var f;f=a.getElementById(c.id+"_drop");f||(f=a.createElement("input"),f.setAttribute("type","file"),f.setAttribute("id",c.id+"_drop"),f.setAttribute("multiple","multiple"),e.addEvent(f,"change",function(){h(this.files);e.removeEvent(f,"change",c.id);f.parentNode.removeChild(f)},c.id),e.addEvent(f,"dragover",function(a){a.stopPropagation()},c.id),b.appendChild(f));e.getPos(b,a.getElementById(c.settings.container));
d=e.getSize(b);"static"===e.getStyle(b,"position")&&e.extend(b.style,{position:"relative"});e.extend(f.style,{position:"absolute",display:"block",top:0,left:0,width:d.w+"px",height:d.h+"px",opacity:0})},c.id):(e.addEvent(b,"dragover",function(a){a.preventDefault()},c.id),e.addEvent(b,"drop",function(a){var c=a.dataTransfer;c&&c.files&&h(c.files);a.preventDefault()},c.id)))}),c.bind("Refresh",function(b){var d,f,g;if(d=a.getElementById(c.settings.browse_button))f=e.getPos(d,a.getElementById(b.settings.container)),
g=e.getSize(d),b=a.getElementById(c.id+"_html5_container"),e.extend(b.style,{top:f.y+"px",left:f.x+"px",width:g.w+"px",height:g.h+"px"}),c.features.triggerDialog&&("static"===e.getStyle(d,"position")&&e.extend(d.style,{position:"relative"}),f=parseInt(e.getStyle(d,"zIndex"),10),isNaN(f)&&(f=0),e.extend(d.style,{zIndex:f}),e.extend(b.style,{zIndex:f-1}))}),c.bind("DisableBrowse",function(c,b){var e=a.getElementById(c.id+"_html5");e&&(e.disabled=b)}),c.bind("CancelUpload",function(){u&&u.abort&&u.abort()}),
c.bind("UploadFile",function(a,c){function d(a,c,b){var e;if(File.prototype.slice)try{return a.slice(),a.slice(c,b)}catch(f){return a.slice(c,b-c)}else return(e=File.prototype.webkitSlice||File.prototype.mozSlice)?e.call(a,c,b):null}function h(f){function g(){function h(c){if(u.sendAsBinary)u.sendAsBinary(c);else if(a.features.canSendBinary){for(var b=new Uint8Array(c.length),e=0;e<c.length;e++)b[e]=c.charCodeAt(e)&255;u.send(b.buffer)}}function m(d){var f=0,p="----pluploadboundary"+e.guid(),y,F=
"";u=new XMLHttpRequest;u.upload&&(u.upload.onprogress=function(b){c.loaded=Math.min(c.size,n+b.loaded-f);a.trigger("UploadProgress",c)});u.onreadystatechange=function(){var b,f;if(4==u.readyState&&a.state!==e.STOPPED){try{b=u.status}catch(h){b=0}if(400<=b)a.trigger("Error",{code:e.HTTP_ERROR,message:e.translate("HTTP Error."),file:c,status:b});else{if(t){f={chunk:q,chunks:t,response:u.responseText,status:b};a.trigger("ChunkUploaded",c,f);n+=L;if(f.cancelled){c.status=e.FAILED;return}c.loaded=Math.min(c.size,
(q+1)*D)}else c.loaded=c.size;a.trigger("UploadProgress",c);d=l=y=F=null;!t||++q>=t?(c.status=e.DONE,a.trigger("FileUploaded",c,{response:u.responseText,status:b})):g()}}};if(a.settings.multipart&&k.multipart){w.name=c.target_name||c.name;u.open("post",P,!0);e.each(a.settings.headers,function(a,c){u.setRequestHeader(c,a)});if("string"!==typeof d&&b.FormData){y=new FormData;e.each(e.extend(w,a.settings.multipart_params),function(a,c){y.append(c,a)});y.append(a.settings.file_data_name,d);u.send(y);
return}if("string"===typeof d){u.setRequestHeader("Content-Type","multipart/form-data; boundary="+p);e.each(e.extend(w,a.settings.multipart_params),function(a,c){F+="--"+p+'\r\nContent-Disposition: form-data; name="'+c+'"\r\n\r\n';F+=unescape(encodeURIComponent(a))+"\r\n"});T=e.mimeTypes[c.name.replace(/^.+\.([^.]+)/,"$1").toLowerCase()]||"application/octet-stream";F+="--"+p+'\r\nContent-Disposition: form-data; name="'+a.settings.file_data_name+'"; filename="'+unescape(encodeURIComponent(c.name))+
'"\r\nContent-Type: '+T+"\r\n\r\n"+d+"\r\n--"+p+"--\r\n";f=F.length-d.length;d=F;h(d);return}}P=e.buildUrl(a.settings.url,e.extend(w,a.settings.multipart_params));u.open("post",P,!0);u.setRequestHeader("Content-Type","application/octet-stream");e.each(a.settings.headers,function(a,c){u.setRequestHeader(c,a)});"string"===typeof d?h(d):u.send(d)}var l,t,w,D,L,T,P=a.settings.url;c.status!=e.DONE&&c.status!=e.FAILED&&a.state!=e.STOPPED&&(w={name:c.target_name||c.name},p.chunk_size&&c.size>p.chunk_size&&
(k.chunks||"string"==typeof f)?(D=p.chunk_size,t=Math.ceil(c.size/D),L=Math.min(D,c.size-q*D),l="string"==typeof f?f.substring(q*D,q*D+L):d(f,q*D,q*D+L),w.chunk=q,w.chunks=t):(L=c.size,l=f),a.settings.multipart&&k.multipart&&"string"!==typeof l&&b.FileReader&&k.cantSendBlobInFormData&&k.chunks&&a.settings.chunk_size?function(){var a=new FileReader;a.onload=function(){m(a.result);a=null};a.readAsBinaryString(l)}():m(l))}var q=0,n=0;g()}var p=a.settings,q;q=m[c.id];k.jpgresize&&a.settings.resize&&/\.(png|jpg|jpeg)$/i.test(c.name)?
g.call(a,c,a.settings.resize,/\.png$/i.test(c.name)?"image/png":"image/jpeg",function(a){a.success?(c.size=a.data.length,h(a.data)):k.chunks?h(q):f(q,h)}):!k.chunks&&k.jpgresize?f(q,h):h(q)}),c.bind("Destroy",function(c){var b,d,f=a.body,g={inputContainer:c.id+"_html5_container",inputFile:c.id+"_html5",browseButton:c.settings.browse_button,dropElm:c.settings.drop_element};for(b in g)(d=a.getElementById(g[b]))&&e.removeAllEvents(d,c.id);e.removeAllEvents(a.body,c.id);c.settings.container&&(f=a.getElementById(c.settings.container));
f.removeChild(a.getElementById(g.inputContainer))}),d({success:!0})):d({success:!1})}})})(window,document,plupload);
(function(b,a,e,c){function d(){var a;try{a=navigator.plugins["Shockwave Flash"],a=a.description}catch(c){try{a=(new ActiveXObject("ShockwaveFlash.ShockwaveFlash")).GetVariable("$version")}catch(b){a="0.0"}}a=a.match(/\d+/g);return parseFloat(a[0]+"."+a[1])}var f={},g={};e.flash={trigger:function(a,c,b){setTimeout(function(){var e=f[a];e&&e.trigger("Flash:"+c,b)},0)}};e.runtimes.Flash=e.addRuntime("flash",{getFeatures:function(){return{jpgresize:!0,pngresize:!0,maxWidth:8091,maxHeight:8091,chunks:!0,
progress:!0,multipart:!0,multi_selection:!0}},init:function(c,b){function k(){return a.getElementById(c.id+"_flash")}function m(){5E3<q++?b({success:!1}):!1===g[c.id]&&setTimeout(m,1)}var n,q=0,p=a.body;10>d()?b({success:!1}):(g[c.id]=!1,f[c.id]=c,a.getElementById(c.settings.browse_button),n=a.createElement("div"),n.id=c.id+"_flash_container",e.extend(n.style,{position:"absolute",top:"0px",background:c.settings.shim_bgcolor||"transparent",zIndex:99999,width:"100%",height:"100%"}),n.className="plupload flash",
c.settings.container&&(p=a.getElementById(c.settings.container),"static"===e.getStyle(p,"position")&&(p.style.position="relative")),p.appendChild(n),function(){var b,d;b='<object id="'+c.id+'_flash" type="application/x-shockwave-flash" data="'+c.settings.flash_swf_url+'" ';e.ua.ie&&(b+='classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" ');b+='width="100%" height="100%" style="outline:0"><param name="movie" value="'+c.settings.flash_swf_url+'" /><param name="flashvars" value="id='+escape(c.id)+
'" /><param name="wmode" value="transparent" /><param name="allowscriptaccess" value="always" /></object>';e.ua.ie?(d=a.createElement("div"),n.appendChild(d),d.outerHTML=b):n.innerHTML=b}(),m(),n=null,c.bind("Destroy",function(c){e.removeAllEvents(a.body,c.id);delete g[c.id];delete f[c.id];(c=a.getElementById(c.id+"_flash_container"))&&c.parentNode.removeChild(c)}),c.bind("Flash:Init",function(){var d={};try{k().setFileFilters(c.settings.filters,c.settings.multi_selection)}catch(f){b({success:!1});
return}g[c.id]||(g[c.id]=!0,c.bind("UploadFile",function(a,b){var f=a.settings,g=c.settings.resize||{};k().uploadFile(d[b.id],f.url,{name:b.target_name||b.name,mime:e.mimeTypes[b.name.replace(/^.+\.([^.]+)/,"$1").toLowerCase()]||"application/octet-stream",chunk_size:f.chunk_size,width:g.width,height:g.height,quality:g.quality,multipart:f.multipart,multipart_params:f.multipart_params||{},file_data_name:f.file_data_name,format:/\.(jpg|jpeg)$/i.test(b.name)?"jpg":"png",headers:f.headers,urlstream_upload:f.urlstream_upload})}),
c.bind("CancelUpload",function(){k().cancelUpload()}),c.bind("Flash:UploadProcess",function(a,c){var b=a.getFile(d[c.id]);b.status!=e.FAILED&&(b.loaded=c.loaded,b.size=c.size,a.trigger("UploadProgress",b))}),c.bind("Flash:UploadChunkComplete",function(a,c){var b=a.getFile(d[c.id]);a.trigger("ChunkUploaded",b,{chunk:c.chunk,chunks:c.chunks,response:c.text});b.status!==e.FAILED&&a.state!==e.STOPPED&&k().uploadNextChunk();c.chunk==c.chunks-1&&(b.status=e.DONE,a.trigger("FileUploaded",b,{response:c.text}))}),
c.bind("Flash:SelectFiles",function(a,b){var f,g,k=[],p;for(g=0;g<b.length;g++)f=b[g],p=e.guid(),d[p]=f.id,d[f.id]=p,k.push(new e.File(p,f.name,f.size));k.length&&c.trigger("FilesAdded",k)}),c.bind("Flash:SecurityError",function(a,b){c.trigger("Error",{code:e.SECURITY_ERROR,message:e.translate("Security error."),details:b.message,file:c.getFile(d[b.id])})}),c.bind("Flash:GenericError",function(a,b){c.trigger("Error",{code:e.GENERIC_ERROR,message:e.translate("Generic error."),details:b.message,file:c.getFile(d[b.id])})}),
c.bind("Flash:IOError",function(a,b){c.trigger("Error",{code:e.IO_ERROR,message:e.translate("IO error."),details:b.message,file:c.getFile(d[b.id])})}),c.bind("Flash:ImageError",function(a,b){c.trigger("Error",{code:parseInt(b.code,10),message:e.translate("Image error."),file:c.getFile(d[b.id])})}),c.bind("Flash:StageEvent:rollOver",function(b){var d;d=a.getElementById(c.settings.browse_button);b=b.settings.browse_button_hover;d&&b&&e.addClass(d,b)}),c.bind("Flash:StageEvent:rollOut",function(b){var d;
d=a.getElementById(c.settings.browse_button);b=b.settings.browse_button_hover;d&&b&&e.removeClass(d,b)}),c.bind("Flash:StageEvent:mouseDown",function(b){var d,f;d=a.getElementById(c.settings.browse_button);f=b.settings.browse_button_active;d&&f&&(e.addClass(d,f),e.addEvent(a.body,"mouseup",function(){e.removeClass(d,f)},b.id))}),c.bind("Flash:StageEvent:mouseUp",function(b){var d;d=a.getElementById(c.settings.browse_button);b=b.settings.browse_button_active;d&&b&&e.removeClass(d,b)}),c.bind("Flash:ExifData",
function(a,b){c.trigger("ExifData",c.getFile(d[b.id]),b.data)}),c.bind("Flash:GpsData",function(a,b){c.trigger("GpsData",c.getFile(d[b.id]),b.data)}),c.bind("QueueChanged",function(a){c.refresh()}),c.bind("FilesRemoved",function(a,c){var b;for(b=0;b<c.length;b++)k().removeFile(d[c[b].id])}),c.bind("StateChanged",function(a){c.refresh()}),c.bind("Refresh",function(b){var d,f;k().setFileFilters(c.settings.filters,c.settings.multi_selection);if(d=a.getElementById(b.settings.browse_button))f=e.getPos(d,
a.getElementById(b.settings.container)),d=e.getSize(d),e.extend(a.getElementById(b.id+"_flash_container").style,{top:f.y+"px",left:f.x+"px",width:d.w+"px",height:d.h+"px"})}),c.bind("DisableBrowse",function(a,c){k().disableBrowse(c)}),b({success:!0}))}))}})})(window,document,plupload);ns("la.models",function(b){b.Singleton=b.Model.extend({fetch:function(a){this._super(_(a||{}).extend({async:!1}))}})});
ns("la.models.commons",function(b){b.Config=la.models.Singleton.extend({fetch:function(a){this._super({success:function(b){I18n.locale=la.Config.getRegion().toLowerCase();a&&!_(a.success).isUndefined()&&a.success(b)}})},url:function(){return UrlUtils.anonymousApiUrl("/config")},getRegion:function(){return this.get("region")},getPracticeOnlineIFrameUrl:function(){return this.get("practiceOnlineIFrameUrl")},getPracticeOnlineApiKey:function(){return this.get("practiceOnlineApiKey")},isAU:function(){return!this.isNZ()},
isNZ:function(){return this.getRegion()?"NZ"===this.getRegion().toUpperCase():!1},isProduction:function(){return this._isEnvironment("production")},isStaging:function(){return this._isEnvironment("staging")},isTesting:function(){return this._isEnvironment("testing")},_isEnvironment:function(a){return a&&a===this.get("environment")}})});
ns("la.models.commons",function(b){b.Preference=la.models.Model.extend({url:function(){var a=this.get("businessId");this.get("userId");a=_.isUndefined(a)||null===a?UrlUtils.anonymousApiUrl("/preferences"):UrlUtils.apiUrl(a,"/preferences");return this.isNew()?a:a+("/"===a.charAt(a.length-1)?"":"/")+this.id},getBooleanPreferenceValue:function(a){var b=this.get("preferenceValue");return _.isUndefined(b)&&!_.isUndefined(a)&&_.contains(_.keys(a),"defaultValue")?a.defaultValue:"true"===b||!0===b},updatePreference:function(a,
b){this.save({preferenceValue:a},b)},updateBooleanPreference:function(a,b){this.save({preferenceValue:a?"true":"false"},b)}})});
ns("la.collections.commons",function(b){b.USER_PREFERENCE=1;b.BUSINESS_PREFERENCE=2;b.USER_BUSINESS_PREFERENCE=3;b.GLOBAL=4;b.DEFAULT_PREFERENCE_VALUES={"dataTable-rowsPerPage":"50","invoices-invoiceGstInclusive":"true","invoices-billGstInclusive":"true","invoices-quoteGstInclusive":"true","sale-emailInvoiceBccUser":"true","generalLedgerReport-accountsSelected":"all","quote-expirationTerms":"30","dataTable-invoiceListStatus":"OPEN","dataTable-billListStatus":"OPEN","dataTable-quoteListStatus":"OPEN"};
b.PREFERENCE_TYPES={dataTable:b.USER_PREFERENCE,banking:b.BUSINESS_PREFERENCE,bankfeeds:b.BUSINESS_PREFERENCE,"banking-filter":b.USER_BUSINESS_PREFERENCE,"banking-sort":b.USER_BUSINESS_PREFERENCE,invoices:b.BUSINESS_PREFERENCE,sale:b.BUSINESS_PREFERENCE,generalLedgerReport:b.USER_BUSINESS_PREFERENCE,reportPreference:b.USER_BUSINESS_PREFERENCE,feedback:b.BUSINESS_PREFERENCE,paymentSummary:b.BUSINESS_PREFERENCE,task:b.BUSINESS_PREFERENCE,quote:b.BUSINESS_PREFERENCE,iridize:b.USER_PREFERENCE,salesTarget:b.BUSINESS_PREFERENCE,
message:b.USER_PREFERENCE,gettingStarted:b.USER_PREFERENCE,newOnBoarding:b.BUSINESS_PREFERENCE,global:b.GLOBAL,coa_service:b.BUSINESS_PREFERENCE,subscription:b.BUSINESS_PREFERENCE};b.Preferences=la.collections.Collection.extend({model:la.models.commons.Preference,_findOrCreatePreference:function(a,b,c,d){return this._findPreference(a,b,c,d)||this._createPreference(a,b,c,d)},_findPreference:function(a,e,c,d){return this.find(function(f){return f.get("preferenceType")===a&&f.get("preferenceId")===e&&
(b.PREFERENCE_TYPES[a]===b.USER_PREFERENCE&&f.get("userId")===d||b.PREFERENCE_TYPES[a]===b.BUSINESS_PREFERENCE&&f.get("businessId")===c||b.PREFERENCE_TYPES[a]===b.USER_BUSINESS_PREFERENCE&&f.get("userId")===d&&f.get("businessId")===c||b.PREFERENCE_TYPES[a]===b.GLOBAL)})},_createPreference:function(a,e,c,d){e=new la.models.commons.Preference({preferenceType:a,preferenceId:e,preferenceValue:b.DEFAULT_PREFERENCE_VALUES[a+"-"+e]});b.PREFERENCE_TYPES[a]!==b.USER_PREFERENCE&&b.PREFERENCE_TYPES[a]!==b.USER_BUSINESS_PREFERENCE||
e.set("userId",d);b.PREFERENCE_TYPES[a]!==b.BUSINESS_PREFERENCE&&b.PREFERENCE_TYPES[a]!==b.USER_BUSINESS_PREFERENCE||e.set("businessId",c);this.add(e);return e}})});
ns("la.models.commons",function(b){b.BusinessSettings=la.models.Singleton.extend({relations:[{type:Backbone.Many,key:"preferences",relatedModel:"la.models.commons.Preference",collectionType:"la.collections.commons.Preferences"}],defaults:{preferences:[],financialYearStartMonth:7},getBusinessSettings:function(){return this},url:function(){return UrlUtils.apiUrl(this.get("businessId"),"/settings")},findOrCreatePreference:function(a,b){return this.get("preferences")._findOrCreatePreference(a,b,this.get("businessId"),
this.get("userId"))},findPreference:function(a,b){return this.get("preferences")._findPreference(a,b,this.get("businessId"),this.get("userId"))},hasEntitlement:function(a){var b=this.get("entitlements");return b?_.contains(b,a):!1},hasAnyEntitlement:function(a){var b=this.get("entitlements");return 0<_.intersection(b,a).length},isRegisteredForGst:function(){return!0===this.get("registeredForGst")},isReportable:function(){return!0===this.get("businessReportable")},setSelectedBusiness:function(a){$.ajax({url:UrlUtils.webUrl(a,
"/select"),type:"POST",async:!1})},updateBusinessSettings:function(a,b){if(b||this.getBusinessId()!==parseInt(a,10))this.set({businessId:a}),this.fetch()},getBusinessId:function(){return this.get("businessId")},getFinancialYear:function(){return this.get("financialYear")},getFinancialYearStartMonth:function(){return this.get("financialYearStartMonth")},getFinancialYearEndMonth:function(){var a=this.getFinancialYearStartMonth()-1;return 0===a?12:a},getServerDate:function(){var a=moment();return this.get("serverDate")?
moment(this.get("serverDate"),"YYYY-MM-DD")||a:a},getPreference:function(a,b){return this.findOrCreatePreference(a,b).get("preferenceValue")},getPreferenceWithDefault:function(a,b,c){a=this.getPreference(a,b);return _.isUndefined(a)?c:a},getPreferenceAsBoolean:function(a,b,c){c=c||!1;return this.findOrCreatePreference(a,b).getBooleanPreferenceValue({defaultValue:c})},setPreference:function(a,b,c,d){"boolean"===typeof c&&(c=c?"true":"false");this.findOrCreatePreference(a,b).updatePreference(c,d)},
getDateCreated:function(){return this.get("createdDate")},isPartner:function(){return this.get("viewedByProfessionalPartner")}})});ns("la.models.commons",function(b){b.CurrentUserDetails=la.models.Singleton.extend({ssoLinked:function(){return!_(this.get("ssoId")).isBlank()},url:function(){return UrlUtils.anonymousApiUrl("/users/current")}})});
ns("la.views.mixins",function(b){b.AmountPercentage={_getRemainderAmount:function(){var a=0,b=0,c=this,d=this.collection.filter(function(a){return a.get("percentage")});_(d).each(function(d){d.get("percentage")&&(a+=Number(d.get("percentage")));d!==c.model&&(b+=Number(d.get("amount")))});if(100===a)return this.bankTransaction.getAmount()-b},_getAmount:function(){if(void 0!==this.model.get("percentage")){var a=this._getRemainderAmount()?this._getRemainderAmount():this.model.get("percentage")/100*this.bankTransaction.getAmount();
return MO.round(a,2)}},_updateAmount:function(){this.model.set("amount",this._getAmount())},_getPercentage:function(){return void 0===this.model.get("amount")?void 0:MO.round(this.model.get("amount")/this.bankTransaction.getAmount()*100,2)},_updatePercentage:function(){this.model.set("percentage",this._getPercentage())},_updatePercentageSilently:function(){this.model.set("percentage",this._getPercentage(),{silent:!0})}}});
ns("la.views.mixins",function(b){b.BankTransactionEvents={initialize:function(){la.NotificationServiceClient&&la.NotificationServiceClient.registerForEvents({callback:this._onNotificationServiceEvent.bind(this),eventContext:"BANK_TRANSACTIONS"})},_onNotificationServiceEvent:function(a){var b=function(){this._unsetBankTransactionAsPendingAction(a.bankTransactionId)}.bind(this);"EVENT"!==a.type||"LINK"!==a.action&&"UNLINK"!==a.action||this._refreshBankTransactions({bankTransactionIds:[a.bankTransactionId],
onSuccess:function(){b();Backbone.trigger("banking:unselectBankTransactions",{bankTransactionIds:[a.bankTransactionId]})},onError:function(){b()}});"ERROR"!==a.type||"LINK"!==a.action&&"UNLINK"!==a.action||b()},_unsetBankTransactionAsPendingAction:function(a){var b=_(this.collection.models).find(function(c){return c.id===a});b&&b.set("pendingAction",!1)}}});
ns("la.views.mixins",function(b){b.BankTransactionSortWarning={initializeSortWarning:function(a){},_shouldShowAllocateOrMatchSortWarningClass:function(){var a=la.BusinessSettings.findPreference("banking-sort","sortBy"),a=a?a.get("preferenceValue")||"date":"date",b=UrlUtils.getQueryParamValue("processed");return"allocatedAccount"===a&&(void 0===b||"LINKED"===b)},removeSortWarningCheck:function(a){this._setModelValueIfNotBlank("sortBy","date");this.updateSortModel("date");this._updateSortIcon();this.sortColumn({sortBy:this._getCurrentSortBy(),
sortDirection:this._getCurrentSortDirection()});this.$("#processed").prop("disabled",!1);this.$("input#q").prop("disabled",!1);this.$(".allocateOrMatchSortWarning").toggleClass("hidden",!0)},updateSortWarningCheck:function(){var a=this.model.get("sortBy");"allocatedAccount"===a?(this.$("#processed").prop("disabled","disabled"),this.$("input#q").prop("disabled","disabled"),this.$(".allocateOrMatchSortWarning").toggleClass("hidden",!1)):"allocatedAccount"!==a&&(this.$("#processed").prop("disabled",
!1),this.$("input#q").prop("disabled",!1),this.$(".allocateOrMatchSortWarning").toggleClass("hidden",!0))}}});ns("la.views.mixins",function(b){b.BankingPanelUnsavedChangeMessage={initialize:function(){this.listenTo(this.collection,"change",this._handleUnsavedChanges);this.listenTo(this.model,"change:amountPercent",this._handleUnsavedChanges);this.listenTo(this.model,"change:amountType",this._handleUnsavedChanges);this.listenTo(this.model,"change:description",this._handleUnsavedChanges)},_handleUnsavedChanges:function(){this.$("#unsavedWarning").removeClass("hidden")}}});
ns("la.views.mixins",function(b){b.BrowserChecker={_checkBrowser:function(){(new BrowserDetector(bowser)).isSupportedBrowser||this.model.set("browserError",!0)}}});ns("la.views.mixins",function(b){b.CollectionValidatable={initialize:function(){this._addCollectionListeners()},_addCollectionListeners:function(){this.listenTo(this.collection,"change",this._validateModel);this._validateModel()},_validateModel:function(){this.model.validate()}}});
ns("la.views.mixins",function(b){b.ColumnSortable={initialize:function(){_.bindAll(this);this.listenTo(this.collection,"sync",this._updateSortIcon)},render:function(){return this},updateSort:function(a){this.updateSortModel(this._getSelectedSortColumn(a));this._updateSortIcon();this.sortColumn({sortBy:this._getCurrentSortBy(),sortDirection:this._getCurrentSortDirection()})},updateSortModel:function(a){this._isSortByChanged(a)?(this.model.set("sortBy",a),this.model.set("sortDirection","desc")):(a=
this._getToggledSortDirection(),this.model.set("sortDirection",a))},_showSpinner:function(){this.$(this.spinnerSelector).show()},_beforeSort:function(){this._showSpinner()},sortColumn:function(a){this._beforeSort(a);var b=this.collection.performSort(a.sortBy,a.sortDirection);$.when(b).done($.proxy(function(){this._afterSort(a)},this))},_afterSort:function(){this._hideSpinner()},_hideSpinner:function(){this.$(this.spinnerSelector).hide()},_getSelectedSortColumn:function(a){return $(a.currentTarget).attr("data-sort-field")},
_getToggledSortDirection:function(){var a=this._getCurrentSortDirection();return _.isUndefined(a)?"desc":"desc"===a?"asc":"desc"},_isSortByChanged:function(a){var b=this._getCurrentSortBy();return _.isUndefined(b)||b!==a},_updateSortIcon:function(){this._clearSortClasses();this._getCurrentSortColumnHeader().addClass(this._getCurrentSortCssClass())},_clearSortClasses:function(){this.$("th[data-sort-field]").removeClass("sort-desc sort-asc")},_getCurrentSortColumnHeader:function(){return this.$("th[data-sort-field='"+
this._getCurrentSortBy()+"']")},_getCurrentSortDirection:function(){return this.model.get("sortDirection")},_getCurrentSortBy:function(){return this.model.get("sortBy")},_getCurrentSortCssClass:function(){return"asc"===this._getCurrentSortDirection()?"sort-asc":"sort-desc"}}});
ns("la.views.mixins",function(b){b.DateRangeFilterView={events:{"blur #from,#to":"delayedFilter"},delayedFilter:function(a){_.delay(this.filterIfEitherDateChanged.bind(this),500)},filterIfEitherDateChanged:function(a){if(this.model.get("lastFrom")!==this.model.get("from")||this.model.get("lastTo")!==this.model.get("to"))this.model.set({lastFrom:this.model.get("from"),lastTo:this.model.get("to")}),this.filter()}}});
ns("la.views.mixins",function(b){b.DeletableLine={events:{"click .delete":"deleteModel"},initialize:function(){this.options=_({}).extend(this.options,{showDeleteButton:this._showDeleteButton()});this.listenTo(this.collection,"add",this.updateDeleteButton.bind(this))},updateDeleteButton:function(){this._showDeleteButton()?this.$(".delete").removeClass("hidden"):this.$(".delete").addClass("hidden")},_showDeleteButton:function(){return 1<this.collection.size()&&this.collection.indexOf(this.model)<this.collection.size()-
1},deleteModel:function(){1<this.collection.size()&&this.collection.remove(this.model)}}});
ns("la.views.mixins",function(b){b.DropzoneUIState={dropzoneUIState:{currentState:null,browserEnter:function(){this.getCurrentDropzoneUIState().browserEnter()},browserExit:function(){this.getCurrentDropzoneUIState().browserExit()},dropped:function(){this.getCurrentDropzoneUIState().dropped()},uploadComplete:function(){this.getCurrentDropzoneUIState().uploadComplete()},toString:function(){}},getCurrentDropzoneUIState:function(){return _.bind(this.dropzoneUIState.currentState,this)()},dropzoneUIStateEmpty:function(){var a=
this;return{browserEnter:function(){a.showDropzone()},browserExit:function(){window.dropZoneTimeout=null;a.hideDropzone()},dropped:function(){clearTimeout(window.dropZoneTimeout);window.dropZoneTimeout=null},uploadComplete:function(){},toString:function(){return"EMPTY"}}},dropzoneUIStateProcessing:function(){var a=this;return{browserEnter:function(){},browserExit:function(){window.dropZoneTimeout=null},dropped:function(){},uploadComplete:function(){a.dropzoneUIState.currentState=a.dropzoneUIStateEmpty},
toString:function(){return"PROCESSING"}}}}});ns("la.views.mixins",function(b){b.Focusable={onDomReady:function(){_.isUndefined(this.focusElementId)||this.$("#"+this.focusElementId).focus()}}});
ns("la.views.mixins",function(b){b.GstWithAccount={events:{'blur input[name="tax"]':"blurFromTax"},initialize:function(){this.model=this.model||new Backbone.Model;this.listenTo(this.model,"change:accountId",this.accountIdChanged);this.listenTo(this.model,"change:amount",this.setTaxAmount.bind(this));this.listenTo(this.model,"change:taxCode",this.setTaxAmount.bind(this))},accountIdChanged:function(a,b){if(!_.isBlank(b)&&la.BusinessSettings.isRegisteredForGst()){var c=this.accounts.get(b);c&&(c=this._convertTaxCode(c.get("gstCode")),
this.model.set("taxCode",c))}},_convertTaxCode:function(a){return la.collections.commons.GstTypes.getByCode(a,this.bankTransactionDate).get("gstCode")},blurFromTax:function(){_.isBlank(this.model.get("tax"))&&this.setTaxAmount()},setTaxAmount:function(){la.BusinessSettings.isRegisteredForGst()&&this.model.set("tax",this.model.getCalculatedTax(),{validate:!0})}}});
ns("la.views.mixins",function(b){b.InvoiceEntitlement={initialize:function(a){this.invoiceEntitlementUsage=new la.models.invoices.InvoiceEntitlementUsage({businessId:this.businessId,type:this.invoiceEntitlementType})},retrieveEntitlementUsage:function(a){this.invoiceEntitlementUsage.fetch({success:function(){a()}.bind(this)})},checkEntitlementLimits:function(a){this.retrieveEntitlementUsage(this.defaultCallbackAfterRetrieve.bind(this,a))},defaultCallbackAfterRetrieve:function(a){this.invoiceEntitlementUsage.reachLimits()?
this.showEntitlementDialog():a&&a()},showEntitlementDialog:function(){(new la.views.invoices.EntitlementDialogView({model:this.invoiceEntitlementUsage})).show()}}});
ns("la.views.mixins",function(b){b.LinesAddEmpty={initialize:function(){this.lines=this.model.get("lines");this.listenTo(this.lines,"change",this.addEmptyLine);this.listenTo(this.lines,"change:description",this.addEmptyLine)},addEmptyLine:function(){this._hasNoEmptyLines()&&this.addRow()},addRow:function(){this.$(".list").append(this.buildEmptyLine())},_hasNoEmptyLines:function(){return this.lines.every(function(a){return!a.isEmpty()})}}});
ns("la.views.mixins",function(b){b.List={initialize:function(){_.bindAll(this);this.listenTo(this.collection,"sortOrFilter",this.renderRows)},onDomReady:function(){this.toggleLoading(!0);var a={success:this.onFetchSuccess,reset:!0,complete:this.onFetchComplete};this.extraListFetchOptions&&(a=_.extend(a,this.extraListFetchOptions()));this.collection.fetch(a)},onFetchComplete:function(){this.toggleLoading(!1)},onFetchSuccess:function(){this.collection.resort()},toggleLoading:function(a){this.hideSpinner||
(a?this.$el.append('<div class="loadingSpinner"></div>'):this.$("> .loadingSpinner").remove(),this._toggleDisableButtons(a))},_toggleDisableButtons:function(a){$("button").prop("disabled",a)}}});
ns("la.views.mixins",function(b){b.ListableWithoutRemove={className:"list",initialize:function(a){this.options=a;this.rowViews=[]},renderRows:function(){0===this.collection.length?this.renderNoRows():this.appendRows();if(this.onRowsRendered)this.onRowsRendered();return this},appendRows:function(){this.removeRows();this.collection.each(function(a){this.rowViews.push(this.createRowView(a))}.bind(this));var a=[];_(this.rowViews).each(function(b){a.push(b.render().$el)});this.$el.html(a)},createRowView:function(a){return createObject(this.rowView,
_.extend(this.options,{businessId:this.businessId,model:a,collection:this.collection,container:this}))},renderNoRows:function(){this.$el.html(this.noItemsMessage)},remove:function(){this.removeRows()},removeRows:function(){_(this.rowViews).each(function(a){a.remove()});this.rowViews=[]}};b.Listable=_.extend({},b.ListableWithoutRemove,{className:"list",initialize:function(a){this.options=a;this.listenTo(this.collection,"remove",this.renderRows.bind(this));this.rowViews=[]},render:function(){this.renderRows()}})});
ns("la.views.mixins",function(b){b.Logoutable={events:{"click #logoutLink":"logout"},logout:function(){$.ajax({url:UrlUtils.anonymousApiUrl(la.API_URL_LOGOUT),success:function(){la.AuthenticationContext?la.AuthenticationContext.logOut():UrlUtils.redirect(UrlUtils.url(la.URL_LOGOUT))}});sessionStore.clear();return!1}}});
ns("la.views.mixins",function(b){b.MetricEnabledColumnSortable=_.extend(la.views.mixins.ColumnSortable,{_beforeSort:function(a){this._showSpinner();a.startTime=this._now()},_shouldTrackSorting:function(a){return a&&a.startTime&&window.analytics},_afterSort:function(a){this._hideSpinner();this._shouldTrackSorting(a)&&(a={executionTime:this._now()-a.startTime,sortBy:a.sortBy,sortDirection:a.sortDirection,bankAccountId:this.model.get("accountId"),from:this.model.get("from"),to:this.model.get("to"),text:this.model.get("q")},
window.analytics.track("bank-transaction-sort",a))},_now:function(){return(new Date).getTime()}})});
ns("la.views.mixins",function(b){b.OnboardBanner={initializeBanner:function(a){this.addSubview(new la.views.home.SubscribeAlertView(a),"#subscribe-alert-container");this.addSubview(new la.views.home.UpdatePaymentDetailsAlertView(a),"#update-payment-details-alert-container");var b=la.BusinessSettings.findOrCreatePreference("newOnBoarding","dismissed").getBooleanPreferenceValue();la.BusinessSettings.isPartner()?b||this._checkOnBoarding():la.BusinessSettings.hasAnyEntitlement(["INVOICES","PURCHASES"])&&
this.addSubview(new la.views.home.GettingStartedView(a),"#getting-started-container")},_checkOnBoarding:function(){var a=new la.models.home.OnBoardingInfo({businessId:this.businessId});a.fetch({success:function(b){b=this.addSubview(new la.views.home.GettingStartedSetupView({model:a,businessId:this.businessId}),"#getting-started-container");this.renderSubviews(b)}.bind(this)})}}});
ns("la.views.mixins",function(b){b.OnlineInvoiceBanner={showOnlineInvoicingBanner:function(){var a=la.BusinessSettings.getPreferenceAsBoolean("invoices","onlineInvoicing"),b=la.BusinessSettings.getPreference("invoices","dismissOnlineInvoicing"),c=la.BusinessSettings.getPreference("global","onlineInvoicingOptInCutOffDate"),c=moment(c,"MMM DD YYYY hh:mmA").isAfter(moment(la.BusinessSettings.getDateCreated(),"YYYY-MM-DD hh:mm:ss"));return!a&&void 0===b&&c}}});
ns("la.views.mixins",function(b){b.Pageable={triggerPointFromBottom:500,initialize:function(){_.bindAll(this);this.loadingRecords=!1;$(document).on("scroll",this.attemptToLoadMoreRecords)},render:function(){this.$(this.spinnerSelector).hide();return this},attemptToLoadMoreRecords:function(a){this.shouldTriggerLoading()&&(this.loadingRecords=!0,this.$(this.spinnerSelector).show(),_.delay(this.loadMore,40))},loadMore:function(){var a=this;$.when(this.collection.loadNextPage()).then(function(){a.$(a.spinnerSelector).hide();
a.loadingRecords=!1},function(){a.loadingRecords=!1})},shouldTriggerLoading:function(){return this._isPageVisible()&&!this.loadingRecords&&0<this.collection.length&&this.collection.hasNextPage()&&this._isTriggerPointReached()},_isPageVisible:function(){return this.$el.is(":visible")},_isTriggerPointReached:function(){return $(window).scrollTop()+this.triggerPointFromBottom>$(document).height()-$(window).height()}}});
ns("la.views.mixins",function(b){b.ResettingView={beforeShown:function(){this.initialAttributes?(this.model.clear(),this.model.set(this.initialAttributes,{silent:!0})):this.initialAttributes=_(this.model.attributes).clone()}}});
ns("la.views.mixins",function(b){b.Searchable={initialize:function(){this.model=this.model||new Backbone.Model;this.listenTo(this.model,"change:search",this.search)},search:function(){this.collection.setFieldFilter(this._getFilters())},_getFilters:function(){var a=[],b=this.model.get("search");_.isBlank(b)||a.push({field:"searchableField",type:"function",value:function(a){return _.str.contains(a.toLowerCase(),b.toLowerCase())}});return a}}});
ns("la.views.mixins",function(b){b.Slidable={events:{"click #cancelButton":"hide"},show:function(){this.shown=!0;this.beforeShown&&this.beforeShown();this.render();var a=this._element();a.attr("style","display: none");this.container.after(this.$el);a.slideDown({duration:220,complete:function(){this.afterShown&&this.afterShown();a.css("overflow","visible")}.bind(this)});this.trigger("slidable:show")},hide:function(){this.shown=!1;this._element().slideUp({duration:220,complete:function(){this.$el.remove();
this.afterHide&&this.afterHide()}.bind(this)});this.trigger("slidable:hide")},_element:function(){var a=this.$el,b=this.$el.find(".slidable");1===b.length&&(a=b);return a},toggle:function(){this.shown?this.hide():this.show()},isVisible:function(){return this.shown}}});
ns("la.views.mixins",function(b){b.TabbedView={events:{"click .tab.clickable":"_showTab"},_showTab:function(a){a=$(a.target).closest("a");this._selectTab(a)},selectTabByClass:function(a){this._selectTab(this.$el.find("a."+a))},_selectTab:function(a){var b=a.data("panel"),c=a.data("focus-element-id"),d=this.$(".expandedPane:not(.hidden)"),b=this.$("#"+b),f=this.$("li.active");a=a.parent();f.removeClass("active");a.addClass("active");d.addClass("hidden");b.removeClass("hidden");(d=this.findSubviewInSelector("#"+
b.attr("id")))&&d.showTab&&d.showTab();c&&b.find(c).focus()}}});
ns("la.views.mixins",function(b){b.TableContainerView={events:{"click #selectAll":"toggleSelectAll"},initialize:function(a){this.options=a;var b=_({}).extend(a),b=_(b).extend({collection:this.collection,businessId:this.businessId,container:this});this.tableView=createObject(this.tableViewName,b);this.paginated="undefined"!==typeof this.collection.setFilterAndSort;this.model=a?a.model:void 0;this.listenTo(this.collection,"sync",this._renderRows);this.addSubview(this.tableView,"#table");Backbone.Events.on("clean:tableBody",
this._cleanTBody.bind(this))},onDomReady:function(){this.disableForm();this.newPagination?this.collection.fetchFirstPage({error:this._failGracefully.bind(this),silent:this.paginated,reset:!0}):this.collection.fetch({error:this._failGracefully.bind(this),silent:this.paginated,reset:!0})},_renderRows:function(){this.paginated?(this.paginatorView=new PaginatorView({collection:this.collection,container:this}),this.addSubview(this.paginatorView,"#pagination"),this.renderSubviews(this.paginatorView)):this.newPagination?
this.tableView.appendRows():this.tableView.renderRows();this.enableForm()},_cleanTBody:function(){this.$("tbody").html("")},_failGracefully:function(){this.enableForm();this.$("tbody td").text("Oops, something\u2019s not quite right. Please try again shortly.")},toggleSelectAll:function(){var a=this.$("#selectAll").is(":checked");this.collection.each(function(b){b.set("selected",a)})},_showSpinner:function(a,b){this.$(".loadingSpinner").toggle(a);this.$(b).toggle(!a)},showSpinner:function(a){this._showSpinner(a,
"#page")},showSpinnerInsteadOfTable:function(a){this.$(".mediumLoadingSpinner").toggle(a);this.$("#table").toggle(!a)}}});
ns("la.views.mixins",function(b){b.Transitionable={events:{"click .trigger-new":"newTransitionOccurred","click .trigger-attach":"attachTransitionOccurred"},newTransitionOccurred:function(a){var b=$("#thumbnails .selected .thumb").attr("data-documentId");UrlUtils.navigateToRoute(this.businessId,"/documents/"+b+"/bills/new");this.transitionOccurred(a)},attachTransitionOccurred:function(a){var b=$("#thumbnails .selected .thumb").attr("data-documentId");UrlUtils.navigateToRoute(this.businessId,"/documents/"+
b+"/bills");this.transitionOccurred(a)},transitionOccurred:function(a){var b=+$(a.target).attr("data-index");a=$(a.target).attr("data-action");Backbone.trigger("billflow:accordionTransitionOccurred",b,a)}}});
ns("la.views.mixins",function(b){b.UnrealisedTransactionLineAddEmpty={events:{"focus input":"showInsertRowAction","focus textarea":"showInsertRowAction","blur input":"hideInsertRowAction","blur textarea":"hideInsertRowAction","click .insert-row":"insertEmptyRowBeforeCurrentRow","mouseup .insert-row":"insertRowClickFinished","mousedown .insert-row":"insertRowClickStarted",mouseleave:"onMouseLeave"},showInsertRowAction:function(){this.$el.addClass("in-row")},hideInsertRowAction:function(){this.$el.hasClass("insert-row-click-in-progress")||
this.$el.removeClass("in-row")},insertRowClickStarted:function(a){1===a.which&&this.$el.addClass("insert-row-click-in-progress")},insertRowClickFinished:function(){this.$el.removeClass("insert-row-click-in-progress")},insertEmptyRowBeforeCurrentRow:function(){this.collection.add(new la.models.invoices.UnrealisedTransactionLine,{at:this.collection.indexOf(this.model)});this.$el.removeClass("in-row")},onMouseLeave:function(){this.$el.hasClass("insert-row-click-in-progress")&&this.$el.removeClass("insert-row-click-in-progress in-row")}}});
ns("la.views.mixins",function(b){b.UnrealisedTransactionLineItems={initialize:function(){this._updateItems();this.listenTo(this.allItems,"change",this._updateItems)},_updateItems:function(){this.items=this.allItems.itemsByType(this.model.get("saleOrPurchase"),{whitelist:this.getAllInvoiceLineItemIds()}).sortedByNumber()},getAllInvoiceLineItemIds:function(){return this._getAllUniqueLineItemByElement("itemId")},getAllInvoiceLineAccountIds:function(){return this._getAllUniqueLineItemByElement("accountId")},
_getAllUniqueLineItemByElement:function(a){var b=this.model.get("lines"),b=_(b.models).map(function(c){return c.get(a)});return _(b).unique()}}});
ns("la.views.mixins",function(b){b.UnrealisedTransactionLines={initialize:function(){this.lines=this.model.get("lines");this.listenTo(this.lines,"add",this.renderLine);this.listenTo(this.lines,"remove",this.removeLine);this.listenTo(this.lines,"remove",this.addEmptyLine);this.listenTo(this.lines,"reorder",this.rerenderLines);this.listenTo(this.lines,"remove",this.updateTotalDetailsAfterChange);this.listenTo(this.lines,"remove",this.validateLines);this.listenTo(this.lines,"change",this.addEmptyLine);
this.listenTo(this.lines,"change",this.updateTotalDetailsAfterChange);this.listenTo(this.lines,"change",this.validateLines);this.listenTo(this.model,"change:gstInclusive",this.gstInclusiveChanged);this.listenTo(this.model,"change:gstInclusive",this.updateGstInclusivePreference);for(this.listenTo(this.model,"change:gstInclusive",this._trackTaxInclusiveChanged);4>=this.lines.size();)this.lines.add(new la.models.invoices.UnrealisedTransactionLine({layoutType:this.model.get("layoutType")}),{silent:!0});
this._hasNoEmptyLines()&&this.lines.add(new la.models.invoices.UnrealisedTransactionLine({layoutType:this.model.get("layoutType")}),{silent:!0})},gstInclusiveChanged:function(){_.each(this.$('div[data-name="unitPrice"]').parent("td"),function(a){a=$(a);var b=a.css("backgroundColor");a.animate({backgroundColor:"rgb(200,255,200)"},600).animate({backgroundColor:b},600)});this.updateTotalDetailsAfterChange()},_trackTaxInclusiveChanged:function(){this.model.isNew()?$.trackEvent("invoices","changeGstInclusive",
"new"):$.trackEvent("invoices","changeGstInclusive","existing")},updateGstInclusivePreference:function(a,b){la.BusinessSettings.setPreference("invoices",this.model.get("type")+"GstInclusive",b)},validateLines:function(){this.model.validate({lines:this.lines})},renderLines:function(){this.lines.each(this.renderLine,this)},rerenderLines:function(){this.$("#invoiceLines").empty();this._hasNoEmptyLines()&&this.lines.add(new la.models.invoices.UnrealisedTransactionLine,{silent:!0});this.renderLines()},
addEmptyLine:function(){this._hasNoEmptyLines()&&this.lines.add(new la.models.invoices.UnrealisedTransactionLine)},removeLine:function(a){this.$("#"+a.cid).remove()},renderLine:function(a){var b=this.lines.indexOf(a);a=this._buildLine(a);0===b?this.$("#invoiceLines").prepend(a):this.$("#invoiceLines > *:nth-child("+b+")").after(a)},_hasNoEmptyLines:function(){return this.lines.every(function(a){return!a.isEmpty()})},_buildLine:function(a){a=new la.views.invoices.UnrealisedTransactionLineView({model:a,
collection:this.lines,accounts:this.accounts,items:this.items,allItems:this.allItems,invoice:this.model,businessId:this.businessId,container:this});a.render();return a.el},updateTotalDetailsAfterChange:function(a,b,c){this._changeNotAffectingTotal(a,b,c)||this.updateTotalDetails(this.model.getTotal(),this.model.getGst(),this.model.getSubtotal())},updateTotalDetailsInitialLoad:function(){var a=this.model.get("gstInclusive")?this.model.get("total"):this.model.get("total")-this.model.get("gst");this.updateTotalDetails(this.model.get("total"),
this.model.get("gst"),a)},updateTotalDetails:function(a,b,c){this.model.set("total",a);var d=this.model.has("amountPaid")?this.model.get("amountPaid"):0;this.$("#subtotal").text($.money.format(c,2));this.$("#gst").text($.money.format(b,2));this.$("#total").text($.money.format(a,2));this.$("#amountPaid").text($.money.format(d,2));this.$("#amountDue").text($.money.format(a-d,2))},_changeNotAffectingTotal:function(a,b){var c;a&&a.changedAttributes()&&(c=a.changedAttributes());return _(c).isUndefined()||
c.hasOwnProperty("total")||c.hasOwnProperty("qty")||c.hasOwnProperty("unitPrice")||c.hasOwnProperty("taxCode")||b instanceof Backbone.Collection?!1:!0}}});
ns("la.views.mixins",function(b){b.UnrealisedTransactionLinesDragAndDrop={render:function(){this._configureDragAndDrop();return this},_configureDragAndDrop:function(){Sortable.create(this.$("#invoiceLines")[0],{animation:0,handle:".move-row",ghostClass:"dragged-item",onEnd:this._onDragAndDropEnd.bind(this)})},_onDragAndDropEnd:function(a){if(a.oldIndex!==a.newIndex){var b=this.lines.at(a.oldIndex);this.lines.remove(b,{silent:!0});this.lines.add(b,{at:a.newIndex,silent:!0});this.lines.trigger("reorder")}}}});
ns("la.views.mixins",function(b){b.Validatable={validationEvents:{"blur input, select, textarea":"blur"},initialize:function(){this.events=this._mergeEvents(this.validationEvents,this.events);this.delegateEvents(this.events);this.listenTo(this.model,"validated",this.validated);Backbone.Validation.bind(this)},validated:function(){this.toggleButtons();if(this.getAllAncestorViews)for(var a=this.getAllAncestorViews(),b=0;b<a.length;b++)a[b].toggleButtons&&a[b].toggleButtons()},toggleButtons:function(){var a=
this.$("button.action:not(.formDisabled)");0<a.length&&a.prop("disabled",!this.model.isValid())},blur:function(a){_.delay(function(){this._blur(a)}.bind(this),300)},_blur:function(a){a=$(a.target);if(!this.isSubview(a)){var b=this.preValidate(a);a.parents(".form-control-wrapper").first().toggleClass("focused",!_(b).isEmpty())}},preValidate:function(a){var b=a.attr("name"),c="",c="SELECT"===a.prop("tagName")?a.val():"text"===a.attr("type")||a.is("textarea")?a.val():a.text();return this.model.preValidate(b,
c)}}});
ns("la.views",function(b){b.BaseIFrameView=la.views.BaseView.extend({initialize:function(a,b){this._super(b);this.model=new Backbone.Model},onDomReady:function(){this._super();this.$(".loadingSpinner").show();this._getIFrame().load(function(){this.$(".loadingSpinner").hide();this._updateFrameHeight();this._overrideFrameOuterWrapperMinHeight()}.bind(this));var a=setInterval(function(){this._updateFrameHeight();this._checkForOverlay()}.bind(this),100);$("body").data("iframe-active-set-interval",a)},
_setUrl:function(a){this.model.set("url",a)},_setId:function(a){this.model.set("id",a)},_updateFrameHeight:function(){this._getIFrame().height(this._findInIFrame("#outer-wrapper").height())},_overrideFrameOuterWrapperMinHeight:function(){this._findInIFrame("#outer-wrapper").css("min-height",this._getIFrame().css("min-height"))},_checkForOverlay:function(){this._isVisibleInIFrame("body > .default_alertWindow")?this._showFrameOverlayWithClass("frame-overlay-alert"):this._isVisibleInIFrame("body > .popupTrans2")?
this._showFrameOverlayWithClass("frame-overlay-popup"):this._isVisibleInIFrame("body > .ext-el-mask, #outer-wrapper > .ext-el-mask")?this._showFrameOverlayWithClass("frame-overlay-extjs"):this._isVisibleInIFrame("body > .ui-widget-overlay")?this._showFrameOverlayWithClass("frame-overlay-jquery"):this._isVisibleInIFrame("body > .mask")?this._showFrameOverlayWithClass("frame-overlay-yui"):this._isVisibleInIFrame(".intermediary-modal")?this._showFrameOverlayWithClass("frame-overlay-yui"):this._hideFrameOverlay()},
_showFrameOverlayWithClass:function(a){this._getFrameOverlay().removeClass(this._overlayClasses(a)).addClass(a).css("min-height",$("#outer-wrapper").height()).show()},_hideFrameOverlay:function(){this._getFrameOverlay().is(":hidden")||this._getFrameOverlay().removeClass(this._overlayClasses()).hide()},_overlayClasses:function(a){return _.without(["frame-overlay-popup","frame-overlay-alert","frame-overlay-extjs","frame-overlay-jquery","frame-overlay-yui"],a).join(" ")},_getFrameOverlay:function(){return this.frameOverlay||
(this.frameOverlay=this.$el.find(".frame-overlay"))},_getIFrame:function(){return this.iFrame||(this.iFrame=this.$el.find(".frame-container iframe"))},_findInIFrame:function(a){return this._getIFrame().contents().find(a)},_isVisibleInIFrame:function(a){return 0!==this._findInIFrame(a).filter(function(){return"none"!==$(this).css("display")&&"visible"===$(this).css("visibility")}).length}})});
ns("la.views",function(b){b.FormView=la.views.BaseView.extend({formViewEvents:{"keyup input":"keyup","keyup textarea":"keyup","keyup select":"keyup",change:"change"},constructor:function(a){this._setOption(a,"focusElementId");la.views.FormView.__super__.constructor.apply(this,arguments);this.events=this._mergeEvents(this.formViewEvents,this.events);return this},keyup:function(a){9===a.keyCode||this.isSubview($(a.target))||this.change(a)},change:function(a){a=$(a.target);var b=a.attr("name");if(!(!_.isBlank(a.data("widget"))||
0<a.parents("[data-widget]").size()||_(b).isBlank()||this.isSubview(a))){var c=b.split("."),b=c.pop(),d=this.model;_(c).each(function(a){d=d.get(a)});c=a.attr("type");a="checkbox"===c?a.is(":checked"):a.hasClass("boolean")?"true"===a.val():"radio"===c?a.filter(":checked").val():a.val()||null;d.set(b,a,{validate:!0})}},setRequired:function(a,b){_(a).isArray()||(a=[a]);_.each(a,function(a){b?this.$('label[for="'+a+'"] span.required').show():this.$('label[for="'+a+'"] span.required').hide()},this)},
setVisible:function(a,b){b?this.$("#"+a).fadeIn():this.$("#"+a).fadeOut()},validateAllViews:function(){var a=this.getSubViews().concat(this),b=[];_(a).each(function(a){a.model&&!_.contains(b,a.model.cid)&&a.model instanceof Backbone.Model&&(a.model.validate(),b.push(a.model.cid))})},onDomReady:function(){this._super();this.validateAllViews();this.setFocus()},setFocus:function(){_.isUndefined(this.focusElementId)||this.$("#"+this.focusElementId).focus()}})});
ns("la.views",function(b){b.ModalDialog={bind401Handler:function(){this.listenTo(la.AJAX_EVENT_TRIGGER,la.AJAX_401_ERROR,this.handler401)},bindOnHidden:function(){var a=this.$el;this.$el.on("hidden",function(){a.remove()})},handleBackButton:function(){this.hide();$("body").removeClass("modal-open")},handler401:function(){this.hide()},show:function(){$(document).on("hidden.bs.modal",".modal",this.hide);$(window).on("hashchange.modal",this.handleBackButton);this.beforeShow();this.$el.modal("show");
this.afterShow()},hide:function(){this.beforeHide();this.$el.modal("hide");$(".modal-backdrop").remove();$(document).off("hidden.bs.modal",".modal",this.hide);$(window).off("hashchange.modal");var a=this;setTimeout(function(){a.afterHide()},500)},beforeShow:function(){},afterShow:function(){},beforeHide:function(){},afterHide:function(){}}});
ns("la.views",function(b){b.DialogView=b.BaseView.extend(b.ModalDialog).extend({className:"modal fade",constructor:function(a){b.DialogView.__super__.constructor.apply(this,arguments);this.bind401Handler();this.bindOnHidden();return this},beforeShow:function(){this.render();$("#pageContents").prepend(this.el)},afterShow:function(){this.onDomReady()}})});
ns("la.views",function(b){b.ValidatedFormView=la.views.FormView.extend({validatedFormViewEvents:{"blur input, select, textarea":"blur"},constructor:function(a){la.views.ValidatedFormView.__super__.constructor.apply(this,arguments);this.events=this._mergeEvents(this.validatedFormViewEvents,this.events);this.delegateEvents(this.events);Backbone.Validation.bind(this);this.listenTo(this.model,"validated",this.validated);return this},validated:function(){this.toggleButtons();for(var a=this.getAllAncestorViews(),
b=0;b<a.length;b++)a[b].toggleButtons&&a[b].toggleButtons()},toggleButtons:function(){this.$("button.action:not(.formDisabled)").prop("disabled",!this.isValid())},isValid:function(){return this.model.isValid()},blur:function(a){_.delay(function(){this._blur(a)}.bind(this),300)},_blur:function(a){a=$(a.target);if(!this.isSubview(a)){var b=this.preValidate(a);a.parents(".form-control-wrapper").first().toggleClass("focused",!_(b).isEmpty())}},preValidate:function(a){var b=a.attr("name"),c="",c="SELECT"===
a.prop("tagName")?a.val():"text"===a.attr("type")||a.is("textarea")?a.val():a.text();return this.model.preValidate(b,c)},validateAndShowAllFormErrors:function(){this.model.validate();this.$(".error-message").parents(".form-control-wrapper").addClass("focused")}})});ns("la.views",function(b){b.ValidatedModalDialog=b.ValidatedFormView.extend({constructor:function(a){b.ValidatedModalDialog.__super__.constructor.apply(this,arguments);this.bind401Handler();this.bindOnHidden();return this}});_(b.ValidatedModalDialog.prototype).extend(b.ModalDialog)});
ns("la.views",function(b){b.ValidatedFormDialogView=b.ValidatedModalDialog.extend({className:"modal fade",templateName:"",attributes:{tabindex:"-1",role:"dialog","data-backdrop":"static","aria-labelledby":"myModalLabel","aria-hidden":"false",style:"display: block;"},_validatedFormDialogViewEvents:{"click #cancelButton":"hide","mousedown #cancelButton":"hide"},constructor:function(a){la.views.ValidatedFormDialogView.__super__.constructor.apply(this,arguments);this.events=this._mergeEvents(this._validatedFormDialogViewEvents,
this.events);this.delegateEvents(this.events);return this},beforeShow:function(){this.render();$("#outer-wrapper").prepend(this.el);this.setFocus()},afterShow:function(){this.onDomReady()},setFocus:function(){var a=this;if(!_.isUndefined(a.focusElementId))a.$el.on("shown.bs.modal",function(){$("#"+a.focusElementId).focus()})}})});
ns("la.views",function(b){b.ListView=la.views.BaseView.extend({constructor:function(a){la.views.ListView.__super__.constructor.apply(this,arguments);this._setOption(a,"focusElementId");return this},onDomReady:function(){this._super();_.isUndefined(this.focusElementId)||this.$("#"+this.focusElementId).focus()}})});
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["widgets/autosize_textarea"]=Handlebars.template(function(b,a,e,c,d){e=e||b.helpers;c=this.escapeExpression;b='<textarea rows="';(d=e.rows)?d=d.call(a,{hash:{}}):(d=a.rows,d="function"===typeof d?d():d);b+=c(d)+'" id="';(d=e.widgetId)?d=d.call(a,{hash:{}}):(d=a.widgetId,d="function"===typeof d?d():d);b+=c(d)+'" name="';(d=e.widgetName)?d=d.call(a,{hash:{}}):(d=a.widgetName,d="function"===typeof d?d():d);b+=
c(d)+'" data-widget="AutosizeTextarea" class="form-control">';(d=e.value)?d=d.call(a,{hash:{}}):(d=a.value,d="function"===typeof d?d():d);return b+=c(d)+"</textarea>\n"});return this.HandlebarsTemplates["widgets/autosize_textarea"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["widgets/checkbox"]=Handlebars.template(function(b,a,e,c,d){function f(a,c){var b,d;b='tabindex="';(d=e.tabindex)?d=d.call(a,{hash:{}}):(d=a.tabindex,d="function"===typeof d?d():d);return b+=k(d)+'"'}function g(a,c){return'disabled="disabled"'}function h(a,c){var b,d;b='\n  <label for="';(d=e.widgetName)?d=d.call(a,{hash:{}}):(d=a.widgetName,d="function"===typeof d?d():d);b+=k(d)+'">';(d=e.label)?d=d.call(a,
{hash:{}}):(d=a.label,d="function"===typeof d?d():d);return b+=k(d)+"</label>\n"}e=e||b.helpers;var l,k=this.escapeExpression,m=e.helperMissing;b='<input type="checkbox" ';c=a.tabindex;if((c=(l=e.unlessBlank)?l.call(a,c,{hash:{},inverse:this.noop,fn:this.program(1,f,d)}):m.call(a,"unlessBlank",c,{hash:{},inverse:this.noop,fn:this.program(1,f,d)}))||0===c)b+=c;b+=' class="';(l=e.cssClass)?c=l.call(a,{hash:{}}):(c=a.cssClass,c="function"===typeof c?c():c);b+=k(c)+'" id="';(l=e.widgetId)?c=l.call(a,
{hash:{}}):(c=a.widgetId,c="function"===typeof c?c():c);b+=k(c)+'" name="';(l=e.widgetName)?c=l.call(a,{hash:{}}):(c=a.widgetName,c="function"===typeof c?c():c);b+=k(c)+'" ';c=a.value;if((c=e["if"].call(a,c,{hash:{},inverse:this.noop,fn:this.program(3,function(a,c){return'checked="checked"'},d)}))||0===c)b+=c;b+=" ";c=a.disabled;if((c=(l=e.unlessBlank)?l.call(a,c,{hash:{},inverse:this.noop,fn:this.program(5,g,d)}):m.call(a,"unlessBlank",c,{hash:{},inverse:this.noop,fn:this.program(5,g,d)}))||0===
c)b+=c;b+="/>\n";c=a.label;if((c=(l=e.ifDefined)?l.call(a,c,{hash:{},inverse:this.noop,fn:this.program(7,h,d)}):m.call(a,"ifDefined",c,{hash:{},inverse:this.noop,fn:this.program(7,h,d)}))||0===c)b+=c;return b+"\n"});return this.HandlebarsTemplates["widgets/checkbox"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["widgets/colour_picker"]=Handlebars.template(function(b,a,e,c,d){e=e||b.helpers;c=this.escapeExpression;b='<div class="input-group color" data-color="';(d=e.value)?d=d.call(a,{hash:{}}):(d=a.value,d="function"===typeof d?d():d);b+=c(d)+'">\n  <input id="';(d=e.widgetId)?d=d.call(a,{hash:{}}):(d=a.widgetId,d="function"===typeof d?d():d);b+=c(d)+'" name="';(d=e.widgetName)?d=d.call(a,{hash:{}}):(d=a.widgetName,
d="function"===typeof d?d():d);b+=c(d)+'" type="text" class="form-control ';(d=e.cssClass)?d=d.call(a,{hash:{}}):(d=a.cssClass,d="function"===typeof d?d():d);b+=c(d)+'" maxlength="7" value="';(d=e.value)?d=d.call(a,{hash:{}}):(d=a.value,d="function"===typeof d?d():d);return b+=c(d)+'" autocomplete="off"/>\n  <span class="input-group-addon" tabindex="0"><i></i></span>\n</div>\n'});return this.HandlebarsTemplates["widgets/colour_picker"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["widgets/date_picker"]=Handlebars.template(function(b,a,e,c,d){e=e||b.helpers;var f=this.escapeExpression,g=e.helperMissing;b='<div class="input-group date">\n  <input type="text" id="';(d=e.widgetId)?c=d.call(a,{hash:{}}):(c=a.widgetId,c="function"===typeof c?c():c);b+=f(c)+'" name="';(d=e.widgetName)?c=d.call(a,{hash:{}}):(c=a.widgetName,c="function"===typeof c?c():c);b+=f(c)+'" value="';c=a.value;c=(d=
e.frontendDateFormat)?d.call(a,c,{hash:{}}):g.call(a,"frontendDateFormat",c,{hash:{}});b+=f(c)+'" class="form-control ';(d=e.cssClass)?c=d.call(a,{hash:{}}):(c=a.cssClass,c="function"===typeof c?c():c);b+=f(c)+'" maxlength="10" autocomplete="off"/>\n  <label for="';(d=e.widgetId)?c=d.call(a,{hash:{}}):(c=a.widgetId,c="function"===typeof c?c():c);return b+=f(c)+'" class="input-group-addon"><i class="glyphicon glyphicon-calendar"></i></label>\n</div>\n'});return this.HandlebarsTemplates["widgets/date_picker"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["widgets/email_input"]=Handlebars.template(function(b,a,e,c,d){e=e||b.helpers;c=this.escapeExpression;b='<div class="email-widget" ondragover="event.preventDefault()" id="';(e=e.widgetId)?a=e.call(a,{hash:{}}):(a=a.widgetId,a="function"===typeof a?a():a);return b+=c(a)+'">\n    <input type="text" class="form-control" id="email" autocomplete="off"/>\n</div>\n'});return this.HandlebarsTemplates["widgets/email_input"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["widgets/password_input"]=Handlebars.template(function(b,a,e,c,d){function f(a,c){var b,d;b='maxlength="';(d=e.maxlength)?d=d.call(a,{hash:{}}):(d=a.maxlength,d="function"===typeof d?d():d);return b+=l(d)+'"'}function g(a,c){var b,d;b='placeholder="';(d=e.placeholder)?d=d.call(a,{hash:{}}):(d=a.placeholder,d="function"===typeof d?d():d);return b+=l(d)+'"'}e=e||b.helpers;var h,l=this.escapeExpression;c=e.helperMissing;
b='<input type="password" class="form-control ';(h=e.cssClass)?h=h.call(a,{hash:{}}):(h=a.cssClass,h="function"===typeof h?h():h);b+=l(h)+'" id="';(h=e.widgetId)?h=h.call(a,{hash:{}}):(h=a.widgetId,h="function"===typeof h?h():h);b+=l(h)+'" name="';(h=e.widgetName)?h=h.call(a,{hash:{}}):(h=a.widgetName,h="function"===typeof h?h():h);b+=l(h)+'" value="';(h=e.value)?h=h.call(a,{hash:{}}):(h=a.value,h="function"===typeof h?h():h);b+=l(h)+'" ';if((h=(h=e.unlessBlank)?h.call(a,"maxlength",{hash:{},inverse:this.noop,
fn:this.program(1,f,d)}):c.call(a,"unlessBlank","maxlength",{hash:{},inverse:this.noop,fn:this.program(1,f,d)}))||0===h)b+=h;if((h=(h=e.unlessBlank)?h.call(a,"placeholder",{hash:{},inverse:this.noop,fn:this.program(3,g,d)}):c.call(a,"unlessBlank","placeholder",{hash:{},inverse:this.noop,fn:this.program(3,g,d)}))||0===h)b+=h;return b+" />\n"});return this.HandlebarsTemplates["widgets/password_input"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["widgets/radio"]=Handlebars.template(function(b,a,e,c,d){function f(a,c){return'checked="checked"'}e=e||b.helpers;var g,h,l=this.escapeExpression,k=e.helperMissing;b='<div class="radio">\n  <label for="';(h=e.widgetId)?c=h.call(a,{hash:{}}):(c=a.widgetId,c="function"===typeof c?c():c);b+=l(c)+'"><input type="radio" class="';(h=e.cssClass)?c=h.call(a,{hash:{}}):(c=a.cssClass,c="function"===typeof c?c():c);
b+=l(c)+'" name="';(h=e.widgetName)?c=h.call(a,{hash:{}}):(c=a.widgetName,c="function"===typeof c?c():c);b+=l(c)+'" value="';(h=e.defaultValue)?c=h.call(a,{hash:{}}):(c=a.defaultValue,c="function"===typeof c?c():c);b+=l(c)+'" id="';(h=e.widgetId)?c=h.call(a,{hash:{}}):(c=a.widgetId,c="function"===typeof c?c():c);b+=l(c)+'" ';c=a.defaultValue;g=a.value;if((c=(h=e.ifEqual)?h.call(a,g,c,{hash:{},inverse:this.noop,fn:this.program(1,f,d)}):k.call(a,"ifEqual",g,c,{hash:{},inverse:this.noop,fn:this.program(1,
f,d)}))||0===c)b+=c;b+=" />";(h=e.label)?c=h.call(a,{hash:{}}):(c=a.label,c="function"===typeof c?c():c);return b+=l(c)+"</label>\n</div>\n"});return this.HandlebarsTemplates["widgets/radio"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["widgets/select"]=Handlebars.template(function(b,a,e,c,d){function f(a,c){var b,d;b='disabled="';(d=e.disabled)?d=d.call(a,{hash:{}}):(d=a.disabled,d="function"===typeof d?d():d);return b+=m(d)+'"'}function g(a,c){var b,d,f;b="\n    ";d=a.defaultName;if((d=(f=e.ifDefined)?f.call(a,d,{hash:{},inverse:n.noop,fn:n.program(4,h,c)}):q.call(a,"ifDefined",d,{hash:{},inverse:n.noop,fn:n.program(4,h,c)}))||0===d)b+=
d;return b+"\n  "}function h(a,c){var b,d,f,g;b='\n      <option value="';(g=e.defaultValue)?d=g.call(a,{hash:{}}):(d=a.defaultValue,d="function"===typeof d?d():d);b+=m(d)+'" ';d=a.selectedValue;f=a.defaultValue;if((d=(g=e.ifEqual)?g.call(a,f,d,{hash:{},inverse:n.noop,fn:n.program(5,l,c)}):q.call(a,"ifEqual",f,d,{hash:{},inverse:n.noop,fn:n.program(5,l,c)}))||0===d)b+=d;b+=">";(g=e.defaultName)?d=g.call(a,{hash:{}}):(d=a.defaultName,d="function"===typeof d?d():d);return b+=m(d)+"</option>\n    "}
function l(a,c){return'selected="selected"'}e=e||b.helpers;var k,m=this.escapeExpression,n=this,q=e.helperMissing;b='<select id="';(k=e.widgetId)?c=k.call(a,{hash:{}}):(c=a.widgetId,c="function"===typeof c?c():c);b+=m(c)+'" name="';(k=e.widgetName)?c=k.call(a,{hash:{}}):(c=a.widgetName,c="function"===typeof c?c():c);b+=m(c)+'" class="form-control ';(k=e.cssClass)?c=k.call(a,{hash:{}}):(c=a.cssClass,c="function"===typeof c?c():c);b+=m(c)+'" ';c=a.disabled;if((c=(k=e.unlessBlank)?k.call(a,c,{hash:{},
inverse:n.noop,fn:n.program(1,f,d)}):q.call(a,"unlessBlank",c,{hash:{},inverse:n.noop,fn:n.program(1,f,d)}))||0===c)b+=c;b+=">\n  ";c=a.defaultValue;if((c=(k=e.ifDefined)?k.call(a,c,{hash:{},inverse:n.noop,fn:n.program(3,g,d)}):q.call(a,"ifDefined",c,{hash:{},inverse:n.noop,fn:n.program(3,g,d)}))||0===c)b+=c;return b+"\n</select>\n"});return this.HandlebarsTemplates["widgets/select"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["widgets/text_input"]=Handlebars.template(function(b,a,e,c,d){function f(a,c){var b,d;b='maxlength="';(d=e.maxlength)?d=d.call(a,{hash:{}}):(d=a.maxlength,d="function"===typeof d?d():d);return b+=u(d)+'" '}function g(a,c){var b,d;b='placeholder="';(d=e.placeholder)?d=d.call(a,{hash:{}}):(d=a.placeholder,d="function"===typeof d?d():d);return b+=u(d)+'"'}function h(a,c){return"on"}function l(a,c){return"off"}
function k(a,c){return"on"}function m(a,c){return"off"}function n(a,c){var b,d;b='autocapitalize="';(d=e.autocapitalize)?d=d.call(a,{hash:{}}):(d=a.autocapitalize,d="function"===typeof d?d():d);return b+=u(d)+'"\n  '}function q(a,c){var b,d;b='autocorrect="';(d=e.autocorrect)?d=d.call(a,{hash:{}}):(d=a.autocorrect,d="function"===typeof d?d():d);return b+=u(d)+'"\n  '}function p(a,c){var b,d;b='disabled="';(d=e.disabled)?d=d.call(a,{hash:{}}):(d=a.disabled,d="function"===typeof d?d():d);return b+=
u(d)+'"\n  '}function t(a,c){var b,d;b='readonly="';(d=e.readonly)?d=d.call(a,{hash:{}}):(d=a.readonly,d="function"===typeof d?d():d);return b+=u(d)+'"'}e=e||b.helpers;var r,u=this.escapeExpression,v=e.helperMissing;b='<input id="';(r=e.widgetId)?c=r.call(a,{hash:{}}):(c=a.widgetId,c="function"===typeof c?c():c);b+=u(c)+'" name="';(r=e.widgetName)?c=r.call(a,{hash:{}}):(c=a.widgetName,c="function"===typeof c?c():c);b+=u(c)+'" type="text" class="form-control ';(r=e.cssClass)?c=r.call(a,{hash:{}}):
(c=a.cssClass,c="function"===typeof c?c():c);b+=u(c)+'" value="';(r=e.value)?c=r.call(a,{hash:{}}):(c=a.value,c="function"===typeof c?c():c);b+=u(c)+'"\n  ';c=a.maxlength;if((c=(r=e.unlessBlank)?r.call(a,c,{hash:{},inverse:this.noop,fn:this.program(1,f,d)}):v.call(a,"unlessBlank",c,{hash:{},inverse:this.noop,fn:this.program(1,f,d)}))||0===c)b+=c;b+="\n  ";c=a.placeholder;if((c=(r=e.unlessBlank)?r.call(a,c,{hash:{},inverse:this.noop,fn:this.program(3,g,d)}):v.call(a,"unlessBlank",c,{hash:{},inverse:this.noop,
fn:this.program(3,g,d)}))||0===c)b+=c;b+='\n  autocomplete="';c=a.autocomplete;if((c=(r=e.ifEqual)?r.call(a,c,"on",{hash:{},inverse:this.program(7,l,d),fn:this.program(5,h,d)}):v.call(a,"ifEqual",c,"on",{hash:{},inverse:this.program(7,l,d),fn:this.program(5,h,d)}))||0===c)b+=c;b+='"\n  delay="';c=a.delay;if((c=(r=e.ifEqual)?r.call(a,c,"on",{hash:{},inverse:this.program(11,m,d),fn:this.program(9,k,d)}):v.call(a,"ifEqual",c,"on",{hash:{},inverse:this.program(11,m,d),fn:this.program(9,k,d)}))||0===c)b+=
c;b+='"\n  ';c=a.autocapitalize;if((c=(r=e.unlessBlank)?r.call(a,c,{hash:{},inverse:this.noop,fn:this.program(13,n,d)}):v.call(a,"unlessBlank",c,{hash:{},inverse:this.noop,fn:this.program(13,n,d)}))||0===c)b+=c;c=a.autocorrect;if((c=(r=e.unlessBlank)?r.call(a,c,{hash:{},inverse:this.noop,fn:this.program(15,q,d)}):v.call(a,"unlessBlank",c,{hash:{},inverse:this.noop,fn:this.program(15,q,d)}))||0===c)b+=c;c=a.disabled;if((c=(r=e.unlessBlank)?r.call(a,c,{hash:{},inverse:this.noop,fn:this.program(17,p,
d)}):v.call(a,"unlessBlank",c,{hash:{},inverse:this.noop,fn:this.program(17,p,d)}))||0===c)b+=c;c=a.readonly;if((c=(r=e.unlessBlank)?r.call(a,c,{hash:{},inverse:this.noop,fn:this.program(19,t,d)}):v.call(a,"unlessBlank",c,{hash:{},inverse:this.noop,fn:this.program(19,t,d)}))||0===c)b+=c;return b+"/>\n"});return this.HandlebarsTemplates["widgets/text_input"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["widgets/typeahead_dropdown"]=Handlebars.template(function(b,a,e,c,d){function f(a,c){var b,d;b='\n         placeholder="';(d=e.placeholder)?d=d.call(a,{hash:{}}):(d=a.placeholder,d="function"===typeof d?d():d);return b+=h(d)+'"'}e=e||b.helpers;var g,h=this.escapeExpression,l=e.helperMissing;b='<div class="input-group">\n  <input type="text" id="';(g=e.widgetId)?c=g.call(a,{hash:{}}):(c=a.widgetId,c="function"===
typeof c?c():c);b+=h(c)+'" name="';(g=e.widgetName)?c=g.call(a,{hash:{}}):(c=a.widgetName,c="function"===typeof c?c():c);b+=h(c)+'" class="typeaheadInput form-control ';(g=e.cssClass)?c=g.call(a,{hash:{}}):(c=a.cssClass,c="function"===typeof c?c():c);b+=h(c)+'" ';c=a.placeholder;if((c=(g=e.unlessBlank)?g.call(a,c,{hash:{},inverse:this.noop,fn:this.program(1,f,d)}):l.call(a,"unlessBlank",c,{hash:{},inverse:this.noop,fn:this.program(1,f,d)}))||0===c)b+=c;return b+' autocomplete="off"/>\n  <div class="input-group-btn">\n    <button type="button" class="btn btn-default dropdown-toggle clickable" data-dropdown="dropdown" tabindex="-1">\n      <span class="caret"></span>\n    </button>\n  </div>\n</div>\n'});
return this.HandlebarsTemplates["widgets/typeahead_dropdown"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["widgets/widget"]=Handlebars.template(function(b,a,e,c,d){e=e||b.helpers;c=this.escapeExpression;b='<input type="text" class="form-control ';(d=e.cssClass)?d=d.call(a,{hash:{}}):(d=a.cssClass,d="function"===typeof d?d():d);b+=c(d)+'" id="';(d=e.widgetId)?d=d.call(a,{hash:{}}):(d=a.widgetId,d="function"===typeof d?d():d);b+=c(d)+'" name="';(d=e.widgetName)?d=d.call(a,{hash:{}}):(d=a.widgetName,d="function"===
typeof d?d():d);b+=c(d)+'" value="';(d=e.value)?d=d.call(a,{hash:{}}):(d=a.value,d="function"===typeof d?d():d);return b+=c(d)+'" autocorrect="off" autocapitalize="off" autocomplete="off"/>\n'});return this.HandlebarsTemplates["widgets/widget"]}).call(this);
ns("la.views",function(b){b.Widget=b.View.extend({initialize:function(a){this.attributeName=this.$el.data("name");this.defaultValue=String(this.$el.data("value"));this.listenTo(this.model,"change:"+this.attributeName,this._updateView);this.cssClass=this.$el.data("css-class");this.maxlength=this.$el.data("maxlength");this.placeholder=this.$el.data("placeholder");this.label=this.$el.data("label");this.disabled=this.$el.data("disabled");this.tabindex=this.$el.data("tabindex")},_updateView:function(a,
b,c){},render:function(){this.renderHandlebars(this.templateName);this._validateAttribute();return this},renderHandlebars:function(a,b){b=b||{};$(this.el).html(HandlebarsTemplates[a]($.extend({value:this._value(),defaultValue:this.defaultValue,widgetId:this.$el.data("id")||this.attributeName,widgetName:this.attributeName,cssClass:this.cssClass||"",width:this.width,maxlength:this.maxlength,placeholder:this.placeholder,label:this.label,style:this.style,disabled:this.disabled,tabindex:this.tabindex},
b)))},_validateAttribute:function(){var a={};a[this.attributeName]=this.model.get(this.attributeName);this.model.validate(a)},_value:function(){return _(this.model[this.attributeName]).isFunction()?this.model[this.attributeName]():this.model.get(this.attributeName)},enable:function(a){}})});
ns("la.views.widgets",function(b){b.AutosizeTextarea=la.views.Widget.extend({events:{"keypress textarea":"_handleKeypress","keyup textarea":"_handleKeyup","paste textarea":"_handlePaste"},initialize:function(a){this._super(a);this.autosize=!1!==this.$el.data("autosize");this.rows=this.$el.data("rows")||1},render:function(){this.renderHandlebars("widgets/autosize_textarea",{rows:this.rows});if(this.autosize){var a=this.$("textarea");_.delay(function(){autosize(a)},5)}return this},enable:function(a){a=
_(a).isUndefined()?!0:a;this.$("textarea").attr("disabled",!a)},_handleKeyup:function(a){this.model.set(this.attributeName,$(a.target).val(),{validate:!0});this._resize()},_handleKeypress:function(a){var b=$(a.target);if(!_(this.maxlength).isUndefined()){var c=la.getHighlightedText(),b=b.val();!c&&b&&b.length>=this.maxlength&&a.preventDefault()}},_handlePaste:function(a){var b=$(a.target),c=b.val(),d=this,f=this.model;_(d.maxlength).isUndefined()?f.set(d.attributeName,b.val(),{validate:!0}):_.delay(function(){var a=
b.val();a&&a.length>d.maxlength&&(b.val(c),a=c);f.set(d.attributeName,a,{validate:!0});_.delay(function(){d._resize()},5)},10)},_resize:function(){this.$("textarea").trigger("autosize")},_updateView:function(a,b,c){this.$("textarea").val()!==b&&(this.$("textarea").val(b?b.toString():""),this._resize())}})});
ns("la.views.widgets",function(b){b.Checkbox=la.views.Widget.extend({templateName:"widgets/checkbox",events:{"change input":"_handleChange","click input":"_handleChange"},enable:function(a){a=_(a).isUndefined()?!0:a;this.$("input").attr("disabled",!a)},_handleChange:function(a){this.model.set(this.attributeName,$(a.target).prop("checked"),{validate:!0})},_isValueChanged:function(a){return this.model.get(this.attributeName)!==a},_viewIsChecked:function(){return this.$("input").prop("checked")},_updateView:function(a,
b){this._viewIsChecked()!==b&&(this.$("input").prop("checked",b?"checked":""),this._updateModel(b))},_updateModel:function(a){this.model.set(this.attributeName,a)}})});
ns("la.views.widgets",function(b){b.ColourPicker=la.views.Widget.extend({events:{"keydown span.input-group-addon":"_tab"},initialize:function(a){this._super(a)},render:function(){this.renderHandlebars("widgets/colour_picker");_.delay(function(){this.$(".color").colorpicker().on("changeColor",$.proxy(function(a){a=void 0!==a.value?a.value:a.color.toHex();this.model.set(this.attributeName,a.toUpperCase(),{validate:!0});a!==this.$("input").val()&&(this.$("input").val(a),this.$("input").change())},this)).on("hidePicker",
$.proxy(function(){this.$("input").val(this.model.get(this.attributeName))},this));this.$("input").val(this.model.get(this.attributeName))}.bind(this),1E3);return this},_value:function(){var a=this._super();return a&&a.toUpperCase()},_tab:function(a){9===a.keyCode&&this.$(".color").colorpicker("hide")},_updateView:function(a,b){this.$("input").val(b.toUpperCase());this._isValidHex(b)&&this.$(".color").colorpicker("setValue",b)},_isValidHex:function(a){return a.match(/^#[0-9a-fA-F]{6}$/)}})});
ns("la.views.widgets",function(b){b.TextInput=la.views.Widget.extend({templateName:"widgets/text_input",initialize:function(a){this._super(a);this.ignoredCharsRegex=/[\b\f\n\r\t\v\x25\x27\x2E]/;this.autocorrect=this.$el.data("autocorrect");this.autocapitalize=this.$el.data("autocapitalize");this.autocomplete=this.$el.data("autocomplete");this.readonly=this.$el.data("readonly");this.delay="on"===this.$el.data("delay")},events:{"change input":"_handleChange","keydown input":"_handleKeydown","keypress input":"_handleKeypress",
"keyup input":"_handleKeyup","paste input":"_handlePaste","blur input":"_handleBlur"},renderHandlebars:function(a,b){this._super(a,$.extend({autocorrect:this.autocorrect,autocapitalize:this.autocapitalize,autocomplete:this.autocomplete,readonly:this.readonly},b))},enable:function(a){a=_(a).isUndefined()?!0:a;this.$("input").attr("disabled",!a)},_handleChange:function(a){this.model.set(this.attributeName,$(a.target).val(),{validate:!0})},_handlePaste:function(a){_.delay(function(){this._handleChange(a)}.bind(this),
10)},_handleKeydown:function(){},_handleKeypress:function(){},_handleBlur:function(){},_handleKeyup:function(a){9!==a.keyCode&&(this.delay?_.debounce(function(a){this._changeValue(a)}.bind(this),1E3).call():this._changeValue(a))},_changeValue:function(a){a=this.$("input").val();this._isValueChanged(a)&&this.model.set(this.attributeName,a,{silent:!0,validate:!0}).trigger("change:"+this.attributeName,this.model,a)},_isValueChanged:function(a){return this.model.get(this.attributeName)!==a},_viewHasValue:function(a){return this.$("input").val()===
a},_updateView:function(a,b,c){this._viewHasValue(b)||(this.$("input").val(b),this.model.attributes[this.attributeName]=b,this._updateDom(b))},_updateDom:function(a){this.model.set(this.attributeName,a)}})});
ns("la.views.widgets",function(b){b.RegexInput=b.TextInput.extend({templateName:"widgets/text_input",initialize:function(a){this._super(a);this.validRegex=new RegExp(this.$el.data("valid-regex")||".*");this.invalidRegex=new RegExp(this.$el.data("invalid-regex")||"uht1hna5nad0hnil0yuh");this.ignoredCharsRegex=/[\b\f\n\r\t\v\x25\x27\x2E]/},_handlePaste:function(a){var b=$(a.target),c=b.val(),d=this,f=this.model;_.delay(function(){var a=b.val();d._isValueInvalid(a)?b.val(c):f.set(d.attributeName,a,{validate:!0})},
10)},_handleKeydown:function(a){if(8===a.which){var b=$(a.target),c=b.val(),d=la.getHighlightedText();_(d).isBlank()?(b=b.caret("pos"),c=c.substring(0,b-1)+c.substring(b)):c=c.replace(d,"");!_(c).isBlank()&&this._isValueInvalid(c)&&a.preventDefault()}},_handleKeypress:function(a){var b=a.which||a.keyCode,c=$(a.target),d=c.val(),b=String.fromCharCode(b);if(0!==a.which&&8!==a.which||!this.ignoredCharsRegex.test(b)){var f=la.getHighlightedText(),c=_(f).isBlank()?_(d).insert(c.caret("pos"),b):d.replace(f,
b);this._isValueInvalid(c)&&a.preventDefault()}},_isValueInvalid:function(a){return!this.validRegex.test(a)||this.invalidRegex.test(a)}})});
ns("la.views.widgets",function(b){b.DatePicker=la.views.widgets.RegexInput.extend({initialize:function(a){this._super(a);this.validRegex=new RegExp(/^[\d.,\/]*$/);this.invalidRegex=new RegExp(/(^\d{1,2}[.,\/]\d{1,2}[.,\/]\d{1,4}([.,\/]).*$|[.,\/]{2,})/);this.listenTo(this.model,"change:"+this.attributeName,this._updateView);this.endDate=this.$el.data("date-enddate")},render:function(){var a=this;this.renderHandlebars("widgets/date_picker");this.$datePicker=this.$datePicker||this.$(".date");this.$datePicker.datepicker({autoclose:!0,
forceParse:!1,format:"dd/mm/yyyy",keyboardNavigation:!1,todayBtn:"linked",startDate:"01/01/1900",endDate:this.endDate}).on("show",function(b){$(".datepicker .datepicker-days table tbody td").off().on("click",function(){a.lastClickedTarget="date"});$(".datepicker .datepicker-days table tfoot .today").off().on("click",function(){a.lastClickedTarget="today"})});this._validateAttribute();return this},_handleKeyup:function(a){this.lastClickedTarget="keyup";this._changeValue(a)},_handlePaste:function(a){_.delay(function(){this._changeValue(a)}.bind(this),
10)},_changeValue:function(a,b){var c=$(a.target).val();if(DateUtils.isFrontendDateValid(c))try{var d=this._format(c);this._isValueChanged(DateUtils.frontendToBackend(d))&&(this.model.set(this.attributeName,DateUtils.frontendToBackend(d),{validate:!0}),Backbone.trigger("datepicker-clicked",{input:this.attributeName,target:this.lastClickedTarget}),this.lastClickedTarget=void 0);b&&$(a.target).val(d);return}catch(f){}this.model.set(this.attributeName,c,{validate:!0})},_handleChange:function(a){this._changeValue(a,
!0)},_updateView:function(){if(!1===this.$datePicker.find("input").is(":focus")){var a=this.model.get(this.attributeName);this.$datePicker.find("input").val(DateUtils.backendToFrontendWithoutException(a))}this.$datePicker.datepicker("update");this.model.isValid(this.attributeName)?this.$el.removeClass("focused"):this.$el.addClass("focused")},_format:function(a){a=a.replace(/\./g,"/");var b=a.split("/"),c=this._leftPad(b[0])+"/"+this._leftPad(b[1])+"/";return 2===b.length?c+moment().format("YYYY"):
3===b.length?c+this._getYear(b[2]):a},_getYear:function(a){return"20"!==a&&2===a.length?"20"+a:a},_leftPad:function(a){return 1===a.length?"0"+a:a}})});
ns("la.views.widgets",function(b){b.DateOfBirthDatePicker=la.views.widgets.DatePicker.extend({initialize:function(a){this._super(a)},_handleKeyup:function(a){a=$(a.target).val();try{this.model.set(this.attributeName,DateUtils.convertDOBToBackendFormat(a),{validate:!0})}catch(b){this.model.set(this.attributeName,a,{silent:!0,validate:!0})}},_handleChange:function(a){a=$(a.target);var b=a.val();try{a.val(DateUtils.convertDOBToFrontendFormat(b)),this.model.set(this.attributeName,DateUtils.convertDOBToBackendFormat(b),
{validate:!0}),this.model.trigger("validated"),this.model.isValid(this.attributeName)||this.$el.parents(".form-group").addClass("focused")}catch(c){this.model.set(this.attributeName,b,{validate:!0})}}})});
ns("la.views.widgets",function(b){b.EmailInput=la.views.Widget.extend({templateName:"widgets/email_input",initialize:function(a){this._super(a);this.emailInputModel=new la.models.Email;Backbone.Validation.bind(this);this.collection.bind("add remove",this._resetTokens,this)},events:{"keyup input":"_handleKeyUp","tokenfield:removetoken input":"_deleteEmail","tokenfield:createdtoken input":"_addEmail"},_resetTokens:function(){if(this.tokenResetting)return!1;this.tokenResetting=!0;this.$("input#email").tokenfield("setTokens",
this.collection.map(function(a){return a.get("email")}),!1,!1);this.$(".token").attr("draggable",!0);this.$(".token-input").focus();this._checkMandatory();this.tokenResetting=!1},_deleteEmail:function(a){if(this.tokenResetting)return!1;this.collection.remove(this.collection.findWhere({email:a.attrs.value}))},_addEmail:function(a){if(this.tokenResetting)return!1;a=a.attrs.value;if(""===a)return!1;this.emailInputModel.isValid(!0)?this.collection.add(new la.models.Email({email:a})):this._resetTokens()},
_checkMandatory:function(){var a=this.$("input"),b=this.$(".email-widget");this.allowEmpty||0!==this.collection.size()?(a.removeClass("required-empty"),b.removeClass("required-empty")):(a.addClass("required-empty"),b.addClass("required-empty"))},renderHandlebars:function(a,b){this._super(a,b);this.$("input#email").tokenfield({allowEditing:!1,delimiter:[";",","," "],createTokensOnBlur:!0});this._resetTokens();this.allowEmpty=!1!==$(this.el).data("allowEmpty");this._checkMandatory()},_handleKeyUp:function(a){a=
$(a.target).val();this.emailInputModel.set("email",_(a).trim());var b=this;this.emailInputModel.validate(null,{valid:function(a,d,f){a=b.$(".token-input");ValidationHelper.clearError(a)},invalid:function(a,d,f,g){a=b.$(".token-input");ValidationHelper.showError(a,f);b.$(".error-message").show()}});this._checkMandatory()}})});
ns("la.views.widgets",function(b){b.TypeaheadDropdown=la.views.Widget.extend({events:{"click .dropdown-toggle":"_showAll","mousedown .dropdown-toggle":"_showAll","change input":"_updateModel","keydown input":"_handleKeydown","keyup input":"_handleKeyup"},initialize:function(a){this._super(a);this.cssClass=this.$el.data("css-class");this.height=this.$el.data("height")||"300px";this.width=this.$el.data("width")||"350px";this.valueField=this.$el.data("value-field")||"id";this.prompt=this.$el.data("prompt");
this.customActionName=this.$el.data("custom-action-name");this.customActionLabel=this.$el.data("custom-action-label");this.maxItems=this.$el.data("max-items")||1E3;this._buildLabelsAndClasses(this.$el.data("labels"));this.labelField=this.$el.data("label-field")||this.labels[0];this.disabled="disabled"===this.$el.data("disabled");this.allowInvalidOptions=this.$el.data("allow-invalid-values")||!1;this.filter=this.$el.data("collection-filter");this.keyCodesToIgnore=this.$el.data("keyCodesToIgnore")?
this.$el.data("keyCodesToIgnore").split(","):void 0;_(this).bindAll();this.listenTo(this.model,"change:"+this.attributeName,this._modelChanged)},_getFilteredOptions:function(){return this.filter&&!_.isUndefined(this.collection[this.filter])?this.collection[this.filter]().models:this.collection.models},enableAndClear:function(a){a=_(a).isUndefined()?!0:a;this.disabled=!a;this.$("input").val("").change();this.render()},enable:function(a){a=_(a).isUndefined()?!0:a;this.disabled=!a;this.render()},render:function(){this.renderHandlebars("widgets/typeahead_dropdown");
this._modelChanged();var a=this,b=this.$("input");b.attr("placeholder",this.prompt);b.laTypeahead({source:this._getFilteredOptions,matcher:function(c){return 0<=a._buildLabels(c).toLowerCase().indexOf(this.query.toLowerCase())},sorter:function(a){return a},highlighter:function(c){var b=this.query.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");return a._highlightLabels(c,b)},updater:this.updater,minLength:0,items:this.maxItems,container:this,keyCodesToIgnore:this.keyCodesToIgnore});b.laTypeahead.Constructor.prototype.keyup=
function(a){if((!this.options.keyCodesToIgnore||-1===$.inArray(a.keyCode?a.keyCode.toString():"",this.options.keyCodesToIgnore))&&-1===$.inArray(a.keyCode,[40,38,16,17,18]))switch(a.keyCode){case 9:case 13:if(!this.shown)break;this.select();break;case 27:if(!this.shown)break;this.hide();break;default:this.lookup()}};this.disabled?(this.$("input").attr("disabled",!0),this.undelegateEvents()):this.delegateEvents();return this},_isNumeric:function(a){return!isNaN(parseFloat(a))&&isFinite(a)},_parseValue:function(a){"id"===
this.valueField&&!_(a).isBlank()&&this._isNumeric(a)&&(a=parseInt(a,10));return a},updater:function(a){var b=this.model.get(this.attributeName);_(a).isBlank()&&(a=b);a=this._parseValue(a);this._sameValues(a,b)||this._setModelValue(a);return this._buildLabel(this.labelField,this._findModel(a))},_setModelValue:function(a){this.model.set(this.attributeName,a)},_sameValues:function(a,b){return a===b||!this._isNullOrUndefined(a)&&!this._isNullOrUndefined(b)&&a.toString()===b.toString()},_isNullOrUndefined:function(a){return null===
a||_.isUndefined(a)},_showAll:function(a){this.$("input").select().data("typeahead").lookup(a,!0);a=this.model.get(this.attributeName);!_(a).isBlank()&&(this.$(".typeahead tr.active").removeClass("active"),a=this.$("[data-value='"+a+"']"))&&(a.addClass("active"),this.$("input").data("typeahead").scrollCurrentToTop(a))},_updateModel:function(){var a=this.$("input"),b=a.val(),c=this.collection.find(function(a){return this._buildLabel(this.labelField,a)===b},this);_(b).isBlank()?this.model.set(this.attributeName,
""):_(c).isUndefined()?(c=this._findModel(this.model.get(this.attributeName)),a.val(this._buildLabel(this.labelField,c))):this.updater()},_modelChanged:function(){var a=this.model.get(this.attributeName);if(_(a).isBlank())this.$("input").val("");else{var b=this._buildLabel(this.labelField,this._findModel(a));this.$("input").val(_(b).isUndefined()&&this.allowInvalidOptions?a:b)}this._validateAttribute()},_buildLabels:function(a){return _(this.labels).map(function(b){return this._buildLabel(b,a)},this).join(" ")},
_buildLabel:function(a,b){if(b)return(_(b[a]).isFunction()?b[a]():b.get(a))||""},_highlightLabels:function(a,b){return _(this.labels).map(function(c){c=this._buildLabel(c,a);return this._highlightLabelsWithText(c,b)},this)},_highlightLabelsWithText:function(a,b){if(_(b).isBlank())return _(a).escapeHTML();var c=a.replace(new RegExp("("+b+")","ig"),function(a,c){return"gnirtselbissopmi0"+c+"gnirtselbissopmi1"});return _(c).escapeHTML().replace(/gnirtselbissopmi0/ig,"<strong>").replace(/gnirtselbissopmi1/ig,
"</strong>")},_findModel:function(a){return"id"===this.valueField?this.collection.get(a):this.collection.find(function(b){return this._sameValues(b.get(this.valueField),a)},this)},_buildLabelsAndClasses:function(a){a=a.split(",");this.labels=[];this.cssClasses=[];_(a).each(function(a){a=a.split(":");this.labels.push(a[0]);this.cssClasses.push(a[1]||"")},this)},_handleKeydown:function(a){40!==a.keyCode||this.$("input").data("typeahead").shown||(this._showAll(),this.$("input").data("typeahead").next())},
_handleKeyup:function(a){var b=$(a.target);this.model.preValidate(this.attributeName,this.model.get(this.attributeName))?b.addClass("required-empty"):b.removeClass("required-empty");a.stopPropagation()},_performCustomAction:function(){this.container[this.customActionName]()}})});ns("la.views.widgets",function(b){b.ModelSelectTypeaheadDropdown=b.TypeaheadDropdown.extend({_setModelValue:function(a){this.model.set(this.attributeName,this._findModel(a)).trigger("change")},_parseValue:function(a){return a}})});
ns("la.views.widgets",function(b){b.MoneyInput=b.RegexInput.extend({initialize:function(a){this._super(a);a=this.$el.data("decimal-places");a=_(a).isNumber()?a:"2";this.decimalPlaces=parseInt(a,10);this.showCommas=!0===this.$el.data("show-commas");this.events=_.extend(_.clone(this.events),{"blur input":"_handleBlur"})},events:{"input input":"_handleChange","change input":"_handleChange","keydown input":"_handleKeydown","keypress input":"_handleKeypress","keyup input":"_handleKeyup","paste input":"_handlePaste",
"blur input":"_handleBlur"},render:function(){this._super();this._updateView();return this},_handleKeyup:function(a){a.stopPropagation();9!==a.keyCode&&this._changeValue(a)},_handleChange:function(a){this._changeValue(a)},_handleBlur:function(a){this._updateView()},_changeValue:function(a){a=$(a.target).val().replace(/,/g,"").replace(/[.+\-]+$/,"");this.model.set(this.attributeName,a,{fromKeyup:!0,validate:!0})},_updateView:function(a,b,c){c&&c.fromKeyup||(a=b=this.model.get(this.attributeName),_(b).isBlank()||
(b=b.toString().replace(/,/g,""),a=parseFloat(b),_(a).isNaN()?a=b="":(a=a.toFixed(this.decimalPlaces),this.showCommas&&(a=$.money.formatNumeric(a,this.decimalPlaces)),a=a.replace(/(\.\d{2,3})0*$/,"$1"),a=a.replace(/(\.\d{2})0*$/,"$1"))),this.$("input").val(a),this.model.attributes[this.attributeName]=b)}})});
ns("la.views.widgets",function(b){b.NumberInput=b.RegexInput.extend({initialize:function(a){this._super(a);this.events=_.extend(_.clone(this.events),{"blur input":"_changeValue"})},_changeValue:function(a){a=$(a.target).val().replace(/[.+\-]+$/,"");void 0!==this.model.get(this.attributeName)&&this.model.get(this.attributeName).toString()===a.toString()||this.model.set(this.attributeName,a)}})});ns("la.views.widgets",function(b){b.PasswordInput=la.views.widgets.TextInput.extend({templateName:"widgets/password_input"})});
ns("la.views.widgets",function(b){b.Radio=la.views.Widget.extend({templateName:"widgets/radio",events:{"change input":"_handleChange","click input":"_handleChange"},enable:function(a){a=_(a).isUndefined()?!0:a;this.$("input").attr("disabled",!a)},_handleChange:function(a){this.model.set(this.attributeName,$(a.target).filter(":checked").val(),{validate:!0})},_isValueChanged:function(a){return this.model.get(this.attributeName)!==a},_updateView:function(a,b){this.$('input[value="'+b+'"]').prop("checked",
!0);this._updateModel(b)},_updateModel:function(a){this.model.set(this.attributeName,a)}})});
ns("la.views.widgets",function(b){b.Select=la.views.Widget.extend({initialize:function(a){this._super(a);this.defaultValue=this.$el.data("default-value");this.defaultName=this.$el.data("default-name");this.valueField=this.$el.data("value-field");this.nameField=this.$el.data("name-field");this.filter=this.$el.data("collection-filter");this.listenTo(this.collection,"sync",this._initAndRender);this.listenTo(this.collection,"change",this.render)},events:{"change select":"_handleChange"},_handleChange:function(a){this.model.set(this.attributeName,
this.$(a.target).val(),{validate:!0})},_getFilteredOptions:function(){return this.filter?this.collection[this.filter]().toJSON():this.collection.toJSON()},_appendOptions:function(a){_(a).each(function(a){a=this._renderOption(a);this.$("select").append(a)},this)},_renderOption:function(a){var b=$("<option/>").val(a[this.valueField]).text(this._readValueFromModel(a,this.nameField));a[this.valueField]===this.model.get(this.attributeName)&&(b=b.attr("selected","selected"));return b},_readValueFromModel:function(a,
b){return _(b.split(",")).map(function(c){return a[c.trim()]}).join(" ")},_initAndRender:function(){0<this.collection.size()&&_(this.defaultValue).isUndefined()&&this.model.set(this.attributeName,this.collection.at(0).get(this.valueField));this.render()},render:function(){var a=this._getFilteredOptions();this.renderHandlebars("widgets/select",{options:a,selected:this.model.get(this.attributeName),defaultValue:this.defaultValue,defaultName:this.defaultName});this._appendOptions(a);this._updateView(this.model,
this.model.get(this.attributeName));this._validateAttribute();return this},_updateView:function(a,b){this.$("select").val(b?b.toString():"")}})});
ns("la.views.widgets",function(b){b.SelectGrouped=la.views.widgets.Select.extend({initialize:function(a){this._super(a);this.groupByField=this.$el.data("group-by");this.sorted=this.$el.data("sorted")},_appendOptions:function(a){var b=a;if(this.sorted)var c=this,b=_.sortBy(a,function(a){return c._readValueFromModel(a,c.groupByField)+c._readValueFromModel(a,c.nameField).toLowerCase()});a=this._createGroup(b);_(a).each(function(a,c){var b=$("<optgroup/>").prop("label",c);this._appendOptionsToGroup(a,
b);this.$("select").append(b)},this)},_createGroup:function(a){return _.groupBy(a,function(a){return a[this.groupByField]},this)},_appendOptionsToGroup:function(a,b){_(a).each(function(a){a=this._renderOption(a);b.append(a)},this)}})});
ns("la.views.widgets",function(b){b.SelectGroupedAccounts=la.views.widgets.SelectGrouped.extend({_appendOptionsToGroup:function(a,b){_(a).each(function(a){var d=$("<option/>").val(a[this.valueField]).text(a[this.valueField]+" "+a[this.nameField]);a[this.valueField]===this.model.get(this.attributeName)&&(d=d.attr("selected","selected"));b.append(d)},this)}})});
ns("la.views.invoices",function(b){b.UnrealisedTransactionView=la.views.ValidatedFormView.extend({focusElementId:"contactId",events:{},initialize:function(a){this._super(a);this.accounts=a.accounts.active({whitelist:this.getAllInvoiceLineAccountIds()});this.allItems=a.items;this.contacts=a.contacts.filteredByActiveAndType(this.model.get("recipient"),{whitelist:[this.model.get("contactId")]});_.bindAll(this);this.paid=this.model.isPaid();this.listenTo(this.model,"validated",this.validateTotal)},render:function(){this.renderHandlebars("invoices/"+
this.model.get("type"),this.model,{locked:this.locked,paid:this.paid});this.disabledFormForLocked();this.renderSubviews();return this},disabledFormForLocked:function(){this.locked&&(this.disableForm(),this.$("#saveAndPrint,#email,#cancel,#enterPayment").removeClass("formDisabled").removeAttr("disabled"))},validateTotal:function(a,b,c){a=c&&c.total||"";this.$("#totalError").text(a).parent().toggleClass("hidden",0===a.length)},toggleButtons:function(){this._super();this.buttonsView&&this.buttonsView.toggleButtons()},
isValid:function(){return this._super()&&!this.locked},getAllInvoiceLineItemIds:function(){return this._getAllUniqueLineItemByElement("itemId")},getAllInvoiceLineAccountIds:function(){return this._getAllUniqueLineItemByElement("accountId")},_getAllUniqueLineItemByElement:function(a){var b=this.model.get("lines"),b=_(b.models).map(function(c){return c.get(a)});return _(b).unique()},_getLockedDate:function(){var a=la.BusinessSettings.get("lockDate");return DateUtils.parseBackendDate(a)}})});
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["admin/demote_partner_businesses"]=Handlebars.template(function(b,a,e,c,d){return'<h1>Demote partner businesses</h1>\n<p>This will demote <b>ALL</b> partner business that do not have a archie client id. (myobCrmId)</p>\n<p>This results in all users for these partner businesses being removed from the partner business and then added as a user instead.\n  These users will no longer have a partner dashboard.</p>\n<button class="btn btn-primary" id="demotePartnerBusiness">Demote partner businesses</button>\n'});
return this.HandlebarsTemplates["admin/demote_partner_businesses"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["admin/health_check_reports"]=Handlebars.template(function(b,a,e,c,d){e=e||b.helpers;var f;c=e.helperMissing;d=this.escapeExpression;b='<h1>Health check reports</h1>\n\n<ul>\n  <li><a href="';f=(f=e.adminUrl)?f.call(a,"health-check/journal-entry",{hash:{}}):c.call(a,"adminUrl","health-check/journal-entry",{hash:{}});b+=d(f)+'">Journal entry health check</a></li>\n  <li><a href="';f=(f=e.adminUrl)?f.call(a,
"health-check/trial-balance",{hash:{}}):c.call(a,"adminUrl","health-check/trial-balance",{hash:{}});b+=d(f)+'">Trial balance health check</a></li>\n  <li><a href="';f=(f=e.adminUrl)?f.call(a,"health-check/cross-accounts",{hash:{}}):c.call(a,"adminUrl","health-check/cross-accounts",{hash:{}});b+=d(f)+'">Cross accounts health check</a></li>\n  <li><a href="';f=(f=e.adminUrl)?f.call(a,"health-check/out-of-balance-journal-entries",{hash:{}}):c.call(a,"adminUrl","health-check/out-of-balance-journal-entries",
{hash:{}});b+=d(f)+'">Out of balance journal entries check</a></li>\n  <li><a href="';f=(f=e.adminUrl)?f.call(a,"health-check/invoice-calculations",{hash:{}}):c.call(a,"adminUrl","health-check/invoice-calculations",{hash:{}});b+=d(f)+'">Invoice calculations</a></li>\n  <li><a href="';f=(f=e.adminUrl)?f.call(a,"health-check/incomplete-invoices",{hash:{}}):c.call(a,"adminUrl","health-check/incomplete-invoices",{hash:{}});b+=d(f)+'">Incomplete invoices</a></li>\n  <li><a href="';f=(f=e.adminUrl)?f.call(a,
"health-check/duplicate-payroll-journals",{hash:{}}):c.call(a,"adminUrl","health-check/duplicate-payroll-journals",{hash:{}});b+=d(f)+'">Duplicate payroll journals</a></li>\n  <li><a href="';f=(f=e.adminUrl)?f.call(a,"health-check/multiple-non-rotated-payruns",{hash:{}}):c.call(a,"adminUrl","health-check/multiple-non-rotated-payruns",{hash:{}});return b+=d(f)+'">Multiple non-rotated payruns</a></li>\n</ul>\n'});return this.HandlebarsTemplates["admin/health_check_reports"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["admin/intermediary_dep_row"]=Handlebars.template(function(b,a,e,c,d){e=e||b.helpers;var f=e.helperMissing,g=this.escapeExpression;b='<td class="col-xs-8">\n    ';c={inputLabel:"",inputName:"depBusinessId","data-maxlength":"20",labelCssClass:"col-xs-0",widgetCssClass:"col-xs-24"};c=(d=e.TextInput)?d.call(a,{hash:c}):f.call(a,"TextInput",{hash:c});b+=g(c)+'\n</td>\n<td class="col-xs-16">\n    ';c={inputLabel:"",
inputName:"depMonth","data-collection":"irdMonths","data-name-field":"name","data-value-field":"id",labelCssClass:"col-xs-0 control-label bold-font",widgetCssClass:"col-xs-14 form-control-wrapper"};c=(d=e.Select)?d.call(a,{hash:c}):f.call(a,"Select",{hash:c});b+=g(c)+"\n    ";c={inputLabel:"",inputName:"depYear","data-collection":"irdYears","data-name-field":"id","data-value-field":"id",labelCssClass:"col-xs-0",widgetCssClass:"col-xs-10 form-control-wrapper"};c=(d=e.Select)?d.call(a,{hash:c}):f.call(a,
"Select",{hash:c});return b+=g(c)+"\n</td>\n"});return this.HandlebarsTemplates["admin/intermediary_dep_row"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["admin/intermediary_eps"]=Handlebars.template(function(b,a,e,c,d){e=e||b.helpers;var f=e.helperMissing,g=this.escapeExpression;b='<div class="row">\n    <h3 class="intermediary-title">Electronic Payment Schedule (EPS)</h3>\n    <div class="dcp-title col-xs-12">\n        <h4>Current PAYE period (DCP)</h4>\n    </div>\n    <div class="dep-title col-xs-12">\n        <h4>Earlier PAYE period (DEP)</h4>\n    </div>\n</div>\n<div class="row">\n    <div class="dcp-section col-xs-12">\n        <div class="dcp-period row">\n            ';c=
{inputLabel:"Reporting period:",inputName:"dcpMonth","data-collection":"irdMonths","data-name-field":"name","data-value-field":"id",labelCssClass:"col-xs-5 control-label",widgetCssClass:"col-xs-6 form-control-wrapper"};c=(d=e.Select)?d.call(a,{hash:c}):f.call(a,"Select",{hash:c});b+=g(c)+"\n            ";c={inputLabel:"",inputName:"dcpYear","data-collection":"irdYears","data-name-field":"id","data-value-field":"id",labelCssClass:"col-xs-0",widgetCssClass:"col-xs-5 form-control-wrapper"};c=(d=e.Select)?
d.call(a,{hash:c}):f.call(a,"Select",{hash:c});b+=g(c)+'\n        </div>\n\n        <div class="dcp-business-ids row">\n            ';c={inputLabel:"Business IDs:",inputId:"dcpBusinessIds",inputName:"dcpBusinessIds","data-autosize":"false","data-rows":"10","data-cols":"80",widgetCssClass:"col-xs-15",labelCssClass:"col-xs-5"};c=(d=e.AutosizeTextarea)?d.call(a,{hash:c}):f.call(a,"AutosizeTextarea",{hash:c});return b+=g(c)+'\n        </div>\n        <div class="intermediary-download row">\n            <button id="eps-download-button" type="button" class="btn btn-primary action pull-right">Download EPS</button>\n        </div>\n    </div>\n\n    <div class="dep-section col-xs-8">\n            <table id="dep-table-header" class="table table-bordered table-condensed col-xs-10">\n                <thead>\n                    <tr>\n                        <th class="col-xs-8">Business ID</th>\n                        <th class="col-xs-16">End date of Earlier PAYE period</th>\n                    </tr>\n                </thead>\n            </table>\n            <table id="dep-table-body" class="table table-bordered table-condensed"></table>\n    </div>\n</div>\n\n\n\n\n\n'});
return this.HandlebarsTemplates["admin/intermediary_eps"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["admin/intermediary_ird_bank_file"]=Handlebars.template(function(b,a,e,c,d){e=e||b.helpers;var f=e.helperMissing,g=this.escapeExpression;b='<h3 class="intermediary-title">Direct Credit Bank File (IRD)</h3>\n\n<div class="row">\n    <div class="pay-period col-xs-12">\n        ';c={inputLabel:"Pay period:",inputName:"month","data-collection":"irdMonths","data-name-field":"name","data-value-field":"id",labelCssClass:"col-xs-4 control-label",
widgetCssClass:"col-xs-6 form-control-wrapper"};c=(d=e.Select)?d.call(a,{hash:c}):f.call(a,"Select",{hash:c});b+=g(c)+"\n        ";c={inputLabel:"",inputName:"year","data-collection":"irdYears","data-name-field":"id","data-value-field":"id",labelCssClass:"col-xs-0",widgetCssClass:"col-xs-5 form-control-wrapper"};c=(d=e.Select)?d.call(a,{hash:c}):f.call(a,"Select",{hash:c});b+=g(c)+'\n    </div>\n</div>\n\n<div class="row">\n    <div class="pay-date col-xs-12">\n        ';c={inputLabel:"Pay on date:",
inputName:"paymentDate",labelCssClass:"col-xs-4",widgetCssClass:"col-xs-7"};c=(d=e.DatePicker)?d.call(a,{hash:c}):f.call(a,"DatePicker",{hash:c});b+=g(c)+'\n    </div>\n</div>\n\n<div class="row">\n    <div class="client-ids col-xs-12">\n        ';c={inputLabel:"Client IDs:",inputId:"businessIds",inputName:"businessIds","data-autosize":"false","data-rows":"10","data-cols":"80",labelCssClass:"col-xs-4",widgetCssClass:"col-xs-15"};c=(d=e.AutosizeTextarea)?d.call(a,{hash:c}):f.call(a,"AutosizeTextarea",
{hash:c});return b+=g(c)+'\n    </div>\n</div>\n\n<div class="row">\n    <div class="ird-bank-file-download col-xs-12">\n        <button id="ird-bank-file-download-button" type="button" class="btn btn-primary action pull-right">Download Bank File</button>\n    </div>\n</div>\n'});return this.HandlebarsTemplates["admin/intermediary_ird_bank_file"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["admin/intermediary_scf"]=Handlebars.template(function(b,a,e,c,d){e=e||b.helpers;var f=e.helperMissing,g=this.escapeExpression;b='<h3 class="intermediary-title">Subsidy Claim Form (SCF)</h3>\n\n<div class="row">\n    <div class="scf-period col-xs-12">\n        ';c={inputLabel:"Reporting period:",inputName:"scfMonth","data-collection":"irdMonths","data-name-field":"name","data-value-field":"id",labelCssClass:"col-xs-6 control-label",
widgetCssClass:"col-xs-6 form-control-wrapper"};c=(d=e.Select)?d.call(a,{hash:c}):f.call(a,"Select",{hash:c});b+=g(c)+"\n        ";c={inputLabel:"",inputName:"scfYear","data-collection":"irdYears","data-name-field":"id","data-value-field":"id",labelCssClass:"col-xs-0",widgetCssClass:"col-xs-5 form-control-wrapper"};c=(d=e.Select)?d.call(a,{hash:c}):f.call(a,"Select",{hash:c});return b+=g(c)+'\n    </div>\n</div>\n<div class="row">\n    <div class="scf-download col-xs-12">\n        <button id="scf-download-button" type="button" class="btn btn-primary action pull-right">Download SCF</button>\n    </div>\n</div>\n<div class="row">\n    <div class="scf-download-spinner col-xs-12">\n        <div class="loadingSpinner pull-left"></div>\n    </div>\n</div>\n'});
return this.HandlebarsTemplates["admin/intermediary_scf"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["advisor/add_business"]=Handlebars.template(function(b,a,e,c,d){e=e||b.helpers;var f=e.helperMissing,g=this.escapeExpression;b='<h3>Create a business</h3>\n<p>Enter the details of the new business.</p>\n\n<div class="row">\n  <div class="col-xs-8">\n    ';c={inputLabel:"Business name",inputName:"businessName",labelCssClass:"",widgetCssClass:"","data-maxlength":"255"};c=(d=e.TextInput)?d.call(a,{hash:c}):f.call(a,
"TextInput",{hash:c});b+=g(c)+'\n  </div>\n  <div class="col-xs-8">\n    ';c={inputLabel:"Chart of accounts",labelCssClass:"",inputName:"chartOfAccountsType",widgetCssClass:"","data-name":"chartOfAccountsType","data-collection":"chartOfAccountsTypes","data-labels":"name","data-prompt":"Select chart of accounts"};c=(d=e.ModelSelectTypeaheadDropdown)?d.call(a,{hash:c}):f.call(a,"ModelSelectTypeaheadDropdown",{hash:c});b+=g(c)+'\n  </div>\n  <div class="col-xs-8">\n    ';c={inputLabel:"Your MYOB client id",
inputName:"referrer",labelCssClass:"",widgetCssClass:"","data-maxlength":"12"};c=(d=e.TextInput)?d.call(a,{hash:c}):f.call(a,"TextInput",{hash:c});return b+=g(c)+'\n  </div>\n</div>\n\n<div class="row">\n    <div class="col-xs-24 button-group pull-right text-right">\n        <button id="addButton" class="btn btn-primary action">Create</button>\n        <button id="cancelButton" class="btn btn-default">Cancel</button>\n    </div>\n</div>\n'});return this.HandlebarsTemplates["advisor/add_business"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["advisor/advisor_dashboard"]=Handlebars.template(function(b,a,e,c,d){function f(a,c){var b,d;b="\n";if((d=(d=e.ifBlankBusinessSetting)?d.call(a,"myobCrmId",{hash:{},inverse:n.noop,fn:n.program(2,g,c)}):k.call(a,"ifBlankBusinessSetting","myobCrmId",{hash:{},inverse:n.noop,fn:n.program(2,g,c)}))||0===d)b+=d;return b+"\n"}function g(a,c){var b,d,f;b='\n<div class="row">\n  <div class="col-xs-24">\n    <div class="alert alert-info">\n      Want to keep using your Partner Dashboard?  You need to tell us your Client ID or serial number,\n      or sign up to the MYOB Partner Program. <a href="';
d=a.businessId;d=(f=e.appUrl)?f.call(a,d,"/advisor/verify",{hash:{}}):k.call(a,"appUrl",d,"/advisor/verify",{hash:{}});return b+=m(d)+'">Enter Client ID</a> or <a\n            href="http://community.myob.com/t5/The-MYOB-Essentials-Blog/Partner-Dashboard-housekeeping/ba-p/329863" target="_blank">Learn more.</a>\n    </div>\n  </div>\n</div>\n'}function h(a,c){return'\n    <div class="row" id="partner-banner">\n        <div class="col-xs-24 top-buffer">\n            <div class="banner banner-grey">\n                <div class="row">\n                    <div class="col-xs-2">\n                        <img src="frontend/partner-banner-logo.png" class="banner-logo">\n                    </div>\n                    <div class="col-xs-9 banner-left">\n                        <div class="col-xs-22 banner-header">\n                            <h2>See your MYOB clients online with a powerful, single view dashboard</h2>\n                        </div>\n                        <div class="col-xs-22 banner-content">\n                            <ul>\n                                <li>Quickly access and launch your clients\' online files</li>\n                                <li>Easily set up new clients with MYOB Essentials and AccountRight</li>\n                                <li>Seamless online migration to upgrade your clients</li>\n                                <li>Plus the option to easily add clients who use classic versions of AccountRight</li>\n                            </ul>\n                        </div>\n                        <div class="col-xs-24 banner-footer">\n                            <strong>Want to refer Essentials Payroll? You can only do it from the new dashboard.</strong>\n                        </div>\n                    </div>\n                    <div class="col-xs-7 panel-body text-center top-buffer banner-middle">\n                        <img src="frontend/partner-banner-image.png" class="banner-image">\n                    </div>\n                    <div class="col-xs-1 banner-divider">\n                    </div>\n                    <div class="col-xs-4 panel-body banner-right">\n                        <div>Find out more today</div>\n                        <button id="bannerButton" class="btn btn-primary">Get on board</button>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n'}
e=e||b.helpers;b="";var l,k=e.helperMissing,m=this.escapeExpression,n=this,q=e.blockHelperMissing;if((c=(l=e.ifFeature)?l.call(a,"PARTNER_CLEANUP_VALIDATE_PARTNER",{hash:{},inverse:n.noop,fn:n.program(1,f,d)}):k.call(a,"ifFeature","PARTNER_CLEANUP_VALIDATE_PARTNER",{hash:{},inverse:n.noop,fn:n.program(1,f,d)}))||0===c)b+=c;b+="\n\n";(l=e.ifNz)?c=l.call(a,{hash:{},inverse:n.noop,fn:n.program(4,h,d)}):(c=a.ifNz,c="function"===typeof c?c():c);e.ifNz||(c=q.call(a,c,{hash:{},inverse:n.noop,fn:n.program(4,
h,d)}));if(c||0===c)b+=c;b+='\n\n<div id="pageContentHeader">\n  <div class="row">\n    <div class="col-xs-12">\n      <h1>Partner Dashboard</h1>\n    </div>\n    <div class="col-xs-12 h1-control text-right">\n      <button id="addNewBusiness" class="btn btn-primary">Create a business</button>\n    </div>\n  </div>\n</div>\n<div class="row">\n  <div class="col-xs-8 col-xs-offset-16 filter top-buffer-sm form-horizontal">\n    ';c={inputLabel:"Search:",inputName:"search"};c=(l=e.TextInput)?l.call(a,
{hash:c}):k.call(a,"TextInput",{hash:c});return b+=m(c)+'\n  </div>\n</div>\n\n<div>\n  <div id="table" class="managedBusinesses"></div>\n  <div id="pagination" class="pagination row"></div>\n</div>\n'});return this.HandlebarsTemplates["advisor/advisor_dashboard"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["advisor/advisor_details"]=Handlebars.template(function(b,a,e,c,d){e=e||b.helpers;b="";var f=e.helperMissing,g=this.escapeExpression;c={heading:"Business details"};c=(d=e.includePartial)?d.call(a,"page_heading",{hash:c}):f.call(a,"includePartial","page_heading",{hash:c});b+=g(c)+'\n\n<div id="businessDetails" class="form-horizontal clearfix">\n  <div class="row">\n    <div class="col-xs-12">\n      <div class="form-horizontal">\n        ';
c={inputLabel:"Business name",inputName:"businessName","data-maxlength":"100"};c=(d=e.TextInput)?d.call(a,{hash:c}):f.call(a,"TextInput",{hash:c});return b+=g(c)+'\n      </div>\n    </div>\n  </div>\n\n  <div class="row">\n    <div class="addresses"></div>\n  </div>\n\n  <div class="row top-buffer">\n    <div class="col-xs-24 text-right">\n      <button id="saveBusinessDetails" class="btn btn-primary action">Save</button>\n    </div>\n  </div>\n</div>\n'});return this.HandlebarsTemplates["advisor/advisor_details"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["advisor/business_invitations"]=Handlebars.template(function(b,a,e,c,d){return'<div id="pageContentHeader">\n  <div class="row">\n    <div class="col-xs-14">\n      <h1 >Invitations</h1>\n    </div>\n    <div class="col-xs-10 h1-control text-right">\n      <button id="inviteBusinessButton" class="btn btn-primary">Invite a business</button>\n    </div>\n\n  </div>\n  <div class="row overview-container">\n    <div class="col-xs-24">\n      <p class="overview">Here\'s a list of businesses you\'ve invited to use MYOB Essentials, who haven\'t accepted or declined your invitation.</p>\n    </div>\n  </div>\n</div>\n<div>\n  <div class="businessInvitations">\n  </div>\n  <div id="pagination" class="pagination row"></div>\n</div>\n'});
return this.HandlebarsTemplates["advisor/business_invitations"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["advisor/businessinvitations_row"]=Handlebars.template(function(b,a,e,c,d){e=e||b.helpers;var f=this.escapeExpression,g=e.helperMissing;b='<div class="itemContent">\n  <div class="row">\n    <div class="col-xs-8 sentDetails">\n      <div class="subtext">Sent to</div>\n      <div>';(d=e.email)?c=d.call(a,{hash:{}}):(c=a.email,c="function"===typeof c?c():c);b+=f(c)+'</div>\n      <div class="subtext">on ';c=
a.dateIssued;c=(d=e.frontendDateTimeFormat)?d.call(a,c,{hash:{}}):g.call(a,"frontendDateTimeFormat",c,{hash:{}});b+=f(c)+'</div>\n    </div>\n    <div class="col-xs-10 businessName">\n      <div class="subtext">Business name</div>\n      <div>';(d=e.businessName)?c=d.call(a,{hash:{}}):(c=a.businessName,c="function"===typeof c?c():c);return b+=f(c)+'</div>\n    </div>\n    <div class="col-xs-4 actions">\n      <button class="btn btn-default resendInvitation">Resend invite</button>\n    </div>\n    <div class="col-xs-2 delete text-right">\n      <i class="fa fa-times-circle fa-2x deleteButton"></i>\n    </div>\n  </div>\n</div>\n'});
return this.HandlebarsTemplates["advisor/businessinvitations_row"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["advisor/cancel_handover_message"]=Handlebars.template(function(b,a,e,c,d){e=e||b.helpers;c=this.escapeExpression;b='<p class="message"><strong>';(d=e.message)?d=d.call(a,{hash:{}}):(d=a.message,d="function"===typeof d?d():d);b+=c(d)+'</strong></p>\n<p class="explanation">';(d=e.explanation)?d=d.call(a,{hash:{}}):(d=a.explanation,d="function"===typeof d?d():d);return b+=c(d)+"</p>\n"});return this.HandlebarsTemplates["advisor/cancel_handover_message"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["advisor/handover_business"]=Handlebars.template(function(b,a,e,c,d){e=e||b.helpers;var f=this.escapeExpression,g=e.helperMissing;b='<td colspan="6">\n  <div id="childOfHandoverBusinessForm" class="slidable">\n  <h3>Transfer ownership of ';(d=e.businessName)?c=d.call(a,{hash:{}}):(c=a.businessName,c="function"===typeof c?c():c);b+=f(c)+'</h3>\n  <p>Enter the name and the email address of the person who will be the administrator of this MYOB Essentials account.</p>\n\n  <div class="row">\n    <div class="col-xs-6">\n      <label for="firstName">First name</label>\n    </div>\n    <div class="col-xs-6">\n      <label for="lastName">Last name</label>\n    </div>\n    <div class="col-xs-6">\n      <label for="email">Email</label>\n    </div>\n    <div class="col-xs-6">\n      <label for="confirmEmail">Confirm email</label>\n    </div>\n  </div>\n\n  <div class="row">\n    <div class="col-xs-6">\n      ';
c={inputName:"firstName",widgetCssClass:"","data-maxlength":"50"};c=(d=e.TextInput)?d.call(a,{hash:c}):g.call(a,"TextInput",{hash:c});b+=f(c)+'\n    </div>\n\n    <div class="col-xs-6">\n      ';c={inputName:"lastName",widgetCssClass:"","data-maxlength":"50"};c=(d=e.TextInput)?d.call(a,{hash:c}):g.call(a,"TextInput",{hash:c});b+=f(c)+'\n    </div>\n\n    <div class="col-xs-6">\n      ';c={inputName:"email",widgetCssClass:""};c=(d=e.TextInput)?d.call(a,{hash:c}):g.call(a,"TextInput",{hash:c});b+=f(c)+
'\n    </div>\n\n    <div class="col-xs-6">\n      ';c={inputName:"confirmEmail",widgetCssClass:""};c=(d=e.TextInput)?d.call(a,{hash:c}):g.call(a,"TextInput",{hash:c});return b+=f(c)+'\n    </div>\n  </div>\n  <div class="row">\n    <div class="col-xs-24 text-right">\n      <button id="handoverButton" class="btn btn-primary action">Begin transfer</button>\n      <button id="cancelButton" class="btn btn-default">Cancel</button>\n    </div>\n  </div>\n  </div>\n</td>\n'});return this.HandlebarsTemplates["advisor/handover_business"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["advisor/invite_business"]=Handlebars.template(function(b,a,e,c,d){e=e||b.helpers;var f=this.escapeExpression,g=e.helperMissing;b="<h3>\n  ";c=a.id;if((c=e["if"].call(a,c,{hash:{},inverse:this.program(3,function(a,c){return"\n    Invite a business\n  "},d),fn:this.program(1,function(a,c){return"\n    Resend invite\n  "},d)}))||0===c)b+=c;b+='\n</h3>\n\n<p class="overview">\n  ';c=a.id;if((c=e["if"].call(a,
c,{hash:{},inverse:this.program(7,function(a,c){var b,d;b='\n    If you have a client you think would love MYOB Essentials, invite them to sign up for a trial.\n    Want to know more? <a id="partnerResourcesUrl" href="';(d=e.partnerResourcesUrl)?d=d.call(a,{hash:{}}):(d=a.partnerResourcesUrl,d="function"===typeof d?d():d);return b+=f(d)+'" target="_blank">Here\'s everything you need to know about being a Partner</a></p>\n  '},d),fn:this.program(5,function(a,c){return"\n    Enter your client\u2019s details to resend the invite\n  "},
d)}))||0===c)b+=c;b+='\n\n<div class="row">\n  <div class="col-xs-8">\n      <label for="email">Email</label>\n  </div>\n  <div class="col-xs-8">\n    <label for="confirmEmail">Confirm email</label>\n  </div>\n  <div class="col-xs-8">\n    <label for="businessName">Business name</label>\n  </div>\n</div>\n<div class="row">\n  <div class="col-xs-8">\n    ';c={inputName:"email",widgetCssClass:"","data-maxlength":"255"};c=(d=e.TextInput)?d.call(a,{hash:c}):g.call(a,"TextInput",{hash:c});b+=f(c)+'\n  </div>\n  <div class="col-xs-8">\n    ';
c={inputName:"confirmEmail",widgetCssClass:"","data-maxlength":"255"};c=(d=e.TextInput)?d.call(a,{hash:c}):g.call(a,"TextInput",{hash:c});b+=f(c)+'\n  </div>\n  <div class="col-xs-8">\n    ';c={inputName:"businessName",widgetCssClass:"","data-maxlength":"50"};c=(d=e.TextInput)?d.call(a,{hash:c}):g.call(a,"TextInput",{hash:c});return b+=f(c)+'\n  </div>\n</div>\n<div class="row">\n  <div class="col-xs-24 text-right">\n    <button id="inviteButton" class="btn btn-primary action">Invite</button>\n    <button id="cancelButton" class="btn btn-default">Cancel</button>\n  </div>\n</div>\n'});
return this.HandlebarsTemplates["advisor/invite_business"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["advisor/managedbusiness_header"]=Handlebars.template(function(b,a,e,c,d){return'<tr>\n  <th data-field="businessName" class="nameCol asc">Name<i class="fa fa-caret-up"></i></th>\n  <th data-field="hasBankFeeds" class="smallCol">Bank feeds</th>\n  <th data-field="registeredForGST" class="smallCol">GST status</th>\n  <th data-field="status">Status</th>\n  <th data-field="bulkPurchase">Bureau</th>\n  <th class="actionCol"></th>\n  <th></th>\n</tr>\n'});return this.HandlebarsTemplates["advisor/managedbusiness_header"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["advisor/managedbusiness_row"]=Handlebars.template(function(b,a,e,c,d){function f(a,c){var b,d;b="\n    ";(d=e.businessName)?d=d.call(a,{hash:{}}):(d=a.businessName,d="function"===typeof d?d():d);return b+=A(d)+"\n  "}function g(a,c){var b,d,f;b='\n    <a href="';d=a.id;d=(f=e.appUrl)?f.call(a,d,"/home",{hash:{}}):B.call(a,"appUrl",d,"/home",{hash:{}});b+=A(d)+'">';(f=e.businessName)?d=f.call(a,{hash:{}}):
(d=a.businessName,d="function"===typeof d?d():d);return b+=A(d)+"</a>\n  "}function h(a,c){return'<div class="smallLoadingSpinner"></div>'}function l(a,c){return"Not registered"}function k(a,c){return"Registered"}function m(a,c){return"Not registered"}function n(a,c){var b,d,f;b="\n    <div>Ownership pending</div>\n    <div><small>(";d=a.handoverInvitation;d=null==d||!1===d?d:d.dateIssued;d=(f=e.frontendDateFormat)?f.call(a,d,{hash:{}}):B.call(a,"frontendDateFormat",d,{hash:{}});b+=A(d)+") ";(f=e.email)?
d=f.call(a,{hash:{}}):(d=a.email,d="function"===typeof d?d():d);b+=A(d)+"</small></div>\n    ";d=a.suspensionDateForNotHandoveredBusiness;if((d=(f=e.unlessBlank)?f.call(a,d,{hash:{},inverse:C.noop,fn:C.program(14,q,c)}):B.call(a,"unlessBlank",d,{hash:{},inverse:C.noop,fn:C.program(14,q,c)}))||0===d)b+=d;return b+"\n  "}function q(a,c){var b,d,f;b='\n        <div class="label default sml orange">\n                Transfer ownership by ';d=a.suspensionDateForNotHandoveredBusiness;d=(f=e.frontendDateFormat)?
f.call(a,d,{hash:{}}):B.call(a,"frontendDateFormat",d,{hash:{}});return b+=A(d)+" <br>or this business will be suspended.\n        </div>\n    "}function p(a,c){var b,d,f;b="\n    ";d=a.suspensionDateForNotHandoveredBusiness;if((d=(f=e.unlessBlank)?f.call(a,d,{hash:{},inverse:C.noop,fn:C.program(17,t,c)}):B.call(a,"unlessBlank",d,{hash:{},inverse:C.noop,fn:C.program(17,t,c)}))||0===d)b+=d;return b+"\n  "}function t(a,c){var b,d,f;b='\n        <div class="label default sml orange">\n                Transfer ownership by ';
d=a.suspensionDateForNotHandoveredBusiness;d=(f=e.frontendDateFormat)?f.call(a,d,{hash:{}}):B.call(a,"frontendDateFormat",d,{hash:{}});return b+=A(d)+" <br>or this business will be suspended.\n        </div>\n    "}function r(a,c){return"Trial"}function u(a,c){return"Active"}function v(a,c){return"Suspended"}function z(a,c){return"Cancelled"}function y(a,c){return'<div class="glyphicon glyphicon-ok" />'}function D(a,c){return'\n  <button class="btn btn-default btn-sm handoverManagedBusiness">Transfer ownership</button>\n  '}
function F(a,c){return'\n  <div class="btn-group">\n    <button id="save" class="btn btn-default btn-sm resendHandoverInvitation action">Resend transfer</button>\n    <button id="saveDropdown" type="button" class="btn btn-default btn-sm dropdown-toggle action" data-toggle="dropdown">\n        <span class="caret"></span>\n        <span class="sr-only">Toggle Dropdown</span>\n    </button>\n    <ul class="dropdown-menu" role="menu">\n      <li><a class="resendHandoverInvitation">Resend transfer</a></li>\n      <li><a class="cancelHandoverInvitation">Cancel transfer</a></li>\n    </ul>\n  </div>\n  '}
e=e||b.helpers;var w,A=this.escapeExpression,B=e.helperMissing,C=this;b='<td class="name">\n  ';c=a.status;if((c=(w=e.ifEqual)?w.call(a,c,"CANCELLED",{hash:{},inverse:C.program(3,g,d),fn:C.program(1,f,d)}):B.call(a,"ifEqual",c,"CANCELLED",{hash:{},inverse:C.program(3,g,d),fn:C.program(1,f,d)}))||0===c)b+=c;b+='\n</td>\n\n<td class="unallocatedTransactionCount">';c=a.hasBankFeeds;if((c=(w=e.ifEqual)?w.call(a,c,!0,{hash:{},inverse:C.program(7,l,d),fn:C.program(5,h,d)}):B.call(a,"ifEqual",c,!0,{hash:{},
inverse:C.program(7,l,d),fn:C.program(5,h,d)}))||0===c)b+=c;b+='</td>\n<td class="gstStatus">';c=a.registeredForGST;if((c=(w=e.ifEqual)?w.call(a,c,!0,{hash:{},inverse:C.program(11,m,d),fn:C.program(9,k,d)}):B.call(a,"ifEqual",c,!0,{hash:{},inverse:C.program(11,m,d),fn:C.program(9,k,d)}))||0===c)b+=c;b+='</td>\n\n<td class="status">\n\n  ';c=a.status;if((c=(w=e.ifEqual)?w.call(a,c,"HANDOVER",{hash:{},inverse:C.noop,fn:C.program(13,n,d)}):B.call(a,"ifEqual",c,"HANDOVER",{hash:{},inverse:C.noop,fn:C.program(13,
n,d)}))||0===c)b+=c;b+="\n  ";c=a.status;if((c=(w=e.ifEqual)?w.call(a,c,"PREHANDOVER",{hash:{},inverse:C.noop,fn:C.program(16,p,d)}):B.call(a,"ifEqual",c,"PREHANDOVER",{hash:{},inverse:C.noop,fn:C.program(16,p,d)}))||0===c)b+=c;b+="\n  ";c=a.status;if((c=(w=e.ifEqual)?w.call(a,c,"TRIAL",{hash:{},inverse:C.noop,fn:C.program(19,r,d)}):B.call(a,"ifEqual",c,"TRIAL",{hash:{},inverse:C.noop,fn:C.program(19,r,d)}))||0===c)b+=c;b+="\n  ";c=a.status;if((c=(w=e.ifEqual)?w.call(a,c,"ACTIVE",{hash:{},inverse:C.noop,
fn:C.program(21,u,d)}):B.call(a,"ifEqual",c,"ACTIVE",{hash:{},inverse:C.noop,fn:C.program(21,u,d)}))||0===c)b+=c;b+="\n  ";c=a.status;if((c=(w=e.ifEqual)?w.call(a,c,"SUSPENDED",{hash:{},inverse:C.noop,fn:C.program(23,v,d)}):B.call(a,"ifEqual",c,"SUSPENDED",{hash:{},inverse:C.noop,fn:C.program(23,v,d)}))||0===c)b+=c;b+="\n  ";c=a.status;if((c=(w=e.ifEqual)?w.call(a,c,"CANCELLED",{hash:{},inverse:C.noop,fn:C.program(25,z,d)}):B.call(a,"ifEqual",c,"CANCELLED",{hash:{},inverse:C.noop,fn:C.program(25,
z,d)}))||0===c)b+=c;b+='\n</td>\n\n<td class="paid text-center">';c=a.bulkPurchase;if((c=(w=e.ifEqual)?w.call(a,c,!0,{hash:{},inverse:C.noop,fn:C.program(27,y,d)}):B.call(a,"ifEqual",c,!0,{hash:{},inverse:C.noop,fn:C.program(27,y,d)}))||0===c)b+=c;b+='</td>\n\n<td class="actions">\n  ';c=a.status;if((c=(w=e.ifEqual)?w.call(a,c,"PREHANDOVER",{hash:{},inverse:C.noop,fn:C.program(29,D,d)}):B.call(a,"ifEqual",c,"PREHANDOVER",{hash:{},inverse:C.noop,fn:C.program(29,D,d)}))||0===c)b+=c;b+="\n  ";c=a.status;
if((c=(w=e.ifEqual)?w.call(a,c,"HANDOVER",{hash:{},inverse:C.noop,fn:C.program(31,F,d)}):B.call(a,"ifEqual",c,"HANDOVER",{hash:{},inverse:C.noop,fn:C.program(31,F,d)}))||0===c)b+=c;return b+'\n</td>\n\n<td><i class="fa fa-times-circle fa-2x clickable deleteButton"></i></td>\n'});return this.HandlebarsTemplates["advisor/managedbusiness_row"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["advisor/verify_advisor"]=Handlebars.template(function(b,a,e,c,d){function f(a,c){return'\n        <a href="http://myob.com.au/partners-1258090781421" id="partnerProgramLink" target="_blank"> Sign up to MYOB Partner Program.</a>\n      '}function g(a,c){return'\n        <a href="http://myob.co.nz/partners-1257828257232" id="partnerProgramLink" target="_blank"> Sign up to MYOB Partner Program.</a>\n      '}
e=e||b.helpers;var h,l=e.helperMissing,k=this.escapeExpression,m=e.blockHelperMissing;b='<div class="row top-buffer">\n  <div class="col-xs-12 col-xs-offset-6">\n    <div id="verifyNotification"></div>\n    <p>\n      Soon, the Partner Dashboard will only be available to members of the MYOB Partner program.\n    </p>\n    <p>\n      If you\u2019re a Partner, enter your\n      <a href="http://help.myob.com/wiki/x/AoA3" id="findClientIdSupportLink" target="_blank">Client ID</a>\n      or\n      <a href="http://help.myob.com/wiki/x/AoA3" id="findClientIdSupportLink" target="_blank">serial number</a>\n      below. You\u2019ll only need to do this once. This will make sure your my.MYOB referrals and bulk purchases appear on your Partner Dashboard, and you\u2019ll get access to a range of new add-ons for MYOB Essentials.\n    </p>\n  </div>\n</div>\n<div class="row">\n  <div class="col-xs-12 col-xs-offset-6">\n    <div class="col-8">\n      ';
c={"data-placeholder":"Serial Number or Client ID",inputName:"clientCrmIdOrSerialNumber","data-maxlength":"12","data-valid-regex":"[\\d]$",style:"padding-left: 0px; padding-right: 0px;"};c=(h=e.RegexInput)?h.call(a,{hash:c}):l.call(a,"RegexInput",{hash:c});b+=k(c)+'\n    </div>\n    <div class="col-xs-4">\n      <button id="continueButton" class="btn btn-primary action">Continue</button>\n    </div>\n  </div>\n</div>\n<div class="row">\n  <div class="col-xs-12 col-xs-offset-6 top-buffer">\n    <p>\n      If you\u2019re not a MYOB Partner, sign up within the next 30 days to keep accessing your Partner Dashboard. If you don\u2019t sign up, you\u2019ll still have access to your clients\u2019 businesses, but you won\u2019t have a Partner Dashboard.\n      ';
(h=e.ifAu)?c=h.call(a,{hash:{},inverse:this.program(3,g,d),fn:this.program(1,f,d)}):(c=a.ifAu,c="function"===typeof c?c():c);e.ifAu||(c=m.call(a,c,{hash:{},inverse:this.program(3,g,d),fn:this.program(1,f,d)}));if(c||0===c)b+=c;return b+'\n    </p>\n  </div>\n</div>\n<div class="row top-buffer-lg">\n  <div class="col-xs-12 col-xs-offset-6 text-center">\n    <a href="" id="demotePartner">I\'m not a Partner and don\'t want to become one.</a>\n  </div>\n</div>\n'});return this.HandlebarsTemplates["advisor/verify_advisor"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["advisor/verify_advisor_invalid"]=Handlebars.template(function(b,a,e,c,d){return"verify_advisor_invalid\n"});return this.HandlebarsTemplates["advisor/verify_advisor_invalid"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["advisor/verify_advisor_main"]=Handlebars.template(function(b,a,e,c,d){return'<div id="verifyAdvisor"></div>\n<div id="verifyAdvisorInvalid" style="display: none"></div>\n'});return this.HandlebarsTemplates["advisor/verify_advisor_main"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["banking/bank_details"]=Handlebars.template(function(b,a,e,c,d){function f(a,c){var b,d,f;b='\n    <div class="col-xs-4">\n      ';d={inputLabel:"BSB",inputName:"bankAccount.bsb",labelCssClass:"",widgetCssClass:"","data-maxlength":"6"};d=(f=e.TextInput)?f.call(a,{hash:d}):l.call(a,"TextInput",{hash:d});b+=k(d)+'\n    </div>\n    <div class="col-xs-8">\n      ';d={inputLabel:"",inputName:"bankAccount.accountNumber",
labelCssClass:"",widgetCssClass:"","data-maxlength":"10"};d=(f=e.TextInput)?f.call(a,{hash:d}):l.call(a,"TextInput",{hash:d});return b+=k(d)+"\n    </div>\n  "}function g(a,c){var b,d,f;b='\n    <div class="col-xs-2 dashed dash-after smaller-left-padding">\n      ';d={inputLabel:"Bank",inputName:"bankAccount.bsbBank",labelCssClass:"",widgetCssClass:"","data-maxlength":"2"};d=(f=e.TextInput)?f.call(a,{hash:d}):l.call(a,"TextInput",{hash:d});b+=k(d)+'\n    </div>\n    <div class="col-xs-3 dashed dash-after smaller-left-padding">\n      ';
d={inputLabel:"Branch",inputName:"bankAccount.bsbBranch",labelCssClass:"",widgetCssClass:"","data-maxlength":"4"};d=(f=e.TextInput)?f.call(a,{hash:d}):l.call(a,"TextInput",{hash:d});b+=k(d)+'\n    </div>\n    <div class="col-xs-4 dashed dash-after smaller-left-padding">\n      ';d={inputLabel:"Account",inputName:"bankAccount.accountNumber",labelCssClass:"",widgetCssClass:"","data-maxlength":"17"};d=(f=e.TextInput)?f.call(a,{hash:d}):l.call(a,"TextInput",{hash:d});b+=k(d)+'\n    </div>\n    <div class="col-xs-3 smaller-left-padding">\n      ';
d={inputLabel:"Suffix",inputName:"bankAccount.accountSuffix",labelCssClass:"",widgetCssClass:"","data-maxlength":"3"};d=(f=e.TextInput)?f.call(a,{hash:d}):l.call(a,"TextInput",{hash:d});return b+=k(d)+"\n    </div>\n  "}e=e||b.helpers;var h,l=e.helperMissing,k=this.escapeExpression,m=e.blockHelperMissing;b='<h4>Bank details</h4>\n\n<div class="row">\n  <div class="col-xs-12">\n    ';c={inputLabel:"Account name",inputName:"bankAccount.accountName",labelCssClass:"",widgetCssClass:"","data-maxlength":"100"};
c=(h=e.TextInput)?h.call(a,{hash:c}):l.call(a,"TextInput",{hash:c});b+=k(c)+"\n  </div>\n  ";(h=e.ifAu)?c=h.call(a,{hash:{},inverse:this.program(3,g,d),fn:this.program(1,f,d)}):(c=a.ifAu,c="function"===typeof c?c():c);e.ifAu||(c=m.call(a,c,{hash:{},inverse:this.program(3,g,d),fn:this.program(1,f,d)}));if(c||0===c)b+=c;b+='\n</div>\n\n<div class="row">\n  <div class="col-xs-12">\n    ';c={inputLabel:"Account type",inputName:"bankAccount.accountType",labelCssClass:"",widgetCssClass:"","data-maxlength":"100"};
c=(h=e.TextInput)?h.call(a,{hash:c}):l.call(a,"TextInput",{hash:c});b+=k(c)+'\n  </div>\n\n  <div class="col-xs-12">\n    ';c={inputLabel:"Branch name",inputName:"bankAccount.branchName",labelCssClass:"",widgetCssClass:"","data-maxlength":"100"};c=(h=e.TextInput)?h.call(a,{hash:c}):l.call(a,"TextInput",{hash:c});return b+=k(c)+'\n  </div>\n</div>\n\n<div class="row">\n  <div class="col-xs-24 notes"><small></small></div>\n</div>\n'});return this.HandlebarsTemplates["banking/bank_details"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["banking/bank_feed_signup"]=Handlebars.template(function(b,a,e,c,d){e=e||b.helpers;var f=e.helperMissing,g=this.escapeExpression;b='<div class="row">\n  <div class="col-xs-24">\n    <h3>Add a bank feed</h3>\n    <hr />\n  </div>\n</div>\n\n<div id="financial-institution-container" class="row">\n  <div class="col-xs-14">\n    <div class="row form-horizontal">\n      <div class="col-xs-9 control-label">Type</div>\n      <div class="col-xs-15">\n        ';
c={inputLabel:"Bank account",inputId:"typeBank",inputName:"type",inputValue:"Trading Account",widgetCssClass:"col-xs-24"};c=(d=e.Radio)?d.call(a,{hash:c}):f.call(a,"Radio",{hash:c});b+=g(c)+'\n      </div>\n    </div>\n\n    <div class="row form-horizontal">\n      <div class="col-xs-15 col-xs-offset-9">\n        ';c={inputLabel:"Credit card account",inputId:"typeCredit",inputName:"type",inputValue:"BankFeed Credit Card Account",widgetCssClass:"col-xs-24"};c=(d=e.Radio)?d.call(a,{hash:c}):f.call(a,
"Radio",{hash:c});b+=g(c)+'\n      </div>\n    </div>\n\n    <div class="form-horizontal">\n      ';c={inputLabel:"Bank/Financial institution",inputName:"financialInstitutionId","data-collection":"banks","data-labels":"description","data-value-field":"id","data-placeholder":"Select a financial institution",labelCssClass:"col-xs-9",widgetCssClass:"col-xs-15"};c=(d=e.TypeaheadDropdown)?d.call(a,{hash:c}):f.call(a,"TypeaheadDropdown",{hash:c});b+=g(c)+'\n    </div>\n\n    <div class="row form-horizontal application-method-online hidden">\n      <div class="col-xs-9 control-label">Application method</div>\n      <div class="col-xs-7">\n        ';
c={inputLabel:"Online through my bank",inputId:"applicationMethodOnline",inputName:"applicationMethod",inputValue:"ONLINE",widgetCssClass:"col-xs-24"};c=(d=e.Radio)?d.call(a,{hash:c}):f.call(a,"Radio",{hash:c});b+=g(c)+'\n      </div>\n      <div class="col-xs-8 application-method-help">\n        <i class="myob-icon-due-date"></i> <span>a few days</span>\n      </div>\n    </div>\n\n    <div class="row form-horizontal application-method-paper hidden">\n      <div class="col-xs-9 control-label">Application method</div>\n      <div class="col-xs-7">\n        ';
c={inputLabel:"Print and post to MYOB",inputId:"applicationMethodPaper",inputName:"applicationMethod",inputValue:"PAPER",widgetCssClass:"col-xs-24"};c=(d=e.Radio)?d.call(a,{hash:c}):f.call(a,"Radio",{hash:c});return b+=g(c)+'\n      </div>\n      <div class="col-xs-8 application-method-help">\n        <i class="fa fa-calendar"></i> <span> two to three weeks</span>\n      </div>\n    </div>\n  </div>\n  <div class="col-xs-9 col-xs-offset-1">\n    <div id="bank-feed-application-help" class="pull-right">\n      <div class="col-xs-2"><i class="icon-notice text-muted"></i></div>\n      <div class="col-xs-22">\n          <h4>How long till I\'m up and running? </h4>\n\n          <p>If your bank offers it, you can get set up in a few days by applying online through your internet banking\n            portal. Otherwise, paper applications take 2-3 weeks to authorise.\n          </p>\n          <p>\n            Can\'t see your financial institution? <a id="let-us-know-link">Let us know</a>\n          </p>\n      </div>\n    </div>\n  </div>\n</div>\n\n<div id="bank-details-container" class="panel panel-gray hidden"></div>\n<div id="credit-card-details-container" class="panel panel-gray hidden"></div>\n\n<hr />\n\n<div id="submit-actions">\n  <div class="row" id="accept-terms-container">\n    <div class="col-xs-16">\n      <div class="form-group">\n        <div class="form-control-wrapper">\n          <span data-id="acceptedTerms" data-widget="Checkbox" data-name="acceptedTerms"></span>\n          <label for="acceptedTerms">I declare that:</label>\n          <ul style="margin-left:32px;">\n            <li>I am authorised to submit this application on behalf of the business that operates the nominated bank account, either as a signatory of the bank account or under express authority of the signatory(s); and</li>\n            <li>I have read and accepted "Section 4. Bankfeeds" on page 4 of the Essentials <a href="http://myob.com/essentials-terms" target="_blank">terms of use</a>.</li>\n          </ul>\n        </div>\n      </div>\n    </div>\n    <div class="col-xs-8 button-group pull-right text-right">\n      <button id="apply-button" name="apply-button" class="btn btn-primary action">Apply for bank feed</button>\n      <button id="cancel-button" name="cancel-button" class="btn btn-default">Cancel</button>\n    </div>\n  </div>\n</div>\n'});
return this.HandlebarsTemplates["banking/bank_feed_signup"]}).call(this);(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["banking/bank_feed_signup_container"]=Handlebars.template(function(b,a,e,c,d){return'<div class="panel-body">\n  <div id="bank-feed-signup"></div>\n  <div id="bank-feed-signup-readonly" class="hidden"></div>\n</div>\n'});return this.HandlebarsTemplates["banking/bank_feed_signup_container"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["banking/bank_feed_signup_readonly"]=Handlebars.template(function(b,a,e,c,d){function f(a,c){return'\n    <div class="col-xs-12">\n      <h3>Confirm your details</h3>\n      <hr />\n    </div>\n    <div class="col-xs-12">\n      <h3>Next steps</h3>\n      <hr />\n    </div>\n  '}function g(a,c){return'\n    <div class="col-xs-24">\n      <h3>Set up bank feed</h3>\n      <hr />\n    </div>\n  '}function h(a,
c){var b,d;b='\n      <div class="row">\n        <div class="col-xs-24">\n          <p>Finish your bank feed application by logging in to your online banking system and activating the bank feed.\n          <a href="http://help.myob.com/wiki/x/C4IR" target="_blank">See how</a>\n          </p>\n          <p>You may need this MYOB bank feed reference number: </p>\n        </div>\n      </div>\n      <div class="panel panel-default" id="online-application-reference">\n        <div class="panel-body">\n          ';
d=a.bankFeed;d=null==d||!1===d?d:d.businessReferenceNumber;if((d=e["if"].call(a,d,{hash:{},inverse:t.noop,fn:t.program(12,l,c)}))||0===d)b+=d;b+="\n          ";d=a.refCode;if((d=e["if"].call(a,d,{hash:{},inverse:t.noop,fn:t.program(14,k,c)}))||0===d)b+=d;return b+'\n        </div>\n      </div>\n\n      <div class="row col-xs-24">\n        <p>Copy or write down this number before continuing to online banking.</p>\n      </div>\n    '}function l(a,c){var b,e;b="\n            <strong>";e=a.bankFeed;
e=null==e||!1===e?e:e.businessReferenceNumber;e="function"===typeof e?e():e;return b+=p(e)+"</strong>\n          "}function k(a,c){var b,d;b="\n            <strong>";(d=e.refCode)?d=d.call(a,{hash:{}}):(d=a.refCode,d="function"===typeof d?d():d);return b+=p(d)+"</strong>\n          "}function m(a,c){return'\n  <div id="continue-actions">\n    <div class="row">\n      <div class="col-xs-12 button-group pull-right text-right">\n        <button id="close-button" name="close-button" class="btn btn-default">Cancel</button>\n        <button id="continue-button" name="continue-button" class="btn btn-primary action">Go to online banking</button>\n      </div>\n    </div>\n  </div>\n'}
function n(a,c){return'\n  <div id="print-actions">\n    <div class="row">\n      <div class="col-xs-12 button-group pull-right text-right">\n        <button id="print-button" name="print-button" class="btn btn-primary action">Print application form</button>\n        <button id="close-button" name="close-button" class="btn btn-default">Close</button>\n      </div>\n    </div>\n  </div>\n'}e=e||b.helpers;var q,p=this.escapeExpression,t=this,r=e.helperMissing;b='<div class="row">\n  ';c=a.applicationMethod;
if((c=(q=e.ifEqual)?q.call(a,c,"ONLINE",{hash:{},inverse:t.program(3,g,d),fn:t.program(1,f,d)}):r.call(a,"ifEqual",c,"ONLINE",{hash:{},inverse:t.program(3,g,d),fn:t.program(1,f,d)}))||0===c)b+=c;b+='\n</div>\n\n<div class="row" id="signup-details">\n  <div class="col-xs-12">\n    <div class="row">\n      <div class="col-xs-7 control-label subtext text-right">Bank</div>\n      <div class="col-xs-17">';(q=e.bankName)?c=q.call(a,{hash:{}}):(c=a.bankName,c="function"===typeof c?c():c);b+=p(c)+"</div>\n    </div>\n    ";
c=a.accountName;if((c=e["if"].call(a,c,{hash:{},inverse:t.noop,fn:t.program(5,function(a,c){var b,d;b='\n      <div class="row">\n        <div class="col-xs-7 control-label subtext text-right">Account name</div>\n        <div class="col-xs-17">';(d=e.accountName)?d=d.call(a,{hash:{}}):(d=a.accountName,d="function"===typeof d?d():d);return b+=p(d)+"</div>\n      </div>\n    "},d)}))||0===c)b+=c;b+="\n    ";c=a.accountNumber;if((c=e["if"].call(a,c,{hash:{},inverse:t.noop,fn:t.program(7,function(a,c){var b,
d;b='\n      <div class="row">\n        <div class="col-xs-7 control-label subtext text-right">Account number</div>\n        <div class="col-xs-17">';(d=e.accountNumber)?d=d.call(a,{hash:{}}):(d=a.accountNumber,d="function"===typeof d?d():d);return b+=p(d)+"</div>\n      </div>\n    "},d)}))||0===c)b+=c;b+="\n    ";c=a.onlineApplication;if((c=e["if"].call(a,c,{hash:{},inverse:t.noop,fn:t.program(9,function(a,c){var b,d;b='\n      <div class="row col-xs-24 post-application-helper">\n        <strong>Where is my bank feed?</strong>\n        <br/>\n        <small>Bank feeds from ';
(d=e.bankName)?d=d.call(a,{hash:{}}):(d=a.bankName,d="function"===typeof d?d():d);return b+=p(d)+" won't appear in the list below until you've activated it in your online banking\n          system and the bank feed has been confirmed by your bank. This usually takes a few days.</small>\n      </div>\n    "},d)}))||0===c)b+=c;b+='\n  </div>\n  <div class="col-xs-12">\n    ';c=a.applicationMethod;if((c=(q=e.ifEqual)?q.call(a,c,"ONLINE",{hash:{},inverse:t.noop,fn:t.program(11,h,d)}):r.call(a,"ifEqual",
c,"ONLINE",{hash:{},inverse:t.noop,fn:t.program(11,h,d)}))||0===c)b+=c;b+="\n  </div>\n</div>\n\n<hr />\n\n";c=a.applicationMethod;if((c=(q=e.ifEqual)?q.call(a,c,"ONLINE",{hash:{},inverse:t.program(18,n,d),fn:t.program(16,m,d)}):r.call(a,"ifEqual",c,"ONLINE",{hash:{},inverse:t.program(18,n,d),fn:t.program(16,m,d)}))||0===c)b+=c;return b+"\n"});return this.HandlebarsTemplates["banking/bank_feed_signup_readonly"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["banking/bank_feed_signup_unable"]=Handlebars.template(function(b,a,e,c,d){function f(a,c){return"1300 555 123"}function g(a,c){return"0508 328 283"}function h(a,c){return"1300 555 123"}function l(a,c){return"0508 328 283"}e=e||b.helpers;var k=this,m=e.blockHelperMissing;b='<div class="panel-body">\n  <h3>Set up bank feed<feed></feed></h3>\n  ';c=a.invalidSetupForValidBusiness;if((c=e["if"].call(a,c,{hash:{},
inverse:k.program(6,function(a,c){var b,d;b="\n      <p>Sorry, you can't sign up for bank feeds right now. Contact our support team on ";(d=e.ifAu)?d=d.call(a,{hash:{},inverse:k.program(9,l,c),fn:k.program(7,h,c)}):(d=a.ifAu,d="function"===typeof d?d():d);e.ifAu||(d=m.call(a,d,{hash:{},inverse:k.program(9,l,c),fn:k.program(7,h,c)}));if(d||0===d)b+=d;return b+".</p>\n  "},d),fn:k.program(1,function(a,c){var b,d;b="\n      <p>Sorry, something went wrong. Try again in a few minutes. If it keeps happening, get in touch with our support team on ";
(d=e.ifAu)?d=d.call(a,{hash:{},inverse:k.program(4,g,c),fn:k.program(2,f,c)}):(d=a.ifAu,d="function"===typeof d?d():d);e.ifAu||(d=m.call(a,d,{hash:{},inverse:k.program(4,g,c),fn:k.program(2,f,c)}));if(d||0===d)b+=d;return b+".</p>\n  "},d)}))||0===c)b+=c;return b+'\n  <div class="row">\n    <div class="col-xs-12 button-group pull-right text-right">\n      <button id="close-button" name="close-button" class="btn btn-primary">Close</button>\n    </div>\n  </div>\n</div>\n'});return this.HandlebarsTemplates["banking/bank_feed_signup_unable"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["banking/credit_card_details"]=Handlebars.template(function(b,a,e,c,d){e=e||b.helpers;var f=e.helperMissing,g=this.escapeExpression;b='<h4>Credit card details</h4>\n\n<div class="row">\n  <div class="col-xs-12">\n    ';c={inputLabel:"Name on card",inputName:"creditCardAccount.nameOnCard",labelCssClass:"",widgetCssClass:"","data-maxlength":"100"};c=(d=e.TextInput)?d.call(a,{hash:c}):f.call(a,"TextInput",{hash:c});
b+=g(c)+'\n  </div>\n  <div class="col-xs-12">\n    <div class="row">\n      <div class="col-xs-6 dash-after smaller-left-padding">\n        ';c={inputLabel:"Last 4 digits",inputName:"creditCardAccount.ccFirst",labelCssClass:"",widgetCssClass:"","data-maxlength":"4","data-disabled":"disabled"};c=(d=e.TextInput)?d.call(a,{hash:c}):f.call(a,"TextInput",{hash:c});b+=g(c)+'\n      </div>\n      <div class="col-xs-6 dash-after smaller-left-padding">\n        ';c={inputLabel:"-",inputName:"creditCardAccount.ccSecond",
labelCssClass:"ccBlankLabel",widgetCssClass:"","data-maxlength":"4","data-disabled":"disabled"};c=(d=e.TextInput)?d.call(a,{hash:c}):f.call(a,"TextInput",{hash:c});b+=g(c)+'\n      </div>\n      <div class="col-xs-6 dash-after smaller-left-padding">\n        ';c={inputLabel:"-",inputName:"creditCardAccount.ccThird",labelCssClass:"ccBlankLabel",widgetCssClass:"","data-maxlength":"4","data-disabled":"disabled"};c=(d=e.TextInput)?d.call(a,{hash:c}):f.call(a,"TextInput",{hash:c});b+=g(c)+'\n      </div>\n      <div class="col-xs-6 smaller-left-padding width-hack">\n        ';
c={inputLabel:"-",inputName:"creditCardAccount.lastFourDigits",labelCssClass:"ccBlankLabel",widgetCssClass:"","data-maxlength":"4"};c=(d=e.TextInput)?d.call(a,{hash:c}):f.call(a,"TextInput",{hash:c});return b+=g(c)+'\n      </div>\n    </div>\n  </div>\n</div>\n\n<div class="row">\n  <div class="col-xs-24 notes subtext"><small></small></div>\n</div>\n'});return this.HandlebarsTemplates["banking/credit_card_details"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["banking/manage_rules_iframe_container"]=Handlebars.template(function(b,a,e,c,d){function f(a,c){var b,d,f;b='\n    <hr>\n    <div class="row">\n      <div class="col-xs-10">\n        ';d={inputName:"autoMatchingOn",inputLabel:"Auto-match bank transactions to MYOB Essentials transactions",widgetCssClass:"checkbox-col","data-css-class":""};d=(f=e.Checkbox)?f.call(a,{hash:d}):h.call(a,"Checkbox",{hash:d});return b+=
l(d)+'\n      </div>\n      <div class="col-xs-8 col-xs-offset-2">\n        <p>We\'ll automatically match bank transactions to your bills, invoices and other MYOB Essentials transactions. Only transactions with one exact match will be auto-matched.</p>\n      </div>\n    </div>\n    <hr>\n  '}e=e||b.helpers;var g,h=e.helperMissing,l=this.escapeExpression;b="<h1>Allocation Rules</h1>\n  ";c=a.showAutoMatchToggle;if((c=(g=e.ifEqual)?g.call(a,c,!0,{hash:{},inverse:this.noop,fn:this.program(1,f,d)}):
h.call(a,"ifEqual",c,!0,{hash:{},inverse:this.noop,fn:this.program(1,f,d)}))||0===c)b+=c;b+='\n<div class="frame-container">\n  <iframe id="';(g=e.id)?c=g.call(a,{hash:{}}):(c=a.id,c="function"===typeof c?c():c);b+=l(c)+'" frameborder="no" scrolling="no" width="100%" height="100%" src="';(g=e.url)?c=g.call(a,{hash:{}}):(c=a.url,c="function"===typeof c?c():c);return b+=l(c)+'"></iframe>\n</div>\n<div class="frame-overlay"></div>\n'});return this.HandlebarsTemplates["banking/manage_rules_iframe_container"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["banking/online_application_reference"]=Handlebars.template(function(b,a,e,c,d){e=e||b.helpers;c=this.escapeExpression;b="<p>Your MYOB bank feed reference number is <strong>";(e=e.referenceNumber)?a=e.call(a,{hash:{}}):(a=a.referenceNumber,a="function"===typeof a?a():a);return b+=c(a)+"</strong></p>\n<p>You will need this reference number when registering your MYOB bank feed online in your bank's website.</p>\n<p>Copy or write down this number before continuing to your online banking.</p>\n"});
return this.HandlebarsTemplates["banking/online_application_reference"]}).call(this);(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["banking/spend_money"]=Handlebars.template(function(b,a,e,c,d){e=e||b.helpers;b="";d=e.helperMissing;var f=this.escapeExpression;c={id:"bankingSpendMoneyFrame"};c.url=a.url;c=(e=e.IframeContainer)?e.call(a,{hash:c}):d.call(a,"IframeContainer",{hash:c});return b+=f(c)+"\n"});return this.HandlebarsTemplates["banking/spend_money"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["banking/transaction_history"]=Handlebars.template(function(b,a,e,c,d){e=e||b.helpers;var f=e.helperMissing,g=this.escapeExpression;b='<div class="loadingSpinner"></div>\n\n<div id="page">\n\n  ';c={heading:"Transaction history"};c=(d=e.includePartial)?d.call(a,"page_heading",{hash:c}):f.call(a,"includePartial","page_heading",{hash:c});b+=g(c)+'\n\n  <div id="itemListContainer">\n    <div id="toolbar" class="form-horizontal">\n      <div class="form-group">\n        <div class="col-xs-9">\n          ';
c={inputLabel:"Account:",inputName:"accountId","data-collection":"accounts","data-labels":"name,number","data-label-field":"name"};c=(d=e.TypeaheadDropdown)?d.call(a,{hash:c}):f.call(a,"TypeaheadDropdown",{hash:c});b+=g(c)+'\n        </div>\n        <div class="col-xs-6">\n          ';c={inputLabel:"From: ",inputName:"from",labelCssClass:"col-xs-6",widgetCssClass:"col-xs-18"};c=(d=e.DatePicker)?d.call(a,{hash:c}):f.call(a,"DatePicker",{hash:c});b+=g(c)+'\n        </div>\n        <div class="col-xs-6">\n          ';
c={inputLabel:"To: ",inputName:"to",labelCssClass:"col-xs-6",widgetCssClass:"col-xs-18"};c=(d=e.DatePicker)?d.call(a,{hash:c}):f.call(a,"DatePicker",{hash:c});b+=g(c)+'\n        </div>\n        <div class="col-xs-3">\n          <button class="btn btn-primary action" id="updateButton">Update</button>\n        </div>\n      </div>\n\n      <div class="form-group">\n        <div class="col-xs-8 col-xs-offset-16">\n          ';c={inputLabel:"Search:",inputName:"search"};c=(d=e.TextInput)?d.call(a,{hash:c}):
f.call(a,"TextInput",{hash:c});return b+=g(c)+'\n        </div>\n      </div>\n\n    </div>\n    <div id="table"></div>\n    <div id="pagination" class="pagination"></div>\n  </div>\n</div>\n'});return this.HandlebarsTemplates["banking/transaction_history"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["banking/transaction_history_header"]=Handlebars.template(function(b,a,e,c,d){return'<tr>\n  <th data-field="transactionDate" class="desc">Date<i class="fa fa-caret-down"></i></th>\n  <th data-field="reference">Reference</th>\n  <th data-field="reportable"></th>\n  <th data-field="description">From/to - Description</th>\n  <th data-field="accountName">Allocated to</th>\n  <th data-field="amount" class="text-right">Debit</th>\n  <th data-field="amount" class="text-right">Credit</th>\n  <th data-field="reconciled" class="text-center">Unreconciled</th>\n</tr>\n'});return this.HandlebarsTemplates["banking/transaction_history_header"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["banking/transaction_history_row"]=Handlebars.template(function(b,a,e,c,d){function f(a,c){var b,d,f,g,k,h;b='\n    <a href="';d=a.transactionDate;f=a.bankAccountId;g=a.sourceId;k=a.transactionType;d=(h=e.transactionUrl)?h.call(a,k,g,f,d,{hash:{}}):q.call(a,"transactionUrl",k,g,f,d,{hash:{}});b+=p(d)+'">';(h=e.reference)?d=h.call(a,{hash:{}}):(d=a.reference,d="function"===typeof d?d():d);return b+=p(d)+"</a>\n  "}
function g(a,c){var b,d;b="\n    ";(d=e.reference)?d=d.call(a,{hash:{}}):(d=a.reference,d="function"===typeof d?d():d);return b+=p(d)+"\n  "}function h(a,c){return"\n    <strong>R</strong>\n  "}function l(a,c){var b,d,f;b='\n    <a href="';d=a.businessId;d=(f=e.appUrl)?f.call(a,d,"/banking/transactions?processed=UNLINKED",{hash:{}}):q.call(a,"appUrl",d,"/banking/transactions?processed=UNLINKED",{hash:{}});b+=p(d)+"&from=";(f=e.transactionDate)?d=f.call(a,{hash:{}}):(d=a.transactionDate,d="function"===
typeof d?d():d);b+=p(d)+"&to=";(f=e.transactionDate)?d=f.call(a,{hash:{}}):(d=a.transactionDate,d="function"===typeof d?d():d);b+=p(d)+"&sourceId=";(f=e.sourceId)?d=f.call(a,{hash:{}}):(d=a.sourceId,d="function"===typeof d?d():d);return b+=p(d)+'&accountId=0">Allocate me</a>\n  '}function k(a,c){var b,d;b="\n    ";(d=e.accountName)?d=d.call(a,{hash:{}}):(d=a.accountName,d="function"===typeof d?d():d);return b+=p(d)+"\n  "}function m(a,c){return'\n    <i class="fa fa-exclamation-circle"></i>\n  '}
e=e||b.helpers;var n,q=e.helperMissing,p=this.escapeExpression;b="<td>";(n=e.formattedDate)?c=n.call(a,{hash:{}}):(c=a.formattedDate,c="function"===typeof c?c():c);b+=p(c)+"</td>\n<td>\n  ";c=a.transactionType;if((c=(n=e.ifDrillableTransaction)?n.call(a,c,{hash:{},inverse:this.program(3,g,d),fn:this.program(1,f,d)}):q.call(a,"ifDrillableTransaction",c,{hash:{},inverse:this.program(3,g,d),fn:this.program(1,f,d)}))||0===c)b+=c;b+="\n</td>\n<td>\n  ";c=a.reportable;if((c=(n=e.ifEqual)?n.call(a,c,!0,
{hash:{},inverse:this.noop,fn:this.program(5,h,d)}):q.call(a,"ifEqual",c,!0,{hash:{},inverse:this.noop,fn:this.program(5,h,d)}))||0===c)b+=c;b+="\n</td>\n<td>";(n=e.description)?c=n.call(a,{hash:{}}):(c=a.description,c="function"===typeof c?c():c);b+=p(c)+"</td>\n<td>\n  ";c=a.accountName;if((c=(n=e.ifBlank)?n.call(a,c,{hash:{},inverse:this.program(9,k,d),fn:this.program(7,l,d)}):q.call(a,"ifBlank",c,{hash:{},inverse:this.program(9,k,d),fn:this.program(7,l,d)}))||0===c)b+=c;b+='\n</td>\n<td class="text-right">';
(n=e.spent)?c=n.call(a,{hash:{}}):(c=a.spent,c="function"===typeof c?c():c);b+=p(c)+'</td>\n<td class="text-right">';(n=e.received)?c=n.call(a,{hash:{}}):(c=a.received,c="function"===typeof c?c():c);b+=p(c)+'</td>\n<td class="text-center">\n  ';c=a.reconciled;if((c=(n=e.ifEqual)?n.call(a,c,!1,{hash:{},inverse:this.noop,fn:this.program(11,m,d)}):q.call(a,"ifEqual",c,!1,{hash:{},inverse:this.noop,fn:this.program(11,m,d)}))||0===c)b+=c;return b+"\n</td>\n\n\n"});return this.HandlebarsTemplates["banking/transaction_history_row"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["banking/transactions/allocate_transaction_panel"]=Handlebars.template(function(b,a,e,c,d){e=e||b.helpers;d=e.helperMissing;c=this.escapeExpression;b='<div class="reportable"></div>\n\n<div class="row alloc-headers">\n  <div class="col-xs-6 text-center"><label>Amount in $ or %</label></div>\n  <div class="col-xs-6"><label>Account</label></div>\n  <div class="col-xs-3"><label>Tax code</label></div>\n  <div class="col-xs-2"><label>Tax</label></div>\n  <div class="col-xs-6"><label>Description</label></div>\n  <div class="col-xs-1"></div>\n</div>\n\n<div class="alloc-list"></div>\n\n<div class="row">\n  <div class="col-xs-6 clearfix">\n    <div class="remaining-balance"></div>\n    <div class="remaining-percentage"></div>\n  </div>\n</div>\n<div class="tab-footer">\n  <div class="row">\n    <div class="col-xs-4 clearfix">\n      <button class="btn btn-default popup-for-rules">Create rule</button>\n    </div>\n    <div class="col-xs-20">\n      <div class="pull-right">\n        ';
a=(e=e.includePartial)?e.call(a,"transaction_panel_unsaved_change_message",{hash:{}}):d.call(a,"includePartial","transaction_panel_unsaved_change_message",{hash:{}});return b+=c(a)+'\n        <button id="cancelButton" class="btn btn-default cancel-split">Cancel</button>\n        <button id="saveButton" class="btn btn-primary action save-split">Save</button>\n      </div>\n    </div>\n  </div>\n</div>\n'});return this.HandlebarsTemplates["banking/transactions/allocate_transaction_panel"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["banking/transactions/allocate_transaction_row"]=Handlebars.template(function(b,a,e,c,d){e=e||b.helpers;var f,g=e.helperMissing,h=this.escapeExpression;b='<div class="col-xs-6 ">\n  <div class="amount-percentage-wrapper clearfix">\n    <i class="amount-symbol">$</i>\n    <i class="percentage-symbol">%</i>\n    ';c={inputName:"amount",widgetCssClass:"","data-css-class":"text-right","data-decimal-places":"2",
"data-placeholder":"0.00","data-valid-regex":"^[-\\+]?\\d{0,2},?\\d{0,2},?\\d{0,2},?\\d{0,2}(\\.\\d{0,2})?$","data-invalid-regex":"[,\\.]{2}"};c=(f=e.MoneyInput)?f.call(a,{hash:c}):g.call(a,"MoneyInput",{hash:c});b+=h(c)+'\n    <div class="amount-percentage-spacer"></div>\n    ';c={inputName:"percentage",widgetCssClass:"","data-css-class":"text-right","data-decimal-places":"2","data-placeholder":"0.00","data-valid-regex":"^[-\\+]?\\d{0,2},?\\d{0,2}(\\.\\d{0,2})?$","data-invalid-regex":"[,\\.]{2}"};
c=(f=e.MoneyInput)?f.call(a,{hash:c}):g.call(a,"MoneyInput",{hash:c});b+=h(c)+'\n  </div>\n</div>\n<div class="col-xs-6">\n  ';c={inputName:"accountId","data-collection":"accounts","data-labels":"number,name,type","data-label-field":"name",widgetCssClass:""};c=(f=e.TypeaheadDropdown)?f.call(a,{hash:c}):g.call(a,"TypeaheadDropdown",{hash:c});b+=h(c)+"\n</div>\n";c=a.registerGST;if((c=e["if"].call(a,c,{hash:{},inverse:this.program(3,function(a,c){var b,d,f;b='\n  <div class="col-xs-3">\n    ';d={inputName:"taxCode",
"data-collection":"gstTypes","data-labels":"gstCode,name,rateLabel:right","data-label-field":"gstCode","data-name":"taxCode","data-value-field":"gstCode",widgetCssClass:"","data-disabled":"disabled"};d=(f=e.TypeaheadDropdown)?f.call(a,{hash:d}):g.call(a,"TypeaheadDropdown",{hash:d});b+=h(d)+'\n  </div>\n  <div class="col-xs-2">\n    ';d={inputName:"tax",widgetCssClass:"","data-css-class":"text-right","data-decimal-places":"2","data-placeholder":"0.00","data-valid-regex":"^[-\\+]?\\d{0,2},?\\d{0,2},?\\d{0,2},?\\d{0,2}(\\.\\d{0,2})?$",
"data-invalid-regex":"[,\\.]{2}","data-disabled":"disabled"};d=(f=e.MoneyInput)?f.call(a,{hash:d}):g.call(a,"MoneyInput",{hash:d});return b+=h(d)+"\n  </div>\n"},d),fn:this.program(1,function(a,c){var b,d,f;b='\n  <div class="col-xs-3">\n    ';d={inputName:"taxCode","data-collection":"gstTypes","data-labels":"gstCode,name,rateLabel:right","data-label-field":"gstCode","data-name":"taxCode","data-value-field":"gstCode",widgetCssClass:""};d=(f=e.TypeaheadDropdown)?f.call(a,{hash:d}):g.call(a,"TypeaheadDropdown",
{hash:d});b+=h(d)+'\n  </div>\n  <div class="col-xs-2">\n    ';d={inputName:"tax",widgetCssClass:"","data-css-class":"text-right","data-decimal-places":"2","data-placeholder":"0.00","data-valid-regex":"^[-\\+]?\\d{0,2},?\\d{0,2},?\\d{0,2},?\\d{0,2}(\\.\\d{0,2})?$","data-invalid-regex":"[,\\.]{2}"};d=(f=e.MoneyInput)?f.call(a,{hash:d}):g.call(a,"MoneyInput",{hash:d});return b+=h(d)+"\n  </div>\n"},d)}))||0===c)b+=c;b+='\n<div class="col-xs-6">\n  ';c={inputName:"description",widgetCssClass:"","data-maxlength":"255"};
c=(f=e.TextInput)?f.call(a,{hash:c}):g.call(a,"TextInput",{hash:c});b+=h(c)+'\n</div>\n<div class="col-xs-1 allocation-row-remove padding-left-00 padding-right-00">\n  <i class="fa fa-lg fa-times-circle delete ';c=a.showDeleteButton;if((c=e.unless.call(a,c,{hash:{},inverse:this.noop,fn:this.program(5,function(a,c){return"hidden"},d)}))||0===c)b+=c;return b+' clickable"></i>\n</div>\n'});return this.HandlebarsTemplates["banking/transactions/allocate_transaction_row"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["banking/transactions/allocation_rule_panel"]=Handlebars.template(function(b,a,e,c,d){e=e||b.helpers;var f=e.helperMissing,g=this.escapeExpression;b='  <div id="toolbar" class="row bottom-buffer">\n    <div class="col-xs-8">\n      ';c={inputLabel:"If the bank transaction description contains",inputName:"description","data-maxlength":"160",labelCssClass:"",widgetCssClass:""};c=(d=e.TextInput)?d.call(a,{hash:c}):
f.call(a,"TextInput",{hash:c});b+=g(c)+'\n    </div>\n    <div class="col-xs-4">\n      ';c={inputLabel:"and the amount is",inputName:"amountType","data-collection":"amountTypes","data-name-field":"name","data-value-field":"id",labelCssClass:"",widgetCssClass:""};c=(d=e.Select)?d.call(a,{hash:c}):f.call(a,"Select",{hash:c});b+=g(c)+'\n    </div>\n    <div class="col-xs-6">\n      ';c={inputLabel:"allocate the transaction by",inputName:"amountPercent","data-collection":"amountPercents","data-name-field":"name",
"data-value-field":"id",labelCssClass:"",widgetCssClass:""};c=(d=e.Select)?d.call(a,{hash:c}):f.call(a,"Select",{hash:c});b+=g(c)+'\n    </div>\n    <div class="reportable col-xs-6"></div>\n  </div>\n  <div class="row alloc-headers">\n    <div class="col-xs-5 text-right"><label class="amount-percent-label">Percentage</label></div>\n    <div class="col-xs-9"><label>Account</label></div>\n    <div class="col-xs-9"><label>Tax code</label></div>\n    <div class="col-xs-1"></div>\n  </div>\n\n  <div class="alloc-list"></div>\n\n  <div class="tab-footer">\n    <div class="row">\n      <div class="col-xs-6 filler hidden"></div>\n      <div class="col-xs-6 remaining-balance hidden"></div>\n      <div class="col-xs-6 remaining-percentage"></div>\n      <div class="col-xs-18">\n        <div class="pull-right">\n          ';
c=(d=e.includePartial)?d.call(a,"transaction_panel_unsaved_change_message",{hash:{}}):f.call(a,"includePartial","transaction_panel_unsaved_change_message",{hash:{}});return b+=g(c)+'\n          <button id="cancelButton" class="btn btn-default cancel-split">Cancel</button>\n          <button id="save-rule-button" class="btn btn-primary action save-split">Save</button>\n        </div>\n      </div>\n    </div>\n  </div>\n'});return this.HandlebarsTemplates["banking/transactions/allocation_rule_panel"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["banking/transactions/allocation_rule_row"]=Handlebars.template(function(b,a,e,c,d){e=e||b.helpers;var f,g=e.helperMissing,h=this.escapeExpression;b='<div class="col-xs-5 amount-input hidden">\n  ';c={inputName:"amount",widgetCssClass:"","data-css-class":"text-right","data-decimal-places":"2","data-placeholder":"0.00","data-valid-regex":"^\\d{0,2},?\\d{0,2},?\\d{0,2},?\\d{0,2}(\\.\\d{0,2})?$","data-invalid-regex":"[,\\.]{2}"};
c=(f=e.MoneyInput)?f.call(a,{hash:c}):g.call(a,"MoneyInput",{hash:c});b+=h(c)+'\n</div>\n\n<div class="col-xs-5 amount-label-input hidden">\n  ';c={inputName:"amountLabel",widgetCssClass:"","data-css-class":"text-right","data-valid-regex":"^\\d{0,2},?\\d{0,2},?\\d{0,2},?\\d{0,2}(\\.\\d{0,2})?$","data-invalid-regex":"[,\\.]{2}"};c=(f=e.MoneyInput)?f.call(a,{hash:c}):g.call(a,"MoneyInput",{hash:c});b+=h(c)+'\n</div>\n\n<div class="col-xs-5 percent-input">\n  ';c={inputName:"percentage",widgetCssClass:"",
"data-css-class":"text-right","data-decimal-places":"2","data-placeholder":"0.00","data-valid-regex":"^\\d{0,2},?\\d{0,2},?\\d{0,2},?\\d{0,2}(\\.\\d{0,2})?$","data-invalid-regex":"[,\\.]{2}"};c=(f=e.MoneyInput)?f.call(a,{hash:c}):g.call(a,"MoneyInput",{hash:c});b+=h(c)+'\n</div>\n<div class="col-xs-9">\n  ';c={inputName:"accountId","data-collection":"accounts","data-labels":"number,name,type","data-label-field":"name",widgetCssClass:""};c=(f=e.TypeaheadDropdown)?f.call(a,{hash:c}):g.call(a,"TypeaheadDropdown",
{hash:c});b+=h(c)+"\n</div>\n";c=a.registerGST;if((c=e["if"].call(a,c,{hash:{},inverse:this.program(3,function(a,c){var b,d,f;b='\n  <div class="col-xs-9">\n    ';d={inputName:"taxCode","data-collection":"gstTypes","data-labels":"gstCode,name,rateLabel:right","data-label-field":"gstCode","data-name":"taxCode","data-value-field":"gstCode",widgetCssClass:"","data-disabled":"disabled"};d=(f=e.TypeaheadDropdown)?f.call(a,{hash:d}):g.call(a,"TypeaheadDropdown",{hash:d});return b+=h(d)+"\n  </div>\n"},
d),fn:this.program(1,function(a,c){var b,d,f;b='\n  <div class="col-xs-9">\n    ';d={inputName:"taxCode","data-collection":"gstTypes","data-labels":"gstCode,name,rateLabel:right","data-label-field":"gstCode","data-name":"taxCode","data-value-field":"gstCode",widgetCssClass:""};d=(f=e.TypeaheadDropdown)?f.call(a,{hash:d}):g.call(a,"TypeaheadDropdown",{hash:d});return b+=h(d)+"\n  </div>\n"},d)}))||0===c)b+=c;b+='\n<div class="col-xs-1">\n  <i class="fa fa-lg fa-times-circle delete ';c=a.showDeleteButton;
if((c=e.unless.call(a,c,{hash:{},inverse:this.noop,fn:this.program(5,function(a,c){return"hidden"},d)}))||0===c)b+=c;return b+' clickable"></i>\n</div>\n'});return this.HandlebarsTemplates["banking/transactions/allocation_rule_row"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["banking/transactions/bank_transactions"]=Handlebars.template(function(b,a,e,c,d){function f(a,c){return'\n    <div class="btn-group">\n      <button id="import-statement-button" class="btn btn-default action">Import statements</button>\n      <button id="importStatementDropdown" type="button" class="btn btn-default dropdown-toggle action" data-toggle="dropdown">\n        <span class="caret"></span>\n        <span class="sr-only">Toggle Dropdown</span>\n      </button>\n      <ul class="dropdown-menu dropdown-menu-right" role="menu">\n        <li><a id="import-history-button" class="link">View Import History</a></li>\n      </ul>\n    </div>\n  '}function g(a,
c){return'\n      <div id="bulk-actions-container"></div>\n    '}e=e||b.helpers;var h,l=e.helperMissing,k=this.escapeExpression,m=e.blockHelperMissing;b='<div id="page">\n  <div id="dashboard-sme">\n    <br/>\n    <div id="alerts-row" class="row">\n      <div id="subscribe-alert-container" class="col-xs-24">\n      </div>\n      <div id="update-payment-details-alert-container" class="col-xs-24">\n      </div>\n    </div>\n    <div id="getting-started-row" class="row">\n      <div id="getting-started-container" class="col-xs-24"></div>\n    </div>\n  </div>\n\n  ';
c={heading:"Bank transactions"};if((c=(h=e.pageHeading)?h.call(a,{hash:c,inverse:this.noop,fn:this.program(1,f,d)}):l.call(a,"pageHeading",{hash:c,inverse:this.noop,fn:this.program(1,f,d)}))||0===c)b+=c;b+='\n\n  <div id="itemListContainer">\n    <div id="toolbar" class="row bottom-buffer">\n      <div class="col-xs-5">\n        <div class="allocateOrMatchSortWarning ';c=a.showAllocateOrMatchSortWarning;if((c=e.unless.call(a,c,{hash:{},inverse:this.noop,fn:this.program(3,function(a,c){return"hidden"},
d)}))||0===c)b+=c;b+='" style="position: absolute; margin-left: 40px; font-size:12px">\n          <span class="label boxed sml blue allocateOrMatchSortWarningTooltip"\n             rel="tooltip" aria-hidden="true" data-toggle="tooltip" data-placement="right" data-html="true"\n             title="You\'re currently in <i><b>review</b></i> mode. Only allocated transactions will be shown in this mode. Sort\n             on any other column to exit mode.">Review mode</span>\n          <a style="margin-left:5px;">Exit review</a>\n        </div>\n        ';
c=a.showAllocateOrMatchSortWarning;if((c=e["if"].call(a,c,{hash:{},inverse:this.program(7,function(a,c){var b,d,f;b="\n          ";d={inputLabel:"Show",inputName:"processed","data-collection":"processedTypes","data-name-field":"name","data-value-field":"id",labelCssClass:"",widgetCssClass:""};d=(f=e.Select)?f.call(a,{hash:d}):l.call(a,"Select",{hash:d});return b+=k(d)+"\n        "},d),fn:this.program(5,function(a,c){var b,d,f;b="\n          ";d={inputLabel:"Show",inputName:"processed","data-collection":"processedTypes",
"data-name-field":"name","data-value-field":"id",labelCssClass:"",widgetCssClass:"","data-disabled":"disabled"};d=(f=e.Select)?f.call(a,{hash:d}):l.call(a,"Select",{hash:d});return b+=k(d)+"\n        "},d)}))||0===c)b+=c;b+='\n      </div>\n      <div class="col-xs-5">\n        ';c={inputLabel:"in",inputName:"accountId","data-collection":"accounts","data-labels":"name,number","data-label-field":"name",labelCssClass:"",widgetCssClass:""};c=(h=e.TypeaheadDropdown)?h.call(a,{hash:c}):l.call(a,"TypeaheadDropdown",
{hash:c});b+=k(c)+'\n      </div>\n      <div class="col-xs-4">\n        ';c={inputLabel:"from ",inputName:"from",labelCssClass:"",widgetCssClass:""};c=(h=e.DatePicker)?h.call(a,{hash:c}):l.call(a,"DatePicker",{hash:c});b+=k(c)+'\n      </div>\n      <div class="col-xs-4">\n        ';c={inputLabel:"to ",inputName:"to",labelCssClass:"",widgetCssClass:""};c=(h=e.DatePicker)?h.call(a,{hash:c}):l.call(a,"DatePicker",{hash:c});b+=k(c)+'\n      </div>\n      <div class="col-xs-6">\n        ';c=a.showAllocateOrMatchSortWarning;
if((c=e["if"].call(a,c,{hash:{},inverse:this.program(11,function(a,c){var b,d,f;b="\n          ";d={inputLabel:"with text",inputName:"q",labelCssClass:"",widgetCssClass:"searchText","data-delay":"on"};d=(f=e.TextInput)?f.call(a,{hash:d}):l.call(a,"TextInput",{hash:d});return b+=k(d)+"\n        "},d),fn:this.program(9,function(a,c){var b,d,f;b="\n          ";d={inputLabel:"with text",inputName:"q",labelCssClass:"",widgetCssClass:"searchText","data-delay":"on","data-disabled":"disabled"};d=(f=e.TextInput)?
f.call(a,{hash:d}):l.call(a,"TextInput",{hash:d});return b+=k(d)+"\n        "},d)}))||0===c)b+=c;b+="\n      </div>\n    </div>\n\n    ";(h=e.ifPartner)?c=h.call(a,{hash:{},inverse:this.noop,fn:this.program(13,g,d)}):(c=a.ifPartner,c="function"===typeof c?c():c);e.ifPartner||(c=m.call(a,c,{hash:{},inverse:this.noop,fn:this.program(13,g,d)}));if(c||0===c)b+=c;return b+'\n\n    <div id="table"></div>\n    <div class="mediumLoadingSpinner"></div>\n    <div id="pagination" class="pagination"></div>\n  </div>\n\n  <div class="modal fade banking-rules-modal" tabindex="-1" role="dialog">\n      <div class="modal-dialog modal-lg" role="document">\n          <div class="modal-content">\n              <div class="modal-header">\n                  <button type="button" class="close" data-dismiss="modal" aria-label="Close">&times;</button>\n                  <h4 class="modal-title" id="myModalLabel">Create rule from transaction</h4>\n              </div>\n              <div class="modal-body" id="banking-rules-popup-wrapper"></div>\n          </div>\n      </div>\n  </div>\n</div>\n'});
return this.HandlebarsTemplates["banking/transactions/bank_transactions"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["banking/transactions/bank_transactions_bulk_actions"]=Handlebars.template(function(b,a,e,c,d){return'<div id="bulk-actions" class="hidden bulk-actions">\n  <button id="allocate-button" class="btn btn-default btn-small btn-xs btn-bulk-actions action margin-right-05"\n          data-toggle="allocate-popover" data-container="#bulk-allocate-content" data-html="true" href="#"\n          data-target="#bulk-allocate-popover" data-placement="bottom">\n          <i class="myob-icon-allocate margin-right-05"></i>Allocate\n  </button>\n\n  <button id="unallocate-button" class="btn btn-default btn-small action btn-xs btn-bulk-actions margin-right-05">\n    <i class="myob-icon-unallocate margin-right-05"></i>Unallocate\n  </button>\n\n  <a id="generate-report-link" href="#">\n    <button id="generate-report-button" class="btn btn-default btn-small btn-xs btn-bulk-actions action margin-right-20"><i class="myob-icon-generate-report margin-right-05"></i>Generate report\n    </button>\n  </a>\n\n  <div class="transactions-selected-message btn btn-xs btn-small"></div>\n</div>\n\n<div id="bulk-allocate-wrapper" class="hidden">\n  <div class="bulk-allocate-overlay"></div>\n  <div id="bulk-allocate-container" class="bulk-allocate-popover fade bottom in"></div>\n</div>\n\n\n\n'});return this.HandlebarsTemplates["banking/transactions/bank_transactions_bulk_actions"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["banking/transactions/bank_transactions_bulk_allocate"]=Handlebars.template(function(b,a,e,c,d){function f(a,c){var b,d,f;b="\n      <div>\n        ";d={inputName:"taxCode","data-collection":"gstTypes","data-labels":"gstCode,name,rateLabel:right","data-label-field":"gstCode","data-name":"taxCode","data-value-field":"gstCode",widgetCssClass:""};d=(f=e.TypeaheadDropdown)?f.call(a,{hash:d}):l.call(a,"TypeaheadDropdown",
{hash:d});return b+=k(d)+"\n      </div>\n    "}function g(a,c){var b,d,f;b="\n      <div>\n        ";d={inputName:"taxCode","data-collection":"gstTypes","data-labels":"gstCode,name,rateLabel:right","data-label-field":"gstCode","data-name":"taxCode","data-value-field":"gstCode",widgetCssClass:"","data-disabled":"disabled"};d=(f=e.TypeaheadDropdown)?f.call(a,{hash:d}):l.call(a,"TypeaheadDropdown",{hash:d});return b+=k(d)+"\n      </div>\n    "}e=e||b.helpers;var h,l=e.helperMissing,k=this.escapeExpression,
m=e.blockHelperMissing;b='<div class="arrow"></div>\n<div id="bulk-allocate-content" class="popover-content">\n  <div>\n    <label for="bulkAllocateAccountId">Account</label>\n    <div>\n      ';c={inputName:"allocateToAccountId","data-collection":"accounts","data-labels":"number,name,type","data-label-field":"name",widgetCssClass:""};c=(h=e.TypeaheadDropdown)?h.call(a,{hash:c}):l.call(a,"TypeaheadDropdown",{hash:c});b+=k(c)+'\n    </div>\n  </div>\n  <div>\n    <label for="bulkAllocateTaxCode">Tax code</label>\n    ';
(h=e.ifRegisteredForGst)?c=h.call(a,{hash:{},inverse:this.noop,fn:this.program(1,f,d)}):(c=a.ifRegisteredForGst,c="function"===typeof c?c():c);e.ifRegisteredForGst||(c=m.call(a,c,{hash:{},inverse:this.noop,fn:this.program(1,f,d)}));if(c||0===c)b+=c;b+="\n    ";(h=e.unlessRegisteredForGst)?c=h.call(a,{hash:{},inverse:this.noop,fn:this.program(3,g,d)}):(c=a.unlessRegisteredForGst,c="function"===typeof c?c():c);e.unlessRegisteredForGst||(c=m.call(a,c,{hash:{},inverse:this.noop,fn:this.program(3,g,d)}));
if(c||0===c)b+=c;return b+'\n  </div>\n  <hr/>\n  <div class="popover-footer pull-right">\n    <button id="bulk-allocate-cancel" type="reset" class="btn btn-default">Cancel</button>\n    <button id="bulk-allocate-submit" type="submit" class="btn btn-primary action">Allocate</button>\n  </div>\n</div>\n\n'});return this.HandlebarsTemplates["banking/transactions/bank_transactions_bulk_allocate"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["banking/transactions/bank_transactions_header"]=Handlebars.template(function(b,a,e,c,d){function f(a,c){return'\n    <th class="select-row-col">\n      <input id="select-all-input" type="checkbox"/>\n    </th>\n  '}function g(a,c){return'\n    <th class="account-col">Account</th>\n  '}function h(a,c){return'\n    <th class="description-col" data-sort-field="description">Description</th>\n  '}function l(a,
c){return'\n    <th class="description-col">Description</th>\n  '}function k(a,c){var b,d;b='\n  <th class="allocate-col border-left" data-sort-field="allocatedAccount">Allocate or Match\n      <div class="allocateOrMatchSortWarning ';d=a.showAllocateOrMatchSortWarning;if((d=e.unless.call(a,d,{hash:{},inverse:p.noop,fn:p.program(10,m,c)}))||0===d)b+=d;return b+'" style="display: inline-block;">\n          <span class="allocateOrMatchSortWarningTooltip label boxed sml blue"\n             rel="tooltip" aria-hidden="true" data-toggle="tooltip" data-placement="right" data-html="true"\n             title="You\'re currently in <i><b>review</b></i> mode. Only allocated transactions will be shown in this mode. Sort\n             on any other column to exit mode.">Review mode</span>\n      </div>\n  </th>\n  '}
function m(a,c){return"hidden"}function n(a,c){return'\n  <th class="allocate-col border-left">Allocate or Match</th>\n  '}e=e||b.helpers;var q,p=this,t=e.blockHelperMissing,r=e.helperMissing;b="<tr>\n  ";(q=e.ifPartner)?c=q.call(a,{hash:{},inverse:p.noop,fn:p.program(1,f,d)}):(c=a.ifPartner,c="function"===typeof c?c():c);e.ifPartner||(c=t.call(a,c,{hash:{},inverse:p.noop,fn:p.program(1,f,d)}));if(c||0===c)b+=c;b+='\n  <th class="date-col" data-sort-field="date">Date</th>\n  ';c=a.filterAccount;if((c=
(q=e.ifEqual)?q.call(a,c,0,{hash:{},inverse:p.noop,fn:p.program(3,g,d)}):r.call(a,"ifEqual",c,0,{hash:{},inverse:p.noop,fn:p.program(3,g,d)}))||0===c)b+=c;b+="\n  ";if((c=(q=e.ifFeature)?q.call(a,"BANKING_SORT_BY_DESCRIPTION",{hash:{},inverse:p.program(7,l,d),fn:p.program(5,h,d)}):r.call(a,"ifFeature","BANKING_SORT_BY_DESCRIPTION",{hash:{},inverse:p.program(7,l,d),fn:p.program(5,h,d)}))||0===c)b+=c;b+='\n  <th class="spent-col text-right" data-sort-field="withdrawal">Withdrawal ($)</th>\n  <th class="received-col text-right" data-sort-field="deposit">Deposit ($)</th>\n  ';
if((c=(q=e.ifFeature)?q.call(a,"BANKING_SORT_BY_ACCOUNT",{hash:{},inverse:p.program(12,n,d),fn:p.program(9,k,d)}):r.call(a,"ifFeature","BANKING_SORT_BY_ACCOUNT",{hash:{},inverse:p.program(12,n,d),fn:p.program(9,k,d)}))||0===c)b+=c;return b+'\n  <th class="gst-col text-center">Tax</th>\n  <th class="actions-col text-center"></th>\n</tr>\n'});return this.HandlebarsTemplates["banking/transactions/bank_transactions_header"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["banking/transactions/bank_transactions_old"]=Handlebars.template(function(b,a,e,c,d){e=e||b.helpers;c=this.escapeExpression;b='<div class="loadingSpinner"></div>\n\n  <div id="bank-transactions">\n    <a id="return-link" class="switch-banking old">Try our new banking experience</a>\n      <div class="row" id="welcome-banner">\n        <div class="col-xs-24 top-buffer">\n\n          <div class="banner banner-grey">\n            <div class="row">\n              <div class="col-xs-2 banner-icon">\n                <i class="fa fa-dollar"></i>\n              </div>\n              <div class="col-xs-9">\n                <div class="col-xs-24"><h2>Time to move to the improved banking</h2></div>\n                <div class="col-xs-24"><strong>Soon you\'ll only be able to use the new look bank transaction page.</strong></div>\n                <div class="col-xs-24">&nbsp;</div>\n                <div class="col-xs-24">So, what will change when you make the switch?</div>\n                <div class="col-xs-24">&bull; All the same features and more</div>\n                <div class="col-xs-24">&bull; Easier and faster to use</div>\n                <div class="col-xs-24">&bull; Allocate and unallocate with ease</div>\n              </div>\n              <div class="col-xs-7 panel-body text-center top-buffer">\n                <a href="//fast.wistia.net/embed/iframe/7vw3m040fk?popover=true" class="wistia-popover[height=540,playerColor=7b796a,width=960]" id="OldBanking_PlayVideo">\n                  <img src="https://embed-ssl.wistia.com/deliveries/6cfdaa99433986573a76bc2d6e9e3300c05d61b0.jpg?image_play_button=false&image_play_button_color=7b796ae0&image_crop_resized=300x190" alt="" style="box-shadow: 2px 5px 36px 0px rgba(0,0,0,0.20);border-radius: 3px;"/></a>\n                </a>\n                <script charset="ISO-8859-1" src="//fast.wistia.com/assets/external/popover-v1.js">\x3c/script>\n              </div>\n              <div class="col-xs-1" style="height:260px; background: linear-gradient(to right, rgba(0,0,0,0) 46%, #dedede 46%, #dedede 54%, rgba(0,0,0,0) 54%, rgba(0,0,0,0) 54%);">\n              </div>\n              <div class="col-xs-4 panel-body i-got-it">\n                <p><strong>Try it out today</strong></p>\n                <button class="btn btn-primary switch-banking">Switch to new banking</button>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n  </div>\n\n<div class="frame-container">\n  <iframe id="';
(d=e.id)?d=d.call(a,{hash:{}}):(d=a.id,d="function"===typeof d?d():d);b+=c(d)+'" frameborder="no" scrolling="no" width="100%" height="100%" src="';(d=e.url)?d=d.call(a,{hash:{}}):(d=a.url,d="function"===typeof d?d():d);return b+=c(d)+'"></iframe>\n</div>\n<div class="frame-overlay"></div>\n'});return this.HandlebarsTemplates["banking/transactions/bank_transactions_old"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["banking/transactions/bank_transactions_row"]=Handlebars.template(function(b,a,e,c,d){function f(a,c){var b,d,f;b='\n  <td class="select-row-col ';d=a.selected;if((d=e["if"].call(a,d,{hash:{},inverse:w.noop,fn:w.program(2,g,c)}))||0===d)b+=d;b+='">\n    ';d={inputName:"selected","data-tabindex":"-1",widgetCssClass:"checkbox-col label-hidden"};d=(f=e.Checkbox)?f.call(a,{hash:d}):A.call(a,"Checkbox",{hash:d});
return b+=B(d)+"\n  </td>\n"}function g(a,c){return"highlighted"}function h(a,c){var b,d;b='\n  <td class="account-col ';d=a.selected;if((d=e["if"].call(a,d,{hash:{},inverse:w.noop,fn:w.program(7,l,c)}))||0===d)b+=d;b+='">';(d=e.accountName)?d=d.call(a,{hash:{}}):(d=a.accountName,d="function"===typeof d?d():d);return b+=B(d)+"</td>\n"}function l(a,c){return"highlighted"}function k(a,c){var b,d;b=" ";(d=e.referenceNumber)?d=d.call(a,{hash:{}}):(d=a.referenceNumber,d="function"===typeof d?d():d);return b+=
B(d)}function m(a,c){var b,d;b='\n    <a class="transaction-notes-position transaction-notes hover-unless-touch ';d=a.touch;if((d=e["if"].call(a,d,{hash:{},inverse:w.noop,fn:w.program(14,n,c)}))||0===d)b+=d;return b+'" title="Add note">\n      <i class="myob-icon-add-note icons-medium"></i>\n    </a>\n  '}function n(a,c){return"touch"}function q(a,c){var b,d,f;b='\n    <div class="transaction-notes-wrapper">\n      <a class="transaction-notes">\n        <small>';d=a.note;d=null==d||!1===d?d:d.length;
if((d=(f=e.ifGreater)?f.call(a,d,35,{hash:{},inverse:w.program(19,t,c),fn:w.program(17,p,c)}):A.call(a,"ifGreater",d,35,{hash:{},inverse:w.program(19,t,c),fn:w.program(17,p,c)}))||0===d)b+=d;b+='</small>\n      </a>\n      <i class="delete-note-icon myob-icon-remove-2 icons-medium hover-unless-touch ';d=a.touch;if((d=e["if"].call(a,d,{hash:{},inverse:w.noop,fn:w.program(21,r,c)}))||0===d)b+=d;return b+'"></i>\n    </div>\n  '}function p(a,c){var b="",d,f;d=a.note;d=(f=e.truncate)?f.call(a,d,35,{hash:{}}):
A.call(a,"truncate",d,35,{hash:{}});return b+=B(d)+"..."}function t(a,c){var b;(b=e.note)?b=b.call(a,{hash:{}}):(b=a.note,b="function"===typeof b?b():b);return B(b)}function r(a,c){return"touch"}function u(a,c){return'\n        <i rel="tooltip" data-html="true" data-original-title="This transaction has been automatically matched. Don\u2019t want this to happen? Turn off auto-matching on the <strong>Allocation rules</strong> page." class="magic-wand myob-icon-magic-wand icons-medium"></i>\n    '}function v(a,
c){return'\n        <i rel="tooltip" data-html="true" data-original-title="This transaction has been automatically allocated based on a rule you created. See and edit all your rules on the <strong>Allocation rules</strong> page." class="magic-wand myob-icon-magic-wand icons-medium"></i>\n    '}function z(a,c){return'<i class="reportable"></i>'}function y(a,c){return"touch "}function D(a,c){var b;(b=e.gstCode)?b=b.call(a,{hash:{}}):(b=a.gstCode,b="function"===typeof b?b():b);return B(b)}e=e||b.helpers;
b="";var F,w=this,A=e.helperMissing,B=this.escapeExpression,C=e.blockHelperMissing;(F=e.ifPartner)?c=F.call(a,{hash:{},inverse:w.noop,fn:w.program(1,f,d)}):(c=a.ifPartner,c="function"===typeof c?c():c);e.ifPartner||(c=C.call(a,c,{hash:{},inverse:w.noop,fn:w.program(1,f,d)}));if(c||0===c)b+=c;b+='\n<td class="';c=a.selected;if((c=e["if"].call(a,c,{hash:{},inverse:w.noop,fn:w.program(4,function(a,c){return"highlighted"},d)}))||0===c)b+=c;b+='">';(F=e.formattedDate)?c=F.call(a,{hash:{}}):(c=a.formattedDate,
c="function"===typeof c?c():c);b+=B(c)+"</td>\n";c=a.filterAccount;if((c=(F=e.ifEqual)?F.call(a,c,0,{hash:{},inverse:w.noop,fn:w.program(6,h,d)}):A.call(a,"ifEqual",c,0,{hash:{},inverse:w.noop,fn:w.program(6,h,d)}))||0===c)b+=c;b+='\n<td class="description-col ';c=a.selected;if((c=e["if"].call(a,c,{hash:{},inverse:w.noop,fn:w.program(9,function(a,c){return"highlighted"},d)}))||0===c)b+=c;b+='"><div class="description-wrapper">';(F=e.description)?c=F.call(a,{hash:{}}):(c=a.description,c="function"===
typeof c?c():c);b+=B(c);c=a.referenceNumber;if((c=(F=e.unlessBlank)?F.call(a,c,{hash:{},inverse:w.noop,fn:w.program(11,k,d)}):A.call(a,"unlessBlank",c,{hash:{},inverse:w.noop,fn:w.program(11,k,d)}))||0===c)b+=c;b+="\n  ";c=a.note;if((c=(F=e.ifBlank)?F.call(a,c,{hash:{},inverse:w.program(16,q,d),fn:w.program(13,m,d)}):A.call(a,"ifBlank",c,{hash:{},inverse:w.program(16,q,d),fn:w.program(13,m,d)}))||0===c)b+=c;b+='\n  </div>\n</td>\n<td class="text-right ';c=a.selected;if((c=e["if"].call(a,c,{hash:{},
inverse:w.noop,fn:w.program(23,function(a,c){return"highlighted"},d)}))||0===c)b+=c;b+='">';(F=e.spent)?c=F.call(a,{hash:{}}):(c=a.spent,c="function"===typeof c?c():c);b+=B(c)+'</td>\n<td class="text-right ';c=a.selected;if((c=e["if"].call(a,c,{hash:{},inverse:w.noop,fn:w.program(25,function(a,c){return"highlighted"},d)}))||0===c)b+=c;b+='">';(F=e.received)?c=F.call(a,{hash:{}}):(c=a.received,c="function"===typeof c?c():c);b+=B(c)+'</td>\n<td class="filled border-left allocate ';(F=e.allocateOrMatchOnClickClass)?
c=F.call(a,{hash:{}}):(c=a.allocateOrMatchOnClickClass,c="function"===typeof c?c():c);b+=B(c)+" ";c=a.selected;if((c=e["if"].call(a,c,{hash:{},inverse:w.noop,fn:w.program(27,function(a,c){return"highlighted"},d)}))||0===c)b+=c;b+='">\n\n  <div class="allocate-options">\n    ';c=a.processedType;if((c=(F=e.ifEqual)?F.call(a,c,"AUTO_MATCHED",{hash:{},inverse:w.noop,fn:w.program(29,u,d)}):A.call(a,"ifEqual",c,"AUTO_MATCHED",{hash:{},inverse:w.noop,fn:w.program(29,u,d)}))||0===c)b+=c;b+="\n    ";c=a.processedType;
if((c=(F=e.ifEqual)?F.call(a,c,"AUTO_CODED",{hash:{},inverse:w.noop,fn:w.program(31,v,d)}):A.call(a,"ifEqual",c,"AUTO_CODED",{hash:{},inverse:w.noop,fn:w.program(31,v,d)}))||0===c)b+=c;b+='\n\n    <div class="allocate-options__container clearfix">\n      <div class="message ';c=a.linked;if((c=e.unless.call(a,c,{hash:{},inverse:w.noop,fn:w.program(33,function(a,c){return"unlinked"},d)}))||0===c)b+=c;b+='" tabindex="0">';(F=e.allocateOrMatchMessage)?c=F.call(a,{hash:{}}):(c=a.allocateOrMatchMessage,
c="function"===typeof c?c():c);b+=B(c)+"</div>\n      ";c={inputName:"allocatedAccountId","data-key-codes-to-ignore":"43,107,16,187","data-collection":"accounts","data-labels":"number,name,type",widgetCssClass:"hidden","data-label-field":"name"};c=(F=e.TypeaheadDropdown)?F.call(a,{hash:c}):A.call(a,"TypeaheadDropdown",{hash:c});b+=B(c)+'\n      <div class="form-group">\n        <div class="smallLoadingSpinner" style="display: none"></div>\n      </div>\n    </div>\n\n    ';c=a.linked;if((c=e["if"].call(a,
c,{hash:{},inverse:w.noop,fn:w.program(35,function(a,c){var b,d;b="\n    ";d=a.reportable;if((d=e["if"].call(a,d,{hash:{},inverse:w.noop,fn:w.program(36,z,c)}))||0===d)b+=d;return b+"\n    "},d)}))||0===c)b+=c;b+="\n\n    ";c=a.linked;if((c=e["if"].call(a,c,{hash:{},inverse:w.noop,fn:w.program(38,function(a,c){var b,d;b='\n      <i class="myob-icon-remove-2 icons-medium unlink-button hover-unless-touch ';d=a.touch;if((d=e["if"].call(a,d,{hash:{},inverse:w.noop,fn:w.program(39,y,c)}))||0===d)b+=d;
return b+'clickable"></i>\n    '},d)}))||0===c)b+=c;b+='\n  </div>\n\n</td>\n<td class="filled text-right ';c=a.selected;if((c=e["if"].call(a,c,{hash:{},inverse:w.noop,fn:w.program(41,function(a,c){return"highlighted"},d)}))||0===c)b+=c;b+='">';(F=e.ifRegisteredForGst)?c=F.call(a,{hash:{},inverse:w.noop,fn:w.program(43,D,d)}):(c=a.ifRegisteredForGst,c="function"===typeof c?c():c);e.ifRegisteredForGst||(c=C.call(a,c,{hash:{},inverse:w.noop,fn:w.program(43,D,d)}));if(c||0===c)b+=c;b+='</td>\n<td class="filled actions-cell ';
c=a.selected;if((c=e["if"].call(a,c,{hash:{},inverse:w.noop,fn:w.program(45,function(a,c){return"highlighted"},d)}))||0===c)b+=c;return b+'">\n  <button type="button" class="btn btn-default btn-xs actions-button" tabindex="-1">\n    <i class="myob-icon-down-18"></i>\n  </button>\n</td>\n'});return this.HandlebarsTemplates["banking/transactions/bank_transactions_row"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["banking/transactions/banking_tabs"]=Handlebars.template(function(b,a,e,c,d){return'<td colspan="9">\n  <div class="slidable">\n    <ul class="nav nav-tabs">\n      <li>\n        <a class="note-tab tab clickable" data-panel="note-panel" data-focus-element-id="#note">\n          <div class="note-tab">Note</div>\n        </a>\n      </li>\n      <li>\n        <a class="transfer-transaction-tab tab clickable" data-panel="transfer-transaction-panel">\n          <div class="transfer-transaction-tab">Transfer</div>\n        </a>\n      </li>\n      <li>\n        <a class="allocate-transaction-tab tab clickable" data-panel="allocate-transaction-panel">\n          <div class="allocate-transaction-tab">Allocate</div>\n        </a>\n      </li>\n      <li class="active">\n          <a class="match-transaction-tab tab clickable" data-panel="match-transaction-panel">\n              <div class="match-transaction-tab">Match transaction</div>\n          </a>\n      </li>\n    </ul>\n\n    <div class="tab-content">\n      <div id="match-transaction-panel" class="expandedPane"></div>\n      <div id="allocate-transaction-panel" class="expandedPane hidden"></div>\n      <div id="transfer-transaction-panel"\n           class="expandedPane hidden"></div>\n      <div id="allocation-rule-panel" class="expandedPane"></div>\n      <div id="note-panel" class="expandedPane hidden"></div>\n    </div>\n  </div>\n</td>\n'});
return this.HandlebarsTemplates["banking/transactions/banking_tabs"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["banking/transactions/import_statement"]=Handlebars.template(function(b,a,e,c,d){e=e||b.helpers;var f=e.helperMissing,g=this.escapeExpression;b='<h3>Import bank or credit card statement</h3>\n<div class="row">\n    <div class="col-xs-8">\n      ';c={inputLabel:"Bank/Credit Card Account",inputName:"accountId","data-prompt":"Select an account","data-collection":"accounts","data-labels":"name,number","data-label-field":"name",
labelCssClass:"",widgetCssClass:""};c=(d=e.TypeaheadDropdown)?d.call(a,{hash:c}):f.call(a,"TypeaheadDropdown",{hash:c});b+=g(c)+'\n    </div>\n    <div class="col-xs-9 col-xs-offset-2">\n        <div class="form-group">\n            <label class="control-label" for="statementFile">Statement file</label>\n            <div class="form-control-wrapper">\n                <div class="input-group">\n                    <input type="file" id="uploadInput" name="uploadInput" />\n                </div>\n                <span class="help-line error-message file-upload-error"></span>\n            </div>\n        </div>\n    </div>\n    <div class="col-xs-5">\n      ';
c={inputLabel:"Date format if using QIF",inputName:"statementFileDateFormat",labelCssClass:"",widgetCssClass:"","data-collection":"dateFormats","data-name-field":"name","data-value-field":"name"};c=(d=e.Select)?d.call(a,{hash:c}):f.call(a,"Select",{hash:c});return b+=g(c)+'\n    </div>\n</div>\n<div class="row top-buffer">\n  <div class="col-xs-24 button-group pull-right text-right">\n    <button id="cancelButton" class="btn btn-default">Cancel</button>\n    <button id="import-button" class="importButton btn btn-primary action">Import now</button>\n  </div>\n</div>\n'});
return this.HandlebarsTemplates["banking/transactions/import_statement"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["banking/transactions/match_transaction_header"]=Handlebars.template(function(b,a,e,c,d){return'<tr>\n  <th></th>\n  <th data-field="transactionDate" class="transaction-date-col">Date<i class="fa fa-caret-down"></i></th>\n  <th data-field="description" class="transaction-col">Essentials transactions</th>\n  <th data-field="amountRemaining" class="amount-col text-right">Amount remaining ($)</th>\n  <th class="amount-col text-right">Amount applied ($)</th>\n</tr>\n'});return this.HandlebarsTemplates["banking/transactions/match_transaction_header"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["banking/transactions/match_transaction_panel"]=Handlebars.template(function(b,a,e,c,d){e=e||b.helpers;var f=e.helperMissing,g=this.escapeExpression;b='<div class="toolbar form-horizontal">\n  <div class="form-group">\n    <div class="match-transaction-search padding-left-10">\n      ';c={inputLabel:"Search",inputName:"search"};c=(d=e.TextInput)?d.call(a,{hash:c}):f.call(a,"TextInput",{hash:c});b+=g(c)+'\n    </div>\n    <div class="match-transaction-filter">\n        ';
c={inputLabel:"Filter by:",inputName:"filter","data-collection":"filters","data-name-field":"name","data-value-field":"id"};c=(d=e.Select)?d.call(a,{hash:c}):f.call(a,"Select",{hash:c});b+=g(c)+'\n    </div>\n  </div>\n</div>\n\n<div class="match-table-container">\n</div>\n\n<div class="tab-footer">\n  <div class="row">\n    <div class="col-xs-offset-12 col-xs-12">\n    </div>\n    <div class="col-xs-24">\n      <div class="pull-right">\n        ';c=(d=e.includePartial)?d.call(a,"transaction_panel_unsaved_change_message",
{hash:{}}):f.call(a,"includePartial","transaction_panel_unsaved_change_message",{hash:{}});return b+=g(c)+'\n        <label class="h4 margin-bottom-00 margin-top-00 vcenter margin-right-20"><span class="text-gray-dark">Remaining balance:</span> <span id="remainingBalance"></span> </label>\n        <button id="cancelButton" class="btn btn-default cancel-match">Cancel</button>\n        <button id="saveButton" class="btn btn-primary action save-match">Save</button>\n      </div>\n    </div>\n  </div>\n</div>\n'});
return this.HandlebarsTemplates["banking/transactions/match_transaction_panel"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["banking/transactions/match_transaction_row"]=Handlebars.template(function(b,a,e,c,d){function f(a,c){return"disable-match"}function g(a,c){return"disable-match"}function h(a,c){return"disable-match"}function l(a,c){return"disable-match"}function k(a,c){return"disable-match"}e=e||b.helpers;var m,n=this.escapeExpression,q=e.helperMissing;b='<td class="text-center ';c=a.disabled;if((c=(m=e.unlessBlank)?m.call(a,
c,{hash:{},inverse:this.noop,fn:this.program(1,f,d)}):q.call(a,"unlessBlank",c,{hash:{},inverse:this.noop,fn:this.program(1,f,d)}))||0===c)b+=c;b+='">\n    ';c={inputLabel:"",inputName:"matched",widgetCssClass:"checkbox-col","data-css-class":""};c["data-disabled"]=a.disabled;c=(m=e.Checkbox)?m.call(a,{hash:c}):q.call(a,"Checkbox",{hash:c});b+=n(c)+'\n</td>\n<td class="';c=a.disabled;if((c=(m=e.unlessBlank)?m.call(a,c,{hash:{},inverse:this.noop,fn:this.program(3,g,d)}):q.call(a,"unlessBlank",c,{hash:{},
inverse:this.noop,fn:this.program(3,g,d)}))||0===c)b+=c;b+='">';(m=e.formattedDate)?c=m.call(a,{hash:{}}):(c=a.formattedDate,c="function"===typeof c?c():c);b+=n(c)+'</td>\n<td class="';c=a.disabled;if((c=(m=e.unlessBlank)?m.call(a,c,{hash:{},inverse:this.noop,fn:this.program(5,h,d)}):q.call(a,"unlessBlank",c,{hash:{},inverse:this.noop,fn:this.program(5,h,d)}))||0===c)b+=c;b+='">\n  ';(m=e.description)?c=m.call(a,{hash:{}}):(c=a.description,c="function"===typeof c?c():c);b+=n(c)+"\n  ";c=a.isPartiallyPaidTransaction;
if((c=e["if"].call(a,c,{hash:{},inverse:this.noop,fn:this.program(7,function(a,c){var b,d;b='\n    <span class="accrual-total animated fadeIn">total $';(d=e.formattedAccrualTotal)?d=d.call(a,{hash:{}}):(d=a.formattedAccrualTotal,d="function"===typeof d?d():d);return b+=n(d)+"</span>\n  "},d)}))||0===c)b+=c;b+='\n</td>\n<td class="text-right ';c=a.disabled;if((c=(m=e.unlessBlank)?m.call(a,c,{hash:{},inverse:this.noop,fn:this.program(9,l,d)}):q.call(a,"unlessBlank",c,{hash:{},inverse:this.noop,fn:this.program(9,
l,d)}))||0===c)b+=c;b+='">';(m=e.formattedAmountRemaining)?c=m.call(a,{hash:{}}):(c=a.formattedAmountRemaining,c="function"===typeof c?c():c);b+=n(c)+'</td>\n<td class="text-right ';c=a.disabled;if((c=(m=e.unlessBlank)?m.call(a,c,{hash:{},inverse:this.noop,fn:this.program(11,k,d)}):q.call(a,"unlessBlank",c,{hash:{},inverse:this.noop,fn:this.program(11,k,d)}))||0===c)b+=c;b+='">';(m=e.formattedAmountApplied)?c=m.call(a,{hash:{}}):(c=a.formattedAmountApplied,c="function"===typeof c?c():c);return b+=
n(c)+"</td>\n"});return this.HandlebarsTemplates["banking/transactions/match_transaction_row"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["banking/transactions/note_character_count"]=Handlebars.template(function(b,a,e,c,d){e=e||b.helpers;c=this.escapeExpression;b='<div id="note-character-count"><small>';(e=e.noteCharacterCount)?a=e.call(a,{hash:{}}):(a=a.noteCharacterCount,a="function"===typeof a?a():a);return b+=c(a)+"</small></div>\n"});return this.HandlebarsTemplates["banking/transactions/note_character_count"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["banking/transactions/note_panel"]=Handlebars.template(function(b,a,e,c,d){e=e||b.helpers;var f=e.helperMissing,g=this.escapeExpression;b='<div>\n  <div class="note-panel-container">\n    ';c={inputLabel:"",inputId:"note",inputName:"note","data-maxlength":"140","data-autosize":"false","data-rows":"3","data-cols":"80",widgetCssClass:"margin-bottom-20",labelCssClass:""};c=(d=e.AutosizeTextarea)?d.call(a,{hash:c}):
f.call(a,"AutosizeTextarea",{hash:c});b+=g(c)+'\n  </div>\n\n  <div class="row">\n    <div class="col-xs-24 no-padding">\n      <div class="pull-right">\n        ';c=(d=e.includePartial)?d.call(a,"transaction_panel_unsaved_change_message",{hash:{}}):f.call(a,"includePartial","transaction_panel_unsaved_change_message",{hash:{}});return b+=g(c)+'\n        <label id="note-character-count-container" class="text-gray-base"></label>\n        <label class="margin-right-40 text-gray-dark">characters remaining</label>\n        <button id="cancelButton" class="btn btn-default cancel-split">Cancel</button>\n        <button id="saveButton" class="btn btn-primary action save-split">Save</button>\n      </div>\n    </div>\n  </div>\n</div>\n'});
return this.HandlebarsTemplates["banking/transactions/note_panel"]}).call(this);(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["banking/transactions/partial/transaction_panel_unsaved_change_message"]=Handlebars.template(function(b,a,e,c,d){return'<span id="unsavedWarning" class="alert alert-warning hidden">\n  <span class="error-message">\n    You have unsaved changes, please select save or cancel.\n  </span>\n</span>\n'});return this.HandlebarsTemplates["banking/transactions/partial/transaction_panel_unsaved_change_message"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["banking/transactions/remaining_balance"]=Handlebars.template(function(b,a,e,c,d){return'<h4>\n  <label><span id="remainingBalance"></span> </label>\n</h4>\n'});return this.HandlebarsTemplates["banking/transactions/remaining_balance"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["banking/transactions/remaining_percentage"]=Handlebars.template(function(b,a,e,c,d){return'<h4>\n  <label><span id="remainingPercentage"></span></label>\n</h4>\n'});return this.HandlebarsTemplates["banking/transactions/remaining_percentage"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["banking/transactions/reportable"]=Handlebars.template(function(b,a,e,c,d){function f(a,c){var b,d;b="\n  ";if((d=(d=e.ifBusinessSetting)?d.call(a,"businessReportable",!0,{hash:{},inverse:m.noop,fn:m.program(2,g,c)}):l.call(a,"ifBusinessSetting","businessReportable",!0,{hash:{},inverse:m.noop,fn:m.program(2,g,c)}))||0===d)b+=d;return b+"\n"}function g(a,c){var b,d,f;b='\n    <div class="row">\n      <div class="col-xs-5">\n        ';
d={inputLabel:"Mark as reportable",inputName:"reportable",widgetCssClass:"col-xs-24 reportable control-label"};d=(f=e.Checkbox)?f.call(a,{hash:d}):l.call(a,"Checkbox",{hash:d});b+=k(d)+'\n      </div>\n    </div>\n    <div class="row bottom-buffer" id="contact-selector-row">\n      <div class="col-xs-6">\n        ';d={inputName:"contactId","data-name":"contactId","data-collection":"contacts","data-collection-filter":"activeSuppliers","data-labels":"name,firstName,lastName","data-prompt":"Please select a supplier",
"data-label-field":"name",widgetCssClass:"col-xs-24"};d=(f=e.TypeaheadDropdown)?f.call(a,{hash:d}):l.call(a,"TypeaheadDropdown",{hash:d});return b+=k(d)+'\n      </div>\n      <div class="col-xs-1"><i class="fa fa-lg fa-times-circle clear-supplier-button clickable hidden"></i></div>\n    </div>\n  '}e=e||b.helpers;b="";var h,l=e.helperMissing,k=this.escapeExpression,m=this;c=a.isDeposit;if((c=(h=e.ifEqual)?h.call(a,c,!1,{hash:{},inverse:m.noop,fn:m.program(1,f,d)}):l.call(a,"ifEqual",c,!1,{hash:{},
inverse:m.noop,fn:m.program(1,f,d)}))||0===c)b+=c;return b+"\n"});return this.HandlebarsTemplates["banking/transactions/reportable"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["banking/transactions/reportable_rule"]=Handlebars.template(function(b,a,e,c,d){function f(a,c){var b,d;b="\n  ";if((d=(d=e.ifBusinessSetting)?d.call(a,"businessReportable",!0,{hash:{},inverse:l.noop,fn:l.program(2,g,c)}):k.call(a,"ifBusinessSetting","businessReportable",!0,{hash:{},inverse:l.noop,fn:l.program(2,g,c)}))||0===d)b+=d;return b+"\n"}function g(a,c){return'\n    <div class="form-group">\n      <span id="rule-supplier-container" data-id="reportable" data-widget="Checkbox" data-name="reportable"></span>\n      <label for="reportable">Mark as reportable</label>\n      <div class="col-xs-20 form-control-wrapper" data-id="" data-widget="TypeaheadDropdown" data-name="contactId" data-collection="contacts" data-collection-filter="activeSuppliers" data-labels="name,firstName,lastName" data-label-field="name">\n      </div>\n    </div>\n\n    <i class="fa fa-lg fa-times-circle clear-supplier-button clickable hidden"></i>\n  '}
e=e||b.helpers;b="";var h,l=this,k=e.helperMissing;c=a.isDeposit;if((c=(h=e.ifEqual)?h.call(a,c,!1,{hash:{},inverse:l.noop,fn:l.program(1,f,d)}):k.call(a,"ifEqual",c,!1,{hash:{},inverse:l.noop,fn:l.program(1,f,d)}))||0===c)b+=c;return b+"\n"});return this.HandlebarsTemplates["banking/transactions/reportable_rule"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["banking/transactions/transfer_transaction_header"]=Handlebars.template(function(b,a,e,c,d){return"<tr>\n  <th></th>\n  <th>Date</th>\n  <th>Bank Account</th>\n  <th>Description</th>\n  <th>Withdrawal</th>\n  <th>Deposit</th>\n</tr>\n"});return this.HandlebarsTemplates["banking/transactions/transfer_transaction_header"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["banking/transactions/transfer_transaction_panel"]=Handlebars.template(function(b,a,e,c,d){e=e||b.helpers;var f=e.helperMissing,g=this.escapeExpression;b='<div id="transfer-record-count" class="margin-bottom-10 text-gray-dark" ></div>\n\n<div id="transfer-table-container" class="pre-scrollable"></div>\n\n<div class="tab-footer">\n  <div class="no-padding">\n    <a class="manual-transfer btn btn-default" href="';
c=a.businessId;c=(d=e.appUrl)?d.call(a,c,"/banking/transferFunds",{hash:{}}):f.call(a,"appUrl",c,"/banking/transferFunds",{hash:{}});b+=g(c)+'">Manually create transfer</a>\n    <div class="pull-right">\n      ';c=(d=e.includePartial)?d.call(a,"transaction_panel_unsaved_change_message",{hash:{}}):f.call(a,"includePartial","transaction_panel_unsaved_change_message",{hash:{}});return b+=g(c)+'\n      <button id="cancelButton" class="btn btn-default">Cancel</button>\n      <button id="saveButton" class="btn btn-primary action" disabled="true">Save</button>\n    </div>\n  </div>\n</div>\n'});
return this.HandlebarsTemplates["banking/transactions/transfer_transaction_panel"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["banking/transactions/transfer_transaction_row"]=Handlebars.template(function(b,a,e,c,d){e=e||b.helpers;var f=e.helperMissing,g=this.escapeExpression;b="<td>\n  ";c={inputLabel:"",inputId:"transfer",inputName:"transfer",inputValue:!0,widgetCssClass:"text-right","data-css-class":""};c=(d=e.Radio)?d.call(a,{hash:c}):f.call(a,"Radio",{hash:c});b+=g(c)+"\n</td>\n<td>";c=a.transactionDate;c=(d=e.frontendDateFormat)?
d.call(a,c,{hash:{}}):f.call(a,"frontendDateFormat",c,{hash:{}});b+=g(c)+"</td>\n<td>";(d=e.accountName)?c=d.call(a,{hash:{}}):(c=a.accountName,c="function"===typeof c?c():c);b+=g(c)+"</td>\n<td>";(d=e.description)?c=d.call(a,{hash:{}}):(c=a.description,c="function"===typeof c?c():c);b+=g(c)+"</td>\n<td>";c=a.withdrawal;c=(d=e.moneyValueFormatWithoutDollarSign)?d.call(a,c,{hash:{}}):f.call(a,"moneyValueFormatWithoutDollarSign",c,{hash:{}});b+=g(c)+"</td>\n<td>";c=a.deposit;c=(d=e.moneyValueFormatWithoutDollarSign)?
d.call(a,c,{hash:{}}):f.call(a,"moneyValueFormatWithoutDollarSign",c,{hash:{}});return b+=g(c)+"</td>\n"});return this.HandlebarsTemplates["banking/transactions/transfer_transaction_row"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["billflow/accordion"]=Handlebars.template(function(b,a,e,c,d){e=e||b.helpers;b='<div class="accordion-header">\n  <div class="ordinal">1</div>\n  <div class="accordion-heading">Select a document</div>\n  <div class="valign-child active-header-content">\n      <p>Sort by</p>\n      <div class="dropdown">\n          <button class="btn btn-default dropdown-toggle" type="button" id="document-sort-dropdown" data-toggle="dropdown">\n              Recently Added\n          </button>\n          <ul class="dropdown-menu" role="menu" aria-labelledby="document-sort-dropdown">\n              <li role="presentation"><button class="btn btn-link sortByNewest btn-active">Recently Added</button></li>\n              <li role="presentation"><button class="btn btn-link sortByOldest">Oldest</button></li>\n          </ul>\n      </div>\n  </div>\n</div>\n<div class="accordion-content">\n    <div id="billflowDropzonePanel"></div>\n    <div id="selectThumbnailPanel"></div>\n</div>\n';c=
a.inTrayContext;if((c=e["if"].call(a,c,{hash:{},inverse:this.noop,fn:this.program(1,function(a,c){return'\n<div class="accordion-header">\n    <div class="ordinal">2</div>\n    <div class="accordion-heading bill-panel-heading">Bill</div>\n</div>\n<div class="accordion-content">\n    <div id="newBillPanel" class="accordion-content"></div>\n</div>\n'},d)}))||0===c)b+=c;return b+"\n"});return this.HandlebarsTemplates["billflow/accordion"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["billflow/attach_to_bill_buttons"]=Handlebars.template(function(b,a,e,c,d){return'<button id="link-to-bill" class="btn btn-primary" disabled>Link to selected bill</button>\n<button class="btn cancel-button btn-default">Cancel</button>\n'});return this.HandlebarsTemplates["billflow/attach_to_bill_buttons"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["billflow/badge"]=Handlebars.template(function(b,a,e,c,d){e=e||b.helpers;c=this.escapeExpression;b='\n<div class="';(d=e.badgeClass)?d=d.call(a,{hash:{}}):(d=a.badgeClass,d="function"===typeof d?d():d);b+=c(d)+" ";(d=e.showBadge)?d=d.call(a,{hash:{}}):(d=a.showBadge,d="function"===typeof d?d():d);return b+=c(d)+'"></div>\n\n'});return this.HandlebarsTemplates["billflow/badge"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["billflow/bill_header"]=Handlebars.template(function(b,a,e,c,d){return'<tr>\n  <th>&nbsp;</th>\n  <th data-field="number" class="desc">Bill No.<i class="fa fa-caret-down"></i></th>\n  <th data-field="supplierInvoiceNumber">Invoice No.</th>\n  <th data-field="contactName">Supplier</th>\n  <th data-field="issueDate">Received</th>\n  <th data-field="total" class="text-right">Total</th>\n</tr>\n'});return this.HandlebarsTemplates["billflow/bill_header"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["billflow/bill_row"]=Handlebars.template(function(b,a,e,c,d){function f(a,c){var b,d;b='<input class="billSelector" type="radio" name="attach" data-billId="';(d=e.id)?d=d.call(a,{hash:{}}):(d=a.id,d="function"===typeof d?d():d);return b+=h(d)+'">'}e=e||b.helpers;var g,h=this.escapeExpression,l=e.helperMissing;b="<td>";c=a.type;if((c=(g=e.ifEqual)?g.call(a,c,"BILL",{hash:{},inverse:this.noop,fn:this.program(1,
f,d)}):l.call(a,"ifEqual",c,"BILL",{hash:{},inverse:this.noop,fn:this.program(1,f,d)}))||0===c)b+=c;b+='</td>\n<td><a href="';c=a.id;d=a.type;c=(g=e.transactionUrl)?g.call(a,d,c,{hash:{}}):l.call(a,"transactionUrl",d,c,{hash:{}});b+=h(c)+'">';(g=e.number)?c=g.call(a,{hash:{}}):(c=a.number,c="function"===typeof c?c():c);b+=h(c)+"</a></td>\n<td>";(g=e.supplierInvoiceNumber)?c=g.call(a,{hash:{}}):(c=a.supplierInvoiceNumber,c="function"===typeof c?c():c);b+=h(c)+'</td>\n<td><a href="';c=a.id;d=a.type;
c=(g=e.transactionUrl)?g.call(a,d,c,{hash:{}}):l.call(a,"transactionUrl",d,c,{hash:{}});b+=h(c)+'">';(g=e.contactName)?c=g.call(a,{hash:{}}):(c=a.contactName,c="function"===typeof c?c():c);b+=h(c)+"</a></td>\n<td>";c=a.issueDate;c=(g=e.frontendDateFormat)?g.call(a,c,{hash:{}}):l.call(a,"frontendDateFormat",c,{hash:{}});b+=h(c)+'</td>\n<td class="text-right">';c=a.total;c=(g=e.moneyValueFormatWithoutDollarSignShowZero)?g.call(a,c,{hash:{}}):l.call(a,"moneyValueFormatWithoutDollarSignShowZero",c,{hash:{}});
return b+=h(c)+"</td>\n\n"});return this.HandlebarsTemplates["billflow/bill_row"]}).call(this);(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["billflow/carousel_paging_button"]=Handlebars.template(function(b,a,e,c,d){e=e||b.helpers;c=this.escapeExpression;b='\n<button type="button" class="carousel-arrow-';(e=e.direction)?a=e.call(a,{hash:{}}):(a=a.direction,a="function"===typeof a?a():a);return b+=c(a)+'"></button>\n'});return this.HandlebarsTemplates["billflow/carousel_paging_button"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["billflow/documents"]=Handlebars.template(function(b,a,e,c,d){return'<div id="billflow">\n\n  <h1>Link documents to bills</h1>\n\n  <div id="accordion">\n  </div>\n  <div id="documents-unavailable"></div>\n\n</div>\n'});return this.HandlebarsTemplates["billflow/documents"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["billflow/dropzone_panel"]=Handlebars.template(function(b,a,e,c,d){return'<div id="uploadPreviewPanelInner">\n  <div id="uploading-items">\n    <div id="template" class="file-row large-wrapper">\n      <div class="upload-progress-view">\n        <p class="filename-box">\n          <span data-dz-name></span>\n        </p>\n        <div class="progress progress-background" role="progressbar">\n          <div class="progress-bar" data-dz-uploadprogress>\n          </div>\n        </div>\n        <p class="filesize-text filesize-text-lg">\n          <span data-dz-size></span>\n        </p>\n        <div class="bottom-panel">\n          <button data-dz-remove type="button" class="btn btn-default cancel-upload-button">\n            <span class="glyphicon glyphicon-remove-sign"></span> Cancel\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div class="fatal-error-message">\n    <p><span></span></p>\n  </div>\n  <div>\n    <button class="continue-button btn btn-default">Continue</button>\n  </div>\n</div>\n<div class="drag-in">\n  <p class="drag-in"><span>Drag and drop your documents here.</span><p>\n</div>\n'});
return this.HandlebarsTemplates["billflow/dropzone_panel"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["billflow/ocr_hint"]=Handlebars.template(function(b,a,e,c,d){return'<button type="button" class="close" data-dismiss="alert"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>\n<p>\n  We had a go at filling in some of your data. Check that the <span class="prefilled-example">pre-filled details in blue</span> are correct, and\n  fill in the <span class="invalid-example">yellow fields</span>\n</p>\n'});return this.HandlebarsTemplates["billflow/ocr_hint"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["billflow/pdf_enlarge_view"]=Handlebars.template(function(b,a,e,c,d){return'<div id="closeEnlargeContainer">\n  <div id="closeEnlarge" class="clearfix">\n    <div id="closeEnlargeButton"></div>\n  </div>\n</div>\n<div id="spinner"></div>\n<div id="enlargeContainer">\n</div>\n'});return this.HandlebarsTemplates["billflow/pdf_enlarge_view"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["billflow/pdf_viewer"]=Handlebars.template(function(b,a,e,c,d){return'\n<div id="outerContainer" class="loadingInProgress">\n\n<div id="sidebarContainer" class="hidden">\n  <div id="toolbarSidebar">\n    <div class="splitToolbarButton toggled">\n      <button id="viewThumbnail" class="toolbarButton group toggled" title="Show Thumbnails" tabindex="2" data-l10n-id="thumbs">\n        <span data-l10n-id="thumbs_label">Thumbnails</span>\n      </button>\n      <button id="viewOutline" class="toolbarButton group" title="Show Document Outline" tabindex="3" data-l10n-id="outline">\n        <span data-l10n-id="outline_label">Document Outline</span>\n      </button>\n      <button id="viewAttachments" class="toolbarButton group" title="Show Attachments" tabindex="4" data-l10n-id="attachments">\n        <span data-l10n-id="attachments_label">Attachments</span>\n      </button>\n    </div>\n  </div>\n  <div id="sidebarContent">\n    <div id="thumbnailView">\n    </div>\n    <div id="outlineView" class="hidden">\n    </div>\n    <div id="attachmentsView" class="hidden">\n    </div>\n  </div>\n</div>  \x3c!-- sidebarContainer --\x3e\n\n<div id="mainContainer">\n  <div class="findbar hidden doorHanger hiddenSmallView" id="findbar">\n    <label for="findInput" class="toolbarLabel" data-l10n-id="find_label">Find:</label>\n    <input id="findInput" class="toolbarField" tabindex="91">\n    <div class="splitToolbarButton">\n      <button class="toolbarButton findPrevious" title="" id="findPrevious" tabindex="92" data-l10n-id="find_previous">\n        <span data-l10n-id="find_previous_label">Previous</span>\n      </button>\n      <div class="splitToolbarButtonSeparator"></div>\n      <button class="toolbarButton findNext" title="" id="findNext" tabindex="93" data-l10n-id="find_next">\n        <span data-l10n-id="find_next_label">Next</span>\n      </button>\n    </div>\n    <input type="checkbox" id="findHighlightAll" class="toolbarField">\n    <label for="findHighlightAll" class="toolbarLabel" tabindex="94" data-l10n-id="find_highlight">Highlight all</label>\n    <input type="checkbox" id="findMatchCase" class="toolbarField">\n    <label for="findMatchCase" class="toolbarLabel" tabindex="95" data-l10n-id="find_match_case_label">Match case</label>\n    <span id="findMsg" class="toolbarLabel"></span>\n  </div>  \x3c!-- findbar --\x3e\n\n  <div id="secondaryToolbar" class="secondaryToolbar hidden doorHangerRight">\n    <div id="secondaryToolbarButtonContainer">\n      <button id="secondaryPresentationMode" class="secondaryToolbarButton presentationMode visibleLargeView" title="Switch to Presentation Mode" tabindex="51" data-l10n-id="presentation_mode">\n        <span data-l10n-id="presentation_mode_label">Presentation Mode</span>\n      </button>\n\n      <button id="secondaryOpenFile" class="secondaryToolbarButton openFile visibleLargeView" title="Open File" tabindex="52" data-l10n-id="open_file">\n        <span data-l10n-id="open_file_label">Open</span>\n      </button>\n\n      <button id="secondaryPrint" class="secondaryToolbarButton print visibleMediumView" title="Print" tabindex="53" data-l10n-id="print">\n        <span data-l10n-id="print_label">Print</span>\n      </button>\n\n      <button id="secondaryDownload" class="secondaryToolbarButton download visibleMediumView" title="Download" tabindex="54" data-l10n-id="download">\n        <span data-l10n-id="download_label">Download</span>\n      </button>\n\n      <a href="#" id="secondaryViewBookmark" class="secondaryToolbarButton bookmark visibleSmallView" title="Current view (copy or open in new window)" tabindex="55" data-l10n-id="bookmark">\n        <span data-l10n-id="bookmark_label">Current View</span>\n      </a>\n\n      <div class="horizontalToolbarSeparator visibleLargeView"></div>\n\n      <button id="firstPage" class="secondaryToolbarButton firstPage" title="Go to First Page" tabindex="56" data-l10n-id="first_page">\n        <span data-l10n-id="first_page_label">Go to First Page</span>\n      </button>\n      <button id="lastPage" class="secondaryToolbarButton lastPage" title="Go to Last Page" tabindex="57" data-l10n-id="last_page">\n        <span data-l10n-id="last_page_label">Go to Last Page</span>\n      </button>\n\n      <div class="horizontalToolbarSeparator"></div>\n\n      <button id="pageRotateCw" class="secondaryToolbarButton rotateCw" title="Rotate Clockwise" tabindex="58" data-l10n-id="page_rotate_cw">\n        <span data-l10n-id="page_rotate_cw_label">Rotate Clockwise</span>\n      </button>\n      <button id="pageRotateCcw" class="secondaryToolbarButton rotateCcw" title="Rotate Counterclockwise" tabindex="59" data-l10n-id="page_rotate_ccw">\n        <span data-l10n-id="page_rotate_ccw_label">Rotate Counterclockwise</span>\n      </button>\n\n      <div class="horizontalToolbarSeparator"></div>\n\n      <button id="toggleHandTool" class="secondaryToolbarButton handTool" title="Enable hand tool" tabindex="60" data-l10n-id="hand_tool_enable">\n        <span data-l10n-id="hand_tool_enable_label">Enable hand tool</span>\n      </button>\n\n      <div class="horizontalToolbarSeparator"></div>\n\n      <button id="documentProperties" class="secondaryToolbarButton documentProperties" title="Document Properties\u2026" tabindex="61" data-l10n-id="document_properties">\n        <span data-l10n-id="document_properties_label">Document Properties\u2026</span>\n      </button>\n    </div>\n  </div>  \x3c!-- secondaryToolbar --\x3e\n\n  <div class="toolbar hidden">\n    <div id="toolbarContainer">\n      <div id="toolbarViewer">\n        <div id="toolbarViewerLeft">\n          <button id="sidebarToggle" class="toolbarButton" title="Toggle Sidebar" tabindex="11" data-l10n-id="toggle_sidebar">\n            <span data-l10n-id="toggle_sidebar_label">Toggle Sidebar</span>\n          </button>\n          <div class="toolbarButtonSpacer"></div>\n          <button id="viewFind" class="toolbarButton group hiddenSmallView" title="Find in Document" tabindex="12" data-l10n-id="findbar">\n            <span data-l10n-id="findbar_label">Find</span>\n          </button>\n          <div class="splitToolbarButton">\n            <button class="toolbarButton pageUp" title="Previous Page" id="previous" tabindex="13" data-l10n-id="previous">\n              <span data-l10n-id="previous_label">Previous</span>\n            </button>\n            <div class="splitToolbarButtonSeparator"></div>\n            <button class="toolbarButton pageDown" title="Next Page" id="next" tabindex="14" data-l10n-id="next">\n              <span data-l10n-id="next_label">Next</span>\n            </button>\n          </div>\n          <label id="pageNumberLabel" class="toolbarLabel" for="pageNumber" data-l10n-id="page_label">Page: </label>\n          <input type="number" id="pageNumber" class="toolbarField pageNumber" value="1" size="4" min="1" tabindex="15">\n          <span id="numPages" class="toolbarLabel"></span>\n        </div>\n        <div id="toolbarViewerRight">\n          <button id="presentationMode" class="toolbarButton presentationMode hiddenLargeView" title="Switch to Presentation Mode" tabindex="31" data-l10n-id="presentation_mode">\n            <span data-l10n-id="presentation_mode_label">Presentation Mode</span>\n          </button>\n\n          <button id="openFile" class="toolbarButton openFile hiddenLargeView" title="Open File" tabindex="32" data-l10n-id="open_file">\n            <span data-l10n-id="open_file_label">Open</span>\n          </button>\n\n          <button id="print" class="toolbarButton print hiddenMediumView" title="Print" tabindex="33" data-l10n-id="print">\n            <span data-l10n-id="print_label">Print</span>\n          </button>\n\n          <button id="download" class="toolbarButton download hiddenMediumView" title="Download" tabindex="34" data-l10n-id="download">\n            <span data-l10n-id="download_label">Download</span>\n          </button>\n          \x3c!-- <div class="toolbarButtonSpacer"></div> --\x3e\n          <a href="#" id="viewBookmark" class="toolbarButton bookmark hiddenSmallView" title="Current view (copy or open in new window)" tabindex="35" data-l10n-id="bookmark">\n            <span data-l10n-id="bookmark_label">Current View</span>\n          </a>\n\n          <div class="verticalToolbarSeparator hiddenSmallView"></div>\n\n          <button id="secondaryToolbarToggle" class="toolbarButton" title="Tools" tabindex="36" data-l10n-id="tools">\n            <span data-l10n-id="tools_label">Tools</span>\n          </button>\n        </div>\n        <div class="outerCenter">\n          <div class="innerCenter" id="toolbarViewerMiddle">\n            <div class="splitToolbarButton">\n              <button id="zoomOut" class="toolbarButton zoomOut" title="Zoom Out" tabindex="21" data-l10n-id="zoom_out">\n                <span data-l10n-id="zoom_out_label">Zoom Out</span>\n              </button>\n              <div class="splitToolbarButtonSeparator"></div>\n              <button id="zoomIn" class="toolbarButton zoomIn" title="Zoom In" tabindex="22" data-l10n-id="zoom_in">\n                <span data-l10n-id="zoom_in_label">Zoom In</span>\n              </button>\n            </div>\n                  <span id="scaleSelectContainer" class="dropdownToolbarButton">\n                     <select id="scaleSelect" title="Zoom" tabindex="23" data-l10n-id="zoom">\n                       <option id="pageAutoOption" title="" value="auto" selected="selected" data-l10n-id="page_scale_auto">Automatic Zoom</option>\n                       <option id="pageActualOption" title="" value="page-actual" data-l10n-id="page_scale_actual">Actual Size</option>\n                       <option id="pageFitOption" title="" value="page-fit" data-l10n-id="page_scale_fit">Fit Page</option>\n                       <option id="pageWidthOption" title="" value="page-width" data-l10n-id="page_scale_width">Full Width</option>\n                       <option id="customScaleOption" title="" value="custom"></option>\n                       <option title="" value="0.5">50%</option>\n                       <option title="" value="0.75">75%</option>\n                       <option title="" value="1">100%</option>\n                       <option title="" value="1.25">125%</option>\n                       <option title="" value="1.5">150%</option>\n                       <option title="" value="2">200%</option>\n                       <option title="" value="3">300%</option>\n                       <option title="" value="4">400%</option>\n                     </select>\n                  </span>\n          </div>\n        </div>\n      </div>\n      <div id="loadingBar">\n        <div class="progress">\n          <div class="glimmer">\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n\n  <menu type="context" id="viewerContextMenu" class="hidden">\n    <menuitem id="contextFirstPage" label="First Page"\n              data-l10n-id="first_page"></menuitem>\n    <menuitem id="contextLastPage" label="Last Page"\n              data-l10n-id="last_page"></menuitem>\n    <menuitem id="contextPageRotateCw" label="Rotate Clockwise"\n              data-l10n-id="page_rotate_cw"></menuitem>\n    <menuitem id="contextPageRotateCcw" label="Rotate Counter-Clockwise"\n              data-l10n-id="page_rotate_ccw"></menuitem>\n  </menu>\n\n  <div id="viewerContainer" tabindex="0">\n    <div id="viewer"></div>\n  </div>\n\n  <div id="errorWrapper" hidden=\'true\'>\n    <div id="errorMessageLeft">\n      <span id="errorMessage"></span>\n      <button id="errorShowMore" data-l10n-id="error_more_info">\n        More Information\n      </button>\n      <button id="errorShowLess" data-l10n-id="error_less_info" hidden=\'true\'>\n        Less Information\n      </button>\n    </div>\n    <div id="errorMessageRight">\n      <button id="errorClose" data-l10n-id="error_close">\n        Close\n      </button>\n    </div>\n    <div class="clearBoth"></div>\n    <textarea id="errorMoreInfo" hidden=\'true\' readonly="readonly"></textarea>\n  </div>\n</div> \x3c!-- mainContainer --\x3e\n\n<div id="overlayContainer" class="hidden">\n  <div id="passwordOverlay" class="container hidden">\n    <div class="dialog">\n      <div class="row">\n        <p id="passwordText" data-l10n-id="password_label">Enter the password to open this PDF file:</p>\n      </div>\n      <div class="row">\n        <input type="password" id="password" class="toolbarField" />\n      </div>\n      <div class="buttonRow">\n        <button id="passwordCancel" class="overlayButton"><span data-l10n-id="password_cancel">Cancel</span></button>\n        <button id="passwordSubmit" class="overlayButton"><span data-l10n-id="password_ok">OK</span></button>\n      </div>\n    </div>\n  </div>\n  <div id="documentPropertiesOverlay" class="container hidden">\n    <div class="dialog">\n      <div class="row">\n        <span data-l10n-id="document_properties_file_name">File name:</span> <p id="fileNameField">-</p>\n      </div>\n      <div class="row">\n        <span data-l10n-id="document_properties_file_size">File size:</span> <p id="fileSizeField">-</p>\n      </div>\n      <div class="separator"></div>\n      <div class="row">\n        <span data-l10n-id="document_properties_title">Title:</span> <p id="titleField">-</p>\n      </div>\n      <div class="row">\n        <span data-l10n-id="document_properties_author">Author:</span> <p id="authorField">-</p>\n      </div>\n      <div class="row">\n        <span data-l10n-id="document_properties_subject">Subject:</span> <p id="subjectField">-</p>\n      </div>\n      <div class="row">\n        <span data-l10n-id="document_properties_keywords">Keywords:</span> <p id="keywordsField">-</p>\n      </div>\n      <div class="row">\n        <span data-l10n-id="document_properties_creation_date">Creation Date:</span> <p id="creationDateField">-</p>\n      </div>\n      <div class="row">\n        <span data-l10n-id="document_properties_modification_date">Modification Date:</span> <p id="modificationDateField">-</p>\n      </div>\n      <div class="row">\n        <span data-l10n-id="document_properties_creator">Creator:</span> <p id="creatorField">-</p>\n      </div>\n      <div class="separator"></div>\n      <div class="row">\n        <span data-l10n-id="document_properties_producer">PDF Producer:</span> <p id="producerField">-</p>\n      </div>\n      <div class="row">\n        <span data-l10n-id="document_properties_version">PDF Version:</span> <p id="versionField">-</p>\n      </div>\n      <div class="row">\n        <span data-l10n-id="document_properties_page_count">Page Count:</span> <p id="pageCountField">-</p>\n      </div>\n      <div class="buttonRow">\n        <button id="documentPropertiesClose" class="overlayButton"><span data-l10n-id="document_properties_close">Close</span></button>\n      </div>\n    </div>\n  </div>\n</div>  \x3c!-- overlayContainer --\x3e\n\n</div> \x3c!-- outerContainer --\x3e\n<div id="printContainer"></div>\n<div id="mozPrintCallback-shim" hidden>\n  <style scoped>\n    #mozPrintCallback-shim {\n      position: fixed;\n      top: 0;\n      left: 0;\n      height: 100%;\n      width: 100%;\n      z-index: 9999999;\n\n      display: block;\n      text-align: center;\n      background-color: rgba(0, 0, 0, 0.5);\n    }\n    #mozPrintCallback-shim[hidden] {\n      display: none;\n    }\n    @media print {\n      #mozPrintCallback-shim {\n        display: none;\n      }\n    }\n\n    #mozPrintCallback-shim .mozPrintCallback-dialog-box {\n      display: inline-block;\n      margin: -50px auto 0;\n      position: relative;\n      top: 45%;\n      left: 0;\n      min-width: 220px;\n      max-width: 400px;\n\n      padding: 9px;\n\n      border: 1px solid hsla(0, 0%, 0%, .5);\n      border-radius: 2px;\n      box-shadow: 0 1px 4px rgba(0, 0, 0, 0.3);\n\n      background-color: #474747;\n\n      color: hsl(0, 0%, 85%);\n      font-size: 16px;\n      line-height: 20px;\n    }\n    #mozPrintCallback-shim .progress-row {\n      clear: both;\n      padding: 1em 0;\n    }\n    #mozPrintCallback-shim progress {\n      width: 100%;\n    }\n    #mozPrintCallback-shim .relative-progress {\n      clear: both;\n      float: right;\n    }\n    #mozPrintCallback-shim .progress-actions {\n      clear: both;\n    }\n  </style>\n  <div class="mozPrintCallback-dialog-box">\n    \x3c!-- TODO: Localise the following strings --\x3e\n    Preparing document for printing...\n    <div class="progress-row">\n      <progress value="0" max="100"></progress>\n      <span class="relative-progress">0%</span>\n    </div>\n    <div class="progress-actions">\n      <input type="button" value="Cancel" class="mozPrintCallback-cancel">\n    </div>\n  </div>\n</div>\n'});
return this.HandlebarsTemplates["billflow/pdf_viewer"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["billflow/select_thumbnail"]=Handlebars.template(function(b,a,e,c,d){e=e||b.helpers;b='\n<div class="header-buttons">\n  <button class="thumbnail-action btn btn-link enlarge-btn" disabled><i class="fa fa-search-plus"></i> Enlarge</button>\n  \x3c!--<button class="thumbnail-action btn btn-link" disabled><i class="fa fa-print"></i> Print</button>--\x3e\n  <button class="thumbnail-action btn btn-link download-btn" disabled><i class="fa fa-download"></i> Download</button>\n  <button class="thumbnail-action btn btn-link delete-btn" disabled><i class="fa fa-trash-o"></i> Delete</button>\n</div>\n\n<div id="thumbnails"></div>\n\n<div class="footer-buttons">\n  <button class="btn btn-default  upload-documents" type="submit"> Upload document</button>\n\n';c=
a.inTrayContext;if((c=e["if"].call(a,c,{hash:{},inverse:this.program(3,function(a,c){return'\n  <button class="btn btn-default cancel-btn pull-right">Cancel</button>\n\n  <button class="thumbnail-action btn btn-primary link-btn pull-right" disabled>Link document to bill</button>\n'},d),fn:this.program(1,function(a,c){return'\n  <button class="thumbnail-action btn btn-primary trigger-attach pull-right" disabled data-action="link-bill" data-index="1">Link to existing bill</button>\n\n  <button class="thumbnail-action btn btn-primary trigger-new pull-right" disabled data-action="create-bill" data-index="1">Create new bill</button>\n'},
d)}))||0===c)b+=c;return b+"\n</div>\n"});return this.HandlebarsTemplates["billflow/select_thumbnail"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["billflow/split_view"]=Handlebars.template(function(b,a,e,c,d){function f(a,c){return'disabled="disabled"'}function g(a,c){return'\n        <div class="row">\n          <div class="col-xs-24">\n            <span class="text-warning">Business is not registered for GST</span>\n          </div>\n        </div>\n      '}e=e||b.helpers;var h,l=e.helperMissing,k=this.escapeExpression,m=e.blockHelperMissing;b='<div class="split-view">\n\n  <div class="split-view-spinner"></div>\n\n  <div class="invoiceContainerWrapper">\n    <div class="branding"></div>\n\n    <div id="invoiceContainer" class="form-content">\n\n      <div class="ocr-hint"></div>\n\n      <div class="form-horizontal">\n        <div class="form-group">\n          <div class="col-xs-6">\n            <div id="contactContainer"></div>\n          </div>\n          <div class="col-xs-3 paired-control">\n            <div class="form-group">\n              <label class="control-label" for="invoiceNumber">';
c=a.type;c=(h=e.humanize)?h.call(a,c,{hash:{}}):l.call(a,"humanize",c,{hash:{}});b+=k(c)+' number</label>\n              <div class="form-control-wrapper" data-id="invoiceNumber" data-widget="TextInput" data-name="invoiceNumber" data-maxlength="13"></div>\n            </div>\n          </div>\n          <div class="col-xs-5 supplier-invoice control">\n            ';c={inputLabel:"Supplier invoice no.",inputName:"supplierInvoiceNumber",labelCssClass:"",widgetCssClass:"","data-maxlength":"20"};c=(h=
e.TextInput)?h.call(a,{hash:c}):l.call(a,"TextInput",{hash:c});b+=k(c)+'\n          </div>\n          <div class="col-xs-4 paired-control">\n            ';c={inputLabel:"Date of issue",inputName:"issueDate",labelCssClass:"",widgetCssClass:""};c=(h=e.DatePicker)?h.call(a,{hash:c}):l.call(a,"DatePicker",{hash:c});b+=k(c)+'\n          </div>\n          <div class="col-xs-4 control">\n            ';c={inputLabel:"Due date",inputName:"dueDate",labelCssClass:"",widgetCssClass:""};c=(h=e.DatePicker)?h.call(a,
{hash:c}):l.call(a,"DatePicker",{hash:c});b+=k(c)+'\n          </div>\n          <div class="col-xs-3">\n            <div class="form-group">\n              <label class="control-label" for="gstInclusive">Amounts are</label>\n\n              <div class="form-control-wrapper">\n                <select id="gstInclusive" name="gstInclusive" class="form-control boolean" ';(h=e.unlessRegisteredForGst)?c=h.call(a,{hash:{},inverse:this.noop,fn:this.program(1,f,d)}):(c=a.unlessRegisteredForGst,c="function"===
typeof c?c():c);e.unlessRegisteredForGst||(c=m.call(a,c,{hash:{},inverse:this.noop,fn:this.program(1,f,d)}));if(c||0===c)b+=c;b+=">\n                  ";c=a.gstInclusive;c=(h=e.option)?h.call(a,"GST Inclusive","true",c,{hash:{}}):l.call(a,"option","GST Inclusive","true",c,{hash:{}});b+=k(c)+"\n                  ";c=a.gstInclusive;c=(h=e.option)?h.call(a,"GST Exclusive","false",c,{hash:{}}):l.call(a,"option","GST Exclusive","false",c,{hash:{}});b+=k(c)+"\n                </select>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      ";
(h=e.unlessRegisteredForGst)?c=h.call(a,{hash:{},inverse:this.noop,fn:this.program(3,g,d)}):(c=a.unlessRegisteredForGst,c="function"===typeof c?c():c);e.unlessRegisteredForGst||(c=m.call(a,c,{hash:{},inverse:this.noop,fn:this.program(3,g,d)}));if(c||0===c)b+=c;return b+'\n\n      <div id="invoiceLinesContainer" class="row top-buffer">\n        <div class="col-xs-24">\n          <table id="invoiceLinesTable" class="table table-bordered table-condensed">\n            <thead>\n            <tr>\n              <th>&nbsp;</th>\n              <th>Item</th>\n              <th>Description</th>\n              <th>Allocate to</th>\n              <th>Qty</th>\n              <th class="text-right">Unit price</th>\n              <th>Tax type</th>\n              <th class="text-right">Amount</th>\n              <th>&nbsp;</th>\n            </tr>\n            </thead>\n            <tbody id="invoiceLines"></tbody>\n          </table>\n        </div>\n      </div>\n\n      <div class="row">\n        <div class="col-xs-24">\n          <button class="pull-right close-split-view btn btn-default">Close</button>\n        </div>\n      </div>\n\n    </div>\n\n    <div class="divider"></div>\n\n  </div>\n\n  <div id="pdf"></div>\n</div>\n'});
return this.HandlebarsTemplates["billflow/split_view"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["billflow/split_view_customer"]=Handlebars.template(function(b,a,e,c,d){function f(a,c){var b,d,f;b="\n    ";d={inputLabel:"Reportable",inputName:"reportable",widgetCssClass:"col-xs-12 reportable"};d=(f=e.Checkbox)?f.call(a,{hash:d}):h.call(a,"Checkbox",{hash:d});return b+=l(d)+"\n  "}e=e||b.helpers;var g,h=e.helperMissing,l=this.escapeExpression,k=e.blockHelperMissing;b='\n<div class="form-group">\n  <label class="col-xs-10 control-label" for="contactId">';
(g=e.recipient)?c=g.call(a,{hash:{}}):(c=a.recipient,c="function"===typeof c?c():c);b+=l(c)+"</label>\n  ";(g=e.ifBusinessReportable)?c=g.call(a,{hash:{},inverse:this.noop,fn:this.program(1,f,d)}):(c=a.ifBusinessReportable,c="function"===typeof c?c():c);e.ifBusinessReportable||(c=k.call(a,c,{hash:{},inverse:this.noop,fn:this.program(1,f,d)}));if(c||0===c)b+=c;b+='\n</div>\n<div class="form-group">\n  <div class="col-xs-24" id="customerControls">\n    <div class="form-control-wrapper" data-id="contactId" data-widget="TypeaheadDropdown" data-name="contactId" data-collection="contacts" data-labels="name,firstName,lastName"\n         data-custom-action-name="addCustomer" data-custom-action-label="+ Add ';
c=a.recipient;c=(g=e.toLowerCase)?g.call(a,c,{hash:{}}):h.call(a,"toLowerCase",c,{hash:{}});b+=l(c)+'" data-prompt="Please select a ';c=a.recipient;c=(g=e.toLowerCase)?g.call(a,c,{hash:{}}):h.call(a,"toLowerCase",c,{hash:{}});b+=l(c)+'" ';c=a.paid;if((c=e["if"].call(a,c,{hash:{},inverse:this.noop,fn:this.program(3,function(a,c){return'data-disabled="disabled"'},d)}))||0===c)b+=c;return b+">\n    </div>\n  </div>\n</div>\n\n"});return this.HandlebarsTemplates["billflow/split_view_customer"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["billflow/thumbnail"]=Handlebars.template(function(b,a,e,c,d){e=e||b.helpers;c=this.escapeExpression;b='<div class="cell">\n  <div class="thumb-container">\n    <div class="trinity-badge"></div>\n    <span class="upload-progress-indicator"></span>\n    <div class="thumb selectable ';(d=e.multiplePagesClass)?d=d.call(a,{hash:{}}):(d=a.multiplePagesClass,d="function"===typeof d?d():d);b+=c(d)+'" data-documentId="';
(d=e.id)?d=d.call(a,{hash:{}}):(d=a.id,d="function"===typeof d?d():d);b+=c(d)+'">\n      <img src="';(d=e.thumbnailUrl)?d=d.call(a,{hash:{}}):(d=a.thumbnailUrl,d="function"===typeof d?d():d);return b+=c(d)+'"/>\n    </div>\n  </div>\n</div>\n'});return this.HandlebarsTemplates["billflow/thumbnail"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["billflow/thumbnail_placeholder"]=Handlebars.template(function(b,a,e,c,d){return'\n<div class="placeholder-copy">You have not linked any documents to this bill</div>\n<button class="placeholder-button link-document-action btn btn-primary">Link document</button>\n'});return this.HandlebarsTemplates["billflow/thumbnail_placeholder"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["billflow/thumbnail_preview"]=Handlebars.template(function(b,a,e,c,d){e=e||b.helpers;c=this.escapeExpression;b='<div class="thumbnail-panel">\n  <div id="thumbnails">\n  <div class="cell">\n      <div class="thumb-container">\n        <div class="thumb ';(d=e.multiplePagesClass)?d=d.call(a,{hash:{}}):(d=a.multiplePagesClass,d="function"===typeof d?d():d);b+=c(d)+'" data-documentId="';(d=e.id)?d=d.call(a,{hash:{}}):
(d=a.id,d="function"===typeof d?d():d);b+=c(d)+'">\n          <img src="';(d=e.thumbnailUrl)?d=d.call(a,{hash:{}}):(d=a.thumbnailUrl,d="function"===typeof d?d():d);return b+=c(d)+'"/>\n            <div class="thumbnail-button-panel"></div>\n        </div>\n      </div>\n  </div>\n  </div>\n</div>\n'});return this.HandlebarsTemplates["billflow/thumbnail_preview"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["billflow/thumbnail_preview_buttons"]=Handlebars.template(function(b,a,e,c,d){e=e||b.helpers;b="";c=a.download;if((c=e["if"].call(a,c,{hash:{},inverse:this.noop,fn:this.program(1,function(a,c){return'\n    <button class="thumb-action btn download-button hide-text" data-action="thumbnail-preview-download">\n        <i class="thumbnail-preview-icon fa fa-download"></i>\n        <span class="thumbnail-action-text">Download</span>\n    </button>\n'},
d)}))||0===c)b+=c;b+="\n";c=a.popOut;if((c=e["if"].call(a,c,{hash:{},inverse:this.noop,fn:this.program(3,function(a,c){return'\n  <button class="thumb-action pop-out-button btn hide-text" data-action="thumbnail-preview-popout">\n    <i class="thumbnail-preview-icon fa fa-external-link"></i>\n    <span class="thumbnail-action-text">Pop-out</span>\n  </button>\n'},d)}))||0===c)b+=c;b+="\n";c=a.splitView;if((c=e["if"].call(a,c,{hash:{},inverse:this.noop,fn:this.program(5,function(a,c){return'\n  <button class="thumb-action split-view-button btn hide-text" data-action="thumbnail-preview-split">\n    <span class="thumbnail-preview-icon billflow-split"></span>\n    <span class="thumbnail-action-text">Split view</span>\n  </button>\n'},
d)}))||0===c)b+=c;b+="\n";c=a.enlarge;if((c=e["if"].call(a,c,{hash:{},inverse:this.noop,fn:this.program(7,function(a,c){return'\n  <button class="thumb-action btn enlarge-button hide-text" data-action="thumbnail-preview-enlarge">\n      <i class="thumbnail-preview-icon fa fa-search-plus"></i>\n      <span class="thumbnail-action-text">Enlarge</span>\n  </button>\n'},d)}))||0===c)b+=c;b+="\n";c=a.cancel;if((c=e["if"].call(a,c,{hash:{},inverse:this.noop,fn:this.program(9,function(a,c){return'\n  <button class="thumb-action btn cancel-button hide-text" data-action="thumbnail-preview-cancel">\n    <i class="thumbnail-preview-icon fa fa-chain-broken"></i>\n    <span class="thumbnail-action-text">Un-link</span>\n  </button>\n'},
d)}))||0===c)b+=c;return b+"\n"});return this.HandlebarsTemplates["billflow/thumbnail_preview_buttons"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["billflow/upload_progress"]=Handlebars.template(function(b,a,e,c,d){e=e||b.helpers;c=this.escapeExpression;b='<span class="';(d=e.preview_class)?d=d.call(a,{hash:{}}):(d=a.preview_class,d="function"===typeof d?d():d);b+=c(d)+'"></span>\n<span class="upload-progress-text">';(d=e.preview_text)?d=d.call(a,{hash:{}}):(d=a.preview_text,d="function"===typeof d?d():d);return b+=c(d)+"</span>\n"});return this.HandlebarsTemplates["billflow/upload_progress"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["business/address"]=Handlebars.template(function(b,a,e,c,d){function f(a,c){return"Suburb"}function g(a,c){return"City/Town"}function h(a,c){return"State"}function l(a,c){return"Region"}e=e||b.helpers;var k;c=this.escapeExpression;var m=e.blockHelperMissing;b='<div class="form-horizontal">\n  <div class="form-group">\n    <label class="col-xs-8 control-label" for="';(k=e.cid)?k=k.call(a,{hash:{}}):(k=a.cid,
k="function"===typeof k?k():k);b+=c(k)+'streetAddress1">Address</label>\n    <div class="col-xs-16 form-control-wrapper" data-id="';(k=e.cid)?k=k.call(a,{hash:{}}):(k=a.cid,k="function"===typeof k?k():k);b+=c(k)+'streetAddress1" data-widget="AutosizeTextarea" data-name="streetAddress1" data-maxlength="255" data-autosize="false" data-rows="5" data-cols="200"></div>\n  </div>\n\n  <div class="form-group">\n    <label class="col-xs-8 control-label" for="';(k=e.cid)?k=k.call(a,{hash:{}}):(k=a.cid,k="function"===
typeof k?k():k);b+=c(k)+'suburb">';(k=e.ifAu)?k=k.call(a,{hash:{},inverse:this.program(3,g,d),fn:this.program(1,f,d)}):(k=a.ifAu,k="function"===typeof k?k():k);e.ifAu||(k=m.call(a,k,{hash:{},inverse:this.program(3,g,d),fn:this.program(1,f,d)}));if(k||0===k)b+=k;b+='</label>\n    <div class="col-xs-16 form-control-wrapper" data-id="';(k=e.cid)?k=k.call(a,{hash:{}}):(k=a.cid,k="function"===typeof k?k():k);b+=c(k)+'suburb" data-widget="TextInput" data-name="suburb" data-maxlength="50"></div>\n  </div>\n\n  <div class="form-group">\n    <label class="col-xs-8 control-label" for="';
(k=e.cid)?k=k.call(a,{hash:{}}):(k=a.cid,k="function"===typeof k?k():k);b+=c(k)+'state">';(k=e.ifAu)?k=k.call(a,{hash:{},inverse:this.program(7,l,d),fn:this.program(5,h,d)}):(k=a.ifAu,k="function"===typeof k?k():k);e.ifAu||(k=m.call(a,k,{hash:{},inverse:this.program(7,l,d),fn:this.program(5,h,d)}));if(k||0===k)b+=k;b+='</label>\n    <div class="col-xs-16 form-control-wrapper" data-id="';(k=e.cid)?k=k.call(a,{hash:{}}):(k=a.cid,k="function"===typeof k?k():k);b+=c(k)+'state" data-widget="TextInput" data-name="state"  data-maxlength="50" data-css-class="input-width-small"></div>\n  </div>\n\n  <div class="form-group">\n    <label class="col-xs-8 control-label" for="';
(k=e.cid)?k=k.call(a,{hash:{}}):(k=a.cid,k="function"===typeof k?k():k);b+=c(k)+'postCode">Post code</label>\n    <div class="col-xs-16 form-control-wrapper" data-id="';(k=e.cid)?k=k.call(a,{hash:{}}):(k=a.cid,k="function"===typeof k?k():k);b+=c(k)+'postCode" data-widget="RegexInput" data-name="postCode" data-valid-regex="^\\d{0,4}$" data-css-class="input-width-small"></div>\n  </div>\n\n  <div class="form-group">\n    <label class="col-xs-8 control-label" for="';(k=e.cid)?k=k.call(a,{hash:{}}):(k=
a.cid,k="function"===typeof k?k():k);b+=c(k)+'country">Country</label>\n    <div class="col-xs-16 form-control-wrapper" data-id="';(k=e.cid)?k=k.call(a,{hash:{}}):(k=a.cid,k="function"===typeof k?k():k);return b+=c(k)+'country" data-widget="TextInput" data-name="country" data-maxlength="50"></div>\n  </div>\n</div>\n'});return this.HandlebarsTemplates["business/address"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["business/business_details"]=Handlebars.template(function(b,a,e,c,d){function f(a,c){return'\n    <ul class="nav nav-tabs">\n      <li class="active">\n        <a id="business-details-layout-link" data-panel="business-details-layout-container" class="tab clickable">Business details</a>\n      </li>\n      <li>\n        <a id="income-allocation-link" data-panel="income-allocation-container" class="tab clickable">Income allocation</a>\n      </li>\n    </ul>\n\n    <div class="tab-content">\n      <div id="business-details-layout-container" class="expandedPane"></div>\n      <div id="income-allocation-container" class="expandedPane hidden"></div>\n    </div>\n  '}
function g(a,c){return'\n    <div id="business-details-layout-container" class="expandedPane"></div>\n  '}e=e||b.helpers;var h,l=this.escapeExpression,k=e.helperMissing;b='<div class="super-setup-alert alert alert-info hidden">\n    <div class="super-setup-alert-icon">\n        <i class="icon-task-centre"></i>\n    </div>\n    <div class="super-setup-alert-header">\n        <h3>Add a few more details about your business</h3>\n        <p><a href="#businesses/';(h=e.businessId)?c=h.call(a,{hash:{}}):
(c=a.businessId,c="function"===typeof c?c():c);b+=l(c)+'/payroll/paySuper">Back to pay super</a></p>\n    </div>\n  <div class="super-setup-alert-description">\n    <span>Before you can start paying super, you need to complete a few more details about your business. Make sure\n      you\u2019ve entered your ABN, your business name, address and contact details, and the name of a contact person.\n      <a href="http://help.myob.com/wiki/x/sICB" target="_blank">Learn more</a> </span>\n  </div>\n</div>\n\n\n<div class="row">\n  <div class="col-xs-24">\n    <div id="onboarding-navigation-container" class="banner banner-blue"></div>\n  </div>\n</div>\n\n';
c={heading:"Business details"};c=(h=e.includePartial)?h.call(a,"page_heading",{hash:c}):k.call(a,"includePartial","page_heading",{hash:c});b+=l(c)+'\n\n<div id="business-details">\n\n  ';if((c=(h=e.ifFeature)?h.call(a,"INCOME_ALLOCATION",{hash:{},inverse:this.program(3,g,d),fn:this.program(1,f,d)}):k.call(a,"ifFeature","INCOME_ALLOCATION",{hash:{},inverse:this.program(3,g,d),fn:this.program(1,f,d)}))||0===c)b+=c;return b+"\n</div>\n"});return this.HandlebarsTemplates["business/business_details"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["business/details"]=Handlebars.template(function(b,a,e,c,d){function f(a,b){var d,f;d="\n        ";if((f=k.invokePartial(c._business_partial_abn,"_business_partial_abn",a,e,c))||0===f)d+=f;return d+"\n      "}function g(a,b){var d,f;d="\n        ";if((f=k.invokePartial(c._business_partial_ird,"_business_partial_ird",a,e,c))||0===f)d+=f;return d+"\n      "}e=e||b.helpers;c=c||b.partials;var h,l,k=this,m=e.helperMissing,
n=this.escapeExpression,q=e.blockHelperMissing;b='<div class="super-setup-alert alert alert-info hidden">\n    <div class="super-setup-alert-icon">\n        <i class="icon-task-centre"></i>\n    </div>\n    <div class="super-setup-alert-header">\n        <h3>Add a few more details about your business</h3>\n        <p><a href="#businesses/';(l=e.businessId)?h=l.call(a,{hash:{}}):(h=a.businessId,h="function"===typeof h?h():h);b+=n(h)+'/payroll/paySuper">Back to pay super</a></p>\n    </div>\n  <div class="super-setup-alert-description">\n    <span>Before you can start paying super, you need to complete a few more details about your business. Make sure\n      you\u2019ve entered your ABN, your business name, address and contact details, and the name of a contact person.\n      <a href="http://help.myob.com/wiki/x/sICB" target="_blank">Learn more</a> </span>\n  </div>\n</div>\n\n\n<div class="row">\n  <div class="col-xs-24">\n    <div id="onboarding-navigation-container" class="banner banner-blue"></div>\n  </div>\n</div>\n\n<div id="businessDetails">\n  <div class="row form-horizontal">\n    <div class="col-xs-12">\n      ';
h={inputLabel:"Business name",inputName:"businessName","data-maxlength":"100"};h=(l=e.TextInput)?l.call(a,{hash:h}):m.call(a,"TextInput",{hash:h});b+=n(h)+"\n      ";h={inputLabel:"Trading name",inputName:"tradingName","data-maxlength":"100"};h=(l=e.TextInput)?l.call(a,{hash:h}):m.call(a,"TextInput",{hash:h});b+=n(h)+"\n      ";(l=e.ifAu)?h=l.call(a,{hash:{},inverse:k.program(3,g,d),fn:k.program(1,f,d)}):(h=a.ifAu,h="function"===typeof h?h():h);e.ifAu||(h=q.call(a,h,{hash:{},inverse:k.program(3,g,
d),fn:k.program(1,f,d)}));if(h||0===h)b+=h;b+='\n    </div>\n    <div class="col-xs-12">\n      ';h={inputLabel:"Email address",inputName:"email","data-maxlength":"255","data-delay":"on"};h=(l=e.TextInput)?l.call(a,{hash:h}):m.call(a,"TextInput",{hash:h});b+=n(h)+"\n      ";h={inputLabel:"Phone number",inputName:"phone","data-maxlength":"21"};h=(l=e.TextInput)?l.call(a,{hash:h}):m.call(a,"TextInput",{hash:h});b+=n(h)+"\n      ";h={inputLabel:"Fax number",inputName:"fax","data-maxlength":"21"};h=(l=
e.TextInput)?l.call(a,{hash:h}):m.call(a,"TextInput",{hash:h});b+=n(h)+"\n      ";h={inputLabel:"Website",inputName:"website","data-maxlength":"100"};h=(l=e.TextInput)?l.call(a,{hash:h}):m.call(a,"TextInput",{hash:h});b+=n(h)+'\n    </div>\n  </div>\n\n  <div class="row">\n    <div class="addresses"></div>\n  </div>\n\n  <div class="row">\n    <div class="col-xs-12">\n      <div class="form-horizontal">\n        <div class="form-group">\n          <h3 class="col-xs-24">Financial year settings</h3>\n        </div>\n\n        <div class="form-group">\n          <label class="col-xs-8 control-label" for="monthOfFinancialYearEnd">Financial year</label>\n          <div class="col-xs-16">\n            <select class="form-control" id="monthOfFinancialYearEnd" name="monthOfFinancialYearEnd">\n              ';
h=a.financialYearAllPeriods;if((h=e.each.call(a,h,{hash:{},inverse:k.noop,fn:k.programWithDepth(function(a,c,b){var d,f,g;c="\n                ";b=b.monthOfFinancialYearEnd;d=a.monthOfFinancialYearEndId;f=a.description;b=(g=e.option)?g.call(a,f,d,b,{hash:{}}):m.call(a,"option",f,d,b,{hash:{}});return c+=n(b)+"\n              "},d,a)}))||0===h)b+=h;b+='\n            </select>\n          </div>\n        </div>\n\n        <div class="form-group">\n          <label class="col-xs-8 control-label">Opening balance date</label>\n          <div class="col-xs-16">\n            <div id="openingBalanceDate">';
(l=e.simpleOpeningBalanceDate)?h=l.call(a,{hash:{}}):(h=a.simpleOpeningBalanceDate,h="function"===typeof h?h():h);b+=n(h)+'</div>\n          </div>\n        </div>\n\n        <div class="form-group">\n          <div class="col-xs-16 col-xs-offset-8">\n            <input type="checkbox" id="dataLocked" name="dataLocked" ';h=a.dataLocked;if((h=e["if"].call(a,h,{hash:{},inverse:k.noop,fn:k.program(7,function(a,c){return"checked"},d)}))||0===h)b+=h;b+=' />\n            <label for="dataLocked">Lock my data up to and including:</label>\n          </div>\n        </div>\n\n        <div class="form-group">\n          <div class="col-xs-16 col-xs-offset-8">\n            <div class="form-control-wrapper input-width-medium" data-widget="DatePicker" data-name="lockDataDate" data-id="lockDataDate" data-css-class="lockDataDateContainer"></div>\n          </div>\n        </div>\n\n      </div>\n    </div>\n      <div class="col-xs-12">\n        <div class="form-horizontal">\n          <div class="form-group">\n            <h3 class="col-xs-24">Contact details</h3>\n          </div>\n          ';
h={inputLabel:"First name",inputName:"contactFirstName","data-maxlength":"50"};h=(l=e.TextInput)?l.call(a,{hash:h}):m.call(a,"TextInput",{hash:h});b+=n(h)+"\n          ";h={inputLabel:"Last name",inputName:"contactLastName","data-maxlength":"50"};h=(l=e.TextInput)?l.call(a,{hash:h}):m.call(a,"TextInput",{hash:h});b+=n(h)+"\n          ";h=a.showPrimaryContact;if((h=e["if"].call(a,h,{hash:{},inverse:k.noop,fn:k.program(9,function(a,c){var b,d,f;b="\n          ";d={inputLabel:"Primary contact",inputName:"primaryContactUserId",
labelCssClass:"col-xs-8 control-label",widgetCssClass:"col-xs-16 form-control-wrapper","data-collection":"primaryContactCandidates","data-name-field":"firstName,lastName","data-value-field":"userId"};d=(f=e.Select)?f.call(a,{hash:d}):m.call(a,"Select",{hash:d});return b+=n(d)+"\n          "},d)}))||0===h)b+=h;return b+'\n        </div>\n      </div>\n\n  </div>\n\n  <div class="row">\n    <div class="col-xs-24">\n      <div class="pull-right">\n        <button id="saveBusinessDetails" class="btn btn-primary action pull-right">Save</button>\n      </div>\n    </div>\n  </div>\n\n</div>\n'});
return this.HandlebarsTemplates["business/details"]}).call(this);
(function(){Handlebars.registerPartial("_business_partial_abn",Handlebars.template(function(b,a,e,c,d){e=e||b.helpers;b="";var f,g=e.helperMissing,h=this.escapeExpression;c={inputLabel:"ABN/ACN",inputName:"abn",widgetCssClass:"col-xs-16 input-width-medium","data-valid-regex":"^\\d{0,11}$"};c=(f=e.RegexInput)?f.call(a,{hash:c}):g.call(a,"RegexInput",{hash:c});b+=h(c)+"\n";c={inputLabel:"ABN Branch",inputName:"abnBranch",widgetCssClass:"col-xs-16 input-width-small","data-valid-regex":"^\\d{0,3}$"};
c=(f=e.RegexInput)?f.call(a,{hash:c}):g.call(a,"RegexInput",{hash:c});b+=h(c)+'\n<div class="form-group">\n  <label class="col-xs-8 control-label" for="reportable">Taxable payments reporting</label>\n  <div class="col-xs-16" id="reportableContainer">\n    <input type="checkbox" class="boolean" id="reportable" name="reportable" ';c=a.reportable;if((c=e["if"].call(a,c,{hash:{},inverse:this.noop,fn:this.program(1,function(a,c){return"checked"},d)}))||0===c)b+=c;return b+'/>\n    <label for="reportable">\n      50% or more of my business activity is in the building and construction industry.\n      Refer to the\n      <a href="http://www.ato.gov.au/Business/Building-and-construction/In-detail/Taxable-payments-reporting/Taxable-payments-reporting---building-and-construction-industry/" target="_blank">\n        ATO website\n      </a> to see if you need to report.\n    </label>\n  </div>\n</div>\n'}))}).call(this);
(function(){Handlebars.registerPartial("_business_partial_ird",Handlebars.template(function(b,a,e,c,d){e=e||b.helpers;b="";d=e.helperMissing;var f=this.escapeExpression;c={inputLabel:"IRD/GST number",inputName:"irdNumber","data-valid-regex":"^[\\d\\-]{0,11}$"};c=(e=e.RegexInput)?e.call(a,{hash:c}):d.call(a,"RegexInput",{hash:c});return b+=f(c)+"\n"}))}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["businesses/add_business"]=Handlebars.template(function(b,a,e,c,d){e=e||b.helpers;var f=e.helperMissing,g=this.escapeExpression;b='<h3>Add business</h3>\n<p>Enter the details of the new business.</p>\n<div class="row product-select">\n  <div class="col-xs-12">\n    ';c={inputLabel:"Product",inputName:"productId",labelCssClass:"",widgetCssClass:"","data-collection":"productOptions","data-name-field":"name",
"data-value-field":"id"};c=(d=e.Select)?d.call(a,{hash:c}):f.call(a,"Select",{hash:c});b+=g(c)+'\n  </div>\n</div>\n<div class="row">\n  <div class="col-xs-12">\n    ';c={inputLabel:"Business name",inputName:"businessName",labelCssClass:"",widgetCssClass:"","data-maxlength":"100"};c=(d=e.TextInput)?d.call(a,{hash:c}):f.call(a,"TextInput",{hash:c});b+=g(c)+'\n  </div>\n  <div class="col-xs-12">\n    ';c={inputLabel:"Business Type",inputName:"businessTypeId",labelCssClass:"",widgetCssClass:"","data-collection":"businessTypes",
"data-name-field":"name","data-value-field":"value"};c=(d=e.Select)?d.call(a,{hash:c}):f.call(a,"Select",{hash:c});b+=g(c)+'\n  </div>\n</div>\n<div class="row">\n  <div class="col-xs-12">\n    ';c={inputLabel:"Phone number",inputName:"phoneNumber",labelCssClass:"",widgetCssClass:"","data-maxlength":"21"};c=(d=e.TextInput)?d.call(a,{hash:c}):f.call(a,"TextInput",{hash:c});b+=g(c)+'\n  </div>\n  <div class="col-xs-12">\n    ';c={inputLabel:"Email",inputName:"email",labelCssClass:"",widgetCssClass:"",
"data-maxlength":"76","data-delay":"on"};c=(d=e.TextInput)?d.call(a,{hash:c}):f.call(a,"TextInput",{hash:c});b+=g(c)+'\n  </div>\n</div>\n<div class="row">\n  <div class="col-xs-12">\n    ';c={inputLabel:"First name",inputName:"firstName",labelCssClass:"",widgetCssClass:"","data-maxlength":"50"};c=(d=e.TextInput)?d.call(a,{hash:c}):f.call(a,"TextInput",{hash:c});b+=g(c)+'\n  </div>\n  <div class="col-xs-12">\n    ';c={inputLabel:"Last name",inputName:"lastName",labelCssClass:"",widgetCssClass:"",
"data-maxlength":"50"};c=(d=e.TextInput)?d.call(a,{hash:c}):f.call(a,"TextInput",{hash:c});b+=g(c)+"\n  </div>\n</div>\n";c=(d=e.includePartial)?d.call(a,"hr",{hash:{}}):f.call(a,"includePartial","hr",{hash:{}});return b+=g(c)+'\n<div class="row top-buffer">\n  <div class="col-xs-12">\n    <p>\n      By adding the business, you acknowledge that you have read and agreed to the\n        <a href="http://myob.com/essentials-terms" target="_blank">Terms of Use.</a>\n    </p>\n  </div>\n  <div class="col-xs-12 button-group pull-right text-right">\n    <button id="addButton" class="btn btn-primary action">Add business and go to dashboard</button>\n    <button id="cancelButton" class="btn btn-default">Cancel</button>\n  </div>\n</div>\n'});
return this.HandlebarsTemplates["businesses/add_business"]}).call(this);(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["businesses/business_list"]=Handlebars.template(function(b,a,e,c,d){return'<div id="table"></div>\n<div id="pagination" class="pagination"></div>\n'});return this.HandlebarsTemplates["businesses/business_list"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["businesses/business_table_header"]=Handlebars.template(function(b,a,e,c,d){return'<tr>\n  <th data-field="name">Business name</th>\n  <th data-field="userRole">Access level</th>\n  <th data-field="status">Account status</th>\n</tr>\n'});return this.HandlebarsTemplates["businesses/business_table_header"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["businesses/business_table_row"]=Handlebars.template(function(b,a,e,c,d){function f(a,c){var b,d,f;b='\n    <a href="';d=a.id;d=(f=e.appUrl)?f.call(a,d,"/home",{hash:{}}):q.call(a,"appUrl",d,"/home",{hash:{}});b+=p(d)+'">';(f=e.name)?d=f.call(a,{hash:{}}):(d=a.name,d="function"===typeof d?d():d);return b+=p(d)+"</a>\n  "}function g(a,c){var b,d;b="\n    ";if((d=(d=e.ifFeature)?d.call(a,"PARTNER_CLEANUP_VALIDATE_PARTNER",
{hash:{},inverse:t.program(9,m,c),fn:t.program(4,h,c)}):q.call(a,"ifFeature","PARTNER_CLEANUP_VALIDATE_PARTNER",{hash:{},inverse:t.program(9,m,c),fn:t.program(4,h,c)}))||0===d)b+=d;return b+"\n  "}function h(a,c){var b,d,f;b="\n      ";d=a.myobCrmId;if((d=(f=e.ifBlank)?f.call(a,d,{hash:{},inverse:t.program(7,k,c),fn:t.program(5,l,c)}):q.call(a,"ifBlank",d,{hash:{},inverse:t.program(7,k,c),fn:t.program(5,l,c)}))||0===d)b+=d;return b+"\n    "}function l(a,c){var b,d,f;b='\n        <a href="';d=a.id;
d=(f=e.appUrl)?f.call(a,d,"/advisor/verify",{hash:{}}):q.call(a,"appUrl",d,"/advisor/verify",{hash:{}});b+=p(d)+'">';(f=e.name)?d=f.call(a,{hash:{}}):(d=a.name,d="function"===typeof d?d():d);return b+=p(d)+"</a>\n      "}function k(a,c){var b,d,f;b='\n        <a href="';d=a.id;d=(f=e.appUrl)?f.call(a,d,"/advisor",{hash:{}}):q.call(a,"appUrl",d,"/advisor",{hash:{}});b+=p(d)+'">';(f=e.name)?d=f.call(a,{hash:{}}):(d=a.name,d="function"===typeof d?d():d);return b+=p(d)+"</a>\n      "}function m(a,c){var b,
d,f;b='\n      <a href="';d=a.id;d=(f=e.appUrl)?f.call(a,d,"/advisor",{hash:{}}):q.call(a,"appUrl",d,"/advisor",{hash:{}});b+=p(d)+'">';(f=e.name)?d=f.call(a,{hash:{}}):(d=a.name,d="function"===typeof d?d():d);return b+=p(d)+"</a>\n    "}e=e||b.helpers;var n,q=e.helperMissing,p=this.escapeExpression,t=this;b='<td class="business-name">\n  ';c=a.type;if((c=(n=e.ifEqual)?n.call(a,c,"SME",{hash:{},inverse:t.program(3,g,d),fn:t.program(1,f,d)}):q.call(a,"ifEqual",c,"SME",{hash:{},inverse:t.program(3,
g,d),fn:t.program(1,f,d)}))||0===c)b+=c;b+='\n</td>\n<td class="business-user-role">';(n=e.userRole)?c=n.call(a,{hash:{}}):(c=a.userRole,c="function"===typeof c?c():c);b+=p(c)+'</td>\n<td class="business-status">';(n=e.status)?c=n.call(a,{hash:{}}):(c=a.status,c="function"===typeof c?c():c);return b+=p(c)+"</td>\n"});return this.HandlebarsTemplates["businesses/business_table_row"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["businesses/select_business_radio_list"]=Handlebars.template(function(b,a,e,c,d){return'<div id="table"></div>\n'});return this.HandlebarsTemplates["businesses/select_business_radio_list"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["businesses/select_business_radio_row"]=Handlebars.template(function(b,a,e,c,d){e=e||b.helpers;c=this.escapeExpression;b='<td class="col-md-1"><input type="radio" name="businessSelection"></td>\n<td>';(e=e.name)?a=e.call(a,{hash:{}}):(a=a.name,a="function"===typeof a?a():a);return b+=c(a)+"</td>\n"});return this.HandlebarsTemplates["businesses/select_business_radio_row"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["businesses/switch_business"]=Handlebars.template(function(b,a,e,c,d){e=e||b.helpers;var f=e.helperMissing,g=this.escapeExpression;b='<div id="loadingSpinner" class="loadingSpinner"></div>\n<div id="page">\n  <div id="pageContentHeader">\n    <div class="row">\n      <div class="col-xs-12">\n        <h1>My businesses</h1>\n      </div>\n      <div class="col-xs-12 h1-control text-right">\n        <button id="addNewBusiness" class="btn btn-primary">Add business</button>\n      </div>\n    </div>\n    <div class="row overview-container">\n      <div class="col-xs-24">\n        <p class="overview">Here\u2019s a list of your MYOB Essentials businesses. Add a new business, or click the name to open a business to work on.</p>\n      </div>\n    </div>\n  </div>\n  ';
c=(d=e.includePartial)?d.call(a,"hr",{hash:{}}):f.call(a,"includePartial","hr",{hash:{}});b+=g(c)+'\n  <div class="row">\n    <div class="col-xs-8 col-xs-offset-16 filter pull-right">\n      ';c={inputName:"search",widgetCssClass:"","data-placeholder":"Search..."};c=(d=e.TextInput)?d.call(a,{hash:c}):f.call(a,"TextInput",{hash:c});return b+=g(c)+'\n    </div>\n  </div>\n  <div id="businessListContainer"></div>\n</div>\n'});return this.HandlebarsTemplates["businesses/switch_business"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["commons/addresses"]=Handlebars.template(function(b,a,e,c,d){function f(a,c){return"checked"}function g(a,c){return"checked"}e=e||b.helpers;var h=this.escapeExpression,l=this;b='<div class="col-xs-24">\n  <div class="row form-horizontal">\n    <div class="col-xs-12 streetAddressContainer">\n      ';c=a.third_party;if((c=e["if"].call(a,c,{hash:{},inverse:l.program(4,function(a,c){var b,d;b='\n        <div class="form-group">\n          <h3 class="col-xs-12">Street address</h3>\n          <div class="col-xs-12 h3-control postalAddressDifferentAsBusinessAddressContainer">\n            <label for="';
(d=e.cid)?d=d.call(a,{hash:{}}):(d=a.cid,d="function"===typeof d?d():d);b+=h(d)+'postalAddressDifferentAsBusinessAddress" class="checkbox">\n              <input type="checkbox" class="boolean" id="';(d=e.cid)?d=d.call(a,{hash:{}}):(d=a.cid,d="function"===typeof d?d():d);b+=h(d)+'postalAddressDifferentAsBusinessAddress" name="postalAddressDifferentAsBusinessAddress" value="true" ';d=a.postalAddressDifferentAsBusinessAddress;if((d=e["if"].call(a,d,{hash:{},inverse:l.noop,fn:l.program(5,g,c)}))||0===
d)b+=d;return b+" />\n              Postal address is different\n            </label>\n          </div>\n        </div>\n      "},d),fn:l.program(1,function(a,c){var b,d;b='\n        <div class="row">\n          <h3 class="col-xs-24">Service provider\'s street address</h3>\n        </div>\n        <div class="form-group">\n          <div class="col-xs-16 col-xs-offset-8 postalAddressDifferentAsBusinessAddressContainer">\n            <label for="';(d=e.cid)?d=d.call(a,{hash:{}}):(d=a.cid,d="function"===
typeof d?d():d);b+=h(d)+'postalAddressDifferentAsBusinessAddress" class="checkbox">\n              <input type="checkbox" class="boolean" id="';(d=e.cid)?d=d.call(a,{hash:{}}):(d=a.cid,d="function"===typeof d?d():d);b+=h(d)+'postalAddressDifferentAsBusinessAddress" name="postalAddressDifferentAsBusinessAddress" value="true" ';d=a.postalAddressDifferentAsBusinessAddress;if((d=e["if"].call(a,d,{hash:{},inverse:l.noop,fn:l.program(2,f,c)}))||0===d)b+=d;return b+" />\n              Postal address is different\n            </label>\n          </div>\n        </div>\n      "},
d)}))||0===c)b+=c;b+='\n    </div>\n    <div class="col-xs-12 postalAddressContainer ';c=a.postalAddressDifferentAsBusinessAddress;if((c=e.unless.call(a,c,{hash:{},inverse:l.noop,fn:l.program(7,function(a,c){return"hidden"},d)}))||0===c)b+=c;b+='">\n      ';c=a.third_party;if((c=e["if"].call(a,c,{hash:{},inverse:l.program(11,function(a,c){return'\n        <div class="form-group">\n          <h3 class="col-xs-24">Postal address</h3>\n        </div>\n      '},d),fn:l.program(9,function(a,c){return'\n        <div class="row">\n          <h3 class="col-xs-24">Service provider\'s postal address</h3>\n        </div>\n      '},
d)}))||0===c)b+=c;b+='\n    </div>\n  </div>\n  <div class="row form-horizontal">\n    <div class="col-xs-12 streetAddressContainer">\n      <div class="streetAddress"></div>\n    </div>\n    <div class="col-xs-12 postalAddressContainer ';c=a.postalAddressDifferentAsBusinessAddress;if((c=e.unless.call(a,c,{hash:{},inverse:l.noop,fn:l.program(13,function(a,c){return"hidden"},d)}))||0===c)b+=c;return b+'">\n      <div class="postalAddress"></div>\n    </div>\n  </div>\n</div>\n'});return this.HandlebarsTemplates["commons/addresses"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["commons/admin_header"]=Handlebars.template(function(b,a,e,c,d){function f(a,c){var b,d;b='\n              <li><a href="';d=(d=e.adminUrl)?d.call(a,"demote-partner-businesses",{hash:{}}):h.call(a,"adminUrl","demote-partner-businesses",{hash:{}});b+=l(d)+'">Demote partner businesses</a></li>\n              <li><a href="';d=(d=e.adminUrl)?d.call(a,"partner-program",{hash:{}}):h.call(a,"adminUrl","partner-program",
{hash:{}});return b+=l(d)+'">Partner Program</a></li>\n            '}function g(a,c){var b,d;b='\n          <li class="top-menu">\n            <a class="dropdown-toggle clickable" data-toggle="dropdown"><i class="fa fa-plus"></i> Reports & Info <b class="caret"></b></a>\n            <ul class="dropdown-menu">\n              <li><a href="';d=(d=e.adminUrl)?d.call(a,"health-check-reports",{hash:{}}):h.call(a,"adminUrl","health-check-reports",{hash:{}});b+=l(d)+'">Health check report</a></li>\n              <li><a href="';
d=(d=e.adminUrl)?d.call(a,"pm-reports",{hash:{}}):h.call(a,"adminUrl","pm-reports",{hash:{}});b+=l(d)+'">PM reports</a></li>\n              <li><a href="';d=(d=e.adminUrl)?d.call(a,"advisor-details-report",{hash:{}}):h.call(a,"adminUrl","advisor-details-report",{hash:{}});b+=l(d)+'">Advisor details report</a></li>\n            </ul>\n          </li>\n          <li class="top-menu"><a class="dropdown-toggle clickable" data-toggle="dropdown"><i class="fa fa-plus"></i> Intermediary <b class="caret"></b></a>\n            <ul class="dropdown-menu">\n                <li><a href="';
d=(d=e.adminUrl)?d.call(a,"intermediary-eps",{hash:{}}):h.call(a,"adminUrl","intermediary-eps",{hash:{}});b+=l(d)+'">Electronic Payment Schedule (EPS)</a></li>\n                <li><a href="';d=(d=e.adminUrl)?d.call(a,"intermediary-scf",{hash:{}}):h.call(a,"adminUrl","intermediary-scf",{hash:{}});b+=l(d)+'">Subsidy Claim Form (SCF)</a></li>\n                <li><a href="';d=(d=e.adminUrl)?d.call(a,"intermediary-ird-bank-file",{hash:{}}):h.call(a,"adminUrl","intermediary-ird-bank-file",{hash:{}});
b+=l(d)+'">Direct Credit Bank File (IRD)</a></li>\n            </ul>\n          </li>\n            <li class="top-menu"><a href="';(d=e.homeUrl)?d=d.call(a,{hash:{}}):(d=a.homeUrl,d="function"===typeof d?d():d);return b+=l(d)+'" target="_blank"><i class="fa fa-home"></i> Business List</a></li>\n        '}e=e||b.helpers;var h=e.helperMissing,l=this.escapeExpression;b='<header class="navbar navbar-inverse" role="navigation">\n  <div class="container">\n    <div class="navbar-header">\n      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar-collapse-1">\n        <span class="sr-only">Toggle navigation</span>\n        <span class="icon-bar"></span>\n        <span class="icon-bar"></span>\n        <span class="icon-bar"></span>\n      </button>\n      <h1>Nerve Centre</h1>\n    </div>\n\n    <div class="collapse navbar-collapse" id="navbar-collapse-1">\n      <ul class="nav navbar-nav navbar-right">\n        <li class="dropdown">\n          <a href="#" id="logoutLink">\n            <i class="fa fa-lock fa-inverse fa-padded"></i> Logout\n          </a>\n        </li>\n      </ul>\n    </div>\n  </div>\n</header>\n\n<nav id="menu-nav" class="navbar navbar-default" role="navigation">\n  <div class="container">\n    <div class="navbar-header">\n      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar-collapse-2">\n        <span class="sr-only">Toggle navigation</span>\n        <span class="icon-bar"></span>\n        <span class="icon-bar"></span>\n        <span class="icon-bar"></span>\n      </button>\n    </div>\n\n    <div class="collapse navbar-collapse" id="navbar-collapse-2">\n      <ul class="nav navbar-nav">\n        <li class="top-menu">\n          <a class="dropdown-toggle clickable" data-toggle="dropdown"><i class="fa fa-plus"></i> Manage stuff <b class="caret"></b></a>\n          <ul class="dropdown-menu">\n            <li><a href="';
c=(c=e.adminUrl)?c.call(a,"contextual-help",{hash:{}}):h.call(a,"adminUrl","contextual-help",{hash:{}});b+=l(c)+'">Contextual help</a></li>\n            <li><a href="';c=(c=e.adminUrl)?c.call(a,"feature-tags",{hash:{}}):h.call(a,"adminUrl","feature-tags",{hash:{}});b+=l(c)+'">Feature tags</a></li>\n            <li><a href="';c=(c=e.adminUrl)?c.call(a,"business-feature-tags",{hash:{}}):h.call(a,"adminUrl","business-feature-tags",{hash:{}});b+=l(c)+'">Business feature tags</a></li>\n            <li><a href="';
c=(c=e.adminUrl)?c.call(a,"user-feature-tags",{hash:{}}):h.call(a,"adminUrl","user-feature-tags",{hash:{}});b+=l(c)+'">User feature tags</a></li>\n            <li><a href="';c=(c=e.adminUrl)?c.call(a,"noticeboard",{hash:{}}):h.call(a,"adminUrl","noticeboard",{hash:{}});b+=l(c)+'">Noticeboard</a></li>\n            <li><a href="';c=(c=e.adminUrl)?c.call(a,"manage-businesses",{hash:{}}):h.call(a,"adminUrl","manage-businesses",{hash:{}});b+=l(c)+'">Users</a></li>\n            <li><a href="';c=(c=e.adminUrl)?
c.call(a,"delete-bank-statement",{hash:{}}):h.call(a,"adminUrl","delete-bank-statement",{hash:{}});b+=l(c)+'">Delete bank statement</a></li>\n            <li><a href="';c=(c=e.adminUrl)?c.call(a,"queue-users",{hash:{}}):h.call(a,"adminUrl","queue-users",{hash:{}});b+=l(c)+'">Queue users (to MyDot)</a></li>\n            <li><a href="';c=(c=e.adminUrl)?c.call(a,"trinity",{hash:{}}):h.call(a,"adminUrl","trinity",{hash:{}});b+=l(c)+'">Trinity</a></li>\n            ';if((c=(c=e.ifUserHasRole)?c.call(a,
"ROLE_HELPDESKADMINISTRATOR",{hash:{},inverse:this.noop,fn:this.program(1,f,d)}):h.call(a,"ifUserHasRole","ROLE_HELPDESKADMINISTRATOR",{hash:{},inverse:this.noop,fn:this.program(1,f,d)}))||0===c)b+=c;b+="\n          </ul>\n        </li>\n\n        ";if((c=(c=e.ifUserHasRole)?c.call(a,"ROLE_HELPDESKADMINISTRATOR",{hash:{},inverse:this.noop,fn:this.program(3,g,d)}):h.call(a,"ifUserHasRole","ROLE_HELPDESKADMINISTRATOR",{hash:{},inverse:this.noop,fn:this.program(3,g,d)}))||0===c)b+=c;return b+"\n      </ul>\n    </div>\n  </div>\n</nav>\n\n"});
return this.HandlebarsTemplates["commons/admin_header"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["commons/advisor_centre_header"]=Handlebars.template(function(b,a,e,c,d){function f(a,c){return'\n                <li>\n                    <a href="http://help.myob.com.au/essentials/showme/showme.html#partnerdashboard" target="_blank">Videos</a>\n                </li>\n            '}function g(a,c){return'\n                <li>\n                    <a href="http://help.myob.co.nz/essentials/showme/showme.html#partnerdashboard" target="_blank">Videos</a>\n                </li>\n            '}function h(a,
c){return'\n            <li>\n              <a href="http://myob.com.au/essentials/support" target="_blank">Support</a>\n            </li>\n            '}function l(a,c){return'\n            <li>\n              <a href="http://myob.co.nz/essentials/support" target="_blank">Support</a>\n            </li>\n            '}e=e||b.helpers;var k,m=e.helperMissing,n=this.escapeExpression,q=e.blockHelperMissing;b='<header id="menu-nav" class="navbar navbar-myob navbar-myob-header" role="navigation">\n  <div class="container">\n    <div class="navbar-header">\n      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar-collapse-2">\n        <span class="sr-only">Toggle navigation</span>\n        <span class="icon-bar"></span>\n        <span class="icon-bar"></span>\n        <span class="icon-bar"></span>\n      </button>\n      <a class="navbar-brand" href="';
c=a.businessId;c=(k=e.appUrl)?k.call(a,c,"/advisor",{hash:{}}):m.call(a,"appUrl",c,"/advisor",{hash:{}});b+=n(c)+'">\n        <img src="frontend/logo-new.svg" alt="MYOB" width="73" height="30">\n      </a>\n    </div>\n\n    <div class="collapse navbar-collapse" id="navbar-collapse-2">\n      <ul class="nav navbar-nav">\n        <li class="top-menu"><a href="';c=a.businessId;c=(k=e.appUrl)?k.call(a,c,"/advisor",{hash:{}}):m.call(a,"appUrl",c,"/advisor",{hash:{}});b+=n(c)+'">Dashboard</a></li>\n        <li class="top-menu"><a href="';
c=a.businessId;c=(k=e.appUrl)?k.call(a,c,"/advisor/details",{hash:{}}):m.call(a,"appUrl",c,"/advisor/details",{hash:{}});b+=n(c)+'">My profile</a></li>\n        <li class="top-menu"><a href="';c=a.businessId;c=(k=e.appUrl)?k.call(a,c,"/advisor/users",{hash:{}}):m.call(a,"appUrl",c,"/advisor/users",{hash:{}});b+=n(c)+'">Users</a></li>\n\n      </ul>\n      <ul class="nav navbar-nav navbar-right">\n        <li id="my-liveaccounts">\n          <a href="';c=(k=e.contextUrl)?k.call(a,"/app.htm#myBusinesses",
{hash:{}}):m.call(a,"contextUrl","/app.htm#myBusinesses",{hash:{}});b+=n(c)+'">\n            My businesses\n          </a>\n        </li>\n        <li class="help-menu top-menu">\n          <a class="dropdown-toggle clickable" data-toggle="dropdown">\n            <i class="myob-icon-help-v2"></i>\n          </a>\n          <ul class="dropdown-menu">\n            <li>\n              <a href="http://help.myob.com/wiki/x/';(k=e.helpTopicId)?c=k.call(a,{hash:{}}):(c=a.helpTopicId,c="function"===typeof c?
c():c);b+=n(c)+'" target="_blank">Help for this page</a>\n            </li>\n            ';(k=e.ifAu)?c=k.call(a,{hash:{},inverse:this.noop,fn:this.program(1,f,d)}):(c=a.ifAu,c="function"===typeof c?c():c);e.ifAu||(c=q.call(a,c,{hash:{},inverse:this.noop,fn:this.program(1,f,d)}));if(c||0===c)b+=c;b+="\n            ";(k=e.ifNz)?c=k.call(a,{hash:{},inverse:this.noop,fn:this.program(3,g,d)}):(c=a.ifNz,c="function"===typeof c?c():c);e.ifNz||(c=q.call(a,c,{hash:{},inverse:this.noop,fn:this.program(3,g,
d)}));if(c||0===c)b+=c;b+='\n            <li>\n              <a href="http://community.myob.com/t5/The-MYOB-Essentials-Blog/bg-p/EssentialsBlog" target="_blank">Blog</a>\n            </li>\n            ';(k=e.ifAu)?c=k.call(a,{hash:{},inverse:this.noop,fn:this.program(5,h,d)}):(c=a.ifAu,c="function"===typeof c?c():c);e.ifAu||(c=q.call(a,c,{hash:{},inverse:this.noop,fn:this.program(5,h,d)}));if(c||0===c)b+=c;b+="\n            ";(k=e.ifNz)?c=k.call(a,{hash:{},inverse:this.noop,fn:this.program(7,l,d)}):
(c=a.ifNz,c="function"===typeof c?c():c);e.ifNz||(c=q.call(a,c,{hash:{},inverse:this.noop,fn:this.program(7,l,d)}));if(c||0===c)b+=c;return b+'\n          </ul>\n        </li>\n        <li class="dropdown">\n          <a href="#" id="logoutLink">\n            Logout <i class="myob-icon-sign-out-v2 icons-small margin-left-05"></i>\n          </a>\n        </li>\n      </ul>\n    </div>\n  </div>\n</header>\n\n\n'});return this.HandlebarsTemplates["commons/advisor_centre_header"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["commons/application_messages"]=Handlebars.template(function(b,a,e,c,d){return'<div class="messages">\n</div>\n'});return this.HandlebarsTemplates["commons/application_messages"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["commons/confirmation_dialog"]=Handlebars.template(function(b,a,e,c,d){e=e||b.helpers;var f=this.escapeExpression;b='<div class="modal-dialog confirmation">\n  <div class="modal-content">\n    <div class="modal-header">\n      <span id="modal-title-confirmation-dialog" class="modal-title">';(c=e.title)?c=c.call(a,{hash:{}}):(c=a.title,c="function"===typeof c?c():c);b+=f(c)+'</span>\n    </div>\n    <div class="modal-body">\n      <div id="message" class="row">\n        <div class="col-xs-24 message-content"></div>\n        <div class="mediumLoadingSpinner"></div>\n      </div>\n\n      <div class="row top-buffer">\n        <div class="col-xs-24">\n          <div class="pull-right">\n            ';
c=a.buttonYes;if((c=e["if"].call(a,c,{hash:{},inverse:this.noop,fn:this.program(1,function(a,c){var b,d;b='\n              <button id="buttonYes" class="btn btn-primary">';(d=e.buttonYesText)?d=d.call(a,{hash:{}}):(d=a.buttonYesText,d="function"===typeof d?d():d);return b+=f(d)+"</button>\n            "},d)}))||0===c)b+=c;b+="\n            ";c=a.buttonNo;if((c=e["if"].call(a,c,{hash:{},inverse:this.noop,fn:this.program(3,function(a,c){var b,d;b='\n              <button id="buttonNo" class="btn btn-default">';
(d=e.buttonNoText)?d=d.call(a,{hash:{}}):(d=a.buttonNoText,d="function"===typeof d?d():d);return b+=f(d)+"</button>\n            "},d)}))||0===c)b+=c;b+="\n            ";c=a.buttonOK;if((c=e["if"].call(a,c,{hash:{},inverse:this.noop,fn:this.program(5,function(a,c){return'\n              <button id="buttonOK" class="btn btn-default">OK</button>\n            '},d)}))||0===c)b+=c;b+="\n            ";c=a.buttonCancel;if((c=e["if"].call(a,c,{hash:{},inverse:this.noop,fn:this.program(7,function(a,c){return'\n                <button id="buttonCancel" class="btn btn-default">Cancel</button>\n            '},
d)}))||0===c)b+=c;b+="\n            ";c=a.buttonClose;if((c=e["if"].call(a,c,{hash:{},inverse:this.noop,fn:this.program(9,function(a,c){return'\n                <button id="buttonClose" class="btn btn-default">Close</button>\n            '},d)}))||0===c)b+=c;return b+"\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n"});return this.HandlebarsTemplates["commons/confirmation_dialog"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["commons/confirmation_message"]=Handlebars.template(function(b,a,e,c,d){e=e||b.helpers;b="";var f=this.escapeExpression;c=a.messages;if((c=e.each.call(a,c,{hash:{},inverse:this.noop,fn:this.program(1,function(a,c){var b;b='\n  <p class="dialog-message">';a="function"===typeof a?a():a;return b+=f(a)+"</p>\n"},d)}))||0===c)b+=c;return b+"\n"});return this.HandlebarsTemplates["commons/confirmation_message"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["commons/email_attachment"]=Handlebars.template(function(b,a,e,c,d){e=e||b.helpers;b="";c=this.escapeExpression;(e=e.displayFilename)?a=e.call(a,{hash:{}}):(a=a.displayFilename,a="function"===typeof a?a():a);return b+=c(a)+' <i id="removeAttachment"\n     class="fa fa-times-circle remove-email-attachment"></i>\n\n'});return this.HandlebarsTemplates["commons/email_attachment"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["commons/email_attachment_list"]=Handlebars.template(function(b,a,e,c,d){e=e||b.helpers;c=this.escapeExpression;b='  <label for="emailFile" class="col-xs-6 control-label">Attachments</label>\n  <div class="col-xs-17">\n    <div>\n    <div class="required-attachment"><i class="fa fa-paperclip" style="font-size: 1.4em;"></i><span class="pull-right">';(e=e.invoiceNumber)?a=e.call(a,{hash:{}}):(a=a.invoiceNumber,
a="function"===typeof a?a():a);return b+=c(a)+'.pdf</span></div>\n    <div class="pull-right">\n      <div class="cols-xs-4 pull-right">\n        <input type="file" id="attachFileInput" name="attachmentFileInput" title="Add attachments" multiple style="display: none;"/>\n        <input type="button" id="attachFileButton" name="attachFileButton" value="Add attachments" class="btn btn-default attach-file-btn"/>\n      </div>\n    </div>\n    </div>\n    <div class="pull-right">\n      <span class="help-inline error-message email-attachment-error">&nbsp;</span>\n    </div>\n  </div>\n  <div class="col-xs-18 form-control-wrapper email-attachments-wrapper" >\n    <ul id="filesUploaded">\n    </ul>\n  </div>\n'});
return this.HandlebarsTemplates["commons/email_attachment_list"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["commons/errors"]=Handlebars.template(function(b,a,e,c,d){function f(a,c){var b,d;b="\n    ";(d=e.exApiErrorMessage)?d=d.call(a,{hash:{}}):(d=a.exApiErrorMessage,d="function"===typeof d?d():d);b+=k(d)+"\n        <br>\n        If it's still not working, get in touch with our\n        <a href=\"";d=(d=e.configProperty)?d.call(a,"contactUsUrl",{hash:{}}):m.call(a,"configProperty","contactUsUrl",{hash:{}});return b+=
k(d)+'" target="_blank">support team</a>.\n  '}function g(a,c){return"\n        Please fix the following problem(s):\n  "}function h(a,c){var b,d,f;b="\n      <li>";d=a.field;if((d=(f=e.unlessBlank)?f.call(a,d,{hash:{},inverse:n.noop,fn:n.program(10,l,c)}):m.call(a,"unlessBlank",d,{hash:{},inverse:n.noop,fn:n.program(10,l,c)}))||0===d)b+=d;(f=e.message)?d=f.call(a,{hash:{}}):(d=a.message,d="function"===typeof d?d():d);return b+=k(d)+"</li>\n  "}function l(a,c){var b="",d,f;d=a.field;d=(f=e.humanize)?
f.call(a,d,{hash:{}}):m.call(a,"humanize",d,{hash:{}});return b+=k(d)+": "}e=e||b.helpers;var k=this.escapeExpression,m=e.helperMissing,n=this;b='<button type="button" class="close" data-dismiss="alert">\u00d7</button>\n<div class="error-message">\n  ';c=a.errorMessage;if((c=e["if"].call(a,c,{hash:{},inverse:n.program(3,function(a,c){var b,d;b=" ";d=a.exApiErrorMessage;if((d=e["if"].call(a,d,{hash:{},inverse:n.program(6,g,c),fn:n.program(4,f,c)}))||0===d)b+=d;return b},d),fn:n.program(1,function(a,
c){var b,d;b="\n    ";(d=e.errorMessage)?d=d.call(a,{hash:{}}):(d=a.errorMessage,d="function"===typeof d?d():d);b+=k(d)+'\n    <br>\n    If you continue to have a problem accessing pages, please contact\n    <a href="';d=(d=e.configProperty)?d.call(a,"supportUrl",{hash:{}}):m.call(a,"configProperty","supportUrl",{hash:{}});return b+=k(d)+'" target="_blank">MYOB Essentials support</a>.\n  '},d)}))||0===c)b+=c;b+="\n</div>\n";c=a.errors;if((c=e["if"].call(a,c,{hash:{},inverse:n.noop,fn:n.program(8,
function(a,c){var b,d;b='\n  <ul class="errors-list">\n  ';d=a.errors;if((d=e.each.call(a,d,{hash:{},inverse:n.noop,fn:n.program(9,h,c)}))||0===d)b+=d;return b+"\n  </ul>\n"},d)}))||0===c)b+=c;return b+"\n"});return this.HandlebarsTemplates["commons/errors"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["commons/footer"]=Handlebars.template(function(b,a,e,c,d){e=e||b.helpers;var f;c=e.helperMissing;d=this.escapeExpression;b='<nav id="footer-myob" class="navbar-myob navbar-myob-footer" role="navigation">\n  <div class="container">\n    <div class="navbar-header">\n      <div class="navbar-brand">\n        <img src="frontend/logo-new.svg" alt="MYOB" width="80" height="33">\n      </div>\n    </div>\n    <div class="collapse navbar-collapse">\n      <ul class="nav navbar-nav navbar-right">\n        <li><a href="';f=
(f=e.configProperty)?f.call(a,"privacyUrl",{hash:{}}):c.call(a,"configProperty","privacyUrl",{hash:{}});b+=d(f)+'" target="_blank">Privacy policy</a></li>\n        <li><a href="';f=(f=e.configProperty)?f.call(a,"aboutUsUrl",{hash:{}}):c.call(a,"configProperty","aboutUsUrl",{hash:{}});b+=d(f)+'" target="_blank">About us</a></li>\n        <li><a href="';f=(f=e.configProperty)?f.call(a,"supportUrl",{hash:{}}):c.call(a,"configProperty","supportUrl",{hash:{}});b+=d(f)+'" target="_blank">Support</a></li>\n      </ul>\n    </div>\n  </div>\n</nav>\n<div class="footer-myob">\n  <div class="container footer-myob-container">\n    <div class="row">\n      <div class="col-xs-6">\n        \u00a9 ';
(f=e.currentYear)?f=f.call(a,{hash:{}}):(f=a.currentYear,f="function"===typeof f?f():f);return b+=d(f)+' MYOB Technology Pty Ltd.\n      </div>\n      <div class="col-xs-18 footer-myob-copyright">\n          MYOB Essentials and the MYOB Essentials logo are trademarks of MYOB Technology Pty Ltd\n      </div>\n    </div>\n  </div>\n</div>\n\n'});return this.HandlebarsTemplates["commons/footer"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["commons/idam_errors"]=Handlebars.template(function(b,a,e,c,d){e=e||b.helpers;c=this.escapeExpression;b='<br/>\n<div id="page-errors" class="alert alert-danger">\n  <br>\n  <div class="error-message">\n    ';(e=e.errorMessage)?a=e.call(a,{hash:{}}):(a=a.errorMessage,a="function"===typeof a?a():a);return b+=c(a)+"\n  </div>\n</div>\n"});return this.HandlebarsTemplates["commons/idam_errors"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["commons/iframe_container"]=Handlebars.template(function(b,a,e,c,d){e=e||b.helpers;c=this.escapeExpression;b='<div id="alerts-row" class="row">\n  <div id="alert-container" class="iframe-alert col-xs-24"></div>\n</div>\n<div class="loadingSpinner"></div>\n<div class="frame-container">\n  <div id="billboard" class="iframe-billboard"></div>\n  <iframe id="';(d=e.id)?d=d.call(a,{hash:{}}):(d=a.id,d="function"===
typeof d?d():d);b+=c(d)+'" frameborder="no" scrolling="no" width="100%" height="100%" src="';(d=e.url)?d=d.call(a,{hash:{}}):(d=a.url,d="function"===typeof d?d():d);return b+=c(d)+'"></iframe>\n</div>\n<div class="frame-overlay"></div>\n'});return this.HandlebarsTemplates["commons/iframe_container"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["commons/notification"]=Handlebars.template(function(b,a,e,c,d){function f(a,c){return'\n    <button type="button" class="close" data-dismiss="alert"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>\n  '}e=e||b.helpers;var g,h=this.escapeExpression,l=e.helperMissing;b='<div class="alert alert-';(g=e.type)?c=g.call(a,{hash:{}}):(c=a.type,c="function"===typeof c?c():c);b+=h(c)+
' alert-dismissible">\n  ';c=a.closeButton;if((c=(g=e.ifEqual)?g.call(a,c,!0,{hash:{},inverse:this.noop,fn:this.program(1,f,d)}):l.call(a,"ifEqual",c,!0,{hash:{},inverse:this.noop,fn:this.program(1,f,d)}))||0===c)b+=c;b+="\n  ";(g=e.message)?c=g.call(a,{hash:{}}):(c=a.message,c="function"===typeof c?c():c);if(c||0===c)b+=c;return b+"\n</div>\n"});return this.HandlebarsTemplates["commons/notification"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["commons/onboarding_navigation"]=Handlebars.template(function(b,a,e,c,d){e=e||b.helpers;var f=this.escapeExpression;b='\n<div id="onboarding-navigation" class="row hidden">\n\n  <div class="col-xs-2 banner-icon">\n    <i class="icon-task-centre"/>\n  </div>\n\n  <div id="onboarding-title" class="col-xs-6">\n    <h3>';(c=e.title)?c=c.call(a,{hash:{}}):(c=a.title,c="function"===typeof c?c():c);b+=f(c)+'</h3>\n    <button id="onboarding-previous-btn" class="btn btn-default"><i class="myob-icon-replied"></i> ';
(c=e.previousText)?c=c.call(a,{hash:{}}):(c=a.previousText,c="function"===typeof c?c():c);b+=f(c)+'</button>\n  </div>\n\n  <div id="onboarding-content" class="col-xs-10">\n    <div class="panel-body">\n      ';c=a.contents;if((c=e.each.call(a,c,{hash:{},inverse:this.noop,fn:this.program(1,function(a,c){var b;b="\n        <p>";if((a="function"===typeof a?a():a)||0===a)b+=a;return b+"</p>\n      "},d)}))||0===c)b+=c;b+='\n    </div>\n  </div>\n\n  <div id="onboarding-next" class="col-xs-6">\n    <div class="panel-body">\n      <p><strong>';
(c=e.nextHeader)?c=c.call(a,{hash:{}}):(c=a.nextHeader,c="function"===typeof c?c():c);b+=f(c)+"</strong></p>\n      ";c=a.nextText;if((c=e["if"].call(a,c,{hash:{},inverse:this.noop,fn:this.program(3,function(a,c){var b,d;b='\n        <button id="onboarding-next-btn" class="btn btn-default ">';(d=e.nextText)?d=d.call(a,{hash:{}}):(d=a.nextText,d="function"===typeof d?d():d);return b+=f(d)+"</button>\n      "},d)}))||0===c)b+=c;return b+"\n    </div>\n  </div>\n</div>\n"});return this.HandlebarsTemplates["commons/onboarding_navigation"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["commons/paginator"]=Handlebars.template(function(b,a,e,c,d){function f(a,c){return" disabled"}function g(a,c){return" disabled"}function h(a,c){var b;b='\n    <span class="page selected" data-page="';a="function"===typeof a?a():a;b+=r(a)+'">';a="function"===typeof a?a():a;return b+=r(a)+"</span>\n  "}function l(a,c){var b,d;b="\n    ";if((d=(d=e.ifNumber)?d.call(a,a,{hash:{},inverse:u.program(11,m,c),fn:u.program(9,
k,c)}):v.call(a,"ifNumber",a,{hash:{},inverse:u.program(11,m,c),fn:u.program(9,k,c)}))||0===d)b+=d;return b+"\n  "}function k(a,c){var b;b='\n      <span class="page" data-page="';a="function"===typeof a?a():a;b+=r(a)+'">';a="function"===typeof a?a():a;return b+=r(a)+"</span>\n    "}function m(a,c){var b;b='\n      <span class="page disabled" data-page="';a="function"===typeof a?a():a;b+=r(a)+'">';a="function"===typeof a?a():a;return b+=r(a)+"</span>\n    "}function n(a,c){return" disabled"}function q(a,
c){return" disabled"}e=e||b.helpers;var p,t,r=this.escapeExpression,u=this,v=e.helperMissing;b='<span class="page first';c=a.currentPage;if((c=(t=e.ifEqual)?t.call(a,c,1,{hash:{},inverse:u.noop,fn:u.program(1,f,d)}):v.call(a,"ifEqual",c,1,{hash:{},inverse:u.noop,fn:u.program(1,f,d)}))||0===c)b+=c;b+='" data-page="1">First</span>\n<span class="page prev';c=a.currentPage;if((c=(t=e.ifEqual)?t.call(a,c,1,{hash:{},inverse:u.noop,fn:u.program(3,g,d)}):v.call(a,"ifEqual",c,1,{hash:{},inverse:u.noop,fn:u.program(3,
g,d)}))||0===c)b+=c;b+='" data-page="';(t=e.previous)?c=t.call(a,{hash:{}}):(c=a.previous,c="function"===typeof c?c():c);b+=r(c)+'">Previous</span>\n';c=a.pageSet;if((c=e.each.call(a,c,{hash:{},inverse:u.noop,fn:u.programWithDepth(function(a,c,b){var d,f;d="\n  ";b=b.currentPage;if((b=(f=e.ifEqual)?f.call(a,b,a,{hash:{},inverse:u.program(8,l,c),fn:u.program(6,h,c)}):v.call(a,"ifEqual",b,a,{hash:{},inverse:u.program(8,l,c),fn:u.program(6,h,c)}))||0===b)d+=b;return d+"\n"},d,a)}))||0===c)b+=c;b+='\n<span class="page next';
c=a.lastPage;p=a.currentPage;if((c=(t=e.ifEqual)?t.call(a,p,c,{hash:{},inverse:u.noop,fn:u.program(13,n,d)}):v.call(a,"ifEqual",p,c,{hash:{},inverse:u.noop,fn:u.program(13,n,d)}))||0===c)b+=c;b+='" data-page="';(t=e.next)?c=t.call(a,{hash:{}}):(c=a.next,c="function"===typeof c?c():c);b+=r(c)+'">Next</span>\n<span class="page last';c=a.lastPage;p=a.currentPage;if((c=(t=e.ifEqual)?t.call(a,p,c,{hash:{},inverse:u.noop,fn:u.program(15,q,d)}):v.call(a,"ifEqual",p,c,{hash:{},inverse:u.noop,fn:u.program(15,
q,d)}))||0===c)b+=c;b+='" data-page="';(t=e.lastPage)?c=t.call(a,{hash:{}}):(c=a.lastPage,c="function"===typeof c?c():c);return b+=r(c)+'">Last</span>\n'});return this.HandlebarsTemplates["commons/paginator"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["commons/partial/checkbox"]=Handlebars.template(function(b,a,e,c,d){function f(a,c){return"form-group"}function g(a,c){var b;(b=e.cssClass)?b=b.call(a,{hash:{}}):(b=a.cssClass,b="function"===typeof b?b():b);return l(b)}e=e||b.helpers;var h,l=this.escapeExpression,k=e.helperMissing;b='<div class="';c=a.cssClass;if((c=(h=e.ifUndefined)?h.call(a,c,{hash:{},inverse:this.program(3,g,d),fn:this.program(1,f,d)}):
k.call(a,"ifUndefined",c,{hash:{},inverse:this.program(3,g,d),fn:this.program(1,f,d)}))||0===c)b+=c;b+=' checkbox">\n  <label for="';(h=e.name)?c=h.call(a,{hash:{}}):(c=a.name,c="function"===typeof c?c():c);b+=l(c)+'">\n    <input type="checkbox" id="';(h=e.name)?c=h.call(a,{hash:{}}):(c=a.name,c="function"===typeof c?c():c);b+=l(c)+'" name="';(h=e.name)?c=h.call(a,{hash:{}}):(c=a.name,c="function"===typeof c?c():c);b+=l(c)+'" ';c=a.checked;if((c=e["if"].call(a,c,{hash:{},inverse:this.noop,fn:this.program(5,
function(a,c){return'checked="checked"'},d)}))||0===c)b+=c;b+=" />&nbsp;";(h=e.label)?c=h.call(a,{hash:{}}):(c=a.label,c="function"===typeof c?c():c);return b+=l(c)+"\n  </label>\n</div>\n"});return this.HandlebarsTemplates["commons/partial/checkbox"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["commons/partial/form_group_checkbox"]=Handlebars.template(function(b,a,e,c,d){function f(a,c){return"form-group"}function g(a,c){var b;(b=e.cssClass)?b=b.call(a,{hash:{}}):(b=a.cssClass,b="function"===typeof b?b():b);return m(b)}function h(a,c){return"col-xs-16 col-xs-offset-8"}function l(a,c){var b;(b=e.widgetCssClass)?b=b.call(a,{hash:{}}):(b=a.widgetCssClass,b="function"===typeof b?b():b);return m(b)}
e=e||b.helpers;var k,m=this.escapeExpression,n=e.helperMissing;b='<div class="';c=a.cssClass;if((c=(k=e.ifUndefined)?k.call(a,c,{hash:{},inverse:this.program(3,g,d),fn:this.program(1,f,d)}):n.call(a,"ifUndefined",c,{hash:{},inverse:this.program(3,g,d),fn:this.program(1,f,d)}))||0===c)b+=c;b+='">\n  <div class="';c=a.widgetCssClass;if((c=(k=e.ifUndefined)?k.call(a,c,{hash:{},inverse:this.program(7,l,d),fn:this.program(5,h,d)}):n.call(a,"ifUndefined",c,{hash:{},inverse:this.program(7,l,d),fn:this.program(5,
h,d)}))||0===c)b+=c;b+=' form-control-wrapper" data-id="';(k=e.inputId)?c=k.call(a,{hash:{}}):(c=a.inputId,c="function"===typeof c?c():c);b+=m(c)+'" data-widget="';(k=e.widgetName)?c=k.call(a,{hash:{}}):(c=a.widgetName,c="function"===typeof c?c():c);b+=m(c)+'" data-name="';(k=e.inputName)?c=k.call(a,{hash:{}}):(c=a.inputName,c="function"===typeof c?c():c);b+=m(c)+'" data-label="';(k=e.inputLabel)?c=k.call(a,{hash:{}}):(c=a.inputLabel,c="function"===typeof c?c():c);b+=m(c)+'" ';(k=e.widgetOptions)?
c=k.call(a,{hash:{}}):(c=a.widgetOptions,c="function"===typeof c?c():c);if(c||0===c)b+=c;return b+"></div>\n</div>\n"});return this.HandlebarsTemplates["commons/partial/form_group_checkbox"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["commons/partial/form_group_input"]=Handlebars.template(function(b,a,e,c,d){function f(a,c){var b,d,f;b='\n  <label class="';d=a.labelCssClass;if((d=(f=e.ifUndefined)?f.call(a,d,{hash:{},inverse:q.program(4,h,c),fn:q.program(2,g,c)}):p.call(a,"ifUndefined",d,{hash:{},inverse:q.program(4,h,c),fn:q.program(2,g,c)}))||0===d)b+=d;b+=' control-label" for="';(f=e.inputName)?d=f.call(a,{hash:{}}):(d=a.inputName,
d="function"===typeof d?d():d);b+=n(d)+'">';(f=e.inputLabel)?d=f.call(a,{hash:{}}):(d=a.inputLabel,d="function"===typeof d?d():d);return b+=n(d)+"</label>\n  "}function g(a,c){return"col-xs-8"}function h(a,c){var b;(b=e.labelCssClass)?b=b.call(a,{hash:{}}):(b=a.labelCssClass,b="function"===typeof b?b():b);return n(b)}function l(a,c){return"col-xs-16"}function k(a,c){var b;(b=e.widgetCssClass)?b=b.call(a,{hash:{}}):(b=a.widgetCssClass,b="function"===typeof b?b():b);return n(b)}e=e||b.helpers;var m,
n=this.escapeExpression,q=this,p=e.helperMissing;b='<div class="form-group">\n  ';c=a.inputLabel;if((c=(m=e.ifDefined)?m.call(a,c,{hash:{},inverse:q.noop,fn:q.program(1,f,d)}):p.call(a,"ifDefined",c,{hash:{},inverse:q.noop,fn:q.program(1,f,d)}))||0===c)b+=c;b+='\n  <div class="';c=a.widgetCssClass;if((c=(m=e.ifUndefined)?m.call(a,c,{hash:{},inverse:q.program(8,k,d),fn:q.program(6,l,d)}):p.call(a,"ifUndefined",c,{hash:{},inverse:q.program(8,k,d),fn:q.program(6,l,d)}))||0===c)b+=c;b+=' form-control-wrapper" data-id="';
(m=e.inputId)?c=m.call(a,{hash:{}}):(c=a.inputId,c="function"===typeof c?c():c);b+=n(c)+'" data-widget="';(m=e.widgetName)?c=m.call(a,{hash:{}}):(c=a.widgetName,c="function"===typeof c?c():c);b+=n(c)+'" data-name="';(m=e.inputName)?c=m.call(a,{hash:{}}):(c=a.inputName,c="function"===typeof c?c():c);b+=n(c)+'" ';(m=e.widgetOptions)?c=m.call(a,{hash:{}}):(c=a.widgetOptions,c="function"===typeof c?c():c);if(c||0===c)b+=c;return b+"></div>\n</div>\n"});return this.HandlebarsTemplates["commons/partial/form_group_input"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["commons/partial/form_group_radio"]=Handlebars.template(function(b,a,e,c,d){function f(a,c){return"form-group"}function g(a,c){var b;(b=e.cssClass)?b=b.call(a,{hash:{}}):(b=a.cssClass,b="function"===typeof b?b():b);return m(b)}function h(a,c){return"col-xs-16 col-xs-offset-8"}function l(a,c){var b;(b=e.widgetCssClass)?b=b.call(a,{hash:{}}):(b=a.widgetCssClass,b="function"===typeof b?b():b);return m(b)}e=e||
b.helpers;var k,m=this.escapeExpression,n=e.helperMissing;b='<div class="';c=a.cssClass;if((c=(k=e.ifUndefined)?k.call(a,c,{hash:{},inverse:this.program(3,g,d),fn:this.program(1,f,d)}):n.call(a,"ifUndefined",c,{hash:{},inverse:this.program(3,g,d),fn:this.program(1,f,d)}))||0===c)b+=c;b+='">\n  <div class="';c=a.widgetCssClass;if((c=(k=e.ifUndefined)?k.call(a,c,{hash:{},inverse:this.program(7,l,d),fn:this.program(5,h,d)}):n.call(a,"ifUndefined",c,{hash:{},inverse:this.program(7,l,d),fn:this.program(5,
h,d)}))||0===c)b+=c;b+=' form-control-wrapper" data-id="';(k=e.inputId)?c=k.call(a,{hash:{}}):(c=a.inputId,c="function"===typeof c?c():c);b+=m(c)+'" data-widget="';(k=e.widgetName)?c=k.call(a,{hash:{}}):(c=a.widgetName,c="function"===typeof c?c():c);b+=m(c)+'" data-name="';(k=e.inputName)?c=k.call(a,{hash:{}}):(c=a.inputName,c="function"===typeof c?c():c);b+=m(c)+'" data-id="';(k=e.inputId)?c=k.call(a,{hash:{}}):(c=a.inputId,c="function"===typeof c?c():c);b+=m(c)+'" data-label="';(k=e.inputLabel)?
c=k.call(a,{hash:{}}):(c=a.inputLabel,c="function"===typeof c?c():c);b+=m(c)+'" data-value="';(k=e.inputValue)?c=k.call(a,{hash:{}}):(c=a.inputValue,c="function"===typeof c?c():c);b+=m(c)+'" ';(k=e.widgetOptions)?c=k.call(a,{hash:{}}):(c=a.widgetOptions,c="function"===typeof c?c():c);if(c||0===c)b+=c;return b+"></div>\n</div>\n"});return this.HandlebarsTemplates["commons/partial/form_group_radio"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["commons/partial/hr"]=Handlebars.template(function(b,a,e,c,d){return'<div class="row">\n  <div class="col-xs-24">\n    <hr />\n  </div>\n</div>\n'});return this.HandlebarsTemplates["commons/partial/hr"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["commons/partial/page_heading"]=Handlebars.template(function(b,a,e,c,d){e=e||b.helpers;var f,g=e.helperMissing,h=this.escapeExpression;b='<div id="pageContentHeader" class="row">\n  <h1 class=" col-xs-';c=a.primaryButtons;if((c=e["if"].call(a,c,{hash:{},inverse:this.program(3,function(a,c){return"24"},d),fn:this.program(1,function(a,c){return"13"},d)}))||0===c)b+=c;b+='">';c=a.heading;c=(f=e.humanize)?f.call(a,
c,{hash:{}}):g.call(a,"humanize",c,{hash:{}});b+=h(c);(f=e.headingSuffix)?c=f.call(a,{hash:{}}):(c=a.headingSuffix,c="function"===typeof c?c():c);b+=h(c)+"</h1>\n  ";c=a.primaryButtons;if((c=e["if"].call(a,c,{hash:{},inverse:this.noop,fn:this.program(5,function(a,c){var b,d;b='\n  <div class="col-xs-11 primary-button-group">\n    ';(d=e.primaryButtons)?d=d.call(a,{hash:{}}):(d=a.primaryButtons,d="function"===typeof d?d():d);if(d||0===d)b+=d;return b+"\n  </div>\n  "},d)}))||0===c)b+=c;return b+"\n</div>\n"});
return this.HandlebarsTemplates["commons/partial/page_heading"]}).call(this);(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["commons/simple_header"]=Handlebars.template(function(b,a,e,c,d){return'<div class="login-myob">\n\t<div class="login-myob-brand container">\n      <img src="https://cdn.assets.prod.myob.com/logos/myob/logo-white.svg" alt="MYOB" width="96">\n\t</div>\n</div>\n'});return this.HandlebarsTemplates["commons/simple_header"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["commons/spinner"]=Handlebars.template(function(b,a,e,c,d){return'<div class="loadingSpinner" style="display:block"></div>\n'});return this.HandlebarsTemplates["commons/spinner"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["commons/uncategorised_banner"]=Handlebars.template(function(b,a,e,c,d){function f(a,c){return'\n      <button data-dismiss="alert" class="hide-banner-button close">\n          <i class="myob-icon-close icons-small"></i>\n      </button>\n  '}e=e||b.helpers;var g,h=this.escapeExpression,l=e.helperMissing;b='<div class="row-eq-height billboard-panel uncategorised-billboard-panel">\n    <div class="billboard-new-feature-icon">\n        <span class="myob-icon-new-features-18"></span>\n    </div>\n    <div class="billboard-text col-md-24">\n        <div class="col-xs-offset-1 col-xs-10 text-center flex-valign">\n            <a class="col-xs-24" target="_blank" href="http://help.myob.com/wiki/display/essentials/Getting+started+after+migration+from+MYOB+BankLink">\n                <div class="billboard-image" style="height: 275px">\n                    <img class="margin-top-10"\n                         src="frontend/map_system_acc.png"\n                         alt="" style="width: 280px;">\n                    <p class="margin-top-10">\n                        Should you need further help, we\'ve set up a <strong>resources page here</strong> for you.\n                    </p>\n                </div>\n            </a>\n        </div>\n        <div class="col-xs-16">\n            <h2 class="margin-top-05">Setting up your new account list<br></h2>\n            Before you start recording sales and bills, you\'ll need to complete a few easy setup tasks in MYOB Essentials.\n            <br>\n\n            <ul class="margin-left-30 margin-top-10">\n                <li>Choose account types for any uncategorised accounts and review GST codes from the\n                    <a href=';
(g=e.editAccountsLink)?c=g.call(a,{hash:{}}):(c=a.editAccountsLink,c="function"===typeof c?c():c);b+=h(c)+">Accounts list</a>.</li>\n                <li>Set your <a href=";(g=e.gstSettingsLink)?c=g.call(a,{hash:{}}):(c=a.gstSettingsLink,c="function"===typeof c?c():c);b+=h(c)+">GST reporting settings</a>.</li>\n                <li>If you're coming from MYOB BankLink, map your imported accounts to system accounts in MYOB Essentials.</li>\n            </ul>\n\n            Don't worry, it's easy! Click <strong>Get started</strong> to see your accounts list, where you can edit\n            and map all your accounts in one go.<br>\n\n            <a href=";
(g=e.editAccountsLink)?c=g.call(a,{hash:{}}):(c=a.editAccountsLink,c="function"===typeof c?c():c);b+=h(c)+'>\n                <button class="btn btn-primary hide-banner-button margin-top-20 pull-right">\n                    Get started\n                </button>\n            </a>\n        </div>\n\n    </div>\n  ';c=a.closeButton;if((c=(g=e.ifEqual)?g.call(a,c,!0,{hash:{},inverse:this.noop,fn:this.program(1,f,d)}):l.call(a,"ifEqual",c,!0,{hash:{},inverse:this.noop,fn:this.program(1,f,d)}))||0===c)b+=
c;return b+"\n</div>\n"});return this.HandlebarsTemplates["commons/uncategorised_banner"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["contacts/contact_email"]=Handlebars.template(function(b,a,e,c,d){return'<div class="form-group">\n  <label class="col-xs-6 control-label" for="additionalEmail">Email</label>\n\n  <div class="col-xs-14 form-control-wrapper" data-widget="TextInput" data-name="additionalEmail" data-maxlength="76" data-delay="on">\n      <input type="text" class="form-control" id="additionalEmail" name="additionalEmail" value="" maxlength="76" delay="on">\n  </div>\n\n  <div><span class="actionAdditionalEmail"><i id="delete" class="fa fa-times-circle fa-2x"></i></span></div>\n</div>\n'});return this.HandlebarsTemplates["contacts/contact_email"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["contacts/contact_header"]=Handlebars.template(function(b,a,e,c,d){return'<tr>\n  <th class="text-center" style="width:3%"><input id="selectAll" type="checkbox" /></th>\n  <th data-field="name" style="width:28%" class="asc">Business name<i class="fa fa-caret-up"></i></th>\n  <th data-field="firstName" style="width:15%">First name</th>\n  <th data-field="lastName" style="width:15%">Last name</th>\n  <th data-field="phone" class="text-right" style="width:12%">Phone</th>\n  <th data-field="mobile" class="text-right" style="width:12%">Mobile</th>\n  <th data-field="email" class="text-center" style="width:8%">Email</th>\n  <th data-field="abbreviatedType" style="width:7%">Type</th>\n</tr>\n'});
return this.HandlebarsTemplates["contacts/contact_header"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["contacts/contact_row"]=Handlebars.template(function(b,a,e,c,d){e=e||b.helpers;var f,g=this.escapeExpression,h=e.helperMissing;b='<td class="text-center"><input type="checkbox" id="';(f=e.id)?c=f.call(a,{hash:{}}):(c=a.id,c="function"===typeof c?c():c);b+=g(c)+'" name="';(f=e.id)?c=f.call(a,{hash:{}}):(c=a.id,c="function"===typeof c?c():c);b+=g(c)+'" ';c=a.selected;if((c=e["if"].call(a,c,{hash:{},inverse:this.noop,
fn:this.program(1,function(a,c){return'checked="checked"'},d)}))||0===c)b+=c;b+='/></td>\n<td><a href="#businesses/';(f=e.businessId)?c=f.call(a,{hash:{}}):(c=a.businessId,c="function"===typeof c?c():c);b+=g(c)+"/contacts/";(f=e.id)?c=f.call(a,{hash:{}}):(c=a.id,c="function"===typeof c?c():c);b+=g(c)+'">';(f=e.name)?c=f.call(a,{hash:{}}):(c=a.name,c="function"===typeof c?c():c);b+=g(c)+'</a></td>\n<td><a href="#businesses/';(f=e.businessId)?c=f.call(a,{hash:{}}):(c=a.businessId,c="function"===typeof c?
c():c);b+=g(c)+"/contacts/";(f=e.id)?c=f.call(a,{hash:{}}):(c=a.id,c="function"===typeof c?c():c);b+=g(c)+'">';(f=e.firstName)?c=f.call(a,{hash:{}}):(c=a.firstName,c="function"===typeof c?c():c);b+=g(c)+'</a></td>\n<td><a href="#businesses/';(f=e.businessId)?c=f.call(a,{hash:{}}):(c=a.businessId,c="function"===typeof c?c():c);b+=g(c)+"/contacts/";(f=e.id)?c=f.call(a,{hash:{}}):(c=a.id,c="function"===typeof c?c():c);b+=g(c)+'">';(f=e.lastName)?c=f.call(a,{hash:{}}):(c=a.lastName,c="function"===typeof c?
c():c);b+=g(c)+'</a></td>\n<td class="text-right">';(f=e.phone)?c=f.call(a,{hash:{}}):(c=a.phone,c="function"===typeof c?c():c);b+=g(c)+'</td>\n<td class="text-right">';(f=e.mobile)?c=f.call(a,{hash:{}}):(c=a.mobile,c="function"===typeof c?c():c);b+=g(c)+'</td>\n<td class="text-center">\n  ';c=a.email;if((c=e["if"].call(a,c,{hash:{},inverse:this.noop,fn:this.program(3,function(a,c){var b,d;b='\n    <a href="mailto:';(d=e.email)?d=d.call(a,{hash:{}}):(d=a.email,d="function"===typeof d?d():d);b+=g(d)+
'" class="email fa fa-envelope" rel="tooltip" data-original-title="';(d=e.email)?d=d.call(a,{hash:{}}):(d=a.email,d="function"===typeof d?d():d);return b+=g(d)+'" data-placement="right"></a>\n  '},d)}))||0===c)b+=c;b+="\n</td>\n<td>\n  <b>";c=a.abbreviatedType;c=(f=e.abbreviatedTypeWithTooltip)?f.call(a,c,{hash:{}}):h.call(a,"abbreviatedTypeWithTooltip",c,{hash:{}});return b+=g(c)+"</b>\n</td>\n\n"});return this.HandlebarsTemplates["contacts/contact_row"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["contacts/edit_contact"]=Handlebars.template(function(b,a,e,c,d){function f(a,c){var b,d,f;b="\n        ";d={inputLabel:"ABN",inputName:"abn","data-valid-regex":"^\\d{0,11}?$"};d=(f=e.RegexInput)?f.call(a,{hash:d}):u.call(a,"RegexInput",{hash:d});return b+=v(d)+"\n      "}function g(a,c){var b,d,f;b="\n        ";d={inputLabel:"IRD/GST No",inputName:"ird","data-valid-regex":"^\\d{0,9}?$"};d=(f=e.RegexInput)?
f.call(a,{hash:d}):u.call(a,"RegexInput",{hash:d});return b+=v(d)+"\n      "}function h(a,c){var b;return(b=(b=e.ifBusinessSetting)?b.call(a,"businessReportable",!0,{hash:{},inverse:z.noop,fn:z.program(6,l,c)}):u.call(a,"ifBusinessSetting","businessReportable",!0,{hash:{},inverse:z.noop,fn:z.program(6,l,c)}))||0===b?b:""}function l(a,c){var b,d,f;b='\n          <label id="reportableContainer" class="checkbox inline" ';d=a.type;if((d=(f=e.ifNotContains)?f.call(a,d,"Supplier",{hash:{},inverse:z.noop,
fn:z.program(7,k,c)}):u.call(a,"ifNotContains",d,"Supplier",{hash:{},inverse:z.noop,fn:z.program(7,k,c)}))||0===d)b+=d;b+='>\n            <input type="checkbox" id="reportable" name="reportable" ';d=a.reportable;if((d=e["if"].call(a,d,{hash:{},inverse:z.noop,fn:z.program(9,m,c)}))||0===d)b+=d;return b+"/> Reportable\n          </label>\n          "}function k(a,c){return'style="display: none;"'}function m(a,c){return'checked="checked"'}function n(a,c){var b,d,f;b="\n        ";d={inputLabel:"Suburb",
inputName:"shippingAddress.suburb","data-maxlength":"50"};d=(f=e.TextInput)?f.call(a,{hash:d}):u.call(a,"TextInput",{hash:d});b+=v(d)+"\n        ";d={inputLabel:"State",inputName:"shippingAddress.state","data-maxlength":"50","data-css-class":"input-width-small"};d=(f=e.TextInput)?f.call(a,{hash:d}):u.call(a,"TextInput",{hash:d});return b+=v(d)+"\n      "}function q(a,c){var b,d,f;b="\n        ";d={inputLabel:"City/Town",inputName:"shippingAddress.suburb","data-maxlength":"50"};d=(f=e.TextInput)?f.call(a,
{hash:d}):u.call(a,"TextInput",{hash:d});b+=v(d)+"\n        ";d={inputLabel:"Region",inputName:"shippingAddress.state","data-maxlength":"50","data-css-class":"input-width-small"};d=(f=e.TextInput)?f.call(a,{hash:d}):u.call(a,"TextInput",{hash:d});return b+=v(d)+"\n      "}function p(a,c){var b,d,f;b="\n        ";d={inputLabel:"Suburb",inputName:"billingAddress.suburb","data-maxlength":"50"};d=(f=e.TextInput)?f.call(a,{hash:d}):u.call(a,"TextInput",{hash:d});b+=v(d)+"\n        ";d={inputLabel:"State",
inputName:"billingAddress.state","data-maxlength":"50","data-css-class":"input-width-small"};d=(f=e.TextInput)?f.call(a,{hash:d}):u.call(a,"TextInput",{hash:d});return b+=v(d)+"\n      "}function t(a,c){var b,d,f;b="\n        ";d={inputLabel:"City/Town",inputName:"billingAddress.suburb","data-maxlength":"50"};d=(f=e.TextInput)?f.call(a,{hash:d}):u.call(a,"TextInput",{hash:d});b+=v(d)+"\n        ";d={inputLabel:"Region",inputName:"billingAddress.state","data-maxlength":"50","data-css-class":"input-width-small"};
d=(f=e.TextInput)?f.call(a,{hash:d}):u.call(a,"TextInput",{hash:d});return b+=v(d)+"\n      "}e=e||b.helpers;b="";var r,u=e.helperMissing,v=this.escapeExpression,z=this,y=e.blockHelperMissing;c={heading:"Contact"};c=(r=e.includePartial)?r.call(a,"page_heading",{hash:c}):u.call(a,"includePartial","page_heading",{hash:c});b+=v(c)+'\n\n<div class="row">\n\n  <div class="col-xs-12">\n    <div class="col-xs-8 col-xs-offset-8">\n      <div id="businessContainer">\n        ';c=a.individual;c=(r=e.radio)?
r.call(a,"businessRadio","Business","individual",!1,c,{hash:{}}):u.call(a,"radio","businessRadio","Business","individual",!1,c,{hash:{}});b+=v(c)+'\n      </div>\n    </div>\n    <div class="col-xs-8">\n      <div id="individualContainer">\n        ';c=a.individual;c=(r=e.radio)?r.call(a,"individualRadio","Individual","individual",!0,c,{hash:{}}):u.call(a,"radio","individualRadio","Individual","individual",!0,c,{hash:{}});b+=v(c)+'\n      </div>\n    </div>\n  </div>\n\n</div>\n\n<div id="businessDetails" class="row">\n  <div class="col-xs-12">\n    <div class="form-horizontal">\n      ';
c={inputLabel:"Business name",inputName:"name","data-maxlength":"110"};c=(r=e.TextInput)?r.call(a,{hash:c}):u.call(a,"TextInput",{hash:c});b+=v(c)+"\n      ";(r=e.ifAu)?c=r.call(a,{hash:{},inverse:z.program(3,g,d),fn:z.program(1,f,d)}):(c=a.ifAu,c="function"===typeof c?c():c);e.ifAu||(c=y.call(a,c,{hash:{},inverse:z.program(3,g,d),fn:z.program(1,f,d)}));if(c||0===c)b+=c;b+="\n      ";c={inputLabel:"Website",inputName:"website","data-maxlength":"255"};c=(r=e.TextInput)?r.call(a,{hash:c}):u.call(a,
"TextInput",{hash:c});b+=v(c)+'\n    </div>\n  </div>\n\n  <div class="col-xs-12" id="contactTypeContainer">\n    <div class="form-horizontal">\n      <div class="form-group">\n        <label class="col-xs-6 control-label" for="type">Contact is</label>\n        <div class="col-xs-12">\n          <select id="type" name="type" class="form-control">\n            ';c=a.type;c=(r=e.option)?r.call(a,"Customer","Customer",c,{hash:{}}):u.call(a,"option","Customer","Customer",c,{hash:{}});b+=v(c)+"\n            ";
c=a.type;c=(r=e.option)?r.call(a,"Supplier","Supplier",c,{hash:{}}):u.call(a,"option","Supplier","Supplier",c,{hash:{}});b+=v(c)+"\n            ";c=a.type;c=(r=e.option)?r.call(a,"Customer & Supplier","Customer & Supplier",c,{hash:{}}):u.call(a,"option","Customer & Supplier","Customer & Supplier",c,{hash:{}});b+=v(c)+"\n            ";c=a.type;c=(r=e.option)?r.call(a,"Other","Other",c,{hash:{}}):u.call(a,"option","Other","Other",c,{hash:{}});b+=v(c)+'\n          </select>\n        </div>\n        <div class="col-xs-6">\n          ';
(r=e.ifAu)?c=r.call(a,{hash:{},inverse:z.noop,fn:z.program(5,h,d)}):(c=a.ifAu,c="function"===typeof c?c():c);e.ifAu||(c=y.call(a,c,{hash:{},inverse:z.noop,fn:z.program(5,h,d)}));if(c||0===c)b+=c;b+='\n        </div>\n      </div>\n      <div class="form-group">\n        <div class="col-xs-18 col-xs-offset-6">\n          <label class="checkbox inline">\n            <input type="checkbox" id="active" name="active" ';c=a.active;if((c=e["if"].call(a,c,{hash:{},inverse:z.noop,fn:z.program(11,function(a,
c){return'checked="checked"'},d)}))||0===c)b+=c;b+='/> Active\n          </label>\n        </div>\n      </div>\n    </div>\n  </div>\n\n</div>\n\n\n<div class="row">\n\n  <div id="primaryContactDetails" class="col-xs-12">\n    <div class="form-horizontal">\n      <div class="form-group">\n        <h3 class="col-xs-24">Primary contact</h3>\n      </div>\n      ';c={inputLabel:"First name",inputName:"firstName","data-maxlength":"50"};c=(r=e.TextInput)?r.call(a,{hash:c}):u.call(a,"TextInput",{hash:c});
b+=v(c)+"\n      ";c={inputLabel:"Last name",inputName:"lastName","data-maxlength":"50"};c=(r=e.TextInput)?r.call(a,{hash:c}):u.call(a,"TextInput",{hash:c});b+=v(c)+"\n      ";c={inputLabel:"Position",inputName:"position","data-maxlength":"30"};c=(r=e.TextInput)?r.call(a,{hash:c}):u.call(a,"TextInput",{hash:c});b+=v(c)+"\n      ";c={inputLabel:"Email (To)",inputName:"email","data-maxlength":"76","data-delay":"on"};c=(r=e.TextInput)?r.call(a,{hash:c}):u.call(a,"TextInput",{hash:c});b+=v(c)+"\n      ";
c={inputLabel:"Phone",inputName:"phone","data-maxlength":"19"};c=(r=e.TextInput)?r.call(a,{hash:c}):u.call(a,"TextInput",{hash:c});b+=v(c)+"\n      ";c={inputLabel:"Mobile",inputName:"mobile","data-maxlength":"12"};c=(r=e.TextInput)?r.call(a,{hash:c}):u.call(a,"TextInput",{hash:c});b+=v(c)+"\n      ";c={inputLabel:"Fax",inputName:"fax","data-maxlength":"25"};c=(r=e.TextInput)?r.call(a,{hash:c}):u.call(a,"TextInput",{hash:c});b+=v(c)+'\n    </div>\n  </div>\n\n  <div class="col-xs-12">\n    <div class="form-horizontal">\n      <div class="form-group">\n        <label class="col-xs-24" for="notes">\n          <h3>Notes</h3>\n        </label>\n      </div>\n      <div class="form-group">\n      <div class="col-xs-20 col-xs-offset-2" data-id="notes" data-widget="AutosizeTextarea" data-name="notes" data-maxlength="2000" data-autosize="false" data-rows="4"></div>\n      </div>\n    </div>\n    <div class="form-horizontal">\n      <div class="form-group additionalEmailsHeading">\n        <label class="col-xs-24">\n          <h3>Additional email addresses</h3>\n        </label>\n      </div>\n    </div>\n    <div class="form-horizontal">\n      <div class="form-group">\n        <label class="col-xs-20 col-xs-offset-2">These emails will be automatically added to the CC field when you email this contact.</label>\n      </div>\n      <div id="additionalEmails"></div>\n    </div>\n    </div>\n</div>\n\n\n<div class="row">\n\n  <div class="col-xs-12">\n    <div class="form-horizontal">\n\n      <div class="form-group">\n        <h3 class="col-xs-14" id="shippingAddressHeader">Street address</h3>\n        <div class="col-xs-10 h3-control">\n          <label for="differentBillingAddress" class="checkbox">\n            <input type="checkbox" name="differentBillingAddress" id="differentBillingAddress" ';
c=a.differentBillingAddress;if((c=e["if"].call(a,c,{hash:{},inverse:z.noop,fn:z.program(13,function(a,c){return'checked="checked"'},d)}))||0===c)b+=c;b+=">\n            Bill to different address\n          </label>\n        </div>\n      </div>\n\n      ";c={inputLabel:"Address",inputName:"shippingAddress.streetAddress1","data-maxlength":"50"};c=(r=e.TextInput)?r.call(a,{hash:c}):u.call(a,"TextInput",{hash:c});b+=v(c)+"\n      ";c={inputLabel:"",inputName:"shippingAddress.streetAddress2","data-maxlength":"50"};
c=(r=e.TextInput)?r.call(a,{hash:c}):u.call(a,"TextInput",{hash:c});b+=v(c)+"\n\n      ";(r=e.ifAu)?c=r.call(a,{hash:{},inverse:z.program(17,q,d),fn:z.program(15,n,d)}):(c=a.ifAu,c="function"===typeof c?c():c);e.ifAu||(c=y.call(a,c,{hash:{},inverse:z.program(17,q,d),fn:z.program(15,n,d)}));if(c||0===c)b+=c;b+="\n\n      ";c={inputLabel:"Post code",inputName:"shippingAddress.postCode","data-maxlength":"10","data-css-class":"input-width-small"};c=(r=e.TextInput)?r.call(a,{hash:c}):u.call(a,"TextInput",
{hash:c});b+=v(c)+"\n      ";c={inputLabel:"Country",inputName:"shippingAddress.country","data-maxlength":"50"};c=(r=e.TextInput)?r.call(a,{hash:c}):u.call(a,"TextInput",{hash:c});b+=v(c)+'\n    </div>\n  </div>\n\n\n\n  <div class="col-xs-12">\n    <div class="form-horizontal" id="billingAddress" ';c=a.differentBillingAddress;if((c=e.unless.call(a,c,{hash:{},inverse:z.noop,fn:z.program(19,function(a,c){return'style="display:none"'},d)}))||0===c)b+=c;b+='>\n      <div class="form-group">\n        <h3>Billing address</h3>\n      </div>\n\n      ';
c={inputLabel:"Address",inputName:"billingAddress.streetAddress1","data-maxlength":"50"};c=(r=e.TextInput)?r.call(a,{hash:c}):u.call(a,"TextInput",{hash:c});b+=v(c)+"\n      ";c={inputLabel:"",inputName:"billingAddress.streetAddress2","data-maxlength":"50"};c=(r=e.TextInput)?r.call(a,{hash:c}):u.call(a,"TextInput",{hash:c});b+=v(c)+"\n\n      ";(r=e.ifAu)?c=r.call(a,{hash:{},inverse:z.program(23,t,d),fn:z.program(21,p,d)}):(c=a.ifAu,c="function"===typeof c?c():c);e.ifAu||(c=y.call(a,c,{hash:{},inverse:z.program(23,
t,d),fn:z.program(21,p,d)}));if(c||0===c)b+=c;b+="\n\n      ";c={inputLabel:"Post code",inputName:"billingAddress.postCode","data-maxlength":"10","data-css-class":"input-width-small"};c=(r=e.TextInput)?r.call(a,{hash:c}):u.call(a,"TextInput",{hash:c});b+=v(c)+"\n      ";c={inputLabel:"Country",inputName:"billingAddress.country","data-maxlength":"50"};c=(r=e.TextInput)?r.call(a,{hash:c}):u.call(a,"TextInput",{hash:c});b+=v(c)+'\n    </div>\n  </div>\n\n</div>\n\n<div class="row top-buffer">\n  <div class="col-xs-24">\n    <div class="pull-right">\n      <button class="btn btn-primary action" id="save" data-loading-text="Saving...">Save</button>\n      <button class="btn btn-default action" id="new" data-loading-text="Saving...">Save &amp; add another</button>\n      ';
c=a.id;if((c=e["if"].call(a,c,{hash:{},inverse:z.noop,fn:z.program(25,function(a,c){return'\n        <button class="btn btn-default btn-delete" id="destroy" data-loading-text="Cancel...">Delete</button>\n      '},d)}))||0===c)b+=c;return b+'\n\n      <button class="btn btn-default" id="cancel">Cancel</button>\n    </div>\n  </div>\n</div>\n'});return this.HandlebarsTemplates["contacts/edit_contact"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["contacts/list_contacts"]=Handlebars.template(function(b,a,e,c,d){function f(a,c){return'\n    <button id="createButton" class="btn btn-primary">Create contact</button>\n  '}e=e||b.helpers;var g,h=e.helperMissing,l=this.escapeExpression;b='<div id="contacts">\n\n  ';c={heading:"Contacts"};if((c=(g=e.pageHeading)?g.call(a,{hash:c,inverse:this.noop,fn:this.program(1,f,d)}):h.call(a,"pageHeading",{hash:c,inverse:this.noop,
fn:this.program(1,f,d)}))||0===c)b+=c;b+='\n\n  <hr/>\n\n  <div id="listContainer">\n    <div id="toolbar" class="form-horizontal">\n    <div class="form-group">\n      <div class="col-xs-';c=a.reportable;if((c=e["if"].call(a,c,{hash:{},inverse:this.program(5,function(a,c){return"3"},d),fn:this.program(3,function(a,c){return"6"},d)}))||0===c)b+=c;b+='">\n        <button class="btn btn-default btn-sm btn-delete" id="destroyAll" data-loading-text="Cancel...">Delete</button>\n        ';c=a.reportable;
if((c=e["if"].call(a,c,{hash:{},inverse:this.noop,fn:this.program(7,function(a,c){return'\n          <button class="btn btn-default btn-sm btn-reportable" id="reportable" data-loading-text="Cancel..."\n                  title="Mark this contact as reportable">Reportable\n          </button>\n        '},d)}))||0===c)b+=c;b+='\n      </div>\n      <div class="col-xs-6">\n        <div class="input-width-large">\n          <select class="form-control" id="filter" name="filter">\n            ';c=a.filter;
c=(g=e.option)?g.call(a,"Active","Active",c,{hash:{}}):h.call(a,"option","Active","Active",c,{hash:{}});b+=l(c)+"\n            ";c=a.filter;c=(g=e.option)?g.call(a,"All contacts","*",c,{hash:{}}):h.call(a,"option","All contacts","*",c,{hash:{}});b+=l(c)+"\n            ";c=a.filter;c=(g=e.option)?g.call(a,"Customers","Customer",c,{hash:{}}):h.call(a,"option","Customers","Customer",c,{hash:{}});b+=l(c)+"\n            ";c=a.filter;c=(g=e.option)?g.call(a,"Suppliers","Supplier",c,{hash:{}}):h.call(a,
"option","Suppliers","Supplier",c,{hash:{}});b+=l(c)+"\n            ";c=a.reportable;if((c=e["if"].call(a,c,{hash:{},inverse:this.noop,fn:this.program(9,function(a,c){var b,d,f;b="\n              ";d=a.filter;d=(f=e.option)?f.call(a,"Reportable","Reportable",d,{hash:{}}):h.call(a,"option","Reportable","Reportable",d,{hash:{}});return b+=l(d)+"\n            "},d)}))||0===c)b+=c;b+="\n            ";c=a.filter;c=(g=e.option)?g.call(a,"Other","Other",c,{hash:{}}):h.call(a,"option","Other","Other",c,{hash:{}});
b+=l(c)+"\n            ";c=a.filter;c=(g=e.option)?g.call(a,"Inactive","Inactive",c,{hash:{}}):h.call(a,"option","Inactive","Inactive",c,{hash:{}});b+=l(c)+'\n          </select>\n        </div>\n      </div>\n\n      <div class="col-xs-8 ';c=a.reportable;if((c=e["if"].call(a,c,{hash:{},inverse:this.noop,fn:this.program(11,function(a,c){return"pull-right"},d)}))||0===c)b+=c;b+='">\n        <div class="form-group">\n          <label class="control-label col-xs-6" for="search">Search:</label>\n\n          <div class="col-xs-18">\n            <input class="form-control" type="text" name="search" id="search" value="">\n          </div>\n        </div>\n      </div>\n\n      ';
c=a.reportable;if((c=e["if"].call(a,c,{hash:{},inverse:this.program(15,function(a,c){return'\n      <div class="col-xs-7">\n      '},d),fn:this.program(13,function(a,c){return'\n      </div>\n      <div class="form-group">\n      <div class="col-xs-8 col-xs-push-16">\n      '},d)}))||0===c)b+=c;b+="\n\n      <div class=\"legend pull-right\">\n        <label><span class='key'>C</span>ustomer</label>\n        <label><span class='key'>S</span>upplier</label>\n        ";c=a.reportable;if((c=e["if"].call(a,
c,{hash:{},inverse:this.noop,fn:this.program(17,function(a,c){return"\n          <label><span class='key'>R</span>eportable</label>\n        "},d)}))||0===c)b+=c;return b+'\n        <label><span class=\'key\'>O</span>ther</label>\n        <label><span class=\'key\'>I</span>nactive</label>\n      </div>\n    </div>\n    </div>\n    </div>\n      <div id="table"></div>\n      <div id="pagination" class="pagination"></div>\n    </div>\n\n    <div id="deleteConfirmation"></div>\n  </div>\n</div>\n'});
return this.HandlebarsTemplates["contacts/list_contacts"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["gst/client_gst_types_header"]=Handlebars.template(function(b,a,e,c,d){return'<tr>\n  <th data-field="name" style="width:28%">Name</th>\n  <th data-field="rate" style="width:12%">Rate</th>\n  <th data-field="collectionAccountDisplayName" style="width:30%">GST collected account</th>\n  <th data-field="paidAccountDisplayName" style="width:30%">GST paid account</th>\n</tr>\n'});return this.HandlebarsTemplates["gst/client_gst_types_header"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["gst/client_gst_types_list"]=Handlebars.template(function(b,a,e,c,d){return'<div id="table"></div>\n'});return this.HandlebarsTemplates["gst/client_gst_types_list"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["gst/client_gst_types_modal"]=Handlebars.template(function(b,a,e,c,d){return'<div class="modal-dialog">\n  <div class="modal-content">\n    <div class="modal-header">\n      <button type="button" class="close close-inverse" data-dismiss="modal" aria-hidden="true">&times;</button>\n      <span id="modal-title-gst-types-dialog" class="modal-title">View tax types</span>\n    </div>\n    <div class="modal-body">\n      <div id="gstTypes"></div>\n    </div>\n  </div>\n</div>\n'});return this.HandlebarsTemplates["gst/client_gst_types_modal"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["gst/client_gst_types_row"]=Handlebars.template(function(b,a,e,c,d){e=e||b.helpers;c=this.escapeExpression;b='<td style="width:28%">';(d=e.name)?d=d.call(a,{hash:{}}):(d=a.name,d="function"===typeof d?d():d);b+=c(d)+'</td>\n<td style="width:12%">';(d=e.rate)?d=d.call(a,{hash:{}}):(d=a.rate,d="function"===typeof d?d():d);b+=c(d)+'%</td>\n<td style="width:30%">';(d=e.collectedAccountDisplayName)?d=d.call(a,
{hash:{}}):(d=a.collectedAccountDisplayName,d="function"===typeof d?d():d);b+=c(d)+'</td>\n<td style="width:30%">';(d=e.paidAccountDisplayName)?d=d.call(a,{hash:{}}):(d=a.paidAccountDisplayName,d="function"===typeof d?d():d);return b+=c(d)+"</td>\n"});return this.HandlebarsTemplates["gst/client_gst_types_row"]}).call(this);
(function(){Handlebars.registerPartial("_gst_partial_au_settings",Handlebars.template(function(b,a,e,c,d){e=e||b.helpers;var f=e.helperMissing,g=this.escapeExpression;b="<p><strong>Reporting frequency</strong></p>\n";c=a.reportingPeriod;c=(d=e.radio)?d.call(a,"monthly","Monthly","reportingPeriod","MONTHLY",c,{hash:{}}):f.call(a,"radio","monthly","Monthly","reportingPeriod","MONTHLY",c,{hash:{}});b+=g(c)+"\n";c=a.reportingPeriod;c=(d=e.radio)?d.call(a,"quarterly","Quarterly","reportingPeriod","QUARTERLY",
c,{hash:{}}):f.call(a,"radio","quarterly","Quarterly","reportingPeriod","QUARTERLY",c,{hash:{}});b+=g(c)+"\n";c=a.reportingPeriod;c=(d=e.radio)?d.call(a,"annually","Annually","reportingPeriod","ANNUALLY",c,{hash:{}}):f.call(a,"radio","annually","Annually","reportingPeriod","ANNUALLY",c,{hash:{}});b+=g(c)+'\n\n<div id="monthlyDueDateInfo" class="hidden">\n  <p><strong>BAS lodgement due dates</strong></p>\n  <p>BAS statements are due on the 21st of each month.</p>\n</div>\n\n<div id="quarterlyDueDateInfo" class="hidden">\n  <p><strong>BAS lodgement due dates</strong></p>\n\n  <div class="col-xs-14">\n    <div class="form-horizontal">\n\n      <div class="form-group">\n        <span class="col-xs-6 control-label gstOption">GST option</span>\n        <div class="col-xs-18">\n          <select name="gstAdjustmentOutputAccountId" class="form-control">\n            ';
c=a.gstAdjustmentOutputAccountId;c=(d=e.option)?d.call(a,"Calculate GST and report quarterly",1,c,{hash:{}}):f.call(a,"option","Calculate GST and report quarterly",1,c,{hash:{}});b+=g(c)+"\n            ";c=a.gstAdjustmentOutputAccountId;c=(d=e.option)?d.call(a,"Calculate GST quarterly and report annually",2,c,{hash:{}}):f.call(a,"option","Calculate GST quarterly and report annually",2,c,{hash:{}});b+=g(c)+"\n            ";c=a.gstAdjustmentOutputAccountId;c=(d=e.option)?d.call(a,"Pay GST instalment amount quarterly",
3,c,{hash:{}}):f.call(a,"option","Pay GST instalment amount quarterly",3,c,{hash:{}});b+=g(c)+'\n          </select>\n        </div>\n      </div>\n\n      <div id="basLodgementMethod" class="form-group">\n        <span class="col-xs-6 control-label">BAS lodgement</span>\n        <div class="col-xs-18">\n          <select name="gstAdjustmentInputAccountId" class="form-control">\n            ';c=a.gstAdjustmentInputAccountId;c=(d=e.option)?d.call(a,"Lodge by Paper",1,c,{hash:{}}):f.call(a,"option",
"Lodge by Paper",1,c,{hash:{}});b+=g(c)+"\n            ";c=a.gstAdjustmentInputAccountId;c=(d=e.option)?d.call(a,"Lodge by business portal or ECI",2,c,{hash:{}}):f.call(a,"option","Lodge by business portal or ECI",2,c,{hash:{}});b+=g(c)+"\n            ";c=a.gstAdjustmentInputAccountId;c=(d=e.option)?d.call(a,"Tax practitioner lodges a paper copy or via ECI",3,c,{hash:{}}):f.call(a,"option","Tax practitioner lodges a paper copy or via ECI",3,c,{hash:{}});b+=g(c)+"\n            ";c=a.gstAdjustmentInputAccountId;
c=(d=e.option)?d.call(a,"Tax practitioner lodges electronically",4,c,{hash:{}}):f.call(a,"option","Tax practitioner lodges electronically",4,c,{hash:{}});return b+=g(c)+'\n          </select>\n        </div>\n      </div>\n    </div>\n\n    <p>Your business activity statements are due on the following dates:</p>\n    <table class="table" id="lodgeByPaperDueDate" class="hidden">\n      <tbody>\n      <tr>\n        <td>Quarter 1 (July - Aug - Sep): 28 October</td>\n      </tr>\n      <tr>\n        <td>Quarter 2 (Oct - Nov - Dec): 28 February</td>\n      </tr>\n      <tr>\n        <td>Quarter 3 (Jan - Feb - Mar): 28 April</td>\n      </tr>\n      <tr>\n        <td>Quarter 4 (Apr - May - June): 28 July</td>\n      </tr>\n      </tbody>\n    </table>\n    <table class="table" id="lodgeByECIDueDate" class="hidden">\n      <tbody>\n      <tr>\n        <td>Quarter 1 (July - Aug - Sep): 11 November</td>\n      </tr>\n      <tr>\n        <td>Quarter 2 (Oct - Nov - Dec): 28 February</td>\n      </tr>\n      <tr>\n        <td>Quarter 3 (Jan - Feb - Mar): 12 May</td>\n      </tr>\n      <tr>\n        <td>Quarter 4 (Apr - May - June): 11 August</td>\n      </tr>\n      </tbody>\n    </table>\n    <table class="table" id="lodgeElectronicallyDueDate" class="hidden">\n      <tbody>\n      <tr>\n        <td>Quarter 1 (July - Aug - Sep): 25 November</td>\n      </tr>\n      <tr>\n        <td>Quarter 2 (Oct - Nov - Dec): 28 February</td>\n      </tr>\n      <tr>\n        <td>Quarter 3 (Jan - Feb - Mar): 26 May</td>\n      </tr>\n      <tr>\n        <td>Quarter 4 (Apr - May - June): 25 August</td>\n      </tr>\n      </tbody>\n    </table>\n\n  </div>\n</div>\n\n<div id="annuallyDueDateInfo" class="hidden">\n  <p><strong>GST annual return lodgement due date</strong></p>\n\n  <div class="col-xs-14">\n    <div class="form-horizontal">\n\n      <div class="form-group">\n        <span class="col-xs-11 control-label">Your annual GST Return due on</span>\n        <div class="col-xs-8">\n          <div class="form-control-wrapper" data-widget="DatePicker" data-name="gstAdjustmentInputAccountId" data-id="gstAdjustmentInputAccountId"></div>\n        </div>\n      </div>\n    </div>\n  </div>\n\n</div>\n'}))}).call(this);
(function(){Handlebars.registerPartial("_gst_partial_nz_settings",Handlebars.template(function(b,a,e,c,d){e=e||b.helpers;var f=e.helperMissing,g=this.escapeExpression;b="<div>\n  <p><strong>Reporting frequency</strong></p>\n  ";c=a.reportingPeriod;c=(d=e.radio)?d.call(a,"monthly","One month","reportingPeriod","MONTHLY",c,{hash:{}}):f.call(a,"radio","monthly","One month","reportingPeriod","MONTHLY",c,{hash:{}});b+=g(c)+"\n  ";c=a.reportingPeriod;c=(d=e.radio)?d.call(a,"two_monthly","Two months","reportingPeriod",
"TWO_MONTHLY",c,{hash:{}}):f.call(a,"radio","two_monthly","Two months","reportingPeriod","TWO_MONTHLY",c,{hash:{}});b+=g(c)+"\n  ";c=a.reportingPeriod;c=(d=e.radio)?d.call(a,"annually","Six months","reportingPeriod","HALF_YEARLY",c,{hash:{}}):f.call(a,"radio","annually","Six months","reportingPeriod","HALF_YEARLY",c,{hash:{}});b+=g(c)+'\n</div>\n<div>\n  <p><strong>Accounts for GST adjustment</strong></p>\n  <p id="gstOutputTaxAdjustment">\n    <strong>Output Tax Adjustments:</strong> ';c=a.gstOutputTaxAdjustment;
c=null==c||!1===c?c:c.number;c="function"===typeof c?c():c;b+=g(c)+" ";c=a.gstOutputTaxAdjustment;c=null==c||!1===c?c:c.name;c="function"===typeof c?c():c;b+=g(c)+'(GST Return - Sales and Income - Box 9)\n  </p>\n  <p id="gstInputTaxAdjustment">\n    <strong>Input Tax Adjustments:</strong> ';c=a.gstInputTaxAdjustment;c=null==c||!1===c?c:c.number;c="function"===typeof c?c():c;b+=g(c)+" ";c=a.gstInputTaxAdjustment;c=null==c||!1===c?c:c.name;c="function"===typeof c?c():c;return b+=g(c)+" (GST Return - Purchases and Expenses - Box 13)\n  </p>\n</div>\n"}))}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["gst/settings"]=Handlebars.template(function(b,a,e,c,d){function f(a,b){var d,f;d="\n    ";if((f=k.invokePartial(c._gst_partial_au_settings,"_gst_partial_au_settings",a,e,c))||0===f)d+=f;return d+"\n  "}function g(a,b){var d,f;d="\n    ";if((f=k.invokePartial(c._gst_partial_nz_settings,"_gst_partial_nz_settings",a,e,c))||0===f)d+=f;return d+"\n  "}e=e||b.helpers;c=c||b.partials;var h,l,k=this,m=e.helperMissing,
n=this.escapeExpression,q=e.blockHelperMissing;b='<div class="row">\n  <div class="col-xs-24">\n    <div id="onboarding-navigation-container" class="banner banner-blue"></div>\n  </div>\n</div>\n\n';h={headingSuffix:"GST settings"};h=(l=e.includePartial)?l.call(a,"page_heading",{hash:h}):m.call(a,"includePartial","page_heading",{hash:h});b+=n(h)+'\n\n<div class="gstSettings">\n  <p><a href="" id="viewGstTypesLink">View tax types</a></p>\n\n  <p><strong>Are you registered for GST?</strong></p>\n  ';
h=a.registeredForGst;h=(l=e.radio)?l.call(a,"registeredYes","Yes","registeredForGst",!0,h,{hash:{}}):m.call(a,"radio","registeredYes","Yes","registeredForGst",!0,h,{hash:{}});b+=n(h)+"\n  ";h=a.registeredForGst;h=(l=e.radio)?l.call(a,"registeredNo","No","registeredForGst",!1,h,{hash:{}}):m.call(a,"radio","registeredNo","No","registeredForGst",!1,h,{hash:{}});b+=n(h)+"\n\n  <p><strong>Accounting basis</strong></p>\n  ";h=a.gstBasis;h=(l=e.radio)?l.call(a,"cash","Cash","gstBasis","CASH",h,{hash:{}}):
m.call(a,"radio","cash","Cash","gstBasis","CASH",h,{hash:{}});b+=n(h)+'\n    <span id="cash-only-text" class="text-muted small margin-left-10" style="display: none"><span class="icons-default-color myob-icon-error-14"></span> This mode cannot be changed for your current product type.</span>\n  ';h=a.gstBasis;h=(l=e.radio)?l.call(a,"accruals","Accruals","gstBasis","ACCRUALS",h,{hash:{}}):m.call(a,"radio","accruals","Accruals","gstBasis","ACCRUALS",h,{hash:{}});b+=n(h)+"\n\n  ";(l=e.ifAu)?h=l.call(a,
{hash:{},inverse:k.program(3,g,d),fn:k.program(1,f,d)}):(h=a.ifAu,h="function"===typeof h?h():h);e.ifAu||(h=q.call(a,h,{hash:{},inverse:k.program(3,g,d),fn:k.program(1,f,d)}));if(h||0===h)b+=h;return b+'\n</div>\n\n<div class="row">\n  <div class="col-xs-22">\n    <div class="pull-right">\n      <button id="gstSettingsSaveButton" class="btn btn-primary action">Save</button>\n    </div>\n  </div>\n</div>\n'});return this.HandlebarsTemplates["gst/settings"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["header/business_footer"]=Handlebars.template(function(b,a,e,c,d){function f(a,c){return"navbar-header"}function g(a,c){return"navbar-header payroll-brand-footer"}function h(a,c){return"\n            MYOB Essentials and the MYOB Essentials logo are trademarks of MYOB Technology Pty Ltd\n          "}function l(a,c){return"\n            MYOB Essentials, MYOB Essentials Payroll and related logos are trademarks of MYOB Technology Pty Ltd\n          "}
e=e||b.helpers;var k;c=e.blockHelperMissing;var m=e.helperMissing,n=this.escapeExpression;b='  <nav id="footer-myob" class="navbar-myob navbar-myob-footer" role="navigation">\n    <div class="container">\n      <div class="';(k=e.unlessPayrollStandalone)?k=k.call(a,{hash:{},inverse:this.program(3,g,d),fn:this.program(1,f,d)}):(k=a.unlessPayrollStandalone,k="function"===typeof k?k():k);e.unlessPayrollStandalone||(k=c.call(a,k,{hash:{},inverse:this.program(3,g,d),fn:this.program(1,f,d)}));if(k||0===
k)b+=k;b+='">\n        <div class="navbar-brand">\n          <img src="frontend/logo-new.svg" alt="MYOB" width="80" height="33">\n        </div>\n      </div>\n      <div class="collapse navbar-collapse">\n        <ul class="nav navbar-nav navbar-right">\n          <li><a href="';k=(k=e.configProperty)?k.call(a,"privacyUrl",{hash:{}}):m.call(a,"configProperty","privacyUrl",{hash:{}});b+=n(k)+'" target="_blank">Privacy policy</a></li>\n          <li><a href="';k=(k=e.configProperty)?k.call(a,"aboutUsUrl",
{hash:{}}):m.call(a,"configProperty","aboutUsUrl",{hash:{}});b+=n(k)+'" target="_blank">About us</a></li>\n          <li><a href="';k=(k=e.configProperty)?k.call(a,"supportUrl",{hash:{}}):m.call(a,"configProperty","supportUrl",{hash:{}});b+=n(k)+'" target="_blank">Support</a></li>\n        </ul>\n      </div>\n    </div>\n  </nav>\n  <div class="footer-myob">\n    <div class="container footer-myob-container">\n      <div class="row">\n        <div class="col-xs-6">\n          \u00a9 ';(k=e.currentYear)?
k=k.call(a,{hash:{}}):(k=a.currentYear,k="function"===typeof k?k():k);b+=n(k)+' MYOB Technology Pty Ltd.\n        </div>\n        <div class="col-xs-18 footer-myob-copyright">\n          ';(k=e.unlessPayrollStandalone)?k=k.call(a,{hash:{},inverse:this.program(7,l,d),fn:this.program(5,h,d)}):(k=a.unlessPayrollStandalone,k="function"===typeof k?k():k);e.unlessPayrollStandalone||(k=c.call(a,k,{hash:{},inverse:this.program(7,l,d),fn:this.program(5,h,d)}));if(k||0===k)b+=k;return b+"\n        </div>\n      </div>\n    </div>\n  </div>\n"});
return this.HandlebarsTemplates["header/business_footer"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["header/business_header"]=Handlebars.template(function(b,a,e,c,d){function f(a,c){var b,d,f;b='\n            <li class="top-menu"><a href="';d=a.businessId;d=(f=e.appUrl)?f.call(a,d,"/home",{hash:{}}):m.call(a,"appUrl",d,"/home",{hash:{}});return b+=n(d)+'">Dashboard</a></li>\n          '}function g(a,b){var d,f;d="\n            ";if((f=q.invokePartial(c._header_partial_invoice_header,"_header_partial_invoice_header",
a,e,c))||0===f)d+=f;d+="\n            ";if((f=q.invokePartial(c._header_partial_bills_header,"_header_partial_bills_header",a,e,c))||0===f)d+=f;d+="\n            ";if((f=q.invokePartial(c._header_partial_banking_header,"_header_partial_banking_header",a,e,c))||0===f)d+=f;d+="\n            ";if((f=q.invokePartial(c._header_partial_contacts_header,"_header_partial_contacts_header",a,e,c))||0===f)d+=f;d+="\n            ";if((f=q.invokePartial(c._header_partial_payroll_header,"_header_partial_payroll_header",
a,e,c))||0===f)d+=f;return d+"\n          "}function h(a,b){var d,f;d="\n            ";if((f=q.invokePartial(c._header_partial_suspended_header,"_header_partial_suspended_header",a,e,c))||0===f)d+=f;return d+"\n          "}e=e||b.helpers;c=c||b.partials;var l,k,m=e.helperMissing,n=this.escapeExpression,q=this;b='  <nav id="menu-nav" class="navbar navbar-myob navbar-myob-header" role="navigation">\n    <div class="container">\n      <div class="navbar-header">\n        <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">\n          <span class="sr-only">Toggle navigation</span>\n          <span class="icon-bar"></span>\n          <span class="icon-bar"></span>\n          <span class="icon-bar"></span>\n        </button>\n        <a class="navbar-brand" href="';
l=a.businessId;l=(k=e.appUrl)?k.call(a,l,"/home",{hash:{}}):m.call(a,"appUrl",l,"/home",{hash:{}});b+=n(l)+'">\n          <img src="frontend/logo-new.svg" alt="MYOB" width="73" height="30">\n        </a>\n      </div>\n      <div id="navbar" class="navbar-collapse collapse">\n        <ul class="nav navbar-nav">\n          ';if((l=(k=e.ifBusinessHasOneOfEntitlements)?k.call(a,"INVOICES","PURCHASES",{hash:{},inverse:q.noop,fn:q.program(1,f,d)}):m.call(a,"ifBusinessHasOneOfEntitlements","INVOICES","PURCHASES",
{hash:{},inverse:q.noop,fn:q.program(1,f,d)}))||0===l)b+=l;b+="\n\n          ";if((l=(k=e.unlessBusinessSetting)?k.call(a,"accountStatus","SUSPENDED",{hash:{},inverse:q.program(5,h,d),fn:q.program(3,g,d)}):m.call(a,"unlessBusinessSetting","accountStatus","SUSPENDED",{hash:{},inverse:q.program(5,h,d),fn:q.program(3,g,d)}))||0===l)b+=l;b+="\n\n          ";if((l=q.invokePartial(c._header_partial_reports_header,"_header_partial_reports_header",a,e,c))||0===l)b+=l;b+="\n        </ul>\n        ";if((l=
q.invokePartial(c._header_partial_settings,"_header_partial_settings",a,e,c))||0===l)b+=l;return b+"\n      </div>\x3c!--/.nav-collapse --\x3e\n    </div>\n  </nav>\n"});return this.HandlebarsTemplates["header/business_header"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["header/business_header_upgrade"]=Handlebars.template(function(b,a,e,c,d){return'<ul class="nav navbar-nav navbar-right">\n\t<li id="businessHeaderUpgradeContainer" class="hide">\n\t  <a id=\'businessHeaderUpgradeLink\' class="clickable"></a>\n\t  <div id="businessHeaderUpgradeText" class="hide"></div>\n\t</li>\n</ul>\n'});return this.HandlebarsTemplates["header/business_header_upgrade"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["header/businesses_header"]=Handlebars.template(function(b,a,e,c,d){return'<header class="navbar navbar-myob navbar-myob-header" role="navigation">\n  <div class="container">\n    <div class="navbar-header">\n      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar-collapse-1">\n        <span class="sr-only">Toggle navigation</span>\n        <span class="icon-bar"></span>\n        <span class="icon-bar"></span>\n        <span class="icon-bar"></span>\n      </button>\n      <a class="navbar-brand">\n        <img src="frontend/logo-new.svg" alt="MYOB" width="73" height="30">\n      </a>\n    </div>\n\n    <div class="collapse navbar-collapse" id="navbar-collapse-1">\n      <ul class="nav navbar-nav navbar-right">\n        <li class="dropdown">\n          <a href="#" id="logoutLink">\n            Logout <i class="myob-icon-sign-out-v2 icons-small margin-left-05"></i>\n          </a>\n        </li>\n      </ul>\n    </div>\n  </div>\n</header>\n'});
return this.HandlebarsTemplates["header/businesses_header"]}).call(this);
(function(){Handlebars.registerPartial("_header_partial_banking_header",Handlebars.template(function(b,a,e,c,d){function f(a,c){var b,d;b='\n  <li class="top-menu">\n      <a class="dropdown-toggle clickable" data-toggle="dropdown">Banking\n        <i class="myob-icon-down-chevron-v2"></i>\n      </a>\n    <ul class="dropdown-menu">\n      <li><a href="';d=(d=e.businessUrl)?d.call(a,"/banking/transactions",{hash:{}}):g.call(a,"businessUrl","/banking/transactions",{hash:{}});b+=h(d)+'">Bank transactions</a></li>\n      <li><a href="';
d=(d=e.businessUrl)?d.call(a,"/banking/reconciliation",{hash:{}}):g.call(a,"businessUrl","/banking/reconciliation",{hash:{}});b+=h(d)+'">Bank reconciliation</a></li>\n      <li><a href="';d=(d=e.businessUrl)?d.call(a,"/banking/manageRules/",{hash:{}}):g.call(a,"businessUrl","/banking/manageRules/",{hash:{}});b+=h(d)+'">Manage rules</a></li>\n      <li class="divider"></li>\n      <li><a href="';d=(d=e.businessUrl)?d.call(a,"/banking/spendMoney",{hash:{}}):g.call(a,"businessUrl","/banking/spendMoney",
{hash:{}});b+=h(d)+'">Spend money</a></li>\n      <li><a href="';d=(d=e.businessUrl)?d.call(a,"/banking/depositMoney",{hash:{}}):g.call(a,"businessUrl","/banking/depositMoney",{hash:{}});b+=h(d)+'">Receive money</a></li>\n      <li><a href="';d=(d=e.businessUrl)?d.call(a,"/banking/transferFunds",{hash:{}}):g.call(a,"businessUrl","/banking/transferFunds",{hash:{}});b+=h(d)+'">Transfer funds</a></li>\n      <li><a href="';d=(d=e.businessUrl)?d.call(a,"/banking/transactionHistory",{hash:{}}):g.call(a,
"businessUrl","/banking/transactionHistory",{hash:{}});return b+=h(d)+'">Transaction history</a></li>\n    </ul>\n  </li>\n'}e=e||b.helpers;b="";var g=e.helperMissing,h=this.escapeExpression;if((a=(c=e.ifBusinessHasEntitlement)?c.call(a,"BANKING",{hash:{},inverse:this.noop,fn:this.program(1,f,d)}):g.call(a,"ifBusinessHasEntitlement","BANKING",{hash:{},inverse:this.noop,fn:this.program(1,f,d)}))||0===a)b+=a;return b+"\n"}))}).call(this);
(function(){Handlebars.registerPartial("_header_partial_bills_header",Handlebars.template(function(b,a,e,c,d){function f(a,c){var b,d;b='\n  <li class="top-menu">\n      <a class="dropdown-toggle clickable" data-toggle="dropdown">Purchases\n        <i class="myob-icon-down-chevron-v2"></i>\n      </a>\n    <ul class="dropdown-menu">\n      <li><a href="';d=(d=e.businessUrl)?d.call(a,"/bills",{hash:{}}):g.call(a,"businessUrl","/bills",{hash:{}});b+=h(d)+'">Bills</a></li>\n      <li><a href="';d=(d=
e.businessUrl)?d.call(a,"/bills/items",{hash:{}}):g.call(a,"businessUrl","/bills/items",{hash:{}});b+=h(d)+'">Items</a></li>\n      <li class="divider"></li>\n      <li><a href="';d=(d=e.businessUrl)?d.call(a,"/bills/new",{hash:{}}):g.call(a,"businessUrl","/bills/new",{hash:{}});b+=h(d)+'">Create bill</a></li>\n      <li><a href="';d=(d=e.businessUrl)?d.call(a,"/bills/payment/new",{hash:{}}):g.call(a,"businessUrl","/bills/payment/new",{hash:{}});b+=h(d)+'">Pay bills</a></li>\n      <li><a href="';
d=(d=e.businessUrl)?d.call(a,"/bills/return/new",{hash:{}}):g.call(a,"businessUrl","/bills/return/new",{hash:{}});b+=h(d)+'">Create supplier return</a></li>\n      <li><a href="';d=(d=e.businessUrl)?d.call(a,"/bills/processReturn",{hash:{}}):g.call(a,"businessUrl","/bills/processReturn",{hash:{}});b+=h(d)+'">Process supplier returns</a></li>\n      <li class="divider"></li>\n      <li><a href="';d=(d=e.businessUrl)?d.call(a,"/bills/history",{hash:{}}):g.call(a,"businessUrl","/bills/history",{hash:{}});
return b+=h(d)+'">Purchase history</a></li>\n    </ul>\n  </li>\n'}e=e||b.helpers;b="";var g=e.helperMissing,h=this.escapeExpression;if((a=(c=e.ifBusinessHasEntitlement)?c.call(a,"PURCHASES",{hash:{},inverse:this.noop,fn:this.program(1,f,d)}):g.call(a,"ifBusinessHasEntitlement","PURCHASES",{hash:{},inverse:this.noop,fn:this.program(1,f,d)}))||0===a)b+=a;return b+"\n"}))}).call(this);
(function(){Handlebars.registerPartial("_header_partial_contacts_header",Handlebars.template(function(b,a,e,c,d){function f(a,c){var b,d;b='\n  <li class="top-menu">\n    <a class="dropdown-toggle clickable" data-toggle="dropdown">Contacts\n      <i class="myob-icon-down-chevron-v2"></i>\n    </a>\n    <ul class="dropdown-menu">\n      <li><a href="';d=(d=e.businessUrl)?d.call(a,"/contacts",{hash:{}}):g.call(a,"businessUrl","/contacts",{hash:{}});b+=h(d)+'">View contacts</a></li>\n      <li><a href="';
d=(d=e.businessUrl)?d.call(a,"/contacts/new",{hash:{}}):g.call(a,"businessUrl","/contacts/new",{hash:{}});return b+=h(d)+'">Create contact</a></li>\n    </ul>\n  </li>\n'}e=e||b.helpers;b="";var g=e.helperMissing,h=this.escapeExpression;if((a=(c=e.ifBusinessHasOneOfEntitlements)?c.call(a,"INVOICES","BANKING","PURCHASES",{hash:{},inverse:this.noop,fn:this.program(1,f,d)}):g.call(a,"ifBusinessHasOneOfEntitlements","INVOICES","BANKING","PURCHASES",{hash:{},inverse:this.noop,fn:this.program(1,f,d)}))||
0===a)b+=a;return b+"\n"}))}).call(this);
(function(){Handlebars.registerPartial("_header_partial_help_header",Handlebars.template(function(b,a,e,c,d){function f(a,c){return'\n      <li>\n        <a href="http://help.myob.com.au/essentials/showme/showme.html" target="_blank">Videos</a>\n      </li>\n    '}function g(a,c){return'\n      <li>\n        <a href="http://help.myob.co.nz/essentials/showme/showme.html" target="_blank">Videos</a>\n      </li>\n    '}function h(a,c){return'\n      <li>\n        <a href="http://myob.com.au/essentials/support" target="_blank">Support</a>\n      </li>\n    '}function l(a,
c){return'\n      <li>\n        <a href="http://myob.co.nz/essentials/support" target="_blank">Support</a>\n      </li>\n    '}e=e||b.helpers;var k;c=this.escapeExpression;var m=e.blockHelperMissing;b='<li class="top-menu help-menu">\n  <a class="dropdown-toggle clickable" data-toggle="dropdown">\n      <i class="myob-icon-help-v2"></i>\n  </a>\n  <ul class="dropdown-menu">\n    <li>\n      <a href="http://help.myob.com/wiki/x/';(k=e.helpTopicId)?k=k.call(a,{hash:{}}):(k=a.helpTopicId,k="function"===
typeof k?k():k);b+=c(k)+'" target="_blank">Help for this page</a>\n    </li>\n    <li class="getting-started-menu-item disabled">\n      <a href="';(k=e.currentRouteUrl)?k=k.call(a,{hash:{}}):(k=a.currentRouteUrl,k="function"===typeof k?k():k);b+=c(k)+'" class="">Getting started</a>\n    </li>\n    ';(k=e.ifAu)?k=k.call(a,{hash:{},inverse:this.noop,fn:this.program(1,f,d)}):(k=a.ifAu,k="function"===typeof k?k():k);e.ifAu||(k=m.call(a,k,{hash:{},inverse:this.noop,fn:this.program(1,f,d)}));if(k||0===
k)b+=k;b+="\n    ";(k=e.ifNz)?k=k.call(a,{hash:{},inverse:this.noop,fn:this.program(3,g,d)}):(k=a.ifNz,k="function"===typeof k?k():k);e.ifNz||(k=m.call(a,k,{hash:{},inverse:this.noop,fn:this.program(3,g,d)}));if(k||0===k)b+=k;b+='\n    <li>\n      <a href="http://community.myob.com/t5/The-MYOB-Essentials-Blog/bg-p/EssentialsBlog" target="_blank">Blog</a>\n    </li>\n    ';(k=e.ifAu)?k=k.call(a,{hash:{},inverse:this.noop,fn:this.program(5,h,d)}):(k=a.ifAu,k="function"===typeof k?k():k);e.ifAu||(k=
m.call(a,k,{hash:{},inverse:this.noop,fn:this.program(5,h,d)}));if(k||0===k)b+=k;b+="\n    ";(k=e.ifNz)?k=k.call(a,{hash:{},inverse:this.noop,fn:this.program(7,l,d)}):(k=a.ifNz,k="function"===typeof k?k():k);e.ifNz||(k=m.call(a,k,{hash:{},inverse:this.noop,fn:this.program(7,l,d)}));if(k||0===k)b+=k;return b+"\n  </ul>\n</li>\n"}))}).call(this);
(function(){Handlebars.registerPartial("_header_partial_invoice_header",Handlebars.template(function(b,a,e,c,d){function f(a,c){var b,d;b='\n  <li class="top-menu">\n      <a class="dropdown-toggle clickable" data-toggle="dropdown">Sales\n        <i class="myob-icon-down-chevron-v2"></i>\n      </a>\n    <ul class="dropdown-menu">\n      <li><a href="';d=(d=e.businessUrl)?d.call(a,"/quotes",{hash:{}}):h.call(a,"businessUrl","/quotes",{hash:{}});b+=l(d)+'">Quotes</a></li>\n      <li><a href="';d=(d=
e.businessUrl)?d.call(a,"/invoices",{hash:{}}):h.call(a,"businessUrl","/invoices",{hash:{}});b+=l(d)+'">Invoices</a></li>\n      <li><a href="';d=(d=e.businessUrl)?d.call(a,"/sales/items",{hash:{}}):h.call(a,"businessUrl","/sales/items",{hash:{}});b+=l(d)+'">Items</a></li>\n\n      <li class="divider"></li>\n\n      <li><a href="';d=(d=e.businessUrl)?d.call(a,"/invoices/new",{hash:{}}):h.call(a,"businessUrl","/invoices/new",{hash:{}});b+=l(d)+'">Create invoice</a></li>\n      <li><a href="';d=(d=
e.businessUrl)?d.call(a,"/invoices/payment/new",{hash:{}}):h.call(a,"businessUrl","/invoices/payment/new",{hash:{}});b+=l(d)+'">Take payments</a></li>\n      <li><a href="';d=(d=e.businessUrl)?d.call(a,"/invoices/return/new",{hash:{}}):h.call(a,"businessUrl","/invoices/return/new",{hash:{}});b+=l(d)+'">Create customer return</a></li>\n      <li><a href="';d=(d=e.businessUrl)?d.call(a,"/invoices/processReturn",{hash:{}}):h.call(a,"businessUrl","/invoices/processReturn",{hash:{}});b+=l(d)+'">Process customer returns</a></li>\n\n      <li class="divider"></li>\n      <li><a href="';
d=(d=e.businessUrl)?d.call(a,"/invoices/history",{hash:{}}):h.call(a,"businessUrl","/invoices/history",{hash:{}});b+=l(d)+'">Sales history</a></li>\n      <li><a href="';d=(d=e.businessUrl)?d.call(a,"/invoices/statements",{hash:{}}):h.call(a,"businessUrl","/invoices/statements",{hash:{}});b+=l(d)+'">Customer statements</a></li>\n      ';if((d=(d=e.ifFeature)?d.call(a,"CUSTOMER_STATEMENTS",{hash:{},inverse:k.noop,fn:k.program(2,g,c)}):h.call(a,"ifFeature","CUSTOMER_STATEMENTS",{hash:{},inverse:k.noop,
fn:k.program(2,g,c)}))||0===d)b+=d;return b+"\n    </ul>\n  </li>\n"}function g(a,c){var b,d;b='\n        <li><a href="';d=(d=e.businessUrl)?d.call(a,"/invoices/statements-new",{hash:{}}):h.call(a,"businessUrl","/invoices/statements-new",{hash:{}});return b+=l(d)+'">Customer statements <span class="boxed label purple sml betaStyle">Beta</span></a></li>\n      '}e=e||b.helpers;b="";var h=e.helperMissing,l=this.escapeExpression,k=this;if((a=(c=e.ifBusinessHasEntitlement)?c.call(a,"INVOICES",{hash:{},
inverse:k.noop,fn:k.program(1,f,d)}):h.call(a,"ifBusinessHasEntitlement","INVOICES",{hash:{},inverse:k.noop,fn:k.program(1,f,d)}))||0===a)b+=a;return b+"\n"}))}).call(this);
(function(){Handlebars.registerPartial("_header_partial_payroll_header",Handlebars.template(function(b,a,e,c,d){function f(a,c){var b,d;b='\n  <li class="top-menu">\n      <a class="dropdown-toggle clickable" data-toggle="dropdown">Payroll\n        <i class="myob-icon-down-chevron-v2"></i>\n      </a>\n    <ul class="dropdown-menu">\n      <li><a href="';d=(d=e.businessUrl)?d.call(a,"/payroll/payCentre",{hash:{}}):m.call(a,"businessUrl","/payroll/payCentre",{hash:{}});b+=n(d)+'">Enter pay</a></li>\n      ';
(d=e.ifAu)?d=d.call(a,{hash:{},inverse:q.noop,fn:q.program(2,g,c)}):(d=a.ifAu,d="function"===typeof d?d():d);e.ifAu||(d=p.call(a,d,{hash:{},inverse:q.noop,fn:q.program(2,g,c)}));if(d||0===d)b+=d;b+='\n      <li><a href="';d=(d=e.businessUrl)?d.call(a,"/payroll/employees",{hash:{}}):m.call(a,"businessUrl","/payroll/employees",{hash:{}});b+=n(d)+'">Employees</a></li>\n      ';(d=e.ifNz)?d=d.call(a,{hash:{},inverse:q.noop,fn:q.program(4,h,c)}):(d=a.ifNz,d="function"===typeof d?d():d);e.ifNz||(d=p.call(a,
d,{hash:{},inverse:q.noop,fn:q.program(4,h,c)}));if(d||0===d)b+=d;b+='\n      <li><a href="';d=(d=e.businessUrl)?d.call(a,"/payroll/pastPayRuns",{hash:{}}):m.call(a,"businessUrl","/payroll/pastPayRuns",{hash:{}});b+=n(d)+'">Past pay runs</a></li>\n      <li><a href="';d=(d=e.businessUrl)?d.call(a,"/payroll/payrollReport",{hash:{}}):m.call(a,"businessUrl","/payroll/payrollReport",{hash:{}});b+=n(d)+'">Payroll summaries</a></li>\n      ';(d=e.ifAu)?d=d.call(a,{hash:{},inverse:q.noop,fn:q.program(6,
l,c)}):(d=a.ifAu,d="function"===typeof d?d():d);e.ifAu||(d=p.call(a,d,{hash:{},inverse:q.noop,fn:q.program(6,l,c)}));if(d||0===d)b+=d;b+="\n      ";if((d=(d=e.ifBusinessHasEntitlement)?d.call(a,"BANKING",{hash:{},inverse:q.noop,fn:q.program(8,k,c)}):m.call(a,"ifBusinessHasEntitlement","BANKING",{hash:{},inverse:q.noop,fn:q.program(8,k,c)}))||0===d)b+=d;return b+"\n    </ul>\n  </li>\n"}function g(a,c){var b,d;b='\n        <li><a href="';d=(d=e.businessUrl)?d.call(a,"/payroll/paySuper",{hash:{}}):
m.call(a,"businessUrl","/payroll/paySuper",{hash:{}});return b+=n(d)+'">Pay superannuation</a></li>\n      '}function h(a,c){var b,d;b='\n        <li><a href="';d=(d=e.businessUrl)?d.call(a,"/payroll/IRDMonthlyReturns",{hash:{}}):m.call(a,"businessUrl","/payroll/IRDMonthlyReturns",{hash:{}});return b+=n(d)+'">IRD monthly returns</a></li>\n      '}function l(a,c){var b,d;b='\n        <li><a href="';d=(d=e.businessUrl)?d.call(a,"/paymentSummaryCentre",{hash:{}}):m.call(a,"businessUrl","/paymentSummaryCentre",
{hash:{}});return b+=n(d)+'">PAYG payment summaries</a></li>\n      '}function k(a,c){var b,d;b='\n        <li><a href="';d=(d=e.businessUrl)?d.call(a,"/settings/payrollSettings",{hash:{}}):m.call(a,"businessUrl","/settings/payrollSettings",{hash:{}});return b+=n(d)+'">Payroll settings</a></li>\n      '}e=e||b.helpers;b="";var m=e.helperMissing,n=this.escapeExpression,q=this,p=e.blockHelperMissing;if((a=(c=e.ifBusinessHasEntitlement)?c.call(a,"PAYROLL",{hash:{},inverse:q.noop,fn:q.program(1,f,d)}):
m.call(a,"ifBusinessHasEntitlement","PAYROLL",{hash:{},inverse:q.noop,fn:q.program(1,f,d)}))||0===a)b+=a;return b+"\n"}))}).call(this);
(function(){Handlebars.registerPartial("_header_partial_reports_header",Handlebars.template(function(b,a,e,c,d){function f(a,c){var b,d;b='\n  <li class="top-menu reports-menu">\n      <a class="dropdown-toggle clickable" data-toggle="dropdown">Reports\n        <i class="myob-icon-down-chevron-v2"></i>\n      </a>\n    <ul class="dropdown-menu">\n      <li><a href="';d=(d=e.businessUrl)?d.call(a,"/reports",{hash:{}}):p.call(a,"businessUrl","/reports",{hash:{}});b+=t(d)+'">All reports</a></li>\n      <li class="divider"></li>\n      ';
if((d=(d=e.unlessBusinessSetting)?d.call(a,"accountStatus","SUSPENDED",{hash:{},inverse:r.noop,fn:r.program(2,g,c)}):p.call(a,"unlessBusinessSetting","accountStatus","SUSPENDED",{hash:{},inverse:r.noop,fn:r.program(2,g,c)}))||0===d)b+=d;b+="\n      ";if((d=(d=e.ifFeature)?d.call(a,"NEW_PL_REPORT",{hash:{},inverse:r.program(9,m,c),fn:r.program(7,k,c)}):p.call(a,"ifFeature","NEW_PL_REPORT",{hash:{},inverse:r.program(9,m,c),fn:r.program(7,k,c)}))||0===d)b+=d;b+='\n      <li><a href="';d=(d=e.businessUrl)?
d.call(a,"/reports/compBalanceSheet",{hash:{}}):p.call(a,"businessUrl","/reports/compBalanceSheet",{hash:{}});return b+=t(d)+'">Balance Sheet</a></li>\n    </ul>\n  </li>\n'}function g(a,c){var b,d;b="\n        ";if((d=(d=e.ifFeature)?d.call(a,"NEW_PL_REPORT",{hash:{},inverse:r.program(5,l,c),fn:r.program(3,h,c)}):p.call(a,"ifFeature","NEW_PL_REPORT",{hash:{},inverse:r.program(5,l,c),fn:r.program(3,h,c)}))||0===d)b+=d;return b+"\n      "}function h(a,c){var b,d;b='\n          <li><a href="';d=(d=
e.businessUrl)?d.call(a,"/reports/budgets",{hash:{}}):p.call(a,"businessUrl","/reports/budgets",{hash:{}});return b+=t(d)+'">Budget management</a></li>\n        '}function l(a,c){var b,d;b='\n          <li><a href="';d=(d=e.businessUrl)?d.call(a,"/reports/budgets",{hash:{}}):p.call(a,"businessUrl","/reports/budgets",{hash:{}});return b+=t(d)+'">Budgets <span class="boxed label purple sml betaStyle">Beta</span></a></li>\n        '}function k(a,c){var b,d;b='\n        <li><a href="';d=(d=e.businessUrl)?
d.call(a,"/reports/compProfitLoss",{hash:{}}):p.call(a,"businessUrl","/reports/compProfitLoss",{hash:{}});return b+=t(d)+'">Profit & Loss</a></li>\n      '}function m(a,c){var b,d;b='\n        <li><a href="';d=(d=e.businessUrl)?d.call(a,"/reports/profitLoss",{hash:{}}):p.call(a,"businessUrl","/reports/profitLoss",{hash:{}});b+=t(d)+'">Profit & Loss</a></li>\n        ';if((d=(d=e.unlessBusinessSetting)?d.call(a,"accountStatus","SUSPENDED",{hash:{},inverse:r.noop,fn:r.program(10,n,c)}):p.call(a,"unlessBusinessSetting",
"accountStatus","SUSPENDED",{hash:{},inverse:r.noop,fn:r.program(10,n,c)}))||0===d)b+=d;return b+"\n      "}function n(a,c){var b,d;b='\n            <li><a href="';d=(d=e.businessUrl)?d.call(a,"/reports/compProfitLoss",{hash:{}}):p.call(a,"businessUrl","/reports/compProfitLoss",{hash:{}});return b+=t(d)+'">Profit & Loss <span class="boxed label purple sml betaStyle">Beta</span></a></li>\n        '}function q(a,c){var b,d;b='\n  <li class="top-menu"><a href="';d=(d=e.businessUrl)?d.call(a,"/reports",
{hash:{}}):p.call(a,"businessUrl","/reports",{hash:{}});return b+=t(d)+'">Reports</a></li>\n'}e=e||b.helpers;b="";var p=e.helperMissing,t=this.escapeExpression,r=this;if((a=(c=e.ifBusinessHasEntitlement)?c.call(a,"BANKING",{hash:{},inverse:r.program(12,q,d),fn:r.program(1,f,d)}):p.call(a,"ifBusinessHasEntitlement","BANKING",{hash:{},inverse:r.program(12,q,d),fn:r.program(1,f,d)}))||0===a)b+=a;return b+"\n"}))}).call(this);
(function(){Handlebars.registerPartial("_header_partial_settings",Handlebars.template(function(b,a,e,c,d){function f(a,c){var b,d;b='\n        <a href="';(d=e.partnerDashboardUrl)?d=d.call(a,{hash:{}}):(d=a.partnerDashboardUrl,d="function"===typeof d?d():d);return b+=D(d)+'">\n            My clients\n        </a>\n      '}function g(a,c){var b,d;b='\n        <a href="';d=(d=e.contextUrl)?d.call(a,"/app.htm#myBusinesses",{hash:{}}):F.call(a,"contextUrl","/app.htm#myBusinesses",{hash:{}});return b+=
D(d)+'">\n            My businesses\n        </a>\n      '}function h(a,c){var b,d;b='\n                <div class="heading"><h4>Settings</h4></div>\n                <ul class="settings-links">\n                  <li><a href="';d=(d=e.businessUrl)?d.call(a,"/settings/advisor",{hash:{}}):F.call(a,"businessUrl","/settings/advisor",{hash:{}});b+=D(d)+'">Invite advisor</a></li>\n\n                  <li><a href="';d=(d=e.businessUrl)?d.call(a,"/settings/businessDetails",{hash:{}}):F.call(a,"businessUrl",
"/settings/businessDetails",{hash:{}});b+=D(d)+'">Business details</a></li>\n                  <li><a href="';d=(d=e.businessUrl)?d.call(a,"/settings/users",{hash:{}}):F.call(a,"businessUrl","/settings/users",{hash:{}});b+=D(d)+'">Users</a></li>\n\n                  ';if((d=(d=e.ifBusinessHasOneOfEntitlements)?d.call(a,"INVOICES","PAYROLL","PURCHASES",{hash:{},inverse:w.noop,fn:w.program(6,l,c)}):F.call(a,"ifBusinessHasOneOfEntitlements","INVOICES","PAYROLL","PURCHASES",{hash:{},inverse:w.noop,fn:w.program(6,
l,c)}))||0===d)b+=d;b+="\n\n                  ";if((d=(d=e.ifBusinessHasEntitlement)?d.call(a,"BANKING",{hash:{},inverse:w.noop,fn:w.program(8,k,c)}):F.call(a,"ifBusinessHasEntitlement","BANKING",{hash:{},inverse:w.noop,fn:w.program(8,k,c)}))||0===d)b+=d;b+="\n\n                  ";if((d=(d=e.ifBusinessHasEntitlement)?d.call(a,"INVOICES",{hash:{},inverse:w.noop,fn:w.program(10,m,c)}):F.call(a,"ifBusinessHasEntitlement","INVOICES",{hash:{},inverse:w.noop,fn:w.program(10,m,c)}))||0===d)b+=d;b+="\n\n                  ";
if((d=(d=e.ifBusinessHasEntitlement)?d.call(a,"PAYROLL",{hash:{},inverse:w.noop,fn:w.program(12,n,c)}):F.call(a,"ifBusinessHasEntitlement","PAYROLL",{hash:{},inverse:w.noop,fn:w.program(12,n,c)}))||0===d)b+=d;b+="\n\n                  ";if((d=(d=e.ifBusinessHasEntitlement)?d.call(a,"BANKING",{hash:{},inverse:w.noop,fn:w.program(14,q,c)}):F.call(a,"ifBusinessHasEntitlement","BANKING",{hash:{},inverse:w.noop,fn:w.program(14,q,c)}))||0===d)b+=d;return b+"\n\n                </ul>\n              "}function l(a,
c){var b,d;b='\n                    <li><a href="';d=(d=e.businessUrl)?d.call(a,"/settings/logo",{hash:{}}):F.call(a,"businessUrl","/settings/logo",{hash:{}});return b+=D(d)+'">Logo</a></li>\n                  '}function k(a,c){var b,d;b='\n                    <li><a href="';d=(d=e.businessUrl)?d.call(a,"/settings/gstSettings",{hash:{}}):F.call(a,"businessUrl","/settings/gstSettings",{hash:{}});return b+=D(d)+'">GST settings</a></li>\n                  '}function m(a,c){var b,d;b='\n                    <li><a href="';
d=(d=e.businessUrl)?d.call(a,"/settings/invoiceSettings",{hash:{}}):F.call(a,"businessUrl","/settings/invoiceSettings",{hash:{}});return b+=D(d)+'">Invoice and quote settings</a></li>\n                  '}function n(a,c){var b,d;b='\n                    <li><a href="';d=(d=e.businessUrl)?d.call(a,"/settings/payrollSettings",{hash:{}}):F.call(a,"businessUrl","/settings/payrollSettings",{hash:{}});return b+=D(d)+'">Payroll settings</a></li>\n                  '}function q(a,c){var b,d;b='\n                    <li><a href="';
d=(d=e.businessUrl)?d.call(a,"/settings/importExport",{hash:{}}):F.call(a,"businessUrl","/settings/importExport",{hash:{}});b+=D(d)+'">Import/export data</a></li>\n                    <li><a href="';d=(d=e.businessUrl)?d.call(a,"/settings/bankFeeds",{hash:{}}):F.call(a,"businessUrl","/settings/bankFeeds",{hash:{}});return b+=D(d)+'">Manage bank feeds</a></li>\n                  '}function p(a,c){var b,d;b='\n                  <li><a href="';d=(d=e.businessUrl)?d.call(a,"/settings/subscription",{hash:{}}):
F.call(a,"businessUrl","/settings/subscription",{hash:{}});return b+=D(d)+'">Update payment details</a></li>\n                '}function t(a,c){var b,d;b="\n                ";if((d=(d=e.unlessBusinessSetting)?d.call(a,"accountStatus","SUSPENDED",{hash:{},inverse:w.noop,fn:w.program(19,r,c)}):F.call(a,"unlessBusinessSetting","accountStatus","SUSPENDED",{hash:{},inverse:w.noop,fn:w.program(19,r,c)}))||0===d)b+=d;return b+"\n              "}function r(a,c){var b,d;b='\n                  <div class="heading top-buffer-nav-spacer"><h4>Accounts</h4></div>\n                  <ul class="accounts-links">\n                    ';
(d=e.ifCOAEntitlementAndPreference)?d=d.call(a,{hash:{},inverse:w.program(22,v,c),fn:w.program(20,u,c)}):(d=a.ifCOAEntitlementAndPreference,d="function"===typeof d?d():d);e.ifCOAEntitlementAndPreference||(d=A.call(a,d,{hash:{},inverse:w.program(22,v,c),fn:w.program(20,u,c)}));if(d||0===d)b+=d;b+='\n                    <li><a href="';d=(d=e.businessUrl)?d.call(a,"/settings/generalJournals",{hash:{}}):F.call(a,"businessUrl","/settings/generalJournals",{hash:{}});return b+=D(d)+'">General journals</a></li>\n                  </ul>\n                '}
function u(a,c){var b,d;b='\n                      <li><a href="';d=(d=e.businessUrl)?d.call(a,"/settings/newCoa",{hash:{}}):F.call(a,"businessUrl","/settings/newCoa",{hash:{}});return b+=D(d)+'">Accounts list</a></li>\n                    '}function v(a,c){var b,d;b='\n                      <li><a href="';d=(d=e.businessUrl)?d.call(a,"/settings/accounts",{hash:{}}):F.call(a,"businessUrl","/settings/accounts",{hash:{}});return b+=D(d)+'">Accounts list</a></li>\n                    '}function z(a,
c){var b,d;b='\n                <span class="serial-number">Serial No: ';d=(d=e.businessSetting)?d.call(a,"businessSerialNumber",{hash:{}}):F.call(a,"businessSetting","businessSerialNumber",{hash:{}});return b+=D(d)+"</span>\n              "}e=e||b.helpers;c=c||b.partials;var y,D=this.escapeExpression,F=e.helperMissing,w=this,A=e.blockHelperMissing;b='<div class="collapse navbar-collapse" id="navbar-collapse-1">\n  <ul class="nav navbar-nav navbar-right">\n    <li id="my-liveaccounts">\n      ';if((y=
(y=e.ifBusinessSetting)?y.call(a,"viewedByProfessionalPartner",!0,{hash:{},inverse:w.program(3,g,d),fn:w.program(1,f,d)}):F.call(a,"ifBusinessSetting","viewedByProfessionalPartner",!0,{hash:{},inverse:w.program(3,g,d),fn:w.program(1,f,d)}))||0===y)b+=y;b+='\n    </li>\n    <li id="my-business" class="dropdown">\n      <a class="dropdown-toggle clickable" data-toggle="dropdown" href="javascript:void(0);">\n          <div class="my-business-name pull-left"><span class="ie9-fa-hack-for-ellipsis">&nbsp;</span> ';
y=(y=e.businessSetting)?y.call(a,"businessName",{hash:{}}):F.call(a,"businessSetting","businessName",{hash:{}});b+=D(y)+'</div>&nbsp;<i class="myob-icon-down-chevron-v2 icons-small"></i>\n      </a>\n      <div class="dropdown-menu dropdown-multi-wrapper">\n        <div class="dropdown-multi-body">\n          <div class="row">\n            <div class="col-xs-12">\n              ';if((y=(y=e.unlessBusinessSetting)?y.call(a,"accountStatus","SUSPENDED",{hash:{},inverse:w.noop,fn:w.program(5,h,d)}):F.call(a,
"unlessBusinessSetting","accountStatus","SUSPENDED",{hash:{},inverse:w.noop,fn:w.program(5,h,d)}))||0===y)b+=y;b+='\n            </div>\n\n            <div class="col-xs-12">\n              <div class="heading"><h4>Your subscription</h4></div>\n              <ul class="subscription-links">\n                <li><a href="';y=(y=e.businessUrl)?y.call(a,"/settings/subscription",{hash:{}}):F.call(a,"businessUrl","/settings/subscription",{hash:{}});b+=D(y)+'">Subscription details</a></li>\n                ';
if((y=(y=e.ifBusinessSetting)?y.call(a,"canUpdatePayment",!0,{hash:{},inverse:w.noop,fn:w.program(16,p,d)}):F.call(a,"ifBusinessSetting","canUpdatePayment",!0,{hash:{},inverse:w.noop,fn:w.program(16,p,d)}))||0===y)b+=y;b+="\n              </ul>\n\n              ";if((y=(y=e.ifBusinessHasEntitlement)?y.call(a,"BANKING",{hash:{},inverse:w.noop,fn:w.program(18,t,d)}):F.call(a,"ifBusinessHasEntitlement","BANKING",{hash:{},inverse:w.noop,fn:w.program(18,t,d)}))||0===y)b+=y;b+='\n            </div>\n\n          </div>\n        </div>\x3c!--/.dropdown-multi-body --\x3e\n\n        <div class="dropdown-multi-footer top-buffer">\n          <div class="row">\n            <div class="col-xs-18">\n              ';
if((y=(y=e.unlessBusinessSetting)?y.call(a,"businessSerialNumber","",{hash:{},inverse:w.noop,fn:w.program(24,z,d)}):F.call(a,"unlessBusinessSetting","businessSerialNumber","",{hash:{},inverse:w.noop,fn:w.program(24,z,d)}))||0===y)b+=y;b+='\n            </div>\n            <div class="col-xs-6 text-right">\n              <a href="#" id="logoutLink">Logout\n                <i class="myob-icon-sign-out-v2 icons-small margin-left-05"></i>\n              </a>\n            </div>\n          </div>\n        </div>\n      </div>\n    </li>\n    ';
if((y=w.invokePartial(c._header_partial_help_header,"_header_partial_help_header",a,e,c))||0===y)b+=y;return b+'\n  </ul>\n  <div id="headerUpgrade">\n  </div>\n</div>\n'}))}).call(this);
(function(){Handlebars.registerPartial("_header_partial_suspended_header",Handlebars.template(function(b,a,e,c,d){function f(a,c){return"\n"}function g(a,c){var b,d;b="\n  ";if((d=(d=e.ifBusinessHasEntitlement)?d.call(a,"PAYROLL",{hash:{},inverse:m.noop,fn:m.program(4,h,c)}):l.call(a,"ifBusinessHasEntitlement","PAYROLL",{hash:{},inverse:m.noop,fn:m.program(4,h,c)}))||0===d)b+=d;return b+"\n"}function h(a,c){var b,d;b='\n    <li class="top-menu">\n      <a class="dropdown-toggle clickable" data-toggle="dropdown"><i class="fa fa-list"></i> Payroll <b class="caret"></b></a>\n      <ul class="dropdown-menu">\n        <li><a href="';
d=(d=e.businessUrl)?d.call(a,"/payroll/IRDMonthlyReturns",{hash:{}}):l.call(a,"businessUrl","/payroll/IRDMonthlyReturns",{hash:{}});b+=k(d)+'">IRD monthly returns</a></li>\n        <li><a href="';d=(d=e.businessUrl)?d.call(a,"/payroll/pastPayRuns",{hash:{}}):l.call(a,"businessUrl","/payroll/pastPayRuns",{hash:{}});b+=k(d)+'">Past pay runs</a></li>\n        <li><a href="';d=(d=e.businessUrl)?d.call(a,"/payroll/payrollReport",{hash:{}}):l.call(a,"businessUrl","/payroll/payrollReport",{hash:{}});return b+=
k(d)+'">Payroll summaries</a></li>\n      </ul>\n    </li>\n  '}e=e||b.helpers;b="";var l=e.helperMissing,k=this.escapeExpression,m=this;if((a=(c=e.ifBusinessHasOneOfEntitlements)?c.call(a,"INVOICES","PURCHASES","BANKING",{hash:{},inverse:m.program(3,g,d),fn:m.program(1,f,d)}):l.call(a,"ifBusinessHasOneOfEntitlements","INVOICES","PURCHASES","BANKING",{hash:{},inverse:m.program(3,g,d),fn:m.program(1,f,d)}))||0===a)b+=a;return b+"\n"}))}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["home/dashboard"]=Handlebars.template(function(b,a,e,c,d){return'<div id="dashboard-sme">\n  <div id="alerts-row" class="row">\n    <div id="subscribe-alert-container" class="col-xs-24">\n    </div>\n    <div id="update-payment-details-alert-container" class="col-xs-24">\n    </div>\n    <div id="applicationMessages" class="col-xs-24">\n    </div>\n  </div>\n\n  <div id="noticeboard-row" class="row">\n    <div id="noticeboard-container" class="col-xs-24"></div>\n  </div>\n  <div id="getting-started-row" class="row">\n    <div id="getting-started-container" class="col-xs-24"></div>\n  </div>\n  <div id="stats-container"></div>\n  <div id="graphs-container" class="top-buffer"></div>\n</div>\n'});
return this.HandlebarsTemplates["home/dashboard"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["home/duplicate_sn_warning_modal"]=Handlebars.template(function(b,a,e,c,d){return'<div class="modal-dialog contact-customer-service-warning-modal" id="duplicate-sn-warning-modal">\n    <div class="modal-content">\n        <div class="modal-header">\n            <button type="button" class="close" data-dismiss="modal" aria-hidden="true" tabindex="2">&times;</button>\n            <span class="modal-title">Here\'s the first step</span>\n        </div>\n        <div class="modal-body">\n            <p>\n                Before you can setup online payments, we just need to check a few things with the business owner.\n                Please call us and we\'ll get you started.\n                (If anyone asks, it\'s Code 42)\n            </p>\n\n            <div class="contact">\n              <img class="phone" src="frontend/phone.svg" />\n              <span class="phone-number">1300 555 123</span>\n            </div>\n\n            <hr class="button-separator" />\n            <div class="row">\n                <div class="col-xs-23">\n                    <div class="pull-right">\n                        <div>\n                            <a tabindex="1" role="button" id="okButton" class="btn btn-primary action">Ok</a>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n'});return this.HandlebarsTemplates["home/duplicate_sn_warning_modal"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["home/email_confirmation"]=Handlebars.template(function(b,a,e,c,d){e=e||b.helpers;var f=this.escapeExpression;b='<div class="modal-dialog">\n  <div class="modal-content">\n    <div class="modal-header">\n      <button type="button" class="close close-inverse" data-dismiss="modal" aria-hidden="true">&times;</button>\n      <span class="modal-title" id="modal-title-email-confirmation-dialog">We just wanted to check...</span>\n    </div>\n    <div class="modal-body">\n      <p>We noticed that you&rsquo;ve given us a few different email addresses. Which is the best email address to contact you at?</p>\n\n      <p>We&rsquo;ll update your MYOB Essentials business email to match the one you choose. Any invoices and payslips you email from\n        MYOB Essentials will also use this address.</p>\n\n      <form>\n        <div class="row">\n          ';
c=a.emails;if((c=e.each.call(a,c,{hash:{},inverse:this.noop,fn:this.program(1,function(a,c){var b,d;b='\n            <div class="col-xs-24">\n              <div class="form-group">\n                <label class="radio"><input type="radio" name="emailOption" value="';(d=e.email)?d=d.call(a,{hash:{}}):(d=a.email,d="function"===typeof d?d():d);b+=f(d)+'"> ';(d=e.email)?d=d.call(a,{hash:{}}):(d=a.email,d="function"===typeof d?d():d);return b+=f(d)+"</label>\n              </div>\n            </div>\n          "},
d)}))||0===c)b+=c;return b+'\n        </div>\n        <div class="row form-inline">\n          <div class="col-xs-24">\n            <div class="form-group">\n              <label class="radio">\n                <input type="radio" name="emailOption" value="other" id="otherEmailRadio">\n              </label>\n            </div>\n            <div class="form-group">\n              <input type="text" name="email" id="otherEmailInput" placeholder="another address" maxlength="255" class="form-control"/>\n            </div>\n          </div>\n        </div>\n        <div class="row top-buffer">\n          <div class="col-xs-24">\n            <div class="pull-right">\n              <button id="saveButton" type="button" class="btn btn-primary action">Save</button>\n            </div>\n          </div>\n        </div>\n      </form>\n    </div>\n  </div>\n</div>\n'});
return this.HandlebarsTemplates["home/email_confirmation"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["home/getting_started"]=Handlebars.template(function(b,a,e,c,d){function f(a,c){var b,d,f;b="\n            ";d={};d.businessId=a.buisinessId;d.taskName="openingBalances";d.urlType="appUrl";d.urlPath="/settings/newCoa/bulkEditAccounts";d.text="Enter opening balances for all your accounts";d=(f=e.includePartial)?f.call(a,"home_getting_started_task",{hash:d}):l.call(a,"includePartial","home_getting_started_task",
{hash:d});return b+=k(d)+"\n        "}function g(a,c){var b,d,f;b="\n            ";d={};d.businessId=a.buisinessId;d.taskName="openingBalances";d.urlType="appUrl";d.urlPath="/settings/openingBalances";d.text="Enter opening balances for all your accounts";d=(f=e.includePartial)?f.call(a,"home_getting_started_task",{hash:d}):l.call(a,"includePartial","home_getting_started_task",{hash:d});return b+=k(d)+"\n        "}e=e||b.helpers;var h,l=e.helperMissing,k=this.escapeExpression;b='<div class="row getting-started panel panel-gray">\n  <div class="col-xs-12">\n    <h3 class="panel-heading getting-started-status"></h3>\n\n    <div class="panel-body getting-started-content">\n      <div class="getting-started-completion-bar">\n        <div class="progress">\n          <div class="bar"></div>\n        </div>\n      </div>\n      <p class="task-heading">Get the most out of MYOB Essentials by completing your profile, you still need to...</p>\n    </div>\n\n  </div>\n  <div class="col-xs-12">\n    <div class="panel-body getting-started-content">\n      <ul>\n        ';
c={};h=a.buisinessId;c.businessId=h;c.taskName="personalInformation";c.urlType="appUrl";c.urlPath="/settings/users";c.text="Update your personal information";c=(h=e.includePartial)?h.call(a,"home_getting_started_task",{hash:c}):l.call(a,"includePartial","home_getting_started_task",{hash:c});b+=k(c)+"\n\n        ";c={};h=a.buisinessId;c.businessId=h;c.taskName="businessInformation";c.urlType="appUrl";c.urlPath="/settings/businessDetails";c.text="Update your business information";c=(h=e.includePartial)?
h.call(a,"home_getting_started_task",{hash:c}):l.call(a,"includePartial","home_getting_started_task",{hash:c});b+=k(c)+"\n\n        ";c={};h=a.buisinessId;c.businessId=h;c.taskName="gstSettings";c.urlType="appUrl";c.urlPath="/settings/gstSettings";c.text="Update GST settings";c=(h=e.includePartial)?h.call(a,"home_getting_started_task",{hash:c}):l.call(a,"includePartial","home_getting_started_task",{hash:c});b+=k(c)+"\n\n        ";if((c=(h=e.ifFeature)?h.call(a,"COA_SERVICE",{hash:{},inverse:this.program(3,
g,d),fn:this.program(1,f,d)}):l.call(a,"ifFeature","COA_SERVICE",{hash:{},inverse:this.program(3,g,d),fn:this.program(1,f,d)}))||0===c)b+=c;b+="\n\n        ";c={};h=a.buisinessId;c.businessId=h;c.taskName="updateTemplate";c.urlType="appUrl";c.urlPath="/settings/invoiceSettings";c.text="Update your invoice and quote settings";c=(h=e.includePartial)?h.call(a,"home_getting_started_task",{hash:c}):l.call(a,"includePartial","home_getting_started_task",{hash:c});return b+=k(c)+"\n      </ul>\n    </div>\n  </div>\n</div>\n"});
return this.HandlebarsTemplates["home/getting_started"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["home/getting_started_new"]=Handlebars.template(function(b,a,e,c,d){function f(a,c){var b,d,f;b='\n          <a href="';d=a.businessId;d=(f=e.appUrl)?f.call(a,d,"/settings/newCoa?show-onboarding=true",{hash:{}}):l.call(a,"appUrl",d,"/settings/newCoa?show-onboarding=true",{hash:{}});return b+=k(d)+'">\n        '}function g(a,c){var b,d,f;b='\n          <a href="';d=a.businessId;d=(f=e.appUrl)?f.call(a,d,"/settings/accounts?show-onboarding=true",
{hash:{}}):l.call(a,"appUrl",d,"/settings/accounts?show-onboarding=true",{hash:{}});return b+=k(d)+'">\n        '}e=e||b.helpers;var h,l=e.helperMissing,k=this.escapeExpression;b='<div class="getting-started-new row">\n  <div class="col-xs-21">\n    <h2 class="panel-heading getting-started-status">Set up your client\u2019s new MYOB account</h2>\n  </div>\n  <div class="col-xs-3">\n      <button type="button" class="close">\n          <span class="myob-icon-close"></span>\n      </button>\n  </div>\n\n  <div class="col-xs-24">\n    <div class=" panel-body getting-started-content">\n      <div class="col-xs-6">\n        ';
if((c=(h=e.ifFeature)?h.call(a,"COA_SERVICE",{hash:{},inverse:this.program(3,g,d),fn:this.program(1,f,d)}):l.call(a,"ifFeature","COA_SERVICE",{hash:{},inverse:this.program(3,g,d),fn:this.program(1,f,d)}))||0===c)b+=c;b+='\n          <div class="hover-effect"><img src="frontend/svg/coa.svg"/></div>\n          <div class="step-heading">\n            <h3>Add account list</h3>\n          </div>\n          <div class="step-banner step-banner-left-corner coa ';c=a.accountsSetupFinished;if((c=e["if"].call(a,
c,{hash:{},inverse:this.noop,fn:this.program(5,function(a,c){return"tick"},d)}))||0===c)b+=c;b+='">\n            ';c=a.accountsSetupFinished;if((c=e["if"].call(a,c,{hash:{},inverse:this.program(9,function(a,c){return'<div class="step">1</div>'},d),fn:this.program(7,function(a,c){return'<div class="step myob-icon-tick"></div>'},d)}))||0===c)b+=c;b+='\n          </div>\n        </a>\n      </div>\n      <div class="col-xs-6">\n        <div class="hover-effect"><img src="frontend/svg/settings.svg"/></div>\n        <div class="step-heading">\n          <div class="dropdown">\n            <h3>\n            <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="true">Fill out the settings<i class="fa fa-chevron-down"></i></a>\n            <ul class="dropdown-menu">\n              <li><a href="';
c=a.businessId;c=(h=e.appUrl)?h.call(a,c,"/settings/businessDetails?show-onboarding=true",{hash:{}}):l.call(a,"appUrl",c,"/settings/businessDetails?show-onboarding=true",{hash:{}});b+=k(c)+'"><i class="fa fa-cog"></i><span class="dropdown-menu-item-text">Fill in business details</span></a></li>\n              <li><a href="';c=a.businessId;c=(h=e.appUrl)?h.call(a,c,"/settings/gstSettings?show-onboarding=true",{hash:{}}):l.call(a,"appUrl",c,"/settings/gstSettings?show-onboarding=true",{hash:{}});b+=
k(c)+'"><i class="fa fa-cog"></i><span class="dropdown-menu-item-text">Complete GST settings</span></a></li>\n            </ul>\n            </h3>\n          </div>\n        </div>\n        <div class="step-banner settings ';c=a.businessDetailsSetupFinished;if((c=e["if"].call(a,c,{hash:{},inverse:this.noop,fn:this.program(11,function(a,c){return"tick"},d)}))||0===c)b+=c;b+='">\n          ';c=a.businessDetailsSetupFinished;if((c=e["if"].call(a,c,{hash:{},inverse:this.program(15,function(a,c){return'<div class="step">2</div>'},
d),fn:this.program(13,function(a,c){return'<div class="step myob-icon-tick"></div>'},d)}))||0===c)b+=c;b+='\n        </div>\n      </div>\n      <div class="col-xs-6">\n        <a href="';c=a.businessId;c=(h=e.appUrl)?h.call(a,c,"/settings/bankFeeds?show-onboarding=true",{hash:{}}):l.call(a,"appUrl",c,"/settings/bankFeeds?show-onboarding=true",{hash:{}});b+=k(c)+'">\n          <div class="hover-effect"><img src="frontend/svg/bank.svg"/></div>\n          <div class="step-heading">\n            <h3>Set up bank feeds</h3>\n          </div>\n          <div class="step-banner bank-feeds ';
c=a.bankFeedsSetupFinished;if((c=e["if"].call(a,c,{hash:{},inverse:this.noop,fn:this.program(17,function(a,c){return"tick"},d)}))||0===c)b+=c;b+='">\n            ';c=a.bankFeedsSetupFinished;if((c=e["if"].call(a,c,{hash:{},inverse:this.program(21,function(a,c){return'<div class="step">3</div>'},d),fn:this.program(19,function(a,c){return'<div class="step myob-icon-tick"></div>'},d)}))||0===c)b+=c;b+='\n          </div>\n        </a>\n      </div>\n      <div class="col-xs-6">\n        <a href="';c=
a.businessId;c=(h=e.appUrl)?h.call(a,c,"/settings/users?show-onboarding=true",{hash:{}}):l.call(a,"appUrl",c,"/settings/users?show-onboarding=true",{hash:{}});b+=k(c)+'">\n          <div class="hover-effect"><img src="frontend/svg/inviteusers.svg"/></div>\n          <div class="step-heading">\n            <h3>Invite your clients</h3>\n          </div>\n          <div class="step-banner step-banner-right-corner invite-users ';c=a.userInvitationFinished;if((c=e["if"].call(a,c,{hash:{},inverse:this.noop,
fn:this.program(23,function(a,c){return"tick"},d)}))||0===c)b+=c;b+='">\n            ';c=a.userInvitationFinished;if((c=e["if"].call(a,c,{hash:{},inverse:this.program(27,function(a,c){return'<div class="step">4</div>'},d),fn:this.program(25,function(a,c){return'<div class="step myob-icon-tick"></div>'},d)}))||0===c)b+=c;return b+"\n          </div>\n        </a>\n      </div>\n    </div>\n\n  </div>\n</div>\n"});return this.HandlebarsTemplates["home/getting_started_new"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["home/getting_started_task"]=Handlebars.template(function(b,a,e,c,d){function f(a,c){var b,d,f;b='\n  <li class="task-container">\n    ';d=a.urlType;if((d=(f=e.ifEqual)?f.call(a,d,"contextUrl",{hash:{},inverse:q.noop,fn:q.program(2,g,c)}):n.call(a,"ifEqual",d,"contextUrl",{hash:{},inverse:q.noop,fn:q.program(2,g,c)}))||0===d)b+=d;b+="\n    ";d=a.urlType;if((d=(f=e.ifEqual)?f.call(a,d,"appUrl",{hash:{},inverse:q.noop,
fn:q.program(4,h,c)}):n.call(a,"ifEqual",d,"appUrl",{hash:{},inverse:q.noop,fn:q.program(4,h,c)}))||0===d)b+=d;b+="\n    ";d=a.urlType;if((d=(f=e.ifEqual)?f.call(a,d,"webUrl",{hash:{},inverse:q.noop,fn:q.program(6,l,c)}):n.call(a,"ifEqual",d,"webUrl",{hash:{},inverse:q.noop,fn:q.program(6,l,c)}))||0===d)b+=d;b+='\n\n    <button type="button" class="close ';(f=e.taskName)?d=f.call(a,{hash:{}}):(d=a.taskName,d="function"===typeof d?d():d);b+=m(d)+'" data-dismiss="alert" aria-hidden="true" data-taskname="';
(f=e.taskName)?d=f.call(a,{hash:{}}):(d=a.taskName,d="function"===typeof d?d():d);return b+=m(d)+'">\n      <i class="fa fa-times-circle"></i>\n    </button>\n  </li>\n'}function g(a,c){var b,d,f;b='\n      <a class="task ';(f=e.taskName)?d=f.call(a,{hash:{}}):(d=a.taskName,d="function"===typeof d?d():d);b+=m(d)+'" data-taskname="';(f=e.taskName)?d=f.call(a,{hash:{}}):(d=a.taskName,d="function"===typeof d?d():d);b+=m(d)+'" href="';d=a.urlPath;d=(f=e.contextUrl)?f.call(a,d,{hash:{}}):n.call(a,"contextUrl",
d,{hash:{}});b+=m(d)+'">';(f=e.text)?d=f.call(a,{hash:{}}):(d=a.text,d="function"===typeof d?d():d);return b+=m(d)+"</a>\n    "}function h(a,c){var b,d,f,g;b='\n      <a class="task ';(g=e.taskName)?d=g.call(a,{hash:{}}):(d=a.taskName,d="function"===typeof d?d():d);b+=m(d)+'" data-taskname="';(g=e.taskName)?d=g.call(a,{hash:{}}):(d=a.taskName,d="function"===typeof d?d():d);b+=m(d)+'" href="';d=a.urlPath;f=a.businessId;d=(g=e.appUrl)?g.call(a,f,d,{hash:{}}):n.call(a,"appUrl",f,d,{hash:{}});b+=m(d)+
'">';(g=e.text)?d=g.call(a,{hash:{}}):(d=a.text,d="function"===typeof d?d():d);return b+=m(d)+"</a>\n    "}function l(a,c){var b,d,f,g;b='\n      <a class="task ';(g=e.taskName)?d=g.call(a,{hash:{}}):(d=a.taskName,d="function"===typeof d?d():d);b+=m(d)+'" data-taskname="';(g=e.taskName)?d=g.call(a,{hash:{}}):(d=a.taskName,d="function"===typeof d?d():d);b+=m(d)+'" href="';d=a.urlPath;f=a.businessId;d=(g=e.webUrl)?g.call(a,f,d,{hash:{}}):n.call(a,"webUrl",f,d,{hash:{}});b+=m(d)+'">';(g=e.text)?d=g.call(a,
{hash:{}}):(d=a.text,d="function"===typeof d?d():d);return b+=m(d)+"</a>\n    "}e=e||b.helpers;b="";var k,m=this.escapeExpression,n=e.helperMissing,q=this;c=a.taskName;if((c=(k=e.ifBusinessPreferenceAsBoolean)?k.call(a,"task",c,!1,{hash:{},inverse:q.noop,fn:q.program(1,f,d)}):n.call(a,"ifBusinessPreferenceAsBoolean","task",c,!1,{hash:{},inverse:q.noop,fn:q.program(1,f,d)}))||0===c)b+=c;return b+"\n"});return this.HandlebarsTemplates["home/getting_started_task"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["home/graphs"]=Handlebars.template(function(b,a,e,c,d){e=e||b.helpers;c=this.escapeExpression;b='<div class="row">\n  <div class="col-xs-12">\n    <h3 class="underline">Invoices owed to me</h3>\n    <div id="aged-debtor-container"></div>\n  </div>\n  <div class="col-xs-12">\n    <h3 class="underline">Sales target for ';(e=e.month)?a=e.call(a,{hash:{}}):(a=a.month,a="function"===typeof a?a():a);return b+=c(a)+
'</h3>\n    <div id="sales-target-container"></div>\n  </div>\n</div>\n'});return this.HandlebarsTemplates["home/graphs"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["home/graphs/aged_debtor_graph"]=Handlebars.template(function(b,a,e,c,d){function f(a,c){return'\n      <div class="graphs-loading"></div>\n    '}function g(a,c){return'\n      <div class="graphs-none">\n        Everyone\u2019s paid you. What\u2019s your secret?\n      </div>\n      <div class="graphs-container">\n        <div class="aged-debtor-graph"></div>\n      </div>\n    '}e=e||b.helpers;var h=e.helperMissing;
b='<div class="graphs-wrapper">\n  <div class="row">\n    ';c=a.due;if((c=(e=e.ifBlank)?e.call(a,c,{hash:{},inverse:this.program(3,g,d),fn:this.program(1,f,d)}):h.call(a,"ifBlank",c,{hash:{},inverse:this.program(3,g,d),fn:this.program(1,f,d)}))||0===c)b+=c;return b+"\n  </div>\n</div>\n"});return this.HandlebarsTemplates["home/graphs/aged_debtor_graph"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["home/graphs/sales_target_graph"]=Handlebars.template(function(b,a,e,c,d){function f(a,c){return'\n      <div class="graphs-loading"></div>\n    '}function g(a,c){var b,d,f;b='\n      <div class="graphs-container">\n        <div class="sales-target-graph">\n          <div class="title">Invoices I\u2019ve issued</div>\n          <div class="description">\n            <div id="showSalesTargetContainer">\n              <span>\n                ';
d=a.total;d=null==d||!1===d?d:d.value;d=(f=e.moneyValueFormatToSixDigits)?f.call(a,d,{hash:{}}):l.call(a,"moneyValueFormatToSixDigits",d,{hash:{}});b+=k(d)+" of ";d=a.target;d=(f=e.moneyValueFormatToSixDigits)?f.call(a,d,{hash:{}}):l.call(a,"moneyValueFormatToSixDigits",d,{hash:{}});b+=k(d)+'\n              </span>\n              <a id="editSalesTarget"></a>\n            </div>\n            <div id="saveSalesTargetContainer">\n              <span>\n                ';d=a.total;d=null==d||!1===d?d:
d.value;d=(f=e.moneyValueFormatToSixDigits)?f.call(a,d,{hash:{}}):l.call(a,"moneyValueFormatToSixDigits",d,{hash:{}});return b+=k(d)+' of\n              </span>\n              <span id="salesTarget" data-widget="RegexInput" data-css-class="input-sm input-width-mini" data-valid-regex="^\\d{0,}$" data-name="target"></span>\n              <a id="saveSalesTarget"></a>\n            </div>\n          </div>\n          <div class="progress">\n            <div class="bar"></div>\n          </div>\n\n        </div>\n      </div>\n    '}
e=e||b.helpers;var h,l=e.helperMissing,k=this.escapeExpression;b='<div class="graphs-wrapper">\n  <div class="row">\n    ';c=a.count;if((c=(h=e.ifBlank)?h.call(a,c,{hash:{},inverse:this.program(3,g,d),fn:this.program(1,f,d)}):l.call(a,"ifBlank",c,{hash:{},inverse:this.program(3,g,d),fn:this.program(1,f,d)}))||0===c)b+=c;return b+"\n  </div>\n</div>\n"});return this.HandlebarsTemplates["home/graphs/sales_target_graph"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["home/missing_sn_warning_modal"]=Handlebars.template(function(b,a,e,c,d){function f(a,c){return"1300 555 123"}function g(a,c){return"0508 328 283"}e=e||b.helpers;var h;c=e.blockHelperMissing;b='<div class="modal-dialog contact-customer-service-warning-modal" id="missing-sn-warning-modal">\n    <div class="modal-content">\n        <div class="modal-header">\n            <button type="button" class="close" data-dismiss="modal" aria-hidden="true" tabindex="2">&times;</button>\n            <span class="modal-title">Sorry, something went wrong</span>\n        </div>\n        <div class="modal-body">\n            <p>\n                Try again in a few minutes. If it keeps happening, get in touch with our support team.\n            </p>\n\n            <div class="contact">\n              <img class="phone" src="frontend/phone.svg" />\n              <span class="phone-number">';
(h=e.ifAu)?h=h.call(a,{hash:{},inverse:this.program(3,g,d),fn:this.program(1,f,d)}):(h=a.ifAu,h="function"===typeof h?h():h);e.ifAu||(h=c.call(a,h,{hash:{},inverse:this.program(3,g,d),fn:this.program(1,f,d)}));if(h||0===h)b+=h;return b+'</span>\n            </div>\n\n            <hr class="button-separator" />\n            <div class="row">\n                <div class="col-xs-23">\n                    <div class="pull-right">\n                        <div>\n                            <a tabindex="1" role="button" id="closeButton" class="btn btn-primary action">Close</a>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n'});
return this.HandlebarsTemplates["home/missing_sn_warning_modal"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["home/notice_board"]=Handlebars.template(function(b,a,e,c,d){return'<div id="noticeboard" class="hidden panel panel-gray">\n  <div class="content">\n    <a class="close noticeboardClose" href="#">\n      <i class="fa fa-times-circle"></i>\n    </a>\n    <div id="noticeboard-text" class="noticeboardText"></div>\n  </div>\n</div>\n<div class="clear"></div>\n'});return this.HandlebarsTemplates["home/notice_board"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["home/partner_business_select"]=Handlebars.template(function(b,a,e,c,d){c=this.escapeExpression;b='<div id="page">\n    <div id="pageContentHeader">\n        <div class="row">\n            <div class="col-xs-24">\n                <h1>Accept your invitation</h1>\n                <p><strong>';e=a.invitation;e=null==e||!1===e?e:e.business;e=null==e||!1===e?e:e.businessName;e="function"===typeof e?e():e;b+=c(e)+
'</strong> has invited you to be their accounting advisor, but we\'re not sure which one of your practices they belong to.</p>\n                <p>Before you accept their invitation, choose which partner dashboard you want to add them to.</p>\n            </div>\n        </div>\n        <div class="row overview-container vertical-align">\n            <div class="col-sm-10">\n                <div style="margin-bottom:20px"/>\n                <div id="invitationDetailsContainer" class="alert alert-info">\n                    <p>\n                        <strong>Invited by: </strong>';
e=a.invitation;e=null==e||!1===e?e:e.business;e=null==e||!1===e?e:e.contactFirstName;e="function"===typeof e?e():e;b+=c(e)+" ";e=a.invitation;e=null==e||!1===e?e:e.business;e=null==e||!1===e?e:e.contactLastName;e="function"===typeof e?e():e;b+=c(e)+"<br>\n                        <strong>Business: </strong>";e=a.invitation;e=null==e||!1===e?e:e.business;e=null==e||!1===e?e:e.businessName;e="function"===typeof e?e():e;b+=c(e)+"<br>\n                        <strong>Email: </strong>";e=a.invitation;e=
null==e||!1===e?e:e.business;e=null==e||!1===e?e:e.email;e="function"===typeof e?e():e;b+=c(e)+"<br>\n                        <strong>Phone: </strong>";e=a.invitation;e=null==e||!1===e?e:e.business;e=null==e||!1===e?e:e.phone;e="function"===typeof e?e():e;return b+=c(e)+'<br>\n                    </p>\n                </div>\n            </div>\n            <div class="col-sm-4">\n                <div class="icon-arrow-right-large big-arrow"/>\n            </div>\n            <div class="col-sm-10">\n                <div id="businessListContainer" class="top-buffer"></div>\n            </div>\n\n        </div>\n        <button type="button" class="btn btn-primary pull-right disabled" id="confirmBusinessSelection">Accept Invitation</button>\n    </div>\n</div>\n'});
return this.HandlebarsTemplates["home/partner_business_select"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["home/stats"]=Handlebars.template(function(b,a,e,c,d){e=e||b.helpers;var f=e.helperMissing,g=this.escapeExpression;b='<div class="row">\n  <div class="col-xs-8">\n    <h3 class="underline">Money in</h3>\n      <div id="open-invoices-container"></div>\n    <div id="gst-refund-container"></div>\n  </div>\n  <div class="col-xs-8">\n    <h3 class="underline">Money out</h3>\n    <div id="open-expenses-container"></div>\n    <div id="payg-and-super-payable-container"></div>\n    <div id="gst-due-container"></div>\n  </div>\n  <div class="col-xs-8">\n    <div>\n    <h3 class="underline">\n      Banking\n    </h3>\n      ';c=
a.shouldShowBankFeedSignup;if((c=e["if"].call(a,c,{hash:{},inverse:this.noop,fn:this.program(1,function(a,c){var b,d,n;b='\n        <a class="setupBankFeeds btn btn-primary pull-right" href="';d=a.businessId;d=(n=e.bankFeedsUrl)?n.call(a,d,{hash:{}}):f.call(a,"bankFeedsUrl",d,{hash:{}});return b+=g(d)+'">\n        Set up bank feeds\n      </a>\n      '},d)}))||0===c)b+=c;return b+'\n    </div>\n    <div id="total-bank-balance-container"></div>\n    <div id="total-credit-card-balance-container"></div>\n    <div id="unallocated-transaction-container"></div>\n  </div>\n</div>\n'});
return this.HandlebarsTemplates["home/stats"]}).call(this);
(function(){Handlebars.registerPartial("_home_stats_account_balance_inverted_stats_details",Handlebars.template(function(b,a,e,c,d){function f(a,c){var b,d;b='\n        <div class="row">\n          ';d=a.balance;d=null==d||!1===d?d:d.zero;if((d=e["if"].call(a,d,{hash:{},inverse:v.program(5,h,c),fn:v.program(3,g,c)}))||0===d)b+=d;b+="\n          ";d=a.bankStatementBalance;if((d=e["if"].call(a,d,{hash:{},inverse:v.noop,fn:v.program(10,m,c)}))||0===d)b+=d;b+='\n          <div class="account-name">';
(d=e.accountName)?d=d.call(a,{hash:{}}):(d=a.accountName,d="function"===typeof d?d():d);return b+=u(d)+"</div>\n        </div>\n      "}function g(a,c){var b,d,f;b='\n            <div class="account-balance zero">';d=a.balance;d=null==d||!1===d?d:d.value;d=(f=e.moneyValueFormatWithCommaShowZero)?f.call(a,d,2,!1,!0,{hash:{}}):r.call(a,"moneyValueFormatWithCommaShowZero",d,2,!1,!0,{hash:{}});return b+=u(d)+"</div>\n          "}function h(a,c){var b,d;b="\n            ";d=a.balance;d=null==d||!1===d?
d:d.negative;if((d=e["if"].call(a,d,{hash:{},inverse:v.program(8,k,c),fn:v.program(6,l,c)}))||0===d)b+=d;return b+"\n          "}function l(a,c){var b,d,f;b='\n              <div class="account-balance positive">';d=a.balance;d=null==d||!1===d?d:d.value;d=(f=e.moneyValueFormatWithCommaShowZero)?f.call(a,d,2,!0,!0,{hash:{}}):r.call(a,"moneyValueFormatWithCommaShowZero",d,2,!0,!0,{hash:{}});return b+=u(d)+"</div>\n            "}function k(a,c){var b,d,f;b='\n              <div class="account-balance negative">';
d=a.balance;d=null==d||!1===d?d:d.value;d=(f=e.moneyValueFormatWithCommaShowZero)?f.call(a,d,2,!0,!0,{hash:{}}):r.call(a,"moneyValueFormatWithCommaShowZero",d,2,!0,!0,{hash:{}});return b+=u(d)+"</div>\n            "}function m(a,c){var b,d,f;b="\n            ";d=a.bankStatementBalance;d=null==d||!1===d?d:d.zero;if((d=e["if"].call(a,d,{hash:{},inverse:v.program(13,q,c),fn:v.program(11,n,c)}))||0===d)b+=d;b+='\n            <div class="statement-balance-label">Bank Balance (';d=a.bankStatementDate;d=
(f=e.formatDate)?f.call(a,d,"DD MMM YYYY",{hash:{}}):r.call(a,"formatDate",d,"DD MMM YYYY",{hash:{}});return b+=u(d)+")</div>\n          "}function n(a,c){var b,d,f;b='\n              <div class="statement-balance zero">';d=a.bankStatementBalance;d=null==d||!1===d?d:d.value;d=(f=e.moneyValueFormatWithCommaShowZero)?f.call(a,d,2,{hash:{}}):r.call(a,"moneyValueFormatWithCommaShowZero",d,2,{hash:{}});return b+=u(d)+"</div>\n            "}function q(a,c){var b,d;b="\n              ";d=a.bankBalance;d=
null==d||!1===d?d:d.negative;if((d=e["if"].call(a,d,{hash:{},inverse:v.program(16,t,c),fn:v.program(14,p,c)}))||0===d)b+=d;return b+"\n            "}function p(a,c){var b,d,f;b='\n                <div class="statement-balance positive">';d=a.bankStatementBalance;d=null==d||!1===d?d:d.value;d=(f=e.moneyValueFormatWithCommaShowZero)?f.call(a,d,2,!0,{hash:{}}):r.call(a,"moneyValueFormatWithCommaShowZero",d,2,!0,{hash:{}});return b+=u(d)+"</div>\n              "}function t(a,c){var b,d,f;b='\n                <div class="statement-balance negative">';
d=a.bankStatementBalance;d=null==d||!1===d?d:d.value;d=(f=e.moneyValueFormatWithCommaShowZero)?f.call(a,d,2,!0,{hash:{}}):r.call(a,"moneyValueFormatWithCommaShowZero",d,2,!0,{hash:{}});return b+=u(d)+"</div>\n              "}e=e||b.helpers;b="";var r=e.helperMissing,u=this.escapeExpression,v=this;c=a.accounts;if((c=e["if"].call(a,c,{hash:{},inverse:v.noop,fn:v.program(1,function(a,c){var b,d;b='\n  <div class="row">\n    <div class="stats-details col-xs-24">\n      ';d=a.accounts;if((d=e.each.call(a,
d,{hash:{},inverse:v.noop,fn:v.program(2,f,c)}))||0===d)b+=d;return b+"\n    </div>\n  </div>\n"},d)}))||0===c)b+=c;return b+"\n"}))}).call(this);
(function(){Handlebars.registerPartial("_home_stats_account_balance_stats_details",Handlebars.template(function(b,a,e,c,d){function f(a,c){var b,d;b='\n        <div class="row">\n          ';d=a.balance;d=null==d||!1===d?d:d.zero;if((d=e["if"].call(a,d,{hash:{},inverse:v.program(5,h,c),fn:v.program(3,g,c)}))||0===d)b+=d;b+="\n          ";d=a.bankStatementBalance;if((d=e["if"].call(a,d,{hash:{},inverse:v.noop,fn:v.program(10,m,c)}))||0===d)b+=d;b+='\n          <div class="account-name">';(d=e.accountName)?
d=d.call(a,{hash:{}}):(d=a.accountName,d="function"===typeof d?d():d);return b+=u(d)+"</div>\n        </div>\n      "}function g(a,c){var b,d,f;b='\n            <div class="account-balance zero">';d=a.balance;d=null==d||!1===d?d:d.value;d=(f=e.moneyValueFormatWithCommaShowZero)?f.call(a,d,2,!1,!0,{hash:{}}):r.call(a,"moneyValueFormatWithCommaShowZero",d,2,!1,!0,{hash:{}});return b+=u(d)+"</div>\n          "}function h(a,c){var b,d;b="\n            ";d=a.balance;d=null==d||!1===d?d:d.negative;if((d=
e["if"].call(a,d,{hash:{},inverse:v.program(8,k,c),fn:v.program(6,l,c)}))||0===d)b+=d;return b+"\n          "}function l(a,c){var b,d,f;b='\n              <div class="account-balance negative">';d=a.balance;d=null==d||!1===d?d:d.value;d=(f=e.moneyValueFormatWithCommaShowZero)?f.call(a,d,2,!1,!0,{hash:{}}):r.call(a,"moneyValueFormatWithCommaShowZero",d,2,!1,!0,{hash:{}});return b+=u(d)+"</div>\n            "}function k(a,c){var b,d,f;b='\n              <div class="account-balance positive">';d=a.balance;
d=null==d||!1===d?d:d.value;d=(f=e.moneyValueFormatWithCommaShowZero)?f.call(a,d,2,!1,!0,{hash:{}}):r.call(a,"moneyValueFormatWithCommaShowZero",d,2,!1,!0,{hash:{}});return b+=u(d)+"</div>\n            "}function m(a,c){var b,d,f;b="\n            ";d=a.bankStatementBalance;d=null==d||!1===d?d:d.zero;if((d=e["if"].call(a,d,{hash:{},inverse:v.program(13,q,c),fn:v.program(11,n,c)}))||0===d)b+=d;b+='\n            <div class="statement-balance-label">Bank Balance (';d=a.bankStatementDate;d=(f=e.formatDate)?
f.call(a,d,"DD MMM YYYY",{hash:{}}):r.call(a,"formatDate",d,"DD MMM YYYY",{hash:{}});return b+=u(d)+")</div>\n          "}function n(a,c){var b,d,f;b='\n              <div class="statement-balance zero">';d=a.bankStatementBalance;d=null==d||!1===d?d:d.value;d=(f=e.moneyValueFormatWithCommaShowZero)?f.call(a,d,2,{hash:{}}):r.call(a,"moneyValueFormatWithCommaShowZero",d,2,{hash:{}});return b+=u(d)+"</div>\n            "}function q(a,c){var b,d;b="\n              ";d=a.bankBalance;d=null==d||!1===d?
d:d.negative;if((d=e["if"].call(a,d,{hash:{},inverse:v.program(16,t,c),fn:v.program(14,p,c)}))||0===d)b+=d;return b+"\n            "}function p(a,c){var b,d,f;b='\n                <div class="statement-balance negative">';d=a.bankStatementBalance;d=null==d||!1===d?d:d.value;d=(f=e.moneyValueFormatWithCommaShowZero)?f.call(a,d,2,{hash:{}}):r.call(a,"moneyValueFormatWithCommaShowZero",d,2,{hash:{}});return b+=u(d)+"</div>\n              "}function t(a,c){var b,d,f;b='\n                <div class="statement-balance positive">';
d=a.bankStatementBalance;d=null==d||!1===d?d:d.value;d=(f=e.moneyValueFormatWithCommaShowZero)?f.call(a,d,2,{hash:{}}):r.call(a,"moneyValueFormatWithCommaShowZero",d,2,{hash:{}});return b+=u(d)+"</div>\n              "}e=e||b.helpers;b="";var r=e.helperMissing,u=this.escapeExpression,v=this;c=a.accounts;if((c=e["if"].call(a,c,{hash:{},inverse:v.noop,fn:v.program(1,function(a,c){var b,d;b='\n  <div class="row">\n    <div class="stats-details col-xs-24">\n      ';d=a.accounts;if((d=e.each.call(a,d,
{hash:{},inverse:v.noop,fn:v.program(2,f,c)}))||0===d)b+=d;return b+"\n    </div>\n  </div>\n"},d)}))||0===c)b+=c;return b+"\n"}))}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["home/stats/billflow_stat"]=Handlebars.template(function(b,a,e,c,d){function f(a,c){var b,d;b='\n    <span class="badge purple margin-left-05">';(d=e.total)?d=d.call(a,{hash:{}}):(d=a.total,d="function"===typeof d?d():d);return b+=h(d)+"</span>\n\t"}e=e||b.helpers;var g,h=this.escapeExpression,l=e.helperMissing;b="<a href='";c=a.busId;c=(g=e.appUrl)?g.call(a,c,"/documents",{hash:{}}):l.call(a,"appUrl",c,"/documents",
{hash:{}});b+=h(c)+'\' class="clickable">\n\tIn tray\n\t';c=a.total;if((c=(g=e.ifGreater)?g.call(a,c,0,{hash:{},inverse:this.noop,fn:this.program(1,f,d)}):l.call(a,"ifGreater",c,0,{hash:{},inverse:this.noop,fn:this.program(1,f,d)}))||0===c)b+=c;return b+"\n</a>\n"});return this.HandlebarsTemplates["home/stats/billflow_stat"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["home/stats/gst_due_stat"]=Handlebars.template(function(b,a,e,c,d){function f(a,c){return'\n      <div class="stats-loading col-xs-4 col-xs-offset-10"></div>\n  '}function g(a,c){var b,d;b='\n    <div class="stats-number-container col-xs-24">\n      ';d=a.amount;d=null==d||!1===d?d:d.negative;if((d=e["if"].call(a,d,{hash:{},inverse:q.program(6,l,c),fn:q.program(4,h,c)}))||0===d)b+=d;return b+"\n    </div>\n  "}
function h(a,c){var b,d,f;b='\n        <h3 class="number positive">';d=a.amount;d=null==d||!1===d?d:d.value;d=(f=e.moneyValueFormatToSixDigits)?f.call(a,d,!0,{hash:{}}):m.call(a,"moneyValueFormatToSixDigits",d,!0,{hash:{}});b+=n(d)+'</h3>\n        <p class="description"><a href="';d=a.businessId;d=(f=e.appUrl)?f.call(a,d,"/reports/gstDetailedReport",{hash:{}}):m.call(a,"appUrl",d,"/reports/gstDetailedReport",{hash:{}});return b+=n(d)+'">GST to pay</a></p>\n      '}function l(a,c){var b,d;b='\n        <h3 class="number zero">';
d=(d=e.moneyValueFormatToSixDigits)?d.call(a,0,{hash:{}}):m.call(a,"moneyValueFormatToSixDigits",0,{hash:{}});return b+=n(d)+'</h3>\n        <p class="description">GST to pay</p>\n      '}e=e||b.helpers;var k,m=e.helperMissing,n=this.escapeExpression,q=this;b='<div class="stats-wrapper">\n  <div class="stats-header">\n    <div class="row">\n      <div class="col-xs-18">GST to pay</div>\n    </div>\n  </div>\n\n  <div class="stats-body">\n    <div class="row ">\n  ';c=a.amount;if((c=(k=e.ifBlank)?
k.call(a,c,{hash:{},inverse:q.program(3,g,d),fn:q.program(1,f,d)}):m.call(a,"ifBlank",c,{hash:{},inverse:q.program(3,g,d),fn:q.program(1,f,d)}))||0===c)b+=c;return b+"\n  </div>\n</div>\n"});return this.HandlebarsTemplates["home/stats/gst_due_stat"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["home/stats/gst_refund_stat"]=Handlebars.template(function(b,a,e,c,d){function f(a,c){return'\n      <div class="stats-loading col-xs-4 col-xs-offset-10"></div>\n    '}function g(a,c){var b,d;b='\n      <div class="stats-number-container col-xs-24">\n        ';d=a.amount;d=null==d||!1===d?d:d.zero;if((d=e["if"].call(a,d,{hash:{},inverse:t.program(6,l,c),fn:t.program(4,h,c)}))||0===d)b+=d;return b+"\n      </div>\n    "}
function h(a,c){var b,d;b='\n          <h3 class="number zero">';d=(d=e.moneyValueFormatToSixDigits)?d.call(a,0,{hash:{}}):q.call(a,"moneyValueFormatToSixDigits",0,{hash:{}});return b+=p(d)+'</h3>\n          <p class="description">GST refund from ATO</p>\n        '}function l(a,c){var b,d;b="\n          ";d=a.amount;d=null==d||!1===d?d:d.negative;if((d=e["if"].call(a,d,{hash:{},inverse:t.program(9,m,c),fn:t.program(7,k,c)}))||0===d)b+=d;return b+"\n        "}function k(a,c){var b,d;b='\n            <h3 class="number zero">';
d=(d=e.moneyValueFormatToSixDigits)?d.call(a,0,{hash:{}}):q.call(a,"moneyValueFormatToSixDigits",0,{hash:{}});return b+=p(d)+'</h3>\n            <p class="description">GST refund from ATO</p>\n          '}function m(a,c){var b,d,f;b='\n            <h3 class="number positive">';d=a.amount;d=null==d||!1===d?d:d.value;d=(f=e.moneyValueFormatToSixDigits)?f.call(a,d,{hash:{}}):q.call(a,"moneyValueFormatToSixDigits",d,{hash:{}});b+=p(d)+'</h3>\n            <p class="description"><a href="';d=a.businessId;
d=(f=e.appUrl)?f.call(a,d,"/reports/gstDetailedReport",{hash:{}}):q.call(a,"appUrl",d,"/reports/gstDetailedReport",{hash:{}});return b+=p(d)+'">GST refund from ATO</a></p>\n          '}e=e||b.helpers;var n,q=e.helperMissing,p=this.escapeExpression,t=this;b='<div class="stats-wrapper">\n  <div class="stats-header">\n    <div class="row">\n      <div class="col-xs-18">GST refund</div>\n    </div>\n  </div>\n\n  <div class="stats-body">\n    <div class="row ">\n    ';c=a.amount;if((c=(n=e.ifBlank)?n.call(a,
c,{hash:{},inverse:t.program(3,g,d),fn:t.program(1,f,d)}):q.call(a,"ifBlank",c,{hash:{},inverse:t.program(3,g,d),fn:t.program(1,f,d)}))||0===c)b+=c;return b+"\n  </div>\n</div>\n"});return this.HandlebarsTemplates["home/stats/gst_refund_stat"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["home/stats/open_expenses_stat"]=Handlebars.template(function(b,a,e,c,d){function f(a,c){return'\n      <div class="stats-loading col-xs-4 col-xs-offset-10"></div>\n    '}function g(a,c){var b,d;b='\n      <div class="stats-number-container col-xs-24">\n        ';d=a.due;d=null==d||!1===d?d:d.zero;if((d=e["if"].call(a,d,{hash:{},inverse:t.program(6,l,c),fn:t.program(4,h,c)}))||0===d)b+=d;return b+"\n      </div>\n    "}
function h(a,c){var b,d;b='\n          <h3 class="number zero">';d=(d=e.moneyValueFormatToSixDigits)?d.call(a,0,{hash:{}}):q.call(a,"moneyValueFormatToSixDigits",0,{hash:{}});return b+=p(d)+'</h3>\n          <p class="description">Owing to suppliers</p>\n        '}function l(a,c){var b,d,f;b="\n          ";d=a.due;d=null==d||!1===d?d:d.negative;if((d=e["if"].call(a,d,{hash:{},inverse:t.program(9,m,c),fn:t.program(7,k,c)}))||0===d)b+=d;b+='\n          <p class="description"><a href="';d=a.businessId;
d=(f=e.appUrl)?f.call(a,d,"/bills",{hash:{}}):q.call(a,"appUrl",d,"/bills",{hash:{}});return b+=p(d)+'">Owing to suppliers</a></p>\n        '}function k(a,c){var b,d,f;b='\n            <h3 class="number positive">';d=a.due;d=null==d||!1===d?d:d.value;d=(f=e.moneyValueFormatToSixDigits)?f.call(a,d,!0,{hash:{}}):q.call(a,"moneyValueFormatToSixDigits",d,!0,{hash:{}});return b+=p(d)+"</h3>\n          "}function m(a,c){var b,d,f;b='\n            <h3 class="number negative">';d=a.due;d=null==d||!1===d?
d:d.value;d=(f=e.moneyValueFormatToSixDigits)?f.call(a,d,!0,{hash:{}}):q.call(a,"moneyValueFormatToSixDigits",d,!0,{hash:{}});return b+=p(d)+"</h3>\n          "}e=e||b.helpers;var n,q=e.helperMissing,p=this.escapeExpression,t=this;b='<div class="stats-wrapper">\n  <div class="stats-header">\n    <div class="row">\n      <div class="col-xs-18">Expenses</div>\n    </div>\n  </div>\n\n  <div class="stats-body">\n    <div class="row ">\n    ';c=a.count;if((c=(n=e.ifBlank)?n.call(a,c,{hash:{},inverse:t.program(3,
g,d),fn:t.program(1,f,d)}):q.call(a,"ifBlank",c,{hash:{},inverse:t.program(3,g,d),fn:t.program(1,f,d)}))||0===c)b+=c;return b+"\n  </div>\n</div>\n"});return this.HandlebarsTemplates["home/stats/open_expenses_stat"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["home/stats/open_invoices_stat"]=Handlebars.template(function(b,a,e,c,d){function f(a,c){return'\n        <div class="stats-loading open-invoice col-xs-4 col-xs-offset-10"></div>\n      '}function g(a,c){var b,d,f;b='\n        <div class="stats-number-container col-xs-24">\n          ';d=a.due;d=null==d||!1===d?d:d.zero;if((d=e["if"].call(a,d,{hash:{},inverse:z.program(6,l,c),fn:z.program(4,h,c)}))||0===d)b+=
d;b+="\n          ";d=a.count;if((d=(f=e.ifEqual)?f.call(a,d,0,{hash:{},inverse:z.program(13,q,c),fn:z.program(11,n,c)}):u.call(a,"ifEqual",d,0,{hash:{},inverse:z.program(13,q,c),fn:z.program(11,n,c)}))||0===d)b+=d;return b+"\n        </div>\n      "}function h(a,c){var b,d;b='\n            <h3 class="number zero">';d=(d=e.moneyValueFormatToSixDigits)?d.call(a,0,{hash:{}}):u.call(a,"moneyValueFormatToSixDigits",0,{hash:{}});return b+=v(d)+"</h3>\n          "}function l(a,c){var b,d;b="\n            ";
d=a.due;d=null==d||!1===d?d:d.negative;if((d=e["if"].call(a,d,{hash:{},inverse:z.program(9,m,c),fn:z.program(7,k,c)}))||0===d)b+=d;return b+"\n          "}function k(a,c){var b,d,f;b='\n              <h3 class="number negative">';d=a.due;d=null==d||!1===d?d:d.value;d=(f=e.moneyValueFormatToSixDigits)?f.call(a,d,{hash:{}}):u.call(a,"moneyValueFormatToSixDigits",d,{hash:{}});return b+=v(d)+"</h3>\n            "}function m(a,c){var b,d,f;b='\n              <h3 class="number positive">';d=a.due;d=null==
d||!1===d?d:d.value;d=(f=e.moneyValueFormatToSixDigits)?f.call(a,d,{hash:{}}):u.call(a,"moneyValueFormatToSixDigits",d,{hash:{}});return b+=v(d)+"</h3>\n            "}function n(a,b){return'\n            <p class="description">0 invoices</p>\n          '}function q(a,b){var c,d,f;c="\n            ";d=a.count;if((d=(f=e.ifEqual)?f.call(a,d,1,{hash:{},inverse:z.program(16,t,b),fn:z.program(14,p,b)}):u.call(a,"ifEqual",d,1,{hash:{},inverse:z.program(16,t,b),fn:z.program(14,p,b)}))||0===d)c+=d;return c+
"\n          "}function p(a,b){var c,d,f;c='\n              <p class="description"><a class="open-invoice" href="';d=a.businessId;d=(f=e.appUrl)?f.call(a,d,"/invoices",{hash:{}}):u.call(a,"appUrl",d,"/invoices",{hash:{}});return c+=v(d)+'">1 invoice issued</a></p>\n            '}function t(a,c){var b,d,f;b='\n              <p class="description"><a class="open-invoice" href="';d=a.businessId;d=(f=e.appUrl)?f.call(a,d,"/invoices",{hash:{}}):u.call(a,"appUrl",d,"/invoices",{hash:{}});b+=v(d)+'">';(f=
e.count)?d=f.call(a,{hash:{}}):(d=a.count,d="function"===typeof d?d():d);return b+=v(d)+" invoices issued</a></p>\n            "}e=e||b.helpers;var r,u=e.helperMissing,v=this.escapeExpression,z=this;b='<div class="stats-wrapper">\n  <div class="stats-header">\n    <div class="row">\n    <div class="col-xs-24">Invoices</div>\n    </div>\n  </div>\n\n  <div class="stats-body">\n    <div class="row">\n      ';c=a.count;if((c=(r=e.ifBlank)?r.call(a,c,{hash:{},inverse:z.program(3,g,d),fn:z.program(1,f,
d)}):u.call(a,"ifBlank",c,{hash:{},inverse:z.program(3,g,d),fn:z.program(1,f,d)}))||0===c)b+=c;return b+'\n    </div>\n  </div>\n  <div id="overdue-invoices-container"></div>\n</div>\n'});return this.HandlebarsTemplates["home/stats/open_invoices_stat"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["home/stats/overdue_invoices_stat"]=Handlebars.template(function(b,a,e,c,d){function f(a,b){return'\n      <div class="stats-loading col-xs-4 col-xs-offset-10"></div>\n    '}function g(a,b){var c,d,f;c='\n      <div class="stats-number-container col-xs-24">\n        ';d=a.due;d=null==d||!1===d?d:d.zero;if((d=e["if"].call(a,d,{hash:{},inverse:z.program(6,l,b),fn:z.program(4,h,b)}))||0===d)c+=d;c+="\n        ";
d=a.count;if((d=(f=e.ifEqual)?f.call(a,d,0,{hash:{},inverse:z.program(13,q,b),fn:z.program(11,n,b)}):u.call(a,"ifEqual",d,0,{hash:{},inverse:z.program(13,q,b),fn:z.program(11,n,b)}))||0===d)c+=d;return c+"\n      </div>\n    "}function h(a,b){var c,d;c='\n          <h3 class="number zero">';d=(d=e.moneyValueFormatToSixDigits)?d.call(a,0,{hash:{}}):u.call(a,"moneyValueFormatToSixDigits",0,{hash:{}});return c+=v(d)+"</h3>\n        "}function l(a,c){var b,d;b="\n          ";d=a.due;d=null==d||!1===d?
d:d.negative;if((d=e["if"].call(a,d,{hash:{},inverse:z.program(9,m,c),fn:z.program(7,k,c)}))||0===d)b+=d;return b+"\n        "}function k(a,b){var c,d,f;c='\n            <h3 class="number negative">';d=a.due;d=null==d||!1===d?d:d.value;d=(f=e.moneyValueFormatToSixDigits)?f.call(a,d,{hash:{}}):u.call(a,"moneyValueFormatToSixDigits",d,{hash:{}});return c+=v(d)+"</h3>\n          "}function m(a,c){var b,d,f;b='\n            <h3 class="number positive">';d=a.due;d=null==d||!1===d?d:d.value;d=(f=e.moneyValueFormatToSixDigits)?
f.call(a,d,{hash:{}}):u.call(a,"moneyValueFormatToSixDigits",d,{hash:{}});return b+=v(d)+"</h3>\n          "}function n(a,b){return'\n          <p class="description">0 invoices overdue</p>\n        '}function q(a,b){var c,d,f;c="\n          ";d=a.count;if((d=(f=e.ifEqual)?f.call(a,d,1,{hash:{},inverse:z.program(16,t,b),fn:z.program(14,p,b)}):u.call(a,"ifEqual",d,1,{hash:{},inverse:z.program(16,t,b),fn:z.program(14,p,b)}))||0===d)c+=d;return c+"\n        "}function p(a,b){var c,d,f;c='\n            <p class="description"><a href="';
d=a.businessId;d=(f=e.appUrl)?f.call(a,d,"/invoices",{hash:{}}):u.call(a,"appUrl",d,"/invoices",{hash:{}});c+=v(d)+'">';(f=e.count)?d=f.call(a,{hash:{}}):(d=a.count,d="function"===typeof d?d():d);return c+=v(d)+" invoice overdue</a></p>\n          "}function t(a,c){var b,d,f;b='\n            <p class="description"><a href="';d=a.businessId;d=(f=e.appUrl)?f.call(a,d,"/invoices",{hash:{}}):u.call(a,"appUrl",d,"/invoices",{hash:{}});b+=v(d)+'">';(f=e.count)?d=f.call(a,{hash:{}}):(d=a.count,d="function"===
typeof d?d():d);return b+=v(d)+" invoices overdue</a></p>\n          "}e=e||b.helpers;var r,u=e.helperMissing,v=this.escapeExpression,z=this;b='<div class="stats-body">\n  <div class="row">\n    ';c=a.count;if((c=(r=e.ifBlank)?r.call(a,c,{hash:{},inverse:z.program(3,g,d),fn:z.program(1,f,d)}):u.call(a,"ifBlank",c,{hash:{},inverse:z.program(3,g,d),fn:z.program(1,f,d)}))||0===c)b+=c;return b+"\n  </div>\n</div>\n"});return this.HandlebarsTemplates["home/stats/overdue_invoices_stat"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["home/stats/payg_and_super_payable_stat"]=Handlebars.template(function(b,a,e,c,d){function f(a,b){return"PAYG & Super"}function g(a,b){return"PAYE & KiwiSaver"}function h(a,b){return'\n        <div class="stats-loading col-xs-4 col-xs-offset-10"></div>\n      '}function l(a,b){var c,d;c='\n        <div class="stats-number-container col-xs-24">\n          ';d=a.total;d=null==d||!1===d?d:d.zero;if((d=e["if"].call(a,
d,{hash:{},inverse:y.program(12,m,b),fn:y.program(10,k,b)}))||0===d)c+=d;c+="\n          ";(d=e.ifAu)?d=d.call(a,{hash:{},inverse:y.program(19,t,b),fn:y.program(17,p,b)}):(d=a.ifAu,d="function"===typeof d?d():d);e.ifAu||(d=D.call(a,d,{hash:{},inverse:y.program(19,t,b),fn:y.program(17,p,b)}));if(d||0===d)c+=d;return c+"\n        </div>\n      "}function k(a,b){var c,d;c='\n            <h3 class="number zero">';d=(d=e.moneyValueFormatToSixDigits)?d.call(a,0,{hash:{}}):v.call(a,"moneyValueFormatToSixDigits",
0,{hash:{}});return c+=z(d)+"</h3>\n          "}function m(a,b){var c,d;c="\n            ";d=a.due;d=null==d||!1===d?d:d.negative;if((d=e["if"].call(a,d,{hash:{},inverse:y.program(15,q,b),fn:y.program(13,n,b)}))||0===d)c+=d;return c+"\n          "}function n(a,c){var b,d,f;b='\n              <h3 class="number positive">';d=a.total;d=null==d||!1===d?d:d.value;d=(f=e.moneyValueFormatToSixDigits)?f.call(a,d,!0,{hash:{}}):v.call(a,"moneyValueFormatToSixDigits",d,!0,{hash:{}});return b+=z(d)+"</h3>\n            "}
function q(a,b){var c,d,f;c='\n              <h3 class="number negative">';d=a.total;d=null==d||!1===d?d:d.value;d=(f=e.moneyValueFormatToSixDigits)?f.call(a,d,!0,{hash:{}}):v.call(a,"moneyValueFormatToSixDigits",d,!0,{hash:{}});return c+=z(d)+"</h3>\n            "}function p(a,c){return'\n            <p class="description">PAYG & Super owing</p>\n          '}function t(a,c){return'\n            <p class="description">PAYE & KiwiSaver owing</p>\n          '}e=e||b.helpers;c=c||b.partials;var r,u,
v=e.helperMissing,z=this.escapeExpression,y=this,D=e.blockHelperMissing;b='<div class="stats-wrapper">\n  <div class="stats-header">\n    <div class="row">\n      <div class="col-xs-18">';(u=e.ifAu)?r=u.call(a,{hash:{},inverse:y.program(3,g,d),fn:y.program(1,f,d)}):(r=a.ifAu,r="function"===typeof r?r():r);e.ifAu||(r=D.call(a,r,{hash:{},inverse:y.program(3,g,d),fn:y.program(1,f,d)}));if(r||0===r)b+=r;b+=" </div>\n    ";r=a.accounts;if((r=e["if"].call(a,r,{hash:{},inverse:y.noop,fn:y.program(5,function(a,
c){return'\n      <div class="stats-expand-container col-xs-6 text-right">\n          <div class="stats-expand show-details">\n          <div class="btn-default btn"><i class="fa fa-caret-down"></i>\n          </div>\n          </div>\n          <div class="stats-expand hide-details"><div class="btn btn-default"><i class="fa fa-caret-up"></i></div>\n        </div>\n      </div>\n    '},d)}))||0===r)b+=r;b+='\n    </div>\n  </div>\n\n\n  <div class="stats-body">\n    <div class="row ">\n      ';r=
a.total;if((r=(u=e.ifBlank)?u.call(a,r,{hash:{},inverse:y.program(9,l,d),fn:y.program(7,h,d)}):v.call(a,"ifBlank",r,{hash:{},inverse:y.program(9,l,d),fn:y.program(7,h,d)}))||0===r)b+=r;b+="\n    </div>\n    ";if((r=y.invokePartial(c._home_stats_account_balance_inverted_stats_details,"_home_stats_account_balance_inverted_stats_details",a,e,c))||0===r)b+=r;return b+"\n  </div>\n</div>\n"});return this.HandlebarsTemplates["home/stats/payg_and_super_payable_stat"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["home/stats/total_bank_balance_stat"]=Handlebars.template(function(b,a,e,c,d){function f(a,c){return'\n      <div class="stats-loading col-xs-4 col-xs-offset-10"></div>\n    '}function g(a,c){var b,d;b='\n      <div class="stats-number-container col-xs-24">\n        ';d=a.total;d=null==d||!1===d?d:d.zero;if((d=e["if"].call(a,d,{hash:{},inverse:r.program(8,l,c),fn:r.program(6,h,c)}))||0===d)b+=d;return b+'\n        <p class="description">In the bank</p>\n      </div>\n    '}
function h(a,c){var b,d;b='\n          <h3 class="number zero">';d=(d=e.moneyValueFormatToSixDigits)?d.call(a,0,{hash:{}}):p.call(a,"moneyValueFormatToSixDigits",0,{hash:{}});return b+=t(d)+"</h3>\n        "}function l(a,c){var b,d;b="\n          ";d=a.total;d=null==d||!1===d?d:d.negative;if((d=e["if"].call(a,d,{hash:{},inverse:r.program(11,m,c),fn:r.program(9,k,c)}))||0===d)b+=d;return b+"\n        "}function k(a,b){var c,d,f;c='\n            <h3 class="number negative">';d=a.total;d=null==d||!1===
d?d:d.value;d=(f=e.moneyValueFormatToSixDigits)?f.call(a,d,{hash:{}}):p.call(a,"moneyValueFormatToSixDigits",d,{hash:{}});return c+=t(d)+"</h3>\n          "}function m(a,c){var b,d,f;b='\n            <h3 class="number positive">';d=a.total;d=null==d||!1===d?d:d.value;d=(f=e.moneyValueFormatToSixDigits)?f.call(a,d,{hash:{}}):p.call(a,"moneyValueFormatToSixDigits",d,{hash:{}});return b+=t(d)+"</h3>\n          "}e=e||b.helpers;c=c||b.partials;var n,q,p=e.helperMissing,t=this.escapeExpression,r=this;
b='<div class="stats-wrapper">\n  <div class="stats-header">\n    <div class="row">\n      <div class="col-xs-18">Bank accounts</div>\n      ';n=a.accounts;if((n=e["if"].call(a,n,{hash:{},inverse:r.noop,fn:r.program(1,function(a,b){return'\n        <div class="stats-expand-container col-xs-6 text-right">\n            <div class="stats-expand show-details">\n            <div class="btn-default btn"><i class="fa fa-caret-down"></i>\n            </div>\n            </div>\n            <div class="stats-expand hide-details"><div class="btn btn-default"><i class="fa fa-caret-up"></i></div>\n          </div>\n        </div>\n      '},
d)}))||0===n)b+=n;b+='\n    </div>\n  </div>\n\n  <div class="stats-body">\n    <div class="row ">\n    ';n=a.total;if((n=(q=e.ifBlank)?q.call(a,n,{hash:{},inverse:r.program(5,g,d),fn:r.program(3,f,d)}):p.call(a,"ifBlank",n,{hash:{},inverse:r.program(5,g,d),fn:r.program(3,f,d)}))||0===n)b+=n;b+="\n    </div>\n  ";if((n=r.invokePartial(c._home_stats_account_balance_stats_details,"_home_stats_account_balance_stats_details",a,e,c))||0===n)b+=n;return b+"\n  </div>\n</div>\n"});return this.HandlebarsTemplates["home/stats/total_bank_balance_stat"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["home/stats/total_credit_card_balance_stat"]=Handlebars.template(function(b,a,e,c,d){function f(a,b){return'\n      <div class="stats-loading col-xs-4 col-xs-offset-10"></div>\n    '}function g(a,b){var c,d;c='\n      <div class="stats-number-container col-xs-24">\n        ';d=a.total;d=null==d||!1===d?d:d.zero;if((d=e["if"].call(a,d,{hash:{},inverse:r.program(8,l,b),fn:r.program(6,h,b)}))||0===d)c+=d;return c+
'\n        <p class="description">In credit cards</p>\n      </div>\n    '}function h(a,b){var c,d;c='\n          <h3 class="number zero">';d=(d=e.moneyValueFormatToSixDigits)?d.call(a,0,{hash:{}}):p.call(a,"moneyValueFormatToSixDigits",0,{hash:{}});return c+=t(d)+"</h3>\n        "}function l(a,c){var b,d;b="\n          ";d=a.due;d=null==d||!1===d?d:d.negative;if((d=e["if"].call(a,d,{hash:{},inverse:r.program(11,m,c),fn:r.program(9,k,c)}))||0===d)b+=d;return b+"\n        "}function k(a,b){var c,d,
f;c='\n            <h3 class="number positive">';d=a.total;d=null==d||!1===d?d:d.value;d=(f=e.moneyValueFormatToSixDigits)?f.call(a,d,!0,{hash:{}}):p.call(a,"moneyValueFormatToSixDigits",d,!0,{hash:{}});return c+=t(d)+"</h3>\n          "}function m(a,c){var b,d,f;b='\n            <h3 class="number negative">';d=a.total;d=null==d||!1===d?d:d.value;d=(f=e.moneyValueFormatToSixDigits)?f.call(a,d,!0,{hash:{}}):p.call(a,"moneyValueFormatToSixDigits",d,!0,{hash:{}});return b+=t(d)+"</h3>\n          "}e=
e||b.helpers;c=c||b.partials;var n,q,p=e.helperMissing,t=this.escapeExpression,r=this;b='<div class="stats-wrapper">\n  <div class="stats-header">\n    <div class="row">\n      <div class="col-xs-18">Credit cards</div>\n      ';n=a.accounts;if((n=e["if"].call(a,n,{hash:{},inverse:r.noop,fn:r.program(1,function(a,b){return'\n        <div class="stats-expand-container col-xs-6 text-right">\n            <div class="stats-expand show-details">\n            <div class="btn-default btn"><i class="fa fa-caret-down"></i>\n            </div>\n            </div>\n            <div class="stats-expand hide-details"><div class="btn btn-default"><i class="fa fa-caret-up"></i></div>\n          </div>\n        </div>\n      '},
d)}))||0===n)b+=n;b+='\n    </div>\n  </div>\n\n  <div class="stats-body">\n    <div class="row ">\n    ';n=a.total;if((n=(q=e.ifBlank)?q.call(a,n,{hash:{},inverse:r.program(5,g,d),fn:r.program(3,f,d)}):p.call(a,"ifBlank",n,{hash:{},inverse:r.program(5,g,d),fn:r.program(3,f,d)}))||0===n)b+=n;b+="\n    </div>\n  ";if((n=r.invokePartial(c._home_stats_account_balance_inverted_stats_details,"_home_stats_account_balance_inverted_stats_details",a,e,c))||0===n)b+=n;return b+"\n    </div>\n  </div>\n</div>\n"});
return this.HandlebarsTemplates["home/stats/total_credit_card_balance_stat"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["home/stats/unallocated_transactions_stat"]=Handlebars.template(function(b,a,e,c,d){function f(a,b){return'\n      <div class="stats-loading col-xs-4 col-xs-offset-10"></div>\n    '}function g(a,b){var c,d,f;c='\n      <div class="stats-number-container col-xs-24">\n        <h3 class="number">';(f=e.number)?d=f.call(a,{hash:{}}):(d=a.number,d="function"===typeof d?d():d);c+=t(d)+"</h3>\n        ";d=a.number;
if((d=(f=e.ifEqual)?f.call(a,d,0,{hash:{},inverse:q.program(6,l,b),fn:q.program(4,h,b)}):p.call(a,"ifEqual",d,0,{hash:{},inverse:q.program(6,l,b),fn:q.program(4,h,b)}))||0===d)c+=d;return c+"\n      </div>\n    "}function h(a,b){return'\n          <p class="description">Unallocated transactions</p>\n        '}function l(a,b){var c,d,f;c='\n\n            <p class="description">\n              <a id="unallocated-transactions-link">\n              ';d=a.number;if((d=(f=e.ifEqual)?f.call(a,d,1,{hash:{},
inverse:q.program(9,m,b),fn:q.program(7,k,b)}):p.call(a,"ifEqual",d,1,{hash:{},inverse:q.program(9,m,b),fn:q.program(7,k,b)}))||0===d)c+=d;return c+"\n              </a>\n            </p>\n        "}function k(a,b){return"\n                Unallocated transaction\n              "}function m(a,b){return"\n                Unallocated transactions\n              "}e=e||b.helpers;var n,q=this,p=e.helperMissing,t=this.escapeExpression;b='<div class="stats-wrapper">\n  <div class="stats-header">\n    <div class="row">\n      <div class="col-xs-18">Transactions</div>\n    </div>\n  </div>\n\n  <div class="stats-body">\n    <div class="row ">\n    ';
c=a.number;if((c=(n=e.ifBlank)?n.call(a,c,{hash:{},inverse:q.program(3,g,d),fn:q.program(1,f,d)}):p.call(a,"ifBlank",c,{hash:{},inverse:q.program(3,g,d),fn:q.program(1,f,d)}))||0===c)b+=c;return b+"\n    </div>\n  </div>\n</div>\n"});return this.HandlebarsTemplates["home/stats/unallocated_transactions_stat"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["home/subscribe_alert"]=Handlebars.template(function(b,a,e,c,d){function f(a,b){var c,d;c='\n  <div class="subscribe-alert alert alert-info">\n    <span>\n      ';if((d=(d=e.ifBusinessSetting)?d.call(a,"accountStatus","TRIAL",{hash:{},inverse:r.program(10,n,b),fn:r.program(2,g,b)}):t.call(a,"ifBusinessSetting","accountStatus","TRIAL",{hash:{},inverse:r.program(10,n,b),fn:r.program(2,g,b)}))||0===d)c+=d;return c+
'\n    </span>\n    <a class="subscribe">Subscribe now.</a>\n  </div>\n'}function g(a,b){var c,d;c="\n        ";if((d=(d=e.ifBusinessSetting)?d.call(a,"trialDaysRemaining",0,{hash:{},inverse:r.program(5,l,b),fn:r.program(3,h,b)}):t.call(a,"ifBusinessSetting","trialDaysRemaining",0,{hash:{},inverse:r.program(5,l,b),fn:r.program(3,h,b)}))||0===d)c+=d;return c+"\n      "}function h(a,b){return"\n          Your free trial period ends today.\n        "}function l(a,b){var c,d;c="\n          ";if((d=(d=
e.ifBusinessSetting)?d.call(a,"trialDaysRemaining",1,{hash:{},inverse:r.program(8,m,b),fn:r.program(6,k,b)}):t.call(a,"ifBusinessSetting","trialDaysRemaining",1,{hash:{},inverse:r.program(8,m,b),fn:r.program(6,k,b)}))||0===d)c+=d;return c+"\n        "}function k(a,b){var c,d;c="\n            Your free trial period ends in 1 day, on ";(d=e.businessSettingTrailExpiresOnDate)?d=d.call(a,{hash:{}}):(d=a.businessSettingTrailExpiresOnDate,d="function"===typeof d?d():d);return c+=p(d)+".\n          "}function m(a,
b){var c,d;c="\n            Your free trial period ends in ";d=(d=e.businessSetting)?d.call(a,"trialDaysRemaining",{hash:{}}):t.call(a,"businessSetting","trialDaysRemaining",{hash:{}});c+=p(d)+" days, on ";(d=e.businessSettingTrailExpiresOnDate)?d=d.call(a,{hash:{}}):(d=a.businessSettingTrailExpiresOnDate,d="function"===typeof d?d():d);return c+=p(d)+".\n          "}function n(a,c){return"\n        Your account has been suspended. You need to subscribe before you can use this account.\n      "}e=
e||b.helpers;b="";var q,p=this.escapeExpression,t=e.helperMissing,r=this;c=e.blockHelperMissing;(q=e.isTrialOrSuspendedBusiness)?q=q.call(a,{hash:{},inverse:r.noop,fn:r.program(1,f,d)}):(q=a.isTrialOrSuspendedBusiness,q="function"===typeof q?q():q);e.isTrialOrSuspendedBusiness||(q=c.call(a,q,{hash:{},inverse:r.noop,fn:r.program(1,f,d)}));if(q||0===q)b+=q;return b+"\n"});return this.HandlebarsTemplates["home/subscribe_alert"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["home/update_payment_details_alert"]=Handlebars.template(function(b,a,e,c,d){function f(a,c){var b,d;b="\n  ";if((d=(d=e.ifBusinessSetting)?d.call(a,"accountStatus","ACTIVE",{hash:{},inverse:n.noop,fn:n.program(2,g,c)}):k.call(a,"ifBusinessSetting","accountStatus","ACTIVE",{hash:{},inverse:n.noop,fn:n.program(2,g,c)}))||0===d)b+=d;return b+"\n"}function g(a,c){var b,d;b="\n    ";if((d=(d=e.ifBusinessSetting)?
d.call(a,"creditCardExpiringSoon",!0,{hash:{},inverse:n.noop,fn:n.program(3,h,c)}):k.call(a,"ifBusinessSetting","creditCardExpiringSoon",!0,{hash:{},inverse:n.noop,fn:n.program(3,h,c)}))||0===d)b+=d;return b+"\n  "}function h(a,c){var b,d;b="\n      ";if((d=(d=e.ifBusinessSetting)?d.call(a,"canUpdatePayment",!0,{hash:{},inverse:n.noop,fn:n.program(4,l,c)}):k.call(a,"ifBusinessSetting","canUpdatePayment",!0,{hash:{},inverse:n.noop,fn:n.program(4,l,c)}))||0===d)b+=d;return b+"\n    "}function l(a,b){var c,
d,f;c='\n        <div class="update-payment-details-alert alert alert-warning">\n          <span>Credit card expiring soon?</span>\n          <a class="update-payment-details" href="';d=a.businessId;d=(f=e.appUrl)?f.call(a,d,"/settings/subscription",{hash:{}}):k.call(a,"appUrl",d,"/settings/subscription",{hash:{}});return c+=m(d)+'">\n            Make sure you\u2019ve updated your payment details.\n          </a>\n          <button type="button" class="close" data-dismiss="alert" aria-hidden="true" >\n            <i class="fa fa-times-circle"></i>\n          </button>\n        </div>\n      '}
e=e||b.helpers;b="";var k=e.helperMissing,m=this.escapeExpression,n=this;if((a=(c=e.ifBusinessPreferenceAsBoolean)?c.call(a,"task","creditCard",!1,{hash:{},inverse:n.noop,fn:n.program(1,f,d)}):k.call(a,"ifBusinessPreferenceAsBoolean","task","creditCard",!1,{hash:{},inverse:n.noop,fn:n.program(1,f,d)}))||0===a)b+=a;return b+"\n"});return this.HandlebarsTemplates["home/update_payment_details_alert"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["invoices/activities_new"]=Handlebars.template(function(b,a,e,c,d){return'<div class="row">\n  <div class="col-xs-24">\n    <h2>Activity</h2>\n    <table id="invoiceActivitiesTable" class="table">\n      <tbody></tbody>\n    </table>\n  </div>\n</div>\n'});return this.HandlebarsTemplates["invoices/activities_new"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["invoices/activities_new_row"]=Handlebars.template(function(b,a,e,c,d){function f(a,c){return'\n    <td><i class="icon glyphicon glyphicon-star-empty"></i> Created</td>\n    <td></td>\n  '}function g(a,c){var b,d,f;b='\n      <td><i class="icon fa fa-print"></i> Printed</td>\n      <td>';d=a.date;d=(f=e.frontendTimeFormat)?f.call(a,d,{hash:{}}):B.call(a,"frontendTimeFormat",d,{hash:{}});return b+=C(d)+"</td>\n  "}
function h(a,b){var c,d;c='\n    <td><i class="icon glyphicon glyphicon-star-empty"></i> Created from quote</td>\n    <td>\n      ';d=a.linkText;if((d=e["if"].call(a,d,{hash:{},inverse:G.program(14,k,b),fn:G.program(12,l,b)}))||0===d)c+=d;return c+"\n    </td>\n  "}function l(a,c){var b,d,f,g;b="\n        ";d=a.linkText;f=a.source;f=null==f||!1===f?f:f.sourceId;d=(g=e.linkToTransaction)?g.call(a,"Quote",f,d,{hash:{}}):B.call(a,"linkToTransaction","Quote",f,d,{hash:{}});return b+=C(d)+"\n      "}function k(a,
b){return"\n        Quote now deleted\n      "}function m(a,b){var c,d;c='\n    <td><i class="icon glyphicon glyphicon-star-empty"></i> Created invoice</td>\n    <td>\n      ';d=a.linkText;if((d=e["if"].call(a,d,{hash:{},inverse:G.noop,fn:G.program(17,n,b)}))||0===d)c+=d;return c+"\n    </td>\n  "}function n(a,c){var b,d,f,g;b="\n        ";d=a.linkText;f=a.source;f=null==f||!1===f?f:f.sourceId;d=(g=e.linkToTransaction)?g.call(a,"Invoice",f,d,{hash:{}}):B.call(a,"linkToTransaction","Invoice",f,d,{hash:{}});
return b+=C(d)+"\n      "}function q(a,b){var c,d,f,g,h;c='\n    <td><i class="icon myob-icon-banking"></i> Credit applied</td>\n    <td>\n      <span>';d=a.linkText;f=a.source;f=null==f||!1===f?f:f.transactionId;g=a.source;g=null==g||!1===g?g:g.transactionType;g=null==g||!1===g?g:g.shortName;d=(h=e.linkToTransaction)?h.call(a,g,f,d,{hash:{}}):B.call(a,"linkToTransaction",g,f,d,{hash:{}});c+=C(d)+"</span>\n      Applied ";d=a.source;d=null==d||!1===d?d:d.amount;d=(h=e.moneyValueFormatWithCommaShowZero)?
h.call(a,d,{hash:{}}):B.call(a,"moneyValueFormatWithCommaShowZero",d,{hash:{}});return c+=C(d)+" credit\n    </td>\n  "}function p(a,c){var b,d,f,g,h;b='\n    <td><i class="icon myob-icon-banking"></i> Discount given</td>\n    <td>\n      <span>';d=a.linkText;f=a.source;f=null==f||!1===f?f:f.transactionId;g=a.source;g=null==g||!1===g?g:g.transactionType;g=null==g||!1===g?g:g.shortName;d=(h=e.linkToTransaction)?h.call(a,g,f,d,{hash:{}}):B.call(a,"linkToTransaction",g,f,d,{hash:{}});b+=C(d)+"</span>\n      Discounted by ";
d=a.source;d=null==d||!1===d?d:d.amount;d=(h=e.moneyValueFormatWithCommaShowZero)?h.call(a,d,{hash:{}}):B.call(a,"moneyValueFormatWithCommaShowZero",d,{hash:{}});return b+=C(d)+"\n    </td>\n  "}function t(a,b){var c,d,f,g,h;c='\n    <td><i class="icon myob-icon-banking"></i> Refunded</td>\n    <td>\n      <span>';d=a.linkText;f=a.source;f=null==f||!1===f?f:f.transactionId;g=a.source;g=null==g||!1===g?g:g.transactionType;g=null==g||!1===g?g:g.shortName;d=(h=e.linkToTransaction)?h.call(a,g,f,d,{hash:{}}):
B.call(a,"linkToTransaction",g,f,d,{hash:{}});c+=C(d)+"</span>\n      Refunded ";d=a.source;d=null==d||!1===d?d:d.amount;d=(h=e.moneyValueFormatWithCommaShowZero)?h.call(a,d,{hash:{}}):B.call(a,"moneyValueFormatWithCommaShowZero",d,{hash:{}});return c+=C(d)+"\n    </td>\n  "}function r(a,c){var b,d,f,g,h;b='\n    <td class="payment"><i class="icon payment myob-icon-banking"></i>Payment received</td>\n    <td>\n      <span>';d=a.linkText;f=a.source;f=null==f||!1===f?f:f.transactionId;g=a.source;g=
null==g||!1===g?g:g.transactionType;g=null==g||!1===g?g:g.shortName;d=(h=e.linkToTransaction)?h.call(a,g,f,d,{hash:{}}):B.call(a,"linkToTransaction",g,f,d,{hash:{}});b+=C(d)+"</span>\n      Received ";d=a.source;d=null==d||!1===d?d:d.amount;d=(h=e.moneyValueFormatWithCommaShowZero)?h.call(a,d,{hash:{}}):B.call(a,"moneyValueFormatWithCommaShowZero",d,{hash:{}});b+=C(d);d=a.source;d=null==d||!1===d?d:d.amountApplied;f=a.source;f=null==f||!1===f?f:f.amount;if((d=(h=e.notEqual)?h.call(a,f,d,{hash:{},
inverse:G.noop,fn:G.program(26,u,c)}):B.call(a,"notEqual",f,d,{hash:{},inverse:G.noop,fn:G.program(26,u,c)}))||0===d)b+=d;return b+"\n    </td>\n  "}function u(a,b){var c,d,f;c=", applied ";d=a.source;d=null==d||!1===d?d:d.amountApplied;d=(f=e.moneyValueFormatWithCommaShowZero)?f.call(a,d,{hash:{}}):B.call(a,"moneyValueFormatWithCommaShowZero",d,{hash:{}});return c+=C(d)+" to this invoice"}function v(a,b){var c,d,f;c='\n    <td><i class="icon fa fa-eye"></i> Invoice viewed</td>\n    <td>';d=a.date;
d=(f=e.frontendTimeFormat)?f.call(a,d,{hash:{}}):B.call(a,"frontendTimeFormat",d,{hash:{}});return c+=C(d)+"</td>\n  "}function z(a,c){var b,d,f;b='\n    <td><i class="icon fa fa-envelope-o"></i> Sent</td>\n    <td>\n      <span>';d=a.date;d=(f=e.frontendTimeFormat)?f.call(a,d,{hash:{}}):B.call(a,"frontendTimeFormat",d,{hash:{}});b+=C(d)+"</span>\n      ";d=a.source;d=null==d||!1===d?d:d.to;if((d=e["if"].call(a,d,{hash:{},inverse:G.noop,fn:G.program(31,y,c)}))||0===d)b+=d;b+="\n      ";d=a.source;
d=null==d||!1===d?d:d.cc;if((d=e["if"].call(a,d,{hash:{},inverse:G.noop,fn:G.program(33,D,c)}))||0===d)b+=d;b+="\n      ";d=a.source;d=null==d||!1===d?d:d.bcc;if((d=e["if"].call(a,d,{hash:{},inverse:G.noop,fn:G.program(35,F,c)}))||0===d)b+=d;return b+"\n    </td>\n  "}function y(a,b){var c,e;c="\n        to: <span>";e=a.source;e=null==e||!1===e?e:e.to;e="function"===typeof e?e():e;return c+=C(e)+"</span>\n      "}function D(a,b){var c,e;c="\n        cc: <span>";e=a.source;e=null==e||!1===e?e:e.cc;
e="function"===typeof e?e():e;return c+=C(e)+"</span>\n      "}function F(a,b){var c,e;c="\n        bcc: <span>";e=a.source;e=null==e||!1===e?e:e.bcc;e="function"===typeof e?e():e;return c+=C(e)+"</span>\n      "}function w(a,c){var b,d,f;b='\n    <td class="delivery-failed"><i class="icon delivery-failed myob-icon-failure"></i> Delivery failed</td>\n    <td>\n      <span>';d=a.date;d=(f=e.frontendTimeFormat)?f.call(a,d,{hash:{}}):B.call(a,"frontendTimeFormat",d,{hash:{}});b+=C(d)+"</span>\n      Couldn't send to ";
d=a.source;d=null==d||!1===d?d:d.destinations;d=null==d||!1===d?d:d[0];d=null==d||!1===d?d:d.email;d="function"===typeof d?d():d;return b+=C(d)+'. Check the email and <a href="" class="retry">try again</a>.\n    </td>\n  '}e=e||b.helpers;var A,B=e.helperMissing,C=this.escapeExpression,G=this;b='<tr class="';c=a.first;if((c=e["if"].call(a,c,{hash:{},inverse:G.noop,fn:G.program(1,function(a,b){return"first"},d)}))||0===c)b+=c;b+=" ";c=a.last;if((c=e["if"].call(a,c,{hash:{},inverse:G.noop,fn:G.program(3,
function(a,b){return"last"},d)}))||0===c)b+=c;b+='">\n\n  <td>\n    ';c=a.headerDate;if((c=e["if"].call(a,c,{hash:{},inverse:G.noop,fn:G.program(5,function(a,b){var c,d,f;c="\n      ";d=a.headerDate;d=(f=e.frontendDateFormat)?f.call(a,d,{hash:{}}):B.call(a,"frontendDateFormat",d,{hash:{}});return c+=C(d)+"\n    "},d)}))||0===c)b+=c;b+="\n  </td>\n\n\n  ";c=a.source;c=null==c||!1===c?c:c.type;if((c=(A=e.ifEqual)?A.call(a,c,"create",{hash:{},inverse:G.noop,fn:G.program(7,f,d)}):B.call(a,"ifEqual",c,
"create",{hash:{},inverse:G.noop,fn:G.program(7,f,d)}))||0===c)b+=c;b+="\n\n  ";c=a.source;c=null==c||!1===c?c:c.type;if((c=(A=e.ifEqual)?A.call(a,c,"printed",{hash:{},inverse:G.noop,fn:G.program(9,g,d)}):B.call(a,"ifEqual",c,"printed",{hash:{},inverse:G.noop,fn:G.program(9,g,d)}))||0===c)b+=c;b+="\n\n  ";c=a.source;c=null==c||!1===c?c:c.type;if((c=(A=e.ifEqual)?A.call(a,c,"create_from_quote",{hash:{},inverse:G.noop,fn:G.program(11,h,d)}):B.call(a,"ifEqual",c,"create_from_quote",{hash:{},inverse:G.noop,
fn:G.program(11,h,d)}))||0===c)b+=c;b+="\n\n\n  ";c=a.source;c=null==c||!1===c?c:c.type;if((c=(A=e.ifEqual)?A.call(a,c,"reference_to_invoice",{hash:{},inverse:G.noop,fn:G.program(16,m,d)}):B.call(a,"ifEqual",c,"reference_to_invoice",{hash:{},inverse:G.noop,fn:G.program(16,m,d)}))||0===c)b+=c;b+="\n\n\n  ";c=a.source;c=null==c||!1===c?c:c.type;if((c=(A=e.ifEqualOr)?A.call(a,c,"credit","credit_applied",{hash:{},inverse:G.noop,fn:G.program(19,q,d)}):B.call(a,"ifEqualOr",c,"credit","credit_applied",{hash:{},
inverse:G.noop,fn:G.program(19,q,d)}))||0===c)b+=c;b+="\n\n\n  ";c=a.source;c=null==c||!1===c?c:c.type;if((c=(A=e.ifEqual)?A.call(a,c,"discount",{hash:{},inverse:G.noop,fn:G.program(21,p,d)}):B.call(a,"ifEqual",c,"discount",{hash:{},inverse:G.noop,fn:G.program(21,p,d)}))||0===c)b+=c;b+="\n\n\n  ";c=a.source;c=null==c||!1===c?c:c.type;if((c=(A=e.ifEqual)?A.call(a,c,"refund",{hash:{},inverse:G.noop,fn:G.program(23,t,d)}):B.call(a,"ifEqual",c,"refund",{hash:{},inverse:G.noop,fn:G.program(23,t,d)}))||
0===c)b+=c;b+="\n\n\n  ";c=a.source;c=null==c||!1===c?c:c.type;if((c=(A=e.ifEqual)?A.call(a,c,"transaction",{hash:{},inverse:G.noop,fn:G.program(25,r,d)}):B.call(a,"ifEqual",c,"transaction",{hash:{},inverse:G.noop,fn:G.program(25,r,d)}))||0===c)b+=c;b+="\n\n\n  ";c=a.source;c=null==c||!1===c?c:c.type;if((c=(A=e.ifEqual)?A.call(a,c,"invoice_viewed",{hash:{},inverse:G.noop,fn:G.program(28,v,d)}):B.call(a,"ifEqual",c,"invoice_viewed",{hash:{},inverse:G.noop,fn:G.program(28,v,d)}))||0===c)b+=c;b+="\n\n\n  ";
c=a.source;c=null==c||!1===c?c:c.type;if((c=(A=e.ifEqual)?A.call(a,c,"invoice_sent",{hash:{},inverse:G.noop,fn:G.program(30,z,d)}):B.call(a,"ifEqual",c,"invoice_sent",{hash:{},inverse:G.noop,fn:G.program(30,z,d)}))||0===c)b+=c;b+="\n\n\n  ";c=a.source;c=null==c||!1===c?c:c.type;if((c=(A=e.ifEqual)?A.call(a,c,"invoice_delivery_failed",{hash:{},inverse:G.noop,fn:G.program(37,w,d)}):B.call(a,"ifEqual",c,"invoice_delivery_failed",{hash:{},inverse:G.noop,fn:G.program(37,w,d)}))||0===c)b+=c;return b+"\n\n</tr>\n"});
return this.HandlebarsTemplates["invoices/activities_new_row"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["invoices/add_contact"]=Handlebars.template(function(b,a,e,c,d){function f(a,b){var c,d,f;c="\n          ";d={inputLabel:"Suburb",inputName:"shippingAddress.suburb","data-maxlength":"50"};d=(f=e.TextInput)?f.call(a,{hash:d}):l.call(a,"TextInput",{hash:d});c+=k(d)+"\n          ";d={inputLabel:"State",inputName:"shippingAddress.state","data-maxlength":"50","data-css-class":"input-width-small"};d=(f=e.TextInput)?
f.call(a,{hash:d}):l.call(a,"TextInput",{hash:d});return c+=k(d)+"\n        "}function g(a,c){var b,d,f;b="\n          ";d={inputLabel:"City/Town",inputName:"shippingAddress.suburb","data-maxlength":"50"};d=(f=e.TextInput)?f.call(a,{hash:d}):l.call(a,"TextInput",{hash:d});b+=k(d)+"\n          ";d={inputLabel:"Region",inputName:"shippingAddress.state","data-maxlength":"50","data-css-class":"input-width-small"};d=(f=e.TextInput)?f.call(a,{hash:d}):l.call(a,"TextInput",{hash:d});return b+=k(d)+"\n        "}
e=e||b.helpers;var h,l=e.helperMissing,k=this.escapeExpression,m=e.blockHelperMissing;b='<div class="modal-dialog">\n  <div class="modal-content">\n    <div class="modal-header">\n      <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>\n      <span class="modal-title" id="invoiceContactDialogLabel">Add new ';c=a.type;c=(h=e.toLowerCase)?h.call(a,c,{hash:{}}):l.call(a,"toLowerCase",c,{hash:{}});b+=k(c)+'</span>\n    </div>\n    <div class="modal-body">\n      <div class="row">\n        <div class="col-xs-8 col-xs-offset-8">\n          <div id="businessContainer">\n            ';
c=a.individual;c=(h=e.radio)?h.call(a,"businessRadio","Business","individual",!1,c,{hash:{}}):l.call(a,"radio","businessRadio","Business","individual",!1,c,{hash:{}});b+=k(c)+'\n          </div>\n        </div>\n        <div class="col-xs-8">\n          <div id="individualContainer">\n            ';c=a.individual;c=(h=e.radio)?h.call(a,"individualRadio","Individual","individual",!0,c,{hash:{}}):l.call(a,"radio","individualRadio","Individual","individual",!0,c,{hash:{}});b+=k(c)+'\n          </div>\n        </div>\n      </div>\n\n      <div class="form-horizontal">\n        ';
c={inputLabel:"Business name",inputName:"name","data-maxlength":"110"};c=(h=e.TextInput)?h.call(a,{hash:c}):l.call(a,"TextInput",{hash:c});b+=k(c)+'\n      </div>\n\n      <div id="primaryContactDetails" class="form-horizontal">\n        <div class="form-group">\n          <h3 class="col-xs-24">Primary contact</h3>\n        </div>\n        ';c={inputLabel:"First name",inputName:"firstName","data-maxlength":"50"};c=(h=e.TextInput)?h.call(a,{hash:c}):l.call(a,"TextInput",{hash:c});b+=k(c)+"\n        ";
c={inputLabel:"Last name",inputName:"lastName","data-maxlength":"50"};c=(h=e.TextInput)?h.call(a,{hash:c}):l.call(a,"TextInput",{hash:c});b+=k(c)+"\n        ";c={inputLabel:"Email",inputName:"email","data-maxlength":"76","data-delay":"on"};c=(h=e.TextInput)?h.call(a,{hash:c}):l.call(a,"TextInput",{hash:c});b+=k(c)+'\n      </div>\n\n      <div class="form-horizontal">\n        <div class="form-group">\n          <h3 id="shippingAddressHeader" class="col-xs-24">Street address</h3>\n        </div>\n        ';
c={inputLabel:"Address",inputName:"shippingAddress.streetAddress1","data-maxlength":"50"};c=(h=e.TextInput)?h.call(a,{hash:c}):l.call(a,"TextInput",{hash:c});b+=k(c)+"\n        ";c={inputLabel:"",inputName:"shippingAddress.streetAddress2","data-maxlength":"50"};c=(h=e.TextInput)?h.call(a,{hash:c}):l.call(a,"TextInput",{hash:c});b+=k(c)+"\n\n        ";(h=e.ifAu)?c=h.call(a,{hash:{},inverse:this.program(3,g,d),fn:this.program(1,f,d)}):(c=a.ifAu,c="function"===typeof c?c():c);e.ifAu||(c=m.call(a,c,{hash:{},
inverse:this.program(3,g,d),fn:this.program(1,f,d)}));if(c||0===c)b+=c;b+="\n\n        ";c={inputLabel:"Post code",inputName:"shippingAddress.postCode","data-maxlength":"10","data-css-class":"input-width-small"};c=(h=e.TextInput)?h.call(a,{hash:c}):l.call(a,"TextInput",{hash:c});b+=k(c)+"\n        ";c={inputLabel:"Country",inputName:"shippingAddress.country","data-maxlength":"50"};c=(h=e.TextInput)?h.call(a,{hash:c}):l.call(a,"TextInput",{hash:c});return b+=k(c)+'\n      </div>\n\n      <div class="row">\n        <div class="col-xs-24">\n          <div class="pull-right">\n            <button id="saveButton" class="btn btn-primary action">Save</button>\n            <button id="cancelButton" class="btn btn-default">Cancel</button>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n'});
return this.HandlebarsTemplates["invoices/add_contact"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["invoices/add_item"]=Handlebars.template(function(b,a,e,c,d){e=e||b.helpers;var f=e.helperMissing,g=this.escapeExpression;b='<div class="modal-dialog">\n  <div class="modal-content">\n    <div class="modal-header">\n      <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>\n      <span class="modal-title" id="addItemDialogLabel">Add new item</span>\n    </div>\n    <div class="modal-body">\n      <div class="form-horizontal">\n        ';c=
{inputLabel:"Item number",inputName:"number","data-maxlength":"30"};c=(d=e.TextInput)?d.call(a,{hash:c}):f.call(a,"TextInput",{hash:c});b+=g(c)+"\n        ";c={inputLabel:"Item name",inputName:"name","data-maxlength":"30"};c=(d=e.TextInput)?d.call(a,{hash:c}):f.call(a,"TextInput",{hash:c});b+=g(c)+"\n        ";c={inputLabel:"Description",inputName:"description","data-maxlength":"255"};c=(d=e.TextInput)?d.call(a,{hash:c}):f.call(a,"TextInput",{hash:c});b+=g(c)+'\n      </div>\n\n      <div class="form-horizontal">\n        <div class="form-group">\n          <h3 class="col-xs-24">Selling details</h3>\n        </div>\n        ';
c={inputLabel:"Sell price",inputName:"salePrice","data-decimal-places":"4","data-valid-regex":"^[-\\+]?\\d{0,2},?\\d{0,3},?\\d{0,3}(\\.\\d{0,4})?$","data-invalid-regex":"[,\\.]{2}"};c=(d=e.MoneyInput)?d.call(a,{hash:c}):f.call(a,"MoneyInput",{hash:c});b+=g(c)+"\n        ";c={inputLabel:"Account to track sales",inputName:"saleAccountId","data-collection":"saleAccounts","data-labels":"number,name,type","data-label-field":"name"};c=(d=e.TypeaheadDropdown)?d.call(a,{hash:c}):f.call(a,"TypeaheadDropdown",
{hash:c});b+=g(c)+"\n        ";c={inputLabel:"Tax type",inputName:"saleGstCode","data-collection":"sellGstTypes","data-labels":"name,rateLabel:right","data-value-field":"gstCode"};c=(d=e.TypeaheadDropdown)?d.call(a,{hash:c}):f.call(a,"TypeaheadDropdown",{hash:c});b+=g(c)+'\n        <div class="form-group">\n          <label for="unitOfMeasure" class="col-xs-8 control-label">Unit of measure</label>\n          <div class="col-xs-14 form-control-wrapper">\n            <select id="unitOfMeasure" name="unitOfMeasure" class="form-control input-width-small">\n              ';
c=a.unitOfMeasure;c=(d=e.option)?d.call(a,"Qty","Qty",c,{hash:{}}):f.call(a,"option","Qty","Qty",c,{hash:{}});b+=g(c)+"\n              ";c=a.unitOfMeasure;c=(d=e.option)?d.call(a,"Hrs","Hrs",c,{hash:{}}):f.call(a,"option","Hrs","Hrs",c,{hash:{}});b+=g(c)+"\n            </select>\n          </div>\n        </div>\n\n        ";c={inputLabel:"Unit description",inputName:"unitDescription","data-maxlength":"30"};c=(d=e.TextInput)?d.call(a,{hash:c}):f.call(a,"TextInput",{hash:c});b+=g(c)+'\n      </div>\n\n      <div class="form-horizontal">\n        <div class="form-group">\n          <h3 class="col-xs-24">Buying details</h3>\n        </div>\n        ';
c={inputLabel:"Buy price",inputName:"purchasePrice","data-decimal-places":"4","data-valid-regex":"^[-\\+]?\\d{0,2},?\\d{0,3},?\\d{0,3}(\\.\\d{0,4})?$","data-invalid-regex":"[,\\.]{2}"};c=(d=e.MoneyInput)?d.call(a,{hash:c}):f.call(a,"MoneyInput",{hash:c});b+=g(c)+"\n        ";c={inputLabel:"Account to track purchases",inputName:"purchaseAccountId","data-collection":"purchaseAccounts","data-labels":"number,name,type","data-label-field":"name"};c=(d=e.TypeaheadDropdown)?d.call(a,{hash:c}):f.call(a,"TypeaheadDropdown",
{hash:c});b+=g(c)+"\n        ";c={inputLabel:"Tax type",inputName:"purchaseGstCode","data-collection":"buyGstTypes","data-labels":"name,rateLabel:right","data-value-field":"gstCode"};c=(d=e.TypeaheadDropdown)?d.call(a,{hash:c}):f.call(a,"TypeaheadDropdown",{hash:c});return b+=g(c)+'\n      </div>\n\n      <div class="row">\n        <div class="col-xs-24">\n          <div class="pull-right">\n            <button id="saveButton" class="btn btn-primary action">Save</button>\n            <button id="cancelButton" class="btn btn-default">Cancel</button>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n'});
return this.HandlebarsTemplates["invoices/add_item"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["invoices/bill"]=Handlebars.template(function(b,a,e,c,d){function f(a,b){return'disabled="disabled"'}function g(a,b){return'\n    <div class="row">\n      <div class="col-xs-24">\n        <span class="text-warning">Business is not registered for GST</span>\n      </div>\n    </div>\n  '}e=e||b.helpers;b="";var h,l=e.helperMissing,k=this.escapeExpression,m=e.blockHelperMissing;c={};c.heading=a.type;c=(h=e.includePartial)?
h.call(a,"page_heading",{hash:c}):l.call(a,"includePartial","page_heading",{hash:c});b+=k(c)+'\n\n<div id="invoiceContainer" class="';(h=e.type)?c=h.call(a,{hash:{}}):(c=a.type,c="function"===typeof c?c():c);b+=k(c)+'">\n  <div id="invoiceDetailsContainer" class="form-horizontal">\n    <div class="form-group">\n        <div class="row">\n          <div class="col-xs-24">\n            <div class="billflow_thumbnails"></div>\n          </div>\n        </div>\n        <div class="col-xs-5" id="billflow_thumbnail">\n        </div>\n        <div class="col-xs-9" id="contactContainer">\n        </div>\n        <div class="col-xs-10 bill-details">\n\n        <div class="form-group">\n          <label class="col-xs-12 control-label" for="invoiceNumber">';
c=a.type;c=(h=e.humanize)?h.call(a,c,{hash:{}}):l.call(a,"humanize",c,{hash:{}});b+=k(c)+' number</label>\n          <div class="col-xs-12 form-control-wrapper" data-id="invoiceNumber" data-widget="TextInput" data-name="invoiceNumber" data-maxlength="13"></div>\n        </div>\n\n        ';c={inputLabel:"Supplier invoice number",inputName:"supplierInvoiceNumber",labelCssClass:"col-xs-12",widgetCssClass:"col-xs-12","data-maxlength":"20"};c=(h=e.TextInput)?h.call(a,{hash:c}):l.call(a,"TextInput",{hash:c});
b+=k(c)+"\n        ";c={inputLabel:"Date of issue",inputName:"issueDate",labelCssClass:"col-xs-12",widgetCssClass:"col-xs-12"};c=(h=e.DatePicker)?h.call(a,{hash:c}):l.call(a,"DatePicker",{hash:c});b+=k(c)+"\n        ";c={inputLabel:"Due date",inputName:"dueDate",labelCssClass:"col-xs-12",widgetCssClass:"col-xs-12"};c=(h=e.DatePicker)?h.call(a,{hash:c}):l.call(a,"DatePicker",{hash:c});b+=k(c)+'\n\n        <div class="form-group">\n          <label class="col-xs-12 control-label" for="gstInclusive">Amounts are</label>\n\n          <div class="col-xs-12 form-control-wrapper">\n            <select id="gstInclusive" name="gstInclusive" class="form-control boolean" ';
(h=e.unlessRegisteredForGst)?c=h.call(a,{hash:{},inverse:this.noop,fn:this.program(1,f,d)}):(c=a.unlessRegisteredForGst,c="function"===typeof c?c():c);e.unlessRegisteredForGst||(c=m.call(a,c,{hash:{},inverse:this.noop,fn:this.program(1,f,d)}));if(c||0===c)b+=c;b+=">\n              ";c=a.gstInclusive;c=(h=e.option)?h.call(a,"GST Inclusive","true",c,{hash:{}}):l.call(a,"option","GST Inclusive","true",c,{hash:{}});b+=k(c)+"\n              ";c=a.gstInclusive;c=(h=e.option)?h.call(a,"GST Exclusive","false",
c,{hash:{}}):l.call(a,"option","GST Exclusive","false",c,{hash:{}});b+=k(c)+"\n            </select>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n  ";(h=e.unlessRegisteredForGst)?c=h.call(a,{hash:{},inverse:this.noop,fn:this.program(3,g,d)}):(c=a.unlessRegisteredForGst,c="function"===typeof c?c():c);e.unlessRegisteredForGst||(c=m.call(a,c,{hash:{},inverse:this.noop,fn:this.program(3,g,d)}));if(c||0===c)b+=c;return b+'\n  <div id="invoiceLinesContainer" class="row top-buffer">\n  </div>\n  <div id="buttonsContainer" class="top-buffer"></div>\n  <div id="activitiesContainer" class="top-buffer"></div>\n</div>\n'});
return this.HandlebarsTemplates["invoices/bill"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["invoices/bill_buttons"]=Handlebars.template(function(b,a,e,c,d){function f(a,b){return"disabled"}function g(a,b){return"action"}function h(a,b){var c;c=a.locked;return(c=e.unless.call(a,c,{hash:{},inverse:k.noop,fn:k.program(7,l,b)}))||0===c?c:""}function l(a,b){return'rel="tooltip"'}e=e||b.helpers;var k=this;b='<div class="row">\n  <div class="col-xs-14">\n    <button id="enterPayment" class=\'btn btn-default action\' data-loading-text="Saving...">Enter payment</button>\n    ';c=
a.id;if((c=e["if"].call(a,c,{hash:{},inverse:k.noop,fn:k.program(1,function(a,b){var c,d;c='\n      <button id="destroy" class="btn btn-default ';d=a.paidOrLocked;if((d=e["if"].call(a,d,{hash:{},inverse:k.noop,fn:k.program(2,f,b)}))||0===d)c+=d;c+=" ";d=a.locked;if((d=e.unless.call(a,d,{hash:{},inverse:k.noop,fn:k.program(4,g,b)}))||0===d)c+=d;c+='" ';d=a.paid;if((d=e["if"].call(a,d,{hash:{},inverse:k.noop,fn:k.program(6,h,b)}))||0===d)c+=d;return c+' data-selector="#destroyTooltip" data-loading-text="Deleting..." data-title="You cannot delete any sales invoice or return that has been partially or fully paid." data-placement="bottom">Delete</button>\n    '},
d)}))||0===c)b+=c;b+='\n    <span id="destroyTooltip"></span>\n    <button id="saveAndPrint" class=\'btn btn-default ';c=a.locked;if((c=e.unless.call(a,c,{hash:{},inverse:k.noop,fn:k.program(9,function(a,c){return"action"},d)}))||0===c)b+=c;return b+'\' data-loading-text="Saving...">Print</button>\n  </div>\n  <div class="col-xs-10">\n    <div class="pull-right">\n      <button id="cancel" class=\'btn btn-default\'>Cancel</button>\n      <div class="btn-group">\n        <button id="save" class="btn btn-primary action">Save</button>\n        <button id="saveDropdown" type="button" class="btn btn-primary dropdown-toggle action" data-toggle="dropdown">\n          <span class="caret"></span>\n          <span class="sr-only">Toggle Dropdown</span>\n        </button>\n        <ul class="dropdown-menu" role="menu">\n          <li><a id="saveAndNew" class="link">Save & add</a></li>\n          <li><a id="createInvoiceFromSource" class="link">Save & copy</a></li>\n        </ul>\n      </div>\n    </div>\n  </div>\n</div>\n'});
return this.HandlebarsTemplates["invoices/bill_buttons"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["invoices/bill_contact"]=Handlebars.template(function(b,a,e,c,d){function f(a,c){var b,d,f;b="\n  ";d={inputLabel:"Reportable",inputName:"reportable",widgetCssClass:"col-xs-8 col-xs-offset-6"};d=(f=e.Checkbox)?f.call(a,{hash:d}):h.call(a,"Checkbox",{hash:d});return b+=l(d)+"\n"}e=e||b.helpers;var g,h=e.helperMissing,l=this.escapeExpression,k=e.blockHelperMissing;b='<div class="form-group">\n  <label class="col-xs-6 control-label" for="contactId">';
(g=e.recipient)?c=g.call(a,{hash:{}}):(c=a.recipient,c="function"===typeof c?c():c);b+=l(c)+'</label>\n\n  <div class="col-xs-18" id="customerControls">\n    <div class="form-control-wrapper" data-id="contactId" data-widget="TypeaheadDropdown" data-name="contactId" data-collection="contacts" data-labels="name,firstName,lastName"\n         data-custom-action-name="addCustomer" data-custom-action-label="+ Add ';c=a.recipient;c=(g=e.toLowerCase)?g.call(a,c,{hash:{}}):h.call(a,"toLowerCase",c,{hash:{}});
b+=l(c)+'" data-prompt="Please select a ';c=a.recipient;c=(g=e.toLowerCase)?g.call(a,c,{hash:{}}):h.call(a,"toLowerCase",c,{hash:{}});b+=l(c)+'" ';c=a.paid;if((c=e["if"].call(a,c,{hash:{},inverse:this.noop,fn:this.program(1,function(a,c){return'data-disabled="disabled"'},d)}))||0===c)b+=c;b+=">\n    </div>\n  </div>\n</div>\n\n";(g=e.ifBusinessReportable)?c=g.call(a,{hash:{},inverse:this.noop,fn:this.program(3,f,d)}):(c=a.ifBusinessReportable,c="function"===typeof c?c():c);e.ifBusinessReportable||
(c=k.call(a,c,{hash:{},inverse:this.noop,fn:this.program(3,f,d)}));if(c||0===c)b+=c;b+='\n\n<div class="form-group" id="businessNumber" style="display:none">\n  <label class="col-xs-6 control-label businessNumberLabel" for="businessNumberValue"></label>\n  <div id="businessNumberValue" class="col-xs-18 value"></div>\n</div>\n\n<div class="form-group">\n  <div id="addressLabel" class="col-xs-6 control-label">Billing Address</div>\n  <div class="col-xs-18" id="address">';c=a.address;c=(g=e.simpleFormat)?
g.call(a,c,{hash:{}}):h.call(a,"simpleFormat",c,{hash:{}});return b+=l(c)+"</div>\n</div>\n"});return this.HandlebarsTemplates["invoices/bill_contact"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["invoices/bill_footer"]=Handlebars.template(function(b,a,e,c,d){e=e||b.helpers;var f=e.helperMissing,g=this.escapeExpression;b='<tr class="totalLine">\n  <td colspan="5"></td>\n  <td class="total">';c=a.total;c=(d=e.moneyValueFormatWithoutDollarSignShowZero)?d.call(a,c,{hash:{}}):f.call(a,"moneyValueFormatWithoutDollarSignShowZero",c,{hash:{}});b+=g(c)+'</td>\n  <td class="total">';c=a.dueTotal;c=(d=e.moneyValueFormatWithoutDollarSignShowZero)?
d.call(a,c,{hash:{}}):f.call(a,"moneyValueFormatWithoutDollarSignShowZero",c,{hash:{}});return b+=g(c)+'</td>\n  <td colspan="2"></td>\n</tr>\n'});return this.HandlebarsTemplates["invoices/bill_footer"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["invoices/bill_grid"]=Handlebars.template(function(b,a,e,c,d){e=e||b.helpers;d=e.helperMissing;var f=this.escapeExpression;b='<div class="col-xs-24">\n  <table id="invoiceLinesTable" class="table table-bordered table-condensed">\n    <thead>\n    <tr>\n      <th>&nbsp;</th>\n      <th>Item</th>\n      <th>Description</th>\n      <th>Allocate to</th>\n      <th>Qty</th>\n      <th class="text-right">Unit price</th>\n      <th>Tax type</th>\n      <th class="text-right">Amount</th>\n      <th>&nbsp;</th>\n    </tr>\n    </thead>\n    <tbody id="invoiceLines"></tbody>\n    <tfoot>\n    <tr>\n      <td id="invoiceNotesContainer" colspan="5" rowspan="6">\n        <div class="row">\n          <div class="col-xs-16">\n            <label class="control-label" for="notes">Notes to ';c=
a.recipient;c=(e=e.toLowerCase)?e.call(a,c,{hash:{}}):d.call(a,"toLowerCase",c,{hash:{}});return b+=f(c)+'</label>\n            <label class="checkbox pull-right">\n              <input id="rememberNote" type="checkbox"/> Remember this?\n            </label>\n          </div>\n        </div>\n        <div class="row">\n          <div class="col-xs-16" data-id="notes" data-widget="AutosizeTextarea" data-name="notes" data-maxlength="2000"\n               data-autosize="false" data-rows="5" data-cols="200">\n          </div>\n        </div>\n      </td>\n      <td class="subTotalLabel" colspan="2"><label>Subtotal</label></td>\n      <td class="subTotalAmount" id="subtotal"></td>\n      <td class="subTotalDelete">&nbsp;</td>\n    </tr>\n    <tr>\n      <td class="subTotalLabel" colspan="2"><label>GST</label></td>\n      <td class="subTotalAmount" id="gst"></td>\n      <td class="subTotalDelete">&nbsp;</td>\n    </tr>\n    <tr>\n      <td class="subTotalLabel total" colspan="2"><label>Total</label></td>\n      <td class="subTotalAmount total" id="total"></td>\n      <td class="subTotalDelete total">&nbsp;</td>\n    </tr>\n    <tr>\n      <td class="last error-message" id="totalError" colspan="4"></td>\n    </tr>\n    <tr>\n      <td class="subTotalLabel" colspan="2"><label>Amount paid</label></td>\n      <td class="subTotalAmount" id="amountPaid"></td>\n      <td class="subTotalDelete">&nbsp;</td>\n    </tr>\n    <tr>\n      <td class="subTotalLabel last total" colspan="2"><label>Amount due</label></td>\n      <td class="subTotalAmount last total" id="amountDue"></td>\n      <td class="subTotalDelete last total">&nbsp;</td>\n    </tr>\n    </tfoot>\n  </table>\n</div>\n'});
return this.HandlebarsTemplates["invoices/bill_grid"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["invoices/bill_header"]=Handlebars.template(function(b,a,e,c,d){return'<tr>\n  <th data-field="number" class="desc">Bill No.<i class="fa fa-caret-down"></i></th>\n  <th data-field="supplierInvoiceNumber">Invoice No.</th>\n  <th data-field="contactName">Supplier</th>\n  <th data-field="issueDate">Received</th>\n  <th data-field="dueDate">Due</th>\n  <th data-field="total" class="text-right">Total</th>\n  <th data-field="amountDue" class="text-right">Due</th>\n  <th data-field="status">Status</th>\n  <th data-field="billflow-attachment"></th>\n</tr>\n'});return this.HandlebarsTemplates["invoices/bill_header"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["invoices/bill_row"]=Handlebars.template(function(b,a,e,c,d){function f(a,c){return'<span class="row-icon billflow-attachment"></span>'}e=e||b.helpers;var g,h,l=e.helperMissing,k=this.escapeExpression;b='<td><a href="';c=a.id;g=a.type;c=(h=e.transactionUrl)?h.call(a,g,c,{hash:{}}):l.call(a,"transactionUrl",g,c,{hash:{}});b+=k(c)+'">';(h=e.number)?c=h.call(a,{hash:{}}):(c=a.number,c="function"===typeof c?c():
c);b+=k(c)+"</a></td>\n<td>";c=a.supplierInvoiceNumber;c=(h=e.supplierInvoiceNumberFormatTruncated)?h.call(a,c,{hash:{}}):l.call(a,"supplierInvoiceNumberFormatTruncated",c,{hash:{}});b+=k(c)+'</td>\n<td><a href="';c=a.id;g=a.type;c=(h=e.transactionUrl)?h.call(a,g,c,{hash:{}}):l.call(a,"transactionUrl",g,c,{hash:{}});b+=k(c)+'">';(h=e.contactName)?c=h.call(a,{hash:{}}):(c=a.contactName,c="function"===typeof c?c():c);b+=k(c)+"</a></td>\n<td>";c=a.issueDate;c=(h=e.frontendDateFormat)?h.call(a,c,{hash:{}}):
l.call(a,"frontendDateFormat",c,{hash:{}});b+=k(c)+"</td>\n<td>";c=a.dueDate;c=(h=e.frontendDateFormat)?h.call(a,c,{hash:{}}):l.call(a,"frontendDateFormat",c,{hash:{}});b+=k(c)+'</td>\n<td class="text-right">';c=a.total;c=(h=e.moneyValueFormatWithoutDollarSignShowZero)?h.call(a,c,{hash:{}}):l.call(a,"moneyValueFormatWithoutDollarSignShowZero",c,{hash:{}});b+=k(c)+'</td>\n<td class="text-right">';c=a.amountDue;c=(h=e.moneyValueFormatWithoutDollarSignShowZero)?h.call(a,c,{hash:{}}):l.call(a,"moneyValueFormatWithoutDollarSignShowZero",
c,{hash:{}});b+=k(c)+'</td>\n<td class="status ';c=a.status;c=(h=e.toLowerCase)?h.call(a,c,{hash:{}}):l.call(a,"toLowerCase",c,{hash:{}});b+=k(c)+'">';c=a.status;c=(h=e.humanize)?h.call(a,c,{hash:{}}):l.call(a,"humanize",c,{hash:{}});b+=k(c)+'</td>\n<td class="">';c=a.documentId;if((c=(h=e.unlessBlank)?h.call(a,c,{hash:{},inverse:this.noop,fn:this.program(1,f,d)}):l.call(a,"unlessBlank",c,{hash:{},inverse:this.noop,fn:this.program(1,f,d)}))||0===c)b+=c;return b+"</td>\n"});return this.HandlebarsTemplates["invoices/bill_row"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["invoices/bills"]=Handlebars.template(function(b,a,e,c,d){e=e||b.helpers;var f=this.escapeExpression,g=e.helperMissing;b='<div class="loadingSpinner"></div>\n\n<div id="page">\n\n    <div id="pageContentHeader" class="row">\n      <div id="invoiceOrBillHeader" class="col-xs-13 clearfix">\n        <h1>Bills</h1>\n        <div id="entitlementUsage"></div>\n      </div>\n      <div class="col-xs-11 primary-button-group">\n        <button id="createExpenseButton" class=\'btn btn-primary action\' >Create ';
(d=e.modelName)?c=d.call(a,{hash:{}}):(c=a.modelName,c="function"===typeof c?c():c);b+=f(c)+'</button>\n        <button id="createSupplierReturnButton" class=\'btn btn-default action\'>Create return</button>\n      </div>\n    </div>\n    <hr/>\n    <div id="listContainer">\n\n        <div id="billflow_thumbnail"></div>\n\n        <div id="toolbar" class="form-horizontal">\n            <div class="form-group">\n                <div class="col-xs-6 col-xs-push-10">\n                    <div class="input-width-large">\n                        <select class="form-control" id="filter" name="filter">\n                            ';
c=a.filter;c=(d=e.option)?d.call(a,"All","ALL",c,{hash:{}}):g.call(a,"option","All","ALL",c,{hash:{}});b+=f(c)+"\n                            ";c=a.filter;c=(d=e.option)?d.call(a,"Closed","CLOSED",c,{hash:{}}):g.call(a,"option","Closed","CLOSED",c,{hash:{}});b+=f(c)+"\n                            ";c=a.filter;c=(d=e.option)?d.call(a,"Open","OPEN",c,{hash:{}}):g.call(a,"option","Open","OPEN",c,{hash:{}});b+=f(c)+"\n                            ";c=a.filter;c=(d=e.option)?d.call(a,"Returns","RETURNS",
c,{hash:{}}):g.call(a,"option","Returns","RETURNS",c,{hash:{}});b+=f(c)+'\n                        </select>\n                    </div>\n                </div>\n                <div class="col-xs-8 col-xs-push-10">\n                    <div class="row">\n                        <label class="control-label col-xs-6" for="search">Search:</label>\n                        <div class="col-xs-18">\n                            <input class="form-control" type="text" name="search" id="search" value="';(d=
e.search)?c=d.call(a,{hash:{}}):(c=a.search,c="function"===typeof c?c():c);return b+=f(c)+'">\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <div id="table" class="bill-list-header"></div>\n        <div id="pagination" class="pagination"></div>\n    </div>\n</div>\n'});return this.HandlebarsTemplates["invoices/bills"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["invoices/coa_setting_modal"]=Handlebars.template(function(b,a,e,c,d){e=e||b.helpers;d=e.helperMissing;var f=this.escapeExpression;b='<div class="modal-dialog" id="coa_setting_modal">\n    <div class="modal-content">\n        <div class="modal-header">\n            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>\n            <span class="modal-title">One more thing...</span>\n        </div>\n        <div class="modal-body">\n            <p>\n                You\'re almost done! We just need you to pick the bank account for receiving online payments.\n                For a successful reconciliation, this account must match to the bank account you chose when\n                setting up your online payments.\n            </p>\n\n            <div class="row">\n                <div class="col-xs-14">\n                    ';
c={inputName:"account",labelCssClass:"",widgetCssClass:"","data-collection":"accounts","data-group-by":"type","data-name-field":"number,name","data-value-field":"id","data-sorted":"true","data-default-value":"","data-default-name":"Select account"};c=(e=e.SelectGrouped)?e.call(a,{hash:c}):d.call(a,"SelectGrouped",{hash:c});return b+=f(c)+'\n                </div>\n            </div>\n\n            <p>\n                You\'ll be able to update this account from the invoice and quote setting page.\n            </p>\n\n            <hr class="button-separator" />\n            <div class="row">\n                <div class="col-xs-23">\n                    <div class="pull-right">\n                        <div>\n                            <button id="cancelButton" class="btn btn-default">Cancel</button>\n                            <button id="saveCoaSettingButton" class="btn btn-primary action">Select bank account</button>\n                        </div>\n                        <div class="smallLoadingSpinnerWithStatus">\n                            <div class="smallLoadingSpinner"></div><span id="emailStatus">Sending message...</span>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n'});
return this.HandlebarsTemplates["invoices/coa_setting_modal"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["invoices/entitlement_dialog"]=Handlebars.template(function(b,a,e,c,d){function f(a,c){var b,d;b="\n                    than ";(d=e.limits)?d=d.call(a,{hash:{}}):(d=a.limits,d="function"===typeof d?d():d);return b+=g(d)+"\n                  "}e=e||b.helpers;var g=this.escapeExpression,h=this;b='<div class="modal-dialog">\n    <div class="modal-content">\n        <div class="modal-header">\n            <button type="button" class="close" data-dismiss="modal" aria-hidden="Close">\n                <span class="myob-icon-close"></span>\n            </button>\n            <span class="modal-title" id="modal-title-entitlement-dialog">Need to ';(c=
e.actionText)?c=c.call(a,{hash:{}}):(c=a.actionText,c="function"===typeof c?c():c);b+=g(c)+" more ";(c=e.type)?c=c.call(a,{hash:{}}):(c=a.type,c="function"===typeof c?c():c);b+=g(c)+'s?</span>\n        </div>\n        <div class="modal-body">\n            <div>\n              ';c=a.reachLimits;if((c=e["if"].call(a,c,{hash:{},inverse:h.program(4,function(a,c){var b,d;b="\n                <p>Don't worry! It's easy to upgrade your current subscription to ";(d=e.actionText)?d=d.call(a,{hash:{}}):(d=a.actionText,
d="function"===typeof d?d():d);b+=g(d)+" more than ";(d=e.limits)?d=d.call(a,{hash:{}}):(d=a.limits,d="function"===typeof d?d():d);b+=g(d)+" ";(d=e.type)?d=d.call(a,{hash:{}}):(d=a.type,d="function"===typeof d?d():d);return b+=g(d)+"s per month.</p>\n              "},d),fn:h.program(1,function(a,b){var c,d;c="\n                <p>It looks like you've reached your monthly limit of ";(d=e.limits)?d=d.call(a,{hash:{}}):(d=a.limits,d="function"===typeof d?d():d);c+=g(d)+" ";(d=e.type)?d=d.call(a,{hash:{}}):
(d=a.type,d="function"===typeof d?d():d);c+=g(d)+"s.</p>\n                <p>But don't worry! If you need to ";(d=e.actionText)?d=d.call(a,{hash:{}}):(d=a.actionText,d="function"===typeof d?d():d);c+=g(d)+" more\n                  ";d=a.limits;if((d=e["if"].call(a,d,{hash:{},inverse:h.noop,fn:h.program(2,f,b)}))||0===d)c+=d;c+="\n                  ";(d=e.type)?d=d.call(a,{hash:{}}):(d=a.type,d="function"===typeof d?d():d);return c+=g(d)+"s a\n                month it's easy to upgrade your current subscription.</p>\n              "},
d)}))||0===c)b+=c;return b+'\n              <p> Click <strong>Upgrade now</strong> below to find out how.</p>\n            </div>\n        </div>\n        <div class="modal-footer">\n            <div class="primary-button-group">\n              <button id="cancelButton" class="btn btn-default">Cancel</button>\n              <button id="upgradeButton" class="btn btn-primary">Upgrade now</button>\n            </div>\n          </div>\n        </div>\n    </div>\n</div>\n'});return this.HandlebarsTemplates["invoices/entitlement_dialog"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["invoices/entitlement_usage"]=Handlebars.template(function(b,a,e,c,d){e=e||b.helpers;c=this.escapeExpression;b='<span class="label boxed ';(d=e.labelColor)?d=d.call(a,{hash:{}}):(d=a.labelColor,d="function"===typeof d?d():d);b+=c(d)+'">\n  <span id="remainingNumber">';(d=e.remainingNumber)?d=d.call(a,{hash:{}}):(d=a.remainingNumber,d="function"===typeof d?d():d);b+=c(d)+'</span>\n  <span id="remainingNumberText"> ';
(d=e.remainingText)?d=d.call(a,{hash:{}}):(d=a.remainingText,d="function"===typeof d?d():d);return b+=c(d)+'</span>\n</span>\n<span id="needMore"><a>Need more?</a></span>\n\n'});return this.HandlebarsTemplates["invoices/entitlement_usage"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["invoices/history"]=Handlebars.template(function(b,a,e,c,d){e=e||b.helpers;var f=e.helperMissing,g=this.escapeExpression;b='<div class="loadingSpinner"></div>\n\n<div id="page">\n\n  ';c={};c.heading=a.heading;c.headingSuffix=" history";c=(d=e.includePartial)?d.call(a,"page_heading",{hash:c}):f.call(a,"includePartial","page_heading",{hash:c});b+=g(c)+'\n\n  <div id="itemListContainer">\n    <div id="toolbar" class="form-horizontal">\n      <div class="form-group">\n        <div class="col-xs-8">\n          ';
c={inputName:"contactId","data-collection":"contacts","data-labels":"name","data-label-field":"name"};c=(d=e.TypeaheadDropdown)?d.call(a,{hash:c}):f.call(a,"TypeaheadDropdown",{hash:c});b+=g(c)+'\n        </div>\n        <div class="col-xs-8">\n          ';c={inputLabel:"Date range: ",inputName:"dateRange","data-collection":"dateRanges","data-name-field":"name","data-value-field":"id","data-default-name":"All dates","data-default-value":"all"};c=(d=e.Select)?d.call(a,{hash:c}):f.call(a,"Select",{hash:c});
b+=g(c)+'\n        </div>\n        <div class="col-xs-8">\n          ';c={inputLabel:"Search:",inputName:"search"};c=(d=e.TextInput)?d.call(a,{hash:c}):f.call(a,"TextInput",{hash:c});return b+=g(c)+'\n        </div>\n      </div>\n    </div>\n    <div id="table"></div>\n    <div id="pagination" class="pagination"></div>\n  </div>\n</div>\n'});return this.HandlebarsTemplates["invoices/history"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["invoices/history_footer"]=Handlebars.template(function(b,a,e,c,d){function f(a,c){return"\n    <td></td>\n  "}e=e||b.helpers;var g,h=e.helperMissing,l=this.escapeExpression;b='<tr class="totalLine">\n  <td colspan="4">\n  </td>\n  <td class="total">';c=a.total;c=(g=e.moneyValueFormatWithoutDollarSignShowZero)?g.call(a,c,2,{hash:{}}):h.call(a,"moneyValueFormatWithoutDollarSignShowZero",c,2,{hash:{}});b+=l(c)+
'</td>\n  <td class="total">';c=a.paymentTotal;c=(g=e.moneyValueFormatWithoutDollarSignShowZero)?g.call(a,c,2,{hash:{}}):h.call(a,"moneyValueFormatWithoutDollarSignShowZero",c,2,{hash:{}});b+=l(c)+"</td>\n  <td></td>\n  ";c=a.historyType;if((c=(g=e.ifEqual)?g.call(a,c,"bill",{hash:{},inverse:this.noop,fn:this.program(1,f,d)}):h.call(a,"ifEqual",c,"bill",{hash:{},inverse:this.noop,fn:this.program(1,f,d)}))||0===c)b+=c;return b+"\n</tr>\n"});return this.HandlebarsTemplates["invoices/history_footer"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["invoices/history_header"]=Handlebars.template(function(b,a,e,c,d){function f(a,c){return"Supplier"}function g(a,c){return"Customer"}function h(a,c){return"Bill"}function l(a,c){return"Sale"}function k(a,c){return'\n    <th data-field="billflow-attachment"></th>\n  '}e=e||b.helpers;var m,n=e.helperMissing;b='<tr>\n  <th data-field="reference">Reference</th>\n  <th data-field="contactName">';c=a.historyType;
if((c=(m=e.ifEqual)?m.call(a,c,"bill",{hash:{},inverse:this.program(3,g,d),fn:this.program(1,f,d)}):n.call(a,"ifEqual",c,"bill",{hash:{},inverse:this.program(3,g,d),fn:this.program(1,f,d)}))||0===c)b+=c;b+='</th>\n  <th data-field="transactionDate" class="asc">Date<i class="fa fa-caret-up"></i></th>\n  <th data-field="type">Type</th>\n  <th data-field="amount" class="text-right">';c=a.historyType;if((c=(m=e.ifEqual)?m.call(a,c,"bill",{hash:{},inverse:this.program(7,l,d),fn:this.program(5,h,d)}):n.call(a,
"ifEqual",c,"bill",{hash:{},inverse:this.program(7,l,d),fn:this.program(5,h,d)}))||0===c)b+=c;b+='</th>\n  <th data-field="paymentAmount" class="text-right">Payment</th>\n  <th data-field="status">Status</th>\n  ';c=a.historyType;if((c=(m=e.ifEqual)?m.call(a,c,"bill",{hash:{},inverse:this.noop,fn:this.program(9,k,d)}):n.call(a,"ifEqual",c,"bill",{hash:{},inverse:this.noop,fn:this.program(9,k,d)}))||0===c)b+=c;return b+"\n</tr>\n"});return this.HandlebarsTemplates["invoices/history_header"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["invoices/history_row"]=Handlebars.template(function(b,a,e,c,d){function f(a,c){var b,d,f,g,h;b='\n    <a href="';d=a.transactionDate;f=a.id;g=a.type;d=(h=e.transactionUrl)?h.call(a,g,f,0,d,{hash:{}}):m.call(a,"transactionUrl",g,f,0,d,{hash:{}});b+=n(d)+'">';(h=e.reference)?d=h.call(a,{hash:{}}):(d=a.reference,d="function"===typeof d?d():d);return b+=n(d)+"</a>\n  "}function g(a,c){var b,d;b="\n    ";(d=e.reference)?
d=d.call(a,{hash:{}}):(d=a.reference,d="function"===typeof d?d():d);return b+=n(d)+"\n  "}function h(a,c){var b,d,f;b="\n  <td>";d=a.documentId;if((d=(f=e.unlessBlank)?f.call(a,d,{hash:{},inverse:q.noop,fn:q.program(6,l,c)}):m.call(a,"unlessBlank",d,{hash:{},inverse:q.noop,fn:q.program(6,l,c)}))||0===d)b+=d;return b+"</td>\n"}function l(a,c){return'<span class="row-icon billflow-attachment"></span>'}e=e||b.helpers;var k,m=e.helperMissing,n=this.escapeExpression,q=this;b="<td>\n  ";c=a.type;if((c=
(k=e.ifDrillableTransaction)?k.call(a,c,{hash:{},inverse:q.program(3,g,d),fn:q.program(1,f,d)}):m.call(a,"ifDrillableTransaction",c,{hash:{},inverse:q.program(3,g,d),fn:q.program(1,f,d)}))||0===c)b+=c;b+="\n</td>\n\n<td>";(k=e.contactName)?c=k.call(a,{hash:{}}):(c=a.contactName,c="function"===typeof c?c():c);b+=n(c)+"</td>\n<td>";c=a.transactionDate;c=(k=e.frontendDateFormat)?k.call(a,c,{hash:{}}):m.call(a,"frontendDateFormat",c,{hash:{}});b+=n(c)+"</td>\n<td>";(k=e.formattedType)?c=k.call(a,{hash:{}}):
(c=a.formattedType,c="function"===typeof c?c():c);b+=n(c)+'</td>\n<td class="text-right">';c=a.amount;c=(k=e.moneyValueFormatWithoutDollarSign)?k.call(a,c,{hash:{}}):m.call(a,"moneyValueFormatWithoutDollarSign",c,{hash:{}});b+=n(c)+'</td>\n<td class="text-right">';c=a.paymentAmount;c=(k=e.moneyValueFormatWithoutDollarSign)?k.call(a,c,{hash:{}}):m.call(a,"moneyValueFormatWithoutDollarSign",c,{hash:{}});b+=n(c)+'</td>\n<td class="status ';c=a.status;c=(k=e.toLowerCase)?k.call(a,c,{hash:{}}):m.call(a,
"toLowerCase",c,{hash:{}});b+=n(c)+'">';c=a.status;c=(k=e.humanize)?k.call(a,c,{hash:{}}):m.call(a,"humanize",c,{hash:{}});b+=n(c)+"</td>\n";c=a.historyType;if((c=(k=e.ifEqual)?k.call(a,c,"bill",{hash:{},inverse:q.noop,fn:q.program(5,h,d)}):m.call(a,"ifEqual",c,"bill",{hash:{},inverse:q.noop,fn:q.program(5,h,d)}))||0===c)b+=c;return b+"\n"});return this.HandlebarsTemplates["invoices/history_row"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["invoices/invoice"]=Handlebars.template(function(b,a,e,c,d){function f(a,c){var b,d,f;b='\n                  <div id="invoicePaymentTermsContainer" class="form-group">\n                      <div class="col-xs-5">\n                        ';d={inputLabel:"Due",inputName:"paymentTermDays","data-maxlength":"3","data-valid-regex":"^\\d{0,3}$"};d=(f=e.RegexInput)?f.call(a,{hash:d}):n.call(a,"RegexInput",{hash:d});
b+=q(d)+'\n                      </div>\n                      <div class="col-xs-2 control-label">\n                          <p id="payment-term-days-text">days</p>\n                      </div>\n                      <div class="col-xs-9">\n                        ';d={inputLabel:"",inputName:"paymentTermType",labelCssClass:"",widgetCssClass:"col-xs-24","data-collection":"paymentTermTypes","data-name-field":"name","data-value-field":"value"};d=(f=e.Select)?f.call(a,{hash:d}):n.call(a,"Select",
{hash:d});b+=q(d)+'\n                      </div>\n                      <div class="col-xs-8">\n                        ';d={inputName:"dueDate",labelCssClass:"",widgetCssClass:"col-xs-24"};d=(f=e.DatePicker)?f.call(a,{hash:d}):n.call(a,"DatePicker",{hash:d});return b+=q(d)+"\n                      </div>\n                  </div>\n              "}function g(a,b){var c,d,f;c="\n                ";d={inputLabel:"Due date",inputName:"dueDate",inputId:"dueDate",labelCssClass:"col-xs-16",widgetCssClass:"col-xs-8"};
d=(f=e.DatePicker)?f.call(a,{hash:d}):n.call(a,"DatePicker",{hash:d});return c+=q(d)+"\n              "}function h(a,b){return'disabled="disabled"'}function l(a,b){return'\n                  <div id="online-payments-container"></div>\n                '}function k(a,b){return'\n      <div class="row">\n          <div class="col-xs-24">\n              <span class="text-warning">Business is not registered for GST</span>\n          </div>\n      </div>\n  '}e=e||b.helpers;var m,n=e.helperMissing,q=this.escapeExpression,
p=e.blockHelperMissing;b='<br/>\n<div id="online-payments-banner"></div>\n<div id="online-invoicing"></div>\n<br/>\n\n';c={};c.heading=a.type;c=(m=e.includePartial)?m.call(a,"page_heading",{hash:c}):n.call(a,"includePartial","page_heading",{hash:c});b+=q(c)+'\n\n<div id="invoiceContainer" class="';(m=e.type)?c=m.call(a,{hash:{}}):(c=a.type,c="function"===typeof c?c():c);b+=q(c)+'">\n    <div id="invoiceDetailsContainer" class="form-horizontal">\n        <div class="form-group">\n            <div class="col-xs-10" id="contactContainer"></div>\n            <div class="col-xs-14">\n\n                <div class="form-group">\n                    <label class="col-xs-16 control-label" for="invoiceNumber">';
c=a.type;c=(m=e.humanize)?m.call(a,c,{hash:{}}):n.call(a,"humanize",c,{hash:{}});b+=q(c)+' number</label>\n\n                    <div class="col-xs-8 form-control-wrapper" data-id="invoiceNumber" data-widget="TextInput" data-name="invoiceNumber"\n                         data-maxlength="13"></div>\n                </div>\n\n              ';c={inputLabel:"Purchase order",inputName:"purchaseOrderNumber",labelCssClass:"col-xs-16",widgetCssClass:"col-xs-8","data-maxlength":"15"};c=(m=e.TextInput)?m.call(a,
{hash:c}):n.call(a,"TextInput",{hash:c});b+=q(c)+"\n              ";c={inputLabel:"Date of issue",inputName:"issueDate",labelCssClass:"col-xs-16",widgetCssClass:"col-xs-8"};c=(m=e.DatePicker)?m.call(a,{hash:c}):n.call(a,"DatePicker",{hash:c});b+=q(c)+"\n\n              ";c=a.id;if((c=(m=e.ifBlank)?m.call(a,c,{hash:{},inverse:this.program(3,g,d),fn:this.program(1,f,d)}):n.call(a,"ifBlank",c,{hash:{},inverse:this.program(3,g,d),fn:this.program(1,f,d)}))||0===c)b+=c;b+='\n\n                <div class="form-group">\n                    <label class="col-xs-16 control-label" for="gstInclusive">Amounts are</label>\n\n                    <div class="col-xs-8">\n                        <select id="gstInclusive" name="gstInclusive" class="form-control boolean"\n                                ';
(m=e.unlessRegisteredForGst)?c=m.call(a,{hash:{},inverse:this.noop,fn:this.program(5,h,d)}):(c=a.unlessRegisteredForGst,c="function"===typeof c?c():c);e.unlessRegisteredForGst||(c=p.call(a,c,{hash:{},inverse:this.noop,fn:this.program(5,h,d)}));if(c||0===c)b+=c;b+=">\n                          ";c=a.gstInclusive;c=(m=e.option)?m.call(a,"GST Inclusive","true",c,{hash:{}}):n.call(a,"option","GST Inclusive","true",c,{hash:{}});b+=q(c)+"\n                          ";c=a.gstInclusive;c=(m=e.option)?m.call(a,
"GST Exclusive","false",c,{hash:{}}):n.call(a,"option","GST Exclusive","false",c,{hash:{}});b+=q(c)+"\n                        </select>\n                    </div>\n                </div>\n\n                ";if((c=(m=e.ifFeature)?m.call(a,"ONLINE_PAYMENTS",{hash:{},inverse:this.noop,fn:this.program(7,l,d)}):n.call(a,"ifFeature","ONLINE_PAYMENTS",{hash:{},inverse:this.noop,fn:this.program(7,l,d)}))||0===c)b+=c;b+="\n\n            </div>\n        </div>\n    </div>\n  ";(m=e.unlessRegisteredForGst)?
c=m.call(a,{hash:{},inverse:this.noop,fn:this.program(9,k,d)}):(c=a.unlessRegisteredForGst,c="function"===typeof c?c():c);e.unlessRegisteredForGst||(c=p.call(a,c,{hash:{},inverse:this.noop,fn:this.program(9,k,d)}));if(c||0===c)b+=c;return b+'\n    <div id="invoiceLinesContainer" class="row top-buffer">\n    </div>\n    <div id="buttonsContainer" class="top-buffer"></div>\n    <div id="activitiesContainer" class="top-buffer"></div>\n</div>\n'});return this.HandlebarsTemplates["invoices/invoice"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["invoices/invoice_buttons"]=Handlebars.template(function(b,a,e,c,d){function f(a,b){return"disabled"}function g(a,b){return"action"}function h(a,b){var c;c=a.locked;return(c=e.unless.call(a,c,{hash:{},inverse:k.noop,fn:k.program(7,l,b)}))||0===c?c:""}function l(a,b){return'rel="tooltip"'}e=e||b.helpers;var k=this;b='<div class="row">\n  <div class="col-xs-14">\n    <button id="enterPayment" class=\'btn btn-default action\' data-loading-text="Saving...">Enter payment</button>\n    ';
c=a.id;if((c=e["if"].call(a,c,{hash:{},inverse:k.noop,fn:k.program(1,function(a,b){var c,d;c='\n      <button id="destroy" class="btn btn-default ';d=a.paidOrLocked;if((d=e["if"].call(a,d,{hash:{},inverse:k.noop,fn:k.program(2,f,b)}))||0===d)c+=d;c+=" ";d=a.locked;if((d=e.unless.call(a,d,{hash:{},inverse:k.noop,fn:k.program(4,g,b)}))||0===d)c+=d;c+='" ';d=a.paid;if((d=e["if"].call(a,d,{hash:{},inverse:k.noop,fn:k.program(6,h,b)}))||0===d)c+=d;return c+' data-selector="#destroyTooltip" data-loading-text="Deleting..." data-title="You cannot delete any sales invoice or return that has been partially or fully paid." data-placement="bottom">Delete</button>\n    '},
d)}))||0===c)b+=c;b+='\n    <span id="destroyTooltip"></span>\n    <button id="email" class=\'btn btn-primary ';c=a.locked;if((c=e.unless.call(a,c,{hash:{},inverse:k.noop,fn:k.program(9,function(a,c){return"action"},d)}))||0===c)b+=c;b+='\' data-loading-text="Saving...">';c=a.sent;if((c=e["if"].call(a,c,{hash:{},inverse:k.program(13,function(a,c){return"Email"},d),fn:k.program(11,function(a,c){return"Resend to customer"},d)}))||0===c)b+=c;b+='</button>\n    <button id="saveAndPrint" class=\'btn btn-default ';
c=a.locked;if((c=e.unless.call(a,c,{hash:{},inverse:k.noop,fn:k.program(15,function(a,c){return"action"},d)}))||0===c)b+=c;return b+'\' data-loading-text="Saving...">Print</button>\n  </div>\n  <div class="col-xs-10">\n    <div class="pull-right">\n      <button id="cancel" class=\'btn btn-default\'>Cancel</button>\n      <div class="btn-group">\n        <button id="save" class="btn btn-primary action">Save</button>\n        <button id="saveDropdown" type="button" class="btn btn-primary dropdown-toggle action" data-toggle="dropdown">\n          <span class="caret"></span>\n          <span class="sr-only">Toggle Dropdown</span>\n        </button>\n        <ul class="dropdown-menu" role="menu">\n          <li><a id="saveAndNew" class="link">Save & add</a></li>\n          <li><a id="createInvoiceFromSource" class="link">Save & copy</a></li>\n        </ul>\n      </div>\n    </div>\n  </div>\n</div>\n'});
return this.HandlebarsTemplates["invoices/invoice_buttons"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["invoices/invoice_contact"]=Handlebars.template(function(b,a,e,c,d){e=e||b.helpers;var f,g=this.escapeExpression,h=e.helperMissing;b='<div class="form-group">\n  <label class="col-xs-6 control-label" for="contactId">';(f=e.recipient)?c=f.call(a,{hash:{}}):(c=a.recipient,c="function"===typeof c?c():c);b+=g(c)+'</label>\n\n  <div class="col-xs-18" id="customerControls">\n    <div class="form-control-wrapper" data-id="contactId" data-widget="TypeaheadDropdown" data-name="contactId" data-collection="contacts" data-labels="name,firstName,lastName"\n         data-custom-action-name="addCustomer" data-custom-action-label="+ Add ';c=
a.recipient;c=(f=e.toLowerCase)?f.call(a,c,{hash:{}}):h.call(a,"toLowerCase",c,{hash:{}});b+=g(c)+'" data-prompt="Please select a ';c=a.recipient;c=(f=e.toLowerCase)?f.call(a,c,{hash:{}}):h.call(a,"toLowerCase",c,{hash:{}});b+=g(c)+'" ';c=a.paid;if((c=e["if"].call(a,c,{hash:{},inverse:this.noop,fn:this.program(1,function(a,c){return'data-disabled="disabled"'},d)}))||0===c)b+=c;b+='>\n    </div>\n  </div>\n</div>\n\n<div class="form-group">\n  <div class="col-xs-6"></div>\n  <div class="col-xs-18" id="address">';
c=a.address;c=(f=e.simpleFormat)?f.call(a,c,{hash:{}}):h.call(a,"simpleFormat",c,{hash:{}});return b+=g(c)+"</div>\n</div>\n"});return this.HandlebarsTemplates["invoices/invoice_contact"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["invoices/invoice_email"]=Handlebars.template(function(b,a,e,c,d){function f(a,c){return'checked="checked"'}e=e||b.helpers;var g,h=this,l=e.helperMissing,k=this.escapeExpression;b='<div class="modal-dialog">\n    <div class="modal-content">\n        <div class="modal-header">\n            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>\n            <span class="modal-title" id="modal-title-send-invoice-dialog">Send to customer</span>\n        </div>\n        <div class="modal-body">\n            <div class="form-horizontal">\n                <div class="form-group">\n                    <label for="to" class="col-xs-6 control-label">To</label>\n\n                    <div class="col-xs-17 form-control-wrapper">\n                        \x3c!-- inputName attr is purely for passing name/id to widget handlebar --\x3e\n                        ';c=
{inputName:"to",labelCssClass:"col-xs-6",widgetCssClass:"col-xs-24 row email-widget-wrapper","data-allow-empty":!1,"data-collection":"to"};c=(g=e.EmailInput)?g.call(a,{hash:c}):l.call(a,"EmailInput",{hash:c});b+=k(c)+'\n                    </div>\n                </div>\n                <div class="form-group">\n                    <label for="cc" class="col-xs-6 control-label">Cc</label>\n\n                    <div class="col-xs-17 form-control-wrapper">\n                        ';c={inputName:"cc",
labelCssClass:"col-xs-6",widgetCssClass:"col-xs-24 row email-widget-wrapper","data-collection":"cc"};c=(g=e.EmailInput)?g.call(a,{hash:c}):l.call(a,"EmailInput",{hash:c});b+=k(c)+"\n                    </div>\n                </div>\n                ";c=a.hideBcc;if((c=e.unless.call(a,c,{hash:{},inverse:h.noop,fn:h.program(1,function(a,c){var b,d;b='\n                    <div class="form-group">\n                        <label for="sendBcc" class="col-xs-6 control-label">Send a copy to</label>\n\n                        <div class="col-xs-17 form-control-wrapper" id="bcc">\n                            <input type="checkbox" id="sendBcc" name="sendBcc" ';
d=a.sendBcc;if((d=e["if"].call(a,d,{hash:{},inverse:h.noop,fn:h.program(2,f,c)}))||0===d)b+=d;b+='/>\n                            <label class="control-label">';d=(d=e.businessSetting)?d.call(a,"businessEmail",{hash:{}}):l.call(a,"businessSetting","businessEmail",{hash:{}});return b+=k(d)+"</label>\n                        </div>\n                    </div>\n                "},d)}))||0===c)b+=c;b+="\n\n                ";c={inputLabel:"Subject",inputName:"subject",labelCssClass:"col-xs-6",widgetCssClass:"col-xs-17"};
c=(g=e.TextInput)?g.call(a,{hash:c}):l.call(a,"TextInput",{hash:c});b+=k(c)+'\n\n                <div class="form-group">\n                    <label for="body" class="col-xs-6 control-label">Message</label>\n\n                    <div class="col-xs-17 form-control-wrapper">\n                        <div data-id="body" data-widget="AutosizeTextarea" data-name="body" data-maxlength="10000" data-autosize="false" data-rows="10"\n                             data-cols="50"></div>\n                    </div>\n                </div>\n                <div id="attachments" class="form-group">\n                </div>\n            </div>\n\n            <hr />\n            <div class="row">\n                <div class="col-xs-23">\n                    <div class="pull-right">\n                        <div id="sendEmailButtons">\n                            <button id="cancelButton" class="btn btn-default">Cancel</button>\n                            <button id="emailButton" class="btn btn-primary action">Send ';
(g=e.type)?c=g.call(a,{hash:{}}):(c=a.type,c="function"===typeof c?c():c);return b+=k(c)+'</button>\n                        </div>\n                        <div class="smallLoadingSpinnerWithStatus">\n                            <div class="smallLoadingSpinner"></div><span id="emailStatus">Sending message...</span>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <div class="small text-center text-muted top-buffer attachment-disclaimer">\n                MYOB does not scan your additional attachments for viruses.<br>Virus-check all attachments before sending them.\n            </div>\n\n        </div>\n    </div>\n</div>\n'});
return this.HandlebarsTemplates["invoices/invoice_email"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["invoices/invoice_footer"]=Handlebars.template(function(b,a,e,c,d){e=e||b.helpers;var f=e.helperMissing,g=this.escapeExpression;b='<tr class="totalLine">\n  <td colspan="5">\n      <button class="btn btn-default" id="bulkPrint" data-loading-text="Cancel...">Print</button>\n  </td>\n  <td class="total">';c=a.total;c=(d=e.moneyValueFormatWithoutDollarSignShowZero)?d.call(a,c,2,{hash:{}}):f.call(a,"moneyValueFormatWithoutDollarSignShowZero",
c,2,{hash:{}});b+=g(c)+'</td>\n  <td class="total">';c=a.dueTotal;c=(d=e.moneyValueFormatWithoutDollarSignShowZero)?d.call(a,c,2,{hash:{}}):f.call(a,"moneyValueFormatWithoutDollarSignShowZero",c,2,{hash:{}});return b+=g(c)+'</td>\n  <td colspan="2"></td>\n</tr>\n'});return this.HandlebarsTemplates["invoices/invoice_footer"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["invoices/invoice_header"]=Handlebars.template(function(b,a,e,c,d){return'<tr>\n  <th class="text-center"><input id="selectAll" type="checkbox" /></th>\n  <th data-field="number" class="desc">Number<i class="fa fa-caret-down"></i></th>\n  <th data-field="contactName">Customer</th>\n  <th data-field="issueDate">Issued</th>\n  <th data-field="dueDate">Due</th>\n  <th data-field="total" class="text-right">Total</th>\n  <th data-field="amountDue" class="text-right">Due</th>\n  <th data-field="status">Status</th>\n  <th data-field="sent">Sent</th>\n</tr>\n'});return this.HandlebarsTemplates["invoices/invoice_header"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["invoices/invoice_row"]=Handlebars.template(function(b,a,e,c,d){function f(a,c){return'<div class="eye"><i class="fa fa-eye"></i></div>'}function g(a,c){return'\n    <div class="glyphicon sent glyphicon-ok" title="Sent"/>\n'}function h(a,c){var b,d,f;b="\n  ";d=a.trackingStatus;if((d=(f=e.ifEqualOr)?f.call(a,d,"HARD_BOUNCE","SOFT_BOUNCE","REJECT",{hash:{},inverse:t.noop,fn:t.program(8,l,c)}):r.call(a,"ifEqualOr",
d,"HARD_BOUNCE","SOFT_BOUNCE","REJECT",{hash:{},inverse:t.noop,fn:t.program(8,l,c)}))||0===d)b+=d;b+="\n  ";d=a.trackingStatus;if((d=(f=e.ifEqual)?f.call(a,d,"SENDING",{hash:{},inverse:t.program(12,m,c),fn:t.program(10,k,c)}):r.call(a,"ifEqual",d,"SENDING",{hash:{},inverse:t.program(12,m,c),fn:t.program(10,k,c)}))||0===d)b+=d;return b+"\n\n"}function l(a,c){return'\n      <div class="failed myob-icon-failure" title="Bounced" />\n  '}function k(a,c){return'\n      <div class="glyphicon glyphicon-hourglass" title="Sending ..."/>\n      '}
function m(a,c){var b,d,f;b="\n        ";d=a.printed;if((d=(f=e.ifEqual)?f.call(a,d,!0,{hash:{},inverse:t.noop,fn:t.program(13,n,c)}):r.call(a,"ifEqual",d,!0,{hash:{},inverse:t.noop,fn:t.program(13,n,c)}))||0===d)b+=d;return b+"\n  "}function n(a,c){return'\n            <div class="fa fa-print" title="Printed" />\n        '}e=e||b.helpers;var q,p,t=this,r=e.helperMissing,u=this.escapeExpression;b='<td class="text-center" xmlns="http://www.w3.org/1999/html"><input type="checkbox" value="';(p=e.id)?
c=p.call(a,{hash:{}}):(c=a.id,c="function"===typeof c?c():c);b+=u(c)+'" name="selected" ';c=a.selected;if((c=e["if"].call(a,c,{hash:{},inverse:t.noop,fn:t.program(1,function(a,c){return'checked="checked"'},d)}))||0===c)b+=c;b+='/></td>\n<td><a href="';c=a.id;q=a.type;c=(p=e.transactionUrl)?p.call(a,q,c,{hash:{}}):r.call(a,"transactionUrl",q,c,{hash:{}});b+=u(c)+'">';(p=e.number)?c=p.call(a,{hash:{}}):(c=a.number,c="function"===typeof c?c():c);b+=u(c)+'</a></td>\n<td><a href="';c=a.id;q=a.type;c=(p=
e.transactionUrl)?p.call(a,q,c,{hash:{}}):r.call(a,"transactionUrl",q,c,{hash:{}});b+=u(c)+'">';(p=e.contactName)?c=p.call(a,{hash:{}}):(c=a.contactName,c="function"===typeof c?c():c);b+=u(c)+"</a></td>\n<td>";c=a.issueDate;c=(p=e.frontendDateFormat)?p.call(a,c,{hash:{}}):r.call(a,"frontendDateFormat",c,{hash:{}});b+=u(c)+"</td>\n<td>";c=a.dueDate;c=(p=e.frontendDateFormat)?p.call(a,c,{hash:{}}):r.call(a,"frontendDateFormat",c,{hash:{}});b+=u(c)+'</td>\n<td class="text-right">';c=a.total;c=(p=e.moneyValueFormatWithoutDollarSignShowZero)?
p.call(a,c,{hash:{}}):r.call(a,"moneyValueFormatWithoutDollarSignShowZero",c,{hash:{}});b+=u(c)+'</td>\n<td class="text-right">';c=a.amountDue;c=(p=e.moneyValueFormatWithoutDollarSignShowZero)?p.call(a,c,{hash:{}}):r.call(a,"moneyValueFormatWithoutDollarSignShowZero",c,{hash:{}});b+=u(c)+'</td>\n\n<td class="status ';c=a.status;c=(p=e.toLowerCase)?p.call(a,c,{hash:{}}):r.call(a,"toLowerCase",c,{hash:{}});b+=u(c)+'"><div class="status-text">';c=a.status;c=(p=e.humanize)?p.call(a,c,{hash:{}}):r.call(a,
"humanize",c,{hash:{}});b+=u(c)+"</div>\n  ";c=a.trackingStatus;if((c=(p=e.ifEqual)?p.call(a,c,"VIEW",{hash:{},inverse:t.noop,fn:t.program(3,f,d)}):r.call(a,"ifEqual",c,"VIEW",{hash:{},inverse:t.noop,fn:t.program(3,f,d)}))||0===c)b+=c;b+='</td>\n<td class="text-center">\n';c=a.sent;if((c=(p=e.ifEqual)?p.call(a,c,!0,{hash:{},inverse:t.program(7,h,d),fn:t.program(5,g,d)}):r.call(a,"ifEqual",c,!0,{hash:{},inverse:t.program(7,h,d),fn:t.program(5,g,d)}))||0===c)b+=c;return b+"\n</td>\n"});return this.HandlebarsTemplates["invoices/invoice_row"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["invoices/invoices"]=Handlebars.template(function(b,a,e,c,d){e=e||b.helpers;var f=this.escapeExpression,g=e.helperMissing;b='<div class="loadingSpinner"></div>\n\n<div id="page">\n    <br/>\n\n    <div id="online-payments-banner"></div>\n    <div id="online-invoicing"></div>\n    <br/>\n\n    <div id="pageContentHeader" class="row">\n      <div id="invoiceOrBillHeader" class="col-xs-13 clearfix">\n        <h1>Invoices</h1>\n        <div id="entitlementUsage"></div>\n      </div>\n      <div class="col-xs-11 primary-button-group">\n        <button id="createButton" class="btn btn-primary action">Create ';
(d=e.modelName)?c=d.call(a,{hash:{}}):(c=a.modelName,c="function"===typeof c?c():c);b+=f(c)+'</button>\n        <button id="createCustomerReturnButton" class="btn btn-default action">Create return</button>\n      </div>\n    </div>\n  <hr/>\n  <div id="listContainer">\n    <div id="toolbar" class="form-horizontal">\n      <div class="form-group">\n        <div class="col-xs-6 col-xs-push-10">\n          <div class="input-width-large">\n            <select class="form-control" id="filter" name="filter">\n              ';
c=a.filter;c=(d=e.option)?d.call(a,"All","ALL",c,{hash:{}}):g.call(a,"option","All","ALL",c,{hash:{}});b+=f(c)+"\n              ";c=a.filter;c=(d=e.option)?d.call(a,"Unpaid and Sent","OPEN_AND_SENT",c,{hash:{}}):g.call(a,"option","Unpaid and Sent","OPEN_AND_SENT",c,{hash:{}});b+=f(c)+"\n              ";c=a.filter;c=(d=e.option)?d.call(a,"Unpaid and not Sent","OPEN_AND_NOT_SENT",c,{hash:{}}):g.call(a,"option","Unpaid and not Sent","OPEN_AND_NOT_SENT",c,{hash:{}});b+=f(c)+"\n              ";c=a.filter;
c=(d=e.option)?d.call(a,"Unpaid within due date","NOT_PAID",c,{hash:{}}):g.call(a,"option","Unpaid within due date","NOT_PAID",c,{hash:{}});b+=f(c)+"\n              ";c=a.filter;c=(d=e.option)?d.call(a,"Overdue","OVERDUE",c,{hash:{}}):g.call(a,"option","Overdue","OVERDUE",c,{hash:{}});b+=f(c)+"\n              ";c=a.filter;c=(d=e.option)?d.call(a,"Paid","CLOSED",c,{hash:{}}):g.call(a,"option","Paid","CLOSED",c,{hash:{}});b+=f(c)+"\n              ";c=a.filter;c=(d=e.option)?d.call(a,"Open","OPEN",c,
{hash:{}}):g.call(a,"option","Open","OPEN",c,{hash:{}});b+=f(c)+"\n              ";c=a.filter;c=(d=e.option)?d.call(a,"Returns","RETURNS",c,{hash:{}}):g.call(a,"option","Returns","RETURNS",c,{hash:{}});b+=f(c)+'\n            </select>\n          </div>\n        </div>\n        <div class="col-xs-8 col-xs-push-10">\n          <div class="row">\n            <label class="control-label col-xs-6" for="search">Search:</label>\n            <div class="col-xs-18">\n              <input class="form-control" type="text" name="search" id="search" value="';
(d=e.search)?c=d.call(a,{hash:{}}):(c=a.search,c="function"===typeof c?c():c);return b+=f(c)+'">\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div id="table"></div>\n    <div id="pagination" class="pagination"></div>\n  </div>\n</div>\n'});return this.HandlebarsTemplates["invoices/invoices"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["invoices/online_invoicing_optin"]=Handlebars.template(function(b,a,e,c,d){return'<div class="row">\n    <div class="col-xs-24">\n        <button class="hide-banner-button close top-buffer-sm right-buffer-sm"><i class="fa fa-times-circle"></i></button>\n\n        <div id="online-invoicing-info-box" class="banner banner-grey">\n            <div class="row">\n                <div class="col-xs-2 banner-icon">\n                    <i class="fa fa-dollar"></i>\n                </div>\n                <div class="col-xs-9">\n                    <div class="col-xs-24"><h2>Increase control of your sales with online invoices</h2></div>\n                    <div class="col-xs-24">Now you can take more control of your sales with invoice tracking.</div>\n                    <div class="col-xs-24">&nbsp;</div>\n                    <ul class="col-xs-24">\n                        <li>Track invoice status in real-time online, even on your smartphone or tablet.</li>\n                        <li>See who hasn\u2019t opened their invoice so you know who to follow up.</li>\n                        <li>It\u2019s included in your subscription, and easy to get started.</li>\n                    </ul>\n                </div>\n                <div class="col-xs-7 panel-body-invoice text-center top-buffer">\n                    <a href="//fast.wistia.net/embed/iframe/4fn3jo4aje?popover=true" class="wistia-popover[height=540,playerColor=7b796a,width=960]" id="onlineInvoice_PlayVideo">\n                        <img src="http://help.myob.com.au/essentials/images/videothumbnails/PayDirectOnline.png" alt="" style="box-shadow: 2px 5px 36px 0px rgba(0,0,0,0.20);border-radius: 3px;width: 300px;height: 190px"/></a>\n                    </a>\n                    <script charset="ISO-8859-1" src="//fast.wistia.com/assets/external/popover-v1.js">\x3c/script>\n                </div>\n                <div class="col-xs-1"\n                     style="height:280px; background: linear-gradient(to right, rgba(0,0,0,0) 46%, #dedede 46%, #dedede 54%, rgba(0,0,0,0) 54%, rgba(0,0,0,0) 54%);">\n                </div>\n                <div class="col-xs-4 panel-body-invoice accept-wrapper">\n                    <p class="align-center">Get started today.</p>\n                    <button class="btn btn-primary accept hide-banner-button">Upgrade your invoices</button>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n'});
return this.HandlebarsTemplates["invoices/online_invoicing_optin"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["invoices/online_payment"]=Handlebars.template(function(b,a,e,c,d){function f(a,c){return'\n        <div class="smallLoadingSpinner"></div>\n    '}function g(a,c){var b,d;b="\n      ";d=a.paymentMethods;if((d=e.each.call(a,d,{hash:{},inverse:t.noop,fn:t.program(4,h,c)}))||0===d)b+=d;return b+"\n    "}function h(a,c){var b,d;b='\n          <div class="payment-method">\n              <label>\n                  <input type="checkbox" name="payment-methods" value="';
d=a.name;d="function"===typeof d?d():d;b+=p(d)+'" ';d=a.enabled;if((d=e["if"].call(a,d,{hash:{},inverse:t.noop,fn:t.program(5,l,c)}))||0===d)b+=d;return b+' />\n                  <img src="frontend/visa-master-logos.svg" class="cards-horizontal" />\n              </label>\n          </div>\n      '}function l(a,c){return"checked"}function k(a,c){var b,d;b='\n        <img src="frontend/visa-master-logos.svg" class="signup" data-placement="bottom"\n             data-toggle="popover" data-html="true" rel="popover"\n             title="Give your customers an easy way to pay"\n             data-content="<p>Online payments saves you time and hassle by allowing you to accept customer payments directly from your online invoices.</p>\n                  <p>Setup is easy, so get started today!</p>" />\n        ';
d=a.duplicateSn;if((d=e["if"].call(a,d,{hash:{},inverse:t.program(10,n,c),fn:t.program(8,m,c)}))||0===d)b+=d;return b+"\n    "}function m(a,c){return'\n          <a class="setup" id="duplicateSnDialog">Get set up</a>\n        '}function n(a,c){return'\n          <a class="setup" id="setupOnlinePayment">Get set up</a>\n        '}e=e||b.helpers;var q,p=this.escapeExpression,t=this,r=e.helperMissing;b='<div id="online-payments" class="form-group">\n  <label class="col-xs-16 control-label" for="logo-cards">Online payments</label>\n  <div class="col-xs-8">\n    ';
c=a.status;if((c=(q=e.ifEqual)?q.call(a,c,"UNKNOWN",{hash:{},inverse:t.noop,fn:t.program(1,f,d)}):r.call(a,"ifEqual",c,"UNKNOWN",{hash:{},inverse:t.noop,fn:t.program(1,f,d)}))||0===c)b+=c;b+="\n    ";c=a.status;if((c=(q=e.ifEqual)?q.call(a,c,"ENABLED",{hash:{},inverse:t.noop,fn:t.program(3,g,d)}):r.call(a,"ifEqual",c,"ENABLED",{hash:{},inverse:t.noop,fn:t.program(3,g,d)}))||0===c)b+=c;b+="\n    ";c=a.status;if((c=(q=e.ifEqual)?q.call(a,c,"NOT_ENABLED",{hash:{},inverse:t.noop,fn:t.program(7,k,d)}):
r.call(a,"ifEqual",c,"NOT_ENABLED",{hash:{},inverse:t.noop,fn:t.program(7,k,d)}))||0===c)b+=c;return b+"\n  </div>\n</div>\n"});return this.HandlebarsTemplates["invoices/online_payment"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["invoices/online_payments_banner"]=Handlebars.template(function(b,a,e,c,d){return'<div id="online-payments-banner-row">\n  <div>\n      <div class="row-eq-height billboard-panel online-payments-billboard-panel">\n          <div class="billboard-new-feature-icon">\n              <i class="fa fa-bullhorn"></i>\n          </div>\n          <div class="billboard-text col-md-24 online-payments-billboard-text">\n              <div class="col-xs-offset-1 col-xs-11 text-center online-payments-billboard-link-container">\n                  <a href="//fast.wistia.net/embed/iframe/1j9oycpp38?popover=true" class="col-xs-24 wistia-popover[height=540,playerColor=7b796a,width=960]" id="onlineInvoice_PlayVideo">\n                      <img src="//help.myob.com.au/essentials/images/videothumbnails/PayDirect1.png" alt="" class="online-payments-billboard-image-container"/>\n                  </a>\n                  <script charset="ISO-8859-1" src="//fast.wistia.com/assets/external/popover-v1.js">\x3c/script>\n              </div>\n              <div class="col-xs-offset-1 col-xs-16">\n                  <h2 class="margin-top-05">\n                      Get paid faster!<br>\n                  </h2>Make it easy for customers to pay your invoices with <strong>PayDirect Online</strong>.\n                  <ul class="col-xs-offset-1 margin-top-10">\n                      <li>Accept Visa and Mastercard payments online\n                      </li>\n                      <li>Let customers pay from their phone, tablet or computer\n                      </li>\n                      <li>Spend less time chasing payments and updating your books\n                      </li>\n                  </ul>\n                  <button class="btn btn-primary hide-banner-button margin-top-10" id="duplicateSnDialog" style="display: none;">Turn on <strong>PayDirect Online</strong></button>\n                  <button class="btn btn-primary hide-banner-button margin-top-10" id="turnOnPayDirect">Turn on <strong>PayDirect\n                      Online</strong></button>\n              </div>\n          </div>\n          <button id="dismissPayDirect" class="hide-banner-button close online-payments-hide-banner-button">\n              <i class="myob-icon-close icons-small"></i>\n          </button>\n      </div>\n  </div>\n</div>\n'});return this.HandlebarsTemplates["invoices/online_payments_banner"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["invoices/online_payments_trial_warning_modal"]=Handlebars.template(function(b,a,e,c,d){return'<div class="modal-dialog online-payments-trial-warning-modal" id="online-payments-trial-warning-modal">\n    <div class="modal-content">\n        <div class="modal-header">\n            <button type="button" class="close" data-dismiss="modal" aria-hidden="true" tabindex="2">&times;</button>\n            <span class="modal-title">Available to subscribers only</span>\n        </div>\n        <div class="modal-body">\n            <div>\n                <p>PayDirect Online is only available to MYOB Essentials subscribers.</p>\n                <p>\n                    Click <strong>Subscribe now</strong> to see which MYOB Essentials product is right for your business,\n                    and start enjoying the benefits of PayDirect Online.\n                </p>\n            </div>\n        </div>\n        <div class="modal-footer">\n            <div class="primary-button-group">\n                <button id="closeButton" class="btn btn-default">Close</button>\n                <button id="subscribeNowButton" class="btn btn-primary">Subscribe now</button>\n            </div>\n        </div>\n    </div>\n</div>\n'});
return this.HandlebarsTemplates["invoices/online_payments_trial_warning_modal"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["invoices/partial/bill_line"]=Handlebars.template(function(b,a,e,c,d){function f(a,c){return'data-disabled="disabled"'}e=e||b.helpers;var g,h=e.helperMissing,l=this.escapeExpression;c=e.blockHelperMissing;b='<td class="editable item-container">\n  <div data-widget="TypeaheadDropdown" data-name="itemId" data-collection="items" data-labels="number,name"\n       data-custom-action-name="addItem" data-custom-action-label="+ Add item">\n  </div>\n</td>\n\n<td class="editable description-container">\n  <div data-id="description" data-widget="AutosizeTextarea" data-name="description" data-maxlength="1000">\n  </div>\n</td>\n\n<td class="editable account-container">\n  <div data-widget="TypeaheadDropdown" data-name="accountId" data-collection="accounts" data-labels="number,name,type"\n       data-label-field="name">\n  </div>\n</td>\n\n<td class="editable quantity-container">\n  <div data-id="quantity" data-widget="NumberInput" data-name="quantity" data-valid-regex="^\\d{0,6}(\\.\\d{0,2})?$"\n       data-invalid-regex="[,\\.]{2}" data-css-class="text-right">\n  </div>\n</td>\n\n<td class="editable unit-price-container">\n  <div data-id="unitPrice" data-widget="MoneyInput" data-name="unitPrice" data-valid-regex="^[-\\+]?\\d{0,2},?\\d{0,3},?\\d{0,3}(\\.\\d{0,4})?$"\n       data-invalid-regex="[,\\.]{2}" data-decimal-places="4" data-css-class="right text-right">\n  </div>\n</td>\n\n<td class="editable tax-types-container">\n  <div data-widget="TypeaheadDropdown" data-allow-invalid-values="true" data-collection="gstTypes" data-name="taxCode"\n       data-value-field="gstCode" data-labels="gstCode,name,rateLabel:right" data-label-field="gstCode"\n       ';(g=
e.unlessRegisteredForGst)?g=g.call(a,{hash:{},inverse:this.noop,fn:this.program(1,f,d)}):(g=a.unlessRegisteredForGst,g="function"===typeof g?g():g);e.unlessRegisteredForGst||(g=c.call(a,g,{hash:{},inverse:this.noop,fn:this.program(1,f,d)}));if(g||0===g)b+=g;b+=">\n  </div>\n</td>\n\n";g=a.gstInclusive;if((g=e["if"].call(a,g,{hash:{},inverse:this.program(5,function(a,c){var b,d,f;b='\n  <td class="total text-right">';d=a.totalExcludingGst;d=(f=e.moneyValueFormatWithoutDollarSignShowZero)?f.call(a,
d,2,{hash:{}}):h.call(a,"moneyValueFormatWithoutDollarSignShowZero",d,2,{hash:{}});return b+=l(d)+"</td>\n"},d),fn:this.program(3,function(a,c){var b,d,f;b='\n  <td class="total text-right">';d=a.total;d=(f=e.moneyValueFormatWithoutDollarSignShowZero)?f.call(a,d,2,{hash:{}}):h.call(a,"moneyValueFormatWithoutDollarSignShowZero",d,2,{hash:{}});return b+=l(d)+"</td>\n"},d)}))||0===g)b+=g;return b+"\n"});return this.HandlebarsTemplates["invoices/partial/bill_line"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["invoices/partial/combined_invoice_quote_line"]=Handlebars.template(function(b,a,e,c,d){function f(a,b){return'data-disabled="disabled"'}e=e||b.helpers;var g,h=e.helperMissing,l=this.escapeExpression;c=e.blockHelperMissing;b='<td class="editable item-container">\n  <div data-widget="TypeaheadDropdown" data-name="itemId" data-collection="items" data-labels="number,name"\n       data-custom-action-name="addItem" data-custom-action-label="+ Add item">\n  </div>\n</td>\n\n<td class="editable description-container">\n  <div data-id="description" data-widget="AutosizeTextarea" data-name="description" data-maxlength="1000">\n  </div>\n</td>\n\n<td class="editable account-container">\n  <div data-widget="TypeaheadDropdown" data-name="accountId" data-collection="accounts" data-labels="number,name,type"\n       data-label-field="name">\n  </div>\n</td>\n\n<td class="editable unit-of-measure-container">\n  <div data-widget="TypeaheadDropdown" data-name="unitOfMeasure" data-collection="unitTypes" data-value-field="code" data-labels="code"\n       data-label-field="code">\n  </div>\n</td>\n\n<td class="editable quantity-container">\n  <div data-id="quantity" data-widget="NumberInput" data-name="quantity" data-valid-regex="^\\d{0,6}(\\.\\d{0,2})?$"\n       data-invalid-regex="[,\\.]{2}" data-css-class="text-right">\n  </div>\n</td>\n\n<td class="editable unit-price-container">\n  <div data-id="unitPrice" data-widget="MoneyInput" data-name="unitPrice"\n       data-valid-regex="^[-\\+]?\\d{0,2},?\\d{0,3},?\\d{0,3}(\\.\\d{0,4})?$"\n       data-invalid-regex="[,\\.]{2}" data-decimal-places="4" data-css-class="right text-right">\n  </div>\n</td>\n\n<td class="editable tax-types-container">\n  <div data-widget="TypeaheadDropdown" data-allow-invalid-values="true" data-collection="gstTypes" data-name="taxCode"\n       data-value-field="gstCode" data-labels="gstCode,name,rateLabel:right" data-label-field="gstCode"\n       ';
(g=e.unlessRegisteredForGst)?g=g.call(a,{hash:{},inverse:this.noop,fn:this.program(1,f,d)}):(g=a.unlessRegisteredForGst,g="function"===typeof g?g():g);e.unlessRegisteredForGst||(g=c.call(a,g,{hash:{},inverse:this.noop,fn:this.program(1,f,d)}));if(g||0===g)b+=g;b+=">\n  </div>\n</td>\n\n";g=a.gstInclusive;if((g=e["if"].call(a,g,{hash:{},inverse:this.program(5,function(a,b){var c,d,f;c='\n  <td class="total text-right">';d=a.totalExcludingGst;d=(f=e.moneyValueFormatWithoutDollarSignShowZero)?f.call(a,
d,2,{hash:{}}):h.call(a,"moneyValueFormatWithoutDollarSignShowZero",d,2,{hash:{}});return c+=l(d)+"</td>\n"},d),fn:this.program(3,function(a,b){var c,d,f;c='\n  <td class="total text-right">';d=a.total;d=(f=e.moneyValueFormatWithoutDollarSignShowZero)?f.call(a,d,2,{hash:{}}):h.call(a,"moneyValueFormatWithoutDollarSignShowZero",d,2,{hash:{}});return c+=l(d)+"</td>\n"},d)}))||0===g)b+=g;return b+"\n"});return this.HandlebarsTemplates["invoices/partial/combined_invoice_quote_line"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["invoices/partial/service_invoice_quote_line"]=Handlebars.template(function(b,a,e,c,d){function f(a,c){return'data-disabled="disabled"'}e=e||b.helpers;var g;c=e.blockHelperMissing;b='<td class="editable description-container">\n  <div data-id="description" data-widget="AutosizeTextarea" data-name="description" data-maxlength="1000">\n  </div>\n</td>\n\n<td class="editable account-container">\n  <div data-widget="TypeaheadDropdown" data-name="accountId" data-collection="accounts" data-labels="number,name,type"\n       data-label-field="name">\n  </div>\n</td>\n\n<td class="editable tax-types-container">\n  <div data-widget="TypeaheadDropdown" data-allow-invalid-values="true" data-collection="gstTypes" data-name="taxCode"\n       data-value-field="gstCode" data-labels="gstCode,name,rateLabel:right" data-label-field="gstCode"\n       ';
(g=e.unlessRegisteredForGst)?g=g.call(a,{hash:{},inverse:this.noop,fn:this.program(1,f,d)}):(g=a.unlessRegisteredForGst,g="function"===typeof g?g():g);e.unlessRegisteredForGst||(g=c.call(a,g,{hash:{},inverse:this.noop,fn:this.program(1,f,d)}));if(g||0===g)b+=g;return b+'>\n  </div>\n</td>\n\n<td class="editable unit-price-container">\n  <div data-id="unitPrice" data-widget="MoneyInput" data-name="unitPrice"\n       data-valid-regex="^[-\\+]?\\d{0,2},?\\d{0,3},?\\d{0,3}(\\.\\d{0,2})?$"\n       data-invalid-regex="[,\\.]{2}" data-decimal-places="2" data-css-class="right text-right">\n  </div>\n</td>\n'});
return this.HandlebarsTemplates["invoices/partial/service_invoice_quote_line"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["invoices/payment_term"]=Handlebars.template(function(b,a,e,c,d){e=e||b.helpers;var f=e.helperMissing,g=this.escapeExpression;b='<h3>Default payment terms</h3>\n\n<div class="row form-horizontal">\n  <div class="col-xs-4">\n    ';c={inputLabel:"Due",inputName:"paymentTermDays","data-maxlength":"3","data-valid-regex":"^\\d{0,3}$"};c=(d=e.RegexInput)?d.call(a,{hash:c}):f.call(a,"RegexInput",{hash:c});b+=g(c)+
'\n  </div>\n  <div class="col-xs-1 control-label right-buffer">\n    <p id="payment-term-days-text">days</p>\n  </div>\n  <div class="col-xs-6">\n    ';c={inputLabel:"",inputName:"paymentTermType",labelCssClass:"",widgetCssClass:"col-xs-24","data-collection":"paymentTerms","data-name-field":"name","data-value-field":"value"};c=(d=e.Select)?d.call(a,{hash:c}):f.call(a,"Select",{hash:c});return b+=g(c)+'\n  </div>\n</div>\n<div class="row bottom-buffer">\n  <div class="col-xs-24">\n    <p>You can also change these terms when creating individual invoices.</p>\n  </div>\n</div>\n'});
return this.HandlebarsTemplates["invoices/payment_term"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["invoices/quote"]=Handlebars.template(function(b,a,e,c,d){function f(a,c){return'disabled="disabled"'}function g(a,c){return'\n    <div class="row">\n      <div class="col-xs-24">\n        <span class="text-warning">Business is not registered for GST</span>\n      </div>\n    </div>\n  '}e=e||b.helpers;b="";var h,l=e.helperMissing,k=this.escapeExpression,m=e.blockHelperMissing;c={};c.heading=a.type;c=(h=e.includePartial)?
h.call(a,"page_heading",{hash:c}):l.call(a,"includePartial","page_heading",{hash:c});b+=k(c)+'\n\n<div id="invoiceContainer" class="';(h=e.type)?c=h.call(a,{hash:{}}):(c=a.type,c="function"===typeof c?c():c);b+=k(c)+'">\n  <div id="invoiceDetailsContainer" class="form-horizontal">\n    <div class="form-group">\n      <div class="col-xs-10" id="contactContainer"></div>\n      <div class="col-xs-offset-4 col-xs-10">\n\n        <div class="form-group">\n          <label class="col-xs-12 control-label" for="invoiceNumber">';
c=a.type;c=(h=e.humanize)?h.call(a,c,{hash:{}}):l.call(a,"humanize",c,{hash:{}});b+=k(c)+' number</label>\n          <div class="col-xs-12 form-control-wrapper" data-id="invoiceNumber" data-widget="TextInput" data-name="invoiceNumber" data-maxlength="13"></div>\n        </div>\n\n        ';c={inputLabel:"Date of issue",inputName:"issueDate",labelCssClass:"col-xs-12",widgetCssClass:"col-xs-12"};c=(h=e.DatePicker)?h.call(a,{hash:c}):l.call(a,"DatePicker",{hash:c});b+=k(c)+'\n\n        <div class="form-group" id="expirationTermsContainer">\n          <label class="col-xs-12 control-label" for="paymentTerms">Expiration terms</label>\n          <div class="col-xs-6 form-control-wrapper" data-id="paymentTerms" data-widget="RegexInput" data-name="paymentTerms" data-valid-regex="^\\d{0,3}$"></div>\n          <div class="col-xs-2 control-label">days</div>\n        </div>\n\n        ';
c={inputLabel:"Expired date",inputName:"dueDate",labelCssClass:"col-xs-12",widgetCssClass:"col-xs-12"};c=(h=e.DatePicker)?h.call(a,{hash:c}):l.call(a,"DatePicker",{hash:c});b+=k(c)+'\n\n        <div class="form-group">\n          <label class="col-xs-12 control-label" for="status">Status</label>\n\n          <div class="col-xs-12">\n            <select id="status" name="status" class="form-control">\n              ';c=a.status;c=(h=e.option)?h.call(a,"Accepted","ACCEPTED",c,{hash:{}}):l.call(a,"option",
"Accepted","ACCEPTED",c,{hash:{}});b+=k(c)+"\n              ";c=a.status;c=(h=e.option)?h.call(a,"Declined","DECLINED",c,{hash:{}}):l.call(a,"option","Declined","DECLINED",c,{hash:{}});b+=k(c)+"\n              ";c=a.status;c=(h=e.option)?h.call(a,"Open","OPEN",c,{hash:{}}):l.call(a,"option","Open","OPEN",c,{hash:{}});b+=k(c)+'\n            </select>\n          </div>\n        </div>\n\n        <div class="form-group">\n          <label class="col-xs-12 control-label" for="gstInclusive">Amounts are</label>\n\n          <div class="col-xs-12">\n            <select id="gstInclusive" name="gstInclusive" class="form-control boolean" ';
(h=e.unlessRegisteredForGst)?c=h.call(a,{hash:{},inverse:this.noop,fn:this.program(1,f,d)}):(c=a.unlessRegisteredForGst,c="function"===typeof c?c():c);e.unlessRegisteredForGst||(c=m.call(a,c,{hash:{},inverse:this.noop,fn:this.program(1,f,d)}));if(c||0===c)b+=c;b+=">\n              ";c=a.gstInclusive;c=(h=e.option)?h.call(a,"GST Inclusive","true",c,{hash:{}}):l.call(a,"option","GST Inclusive","true",c,{hash:{}});b+=k(c)+"\n              ";c=a.gstInclusive;c=(h=e.option)?h.call(a,"GST Exclusive","false",
c,{hash:{}}):l.call(a,"option","GST Exclusive","false",c,{hash:{}});b+=k(c)+"\n            </select>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n  ";(h=e.unlessRegisteredForGst)?c=h.call(a,{hash:{},inverse:this.noop,fn:this.program(3,g,d)}):(c=a.unlessRegisteredForGst,c="function"===typeof c?c():c);e.unlessRegisteredForGst||(c=m.call(a,c,{hash:{},inverse:this.noop,fn:this.program(3,g,d)}));if(c||0===c)b+=c;return b+'\n  <div id="invoiceLinesContainer" class="row top-buffer">\n  </div>\n  <div id="buttonsContainer" class="top-buffer"></div>\n  <div id="activitiesContainer" class="top-buffer"></div>\n</div>\n'});
return this.HandlebarsTemplates["invoices/quote"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["invoices/quote_buttons"]=Handlebars.template(function(b,a,e,c,d){function f(a,c){return"action"}e=e||b.helpers;var g=this;b='<div class="row">\n  <div class="col-xs-14">\n    <button id="createInvoiceFromSource" class="btn btn-default action" data-loading-text="Creating invoice..." value="Create invoice">Create invoice</button>\n    ';c=a.id;if((c=e["if"].call(a,c,{hash:{},inverse:g.noop,fn:g.program(1,function(a,
c){var b,d;b='\n      <button id="destroy" class="btn btn-default ';d=a.locked;if((d=e.unless.call(a,d,{hash:{},inverse:g.noop,fn:g.program(2,f,c)}))||0===d)b+=d;return b+'">Delete</button>\n    '},d)}))||0===c)b+=c;b+='\n    <button id="email" class=\'btn btn-primary ';c=a.locked;if((c=e.unless.call(a,c,{hash:{},inverse:g.noop,fn:g.program(4,function(a,c){return"action"},d)}))||0===c)b+=c;b+='\' data-loading-text="Saving...">';c=a.sent;if((c=e["if"].call(a,c,{hash:{},inverse:g.program(8,function(a,
c){return"Email"},d),fn:g.program(6,function(a,c){return"Resend to customer"},d)}))||0===c)b+=c;b+='</button>\n    <button id="saveAndPrint" class=\'btn btn-default ';c=a.locked;if((c=e.unless.call(a,c,{hash:{},inverse:g.noop,fn:g.program(10,function(a,c){return"action"},d)}))||0===c)b+=c;return b+'\' data-loading-text="Saving...">Print</button>\n  </div>\n  <div class="col-xs-10">\n    <div class="pull-right">\n      <button id="cancel" class=\'btn btn-default\'>Cancel</button>\n      <button id="save" class=\'btn btn-primary action\' data-loading-text="Saving...">Save</button>\n    </div>\n  </div>\n</div>\n'});
return this.HandlebarsTemplates["invoices/quote_buttons"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["invoices/quote_contact"]=Handlebars.template(function(b,a,e,c,d){e=e||b.helpers;var f,g=this.escapeExpression,h=e.helperMissing;b='<div class="form-group">\n  <label class="col-xs-6 control-label" for="contactId">';(f=e.recipient)?c=f.call(a,{hash:{}}):(c=a.recipient,c="function"===typeof c?c():c);b+=g(c)+'</label>\n\n  <div class="col-xs-18" id="customerControls">\n    <div class="form-control-wrapper" data-id="contactId" data-widget="TypeaheadDropdown" data-name="contactId" data-collection="contacts" data-labels="name,firstName,lastName"\n         data-custom-action-name="addCustomer" data-custom-action-label="+ Add ';c=
a.recipient;c=(f=e.toLowerCase)?f.call(a,c,{hash:{}}):h.call(a,"toLowerCase",c,{hash:{}});b+=g(c)+'" data-prompt="Please select a ';c=a.recipient;c=(f=e.toLowerCase)?f.call(a,c,{hash:{}}):h.call(a,"toLowerCase",c,{hash:{}});b+=g(c)+'" ';c=a.paid;if((c=e["if"].call(a,c,{hash:{},inverse:this.noop,fn:this.program(1,function(a,c){return'data-disabled="disabled"'},d)}))||0===c)b+=c;b+='>\n    </div>\n  </div>\n</div>\n\n<div class="form-group">\n  <div class="col-xs-6"></div>\n  <div class="col-xs-18" id="address">';
c=a.address;c=(f=e.simpleFormat)?f.call(a,c,{hash:{}}):h.call(a,"simpleFormat",c,{hash:{}});return b+=g(c)+"</div>\n</div>\n"});return this.HandlebarsTemplates["invoices/quote_contact"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["invoices/quote_footer"]=Handlebars.template(function(b,a,e,c,d){e=e||b.helpers;d=e.helperMissing;var f=this.escapeExpression;b='<tr class="totalLine">\n  <td colspan="4">\n  </td>\n  <td class="total">';c=a.total;c=(e=e.moneyValueFormatWithoutDollarSignShowZero)?e.call(a,c,{hash:{}}):d.call(a,"moneyValueFormatWithoutDollarSignShowZero",c,{hash:{}});return b+=f(c)+'</td>\n  <td colspan="2"></td>\n</tr>\n'});
return this.HandlebarsTemplates["invoices/quote_footer"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["invoices/quote_header"]=Handlebars.template(function(b,a,e,c,d){function f(a,c){return"Received"}function g(a,c){return"Issued"}function h(a,c){return"Expiry"}function l(a,c){return"Due"}e=e||b.helpers;var k,m=e.helperMissing;b='<tr>\n  <th data-field="number" class="desc">Number<i class="fa fa-caret-down"></i></th>\n  <th data-field="contactName">Customer</th>\n  <th data-field="issueDate">';c=a.modelName;
if((c=(k=e.ifEqual)?k.call(a,c,"bill",{hash:{},inverse:this.program(3,g,d),fn:this.program(1,f,d)}):m.call(a,"ifEqual",c,"bill",{hash:{},inverse:this.program(3,g,d),fn:this.program(1,f,d)}))||0===c)b+=c;b+='</th>\n  <th data-field="dueDate">';c=a.modelName;if((c=(k=e.ifEqual)?k.call(a,c,"quote",{hash:{},inverse:this.program(7,l,d),fn:this.program(5,h,d)}):m.call(a,"ifEqual",c,"quote",{hash:{},inverse:this.program(7,l,d),fn:this.program(5,h,d)}))||0===c)b+=c;return b+'</th>\n  <th data-field="total" class="text-right">Total</th>\n  <th data-field="status">Status</th>\n  <th data-field="sent">Sent</th>\n</tr>\n'});
return this.HandlebarsTemplates["invoices/quote_header"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["invoices/quote_row"]=Handlebars.template(function(b,a,e,c,d){function f(a,c){return'<div class="glyphicon glyphicon-ok" />'}e=e||b.helpers;var g,h,l=e.helperMissing,k=this.escapeExpression;b='<td><a href="';c=a.id;g=a.type;c=(h=e.transactionUrl)?h.call(a,g,c,{hash:{}}):l.call(a,"transactionUrl",g,c,{hash:{}});b+=k(c)+'">';(h=e.number)?c=h.call(a,{hash:{}}):(c=a.number,c="function"===typeof c?c():c);b+=k(c)+
'</a></td>\n<td><a href="';c=a.id;g=a.type;c=(h=e.transactionUrl)?h.call(a,g,c,{hash:{}}):l.call(a,"transactionUrl",g,c,{hash:{}});b+=k(c)+'">';(h=e.contactName)?c=h.call(a,{hash:{}}):(c=a.contactName,c="function"===typeof c?c():c);b+=k(c)+"</a></td>\n<td>";c=a.issueDate;c=(h=e.frontendDateFormat)?h.call(a,c,{hash:{}}):l.call(a,"frontendDateFormat",c,{hash:{}});b+=k(c)+"</td>\n<td>";c=a.dueDate;c=(h=e.frontendDateFormat)?h.call(a,c,{hash:{}}):l.call(a,"frontendDateFormat",c,{hash:{}});b+=k(c)+'</td>\n<td class="text-right">';
c=a.total;c=(h=e.moneyValueFormatWithoutDollarSignShowZero)?h.call(a,c,{hash:{}}):l.call(a,"moneyValueFormatWithoutDollarSignShowZero",c,{hash:{}});b+=k(c)+'</td>\n<td class="status ';c=a.status;c=(h=e.toLowerCase)?h.call(a,c,{hash:{}}):l.call(a,"toLowerCase",c,{hash:{}});b+=k(c)+'">';c=a.status;c=(h=e.humanize)?h.call(a,c,{hash:{}}):l.call(a,"humanize",c,{hash:{}});b+=k(c)+'</td>\n<td class="text-center">';c=a.sent;if((c=(h=e.ifEqual)?h.call(a,c,!0,{hash:{},inverse:this.noop,fn:this.program(1,f,
d)}):l.call(a,"ifEqual",c,!0,{hash:{},inverse:this.noop,fn:this.program(1,f,d)}))||0===c)b+=c;return b+"</td>\n"});return this.HandlebarsTemplates["invoices/quote_row"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["invoices/quotes"]=Handlebars.template(function(b,a,e,c,d){function f(a,c){var b,d;b='\n    <button id="createButton" class="btn btn-primary action">Create ';(d=e.modelName)?d=d.call(a,{hash:{}}):(d=a.modelName,d="function"===typeof d?d():d);return b+=h(d)+"</button>\n  "}e=e||b.helpers;var g,h=this.escapeExpression,l=e.helperMissing;b='<div class="loadingSpinner"></div>\n\n<div id="page">\n\n  ';c={};c.heading=
a.modelName;c.headingSuffix="s";if((c=(g=e.pageHeading)?g.call(a,{hash:c,inverse:this.noop,fn:this.program(1,f,d)}):l.call(a,"pageHeading",{hash:c,inverse:this.noop,fn:this.program(1,f,d)}))||0===c)b+=c;b+='\n\n  <hr/>\n\n  <div id="listContainer">\n    <div id="toolbar" class="form-horizontal">\n      <div class="form-group">\n        <div class="col-xs-6 col-xs-push-10">\n          <div class="input-width-large">\n            <select class="form-control" id="filter" name="filter">\n              ';
c=a.filter;c=(g=e.option)?g.call(a,"Accepted","ACCEPTED",c,{hash:{}}):l.call(a,"option","Accepted","ACCEPTED",c,{hash:{}});b+=h(c)+"\n              ";c=a.filter;c=(g=e.option)?g.call(a,"All","ALL",c,{hash:{}}):l.call(a,"option","All","ALL",c,{hash:{}});b+=h(c)+"\n              ";c=a.filter;c=(g=e.option)?g.call(a,"Closed","CLOSED",c,{hash:{}}):l.call(a,"option","Closed","CLOSED",c,{hash:{}});b+=h(c)+"\n              ";c=a.filter;c=(g=e.option)?g.call(a,"Declined","DECLINED",c,{hash:{}}):l.call(a,
"option","Declined","DECLINED",c,{hash:{}});b+=h(c)+"\n              ";c=a.filter;c=(g=e.option)?g.call(a,"Expired","EXPIRED",c,{hash:{}}):l.call(a,"option","Expired","EXPIRED",c,{hash:{}});b+=h(c)+"\n              ";c=a.filter;c=(g=e.option)?g.call(a,"Open","OPEN",c,{hash:{}}):l.call(a,"option","Open","OPEN",c,{hash:{}});b+=h(c)+'\n            </select>\n          </div>\n        </div>\n        <div class="col-xs-8 col-xs-push-10">\n          <div class="row">\n            <label class="control-label col-xs-6" for="search">Search:</label>\n            <div class="col-xs-18">\n              <input class="form-control" type="text" name="search" id="search" value="';
(g=e.search)?c=g.call(a,{hash:{}}):(c=a.search,c="function"===typeof c?c():c);return b+=h(c)+'">\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div id="table"></div>\n  <div id="pagination" class="pagination"></div>\n</div>\n'});return this.HandlebarsTemplates["invoices/quotes"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["invoices/transactions"]=Handlebars.template(function(b,a,e,c,d){e=e||b.helpers;var f=e.helperMissing,g=this.escapeExpression;b='<table class="table left">\n  <thead>\n    <tr>\n      <th>Date</th>\n      <th>Description</th>\n      <th>Notes</th>\n      <th class="text-right">Total amount</th>\n      <th class="text-right">Amount applied</th>\n    </tr>\n  </thead>\n  <tbody>\n    ';c=a.transactions;if((c=
e.each.call(a,c,{hash:{},inverse:this.noop,fn:this.program(1,function(a,c){var b,d,n,q,p;b="\n      <tr>\n        <td>";d=a.date;d=(p=e.frontendDateFormat)?p.call(a,d,{hash:{}}):f.call(a,"frontendDateFormat",d,{hash:{}});b+=g(d)+"</td>\n        <td>";d=a.description;n=a.journalTransactionId;q=a.journalType;q=null==q||!1===q?q:q.shortName;d=(p=e.linkToTransaction)?p.call(a,q,n,d,{hash:{}}):f.call(a,"linkToTransaction",q,n,d,{hash:{}});b+=g(d)+"</td>\n        <td>";(p=e.note)?d=p.call(a,{hash:{}}):
(d=a.note,d="function"===typeof d?d():d);b+=g(d)+'</td>\n        <td class="text-right">';d=a.amount;d=(p=e.moneyValueFormatWithCommaShowZero)?p.call(a,d,{hash:{}}):f.call(a,"moneyValueFormatWithCommaShowZero",d,{hash:{}});b+=g(d)+'</td>\n        <td class="text-right">';d=a.amountApplied;d=(p=e.moneyValueFormatWithCommaShowZero)?p.call(a,d,{hash:{}}):f.call(a,"moneyValueFormatWithCommaShowZero",d,{hash:{}});return b+=g(d)+"</td>\n      </tr>\n    "},d)}))||0===c)b+=c;b+='\n    <tr>\n      <td>&nbsp;</td>\n      <td>&nbsp;</td>\n      <td>&nbsp;</td>\n      <td class="bold text-right">Total:</td>\n      <td class="bold text-right">';
c=a.totalAmountApplied;c=(d=e.moneyValueFormatWithCommaShowZero)?d.call(a,c,{hash:{}}):f.call(a,"moneyValueFormatWithCommaShowZero",c,{hash:{}});return b+=g(c)+"</td>\n    </tr>\n  </tbody>\n</table>\n"});return this.HandlebarsTemplates["invoices/transactions"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["invoices/unrealised_transaction_grid"]=Handlebars.template(function(b,a,e,c,d){function f(a,b){return'\n        <th>Item</th>\n        <th>Description</th>\n        <th>Allocate to</th>\n        <th class="text-center" colspan="2">Units</th>\n        <th class="text-right">Unit price</th>\n        <th>Tax type</th>\n        <th class="text-right">Amount</th>\n      '}function g(a,b){return'\n        <th>Description</th>\n        <th>Allocate to</th>\n        <th>Tax type</th>\n        <th class="text-right">Amount</th>\n      '}
function h(a,b){var c,d,f;c="\n        ";d=a.layoutType;if((d=(f=e.ifEqual)?f.call(a,d,"COMBINED",{hash:{},inverse:A.program(8,k,b),fn:A.program(6,l,b)}):B.call(a,"ifEqual",d,"COMBINED",{hash:{},inverse:A.program(8,k,b),fn:A.program(6,l,b)}))||0===d)c+=d;return c+"\n      "}function l(a,b){return'\n        <td id="invoiceNotesContainer" colspan="6" rowspan="6">\n        '}function k(a,b){return'\n        <td id="invoiceNotesContainer" colspan="2" rowspan="6">\n        '}function m(a,b){var c,d,f;
c="\n        ";d=a.layoutType;if((d=(f=e.ifEqual)?f.call(a,d,"COMBINED",{hash:{},inverse:A.program(13,q,b),fn:A.program(11,n,b)}):B.call(a,"ifEqual",d,"COMBINED",{hash:{},inverse:A.program(13,q,b),fn:A.program(11,n,b)}))||0===d)c+=d;return c+"\n      "}function n(a,b){return'\n        <td id="invoiceNotesContainer" colspan="6" rowspan="3">\n        '}function q(a,b){return'\n        <td id="invoiceNotesContainer" colspan="2" rowspan="3">\n        '}function p(a,b){return'\n          <div class="col-xs-16" data-id="notes" data-widget="AutosizeTextarea" data-name="notes" data-maxlength="2000"\n               data-autosize="false" data-rows="5" data-cols="200">\n          </div>\n        '}
function t(a,b){return'\n          <div class="col-xs-16" data-id="notes" data-widget="AutosizeTextarea" data-name="notes" data-maxlength="2000"\n               data-autosize="false" data-rows="3" data-cols="200">\n          </div>\n        '}function r(a,b){var c,d,f;c="\n        ";d=a.layoutType;if((d=(f=e.ifEqual)?f.call(a,d,"COMBINED",{hash:{},inverse:A.program(22,v,b),fn:A.program(20,u,b)}):B.call(a,"ifEqual",d,"COMBINED",{hash:{},inverse:A.program(22,v,b),fn:A.program(20,u,b)}))||0===d)c+=d;
return c+"\n      "}function u(a,b){return'\n          <td class="gridPadding" colspan="6"></td>\n        '}function v(a,b){return'\n          <td class="gridPadding" colspan="2"></td>\n        '}function z(a,b){return'\n      <tr>\n        <td class="subTotalLabel" colspan="2"><label>Amount paid</label></td>\n        <td class="subTotalAmount" id="amountPaid"></td>\n        <td class="subTotalDelete">&nbsp;</td>\n      </tr>\n      <tr>\n        <td class="subTotalLabel last total" colspan="2"><label>Amount due</label></td>\n        <td class="subTotalAmount last total" id="amountDue"></td>\n        <td class="subTotalDelete last total">&nbsp;</td>\n      </tr>\n    '}
function y(a,b){var c,d,f;c="\n      <tr>\n        ";d=a.layoutType;if((d=(f=e.ifEqual)?f.call(a,d,"COMBINED",{hash:{},inverse:A.program(29,F,b),fn:A.program(27,D,b)}):B.call(a,"ifEqual",d,"COMBINED",{hash:{},inverse:A.program(29,F,b),fn:A.program(27,D,b)}))||0===d)c+=d;return c+'\n        <td class="subTotalBottom last" colspan="4">&nbsp;</td>\n      </tr>\n    '}function D(a,b){return'\n          <td class="subTotalBottom" colspan="6">&nbsp;</td>\n        '}function F(a,b){return'\n          <td class="subTotalBottom" colspan="2">&nbsp;</td>\n        '}
e=e||b.helpers;var w,A=this,B=e.helperMissing,C=this.escapeExpression;b='<div class="col-xs-24">\n  <table id="invoiceLinesTable" class="table table-bordered table-condensed">\n    <thead>\n    <tr>\n      <th>&nbsp;</th>\n      ';c=a.layoutType;if((c=(w=e.ifEqual)?w.call(a,c,"COMBINED",{hash:{},inverse:A.program(3,g,d),fn:A.program(1,f,d)}):B.call(a,"ifEqual",c,"COMBINED",{hash:{},inverse:A.program(3,g,d),fn:A.program(1,f,d)}))||0===c)b+=c;b+='\n      <th>&nbsp;</th>\n    </tr>\n    </thead>\n    <tbody id="invoiceLines"></tbody>\n    <tfoot>\n    <tr>\n      ';
c=a.type;if((c=(w=e.ifEqual)?w.call(a,c,"invoice",{hash:{},inverse:A.noop,fn:A.program(5,h,d)}):B.call(a,"ifEqual",c,"invoice",{hash:{},inverse:A.noop,fn:A.program(5,h,d)}))||0===c)b+=c;b+="\n      ";c=a.type;if((c=(w=e.ifEqual)?w.call(a,c,"quote",{hash:{},inverse:A.noop,fn:A.program(10,m,d)}):B.call(a,"ifEqual",c,"quote",{hash:{},inverse:A.noop,fn:A.program(10,m,d)}))||0===c)b+=c;b+='\n      <div class="row">\n        <div class="col-xs-16">\n          <label class="control-label" for="notes">Notes to ';
c=a.recipient;c=(w=e.toLowerCase)?w.call(a,c,{hash:{}}):B.call(a,"toLowerCase",c,{hash:{}});b+=C(c)+'</label>\n          <label class="checkbox pull-right">\n            <input id="rememberNote" type="checkbox"/> Remember this?\n          </label>\n        </div>\n      </div>\n      <div class="row">\n        ';c=a.type;if((c=(w=e.ifEqual)?w.call(a,c,"invoice",{hash:{},inverse:A.noop,fn:A.program(15,p,d)}):B.call(a,"ifEqual",c,"invoice",{hash:{},inverse:A.noop,fn:A.program(15,p,d)}))||0===c)b+=c;
b+="\n        ";c=a.type;if((c=(w=e.ifEqual)?w.call(a,c,"quote",{hash:{},inverse:A.noop,fn:A.program(17,t,d)}):B.call(a,"ifEqual",c,"quote",{hash:{},inverse:A.noop,fn:A.program(17,t,d)}))||0===c)b+=c;b+='\n      </div>\n    </td>\n      <td class="subTotalLabel" colspan="2"><label>Subtotal</label></td>\n      <td class="subTotalAmount" id="subtotal"></td>\n      <td class="subTotalDelete">&nbsp;</td>\n    </tr>\n    <tr>\n      <td class="subTotalLabel" colspan="2"><label>GST</label></td>\n      <td class="subTotalAmount" id="gst"></td>\n      <td class="subTotalDelete">&nbsp;</td>\n    </tr>\n    <tr>\n      <td class="subTotalLabel total" colspan="2"><label>Total</label></td>\n      <td class="subTotalAmount total" id="total"></td>\n      <td class="subTotalDelete total">&nbsp;</td>\n    </tr>\n    <tr>\n      ';
c=a.type;if((c=(w=e.ifEqual)?w.call(a,c,"quote",{hash:{},inverse:A.noop,fn:A.program(19,r,d)}):B.call(a,"ifEqual",c,"quote",{hash:{},inverse:A.noop,fn:A.program(19,r,d)}))||0===c)b+=c;b+='\n      <td class="last error-message" id="totalError" colspan="4"></td>\n    </tr>\n    ';c=a.type;if((c=(w=e.ifEqual)?w.call(a,c,"invoice",{hash:{},inverse:A.noop,fn:A.program(24,z,d)}):B.call(a,"ifEqual",c,"invoice",{hash:{},inverse:A.noop,fn:A.program(24,z,d)}))||0===c)b+=c;b+="\n    ";c=a.type;if((c=(w=e.ifEqual)?
w.call(a,c,"quote",{hash:{},inverse:A.noop,fn:A.program(26,y,d)}):B.call(a,"ifEqual",c,"quote",{hash:{},inverse:A.noop,fn:A.program(26,y,d)}))||0===c)b+=c;return b+"\n    </tfoot>\n  </table>\n</div>\n"});return this.HandlebarsTemplates["invoices/unrealised_transaction_grid"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["invoices/unrealised_transaction_line"]=Handlebars.template(function(b,a,e,c,d){function f(a,b){var c,d;c="\n  ";d=(d=e.includePartial)?d.call(a,"bill_line",{hash:{}}):m.call(a,"includePartial","bill_line",{hash:{}});return c+=n(d)+"\n"}function g(a,b){var c,d,f;c="\n  ";d=a.layoutType;if((d=(f=e.ifEqual)?f.call(a,d,"COMBINED",{hash:{},inverse:q.program(6,l,b),fn:q.program(4,h,b)}):m.call(a,"ifEqual",d,"COMBINED",
{hash:{},inverse:q.program(6,l,b),fn:q.program(4,h,b)}))||0===d)c+=d;return c+"\n"}function h(a,b){var c,d;c="\n    ";d=(d=e.includePartial)?d.call(a,"combined_invoice_quote_line",{hash:{}}):m.call(a,"includePartial","combined_invoice_quote_line",{hash:{}});return c+=n(d)+"\n\n  "}function l(a,b){var c,d;c="\n    ";d=(d=e.includePartial)?d.call(a,"service_invoice_quote_line",{hash:{}}):m.call(a,"includePartial","service_invoice_quote_line",{hash:{}});return c+=n(d)+"\n  "}e=e||b.helpers;var k,m=e.helperMissing,
n=this.escapeExpression,q=this;b='<td class="move-and-insert-container">\n  <i class="move-row myob-icon-move"></i>\n  <i class="insert-row myob-icon-add-18"></i>\n</td>\n\n';c=a.type;if((c=(k=e.ifEqual)?k.call(a,c,"bill",{hash:{},inverse:q.program(3,g,d),fn:q.program(1,f,d)}):m.call(a,"ifEqual",c,"bill",{hash:{},inverse:q.program(3,g,d),fn:q.program(1,f,d)}))||0===c)b+=c;return b+'\n\n<td class="close-container">\n  <i class="delete myob-icon-remove-2"></i>\n</td>\n'});return this.HandlebarsTemplates["invoices/unrealised_transaction_line"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["items/item"]=Handlebars.template(function(b,a,e,c,d){function f(a,b){var c,d,f;c="\n  ";d={heading:"Item is inactive"};d=(f=e.includePartial)?f.call(a,"page_heading",{hash:d}):t.call(a,"includePartial","page_heading",{hash:d});return c+=r(d)+"\n"}function g(a,b){var c,d,f;c="\n  ";d={heading:"Item"};d=(f=e.includePartial)?f.call(a,"page_heading",{hash:d}):t.call(a,"includePartial","page_heading",{hash:d});
return c+=r(d)+"\n"}function h(a,c){return"service"}function l(a,c){return"stock"}function k(a,c){return'\n          <button id="makeInactive" name="makeInactive" class="btn btn-default action">Make inactive</button>\n        '}function m(a,c){return'\n          <button id="makeActive" name="makeActive" class="btn btn-default action">Make active</button>\n        '}function n(a,c){return"disabled"}function q(a,c){return'\n                rel="tooltip" data-selector="#destroyTooltip" data-loading-text="Deleting..." data-title="This item is used in transactions and cannot be deleted." data-placement="bottom"\n          '}
e=e||b.helpers;b="";var p,t=e.helperMissing,r=this.escapeExpression,u=this;c=a.active;if((c=(p=e.ifEqual)?p.call(a,c,!1,{hash:{},inverse:u.program(3,g,d),fn:u.program(1,f,d)}):t.call(a,"ifEqual",c,!1,{hash:{},inverse:u.program(3,g,d),fn:u.program(1,f,d)}))||0===c)b+=c;b+='\n\n<div id="itemContainer">\n  <div id="itemDetails" class="row">\n    <div class="col-xs-12">\n      <div class="form-horizontal">\n        ';c={inputLabel:"Item number",inputName:"number","data-maxlength":"30"};c=(p=e.TextInput)?
p.call(a,{hash:c}):t.call(a,"TextInput",{hash:c});b+=r(c)+"\n        ";c={inputLabel:"Item name",inputName:"name","data-maxlength":"30"};c=(p=e.TextInput)?p.call(a,{hash:c}):t.call(a,"TextInput",{hash:c});b+=r(c)+'\n        <div class="form-group">\n          <label class="col-xs-8 control-label" for="description">Description</label>\n          <div class="col-xs-16 form-control-wrapper">\n            <textarea id="description" name="description" rows="4" cols="150" class="form-control">';(p=e.description)?
c=p.call(a,{hash:{}}):(c=a.description,c="function"===typeof c?c():c);b+=r(c)+'</textarea>\n            <div id="descriptionHint" class="subText">If this field is left blank, the item name will be used as the description for invoices and bills.</div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n\n  <div id="buyingAndSellingDetails" class="row">\n    <div class="col-xs-12">\n      <div class="form-horizontal">\n        <div class="form-group">\n          <h3 class="col-xs-24">Selling details</h3>\n        </div>\n\n        <div class="form-group">\n          <label for="salePrice" class="col-xs-8 control-label">Sell price</label>\n          <div class="col-xs-14 form-control-wrapper">\n            <div data-id="salePrice" data-widget="MoneyInput" data-name="salePrice" class="pull-left" data-css-class="input-width-medium"\n                 data-valid-regex="^[-\\+]?\\d{0,2},?\\d{0,3}(\\.\\d{0,4})?$" data-invalid-regex="[,\\.]{2}" data-decimal-places="4"></div>\n            <div class="pull-right subText">excluding tax</div>\n            \x3c!--This is required so that error messages show under the input--\x3e\n            <div class="clearfix"></div>\n          </div>\n        </div>\n\n        ';
c={inputLabel:"Allocated to",inputName:"saleAccountId","data-collection":"saleAccounts","data-labels":"number,name,type","data-label-field":"name","data-width":"250px"};c=(p=e.TypeaheadDropdown)?p.call(a,{hash:c}):t.call(a,"TypeaheadDropdown",{hash:c});b+=r(c)+"\n\n        ";c={inputLabel:"Tax type",inputName:"saleGstCode","data-collection":"sellGstTypes","data-labels":"name,rateLabel:right","data-value-field":"gstCode","data-width":"250px"};c=(p=e.TypeaheadDropdown)?p.call(a,{hash:c}):t.call(a,"TypeaheadDropdown",
{hash:c});b+=r(c)+'\n\n        <div class="form-group">\n          <label for="unitOfMeasure" class="col-xs-8 control-label">Unit of measure</label>\n          <div class="col-xs-16 form-control-wrapper">\n            <select id="unitOfMeasure" name="unitOfMeasure" class="form-control input-width-small">\n              ';c=a.unitOfMeasure;c=(p=e.option)?p.call(a,"Qty","Qty",c,{hash:{}}):t.call(a,"option","Qty","Qty",c,{hash:{}});b+=r(c)+"\n              ";c=a.unitOfMeasure;c=(p=e.option)?p.call(a,
"Hrs","Hrs",c,{hash:{}}):t.call(a,"option","Hrs","Hrs",c,{hash:{}});b+=r(c)+'\n            </select>\n            <span id="unitOfMeasureDescription" class="subText">This is a ';c=a.unitOfMeasure;if((c=(p=e.ifEqual)?p.call(a,c,"Hrs",{hash:{},inverse:u.program(7,l,d),fn:u.program(5,h,d)}):t.call(a,"ifEqual",c,"Hrs",{hash:{},inverse:u.program(7,l,d),fn:u.program(5,h,d)}))||0===c)b+=c;b+=" item</span>\n          </div>\n        </div>\n\n        ";c={inputLabel:"Unit description",inputName:"unitDescription",
"data-maxlength":"30"};c=(p=e.TextInput)?p.call(a,{hash:c}):t.call(a,"TextInput",{hash:c});b+=r(c)+'\n      </div>\n    </div>\n\n    <div class="col-xs-12">\n      <div class="form-horizontal">\n        <div class="form-group">\n          <h3 class="col-xs-24">Buying details</h3>\n        </div>\n\n        <div class="form-group">\n          <label class="col-xs-8 control-label" for="purchasePrice">Buy price</label>\n          <div class="col-xs-14 form-control-wrapper">\n            <div data-id="purchasePrice" data-widget="MoneyInput" data-name="purchasePrice" class="pull-left" data-css-class="input-width-medium"\n                 data-valid-regex="^[-\\+]?\\d{0,2},?\\d{0,3}(\\.\\d{0,4})?$" data-invalid-regex="[,\\.]{2}" data-decimal-places="4"></div>\n            <div class="pull-right subText">excluding tax</div>\n            \x3c!--This is required so that error messages show under the input--\x3e\n            <div class="clearfix"></div>\n          </div>\n        </div>\n\n        ';
c={inputLabel:"Allocated to",inputName:"purchaseAccountId","data-collection":"purchaseAccounts","data-labels":"number,name,type","data-label-field":"name","data-width":"250px"};c=(p=e.TypeaheadDropdown)?p.call(a,{hash:c}):t.call(a,"TypeaheadDropdown",{hash:c});b+=r(c)+"\n\n        ";c={inputLabel:"Tax type",inputName:"purchaseGstCode","data-collection":"buyGstTypes","data-labels":"name,rateLabel:right","data-value-field":"gstCode","data-width":"250px"};c=(p=e.TypeaheadDropdown)?p.call(a,{hash:c}):
t.call(a,"TypeaheadDropdown",{hash:c});b+=r(c)+'\n      </div>\n    </div>\n  </div>\n\n  <div id="buttons" class="top-buffer row">\n    <div class="col-xs-12">\n      ';c=a.id;if((c=e["if"].call(a,c,{hash:{},inverse:u.noop,fn:u.program(9,function(a,c){var b,d,f;b="\n        ";d=a.active;if((d=(f=e.ifEqual)?f.call(a,d,!0,{hash:{},inverse:u.program(12,m,c),fn:u.program(10,k,c)}):t.call(a,"ifEqual",d,!0,{hash:{},inverse:u.program(12,m,c),fn:u.program(10,k,c)}))||0===d)b+=d;b+='\n        <button id="destroy" name="destroy" class="btn btn-default ';
d=a.usedByInvoiceExpenseOrQuote;if((d=(f=e.ifEqual)?f.call(a,d,!0,{hash:{},inverse:u.noop,fn:u.program(14,n,c)}):t.call(a,"ifEqual",d,!0,{hash:{},inverse:u.noop,fn:u.program(14,n,c)}))||0===d)b+=d;b+='"\n          ';d=a.usedByInvoiceExpenseOrQuote;if((d=(f=e.ifEqual)?f.call(a,d,!0,{hash:{},inverse:u.noop,fn:u.program(16,q,c)}):t.call(a,"ifEqual",d,!0,{hash:{},inverse:u.noop,fn:u.program(16,q,c)}))||0===d)b+=d;return b+'>Delete</button>\n        <span id="destroyTooltip"></span>\n      '},d)}))||0===
c)b+=c;return b+'\n    </div>\n    <div class="col-xs-12">\n      <div class="pull-right">\n        <button id="save" name="save" class="btn btn-primary action">Save</button>\n        <button id="saveAddAnother" class="btn btn-default action" data-loading-text="Saving...">Save &amp; add another</button>\n        <button id="cancel" name="cancel" class="btn btn-default">Cancel</button>\n      </div>\n    </div>\n  </div>\n\n</div>\n\n'});return this.HandlebarsTemplates["items/item"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["items/item_header"]=Handlebars.template(function(b,a,e,c,d){return'<tr>\n  <th data-field="number" class="asc">Number<i class="fa fa-caret-up"></i></th>\n  <th data-field="name">Name</th>\n  <th data-field="description">Description</th>\n  <th data-field="salePrice" class="text-right">Price (excl. tax)</th>\n  <th data-field="type">Type</th>\n</tr>\n'});return this.HandlebarsTemplates["items/item_header"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["items/item_row"]=Handlebars.template(function(b,a,e,c,d){function f(a,c){return"inactive"}function g(a,c){return"inactive"}function h(a,c){return"inactive"}function l(a,c){return"inactive"}function k(a,c){return"inactive"}e=e||b.helpers;var m,n=e.helperMissing,q=this.escapeExpression;b='<td id="numberCol" class="';c=a.active;if((c=(m=e.ifEqual)?m.call(a,c,!1,{hash:{},inverse:this.noop,fn:this.program(1,f,
d)}):n.call(a,"ifEqual",c,!1,{hash:{},inverse:this.noop,fn:this.program(1,f,d)}))||0===c)b+=c;b+='"><a href="#businesses/';(m=e.businessId)?c=m.call(a,{hash:{}}):(c=a.businessId,c="function"===typeof c?c():c);b+=q(c)+"/";(m=e.menu)?c=m.call(a,{hash:{}}):(c=a.menu,c="function"===typeof c?c():c);b+=q(c)+"/items/";(m=e.id)?c=m.call(a,{hash:{}}):(c=a.id,c="function"===typeof c?c():c);b+=q(c)+'">';(m=e.number)?c=m.call(a,{hash:{}}):(c=a.number,c="function"===typeof c?c():c);b+=q(c)+'</a></td>\n<td id="nameCol" class="';
c=a.active;if((c=(m=e.ifEqual)?m.call(a,c,!1,{hash:{},inverse:this.noop,fn:this.program(3,g,d)}):n.call(a,"ifEqual",c,!1,{hash:{},inverse:this.noop,fn:this.program(3,g,d)}))||0===c)b+=c;b+='"><a href="#businesses/';(m=e.businessId)?c=m.call(a,{hash:{}}):(c=a.businessId,c="function"===typeof c?c():c);b+=q(c)+"/";(m=e.menu)?c=m.call(a,{hash:{}}):(c=a.menu,c="function"===typeof c?c():c);b+=q(c)+"/items/";(m=e.id)?c=m.call(a,{hash:{}}):(c=a.id,c="function"===typeof c?c():c);b+=q(c)+'">';(m=e.name)?c=
m.call(a,{hash:{}}):(c=a.name,c="function"===typeof c?c():c);b+=q(c)+'</a></td>\n<td id="descriptionCol" class="';c=a.active;if((c=(m=e.ifEqual)?m.call(a,c,!1,{hash:{},inverse:this.noop,fn:this.program(5,h,d)}):n.call(a,"ifEqual",c,!1,{hash:{},inverse:this.noop,fn:this.program(5,h,d)}))||0===c)b+=c;b+='">';(m=e.description)?c=m.call(a,{hash:{}}):(c=a.description,c="function"===typeof c?c():c);b+=q(c)+'</td>\n<td id="salePriceCol" class="text-right ';c=a.active;if((c=(m=e.ifEqual)?m.call(a,c,!1,{hash:{},
inverse:this.noop,fn:this.program(7,l,d)}):n.call(a,"ifEqual",c,!1,{hash:{},inverse:this.noop,fn:this.program(7,l,d)}))||0===c)b+=c;b+='">';c=a.salePrice;c=(m=e.moneyValueFormat2or4DecimalPlaces)?m.call(a,c,{hash:{}}):n.call(a,"moneyValueFormat2or4DecimalPlaces",c,{hash:{}});b+=q(c)+'</td>\n<td id="typeCol" class="';c=a.active;if((c=(m=e.ifEqual)?m.call(a,c,!1,{hash:{},inverse:this.noop,fn:this.program(9,k,d)}):n.call(a,"ifEqual",c,!1,{hash:{},inverse:this.noop,fn:this.program(9,k,d)}))||0===c)b+=
c;b+='">';(m=e.type)?c=m.call(a,{hash:{}}):(c=a.type,c="function"===typeof c?c():c);return b+=q(c)+"</td>\n"});return this.HandlebarsTemplates["items/item_row"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["items/items"]=Handlebars.template(function(b,a,e,c,d){function f(a,c){var b,d;b='\n    <button id="createButton" class="btn btn-primary action">Create ';(d=e.modelName)?d=d.call(a,{hash:{}}):(d=a.modelName,d="function"===typeof d?d():d);return b+=h(d)+"</button>\n  "}e=e||b.helpers;var g,h=this.escapeExpression,l=e.helperMissing;b='<div class="loadingSpinner"></div>\n\n<div id="page">\n\n  ';c={};c.heading=
a.modelName;c.headingSuffix="s";if((c=(g=e.pageHeading)?g.call(a,{hash:c,inverse:this.noop,fn:this.program(1,f,d)}):l.call(a,"pageHeading",{hash:c,inverse:this.noop,fn:this.program(1,f,d)}))||0===c)b+=c;b+='\n\n  <hr/>\n\n  <div id="itemListContainer">\n    <div id="toolbar" class="form-horizontal">\n      <div class="form-group">\n        <div class="col-xs-6 col-xs-push-10">\n          <div class="input-width-large">\n            <select class="form-control" id="filter" name="filter">\n              ';
c=a.filter;c=(g=e.option)?g.call(a,"Active items","ACTIVE",c,{hash:{}}):l.call(a,"option","Active items","ACTIVE",c,{hash:{}});b+=h(c)+"\n              ";c=a.filter;c=(g=e.option)?g.call(a,"All items","ALL",c,{hash:{}}):l.call(a,"option","All items","ALL",c,{hash:{}});b+=h(c)+"\n              ";c=a.filter;c=(g=e.option)?g.call(a,"Items I sell","SELL",c,{hash:{}}):l.call(a,"option","Items I sell","SELL",c,{hash:{}});b+=h(c)+"\n              ";c=a.filter;c=(g=e.option)?g.call(a,"Items I buy","BUY",
c,{hash:{}}):l.call(a,"option","Items I buy","BUY",c,{hash:{}});b+=h(c)+"\n              ";c=a.filter;c=(g=e.option)?g.call(a,"Items I buy and sell","BUY_AND_SELL",c,{hash:{}}):l.call(a,"option","Items I buy and sell","BUY_AND_SELL",c,{hash:{}});b+=h(c)+"\n              ";c=a.filter;c=(g=e.option)?g.call(a,"Inactive items","INACTIVE",c,{hash:{}}):l.call(a,"option","Inactive items","INACTIVE",c,{hash:{}});b+=h(c)+"\n              ";c=a.filter;c=(g=e.option)?g.call(a,"Stock items","STOCK",c,{hash:{}}):
l.call(a,"option","Stock items","STOCK",c,{hash:{}});b+=h(c)+"\n              ";c=a.filter;c=(g=e.option)?g.call(a,"Service items","SERVICE",c,{hash:{}}):l.call(a,"option","Service items","SERVICE",c,{hash:{}});return b+=h(c)+'\n            </select>\n          </div>\n        </div>\n        <div class="col-xs-8 col-xs-push-10">\n          <div class="row">\n            <label class="control-label col-xs-6" for="search">Search:</label>\n            <div class="col-xs-18">\n              <input class="form-control" type="text" name="search" id="search" value="">\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div id="table"></div>\n    <div id="pagination" class="pagination"></div>\n  </div>\n</div>\n'});
return this.HandlebarsTemplates["items/items"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["meettheteam/meet_the_team"]=Handlebars.template(function(b,a,e,c,d){function f(a,c){return'\n                      <i class="fa fa-coffee"></i>\n                  '}function g(a,c){return'\n                    <i class="fa fa-coffee"></i>\n                  '}e=e||b.helpers;var h=this.escapeExpression,l=this,k=e.helperMissing;b='<div id="meet-the-team-div" class="modal-dialog">\n  <div class="modal-content">\n    <div>\n      <button id="closeButton" type="button" class="close close-inverse" data-dismiss="modal"\n              aria-hidden="true">&times;\n      </button>\n    </div>\n    <div class="row"></div>\n    <div class="banner"></div>\n    <div class="modal-body">\n      <div class="row">\n      ';c=
a.randomTeamCollection;if((c=e.each.call(a,c,{hash:{},inverse:l.noop,fn:l.program(1,function(a,c){var b,d,t;b='\n          <div id="';(t=e.id)?d=t.call(a,{hash:{}}):(d=a.id,d="function"===typeof d?d():d);b+=h(d)+'" class="flip-container col-xs-6" ontouchon="this.classList.toggle(\'hover\')\'">\n            <div class="flipper">\n              <div class="front"></div>\n              <div class="back">\n                <h3>';(t=e.name)?d=t.call(a,{hash:{}}):(d=a.name,d="function"===typeof d?d():d);
b+=h(d)+"</h3>\n                <hr/>\n                <p>Strength: ";(t=e.strength)?d=t.call(a,{hash:{}}):(d=a.strength,d="function"===typeof d?d():d);b+=h(d)+"</p>\n                <p>Weakness: ";(t=e.weakness)?d=t.call(a,{hash:{}}):(d=a.weakness,d="function"===typeof d?d():d);b+=h(d)+"</p>\n                <p>Coffee level:\n                  ";d=a.coffeeLevel;if((d=(t=e.forLoop)?t.call(a,d,{hash:{},inverse:l.noop,fn:l.program(2,f,c)}):k.call(a,"forLoop",d,{hash:{},inverse:l.noop,fn:l.program(2,
f,c)}))||0===d)b+=d;b+="\n                </p>\n                <p>Tea level:\n                  ";d=a.teaLevel;if((d=(t=e.forLoop)?t.call(a,d,{hash:{},inverse:l.noop,fn:l.program(4,g,c)}):k.call(a,"forLoop",d,{hash:{},inverse:l.noop,fn:l.program(4,g,c)}))||0===d)b+=d;return b+"\n                </p>\n              </div>\n            </div>\n          </div>\n        "},d)}))||0===c)b+=c;return b+'\n      </div>\n\n      <div class="row">\n        <button type="button" class="btn btn-success btn-lg lucky-button"> I\'m feeling sooo lucky! </button>\n      </div>\n\n    </div>\n  </div>\n</div>\n'});
return this.HandlebarsTemplates["meettheteam/meet_the_team"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["message/simple_message"]=Handlebars.template(function(b,a,e,c,d){function f(a,b){var c,d;c="\n  <strong>";d=a.data;d=null==d||!1===d?d:d.title;d="function"===typeof d?d():d;return c+=k(d)+"</strong>\n"}function g(a,b){var c,d;c="\n  <div>";d=a.data;d=null==d||!1===d?d:d.message;d="function"===typeof d?d():d;return c+=k(d)+"</div>\n"}function h(a,c){var b,d;b="\n  <div>";d=a.data;d=null==d||!1===d?d:d.html_message;
if((d="function"===typeof d?d():d)||0===d)b+=d;return b+"</div>\n"}e=e||b.helpers;var l,k=this.escapeExpression,m=e.helperMissing;b='<button type="button" class="close" data-dismiss="alert" aria-hidden="true" data-key="';(l=e.key)?c=l.call(a,{hash:{}}):(c=a.key,c="function"===typeof c?c():c);b+=k(c)+'">\n  <i class="fa fa-times-circle"></i>\n</button>\n';c=a.data;c=null==c||!1===c?c:c.title;if((c=(l=e.unlessBlank)?l.call(a,c,{hash:{},inverse:this.noop,fn:this.program(1,f,d)}):m.call(a,"unlessBlank",
c,{hash:{},inverse:this.noop,fn:this.program(1,f,d)}))||0===c)b+=c;b+="\n";c=a.data;c=null==c||!1===c?c:c.message;if((c=(l=e.unlessBlank)?l.call(a,c,{hash:{},inverse:this.noop,fn:this.program(3,g,d)}):m.call(a,"unlessBlank",c,{hash:{},inverse:this.noop,fn:this.program(3,g,d)}))||0===c)b+=c;b+="\n";c=a.data;c=null==c||!1===c?c:c.html_message;if((c=(l=e.unlessBlank)?l.call(a,c,{hash:{},inverse:this.noop,fn:this.program(5,h,d)}):m.call(a,"unlessBlank",c,{hash:{},inverse:this.noop,fn:this.program(5,h,
d)}))||0===c)b+=c;return b+"\n"});return this.HandlebarsTemplates["message/simple_message"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["message/welcome_message"]=Handlebars.template(function(b,a,e,c,d){function f(a,b){var c,d;c="\n      <h2>";d=a.data;d=null==d||!1===d?d:d.title;d="function"===typeof d?d():d;return c+=h(d)+"</h2>\n    "}e=e||b.helpers;var g,h=this.escapeExpression,l=e.helperMissing;b='<button type="button" class="close" data-dismiss="alert" aria-hidden="true" data-key="';(g=e.key)?c=g.call(a,{hash:{}}):(c=a.key,c="function"===
typeof c?c():c);b+=h(c)+'">\n  <i class="fa fa-times-circle"></i>\n</button>\n<div class="row">\n\n  <div class="col-xs-12">\n    ';c=a.data;c=null==c||!1===c?c:c.title;if((c=(g=e.unlessBlank)?g.call(a,c,{hash:{},inverse:this.noop,fn:this.program(1,f,d)}):l.call(a,"unlessBlank",c,{hash:{},inverse:this.noop,fn:this.program(1,f,d)}))||0===c)b+=c;b+="\n    <div>";c=a.data;c=null==c||!1===c?c:c.message;c="function"===typeof c?c():c;return b+=h(c)+'</div>\n  </div>\n  <div class="col-xs-12">\n    <iframe src="//fast.wistia.net/embed/iframe/wbwrb4u3wq?videoFoam=true" allowtransparency="true" frameborder="0" scrolling="no" class="wistia_embed" name="wistia_embed" allowfullscreen mozallowfullscreen webkitallowfullscreen oallowfullscreen msallowfullscreen width="400" height="225"></iframe><script src="//fast.wistia.net/assets/external/iframe-api-v1.js">\x3c/script>\n  </div>\n\n</div>\n'});
return this.HandlebarsTemplates["message/welcome_message"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["payroll/employees/super_fund_details"]=Handlebars.template(function(b,a,e,c,d){e=e||b.helpers;var f=e.helperMissing,g=this.escapeExpression;b='<div class="tabContentSeparator"></div>\n<h3>Fund details</h3>\n<div class="alert alert-warning nonEditableAlert hidden">\n    Sorry, we can\'t get fund details at the moment. Try again in a few hours.\n</div>\n<div class="formRow">\n  ';c={inputLabel:"Fund type:",
inputName:"fundType",labelCssClass:"formRowKey formLabel",widgetCssClass:"","data-collection":"superFundTypes","data-name-field":"name","data-value-field":"value"};c=(d=e.Select)?d.call(a,{hash:c}):f.call(a,"Select",{hash:c});b+=g(c)+'\n</div>\n<div class="bottom-buffer-lg">\n    <div id="SMSFGroup">\n        <div class="formRow">\n          ';c={inputLabel:"Fund name:",inputName:"fundNameFreeText","data-maxlength":"100",labelCssClass:"formRowKey formLabel"};c=(d=e.TextInput)?d.call(a,{hash:c}):f.call(a,
"TextInput",{hash:c});b+=g(c)+'\n        </div>\n        <div class="formRow abnRow">\n          ';c={inputLabel:"ABN:",inputName:"fundABNOfSMSF","data-valid-regex":"^\\d{0,11}$",labelCssClass:"formRowKey formLabel"};c=(d=e.RegexInput)?d.call(a,{hash:c}):f.call(a,"RegexInput",{hash:c});b+=g(c)+'\n        </div>\n        <div class="formRow">\n          ';c={inputLabel:"ESA:",inputName:"smsfESA",labelCssClass:"formRowKey formLabel","data-collection":"electronicServiceAddresses","data-name":"alias",
"data-value-field":"alias","data-labels":"alias","data-prompt":"Select an ESA"};c=(d=e.TypeaheadDropdown)?d.call(a,{hash:c}):f.call(a,"TypeaheadDropdown",{hash:c});b+=g(c)+'\n        </div>\n        <div class="formRow">\n          ';c={inputLabel:"Bank account name:","data-maxlength":"100",inputName:"smsfAccountName",labelCssClass:"formRowKey formLabel"};c=(d=e.TextInput)?d.call(a,{hash:c}):f.call(a,"TextInput",{hash:c});b+=g(c)+'\n        </div>\n        <div class="formRow accountRow">\n          ';
c={inputLabel:"BSB:","data-valid-regex":"^\\d{0,6}$",inputName:"smsfBSB",labelCssClass:"formRowKey formLabel"};c=(d=e.RegexInput)?d.call(a,{hash:c}):f.call(a,"RegexInput",{hash:c});b+=g(c)+"\n          ";c={inputLabel:"Account:","data-valid-regex":"^\\d{0,10}$",inputName:"smsfAccountNumber",labelCssClass:"formRowKey formLabel smsfAccountNumberLabel"};c=(d=e.RegexInput)?d.call(a,{hash:c}):f.call(a,"RegexInput",{hash:c});b+=g(c)+'\n        </div>\n    </div>\n    <div id="APRAGroup">\n        <div class="formRow">\n          ';
c={inputLabel:"Fund name:",inputName:"fundNameSelect",labelCssClass:"formRowKey formLabel","data-collection":"apraFunds","data-name":"fundNameSelect","data-value-field":"name","data-labels":"name","data-prompt":"Select a fund"};c=(d=e.TypeaheadDropdown)?d.call(a,{hash:c}):f.call(a,"TypeaheadDropdown",{hash:c});b+=g(c)+'\n        </div>\n        <div class="formRow">\n          ';c={inputLabel:"SPIN/USI:",inputName:"apraUsi",labelCssClass:"formRowKey formLabel","data-readonly":"readonly"};c=(d=e.TextInput)?
d.call(a,{hash:c}):f.call(a,"TextInput",{hash:c});b+=g(c)+'\n        </div>\n        <div class="formRow">\n          ';c={inputLabel:"ABN:",inputName:"fundABNOfAPRA",labelCssClass:"formRowKey formLabel","data-readonly":"readonly"};c=(d=e.TextInput)?d.call(a,{hash:c}):f.call(a,"TextInput",{hash:c});b+=g(c)+'\n        </div>\n        <div class="formRow">\n          ';c={inputLabel:"Employer membership no:",inputName:"employerMembershipNumber","data-maxlength":"16",labelCssClass:"formRowKey formLabel"};
c=(d=e.TextInput)?d.call(a,{hash:c}):f.call(a,"TextInput",{hash:c});b+=g(c)+'\n        </div>\n        <div class="formRow">\n          ';c={inputLabel:"Employee membership. no:",inputName:"employeeMembershipNumber","data-maxlength":"16",labelCssClass:"formRowKey formLabel"};c=(d=e.TextInput)?d.call(a,{hash:c}):f.call(a,"TextInput",{hash:c});b+=g(c)+'\n        </div>\n\n        <div class="formRow">\n          <h4>Not required if you use MYOB\'s super portal</h4>\n        </div>\n\n      <div class="formRow">\n        ';
c={inputLabel:"Bank account name:","data-maxlength":"100",inputName:"apraAccountName",labelCssClass:"formRowKey formLabel"};c=(d=e.TextInput)?d.call(a,{hash:c}):f.call(a,"TextInput",{hash:c});b+=g(c)+'\n      </div>\n      <div class="formRow accountRow">\n        ';c={inputLabel:"BSB:","data-valid-regex":"^\\d{0,6}$",inputName:"apraBSB",labelCssClass:"formRowKey\n          formLabel"};c=(d=e.RegexInput)?d.call(a,{hash:c}):f.call(a,"RegexInput",{hash:c});b+=g(c)+"\n        ";c={inputLabel:"Account:",
"data-valid-regex":"^\\d{0,10}$",inputName:"apraAccountNumber",labelCssClass:"formRowKey formLabel smsfAccountNumberLabel"};c=(d=e.RegexInput)?d.call(a,{hash:c}):f.call(a,"RegexInput",{hash:c});b+=g(c)+'\n      </div>\n    </div>\n    <div class="right superFundHelp">\n      <div class="superFundAlert alert-warning alert right hidden">\n          <div class="superFundNameAlert">\n              <p>Choose the registered fund name or enter the self-managed fund name for:</p>\n\n              <p class="bold super-fund-alert-p">';
(d=e.superFundNameOld)?c=d.call(a,{hash:{}}):(c=a.superFundNameOld,c="function"===typeof c?c():c);b+=g(c)+'</p>\n          </div>\n          <div class="superFundNumberAlert hidden">\n              <p>Enter the employee\u2019s membership number. Previously, it was:</p>\n\n              <p class="bold super-fund-alert-p">';(d=e.superFundNumber)?c=d.call(a,{hash:{}}):(c=a.superFundNumber,c="function"===typeof c?c():c);return b+=g(c)+'</p>\n          </div>\n          <div class="superFundAlertDescription">\n              <p><strong>Why do I need to do this?</strong><br />\n                  New ATO rules from 2015 have stricter requirements for fund names.<a href="http://help.myob.com/wiki/x/moCB" target="_blank">Find out more.</a></p>\n          </div>\n      </div>\n      <div class="superFundMessage">\n          <p>Add the details of the employee\u2019s super fund.</p>\n          <span>For standard (APRA-registered) funds, choose an approved fund from the list.</span>\n          <span>For self-managed super funds (SMSFs), type the fund name.</span>\n      </div>\n    </div>\n</div>\n'});
return this.HandlebarsTemplates["payroll/employees/super_fund_details"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["payroll/employees/super_guarantee"]=Handlebars.template(function(b,a,e,c,d){return'<div class="clear"></div>\n<h3>Super guarantee</h3>\n<div class="formRow description">\n    <p>Superannuation is calculated on earnings except for overtime, of $450 or more in a calendar month.</p>\n\n    <p>If you need to modify an employee\'s superannuation payment, you can do this during the payrun by clicking on their Super value.</p>\n</div>\n<div class="formRow superContribution">\n    <label class="formRowKey formLabel control-label" for="superContribution">Employer contribution:</label>\n    <div data-id="superContribution" data-widget="NumberInput" data-name="superContribution" data-valid-regex="^100(\\.(0){0,2})?$|^(\\d{0,2}(\\.\\d{0,2})?)$"\n         data-invalid-regex="[,\\.]{2}" data-css-class="superContribution">\n    </div>\n    <div class="inLineComment">%</div>\n</div>\n'});return this.HandlebarsTemplates["payroll/employees/super_guarantee"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["payroll/ird/ird_monthly_returns"]=Handlebars.template(function(b,a,e,c,d){function f(a,c){return'\n        <div class="form-group">\n          <div class="col-xs-16 col-xs-offset-8 focused">\n              <span class="help-inline error-message">Enter your IRD number on the Business details page.</span>\n          </div>\n        </div>\n        '}e=e||b.helpers;b="";var g,h=e.helperMissing,l=this.escapeExpression;
c={headingSuffix:"IRD monthly returns"};c=(g=e.includePartial)?g.call(a,"page_heading",{hash:c}):h.call(a,"includePartial","page_heading",{hash:c});b+=l(c)+'\n<hr class="reportHr top-buffer">\n<div class="form-horizontal" id="irdMonthlyReturnReport">\n  <div class="row">\n    <div class="form-inline">\n        <div class="col-xs-24">\n          ';c={inputLabel:"Choose a period",inputName:"month","data-collection":"months","data-name-field":"name","data-value-field":"id",labelCssClass:"col-xs-11",
widgetCssClass:"col-xs-13"};c=(g=e.Select)?g.call(a,{hash:c}):h.call(a,"Select",{hash:c});b+=l(c)+"\n          ";c={inputName:"year","data-collection":"years","data-name-field":"id","data-value-field":"id"};c=(g=e.Select)?g.call(a,{hash:c}):h.call(a,"Select",{hash:c});b+=l(c)+'\n        </div>\n    </div>\n  </div>\n  <hr class="reportHr top-buffer">\n  <div class="row">\n    <div class="col-xs-1 fa-color-light-gray">\n      <span class="fa-stack fa-lg">\n         <i class="fa fa-circle-thin fa-stack-2x"></i>\n         <i class="fa fa-stack-1x">1</i>\n       </span>\n    </div>\n    <div class="col-xs-8">\n        <h3>Employer monthly schedule</h3>\n        <span class="bold">IR348</span>\n    </div>\n    <div class="col-xs-3 text-right">\n      <button class="btn btn-default" id="downloadMonthlySchedule">Preview</button>\n    </div>\n  </div>\n  <hr class="reportHr top-buffer">\n  <div class="row">\n    <div class="col-xs-1 fa-color-light-gray">\n      <span class="fa-stack fa-lg">\n         <i class="fa fa-circle-thin fa-stack-2x"></i>\n         <i class="fa fa-stack-1x">2</i>\n       </span>\n    </div>\n    <div class="col-xs-8">\n        <h3>Employer deduction form</h3>\n        <span class="bold">IR345</span>\n    </div>\n    <div class="col-xs-3 text-right">\n      <button class="btn btn-default" id="downloadDeductionForm">Preview</button>\n    </div>\n  </div>\n  <hr class="reportHr top-buffer">\n  <div class="row">\n    <div class="col-xs-1 fa-color-light-gray">\n      <span class="fa-stack fa-lg">\n         <i class="fa fa-circle-thin fa-stack-2x"></i>\n         <i class="fa fa-stack-1x">3</i>\n       </span>\n    </div>\n    <div class="col-xs-22 bottom-buffer-sm">\n        <h3>Prepare IRD files</h3>\n        <span class="bold">Employer contact details</span>\n    </div>\n  </div>\n  <div class="row">\n    <div class="col-xs-10 col-xs-offset-1">\n      <div class="form-horizontal">\n        ';
c={inputLabel:"Contact Name",inputName:"contactName","data-maxlength":"20"};c=(g=e.TextInput)?g.call(a,{hash:c}):h.call(a,"TextInput",{hash:c});b+=l(c)+"\n        ";c={inputLabel:"Contact Phone",inputName:"contactPhone","data-maxlength":"12"};c=(g=e.TextInput)?g.call(a,{hash:c}):h.call(a,"TextInput",{hash:c});b+=l(c)+"\n        ";c={inputLabel:"Contact Email",inputName:"contactEmail","data-maxlength":"60","data-delay":"on"};c=(g=e.TextInput)?g.call(a,{hash:c}):h.call(a,"TextInput",{hash:c});b+=l(c)+
'\n        <div class="form-group">\n          <p class="col-xs-8 form-control-static text-right">IRD Number</p>\n          <p class="col-xs-16 form-control-static">';(g=e.irdNumber)?c=g.call(a,{hash:{}}):(c=a.irdNumber,c="function"===typeof c?c():c);b+=l(c)+"</p>\n        </div>\n        ";c=a.irdNumber;if((c=(g=e.ifBlank)?g.call(a,c,{hash:{},inverse:this.noop,fn:this.program(1,f,d)}):h.call(a,"ifBlank",c,{hash:{},inverse:this.noop,fn:this.program(1,f,d)}))||0===c)b+=c;b+='\n          <div class="form-group">\n              <p class="col-xs-8 form-control-static text-right">Period Ending</p>\n              <p class="col-xs-16 form-control-static" id="paymentDate">';
(g=e.paymentDate)?c=g.call(a,{hash:{}}):(c=a.paymentDate,c="function"===typeof c?c():c);return b+=l(c)+'</p>\n          </div>\n      </div>\n    </div>\n  </div>\n  <hr class="reportHr top-buffer">\n  <div class="row">\n    <div class="col-xs-1">\n      <span class="fa-stack fa-lg fa-color-light-gray">\n         <i class="fa fa-circle-thin fa-stack-2x"></i>\n         <i class="fa fa-download fa-stack-1x"></i>\n       </span>\n    </div>\n    <div class="col-xs-22">\n      <h3>Download files for IRD</h3>\n      <span class="text-muted small">Click the button below to create and download the ir-file. Save the downloaded file to your computer</span>\n      <div class="top-buffer-sm bottom-buffer-sm">\n          <button class="btn btn-primary action" id="downloadIrFile">Download</button>\n          <div id="no-ird-data" class="text-danger small hidden">There is no data available for the selected period.</div>\n      </div>\n      <p class="text-muted small">\n        After you\'ve saved the file, you can submit it online through the <a href="https://www1.e-services.ird.govt.nz/secure/login.html" target="_blank">IRD portal</a>.\n        <br>\n        The two files you downloaded are zipped into a single zip file.\n        You may be able to directly upload the zipped file into the IRD portal or unzip the files and upload each file independently.\n        <br>\n        For more information on lodging electronically, see the <a href="http://www.ird.govt.nz/resources/9/9/99aa27804e2d6dd5ba13feaea3c5a5e9/ir317.pdf" target="_blank">IRD website</a>.\n      </p>\n    </div>\n  </div>\n</div>\n'});
return this.HandlebarsTemplates["payroll/ird/ird_monthly_returns"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["payroll/payment_summaries/PAYG_summary"]=Handlebars.template(function(b,a,e,c,d){e=e||b.helpers;var f,g,h=e.helperMissing,l=this.escapeExpression;b='<div class="accordion-heading" xmlns="http://www.w3.org/1999/html">\n  <label class="accordion-toggle clearfix" data-toggle="collapse" data-parent="#paygSummaryAccordion">\n    <div class="name bold">PAYG Summary details</div>\n    <button class="editStep btn btn-default">Edit summary details</button>\n    <span class="icon-ok pull-right"></span>\n    <div class="pull-right">Step 2 of 5</div>\n  </label>\n</div>\n<div id="step2" class="accordion-body collapse">\n  <div class="accordion-inner">\n    <div class="form-group" >\n      <label>Have you already lodged a PAYG summary for ';c=
a.taxYear;c=(g=e.showAuTaxYear)?g.call(a,c,0,"YYYY/YY",{hash:{}}):h.call(a,"showAuTaxYear",c,0,"YYYY/YY",{hash:{}});b+=l(c)+" for ";(g=e.firstName)?c=g.call(a,{hash:{}}):(c=a.firstName,c="function"===typeof c?c():c);b+=l(c)+" ";(g=e.lastName)?c=g.call(a,{hash:{}}):(c=a.lastName,c="function"===typeof c?c():c);b+=l(c)+"?</label>\n      ";c=a.lodgedStatus;c=(g=e.radio)?g.call(a,"lodgedStatusOriginal","No, this is a new PAYG summary","lodgedStatus","ORIGINAL",c,{hash:{}}):h.call(a,"radio","lodgedStatusOriginal",
"No, this is a new PAYG summary","lodgedStatus","ORIGINAL",c,{hash:{}});b+=l(c)+"\n      ";c=a.empdupeCreated;f=a.lodgedStatus;c=(g=e.radio)?g.call(a,"lodgedStatusAmendment","Yes, this is an amendment","lodgedStatus","AMENDMENT",f,c,{hash:{}}):h.call(a,"radio","lodgedStatusAmendment","Yes, this is an amendment","lodgedStatus","AMENDMENT",f,c,{hash:{}});b+=l(c)+'\n    </div>\n    <div class="form-group" >\n      <label>Did ';(g=e.firstName)?c=g.call(a,{hash:{}}):(c=a.firstName,c="function"===typeof c?
c():c);b+=l(c)+" ";(g=e.lastName)?c=g.call(a,{hash:{}}):(c=a.lastName,c="function"===typeof c?c():c);b+=l(c)+" work for you for the whole year?</label>\n      ";c=a.workWholeYear;c=(g=e.radio)?g.call(a,"workWholeYearYes","Yes","workWholeYear",!0,c,{hash:{}}):h.call(a,"radio","workWholeYearYes","Yes","workWholeYear",!0,c,{hash:{}});b+=l(c)+"\n      ";c=a.workWholeYear;c=(g=e.radio)?g.call(a,"workWholeYearNo","No","workWholeYear",!1,c,{hash:{}}):h.call(a,"radio","workWholeYearNo","No","workWholeYear",
!1,c,{hash:{}});b+=l(c)+'\n    </div>\n    <div id="workingPeriod" class=\'';c=a.workWholeYear;if((c=e["if"].call(a,c,{hash:{},inverse:this.program(3,function(a,c){return"show"},d),fn:this.program(1,function(a,c){return"hide"},d)}))||0===c)b+=c;b+='\'>\n      <div class="form-group">\n        <label>What period did ';(g=e.firstName)?c=g.call(a,{hash:{}}):(c=a.firstName,c="function"===typeof c?c():c);b+=l(c)+" ";(g=e.lastName)?c=g.call(a,{hash:{}}):(c=a.lastName,c="function"===typeof c?c():c);b+=l(c)+
' work for?</label>\n      </div>\n      <div class="row form-horizontal">\n        <div class="col-xs-8">\n          ';c={labelCssClass:"",widgetCssClass:"col-xs-20",inputLabel:"",inputName:"workPeriodStart"};c=(g=e.DatePicker)?g.call(a,{hash:c}):h.call(a,"DatePicker",{hash:c});b+=l(c)+'\n        </div>\n        <div class="col-xs-8">\n          ';c={labelCssClass:"col-xs-2",widgetCssClass:"col-xs-20",inputLabel:"to",inputName:"workPeriodEnd"};c=(g=e.DatePicker)?g.call(a,{hash:c}):h.call(a,"DatePicker",
{hash:c});return b+=l(c)+'\n        </div>\n      </div>\n    </div>\n\n    <div class="row top-buffer">\n      <div class="col-xs-24 text-right">\n        <button type="button" class="btn btn-primary action" id="step2Next">Next step</button>\n      </div>\n    </div>\n\n  </div>\n</div>\n'});return this.HandlebarsTemplates["payroll/payment_summaries/PAYG_summary"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["payroll/payment_summaries/allowance_and_deduction"]=Handlebars.template(function(b,a,e,c,d){function f(a,c){return"earnings"}function g(a,c){return"allowances"}function h(a,c){return"earning"}function l(a,c){return"allowance"}e=e||b.helpers;var k;c=e.helperMissing;b='<div class="accordion-heading" xmlns="http://www.w3.org/1999/html">\n  <label class="accordion-toggle clearfix" data-toggle="collapse" data-parent="#paygSummaryAccordion">\n    <div class="name">Assign ';
if((k=(k=e.ifFeature)?k.call(a,"EARNINGS_DEDUCTIONS",{hash:{},inverse:this.program(3,g,d),fn:this.program(1,f,d)}):c.call(a,"ifFeature","EARNINGS_DEDUCTIONS",{hash:{},inverse:this.program(3,g,d),fn:this.program(1,f,d)}))||0===k)b+=k;b+=' and deductions</div>\n    <button class="editStep btn btn-default">Edit assignments</button>\n    <span class="icon-ok pull-right"></span>\n    <div class="pull-right">Step 3 of 5</div>\n  </label>\n</div>\n<div id="step3" class="accordion-body collapse">\n  <div class="accordion-inner">\n    <div class="form-group">\n      <label>Choose a category for each ';
if((k=(k=e.ifFeature)?k.call(a,"EARNINGS_DEDUCTIONS",{hash:{},inverse:this.program(7,l,d),fn:this.program(5,h,d)}):c.call(a,"ifFeature","EARNINGS_DEDUCTIONS",{hash:{},inverse:this.program(7,l,d),fn:this.program(5,h,d)}))||0===k)b+=k;return b+' and deduction paid to\n        this employee during the financial year.</label>\n    </div>\n    <div class="form-group">\n      <div id="allowances"></div>\n      <div id="deductions"></div>\n    </div>\n    <div class="row top-buffer">\n      <div class="col-xs-24 text-right">\n        <button type="button" class="btn btn-primary action" id="step3Next">Next step</button>\n      </div>\n    </div>\n  </div>\n</div>\n'});
return this.HandlebarsTemplates["payroll/payment_summaries/allowance_and_deduction"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["payroll/payment_summaries/allowance_header"]=Handlebars.template(function(b,a,e,c,d){function f(a,c){return"Earnings"}function g(a,c){return"Allowances"}e=e||b.helpers;c=e.helperMissing;b='<tr>\n  <th data-field="header" colspan="3">';if((a=(e=e.ifFeature)?e.call(a,"EARNINGS_DEDUCTIONS",{hash:{},inverse:this.program(3,g,d),fn:this.program(1,f,d)}):c.call(a,"ifFeature","EARNINGS_DEDUCTIONS",{hash:{},inverse:this.program(3,
g,d),fn:this.program(1,f,d)}))||0===a)b+=a;return b+"</th>\n</tr>\n"});return this.HandlebarsTemplates["payroll/payment_summaries/allowance_header"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["payroll/payment_summaries/allowance_row"]=Handlebars.template(function(b,a,e,c,d){e=e||b.helpers;var f=this.escapeExpression,g=e.helperMissing;b='<td class="description">';(d=e.description)?c=d.call(a,{hash:{}}):(c=a.description,c="function"===typeof c?c():c);b+=f(c)+'</td>\n<td class="text-right amount">';c=a.amount;c=(d=e.moneyValueFormatWithoutDollarSign)?d.call(a,c,{hash:{}}):g.call(a,"moneyValueFormatWithoutDollarSign",
c,{hash:{}});b+=f(c)+'</td>\n<td>\n  <select name="allocationType" class="form-control">\n    ';c=a.allocationType;c=(d=e.option)?d.call(a,"Gross","GROSS",c,{hash:{}}):g.call(a,"option","Gross","GROSS",c,{hash:{}});b+=f(c)+"\n    ";c=a.allocationType;c=(d=e.option)?d.call(a,"Allowance","ALLOWANCE",c,{hash:{}}):g.call(a,"option","Allowance","ALLOWANCE",c,{hash:{}});b+=f(c)+"\n    ";c=a.allocationType;c=(d=e.option)?d.call(a,"Exclude","UNALLOCATED",c,{hash:{}}):g.call(a,"option","Exclude","UNALLOCATED",
c,{hash:{}});return b+=f(c)+"\n  </select>\n</td>\n"});return this.HandlebarsTemplates["payroll/payment_summaries/allowance_row"]}).call(this);(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["payroll/payment_summaries/allowances"]=Handlebars.template(function(b,a,e,c,d){return'<div id="table"></div>\n'});return this.HandlebarsTemplates["payroll/payment_summaries/allowances"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["payroll/payment_summaries/assignment_override_header"]=Handlebars.template(function(b,a,e,c,d){return"<tr>\n  <th></th>\n</tr>\n"});return this.HandlebarsTemplates["payroll/payment_summaries/assignment_override_header"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["payroll/payment_summaries/assignment_override_row"]=Handlebars.template(function(b,a,e,c,d){e=e||b.helpers;c=this.escapeExpression;b='<td>\n  <div class="form-control-wrapper" data-widget="MoneyInput" data-id="';(e=e.cid)?a=e.call(a,{hash:{}}):(a=a.cid,a="function"===typeof a?a():a);return b+=c(a)+'" data-name="overriddenAmount" data-valid-regex="^\\d{0,2},?\\d{0,3},?\\d{0,3}(\\.\\d{0,2})?$" data-invalid-regex="(^0[\\d,]+|[,\\.]{2})"  data-decimal-places="2" data-show-commas="true" data-css-class="text-right"></div>\n</td>\n'});
return this.HandlebarsTemplates["payroll/payment_summaries/assignment_override_row"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["payroll/payment_summaries/assignment_verification"]=Handlebars.template(function(b,a,e,c,d){return'<div class="accordion-heading">\n  <label class="accordion-toggle clearfix" data-toggle="collapse" data-parent="#paygSummaryAccordion">\n    <div class="name">Check assignments are correct</div>\n    <button class="editStep btn btn-default">Check again</button>\n    <span class="icon-ok pull-right"></span>\n    <div class="pull-right">Step 4 of 5</div>\n  </label>\n</div>\n<div id="step4" class="accordion-body collapse">\n  <div class="accordion-inner">\n    <div class="row">\n      <div class="col-xs-8 col-xs-offset-16">\n        <div><strong>Overrides</strong></div>\n        <div>Use these fields to enter a different amount from the one calculated.</div>\n      </div>\n    </div>\n    <div class="row top-buffer">\n      <div class="col-xs-16">\n        <div id="paygWithheld"></div>\n      </div>\n      <div class="col-xs-8">\n        <div id="paygWithheld-override"></div>\n      </div>\n    </div>\n    <div class="row top-buffer">\n      <div class="col-xs-16">\n        <div id="grossPayment"></div>\n      </div>\n      <div class="col-xs-8">\n        <div id="grossPayment-override"></div>\n      </div>\n    </div>\n    <div class="row top-buffer">\n      <div class="col-xs-16">\n        <div id="allowances"></div>\n      </div>\n      <div class="col-xs-8">\n        <div id="allowances-override"></div>\n      </div>\n    </div>\n    <div class="row top-buffer">\n      <div class="col-xs-16">\n        <div id="union-fees"></div>\n      </div>\n      <div class="col-xs-8">\n        <div id="union-fees-override"></div>\n      </div>\n    </div>\n    <div class="row top-buffer">\n      <div class="col-xs-16">\n        <div id="workplace-giving"></div>\n      </div>\n      <div class="col-xs-8">\n        <div id="workplace-giving-override"></div>\n      </div>\n    </div>\n    <div class="row top-buffer">\n      <div class="col-xs-16">\n        <div id="super"></div>\n      </div>\n      <div class="col-xs-8">\n        <div id="super-override"></div>\n      </div>\n    </div>\n    <div id="total-errors" class="top-buffer"></div>\n\n    <div class="row top-buffer">\n      <div class="col-xs-24 text-right">\n        <button type="button" class="btn btn-primary action" id="step4Next">Next step</button>\n      </div>\n    </div>\n\n  </div>\n</div>\n'});return this.HandlebarsTemplates["payroll/payment_summaries/assignment_verification"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["payroll/payment_summaries/deduction_header"]=Handlebars.template(function(b,a,e,c,d){return'<tr>\n  <th data-field="header" colspan="3">Deductions</th>\n</tr>\n'});return this.HandlebarsTemplates["payroll/payment_summaries/deduction_header"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["payroll/payment_summaries/deduction_row"]=Handlebars.template(function(b,a,e,c,d){e=e||b.helpers;var f=this.escapeExpression,g=e.helperMissing;b='<td class="description">';(d=e.description)?c=d.call(a,{hash:{}}):(c=a.description,c="function"===typeof c?c():c);b+=f(c)+'</td>\n<td class="text-right amount">';c=a.amount;c=(d=e.moneyValueFormatWithoutDollarSign)?d.call(a,c,{hash:{}}):g.call(a,"moneyValueFormatWithoutDollarSign",
c,{hash:{}});b+=f(c)+'</td>\n<td>\n  <select name="allocationType" class="form-control">\n    ';c=a.allocationType;c=(d=e.option)?d.call(a,"Employer super","EMPLOYER_SUPER",c,{hash:{}}):g.call(a,"option","Employer super","EMPLOYER_SUPER",c,{hash:{}});b+=f(c)+"\n    ";c=a.allocationType;c=(d=e.option)?d.call(a,"Union / Professional association fees","UNION_FEE",c,{hash:{}}):g.call(a,"option","Union / Professional association fees","UNION_FEE",c,{hash:{}});b+=f(c)+"\n    ";c=a.allocationType;c=(d=e.option)?
d.call(a,"Workplace giving","WORKPLACE_GIVING",c,{hash:{}}):g.call(a,"option","Workplace giving","WORKPLACE_GIVING",c,{hash:{}});b+=f(c)+"\n    ";c=a.allocationType;c=(d=e.option)?d.call(a,"Exclude","UNALLOCATED",c,{hash:{}}):g.call(a,"option","Exclude","UNALLOCATED",c,{hash:{}});return b+=f(c)+"\n  </select>\n</td>\n"});return this.HandlebarsTemplates["payroll/payment_summaries/deduction_row"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["payroll/payment_summaries/deductions"]=Handlebars.template(function(b,a,e,c,d){return'<div id="table"></div>\n'});return this.HandlebarsTemplates["payroll/payment_summaries/deductions"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["payroll/payment_summaries/email"]=Handlebars.template(function(b,a,e,c,d){return'<div id="pageContentHeader" class="row bottom-buffer">\n  <h1 class="col-xs-12">Email payment summaries</h1>\n  <div class="col-xs-12 text-right h1-control"><a class="back">Return to review payment summaries</a></div>\n</div>\n<div id="paymentSummaryEmail">\n  <div class="row">\n    <div class="col-xs-12" id="table">\n    </div>\n    <div class="col-xs-12" id="emailForm">\n    </div>\n  </div>\n  <div class="review top-buffer text-center">\n    <button class="btn btn-primary action hidden" id="emailButton">Email and continue to create file for online lodgement</button>\n    <button class="btn btn-primary action hidden" id="continueButton">Continue to create file for online lodgement</button>\n  </div>\n</div>\n'});return this.HandlebarsTemplates["payroll/payment_summaries/email"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["payroll/payment_summaries/email_form"]=Handlebars.template(function(b,a,e,c,d){e=e||b.helpers;var f;c=this.escapeExpression;b='<div class="row">\n  <label class="col-xs-12" for="body">Email body text:</label>\n  <div class="col-xs-12 text-right"><a>Reset to default</a></div>\n</div>\n<div class="form-group">\n  <div class="form-control-wrapper">\n    <div data-widget="AutosizeTextarea" data-name="body" data-autosize="false" data-rows="15" data-cols="50"></div>\n  </div>\n</div>\n<div class="row form-inline top-buffer">\n  <div class="col-xs-24">\n    <div class="checkbox">\n      <label for="bcc">\n        <input type="checkbox" name="sendBcc" ';
f=a.sendBcc;if((f=e["if"].call(a,f,{hash:{},inverse:this.noop,fn:this.program(1,function(a,c){return'checked="checked"'},d)}))||0===f)b+=f;b+=' />&nbsp;Bcc:\n      </label>\n    </div>\n    <div class="form-group">\n      <input type="text" name="bcc" value="';(e=e.bcc)?f=e.call(a,{hash:{}}):(f=a.bcc,f="function"===typeof f?f():f);return b+=c(f)+'" maxlength="255" class="form-control input-width-large"/>\n    </div>\n  </div>\n</div>\n'});return this.HandlebarsTemplates["payroll/payment_summaries/email_form"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["payroll/payment_summaries/email_header"]=Handlebars.template(function(b,a,e,c,d){e=e||b.helpers;b='<tr>\n  <th data-field="id"><input type="checkbox" id="selectAll" ';c=a.checked;if((c=e["if"].call(a,c,{hash:{},inverse:this.noop,fn:this.program(1,function(a,c){return'checked="checked"'},d)}))||0===c)b+=c;return b+' /></th>\n  <th data-field="name">Employee name</th>\n  <th data-field="email">Email address</th>\n</tr>\n'});
return this.HandlebarsTemplates["payroll/payment_summaries/email_header"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["payroll/payment_summaries/email_row"]=Handlebars.template(function(b,a,e,c,d){function f(a,c){return'disabled="disabled"'}function g(a,c){return'checked="checked"'}e=e||b.helpers;var h,l=this.escapeExpression,k=e.helperMissing;b='<td>\n  <input type="checkbox" name="selected" value="';(h=e.id)?c=h.call(a,{hash:{}}):(c=a.id,c="function"===typeof c?c():c);b+=l(c)+'" ';c=a.email;if((c=(h=e.ifBlank)?h.call(a,
c,{hash:{},inverse:this.noop,fn:this.program(1,f,d)}):k.call(a,"ifBlank",c,{hash:{},inverse:this.noop,fn:this.program(1,f,d)}))||0===c)b+=c;b+=" ";c=a.selected;if((c=(h=e.ifEqual)?h.call(a,c,!0,{hash:{},inverse:this.noop,fn:this.program(3,g,d)}):k.call(a,"ifEqual",c,!0,{hash:{},inverse:this.noop,fn:this.program(3,g,d)}))||0===c)b+=c;b+="/>\n</td>\n<td>";(h=e.name)?c=h.call(a,{hash:{}}):(c=a.name,c="function"===typeof c?c():c);b+=l(c)+'</td>\n<td>\n  <div class="form-horizontal">\n    ';c={widgetCssClass:"col-xs-24",
inputName:"email","data-placeholder":"enter email address","data-maxlength":"255"};c=(h=e.TextInput)?h.call(a,{hash:c}):k.call(a,"TextInput",{hash:c});return b+=l(c)+"\n  </div>\n</td>\n"});return this.HandlebarsTemplates["payroll/payment_summaries/email_row"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["payroll/payment_summaries/email_send"]=Handlebars.template(function(b,a,e,c,d){return'<div class="modal-dialog">\n  <div class="modal-content">\n    <div class="modal-header">\n      <span class="modal-title" id="modal-title-payg-email-sent-dialog">Emailing PAYG payment summary</span>\n    </div>\n    <div class="modal-body">\n      <div>\n        <span id="sendingMessage">Emailing payment summaries..</span>\n        <span class="smallLoadingSpinner"></span>\n      </div>\n      <div id="successCount"></div>\n      <div id="failed" class="hidden error-message"></div>\n      <div class="text-right top-buffer">\n        <button class="btn btn-default hidden" id="closeButton">Close</button>\n        <button class="btn btn-primary hidden" id="continueButton">Continue to create file for online lodgement</button>\n      </div>\n    </div>\n  </div>\n</div>\n'});return this.HandlebarsTemplates["payroll/payment_summaries/email_send"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["payroll/payment_summaries/employee_header"]=Handlebars.template(function(b,a,e,c,d){e=e||b.helpers;b='<tr>\n  <th class="text-center" style="width:3%"><input id="selectAll" type="checkbox" ';c=a.checked;if((c=e["if"].call(a,c,{hash:{},inverse:this.noop,fn:this.program(1,function(a,c){return'checked="checked"'},d)}))||0===c)b+=c;return b+'/></th>\n  <th data-field="name">Name</th>\n</tr>\n'});return this.HandlebarsTemplates["payroll/payment_summaries/employee_header"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["payroll/payment_summaries/employee_row"]=Handlebars.template(function(b,a,e,c,d){e=e||b.helpers;var f,g=this.escapeExpression,h=e.helperMissing;b='<td class="text-center"><input type="checkbox" id="';(f=e.id)?c=f.call(a,{hash:{}}):(c=a.id,c="function"===typeof c?c():c);b+=g(c)+'" name="selected" value="';(f=e.id)?c=f.call(a,{hash:{}}):(c=a.id,c="function"===typeof c?c():c);b+=g(c)+'" ';c=a.selected;if((c=
e["if"].call(a,c,{hash:{},inverse:this.noop,fn:this.program(1,function(a,c){return'checked="checked"'},d)}))||0===c)b+=c;b+='/></td>\n<td><a href="';c=a.detailsPagePath;d=a.businessId;c=(f=e.appUrl)?f.call(a,d,c,{hash:{}}):h.call(a,"appUrl",d,c,{hash:{}});b+=g(c)+'">';(f=e.name)?c=f.call(a,{hash:{}}):(c=a.name,c="function"===typeof c?c():c);return b+=g(c)+"</a></td>\n"});return this.HandlebarsTemplates["payroll/payment_summaries/employee_row"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["payroll/payment_summaries/gross_payment"]=Handlebars.template(function(b,a,e,c,d){function f(a,c){return"overridden"}function g(a,c){return"overridden"}function h(a,c){return"overridden"}function l(a,c){return"overridden"}function k(a,c){return"overridden"}function m(a,c){return"overridden"}function n(a,c){var b,d,f;b="\n      <tr>\n        <td>";(f=e.description)?d=f.call(a,{hash:{}}):(d=a.description,d=
"function"===typeof d?d():d);b+=t(d)+'</td>\n        <td class="text-right ';d=a.overriddenAmount;if((d=(f=e.unlessBlank)?f.call(a,d,{hash:{},inverse:r.noop,fn:r.program(20,q,c)}):u.call(a,"unlessBlank",d,{hash:{},inverse:r.noop,fn:r.program(20,q,c)}))||0===d)b+=d;b+='">';d=a.amount;d=(f=e.moneyValueFormatWithoutDollarSignShowZero)?f.call(a,d,{hash:{}}):u.call(a,"moneyValueFormatWithoutDollarSignShowZero",d,{hash:{}});return b+=t(d)+"</td>\n      </tr>\n      "}function q(a,c){return"overridden"}
e=e||b.helpers;var p,t=this.escapeExpression,r=this,u=e.helperMissing;b='<table class="table">\n  <colgroup><col style="width:343px;"><col style="width:128px;"></colgroup>\n  <thead>\n    <tr>\n      <th data-field="header" colspan="2">';(p=e.headerTitle)?c=p.call(a,{hash:{}}):(c=a.headerTitle,c="function"===typeof c?c():c);b+=t(c)+'</th>\n    </tr>\n  </thead>\n  <tbody class="tbody">\n    <tr>\n      <td>Normal earnings</td>\n      <td class="text-right ';c=a.overriddenNormalPay;if((c=(p=e.unlessBlank)?
p.call(a,c,{hash:{},inverse:r.noop,fn:r.program(1,f,d)}):u.call(a,"unlessBlank",c,{hash:{},inverse:r.noop,fn:r.program(1,f,d)}))||0===c)b+=c;b+='">';c=a.normalPayWithSuper;c=(p=e.moneyValueFormatWithoutDollarSignShowZero)?p.call(a,c,{hash:{}}):u.call(a,"moneyValueFormatWithoutDollarSignShowZero",c,{hash:{}});b+=t(c)+"</td>\n    </tr>\n    ";c=a.additionalRateItems;if((c=e.each.call(a,c,{hash:{},inverse:r.noop,fn:r.program(3,function(a,c){var b,d,f;b="\n      <tr>\n        <td>";(f=e.description)?
d=f.call(a,{hash:{}}):(d=a.description,d="function"===typeof d?d():d);b+=t(d)+'</td>\n        <td class="text-right ';d=a.overriddenAmount;if((d=(f=e.unlessBlank)?f.call(a,d,{hash:{},inverse:r.noop,fn:r.program(4,g,c)}):u.call(a,"unlessBlank",d,{hash:{},inverse:r.noop,fn:r.program(4,g,c)}))||0===d)b+=d;b+='">';d=a.amount;d=(f=e.moneyValueFormatWithoutDollarSignShowZero)?f.call(a,d,{hash:{}}):u.call(a,"moneyValueFormatWithoutDollarSignShowZero",d,{hash:{}});return b+=t(d)+"</td>\n      </tr>\n    "},
d)}))||0===c)b+=c;b+="\n    ";c=a.annualLeave;if((c=e["if"].call(a,c,{hash:{},inverse:r.noop,fn:r.program(6,function(a,c){var b,d,f;b='\n    <tr>\n      <td>Annual leave</td>\n      <td class="text-right ';d=a.overriddenAnnualLeave;if((d=(f=e.unlessBlank)?f.call(a,d,{hash:{},inverse:r.noop,fn:r.program(7,h,c)}):u.call(a,"unlessBlank",d,{hash:{},inverse:r.noop,fn:r.program(7,h,c)}))||0===d)b+=d;b+='">';d=a.annualLeave;d=(f=e.moneyValueFormatWithoutDollarSignShowZero)?f.call(a,d,{hash:{}}):u.call(a,
"moneyValueFormatWithoutDollarSignShowZero",d,{hash:{}});return b+=t(d)+"</td>\n    </tr>\n    "},d)}))||0===c)b+=c;b+="\n    ";c=a.sickLeave;if((c=e["if"].call(a,c,{hash:{},inverse:r.noop,fn:r.program(9,function(a,c){var b,d,f;b='\n      <tr>\n      <td>Personal leave</td>\n      <td class="text-right ';d=a.overriddenSickLeave;if((d=(f=e.unlessBlank)?f.call(a,d,{hash:{},inverse:r.noop,fn:r.program(10,l,c)}):u.call(a,"unlessBlank",d,{hash:{},inverse:r.noop,fn:r.program(10,l,c)}))||0===d)b+=d;b+='">';
d=a.sickLeave;d=(f=e.moneyValueFormatWithoutDollarSignShowZero)?f.call(a,d,{hash:{}}):u.call(a,"moneyValueFormatWithoutDollarSignShowZero",d,{hash:{}});return b+=t(d)+"</td>\n    </tr>\n    "},d)}))||0===c)b+=c;b+="\n    ";c=a.bonus;if((c=e["if"].call(a,c,{hash:{},inverse:r.noop,fn:r.program(12,function(a,b){var c,d,f;c='\n    <tr>\n      <td>Bonus</td>\n      <td class="text-right ';d=a.overriddenBonus;if((d=(f=e.unlessBlank)?f.call(a,d,{hash:{},inverse:r.noop,fn:r.program(13,k,b)}):u.call(a,"unlessBlank",
d,{hash:{},inverse:r.noop,fn:r.program(13,k,b)}))||0===d)c+=d;c+='">';d=a.bonus;d=(f=e.moneyValueFormatWithoutDollarSignShowZero)?f.call(a,d,{hash:{}}):u.call(a,"moneyValueFormatWithoutDollarSignShowZero",d,{hash:{}});return c+=t(d)+"</td>\n    </tr>\n    "},d)}))||0===c)b+=c;b+="\n    ";c=a.commission;if((c=e["if"].call(a,c,{hash:{},inverse:r.noop,fn:r.program(15,function(a,c){var b,d,f;b='\n    <tr>\n      <td>Commission</td>\n      <td class="text-right ';d=a.overriddenCommission;if((d=(f=e.unlessBlank)?
f.call(a,d,{hash:{},inverse:r.noop,fn:r.program(16,m,c)}):u.call(a,"unlessBlank",d,{hash:{},inverse:r.noop,fn:r.program(16,m,c)}))||0===d)b+=d;b+='">';d=a.commission;d=(f=e.moneyValueFormatWithoutDollarSignShowZero)?f.call(a,d,{hash:{}}):u.call(a,"moneyValueFormatWithoutDollarSignShowZero",d,{hash:{}});return b+=t(d)+"</td>\n    </tr>\n    "},d)}))||0===c)b+=c;b+="\n    ";c=a.allowances;if((c=e.each.call(a,c,{hash:{},inverse:r.noop,fn:r.program(18,function(a,b){var c,d,f;c="\n      ";d=a.allocationType;
if((d=(f=e.ifEqual)?f.call(a,d,"GROSS",{hash:{},inverse:r.noop,fn:r.program(19,n,b)}):u.call(a,"ifEqual",d,"GROSS",{hash:{},inverse:r.noop,fn:r.program(19,n,b)}))||0===d)c+=d;return c+"\n    "},d)}))||0===c)b+=c;b+='\n  </tbody>\n  <tfoot>\n    <tr>\n      <th data-field="footer" class="text-right">';(p=e.footerTitle)?c=p.call(a,{hash:{}}):(c=a.footerTitle,c="function"===typeof c?c():c);b+=t(c)+'</th>\n      <th class="text-right" data-field="footer">';c=a.total;c=(p=e.moneyValueFormatWithoutDollarSignAndCents)?
p.call(a,c,{hash:{}}):u.call(a,"moneyValueFormatWithoutDollarSignAndCents",c,{hash:{}});return b+=t(c)+"</th>\n    </tr>\n  </tfoot>\n</table>\n"});return this.HandlebarsTemplates["payroll/payment_summaries/gross_payment"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["payroll/payment_summaries/gross_payment_override"]=Handlebars.template(function(b,a,e,c,d){e=e||b.helpers;b='<table class="override-amount">\n  <thead>\n    <tr>\n      <th></th>\n    </tr>\n  </thead>\n  <tbody>\n  <tr>\n    <td>\n      <div class="form-control-wrapper" data-widget="MoneyInput" data-name="overriddenNormalPay" data-valid-regex="^\\d{0,2},?\\d{0,3},?\\d{0,3}(\\.\\d{0,2})?$" data-invalid-regex="(^0[\\d,]+|[,\\.]{2})" data-decimal-places="2" data-show-commas="true" data-css-class="text-right"></div>\n    </td>\n  </tr>\n\n  ';c=
a.annualLeave;if((c=e["if"].call(a,c,{hash:{},inverse:this.noop,fn:this.program(1,function(a,c){return'\n  <tr>\n    <td>\n      <div class="form-control-wrapper" data-widget="MoneyInput" data-name="overriddenAnnualLeave" data-valid-regex="^\\d{0,2},?\\d{0,3},?\\d{0,3}(\\.\\d{0,2})?$" data-invalid-regex="(^0[\\d,]+|[,\\.]{2})" data-decimal-places="2" data-show-commas="true" data-css-class="text-right"></div>\n    </td>\n  </tr>\n  '},d)}))||0===c)b+=c;b+="\n\n  ";c=a.sickLeave;if((c=e["if"].call(a,
c,{hash:{},inverse:this.noop,fn:this.program(3,function(a,c){return'\n  <tr>\n    <td>\n      <div class="form-control-wrapper" data-widget="MoneyInput" data-name="overriddenSickLeave" data-valid-regex="^\\d{0,2},?\\d{0,3},?\\d{0,3}(\\.\\d{0,2})?$" data-invalid-regex="(^0[\\d,]+|[,\\.]{2})" data-decimal-places="2" data-show-commas="true" data-css-class="text-right"></div>\n    </td>\n  </tr>\n  '},d)}))||0===c)b+=c;b+="\n\n  ";c=a.bonus;if((c=e["if"].call(a,c,{hash:{},inverse:this.noop,fn:this.program(5,
function(a,c){return'\n  <tr>\n    <td>\n      <div class="form-control-wrapper" data-widget="MoneyInput" data-name="overriddenBonus" data-valid-regex="^\\d{0,2},?\\d{0,3},?\\d{0,3}(\\.\\d{0,2})?$" data-invalid-regex="(^0[\\d,]+|[,\\.]{2})" data-decimal-places="2" data-show-commas="true" data-css-class="text-right"></div>\n    </td>\n  </tr>\n  '},d)}))||0===c)b+=c;b+="\n\n  ";c=a.commission;if((c=e["if"].call(a,c,{hash:{},inverse:this.noop,fn:this.program(7,function(a,c){return'\n  <tr>\n    <td>\n      <div class="form-control-wrapper" data-widget="MoneyInput" data-name="overriddenCommission" data-valid-regex="^\\d{0,2},?\\d{0,3},?\\d{0,3}(\\.\\d{0,2})?$" data-invalid-regex="(^0[\\d,]+|[,\\.]{2})" data-decimal-places="2" data-show-commas="true" data-css-class="text-right"></div>\n    </td>\n  </tr>\n  '},
d)}))||0===c)b+=c;return b+"\n  </tbody>\n</table>\n"});return this.HandlebarsTemplates["payroll/payment_summaries/gross_payment_override"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["payroll/payment_summaries/other_income"]=Handlebars.template(function(b,a,e,c,d){e=e||b.helpers;var f,g=e.helperMissing,h=this.escapeExpression;b='<div class="accordion-heading">\n  <label class="accordion-toggle clearfix" data-toggle="collapse" data-parent="#paygSummaryAccordion">\n    <div class="name">Enter other income items</div>\n    <button class="editStep btn btn-default">Edit other income</button>\n    <span class="icon-ok pull-right"></span>\n    <div class="pull-right">Step 5 of 5</div>\n  </label>\n</div>\n<div id="step5" class="accordion-body collapse">\n  <div class="accordion-inner">\n    <div class="form-group">\n      <p>If you have paid the employee any additional income not tracked by MYOB Essentials, include it on their payment summary by entering it in the fields below.\n        You will also have to calculate the tax and enter it in the Tax withheld field in the previous step.</p>\n    </div>\n    <div class="form-group">\n      <strong>Enter whole dollar amounts only.</strong>\n    </div>\n    <div class="form-horizontal">\n      <div class="form-group">\n        <label class="col-xs-18" for="otherIncomeCommunityDevelopment">Community development employment projects (CDEP) payments</label>\n        <div class="col-xs-6 form-control-wrapper" data-widget="MoneyInput" data-name="otherIncomeCommunityDevelopment" data-valid-regex="^[+]?\\d{0,2},?\\d{0,3},?\\d{0,3}$" data-invalid-regex="(^0[\\d,]+|[,\\.]{2})"  data-decimal-places="0" data-show-commas="true" data-css-class="text-right"></div>\n      </div>\n\n      ';c=
a.exemptFBT;if((c=e["if"].call(a,c,{hash:{},inverse:this.program(3,function(a,c){return'\n        <div class="form-group">\n          <label class="col-xs-18" for="otherIncomeReportableFringeBenefits">Reportable fringe benefits</label>\n          <div class="col-xs-6 form-control-wrapper" data-widget="MoneyInput" data-name="otherIncomeReportableFringeBenefits" data-valid-regex="^[+]?\\d{0,2},?\\d{0,3},?\\d{0,3}$" data-invalid-regex="(^0[\\d,]+|[,\\.]{2})"  data-decimal-places="0" data-show-commas="true" data-css-class="text-right"></div>\n        </div>\n      '},
d),fn:this.program(1,function(a,c){return'\n        <div class="form-group">\n          <label class="col-xs-18" for="otherIncomeReportableFringeBenefits">Reportable fringe benefits (non-exempt)</label>\n          <div class="col-xs-6 form-control-wrapper" data-widget="MoneyInput" data-name="otherIncomeReportableFringeBenefits" data-valid-regex="^[+]?\\d{0,2},?\\d{0,3},?\\d{0,3}$" data-invalid-regex="(^0[\\d,]+|[,\\.]{2})"  data-decimal-places="0" data-show-commas="true" data-css-class="text-right"></div>\n        </div>\n        <div class="form-group">\n          <label class="col-xs-18" for="otherIncomeReportableFringeBenefits">Reportable fringe benefits (exempt)</label>\n          <div class="col-xs-6 form-control-wrapper" data-widget="MoneyInput" data-name="otherIncomeReportableFringeBenefitsExempt" data-valid-regex="^[+]?\\d{0,2},?\\d{0,3},?\\d{0,3}$" data-invalid-regex="(^0[\\d,]+|[,\\.]{2})"  data-decimal-places="0" data-show-commas="true" data-css-class="text-right"></div>\n        </div>\n      '},
d)}))||0===c)b+=c;b+='\n\n      <div class="form-group">\n        <label class="col-xs-18" for="otherIncomeDeductibleOfUnDeductedPriceOfAnnuity">Deductible amount of the undeducted purchase price of the annuity</label>\n        <div class="col-xs-6 form-control-wrapper" data-widget="MoneyInput" data-name="otherIncomeDeductibleOfUnDeductedPriceOfAnnuity" data-valid-regex="^[+]?\\d{0,2},?\\d{0,3},?\\d{0,3}$" data-invalid-regex="(^0[\\d,]+|[,\\.]{2})"  data-decimal-places="0" data-show-commas="true" data-css-class="text-right"></div>\n      </div>\n      <div class="form-group">\n        <label class="col-xs-4" for="otherIncomeLumpSumA">Lump sum A</label>\n        <div class="col-xs-10 form-control-wrapper">\n          <select class="form-control" name="otherIncomeLumpSumAType">\n            ';
c=a.otherIncomeLumpSumAType;c=(f=e.option)?f.call(a,"<Select payment type>","",c,{hash:{}}):g.call(a,"option","<Select payment type>","",c,{hash:{}});b+=h(c)+"\n            ";c=a.otherIncomeLumpSumAType;c=(f=e.option)?f.call(a,"Redundancy payment","REDUNDANCY",c,{hash:{}}):g.call(a,"option","Redundancy payment","REDUNDANCY",c,{hash:{}});b+=h(c)+"\n            ";c=a.otherIncomeLumpSumAType;c=(f=e.option)?f.call(a,"Termination payment","TERMINATION",c,{hash:{}}):g.call(a,"option","Termination payment",
"TERMINATION",c,{hash:{}});b+=h(c)+'\n          </select>\n        </div>\n        <div class="col-xs-6 col-xs-offset-4 form-control-wrapper" data-widget="MoneyInput" data-name="otherIncomeLumpSumA" data-valid-regex="^[+]?\\d{0,2},?\\d{0,3},?\\d{0,3}$" data-invalid-regex="(^0[\\d,]+|[,\\.]{2})"  data-decimal-places="0" data-show-commas="true" data-css-class="text-right"></div>\n      </div>\n      <div class="form-group">\n        <label class="col-xs-18" for="otherIncomeLumpSumB">Lump sum B - Unused long service leave accrued before 16/08/1978</label>\n        <div class="col-xs-6 form-control-wrapper" data-widget="MoneyInput" data-name="otherIncomeLumpSumB" data-valid-regex="^[+]?\\d{0,2},?\\d{0,3},?\\d{0,3}$" data-invalid-regex="(^0[\\d,]+|[,\\.]{2})"  data-decimal-places="0" data-show-commas="true" data-css-class="text-right"></div>\n      </div>\n      <div class="form-group">\n        <label class="col-xs-18" for="otherIncomeLumpSumD">Lump sum D - Redundancy payment or early retirement scheme payment below the tax-free threshold</label>\n        <div class="col-xs-6 form-control-wrapper" data-widget="MoneyInput" data-name="otherIncomeLumpSumD" data-valid-regex="^[+]?\\d{0,2},?\\d{0,3},?\\d{0,3}$" data-invalid-regex="(^0[\\d,]+|[,\\.]{2})"  data-decimal-places="0" data-show-commas="true" data-css-class="text-right"></div>\n      </div>\n      <div class="form-group">\n        <label class="col-xs-18">Lump sum E - Back payments:</label>\n        <div id="otherIncomeLumpSumETotal" class="col-xs-6 text-right">';
c=a.otherIncomeLumpSumE;c=(f=e.moneyValueFormatWithoutDollarSignAndCents)?f.call(a,c,{hash:{}}):g.call(a,"moneyValueFormatWithoutDollarSignAndCents",c,{hash:{}});b+=h(c)+'</div>\n      </div>\n      <div class="form-group">\n        <label class="col-xs-16 col-xs-offset-2" for="otherIncomeLumpSumEPreviousYear"><span class="sub">Accrued in ';c=a.taxYear;c=(f=e.showAuTaxYear)?f.call(a,c,1,"YYYY - YYYY",{hash:{}}):g.call(a,"showAuTaxYear",c,1,"YYYY - YYYY",{hash:{}});b+=h(c)+'</span></label>\n        <div class="col-xs-6 form-control-wrapper" data-widget="MoneyInput" data-name="otherIncomeLumpSumEPreviousYear" data-valid-regex="^[+]?\\d{0,2},?\\d{0,3},?\\d{0,3}$" data-invalid-regex="(^0[\\d,]+|[,\\.]{2})"  data-decimal-places="0" data-show-commas="true" data-css-class="text-right"></div>\n      </div>\n      <div class="form-group">\n        <label class="col-xs-16 col-xs-offset-2" for="otherIncomeLumpSumEBeforePreviousYear"><span class="sub">Accrued prior to ';
c=a.taxYear;c=(f=e.startOfAuTaxYear)?f.call(a,c,1,{hash:{}}):g.call(a,"startOfAuTaxYear",c,1,{hash:{}});b+=h(c)+'</span></label>\n        <div class="col-xs-6 form-control-wrapper" data-widget="MoneyInput" data-name="otherIncomeLumpSumEBeforePreviousYear" data-valid-regex="^[+]?\\d{0,2},?\\d{0,3},?\\d{0,3}$" data-invalid-regex="(^0[\\d,]+|[,\\.]{2})"  data-decimal-places="0" data-show-commas="true" data-css-class="text-right"></div>\n      </div>\n      <div class="form-group">\n        <label class="col-xs-18" for="otherIncomeExemptForeignIncome">Exempt foreign employment income</label>\n        <div class="col-xs-6 form-control-wrapper" data-widget="MoneyInput" data-name="otherIncomeExemptForeignIncome" data-valid-regex="^[+]?\\d{0,2},?\\d{0,3},?\\d{0,3}$" data-invalid-regex="(^0[\\d,]+|[,\\.]{2})"  data-decimal-places="0" data-show-commas="true" data-css-class="text-right"></div>\n      </div>\n    </div>\n    <div class="alert alert-danger" id="noNonZeroAmountError">\n      You must enter an amount in the \'Gross payments\' or \'Total allowances\' fields in step 4, or else an amount is required in at least one field (except the \u2018Exempt foreign employment income\u2019 field) in step 5.\n    </div>\n    <div class="alert alert-danger" id="onlyLumpSumDError">\n      This PAYG payment summary has an amount available only in the Lump sum D field. As per the ATO\'s rules you are not required to complete a PAYG payment summary for this employee. Close this page, return to the PAYG Summary Centre and remove the employee from the list of employees to proceed.\n    </div>\n    <div class="alert alert-danger" id="lumpSumEInvalidError">\n      Total Lump sum E cannot be greater than 8 digits.\n    </div>\n    <div class="alert alert-danger" id="totalTaxWithheldError">\n      Total tax withheld cannot be more than the sum of Gross payments, Total allowances, Lump sum A, 5% of Lump sum B, Lump sum E and CDEP.\n    </div>\n  </div>\n\n  <div class="accordion-inner">\n    <div id="stepComplete" class="top-buffer text-center">\n      <button id="done" type="button" class="btn btn-primary action">Done!';
c=a.hasNextNotCompletedEmployee;if((c=e.unless.call(a,c,{hash:{},inverse:this.noop,fn:this.program(5,function(a,c){return" Next employee"},d)}))||0===c)b+=c;return b+"</button>\n    </div>\n  </div>\n</div>\n"});return this.HandlebarsTemplates["payroll/payment_summaries/other_income"]}).call(this);
(function(){Handlebars.registerPartial("_payroll_payment_summaries_partial_abn_wpn",Handlebars.template(function(b,a,e,c,d){e=e||b.helpers;var f=e.helperMissing,g=this.escapeExpression;b='<div class="form-horizontal">\n  <div class="form-group">\n    <h3 class="col-xs-24">ABN/WPN</h3>\n  </div>\n  <div class="row">\n    <label class="col-xs-4 control-label">I have</label>\n    <div class="col-xs-4  abn-wpn-radio-container">\n      ';c=a.abnOrWpn;c=(d=e.radio)?d.call(a,"abnOption","an ABN","abnOrWpn",
"abn",c,{hash:{}}):f.call(a,"radio","abnOption","an ABN","abnOrWpn","abn",c,{hash:{}});b+=g(c)+'\n    </div>\n    <div class="col-xs-6 abn form-inline">\n      ';c={inputLabel:"ABN:",inputName:"abn","data-valid-regex":"^\\d{0,11}$"};c=(d=e.RegexInput)?d.call(a,{hash:c}):f.call(a,"RegexInput",{hash:c});b+=g(c)+'\n    </div>\n    <div class="col-xs-6 abn form-inline">\n      ';c={inputLabel:"ABN Branch:",inputName:"abnBranch","data-valid-regex":"^\\d{0,3}$",labelCssClass:"col-xs-16",widgetCssClass:"col-xs-8"};
c=(d=e.RegexInput)?d.call(a,{hash:c}):f.call(a,"RegexInput",{hash:c});b+=g(c)+'\n    </div>\n  </div>\n  <div class="row">\n    <div class="col-xs-4 col-xs-offset-4 abn-wpn-radio-container">\n      ';c=a.abnOrWpn;c=(d=e.radio)?d.call(a,"wpnOption","a WPN","abnOrWpn","wpn",c,{hash:{}}):f.call(a,"radio","wpnOption","a WPN","abnOrWpn","wpn",c,{hash:{}});b+=g(c)+'\n    </div>\n    <div class="col-xs-6 wpn form-inline hidden">\n      ';c={inputLabel:"WPN:",inputName:"wpn","data-valid-regex":"^\\d{0,9}$"};
c=(d=e.RegexInput)?d.call(a,{hash:c}):f.call(a,"RegexInput",{hash:c});return b+=g(c)+"\n    </div>\n  </div>\n</div>\n"}))}).call(this);
(function(){Handlebars.registerPartial("_payroll_payment_summaries_partial_contact_details",Handlebars.template(function(b,a,e,c,d){e=e||b.helpers;var f=e.helperMissing,g=this.escapeExpression;b='<div class="row form-horizontal">\n  <div class="col-xs-12">\n    <div class="form-group">\n      ';c=a.third_party;if((c=e["if"].call(a,c,{hash:{},inverse:this.program(3,function(a,c){return'\n        <h3 class="col-xs-24">Contact details</h3>\n      '},d),fn:this.program(1,function(a,c){return'\n        <h3 class="col-xs-24">Service provider\'s contact details</h3>\n      '},
d)}))||0===c)b+=c;b+="\n    </div>\n    ";c={inputLabel:"Name:",inputName:"contactName","data-maxlength":"38"};c=(d=e.TextInput)?d.call(a,{hash:c}):f.call(a,"TextInput",{hash:c});b+=g(c)+"\n    ";c={inputLabel:"Phone:",inputName:"phone","data-maxlength":"15"};c=(d=e.TextInput)?d.call(a,{hash:c}):f.call(a,"TextInput",{hash:c});b+=g(c)+"\n    ";c={inputLabel:"Fax:",inputName:"fax","data-maxlength":"15"};c=(d=e.TextInput)?d.call(a,{hash:c}):f.call(a,"TextInput",{hash:c});b+=g(c)+"\n    ";c={inputLabel:"Email:",
inputName:"email","data-maxlength":"76"};c=(d=e.TextInput)?d.call(a,{hash:c}):f.call(a,"TextInput",{hash:c});return b+=g(c)+"\n  </div>\n</div>\n"}))}).call(this);
(function(){Handlebars.registerPartial("_payroll_payment_summaries_partial_lodging_details",Handlebars.template(function(b,a,e,c,d){e=e||b.helpers;var f=e.helperMissing,g=this.escapeExpression;b='<div id="lodgingOption">\n  <div class="form-group" >\n    ';c=a.thirdParty;c=(d=e.radio)?d.call(a,"businessOption","I lodge my report","thirdParty",!1,c,{hash:{}}):f.call(a,"radio","businessOption","I lodge my report","thirdParty",!1,c,{hash:{}});b+=g(c)+"\n    ";c=a.thirdParty;c=(d=e.radio)?d.call(a,"thirdPartyOption",
"I use a third party service provider to lodge my report","thirdParty",!0,c,{hash:{}}):f.call(a,"radio","thirdPartyOption","I use a third party service provider to lodge my report","thirdParty",!0,c,{hash:{}});b+=g(c)+'\n  </div>\n</div>\n<div id="businessDetails"></div>\n<div id="thirdPartyDetails" class="hidden"></div>\n<div id="fileReferenceDetails" class="row form-horizontal">\n  <div class="col-xs-12">\n    ';c={inputLabel:"File reference:",inputName:"fileReference","data-maxlength":"16"};c=
(d=e.TextInput)?d.call(a,{hash:c}):f.call(a,"TextInput",{hash:c});return b+=g(c)+"\n  </div>\n</div>\n"}))}).call(this);
(function(){Handlebars.registerPartial("_payroll_payment_summaries_partial_tpar_abn",Handlebars.template(function(b,a,e,c,d){e=e||b.helpers;var f=e.helperMissing,g=this.escapeExpression;b='<div class="form-horizontal">\n  <div class="row form-horizontal">\n    <div class="col-xs-8">\n      ';c={inputLabel:"ABN:",inputName:"abn","data-valid-regex":"^\\d{0,11}$",labelCssClass:"col-xs-12",widgetCssClass:"col-xs-12"};c=(d=e.RegexInput)?d.call(a,{hash:c}):f.call(a,"RegexInput",{hash:c});b+=g(c)+'\n    </div>\n    <div class="col-xs-6">\n      ';
c={inputLabel:"ABN Branch:",inputName:"abnBranch","data-valid-regex":"^\\d{0,3}$",labelCssClass:"col-xs-12",widgetCssClass:"col-xs-12"};c=(d=e.RegexInput)?d.call(a,{hash:c}):f.call(a,"RegexInput",{hash:c});return b+=g(c)+"\n    </div>\n  </div>\n</div>\n"}))}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["payroll/payment_summaries/payg_withheld"]=Handlebars.template(function(b,a,e,c,d){e=e||b.helpers;var f=e.helperMissing,g=this.escapeExpression;b='<colgroup><col style="width:343px;"><col style="width:128px;"></colgroup>\n<tr>\n  <td><strong>Total tax withheld:</strong></td>\n  <td id="totalTaxWithheld" class="text-right">\n    <strong>\n      ';c=a.overriddenTotalTaxWithheld;if((c=e["if"].call(a,c,{hash:{},
inverse:this.program(3,function(a,c){var b,d,n;b="\n        ";d=a.totalTaxWithheld;d=(n=e.moneyValueFormatWithoutDollarSignAndCents)?n.call(a,d,{hash:{}}):f.call(a,"moneyValueFormatWithoutDollarSignAndCents",d,{hash:{}});return b+=g(d)+"\n      "},d),fn:this.program(1,function(a,c){var b,d,n;b="\n        ";d=a.overriddenTotalTaxWithheld;d=(n=e.moneyValueFormatWithoutDollarSignAndCents)?n.call(a,d,{hash:{}}):f.call(a,"moneyValueFormatWithoutDollarSignAndCents",d,{hash:{}});return b+=g(d)+"\n      "},
d)}))||0===c)b+=c;return b+"\n    </strong>\n  </td>\n</tr>\n"});return this.HandlebarsTemplates["payroll/payment_summaries/payg_withheld"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["payroll/payment_summaries/payg_withheld_override"]=Handlebars.template(function(b,a,e,c,d){return'<tr>\n  <td>\n    <div class="form-control-wrapper" data-widget="MoneyInput" data-name="overriddenTotalTaxWithheld" data-valid-regex="^\\d{0,2},?\\d{0,3},?\\d{0,3}$" data-invalid-regex="(^0[\\d,]+|[,\\.]{2})"  data-decimal-places="0" data-show-commas="true" data-css-class="text-right"></div>\n  </td>\n</tr>\n'});return this.HandlebarsTemplates["payroll/payment_summaries/payg_withheld_override"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["payroll/payment_summaries/payment_summary_address"]=Handlebars.template(function(b,a,e,c,d){e=e||b.helpers;c=this.escapeExpression;b='<div class="form-horizontal">\n  <div class="form-group">\n    <label class="col-xs-8 control-label" for="';(d=e.cid)?d=d.call(a,{hash:{}}):(d=a.cid,d="function"===typeof d?d():d);b+=c(d)+'streetAddress1">Address:</label>\n    <div class="col-xs-16 form-control-wrapper" data-id="';
(d=e.cid)?d=d.call(a,{hash:{}}):(d=a.cid,d="function"===typeof d?d():d);b+=c(d)+'streetAddress1" data-widget="TextInput" data-name="streetAddress1" data-maxlength="38"></div>\n  </div>\n\n  <div class="form-group">\n    <label class="col-xs-8 control-label" for="';(d=e.cid)?d=d.call(a,{hash:{}}):(d=a.cid,d="function"===typeof d?d():d);b+=c(d)+'streetAddress2"></label>\n    <div class="col-xs-16 form-control-wrapper" data-id="';(d=e.cid)?d=d.call(a,{hash:{}}):(d=a.cid,d="function"===typeof d?d():d);
b+=c(d)+'streetAddress2" data-widget="TextInput" data-name="streetAddress2" data-maxlength="38"></div>\n  </div>\n\n  <div class="form-group">\n    <label class="col-xs-8 control-label" for="';(d=e.cid)?d=d.call(a,{hash:{}}):(d=a.cid,d="function"===typeof d?d():d);b+=c(d)+'suburb">Suburb:</label>\n    <div class="col-xs-16 form-control-wrapper" data-id="';(d=e.cid)?d=d.call(a,{hash:{}}):(d=a.cid,d="function"===typeof d?d():d);b+=c(d)+'suburb" data-widget="TextInput" data-name="suburb" data-maxlength="27"></div>\n  </div>\n\n  <div class="form-group">\n    <label class="col-xs-8 control-label" for="';
(d=e.cid)?d=d.call(a,{hash:{}}):(d=a.cid,d="function"===typeof d?d():d);b+=c(d)+'state">State:</label>\n    <div class="col-xs-8 form-control-wrapper" data-id="';(d=e.cid)?d=d.call(a,{hash:{}}):(d=a.cid,d="function"===typeof d?d():d);b+=c(d)+'state" data-widget="TypeaheadDropdown" data-name="state" data-collection="states" data-value-field="stateCode" data-labels="name" data-prompt="State" data-width="45"></div>\n  </div>\n\n  <div class="form-group">\n    <label class="col-xs-8 control-label" for="';
(d=e.cid)?d=d.call(a,{hash:{}}):(d=a.cid,d="function"===typeof d?d():d);b+=c(d)+'postCode">Post code:</label>\n    <div class="col-xs-8 form-control-wrapper" data-id="';(d=e.cid)?d=d.call(a,{hash:{}}):(d=a.cid,d="function"===typeof d?d():d);return b+=c(d)+'postCode" data-widget="RegexInput" data-name="postCode" data-valid-regex="^\\d{0,4}$"></div>\n  </div>\n</div>\n'});return this.HandlebarsTemplates["payroll/payment_summaries/payment_summary_address"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["payroll/payment_summaries/payment_summary_business_details"]=Handlebars.template(function(b,a,e,c,d){e=e||b.helpers;c=c||b.partials;var f,g,h=this,l=e.helperMissing,k=this.escapeExpression;b='<div class="row form-horizontal">\n  <div class="col-xs-12">\n    <div class="form-group">\n      <h3 class="col-xs-24">Business details</h3>\n    </div>\n    ';f={inputLabel:"Business name:",inputName:"businessName",
"data-maxlength":"200"};f=(g=e.TextInput)?g.call(a,{hash:f}):l.call(a,"TextInput",{hash:f});b+=k(f)+"\n    ";f={inputLabel:"Trading name:",inputName:"tradingName","data-maxlength":"200"};f=(g=e.TextInput)?g.call(a,{hash:f}):l.call(a,"TextInput",{hash:f});b+=k(f)+'\n  </div>\n</div>\n<div class="addresses row">\n</div>\n';f=a.generate_tpar;if((f=e["if"].call(a,f,{hash:{},inverse:h.program(3,function(a,b){var d,f;d="\n  ";if((f=h.invokePartial(c._payroll_payment_summaries_partial_abn_wpn,"_payroll_payment_summaries_partial_abn_wpn",
a,e,c))||0===f)d+=f;return d+"\n"},d),fn:h.program(1,function(a,b){var d,f;d="\n  ";if((f=h.invokePartial(c._payroll_payment_summaries_partial_tpar_abn,"_payroll_payment_summaries_partial_tpar_abn",a,e,c))||0===f)d+=f;return d+"\n"},d)}))||0===f)b+=f;b+="\n";if((f=h.invokePartial(c._payroll_payment_summaries_partial_contact_details,"_payroll_payment_summaries_partial_contact_details",a,e,c))||0===f)b+=f;return b+"\n"});return this.HandlebarsTemplates["payroll/payment_summaries/payment_summary_business_details"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["payroll/payment_summaries/payment_summary_centre"]=Handlebars.template(function(b,a,e,c,d){e=e||b.helpers;b="";d=e.helperMissing;var f=this.escapeExpression;c={headingSuffix:"PAYG Payment Summary Centre"};c=(e=e.includePartial)?e.call(a,"page_heading",{hash:c}):d.call(a,"includePartial","page_heading",{hash:c});return b+=f(c)+'\n<div class="paymentSummaryCentre">\n  <div class="row">\n    <div class="col-xs-24">\n      <div id="employeeFinancialColumn" class="column">\n        <h3>Financial year</h3>\n        <div class="form-group">\n\n          <div class="form-control-wrapper" data-default-value="yearEnd" data-id="" data-widget="Select" data-name="financialYear" data-collection="years" data-name-field="description" data-value-field="yearEnd">\n          </div>\n        </div>\n      </div>\n      <div class="column-separator"></div>\n      <div id="employeeListColumn" class="column">\n        <h3>Select employees</h3>\n        <div id="table"></div>\n      </div>\n      <div class="column-separator"></div>\n      <div id="employeeStepColumn" class="column">\n          <h3>Payment summary</h3>\n          <ul class="steps">\n            <li id="enterPAYGInfo" class="clearfix">\n              <div class="stepDescription">\n                <label class="stepLabel">1:</label>\n                <button class="btn btn-default stepButton" disabled="disabled">Enter payment summary info</button>\n                <div class="stepStatus">\n                    <div class="completed hidden icon-ok-circle"></div>\n                </div>\n              </div>\n            </li>\n            <li id="reviewPAYGSummary" class="clearfix">\n              <div class="stepDescription">\n                <label class="stepLabel">2:</label>\n                <button class="btn btn-default stepButton" disabled="disabled">Review payment summaries</button>\n                <div class="stepStatus">\n                  <div class="completed hidden icon-ok"></div>\n                </div>\n              </div>\n            </li>\n            <li id="createEMPDUPE" class="clearfix">\n              <div class="stepDescription">\n                <label class="stepLabel">3:</label>\n                <button class="btn btn-default stepButton" disabled="disabled">Create file for online lodgement</button>\n                <div class="stepStatus">\n                    <div class="completed hidden accordion-tick-valid"></div>\n                </div>\n              </div>\n            </li>\n         </ul>\n      </div>\n    </div>\n  </div>\n</div>\n'});
return this.HandlebarsTemplates["payroll/payment_summaries/payment_summary_centre"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["payroll/payment_summaries/payment_summary_employee"]=Handlebars.template(function(b,a,e,c,d){return'<a id="saveAndClose" class="btn btn-default">Save employee and close</a>\n<div class="accordion-wrapper">\n  <div id="paygSummaryAccordion" class="accordion">\n    <div id="employeeDetails" class="accordion-group" name="step1"></div>\n    <div id="employeePAYGSummary" class="accordion-group" name="step2"></div>\n    <div id="employeeAllowanceAndDeduction" class="accordion-group" name="step3"></div>\n    <div id="employeeAssignmentVerification" class="accordion-group" name="step4"></div>\n    <div id="employeeOtherIncome" class="accordion-group" name="step5"></div>\n    <div id="reviewOrCompleted" class="accordion-group clearfix">\n      <div id="signatureReview" class="bottom-buffer"></div>\n      <div id="completedMessage" class="bottom-buffer">\n        <div class="row top-buffer">\n          <div class="col-xs-20 col-xs-offset-2">\n            <p>This employee is complete. You can view and edit their details by clicking the links, or <a class="nextEmployee pointer">continue to the next employee.</a></p>\n            <p>You will get a chance to review this information in the next step.</p>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n'});return this.HandlebarsTemplates["payroll/payment_summaries/payment_summary_employee"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["payroll/payment_summaries/payment_summary_employee_details"]=Handlebars.template(function(b,a,e,c,d){function f(a,c){var b,d,f;b="\n            ";d={widgetCssClass:"col-xs-10",inputLabel:"Tax file number:",inputName:"taxFileNumber","data-name":"taxFileNumber","data-valid-regex":"^[\\d\\s]{0,11}$","data-invalid-regex":"(^\\s|\\s{2,})$"};d=(f=e.RegexInput)?f.call(a,{hash:d}):l.call(a,"RegexInput",{hash:d});
return b+=k(d)+"\n          "}function g(a,b){var c,d,f;c='\n            <div class="form-group" >\n              <label for="taxFileNumberStatusGroup" class="col-xs-8 control-label">No tax file number</label>\n              <div id="taxFileNumberStatusGroup" class="col-xs-16 col-xs-offset-4">\n                <div>\n                  ';d=a.taxFileNumberStatus;d=(f=e.radio)?f.call(a,"taxFileNumberStatus1","Application to the ATO for a TFN is pending","taxFileNumberStatus","PENDING",d,{hash:{}}):l.call(a,
"radio","taxFileNumberStatus1","Application to the ATO for a TFN is pending","taxFileNumberStatus","PENDING",d,{hash:{}});c+=k(d)+"\n                </div>\n                <div>\n                  ";d=a.taxFileNumberStatus;d=(f=e.radio)?f.call(a,"taxFileNumberStatus2","Employee is under 18 and claims an exemption","taxFileNumberStatus","UNDER_18",d,{hash:{}}):l.call(a,"radio","taxFileNumberStatus2","Employee is under 18 and claims an exemption","taxFileNumberStatus","UNDER_18",d,{hash:{}});c+=k(d)+
"\n                </div>\n                <div>\n                  ";d=a.taxFileNumberStatus;d=(f=e.radio)?f.call(a,"taxFileNumberStatus3","Employee receives a pension, benefit or allowance and claims an exemption","taxFileNumberStatus","PENSION",d,{hash:{}}):l.call(a,"radio","taxFileNumberStatus3","Employee receives a pension, benefit or allowance and claims an exemption","taxFileNumberStatus","PENSION",d,{hash:{}});return c+=k(d)+"\n                </div>\n              </div>\n            </div>\n          "}
e=e||b.helpers;var h,l=e.helperMissing,k=this.escapeExpression;b='<div class="accordion-heading">\n  <label class="accordion-toggle clearfix" data-toggle="collapse" data-parent="#paygSummaryAccordion">\n    <div class="name">';(h=e.firstName)?c=h.call(a,{hash:{}}):(c=a.firstName,c="function"===typeof c?c():c);b+=k(c)+" ";(h=e.lastName)?c=h.call(a,{hash:{}}):(c=a.lastName,c="function"===typeof c?c():c);b+=k(c)+'</div>\n    <button class="editStep btn btn-default">Edit employee details</button>\n    <span class="icon-ok pull-right"></span>\n    <div class="pull-right">Step 1 of 5</div>\n  </label>\n</div>\n<div id="step1" class="accordion-body collapse in">\n  <div class="accordion-inner">\n    <div class="row">\n      <div class="col-xs-16">\n        <div class="form-horizontal">\n          ';
c={widgetCssClass:"col-xs-10",inputLabel:"Date of Birth:",inputName:"dateOfBirth"};c=(h=e.DateOfBirthDatePicker)?h.call(a,{hash:c}):l.call(a,"DateOfBirthDatePicker",{hash:c});b+=k(c)+"\n\n          ";c=a.existingTaxFileNumberStatus;if((c=(h=e.ifEqual)?h.call(a,c,"PROVIDED",{hash:{},inverse:this.program(3,g,d),fn:this.program(1,f,d)}):l.call(a,"ifEqual",c,"PROVIDED",{hash:{},inverse:this.program(3,g,d),fn:this.program(1,f,d)}))||0===c)b+=c;b+='\n        </div>\n      </div>\n\n      <div class="col-xs-8">\n        ';
c=a.existingAddress;if((c=e["if"].call(a,c,{hash:{},inverse:this.noop,fn:this.program(5,function(a,c){var b,d;b='\n          <div><strong>Current address on file</strong></div>\n          <div id="existingAddress" class="top-buffer">';(d=e.existingAddress)?d=d.call(a,{hash:{}}):(d=a.existingAddress,d="function"===typeof d?d():d);return b+=k(d)+"</div>\n        "},d)}))||0===c)b+=c;b+='\n      </div>\n\n    </div>\n    <div class="row">\n      <div class="col-xs-16">\n        <p id="re-enterLabel"><strong>';
c=a.existingAddress;if((c=e["if"].call(a,c,{hash:{},inverse:this.program(9,function(a,c){return"Please enter address"},d),fn:this.program(7,function(a,c){return"Re-enter the address in the format required by the ATO"},d)}))||0===c)b+=c;b+='</strong></p>\n        <div id="employeeAddress"></div>\n      </div>\n\n      ';c=a.existingAddress;if((c=e["if"].call(a,c,{hash:{},inverse:this.noop,fn:this.program(11,function(a,c){return'\n      <div id="addressInputHelp" class="col-xs-8">\n        <p><strong>Why do I need to re-format this address?</strong></p>\n        <p>\n          The ATO requires employee addresses to be formatted this way for electronic lodgement of PAYG summaries.\n        </p>\n        <p>\n          Don\'t worry. We\'ll remember your input for the next time.\n        </p>\n      </div>\n      '},
d)}))||0===c)b+=c;return b+'\n    </div>\n    <div class="row">\n      <div class="col-xs-24 text-right">\n        <button type="button" class="btn btn-primary action" id="step1Next" data-container="employeeDetails">Next step</button>\n      </div>\n    </div>\n\n  </div>\n</div>\n'});return this.HandlebarsTemplates["payroll/payment_summaries/payment_summary_employee_details"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["payroll/payment_summaries/payment_summary_info"]=Handlebars.template(function(b,a,e,c,d){function f(a,c){return"selected"}e=e||b.helpers;d=d||{};b="";var g,h=this,l=e.helperMissing,k=this.escapeExpression;c={heading:"Enter payment summary info"};c=(g=e.includePartial)?g.call(a,"page_heading",{hash:c,data:d}):l.call(a,"includePartial","page_heading",{hash:c,data:d});b+=k(c)+'\n\n<hr/>\n\n<div class="paymentSummaryInfo">\n  <div class="row">\n    <div id="employeeMenuWrapper" class="col-xs-4">\n      <div class="employeeMenu">\n        ';
c=a.employees;if((c=e.each.call(a,c,{hash:{},inverse:h.program(4,function(a,c){return'\n          <div class="accordion-heading employeeNavigateItem">\n            <label>\n              <a tabindex="-1">No employee found</a>\n            </label>\n          </div>\n        '},d),fn:h.program(1,function(a,c){var b,d,g;b='\n          <div class="employeeMenuHeading ';d=c.index;if((d=(g=e.ifEqual)?g.call(a,d,0,{hash:{},inverse:h.noop,fn:h.program(2,f,c),data:c}):l.call(a,"ifEqual",d,0,{hash:{},inverse:h.noop,
fn:h.program(2,f,c),data:c}))||0===d)b+=d;b+='">\n            <div class="employeeMenuToggle" data-index="';d=c.index;d="function"===typeof d?d():d;b+=k(d)+'">\n              <a class="employeeNavigateItem" data-index="';d=c.index;d="function"===typeof d?d():d;b+=k(d)+'">';(g=e.firstName)?d=g.call(a,{hash:{},data:c}):(d=a.firstName,d="function"===typeof d?d():d);b+=k(d)+" ";(g=e.lastName)?d=g.call(a,{hash:{},data:c}):(d=a.lastName,d="function"===typeof d?d():d);return b+=k(d)+"</a>\n            </div>\n          </div>\n        "},
d),data:d}))||0===c)b+=c;return b+'\n      </div>\n    </div>\n    <div id="employeeSummary" class="col-xs-20"></div>\n  </div>\n</div>\n'});return this.HandlebarsTemplates["payroll/payment_summaries/payment_summary_info"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["payroll/payment_summaries/payment_summary_lodging_details"]=Handlebars.template(function(b,a,e,c,d){e=e||b.helpers;c=c||b.partials;b='<div id="pageContentHeader" class="row bottom-buffer">\n  <h1 class="col-xs-16">Create file for online lodgement</h1>\n  <div class="col-xs-8 text-right h1-control"><a class="back">Return to PAYG Summary Centre</a></div>\n</div>\n<div id="lodgingDetailsContainer">\n  <div id="lodgingDetails">\n    ';if((a=
this.invokePartial(c._payroll_payment_summaries_partial_lodging_details,"_payroll_payment_summaries_partial_lodging_details",a,e,c))||0===a)b+=a;return b+'\n    <div class="row bottom-buffer">\n      <h1 class="col-xs-24">FINAL STEPS: Create file and lodge with the ATO</h1>\n    </div>\n    <ul class="steps">\n      <li class="clearfix">\n        <div class="numbers-one number"></div>\n        <div class="stepDescription text">\n          <p> Click the button below to create the EMPDUPE file and save it to your computer.</p>\n          <button id="createReportButton" class="btn btn-primary action">Create EMPDUPE file</button>\n        </div>\n      </li>\n      <li class="clearfix">\n        <div class="numbers-two number"></div>\n        <div class="stepDescription text">\n          <p> After you\'ve saved the EMPDUPE file, you can submit it online through the ATO\'s online portal.\n            For more information on lodging electronically, see the\n            <a id="atoFileTransferLink"\n               href="https://www.ato.gov.au/business/payg-withholding/in-detail/reporting-and-paying-to-us/lodging-your-payg-withholding-annual-reports-online/#Reportsyoucanlodgeonline"\n               target="_blank">ATO website</a>.\n          </p>\n        </div>\n      </li>\n    </ul>\n  </div>\n</div>\n'});
return this.HandlebarsTemplates["payroll/payment_summaries/payment_summary_lodging_details"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["payroll/payment_summaries/payment_summary_third_party_details"]=Handlebars.template(function(b,a,e,c,d){e=e||b.helpers;c=c||b.partials;var f,g=e.helperMissing,h=this.escapeExpression;b='<div class="form-group">\n  <h3 class="col-xs-24">Details of the party lodging the report</h3>\n</div>\n<div class="row form-horizontal">\n  <div class="col-xs-12">\n    ';d={inputLabel:"Service provider's name:",inputName:"businessName",
"data-maxlength":"200"};d=(f=e.TextInput)?f.call(a,{hash:d}):g.call(a,"TextInput",{hash:d});b+=h(d)+'\n  </div>\n</div>\n<div class="addresses row">\n</div>\n<div class="row form-horizontal">\n  <div class="col-xs-8">\n    ';d={inputLabel:"ABN:",inputName:"abn","data-valid-regex":"^\\d{0,11}$",labelCssClass:"col-xs-12",widgetCssClass:"col-xs-12"};d=(f=e.RegexInput)?f.call(a,{hash:d}):g.call(a,"RegexInput",{hash:d});b+=h(d)+"\n  </div>\n</div>\n";if((d=this.invokePartial(c._payroll_payment_summaries_partial_contact_details,
"_payroll_payment_summaries_partial_contact_details",a,e,c))||0===d)b+=d;return b+"\n"});return this.HandlebarsTemplates["payroll/payment_summaries/payment_summary_third_party_details"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["payroll/payment_summaries/review"]=Handlebars.template(function(b,a,e,c,d){return'<div id="pageContentHeader" class="row bottom-buffer">\n  <h1 class="col-xs-12">Review payment summaries</h1>\n  <div class="col-xs-12 text-right h1-control"><a class="back">Return to PAYG Summary Centre</a></div>\n</div>\n<div id="paymentSummaryReview">\n  <div id="table">\n  </div>\n  <div class="review top-buffer text-center">\n    <button class="btn btn-primary action">Continue</button>\n  </div>\n</div>\n'});return this.HandlebarsTemplates["payroll/payment_summaries/review"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["payroll/payment_summaries/review_header"]=Handlebars.template(function(b,a,e,c,d){return'<tr>\n  <th data-field="name">Name</th>\n  <th data-field="grossPayments" class="text-right">Gross payments</th>\n  <th data-field="totalTaxWithheld" class="text-right">Total tax withheld</th>\n  <th data-field="lodgedStatus">Summary type</th>\n  <th data-field="employeeId"></th>\n</tr>\n'});return this.HandlebarsTemplates["payroll/payment_summaries/review_header"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["payroll/payment_summaries/review_row"]=Handlebars.template(function(b,a,e,c,d){e=e||b.helpers;var f=this.escapeExpression,g=e.helperMissing;b="<td>";(d=e.name)?c=d.call(a,{hash:{}}):(c=a.name,c="function"===typeof c?c():c);b+=f(c)+'</td>\n<td class="text-right">$';c=a.finalGrossPayments;c=(d=e.moneyValueFormatWithoutDollarSignAndCents)?d.call(a,c,{hash:{}}):g.call(a,"moneyValueFormatWithoutDollarSignAndCents",
c,{hash:{}});b+=f(c)+'</td>\n<td class="text-right">$';c=a.finalTotalTaxWithheld;c=(d=e.moneyValueFormatWithoutDollarSignAndCents)?d.call(a,c,{hash:{}}):g.call(a,"moneyValueFormatWithoutDollarSignAndCents",c,{hash:{}});b+=f(c)+"</td>\n<td>";(d=e.lodgedStatus)?c=d.call(a,{hash:{}}):(c=a.lodgedStatus,c="function"===typeof c?c():c);b+=f(c)+'</td>\n<td class="pdfCol"><span class="pdf" data-employee-id="';(d=e.employeeId)?c=d.call(a,{hash:{}}):(c=a.employeeId,c="function"===typeof c?c():c);return b+=f(c)+
'"></span></td>\n'});return this.HandlebarsTemplates["payroll/payment_summaries/review_row"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["payroll/payment_summaries/signature"]=Handlebars.template(function(b,a,e,c,d){return'<div id="reviewContainer">\n  <div class="row top-buffer">\n    <div class="col-xs-12 col-xs-offset-6 text-center">Enter the authorised signatory for all of these summaries:</div>\n  </div>\n  <div class="form-horizontal top-buffer">\n    <div class="form-group">\n      <div class="col-xs-12 col-xs-offset-6 form-group-wrapper" data-widget="RegexInput" data-name="authorisedSignatory" data-valid-regex="^[\\w\\s]{0,38}$" data-css-class="signature"></div>\n    </div>\n  </div>\n  <div class="row top-buffer">\n    <div class="col-xs-12 col-xs-offset-6 text-center">The next step is a review of the data from these steps.</div>\n  </div>\n  <div class="review top-buffer text-center">\n    <button class="btn btn-primary action">Continue to review</button>\n  </div>\n</div>\n'});return this.HandlebarsTemplates["payroll/payment_summaries/signature"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["payroll/payment_summaries/total_amount_error"]=Handlebars.template(function(b,a,e,c,d){e=e||b.helpers;b="";c=a.errors;if((c=e.each.call(a,c,{hash:{},inverse:this.noop,fn:this.program(1,function(a,c){var b;b='\n  <div class="alert alert-danger">\n    ';if((a="function"===typeof a?a():a)||0===a)b+=a;return b+"\n  </div>\n"},d)}))||0===c)b+=c;return b+"\n"});return this.HandlebarsTemplates["payroll/payment_summaries/total_amount_error"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["payroll/payment_summaries/total_assignment"]=Handlebars.template(function(b,a,e,c,d){e=e||b.helpers;c=this.escapeExpression;b='<div id="';(e=e.name)?a=e.call(a,{hash:{}}):(a=a.name,a="function"===typeof a?a():a);return b+=c(a)+'"></div>\n'});return this.HandlebarsTemplates["payroll/payment_summaries/total_assignment"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["payroll/payment_summaries/total_assignment_footer"]=Handlebars.template(function(b,a,e,c,d){e=e||b.helpers;var f=this.escapeExpression,g=e.helperMissing;b='<tr>\n  <th data-field="footer" class="text-right">';(d=e.footerTitle)?c=d.call(a,{hash:{}}):(c=a.footerTitle,c="function"===typeof c?c():c);b+=f(c)+'</th>\n  <th class="text-right" data-field="footer">';c=a.total;c=(d=e.moneyValueFormatWithoutDollarSignAndCents)?
d.call(a,c,{hash:{}}):g.call(a,"moneyValueFormatWithoutDollarSignAndCents",c,{hash:{}});return b+=f(c)+"</th>\n</tr>\n"});return this.HandlebarsTemplates["payroll/payment_summaries/total_assignment_footer"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["payroll/payment_summaries/total_assignment_header"]=Handlebars.template(function(b,a,e,c,d){e=e||b.helpers;c=this.escapeExpression;b='<tr>\n  <th data-field="header" colspan="2">';(e=e.headerTitle)?a=e.call(a,{hash:{}}):(a=a.headerTitle,a="function"===typeof a?a():a);return b+=c(a)+"</th>\n</tr>\n"});return this.HandlebarsTemplates["payroll/payment_summaries/total_assignment_header"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["payroll/payment_summaries/total_assignment_row"]=Handlebars.template(function(b,a,e,c,d){function f(a,b){return"overridden"}e=e||b.helpers;var g,h=this.escapeExpression,l=e.helperMissing;b="<td>";(g=e.description)?c=g.call(a,{hash:{}}):(c=a.description,c="function"===typeof c?c():c);b+=h(c)+'</td>\n<td class="text-right ';c=a.overriddenAmount;if((c=(g=e.unlessBlank)?g.call(a,c,{hash:{},inverse:this.noop,
fn:this.program(1,f,d)}):l.call(a,"unlessBlank",c,{hash:{},inverse:this.noop,fn:this.program(1,f,d)}))||0===c)b+=c;b+='">';c=a.amount;c=(g=e.moneyValueFormatWithoutDollarSign)?g.call(a,c,{hash:{}}):l.call(a,"moneyValueFormatWithoutDollarSign",c,{hash:{}});return b+=h(c)+"</td>\n"});return this.HandlebarsTemplates["payroll/payment_summaries/total_assignment_row"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["payroll/payment_summaries/tpar_lodging_details"]=Handlebars.template(function(b,a,e,c,d){e=e||b.helpers;c=c||b.partials;b='<div id="pageContentHeader" class="row bottom-buffer">\n  <h1 class="col-xs-16">Create file for online lodgement</h1>\n  <div class="col-xs-8 text-right h1-control"><a class="back">Return to report</a></div>\n</div>\n<div id="lodgingDetailsContainer">\n  <div id="lodgingDetails">\n    ';
if((a=this.invokePartial(c._payroll_payment_summaries_partial_lodging_details,"_payroll_payment_summaries_partial_lodging_details",a,e,c))||0===a)b+=a;return b+'\n    <div class="row bottom-buffer">\n      <h1 class="col-xs-24">Create file and lodge with the ATO</h1>\n    </div>\n    <ul class="steps">\n      <li>\n        <div class="numbers-one number"></div>\n        <div class="stepDescription text">\n          <p> Click the button below to create the TPAR file and save it to your computer.</p>\n          <button id="createReportButton" class="btn btn-primary action">Create TPAR file</button>\n        </div>\n      </li>\n      <li>\n        <div class="numbers-two number"></div>\n        <div class="stepDescription text">\n          <p>After you\'ve saved the TPAR file, you can submit it online through the ATO\'s online portal. For more information on lodging electronically,\n            see the\n            <a href="http://www.ato.gov.au/Business/Yearly-reports-and-returns/Taxable-payments-annual-report/How-to-lodge-%28TPAR%29/" target="_blank">ATO website</a>.\n          </p>\n        </div>\n      </li>\n    </ul>\n  </div>\n</div>\n'});
return this.HandlebarsTemplates["payroll/payment_summaries/tpar_lodging_details"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["payroll/paysuper/pay_super"]=Handlebars.template(function(b,a,e,c,d){function f(a,b){var c,d;c='\n  <br/>\n  <div class="row">\n    <div class="col-xs-24">\n      <div id="pay-super-onboarding" class="banner banner-blue"></div>\n    </div>\n  </div>\n  <br/>\n  <div class="loadingSpinner"></div>\n  ';if((d=(d=e.unlessFeature)?d.call(a,"PAY_SUPER_CSV",{hash:{},inverse:m.noop,fn:m.program(2,g,b)}):n.call(a,
"unlessFeature","PAY_SUPER_CSV",{hash:{},inverse:m.noop,fn:m.program(2,g,b)}))||0===d)c+=d;c+="\n  ";if((d=(d=e.ifFeature)?d.call(a,"PAY_SUPER_CSV",{hash:{},inverse:m.noop,fn:m.program(4,h,b)}):n.call(a,"ifFeature","PAY_SUPER_CSV",{hash:{},inverse:m.noop,fn:m.program(4,h,b)}))||0===d)c+=d;return c+"\n"}function g(a,c){return'\n    <div class="pay-super-coming-soon"></div>\n  '}function h(a,c){var b,d,f;b='\n      <div id="overlay"></div>\n      <div id="overlay-message" class="slow-fadein"><span>Once you\'ve completed the setup tasks above, you\'ll be able to start paying super.</span></div>\n      <div id="page">\n      ';
d={heading:"Pay superannuation"};if((d=(f=e.pageHeading)?f.call(a,{hash:d,inverse:m.noop,fn:m.program(5,l,c)}):n.call(a,"pageHeading",{hash:d,inverse:m.noop,fn:m.program(5,l,c)}))||0===d)b+=d;b+='\n      <div id="upcoming-info" class="tooltip">\n        Comming Soon!\n      </div>\n      <hr/>\n      <div id="paySuperContainer">\n        <div id="toolbar" class="row bottom-buffer">\n          <div class="form-group">\n            <div class="col-xs-6">\n              ';d={inputLabel:"From",inputName:"from",
labelCssClass:"",widgetCssClass:""};d=(f=e.DatePicker)?f.call(a,{hash:d}):n.call(a,"DatePicker",{hash:d});b+=q(d)+'\n            </div>\n\n            <div class="col-xs-6">\n              ';d={inputLabel:"To",inputName:"to",labelCssClass:"",widgetCssClass:""};d=(f=e.DatePicker)?f.call(a,{hash:d}):n.call(a,"DatePicker",{hash:d});b+=q(d)+'\n            </div>\n\n            <div class="col-xs-6">\n              ';d={inputLabel:"Downloaded",inputName:"isDownloaded","data-collection":"downloadedCollection",
"data-name-field":"name","data-value-field":"id",labelCssClass:"",widgetCssClass:""};d=(f=e.Select)?f.call(a,{hash:d}):n.call(a,"Select",{hash:d});b+=q(d)+'\n            </div>\n\n            <div class="col-xs-6">\n              ';d={inputLabel:"Search",inputName:"search",labelCssClass:"",widgetCssClass:"","data-placeholder":"Search all fields"};d=(f=e.TextInput)?f.call(a,{hash:d}):n.call(a,"TextInput",{hash:d});return b+=q(d)+'\n            </div>\n\n          </div>\n        </div>\n        <div id="table"></div>\n      </div>\n    </div>\n  '}
function l(a,b){return'\n        <button id="paySuperButton" class="btn btn-primary" disabled="true">Pay super</button>\n      '}e=e||b.helpers;b="";var k,m=this,n=e.helperMissing,q=this.escapeExpression;c=e.blockHelperMissing;(k=e.ifAu)?k=k.call(a,{hash:{},inverse:m.noop,fn:m.program(1,f,d)}):(k=a.ifAu,k="function"===typeof k?k():k);e.ifAu||(k=c.call(a,k,{hash:{},inverse:m.noop,fn:m.program(1,f,d)}));if(k||0===k)b+=k;return b+"\n"});return this.HandlebarsTemplates["payroll/paysuper/pay_super"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["payroll/paysuper/pay_super_download"]=Handlebars.template(function(b,a,e,c,d){function f(a,b){return"employees"}function g(a,b){return"employee"}e=e||b.helpers;d=d||{};var h,l=this.escapeExpression,k=e.helperMissing;b='<div class="modal-dialog modal-lg">\n    <div class="modal-content">\n        <div class="modal-header">\n            <button id="cancelButton" type="button" class="close" data-dismiss="modal" aria-hidden="Close">\n                <span class="myob-icon-close" aria-hidden="true"></span>\n            </button>\n            <span class="modal-title" id="modal-title-download-super-dialog">Pay superannuation</span>\n        </div>\n        <div class="modal-body" id="download-super-dialog-content">\n            <div class="row">\n                <div class="col-md-14" id="dialog-download-info">\n                    <div class="dialog-number">\n                        <span class="fa-stack fa-lg">\n                           <i class="fa fa-circle-thin fa-stack-2x"></i>\n                           <i class="fa fa-stack-1x number">1</i>\n                         </span>\n                    </div>\n                    <strong>You\'re paying</strong><br/>\n                    <span>$';
(h=e.totalSuper)?c=h.call(a,{hash:{},data:d}):(c=a.totalSuper,c="function"===typeof c?c():c);b+=l(c)+" in superannuation for ";(h=e.numberOfEmployees)?c=h.call(a,{hash:{},data:d}):(c=a.numberOfEmployees,c="function"===typeof c?c():c);b+=l(c)+" ";c=a.numberOfEmployees;if((c=(h=e.ifGreater)?h.call(a,c,1,{hash:{},inverse:this.program(3,g,d),fn:this.program(1,f,d),data:d}):k.call(a,"ifGreater",c,1,{hash:{},inverse:this.program(3,g,d),fn:this.program(1,f,d),data:d}))||0===c)b+=c;b+='.</span>\n                </div>\n                <div class="col-md-10">\n                    <form id="submitForm" action="';
c=a.businessId;c=(h=e.apiUrl)?h.call(a,c,"/pastpayrun/paysuper.csv",{hash:{},data:d}):k.call(a,"apiUrl",c,"/pastpayrun/paysuper.csv",{hash:{},data:d});b+=l(c)+'" method="POST">\n                        ';c=a.payrunEmployeeIds;if((c=e.each.call(a,c,{hash:{},inverse:this.noop,fn:this.program(5,function(a,b){var c,d;c='\n                            <input type="hidden" name="payrunEmployeeIds[';d=b.index;d="function"===typeof d?d():d;c+=l(d)+'].payrunEmployeeId" value="';a="function"===typeof a?a():
a;return c+=l(a)+'"/>\n                        '},d),data:d}))||0===c)b+=c;return b+'\n                        <button id="downloadButton" class="btn btn-primary action">Download super file</button>\n                    </form>\n                </div>\n            </div>\n            <hr/>\n\n            <div class="row">\n                <div class="col-md-14">\n                    <div class="dialog-number">\n                        <span class="fa-stack fa-lg">\n                           <i class="fa fa-circle-thin fa-stack-2x"></i>\n                           <i class="fa fa-stack-1x number">2</i>\n                         </span>\n                    </div>\n                    <strong>Upload the file to MYOB\'s super portal</strong><br/>\n                    <span>This is where you\'ll make the payment.</span>\n                </div>\n                <div class="col-md-10">\n                    <button class="btn btn-default" id="register-super-portal-btn">Go to MYOB\'s super portal</button>\n                </div>\n            </div>\n        </div>\n        <div class="modal-footer" id="download-super-dialog-footer">\n            <div class="row">\n                <div class="col-md-20 note">\n                    <p>This transaction won\'t be recorded in MYOB Essentials. <a href="http://help.myob.com/wiki/x/uoCB" target="_blank">What do I need to do?</a></p>\n                </div>\n                <div class="col-md-4">\n                    <button id="closeButton" class="btn btn-default pull-right">Close</button>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n'});
return this.HandlebarsTemplates["payroll/paysuper/pay_super_download"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["payroll/paysuper/pay_super_missing_info"]=Handlebars.template(function(b,a,e,c,d){e=e||b.helpers;var f=this.escapeExpression;b='<div class="col-xs-1 arrow-icon ';c=a.missingInfo;if((c=e.unless.call(a,c,{hash:{},inverse:this.noop,fn:this.program(1,function(a,b){return"decreased-opacity"},d)}))||0===c)b+=c;b+='"><i class="icon-arrow-right-large"/> </div>\n\n<h4 class="col-xs-17 ';c=a.missingInfo;if((c=e.unless.call(a,
c,{hash:{},inverse:this.noop,fn:this.program(3,function(a,b){return"decreased-opacity"},d)}))||0===c)b+=c;b+='">';(c=e.label)?c=c.call(a,{hash:{}}):(c=a.label,c="function"===typeof c?c():c);b+=f(c)+'</h4>\n\n<div class="col-xs-6 align-right">\n  ';c=a.missingInfo;if((c=e["if"].call(a,c,{hash:{},inverse:this.program(7,function(a,b){return'\n    <div class="tick-icon"/>\n  '},d),fn:this.program(5,function(a,b){var c,d;c='\n    <button id="';(d=e.buttonId)?d=d.call(a,{hash:{}}):(d=a.buttonId,d="function"===
typeof d?d():d);c+=f(d)+'" class="btn btn-default">';(d=e.buttonText)?d=d.call(a,{hash:{}}):(d=a.buttonText,d="function"===typeof d?d():d);return c+=f(d)+"</button>\n  "},d)}))||0===c)b+=c;b+="\n</div>\n\n";c=a.showNewLine;if((c=e["if"].call(a,c,{hash:{},inverse:this.noop,fn:this.program(9,function(a,b){return'\n<div class="col-xs-24">\n  <hr class="hr-separator">\n</div>\n'},d)}))||0===c)b+=c;return b+"\n\n\n"});return this.HandlebarsTemplates["payroll/paysuper/pay_super_missing_info"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["payroll/paysuper/pay_super_onboarding"]=Handlebars.template(function(b,a,e,c,d){function f(a,b){return"\n        <p>Signup for MYOB\u2019s super portal to easily pay employee super contributions. It\u2019s free with your subscription.\n          You also need to update some details to meet SuperStream requirements.</p>\n      "}function g(a,b){return"\n        <p>In the meantime, update\tyour details to meet SuperStream requirements, and pay your June quarter or any\n          monthly\tcontributions the way you normally do. We'll let you know when MYOB's super portal is ready.</p>\n      "}
function h(a,b){var c,d,f;c="\n            ";d={label:"Signup for MYOB's super portal",missingInfo:!0,buttonText:"Signup",buttonId:"register-myob-super-portal-btn"};d=(f=e.includePartial)?f.call(a,"pay_super_missing_info",{hash:d}):n.call(a,"includePartial","pay_super_missing_info",{hash:d});return c+=m(d)+"\n          "}function l(a,b){var c,d,f;c="\n            ";d={label:"Register for MYOB's super portal",missingInfo:!0,buttonText:"Register",buttonId:"register-myob-super-portal-btn"};d=(f=e.includePartial)?
f.call(a,"pay_super_missing_info",{hash:d}):n.call(a,"includePartial","pay_super_missing_info",{hash:d});return c+=m(d)+"\n          "}e=e||b.helpers;var k,m=this.escapeExpression,n=e.helperMissing;b='<div class="row">\n    <div class="col-xs-2 banner-icon">\n        <i class="icon-task-centre"/>\n    </div>\n\n    <div id="onboarding-instruction-box" class="col-xs-9">\n\n        <h3>Get ready for compliant super payments</h3>\n\n      <p>Recently the ATO has announced that employers with more than 20 employees have until the end of October 2015\n        to comply with <a id="super-stream-link">SuperStream</a> requirements. <a id="learn-more-link">Learn more</a></p>\n\n      <p>If you have 20 or more employees you can start using MYOB\u2019s\tsuper portal from August. Otherwise, you have until 30 June 2016 to comply, and can start using MYOB\'s super portal in time for your first contributions of the new financial year.</p>\n\n      ';
if((c=(k=e.ifFeature)?k.call(a,"PAY_SUPER_PORTAL_REGISTRATION",{hash:{},inverse:this.noop,fn:this.program(1,f,d)}):n.call(a,"ifFeature","PAY_SUPER_PORTAL_REGISTRATION",{hash:{},inverse:this.noop,fn:this.program(1,f,d)}))||0===c)b+=c;b+="\n      ";if((c=(k=e.unlessFeature)?k.call(a,"PAY_SUPER_PORTAL_REGISTRATION",{hash:{},inverse:this.noop,fn:this.program(3,g,d)}):n.call(a,"unlessFeature","PAY_SUPER_PORTAL_REGISTRATION",{hash:{},inverse:this.noop,fn:this.program(3,g,d)}))||0===c)b+=c;b+='\n\n    </div>\n\n    <div class="col-xs-12 col-xs-offset-1">\n        <div class="panel-body">\n          ';
c={label:"Add business details"};k=a.updateBusinessSettings;c.missingInfo=k;c.buttonText="Update";c.buttonId="business-details-btn";c.showNewLine=!0;c=(k=e.includePartial)?k.call(a,"pay_super_missing_info",{hash:c}):n.call(a,"includePartial","pay_super_missing_info",{hash:c});b+=m(c)+"\n\n          ";c={label:"Enter bank details for super payments"};k=a.updateBankDetails;c.missingInfo=k;c.buttonText="Update";c.buttonId="super-bank-account-btn";c.showNewLine=!0;c=(k=e.includePartial)?k.call(a,"pay_super_missing_info",
{hash:c}):n.call(a,"includePartial","pay_super_missing_info",{hash:c});b+=m(c)+"\n\n          ";c={};k=a.missingEmployeeLabel;c.label=k;k=a.updateEmployee;c.missingInfo=k;c.buttonText="Show all";c.buttonId="show-all-employees-btn";c.showNewLine=!1;c=(k=e.includePartial)?k.call(a,"pay_super_missing_info",{hash:c}):n.call(a,"includePartial","pay_super_missing_info",{hash:c});b+=m(c)+'\n\n            <div id="list-of-employees" class="col-xs-24 col-xs-offset-1">\n                <div class="scrollable">\n                  ';
c=a.missingEmployeeDetails;if((c=e.each.call(a,c,{hash:{},inverse:this.noop,fn:this.programWithDepth(function(a,b,c){b='\n                      <div class="col-xs-1 padding-top-bottom"><i class="icon-user-profile"></i></div>\n                      <div class="col-xs-23 padding-top-bottom">\n                          <a href="#businesses/';c=c.businessId;c="function"===typeof c?c():c;b+=m(c)+"/payroll/employees/";(c=e.employeeId)?c=c.call(a,{hash:{}}):(c=a.employeeId,c="function"===typeof c?c():c);
b+=m(c)+'?show-alert=true">';(c=e.firstName)?c=c.call(a,{hash:{}}):(c=a.firstName,c="function"===typeof c?c():c);b+=m(c)+"\n                            ";(c=e.lastName)?c=c.call(a,{hash:{}}):(c=a.lastName,c="function"===typeof c?c():c);return b+=m(c)+"</a>\n                      </div>\n                  "},d,a)}))||0===c)b+=c;b+='\n                </div>\n            </div>\n\n            <div class="col-xs-24">\n                <hr class="hr-separator">\n            </div>\n\n          ';if((c=
(k=e.ifFeature)?k.call(a,"PAY_SUPER_PORTAL_REGISTRATION",{hash:{},inverse:this.noop,fn:this.program(7,h,d)}):n.call(a,"ifFeature","PAY_SUPER_PORTAL_REGISTRATION",{hash:{},inverse:this.noop,fn:this.program(7,h,d)}))||0===c)b+=c;b+="\n          ";if((c=(k=e.unlessFeature)?k.call(a,"PAY_SUPER_PORTAL_REGISTRATION",{hash:{},inverse:this.noop,fn:this.program(9,l,d)}):n.call(a,"unlessFeature","PAY_SUPER_PORTAL_REGISTRATION",{hash:{},inverse:this.noop,fn:this.program(9,l,d)}))||0===c)b+=c;return b+"\n        </div>\n    </div>\n</div>\n"});
return this.HandlebarsTemplates["payroll/paysuper/pay_super_onboarding"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["payroll/paysuper/pay_super_table_header"]=Handlebars.template(function(b,a,e,c,d){return'<tr>\n  <th class="text-center" style="width:3%"><input id="selectAll" type="checkbox" /></th>\n  <th data-field="payDate" style="width:10%" class="desc">Pay on date<i class="fa fa-caret-down"></i></th>\n  <th data-field="employeeName" style="width:20%">Name</th>\n  <th data-field="superFundName" style="width:18%">Super fund</th>\n  <th data-field="superGuarantee" class="text-right" style="width:13%">Super guarantee&nbsp;</th>\n  <th data-field="memberContributions" class="text-right" style="width:16%">Employee contrib.&nbsp;</th>\n  <th data-field="total" class="text-right" style="width:10%">Total&nbsp;</th>\n  <th data-field="downloaded" style="width:3%">&nbsp;</th>\n</tr>\n'});return this.HandlebarsTemplates["payroll/paysuper/pay_super_table_header"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["payroll/paysuper/pay_super_table_row"]=Handlebars.template(function(b,a,e,c,d){e=e||b.helpers;var f=e.helperMissing,g=this.escapeExpression;b='<td class="text-center">\n  ';c=a.paySuperAllowed;if((c=e["if"].call(a,c,{hash:{},inverse:this.program(3,function(a,c){return'\n    <div id="missing-super-setup" rel="tooltip" data-original-title="Finish setting up this employee\u2019s details before paying their super."></div>\n  '},
d),fn:this.program(1,function(a,c){var b,d,n;b="\n    ";d={inputName:"selected",widgetCssClass:""};d=(n=e.Checkbox)?n.call(a,{hash:d}):f.call(a,"Checkbox",{hash:d});return b+=g(d)+"\n  "},d)}))||0===c)b+=c;b+="\n</td>\n<td>";(c=e.payDate)?c=c.call(a,{hash:{}}):(c=a.payDate,c="function"===typeof c?c():c);b+=g(c)+"</td>\n<td>";(c=e.employeeName)?c=c.call(a,{hash:{}}):(c=a.employeeName,c="function"===typeof c?c():c);b+=g(c)+'</td>\n<td class="capitalize">';(c=e.superFundName)?c=c.call(a,{hash:{}}):(c=
a.superFundName,c="function"===typeof c?c():c);b+=g(c)+'</td>\n<td class="text-right">$';(c=e.superGuarantee)?c=c.call(a,{hash:{}}):(c=a.superGuarantee,c="function"===typeof c?c():c);b+=g(c)+'</td>\n<td class="text-right">$';(c=e.memberContributions)?c=c.call(a,{hash:{}}):(c=a.memberContributions,c="function"===typeof c?c():c);b+=g(c)+'</td>\n<td class="text-right">$';(c=e.total)?c=c.call(a,{hash:{}}):(c=a.total,c="function"===typeof c?c():c);b+=g(c)+'</td>\n<td class="text-center">\n  ';c=a.downloaded;
if((c=e["if"].call(a,c,{hash:{},inverse:this.noop,fn:this.program(5,function(a,c){return'\n    <div id="pay-super-downloaded" rel="tooltip" data-original-title="The file has been\n    downloaded"></div>\n  '},d)}))||0===c)b+=c;return b+"\n</td>\n"});return this.HandlebarsTemplates["payroll/paysuper/pay_super_table_row"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["payroll/reports/leave_report"]=Handlebars.template(function(b,a,e,c,d){e=e||b.helpers;b="";var f=e.helperMissing,g=this.escapeExpression;c={heading:"Leave"};c=(d=e.includePartial)?d.call(a,"page_heading",{hash:c}):f.call(a,"includePartial","page_heading",{hash:c});b+=g(c)+'\n\n<div class="row">\n  <div class="col-xs-24">\n    <hr class="reportHr">\n  </div>\n</div>\n\n<div class="row">\n  <div class="col-xs-24 form-horizontal">\n    <div class="form-group">\n      <div class="col-xs-12">\n        ';
c={inputLabel:"Leave type:",inputName:"leaveType","data-collection":"leaveTypes","data-name-field":"name","data-value-field":"id",labelCssClass:"col-xs-8",widgetCssClass:"col-xs-16"};c=(d=e.Select)?d.call(a,{hash:c}):f.call(a,"Select",{hash:c});b+=g(c)+'\n      </div>\n    </div>\n\n    <div class="form-group">\n      <div class="col-xs-12">\n        ';c={inputLabel:"Employee:",inputName:"employeeId","data-collection":"employees","data-name-field":"displayName","data-value-field":"id",labelCssClass:"col-xs-8",
widgetCssClass:"col-xs-16"};c=(d=e.Select)?d.call(a,{hash:c}):f.call(a,"Select",{hash:c});b+=g(c)+'\n      </div>\n      <div class="col-xs-12">\n        ';c={inputLabel:"Show inactive employees",inputName:"showInactive",widgetCssClass:"col-xs-24"};c=(d=e.Checkbox)?d.call(a,{hash:c}):f.call(a,"Checkbox",{hash:c});b+=g(c)+'\n      </div>\n    </div>\n\n    <div class="form-group">\n      <div class="col-xs-12">\n        <div class="form-group">\n          <label class="col-xs-8 control-label" for="typePeriod">Period: </label>\n          ';
c={inputLabel:"Year to date",inputId:"typePeriod",inputName:"periodSelection",inputValue:"YTD",cssClass:"",labelCssClas:"",widgetCssClass:"col-xs-16"};c=(d=e.Radio)?d.call(a,{hash:c}):f.call(a,"Radio",{hash:c});b+=g(c)+'\n        </div>\n      </div>\n    </div>\n\n    <div class="form-group">\n      ';c={inputLabel:"Date range",inputId:"daterange",inputName:"periodSelection",inputValue:"DATERANGE",cssClass:"",labelCssClas:"",widgetCssClass:"col-xs-3 col-xs-offset-4"};c=(d=e.Radio)?d.call(a,{hash:c}):
f.call(a,"Radio",{hash:c});b+=g(c)+'\n      <div class="col-xs-5">\n        ';c={inputLabel:"From: ",inputName:"from",labelCssClass:"col-xs-6",widgetCssClass:"col-xs-18"};c=(d=e.DatePicker)?d.call(a,{hash:c}):f.call(a,"DatePicker",{hash:c});b+=g(c)+'\n      </div>\n      <div class="col-xs-5">\n        ';c={inputLabel:"To: ",inputName:"to",labelCssClass:"col-xs-5",widgetCssClass:"col-xs-19"};c=(d=e.DatePicker)?d.call(a,{hash:c}):f.call(a,"DatePicker",{hash:c});return b+=g(c)+'\n      </div>\n    </div>\n  </div>\n</div>\n\n<div class="row">\n  <div class="col-xs-24 text-right">\n    <button class="btn btn-default action" id="generateSummaryButton">Summary report</button>\n    <button class="btn btn-default action" id="generateDetailedButton">Detailed report</button>\n  </div>\n</div>\n'});
return this.HandlebarsTemplates["payroll/reports/leave_report"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["registration/browser_check"]=Handlebars.template(function(b,a,e,c,d){function f(a,c){return'\n  <div class="alert alert-info">\n    Oh no! Your browser\'s too old for MYOB Essentials. <a target="_blank" href="http://www.google.com/chrome">Download Chrome</a> (our\n    favourite browser) or\n    <a href="http://community.myob.com/t5/The-LiveAccounts-Blog/Browsers/ba-p/234315">find out more.</a>\n  </div>\n'}e=
e||b.helpers;b="";var g=e.helperMissing;c=a.browserError;if((c=(e=e.ifDefined)?e.call(a,c,{hash:{},inverse:this.noop,fn:this.program(1,f,d)}):g.call(a,"ifDefined",c,{hash:{},inverse:this.noop,fn:this.program(1,f,d)}))||0===c)b+=c;return b+"\n"});return this.HandlebarsTemplates["registration/browser_check"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["registration/partner_signup"]=Handlebars.template(function(b,a,e,c,d){c=this.escapeExpression;b='<div id="partnerSignupView">\n    <div class="row">\n        <div class="col-xs-7"></div>\n        <div class="content col-xs-10">\n            <img src="frontend/partner-signup.png"/>\n            <div class="reason">\n                <div>Sorry <span class="user">';e=a.email;e="function"===typeof e?e():e;b+=
c(e)+'</span>, but this isn\'t an MYOB partner account.</div>\n            </div>\n            <div class="instruction">\n                <div class="signup"><a id="signupLink" href="';e=a.signupUrl;e="function"===typeof e?e():e;return b+=c(e)+'" target="_blank">Sign up today</a> to become an MYOB partner.</div>\n                <div class="signin">Have a partner account under a different email address? <a id="loginLink">Sign in here.</a></div>\n            </div>\n            <div class="line"></div>\n            <div class="explanation">\n                <div class="title">Do I need a partner account?</div>\n                <div class="details">\n                    <p>You don\u2019t need a partner account for general day-to-day tasks, like entering sales and purchases or doing a pay run.</p>\n                    <p>If you\u2019re unsure, check with the business owner before signing up as an MYOB partner.</p>\n                </div>\n            </div>\n        </div>\n        <div class="col-xs-7"></div>\n    </div>\n</div>\n'});
return this.HandlebarsTemplates["registration/partner_signup"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["registration/select_business"]=Handlebars.template(function(b,a,e,c,d){e=e||b.helpers;var f=this.escapeExpression,g=e.helperMissing;b='<div class="modal-dialog">\n  <div class="modal-content">\n    <div class="modal-header">\n        <span id="modal-title-confirmation-dialog" class="modal-title">Select business</span>\n    </div>\n    <div class="modal-body">\n      <div class="row">\n        <div class="col-xs-24">\n           <p>\n               You have multiple businesses<br />\n               <br />\n               Which business do you want to let ';(d=
e.inviter)?c=d.call(a,{hash:{}}):(c=a.inviter,c="function"===typeof c?c():c);b+=f(c)+" access?\n           </p>\n\n          ";c={id:"businessSelect",labelCssClass:"",inputLabel:"",inputName:"business","data-collection":"businesses","data-name-field":"name","data-value-field":"id"};c=(d=e.Select)?d.call(a,{hash:c}):g.call(a,"Select",{hash:c});return b+=f(c)+'\n        </div>\n        <div class="col-xs-24 text-right top-buffer">\n          <button name="selectButton" id="selectButton" class="btn btn-primary">Done</button>\n          <button name="cancelButton" id="cancelButton" class="btn ">Cancel</button>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n\n'});
return this.HandlebarsTemplates["registration/select_business"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["registration/user_invitation"]=Handlebars.template(function(b,a,e,c,d){function f(a,c){return"hidden"}function g(a,c){return"hidden"}e=e||b.helpers;b="";var h=this,l=e.helperMissing;c=a.isLoading;if((c=e["if"].call(a,c,{hash:{},inverse:h.program(3,function(a,c){var b,d,p;b='\n  <div id="invitation" class="';d=a.responseType;if((d=(p=e.unlessEqual)?p.call(a,d,"NONE",{hash:{},inverse:h.noop,fn:h.program(4,
f,c)}):l.call(a,"unlessEqual",d,"NONE",{hash:{},inverse:h.noop,fn:h.program(4,f,c)}))||0===d)b+=d;b+='">\n      <div class="publicContainer user-invitation-container">\n        <h3 class="text-center">\n          Invitation to access MYOB Essentials\n        </h3>\n      </div>\n    </div>\n\n    <div id="notFound" class="';d=a.responseType;if((d=(p=e.ifEqual)?p.call(a,d,"NONE",{hash:{},inverse:h.noop,fn:h.program(6,g,c)}):l.call(a,"ifEqual",d,"NONE",{hash:{},inverse:h.noop,fn:h.program(6,g,c)}))||
0===d)b+=d;return b+'">\n      <div class="publicContainer user-invitation-container">\n        <h3 class="text-center">\n          Invitation to access MYOB Essentials\n        </h3>\n\n        This invitation was not found. It has either expired or has already been responded to.<br/>\n        <br/>\n        <a href="public.htm#login">Click here to log in to MYOB Essentials.</a>\n      </div>\n    </div>\n'},d),fn:h.program(1,function(a,c){return'\n  <div class="loadingSpinner show"></div>\n'},d)}))||
0===c)b+=c;return b+"\n"});return this.HandlebarsTemplates["registration/user_invitation"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["reports/accounts"]=Handlebars.template(function(b,a,e,c,d){function f(a,c){var b,d,f;b='\n        <li id="';d=a.key;d=(f=e.removeSpace)?f.call(a,d,{hash:{}}):q.call(a,"removeSpace",d,{hash:{}});b+=m(d)+'">\n          <label class="accountTypeLabel">\n            <input type="checkbox" class="input-small" ';d=a.value;if((d=(f=e.ifAllSelected)?f.call(a,d,{hash:{},inverse:n.noop,fn:n.program(2,g,c)}):q.call(a,
"ifAllSelected",d,{hash:{},inverse:n.noop,fn:n.program(2,g,c)}))||0===d)b+=d;b+=">";(f=e.key)?d=f.call(a,{hash:{}}):(d=a.key,d="function"===typeof d?d():d);b+=m(d)+" </label>\n            <ul>\n              ";d=a.value;if((d=e.each.call(a,d,{hash:{},inverse:n.noop,fn:n.program(4,h,c)}))||0===d)b+=d;return b+"\n            </ul>\n        </li>\n      "}function g(a,c){return" checked "}function h(a,c){var b,d;b='\n                <li class="listItem">\n                  <label><input type="checkbox" class="input-small" data-id="';
(d=e.id)?d=d.call(a,{hash:{}}):(d=a.id,d="function"===typeof d?d():d);b+=m(d)+'" ';d=a.selected;if((d=e["if"].call(a,d,{hash:{},inverse:n.noop,fn:n.program(5,l,c)}))||0===d)b+=d;b+=" />";(d=e.number)?d=d.call(a,{hash:{}}):(d=a.number,d="function"===typeof d?d():d);b+=m(d)+" ";(d=e.name)?d=d.call(a,{hash:{}}):(d=a.name,d="function"===typeof d?d():d);return b+=m(d)+"</label>\n                </li>\n              "}function l(a,c){return" checked "}e=e||b.helpers;var k,m=this.escapeExpression,n=this,
q=e.helperMissing;b='<div class="accountFilter">\n\n  <div class="row">\n    <div class="col-xs-24">\n      <label for="select"><input type="checkbox" class="input-small" id="select" />Select/Unselect all</label>\n      <div class="instruction">\n        Reduce the report size by selecting only the accounts needed\n      </div>\n    </div>\n  </div>\n\n  <div class="borderBottom"></div>\n\n  <div class="row">\n    <div class="col-xs-24">\n    <ul class="accountType">\n      ';c=a.grouping;if((c=(k=
e.key_value)?k.call(a,c,{hash:{},inverse:n.noop,fn:n.program(1,f,d)}):q.call(a,"key_value",c,{hash:{},inverse:n.noop,fn:n.program(1,f,d)}))||0===c)b+=c;return b+"\n    </ul>\n    </div>\n  </div>\n\n</div>\n"});return this.HandlebarsTemplates["reports/accounts"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["reports/banking/banking_transactions_report"]=Handlebars.template(function(b,a,e,c,d){e=e||b.helpers;b="";var f=e.helperMissing,g=this.escapeExpression;c={heading:"Banking transactions report"};c=(d=e.includePartial)?d.call(a,"page_heading",{hash:c}):f.call(a,"includePartial","page_heading",{hash:c});b+=g(c)+'\n<p id="pageContentOverview" class="bottom-buffer">Displays deposits and withdrawals for your selected bank or credit card accounts along with a running balance.</p>\n\n<div class="row">\n  <div class="col-xs-8">\n    ';
c={inputLabel:"Contact: ",inputName:"cardId",labelCssClass:"",widgetCssClass:"","data-collection":"contacts","data-labels":"name,firstName,lastName","data-name-field":"name","data-value-field":"id","data-default-value":"","data-placeholder":"All"};c=(d=e.TypeaheadDropdown)?d.call(a,{hash:c}):f.call(a,"TypeaheadDropdown",{hash:c});b+=g(c)+"\n\n    ";c={inputLabel:"Account: ",inputName:"accountId",labelCssClass:"",widgetCssClass:"","data-collection":"accounts","data-collection-filter":"bankingTransactions",
"data-group-by":"type","data-name-field":"name","data-value-field":"number","data-default-name":"All","data-default-value":""};c=(d=e.SelectGroupedAccounts)?d.call(a,{hash:c}):f.call(a,"SelectGroupedAccounts",{hash:c});b+=g(c)+"\n\n    ";c={inputLabel:"Transaction type: ",inputName:"transactionType",labelCssClass:"",widgetCssClass:"","data-collection":"transactionTypes","data-name-field":"name","data-value-field":"value"};c=(d=e.Select)?d.call(a,{hash:c}):f.call(a,"Select",{hash:c});b+=g(c)+'\n  </div>\n</div>\n\n<div class="row">\n  <div class="col-xs-10">\n    <div class="row">\n      <div class="col-xs-12">\n        <div class="">\n          ';
c={inputLabel:"Ref. no. from: ",inputName:"fromRefNo",labelCssClass:"",widgetCssClass:""};c=(d=e.TextInput)?d.call(a,{hash:c}):f.call(a,"TextInput",{hash:c});b+=g(c)+'\n        </div>\n      </div>\n      <div class="col-xs-12">\n        <div class="">\n          ';c={inputLabel:"To: ",inputName:"toRefNo",labelCssClass:"",widgetCssClass:""};c=(d=e.TextInput)?d.call(a,{hash:c}):f.call(a,"TextInput",{hash:c});b+=g(c)+'\n        </div>\n      </div>\n    </div>\n\n    <div class="row">\n      <div class="col-xs-12">\n        <div class="">\n          ';
c={inputLabel:"Dated from: ",inputName:"from",labelCssClass:"",widgetCssClass:""};c=(d=e.DatePicker)?d.call(a,{hash:c}):f.call(a,"DatePicker",{hash:c});b+=g(c)+'\n        </div>\n      </div>\n      <div class="col-xs-12">\n        <div class="">\n          ';c={inputLabel:"To: ",inputName:"to",labelCssClass:"",widgetCssClass:""};c=(d=e.DatePicker)?d.call(a,{hash:c}):f.call(a,"DatePicker",{hash:c});b+=g(c)+'\n        </div>\n      </div>\n    </div>\n\n    <div class="row">\n      <div class="col-xs-12">\n        <div class="">\n          ';
c={inputLabel:"Amount from:",inputName:"fromAmount","data-decimal-places":"2","data-valid-regex":"^[-\\+]?\\d{0,2},?\\d{0,3},?\\d{0,3}(\\.\\d{0,2})?$","data-invalid-regex":"[,\\.]{2}",labelCssClass:"",widgetCssClass:""};c=(d=e.MoneyInput)?d.call(a,{hash:c}):f.call(a,"MoneyInput",{hash:c});b+=g(c)+'\n        </div>\n      </div>\n      <div class="col-xs-12">\n        <div class="">\n          ';c={inputLabel:"To:",inputName:"toAmount","data-decimal-places":"2","data-valid-regex":"^[-\\+]?\\d{0,2},?\\d{0,3},?\\d{0,3}(\\.\\d{0,2})?$",
"data-invalid-regex":"[,\\.]{2}",labelCssClass:"",widgetCssClass:""};c=(d=e.MoneyInput)?d.call(a,{hash:c}):f.call(a,"MoneyInput",{hash:c});return b+=g(c)+'\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n\n<div class="row">\n  <div class="col-xs-24 text-right">\n    <button class="btn btn-primary action" id="generateButton">Generate report</button>\n  </div>\n</div>\n'});return this.HandlebarsTemplates["reports/banking/banking_transactions_report"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["reports/bill/bill_transactions_report"]=Handlebars.template(function(b,a,e,c,d){e=e||b.helpers;b="";var f=e.helperMissing,g=this.escapeExpression;c={heading:"Bill transactions report"};c=(d=e.includePartial)?d.call(a,"page_heading",{hash:c}):f.call(a,"includePartial","page_heading",{hash:c});b+=g(c)+'\n<p id="pageContentOverview" class="bottom-buffer">Displays a list of bill transactions for each supplier along with totals.</p>\n\n<div class="row">\n  <div class="col-xs-24">\n    <div class="form-inline bottom-buffer">\n      ';
c={inputLabel:"Supplier: ",inputName:"cardId",labelCssClass:"",widgetCssClass:"input-width-xlarge","data-collection":"contacts","data-collection-filter":"suppliers","data-labels":"name,firstName,lastName","data-name-field":"name","data-value-field":"id","data-default-value":"","data-placeholder":"All"};c=(d=e.TypeaheadDropdown)?d.call(a,{hash:c}):f.call(a,"TypeaheadDropdown",{hash:c});b+=g(c)+"\n\n      ";c={inputLabel:"Date issued: ",inputName:"from",labelCssClass:"",widgetCssClass:""};c=(d=e.DatePicker)?
d.call(a,{hash:c}):f.call(a,"DatePicker",{hash:c});b+=g(c)+"\n      ";c={inputLabel:"To: ",inputName:"to",labelCssClass:"",widgetCssClass:""};c=(d=e.DatePicker)?d.call(a,{hash:c}):f.call(a,"DatePicker",{hash:c});return b+=g(c)+'\n    </div>\n  </div>\n</div>\n\n<div class="row">\n  <div class="col-xs-24 text-right">\n    <button class="btn btn-primary action" id="generateButton">Generate report</button>\n  </div>\n</div>\n'});return this.HandlebarsTemplates["reports/bill/bill_transactions_report"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["reports/bill/bills_by_supplier_report"]=Handlebars.template(function(b,a,e,c,d){e=e||b.helpers;b="";var f;d=e.helperMissing;var g=this.escapeExpression;c={heading:"Bills by supplier report"};c=(f=e.includePartial)?f.call(a,"page_heading",{hash:c}):d.call(a,"includePartial","page_heading",{hash:c});b+=g(c)+'\n<p id="pageContentOverview" class="bottom-buffer">Displays a list of bill transactions for a certain period, organised by supplier. You can choose to see a summary or detailed version of this report.</p>\n\n<div class="row">\n  <div class="col-xs-12">\n    <div class="form-horizontal">\n      ';
c={inputLabel:"Supplier: ",inputName:"cardId",labelCssClass:"col-xs-10",widgetCssClass:"col-xs-14","data-collection":"contacts","data-collection-filter":"suppliers","data-labels":"name,firstName,\n      lastName","data-name-field":"name","data-value-field":"id","data-default-value":"","data-placeholder":"All"};c=(f=e.TypeaheadDropdown)?f.call(a,{hash:c}):d.call(a,"TypeaheadDropdown",{hash:c});b+=g(c)+'\n    </div>\n  </div>\n  <div class="col-xs-12">\n    <div class="form-horizontal">\n      ';c=
{inputLabel:"Bill status: ",inputName:"expenseStatusList",labelCssClass:"col-xs-10",widgetCssClass:"col-xs-14","data-collection":"statuses","data-name-field":"name","data-value-field":"value"};c=(f=e.Select)?f.call(a,{hash:c}):d.call(a,"Select",{hash:c});b+=g(c)+'\n    </div>\n  </div>\n</div>\n\n<div class="row">\n  <div class="col-xs-12">\n    <div class="form-horizontal">\n      ';c={inputLabel:"Bill no. from: ",inputName:"orderNumberFrom","data-maxlength":"13",labelCssClass:"col-xs-10",widgetCssClass:"col-xs-14"};
c=(f=e.TextInput)?f.call(a,{hash:c}):d.call(a,"TextInput",{hash:c});b+=g(c)+'\n    </div>\n  </div>\n  <div class="col-xs-12">\n    <div class="form-horizontal">\n      ';c={inputLabel:"To: ",inputName:"orderNumberTo","data-maxlength":"13",labelCssClass:"col-xs-10",widgetCssClass:"col-xs-14"};c=(f=e.TextInput)?f.call(a,{hash:c}):d.call(a,"TextInput",{hash:c});b+=g(c)+'\n    </div>\n  </div>\n</div>\n\n<div class="row">\n  <div class="col-xs-12">\n    <div class="form-horizontal">\n      ';c={inputLabel:"Date issued: ",
inputName:"from",labelCssClass:"col-xs-10",widgetCssClass:"col-xs-10"};c=(f=e.DatePicker)?f.call(a,{hash:c}):d.call(a,"DatePicker",{hash:c});b+=g(c)+'\n    </div>\n  </div>\n  <div class="col-xs-12">\n    <div class="form-horizontal">\n      ';c={inputLabel:"To: ",inputName:"to",labelCssClass:"col-xs-10",widgetCssClass:"col-xs-10"};c=(f=e.DatePicker)?f.call(a,{hash:c}):d.call(a,"DatePicker",{hash:c});b+=g(c)+'\n    </div>\n  </div>\n</div>\n\n<div class="row">\n  <div class="col-xs-12">\n    <div class="form-horizontal">\n      ';
c={inputLabel:"Amount from:",inputName:"fromAmount","data-decimal-places":"2","data-valid-regex":"^[-\\+]?\\d{0,2},?\\d{0,3},?\\d{0,3}(\\.\\d{0,2})?$","data-invalid-regex":"[,\\.]{2}",labelCssClass:"col-xs-10",widgetCssClass:"col-xs-14"};c=(f=e.MoneyInput)?f.call(a,{hash:c}):d.call(a,"MoneyInput",{hash:c});b+=g(c)+'\n    </div>\n  </div>\n  <div class="col-xs-12">\n    <div class="form-horizontal">\n      ';c={inputLabel:"To:",inputName:"toAmount","data-decimal-places":"2","data-valid-regex":"^[-\\+]?\\d{0,2},?\\d{0,3},?\\d{0,3}(\\.\\d{0,2})?$",
"data-invalid-regex":"[,\\.]{2}",labelCssClass:"col-xs-10",widgetCssClass:"col-xs-14"};c=(f=e.MoneyInput)?f.call(a,{hash:c}):d.call(a,"MoneyInput",{hash:c});b+=g(c)+'\n    </div>\n  </div>\n</div>\n<div class="row">\n  <div class="col-xs-12">\n    <div class="form-horizontal">\n      <div class="form-group">\n        <label class="col-xs-10 control-label">Display:</label>\n        <div class="col-xs-14">\n          ';c={name:"isItemDetailIncluded",cssClass:"",label:"Item detail"};f=a.isItemDetailIncluded;
c.checked=f;c=(f=e.CheckboxOld)?f.call(a,{hash:c}):d.call(a,"CheckboxOld",{hash:c});b+=g(c)+"\n          ";c={name:"isSubTotalByItem",cssClass:"",label:"Subtotal by bill"};f=a.isSubTotalByItem;c.checked=f;c=(f=e.CheckboxOld)?f.call(a,{hash:c}):d.call(a,"CheckboxOld",{hash:c});return b+=g(c)+'\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n\n<div class="row top-buffer">\n  <div class="col-xs-24 text-right">\n    <button class="btn btn-primary action" id="generateButton">Generate report</button>\n  </div>\n</div>\n'});
return this.HandlebarsTemplates["reports/bill/bills_by_supplier_report"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["reports/bill/bills_reconciliation_report"]=Handlebars.template(function(b,a,e,c,d){e=e||b.helpers;b="";var f=e.helperMissing,g=this.escapeExpression;c={heading:"Bills reconciliation"};c=(d=e.includePartial)?d.call(a,"page_heading",{hash:c}):f.call(a,"includePartial","page_heading",{hash:c});b+=g(c)+'\n<p id="pageContentOverview" class="bottom-buffer">Displays the amounts due to each supplier, and compares the total amount from outstanding bills with the Payables account up to a certain date.</p>\n\n<div class="row">\n  <div class="col-xs-24">\n    <div class="form-inline bottom-buffer">\n      ';c=
{inputLabel:"As of date: ",inputName:"date",labelCssClass:"",widgetCssClass:""};c=(d=e.DatePicker)?d.call(a,{hash:c}):f.call(a,"DatePicker",{hash:c});return b+=g(c)+'\n      <button class="btn btn-primary action" id="generateButton">Generate report</button>\n    </div>\n  </div>\n</div>\n'});return this.HandlebarsTemplates["reports/bill/bills_reconciliation_report"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["reports/bill/bills_report"]=Handlebars.template(function(b,a,e,c,d){e=e||b.helpers;b="";var f=e.helperMissing,g=this.escapeExpression;c={heading:"Bills report"};c=(d=e.includePartial)?d.call(a,"page_heading",{hash:c}):f.call(a,"includePartial","page_heading",{hash:c});b+=g(c)+'\n<p id="pageContentOverview" class="bottom-buffer">Displays a list of bills for a certain period and shows the amount, amount owing and status for each.</p>\n\n<div class="row">\n  <div class="col-xs-12">\n    <div class="form-horizontal">\n      ';
c={inputLabel:"Supplier: ",inputName:"cardId",labelCssClass:"col-xs-10",widgetCssClass:"col-xs-14","data-collection":"suppliers","data-labels":"name,firstName,lastName","data-name-field":"name","data-value-field":"id","data-default-value":"","data-placeholder":"All"};c=(d=e.TypeaheadDropdown)?d.call(a,{hash:c}):f.call(a,"TypeaheadDropdown",{hash:c});b+=g(c)+'\n    </div>\n  </div>\n  <div class="col-xs-12">\n    <div class="form-horizontal">\n      ';c={inputLabel:"Bill status: ",inputName:"invoiceStatusList",
labelCssClass:"col-xs-10",widgetCssClass:"col-xs-14","data-collection":"statuses","data-name-field":"name","data-value-field":"value"};c=(d=e.Select)?d.call(a,{hash:c}):f.call(a,"Select",{hash:c});b+=g(c)+'\n    </div>\n  </div>\n</div>\n\n<div class="row">\n  <div class="col-xs-12">\n    <div class="form-horizontal">\n      ';c={inputLabel:"Bill no. from: ",inputName:"orderNumberFrom","data-maxlength":"13",labelCssClass:"col-xs-10",widgetCssClass:"col-xs-14"};c=(d=e.TextInput)?d.call(a,{hash:c}):
f.call(a,"TextInput",{hash:c});b+=g(c)+'\n    </div>\n  </div>\n  <div class="col-xs-12">\n    <div class="form-horizontal">\n      ';c={inputLabel:"To: ",inputName:"orderNumberTo","data-maxlength":"13",labelCssClass:"col-xs-10",widgetCssClass:"col-xs-14"};c=(d=e.TextInput)?d.call(a,{hash:c}):f.call(a,"TextInput",{hash:c});b+=g(c)+'\n    </div>\n  </div>\n</div>\n\n<div class="row">\n  <div class="col-xs-12">\n    <div class="form-horizontal">\n      ';c={inputLabel:"Date issued: ",inputName:"from",
labelCssClass:"col-xs-10",widgetCssClass:"col-xs-10"};c=(d=e.DatePicker)?d.call(a,{hash:c}):f.call(a,"DatePicker",{hash:c});b+=g(c)+'\n    </div>\n  </div>\n  <div class="col-xs-12">\n    <div class="form-horizontal">\n      ';c={inputLabel:"To: ",inputName:"to",labelCssClass:"col-xs-10",widgetCssClass:"col-xs-10"};c=(d=e.DatePicker)?d.call(a,{hash:c}):f.call(a,"DatePicker",{hash:c});b+=g(c)+'\n    </div>\n  </div>\n</div>\n\n<div class="row">\n  <div class="col-xs-12">\n    <div class="form-horizontal">\n      ';
c={inputLabel:"Amount from:",inputName:"fromAmount","data-decimal-places":"2","data-valid-regex":"^[-\\+]?\\d{0,2},?\\d{0,3},?\\d{0,3}(\\.\\d{0,2})?$","data-invalid-regex":"[,\\.]{2}",labelCssClass:"col-xs-10",widgetCssClass:"col-xs-14"};c=(d=e.MoneyInput)?d.call(a,{hash:c}):f.call(a,"MoneyInput",{hash:c});b+=g(c)+'\n    </div>\n  </div>\n  <div class="col-xs-12">\n    <div class="form-horizontal">\n      ';c={inputLabel:"To:",inputName:"toAmount","data-decimal-places":"2","data-valid-regex":"^[-\\+]?\\d{0,2},?\\d{0,3},?\\d{0,3}(\\.\\d{0,2})?$",
"data-invalid-regex":"[,\\.]{2}",labelCssClass:"col-xs-10",widgetCssClass:"col-xs-14"};c=(d=e.MoneyInput)?d.call(a,{hash:c}):f.call(a,"MoneyInput",{hash:c});return b+=g(c)+'\n    </div>\n  </div>\n</div>\n\n<div class="row top-buffer">\n  <div class="col-xs-24 text-right">\n    <button class="btn btn-primary action" id="generateButton">Generate report</button>\n  </div>\n</div>\n'});return this.HandlebarsTemplates["reports/bill/bills_report"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["reports/bill/supplier_payments_report"]=Handlebars.template(function(b,a,e,c,d){e=e||b.helpers;b="";var f=e.helperMissing,g=this.escapeExpression;c={heading:"Pay bills report"};c=(d=e.includePartial)?d.call(a,"page_heading",{hash:c}):f.call(a,"includePartial","page_heading",{hash:c});b+=g(c)+'\n<p id="pageContentOverview" class="bottom-buffer">Displays a list of payments that were made for bills in a certain period.</p>\n\n<div class="row">\n  <div class="col-xs-24">\n    <div class="form-inline bottom-buffer">\n      ';
c={inputLabel:"Supplier: ",inputName:"cardId",labelCssClass:"",widgetCssClass:"input-width-xlarge","data-collection":"contacts","data-collection-filter":"suppliers","data-labels":"name,firstName,lastName","data-name-field":"name","data-value-field":"id","data-default-value":"","data-placeholder":"All"};c=(d=e.TypeaheadDropdown)?d.call(a,{hash:c}):f.call(a,"TypeaheadDropdown",{hash:c});b+=g(c)+"\n\n      ";c={inputLabel:"Payment date from: ",inputName:"from",labelCssClass:"",widgetCssClass:""};c=(d=
e.DatePicker)?d.call(a,{hash:c}):f.call(a,"DatePicker",{hash:c});b+=g(c)+"\n      ";c={inputLabel:"To: ",inputName:"to",labelCssClass:"",widgetCssClass:""};c=(d=e.DatePicker)?d.call(a,{hash:c}):f.call(a,"DatePicker",{hash:c});return b+=g(c)+'\n    </div>\n  </div>\n</div>\n\n<div class="row">\n  <div class="col-xs-24 text-right">\n    <button class="btn btn-primary action" id="generateButton">Generate report</button>\n  </div>\n</div>\n'});return this.HandlebarsTemplates["reports/bill/supplier_payments_report"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["reports/bill/unpaid_bills_report"]=Handlebars.template(function(b,a,e,c,d){e=e||b.helpers;b="";var f=e.helperMissing,g=this.escapeExpression;c={heading:"Unpaid bills report"};c=(d=e.includePartial)?d.call(a,"page_heading",{hash:c}):f.call(a,"includePartial","page_heading",{hash:c});b+=g(c)+'\n<p id="pageContentOverview" class="bottom-buffer">Displays the payments due to each supplier, within a range of dates by which they are overdue.</p>\n\n<div class="row">\n  <div class="col-xs-24">\n    <div class="form-inline bottom-buffer">\n      ';
c={inputLabel:"Supplier: ",inputName:"cardId",labelCssClass:"",widgetCssClass:"","data-css-class":"input-width-xlarge","data-collection":"contacts","data-collection-filter":"suppliers","data-name-field":"name","data-value-field":"id","data-default-name":"All","data-default-value":""};c=(d=e.Select)?d.call(a,{hash:c}):f.call(a,"Select",{hash:c});b+=g(c)+"\n\n      ";c={inputLabel:"As of date: ",inputName:"asOfDate",labelCssClass:"",widgetCssClass:""};c=(d=e.DatePicker)?d.call(a,{hash:c}):f.call(a,
"DatePicker",{hash:c});return b+=g(c)+'\n      <button class="btn btn-primary action" id="generateButton">Generate report</button>\n    </div>\n  </div>\n</div>\n'});return this.HandlebarsTemplates["reports/bill/unpaid_bills_report"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["reports/business/account_list_report"]=Handlebars.template(function(b,a,e,c,d){e=e||b.helpers;b="";var f;d=e.helperMissing;var g=this.escapeExpression;c={heading:"Account list report"};c=(f=e.includePartial)?f.call(a,"page_heading",{hash:c}):d.call(a,"includePartial","page_heading",{hash:c});b+=g(c)+'\n<p id="pageContentOverview" class="bottom-buffer">Lists all or selected MYOB Essentials accounts, along with their balances as at a specific date.</p>\n\n\n<div class="row">\n  <div class="col-xs-24">\n    <div class="form-inline bottom-buffer">\n      ';
c={inputLabel:"Balance as at: ",inputName:"asOfDate",labelCssClass:"",widgetCssClass:""};c=(f=e.DatePicker)?f.call(a,{hash:c}):d.call(a,"DatePicker",{hash:c});b+=g(c)+"\n      ";c={name:"isInactive",label:"Show inactive accounts"};f=a.isInactive;c.checked=f;c=(f=e.CheckboxOld)?f.call(a,{hash:c}):d.call(a,"CheckboxOld",{hash:c});b+=g(c)+"\n      ";c={name:"isZeroBalances",label:"Show $0.00 balances"};f=a.isZeroBalances;c.checked=f;c=(f=e.CheckboxOld)?f.call(a,{hash:c}):d.call(a,"CheckboxOld",{hash:c});
return b+=g(c)+'\n      <button class="btn btn-primary action" id="generateButton">Generate report</button>\n    </div>\n  </div>\n</div>\n'});return this.HandlebarsTemplates["reports/business/account_list_report"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["reports/business/balance_sheet"]=Handlebars.template(function(b,a,e,c,d){e=e||b.helpers;b="";var f=e.helperMissing,g=this.escapeExpression;c={heading:"Balance sheet"};c=(d=e.includePartial)?d.call(a,"page_heading",{hash:c}):f.call(a,"includePartial","page_heading",{hash:c});b+=g(c)+'\n\n<div class="reportContainer balanceSheetReport">\n\n  <div class="row">\n    <div id="reportPreferenceAnchor" class="col-xs-24"></div>\n  </div>\n\n  <div class="row">\n    <div id="dateFilter" class="col-xs-24">\n      <div class="form-inline bottom-buffer">\n        ';
c={inputLabel:"As at: ",inputName:"to",labelCssClass:"",widgetCssClass:"","data-date-enddate":"+0d"};c=(d=e.DatePicker)?d.call(a,{hash:c}):f.call(a,"DatePicker",{hash:c});return b+=g(c)+'\n        <button class="btn btn-primary action" id="updateButton">Refresh</button>\n      </div>\n    </div>\n  </div>\n\n  <div class="row">\n    <div class="col-xs-24">\n      <hr class="reportHr">\n    </div>\n  </div>\n\n  <div class="row bottom-buffer">\n    <div class="col-xs-24 text-right">\n      <button class="btn btn-default btn-xls">XLS</button>\n      <button class="btn btn-default btn-pdf">PDF</button>\n    </div>\n  </div>\n\n  <div class="row">\n    <div id="balanceSheetReportAnchor" class="col-xs-24"></div>\n  </div>\n\n</div>\n'});
return this.HandlebarsTemplates["reports/business/balance_sheet"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["reports/business/balance_sheet_data"]=Handlebars.template(function(b,a,e,c,d){e=e||b.helpers;var f,g,h=e.helperMissing,l=this.escapeExpression;b='<div class="loadingSpinner"></div>\n<table class="table drillableReport accounts">\n  <colgroup>\n  ';c=a.showAccountNumbers;if((c=e["if"].call(a,c,{hash:{},inverse:this.program(3,function(a,c){return'\n    <col style="width:300px;">\n  '},d),fn:this.program(1,
function(a,c){return'\n    <col style="width:100px;">\n    <col style="width:200px;">\n  '},d)}))||0===c)b+=c;b+='\n    <col style="width:100px;">\n    <col style="width:575px;">\n  </colgroup>\n\n\n  ';c={name:"Asset",totalName:"Total Assets"};f=a.assets;c.collection=f;f=a.totalAsset;c.total=f;f=a.precision;c.precision=f;f=a.showAccountNumbers;c.showAccountNumbers=f;c=(g=e.includePartial)?g.call(a,"_reports_partial_balance_sheet_classfication",{hash:c}):h.call(a,"includePartial","_reports_partial_balance_sheet_classfication",
{hash:c});b+=l(c)+"\n  ";c={name:"Liability",totalName:"Total Liabilities"};f=a.liabilities;c.collection=f;f=a.totalLiability;c.total=f;f=a.precision;c.precision=f;f=a.showAccountNumbers;c.showAccountNumbers=f;c=(g=e.includePartial)?g.call(a,"_reports_partial_balance_sheet_classfication",{hash:c}):h.call(a,"includePartial","_reports_partial_balance_sheet_classfication",{hash:c});b+=l(c)+'\n  <tr>\n    <td class="blank" colspan="4">&nbsp;</td>\n  </tr>\n  <tr class="netAssetRow classfication title">\n    <td ';
c=a.showAccountNumbers;if((c=e["if"].call(a,c,{hash:{},inverse:this.noop,fn:this.program(5,function(a,c){return'colspan="2"'},d)}))||0===c)b+=c;b+='>Net Assets</td>\n    <td class="text-right group-total2 amount">';c=a.precision;f=a.netAsset;c=(g=e.moneyValueFormatWithoutDollarSignShowZero)?g.call(a,f,c,{hash:{}}):h.call(a,"moneyValueFormatWithoutDollarSignShowZero",f,c,{hash:{}});b+=l(c)+'</td>\n  </tr>\n  <tr>\n    <td class="blank" colspan="4">&nbsp;</td>\n  </tr>\n  <tr class="classfication title"><td colspan="2">Equity</td></tr>\n    ';
c={};f=a.equityAccounts;c.accounts=f;f=a.precision;c.precision=f;f=a.showAccountNumbers;c.showAccountNumbers=f;c=(g=e.includePartial)?g.call(a,"_reports_partial_balance_sheet_accounts",{hash:c}):h.call(a,"includePartial","_reports_partial_balance_sheet_accounts",{hash:c});b+=l(c)+'\n  <tr>\n    <td class="blank" colspan="4">&nbsp;</td>\n  </tr>\n  <tr class="totalEquityRow classfication classificationTotal title">\n    <td ';c=a.showAccountNumbers;if((c=e["if"].call(a,c,{hash:{},inverse:this.noop,
fn:this.program(7,function(a,c){return'colspan="2"'},d)}))||0===c)b+=c;b+='>Total Equity</td>\n    <td class="text-right group-total2 amount">';c=a.precision;f=a.totalEquity;c=(g=e.moneyValueFormatWithoutDollarSignShowZero)?g.call(a,f,c,{hash:{}}):h.call(a,"moneyValueFormatWithoutDollarSignShowZero",f,c,{hash:{}});return b+=l(c)+"</td>\n  </tr>\n</table>\n"});return this.HandlebarsTemplates["reports/business/balance_sheet_data"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["reports/business/contact_report"]=Handlebars.template(function(b,a,e,c,d){e=e||b.helpers;b="";var f,g=e.helperMissing,h=this.escapeExpression;c={heading:"Contact list report"};c=(f=e.includePartial)?f.call(a,"page_heading",{hash:c}):g.call(a,"includePartial","page_heading",{hash:c});b+=h(c)+'\n<p id="pageContentOverview" class="bottom-buffer">Lists all or selected contacts, along with their phone and email details.</p>\n\n<div class="row">\n  <div class="col-xs-24">\n    <div class="form-inline">\n      <div class="form-group">\n        <label class="control-label" for="cardType">Contact type:</label>\n        <select id="cardType" name="cardType" class="form-control input-width-large">\n          ';
c=a.cardType;c=(f=e.option)?f.call(a,"All","-10",c,{hash:{}}):g.call(a,"option","All","-10",c,{hash:{}});b+=h(c)+"\n          ";c=a.cardType;c=(f=e.option)?f.call(a,"Customer","0",c,{hash:{}}):g.call(a,"option","Customer","0",c,{hash:{}});b+=h(c)+"\n          ";c=a.cardType;c=(f=e.option)?f.call(a,"Supplier","2",c,{hash:{}}):g.call(a,"option","Supplier","2",c,{hash:{}});b+=h(c)+"\n          ";c=a.cardType;c=(f=e.option)?f.call(a,"Customer & Supplier","-1",c,{hash:{}}):g.call(a,"option","Customer & Supplier",
"-1",c,{hash:{}});b+=h(c)+"\n          ";c=a.cardType;c=(f=e.option)?f.call(a,"Other","-2",c,{hash:{}}):g.call(a,"option","Other","-2",c,{hash:{}});b+=h(c)+"\n          ";c=a.cardType;c=(f=e.option)?f.call(a,"Owner","4",c,{hash:{}}):g.call(a,"option","Owner","4",c,{hash:{}});b+=h(c)+'\n        </select>\n      </div>\n\n      <div class="form-group checkbox">\n        <label for="isInactive">\n          <input type="checkbox" id="isInactive" name="isInactive" ';c=a.isInactive;if((c=e["if"].call(a,
c,{hash:{},inverse:this.noop,fn:this.program(1,function(a,c){return'checked="checked"'},d)}))||0===c)b+=c;return b+' />&nbsp;Show inactive contacts\n        </label>\n      </div>\n\n      <button class="btn btn-primary action" id="generateButton">Generate report</button>\n    </div>\n  </div>\n</div>\n'});return this.HandlebarsTemplates["reports/business/contact_report"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["reports/business/gst_lodgement"]=Handlebars.template(function(b,a,e,c,d){e=e||b.helpers;c=this.escapeExpression;b='<div id="sme-tax-dashboard-container" data-container-id="gst-lodgement" data-ledger-id="';(d=e.businessId)?d=d.call(a,{hash:{}}):(d=a.businessId,d="function"===typeof d?d():d);b+=c(d)+'"\n     data-ledger-type="essentials" data-ledger-region="nz" data-api-key="';(d=e.apiKey)?d=d.call(a,{hash:{}}):
(d=a.apiKey,d="function"===typeof d?d():d);b+=c(d)+'">\n</div>\n<script type="text/javascript" src="';(d=e.iframeUrl)?d=d.call(a,{hash:{}}):(d=a.iframeUrl,d="function"===typeof d?d():d);return b+=c(d)+'">\x3c/script>\n'});return this.HandlebarsTemplates["reports/business/gst_lodgement"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["reports/business/gst_report"]=Handlebars.template(function(b,a,e,c,d){function f(a,b){var d,f;d="\n  ";if((f=l.invokePartial(c._reports_business_partial_au_gst_report,"_reports_business_partial_au_gst_report",a,e,c))||0===f)d+=f;return d+"\n"}function g(a,b){var d,f;d="\n  ";if((f=l.invokePartial(c._reports_business_partial_nz_gst_report,"_reports_business_partial_nz_gst_report",a,e,c))||0===f)d+=f;return d+
"\n"}e=e||b.helpers;c=c||b.partials;b="";var h,l=this,k=e.blockHelperMissing;(h=e.ifAu)?h=h.call(a,{hash:{},inverse:l.noop,fn:l.program(1,f,d)}):(h=a.ifAu,h="function"===typeof h?h():h);e.ifAu||(h=k.call(a,h,{hash:{},inverse:l.noop,fn:l.program(1,f,d)}));if(h||0===h)b+=h;b+="\n\n";(h=e.ifNz)?h=h.call(a,{hash:{},inverse:l.noop,fn:l.program(3,g,d)}):(h=a.ifNz,h="function"===typeof h?h():h);e.ifNz||(h=k.call(a,h,{hash:{},inverse:l.noop,fn:l.program(3,g,d)}));if(h||0===h)b+=h;return b+"\n"});return this.HandlebarsTemplates["reports/business/gst_report"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["reports/business/journal_report"]=Handlebars.template(function(b,a,e,c,d){e=e||b.helpers;b="";var f=e.helperMissing,g=this.escapeExpression;c={heading:"Journal report"};c=(d=e.includePartial)?d.call(a,"page_heading",{hash:c}):f.call(a,"includePartial","page_heading",{hash:c});b+=g(c)+'\n<p id="pageContentOverview" class="bottom-buffer">Displays a list of all your transactions as journal entries.</p>\n\n<div class="row">\n  <div id="dateFilter" class="col-xs-24">\n    <div class="form-inline bottom-buffer">\n      ';
c={inputLabel:"Transaction date from: ",inputName:"from",labelCssClass:"",widgetCssClass:""};c=(d=e.DatePicker)?d.call(a,{hash:c}):f.call(a,"DatePicker",{hash:c});b+=g(c)+"\n      ";c={inputLabel:"To: ",inputName:"to",labelCssClass:"",widgetCssClass:""};c=(d=e.DatePicker)?d.call(a,{hash:c}):f.call(a,"DatePicker",{hash:c});return b+=g(c)+'\n      <button class="btn btn-primary action" id="generateButton">Generate report</button>\n    </div>\n  </div>\n</div>\n'});return this.HandlebarsTemplates["reports/business/journal_report"]}).call(this);
(function(){Handlebars.registerPartial("_reports_business_partial_au_gst_report",Handlebars.template(function(b,a,e,c,d){e=e||b.helpers;b="";var f,g=e.helperMissing,h=this.escapeExpression;c={headingSuffix:"GST Report for Activity Statement"};c=(f=e.includePartial)?f.call(a,"page_heading",{hash:c}):g.call(a,"includePartial","page_heading",{hash:c});b+=h(c)+'\n<p id="pageContentOverview" class="bottom-buffer">Displays GST Business Activity Statement information from the transactions you have created.</p>\n\n<div class="row">\n  <div class="col-xs-24">\n    <div class="form-inline">\n      ';
c={inputLabel:"Dated: ",inputName:"from",labelCssClass:"",widgetCssClass:""};c=(f=e.DatePicker)?f.call(a,{hash:c}):g.call(a,"DatePicker",{hash:c});b+=h(c)+"\n      ";c={inputLabel:"To: ",inputName:"to",labelCssClass:"",widgetCssClass:""};c=(f=e.DatePicker)?f.call(a,{hash:c}):g.call(a,"DatePicker",{hash:c});b+=h(c)+'\n      <div class="form-group checkbox">\n        <label for="gstBasis">\n          <input type="checkbox" id="gstBasis" name="gstBasis" ';c=a.gstBasis;if((c=e["if"].call(a,c,{hash:{},
inverse:this.noop,fn:this.program(1,function(a,c){return'checked="checked"'},d)}))||0===c)b+=c;return b+' />&nbsp;Cash basis\n        </label>\n      </div>\n      <button class="btn btn-primary action" id="generateButton">Generate report</button>\n    </div>\n  </div>\n</div>\n'}))}).call(this);
(function(){Handlebars.registerPartial("_reports_business_partial_nz_gst_report",Handlebars.template(function(b,a,e,c,d){function f(a,c){return'\n  <p id="pageContentOverview" class="bottom-buffer">Displays summary or detailed information that you can use to prepare your GST Return.</p>\n'}function g(a,c){return'\n  <p id="pageContentOverview" class="bottom-buffer">Generates GST summary reports and IRD return forms that you can use to prepare your GST return.</p>\n'}function h(a,c){var b,d,f;b="\n          ";
d=a.type;d=(f=e.option)?f.call(a,"GST Report (Detailed)","detailed",d,{hash:{}}):k.call(a,"option","GST Report (Detailed)","detailed",d,{hash:{}});return b+=m(d)+"\n        "}e=e||b.helpers;b="";var l,k=e.helperMissing,m=this.escapeExpression;c={headingSuffix:"GST report"};c=(l=e.includePartial)?l.call(a,"page_heading",{hash:c}):k.call(a,"includePartial","page_heading",{hash:c});b+=m(c)+"\n";if((c=(l=e.ifFeature)?l.call(a,"ENABLE_LEGACY_NZ_GST_DETAIL_REPORT",{hash:{},inverse:this.program(3,g,d),fn:this.program(1,
f,d)}):k.call(a,"ifFeature","ENABLE_LEGACY_NZ_GST_DETAIL_REPORT",{hash:{},inverse:this.program(3,g,d),fn:this.program(1,f,d)}))||0===c)b+=c;b+='\n\n<div class="row">\n  <div class="col-xs-24 form-inline bottom-buffer">\n    <div class="form-group">\n      <label class="control-label" for="type">Choose Report:</label>\n      <select id="type" name="type" class="form-control">\n        ';if((c=(l=e.ifFeature)?l.call(a,"ENABLE_LEGACY_NZ_GST_DETAIL_REPORT",{hash:{},inverse:this.noop,fn:this.program(5,
h,d)}):k.call(a,"ifFeature","ENABLE_LEGACY_NZ_GST_DETAIL_REPORT",{hash:{},inverse:this.noop,fn:this.program(5,h,d)}))||0===c)b+=c;b+="\n        ";c=a.type;c=(l=e.option)?l.call(a,"GST Report (Summary)","summary",c,{hash:{}}):k.call(a,"option","GST Report (Summary)","summary",c,{hash:{}});b+=m(c)+"\n        ";c=a.type;c=(l=e.option)?l.call(a,"GST Return (IRD Form)","form",c,{hash:{}}):k.call(a,"option","GST Return (IRD Form)","form",c,{hash:{}});b+=m(c)+'\n      </select>\n    </div>\n    <div class="form-group checkbox">\n      <label for="gstBasis">\n        <input type="checkbox" id="gstBasis" name="gstBasis" ';
c=a.gstBasis;if((c=e["if"].call(a,c,{hash:{},inverse:this.noop,fn:this.program(7,function(a,c){return'checked="checked"'},d)}))||0===c)b+=c;b+=' />&nbsp;Cash basis\n      </label>\n    </div>\n  </div>\n\n  <div class="col-xs-24">\n    <div id="date-picker-form-fields" class="form-inline bottom-buffer">\n      ';c={inputLabel:"Dated: ",inputName:"from",labelCssClass:"",widgetCssClass:""};c=(l=e.DatePicker)?l.call(a,{hash:c}):k.call(a,"DatePicker",{hash:c});b+=m(c)+"\n      ";c={inputLabel:"To: ",
inputName:"to",labelCssClass:"",widgetCssClass:""};c=(l=e.DatePicker)?l.call(a,{hash:c}):k.call(a,"DatePicker",{hash:c});b+=m(c)+'\n    </div>\n  </div>\n\n  <div class="col-xs-24">\n    <div id="ird-form-fields" class="form-inline bottom-buffer">\n      <div class="form-group">\n        <label class="control-label" for="period">Reporting Period:</label>\n        <select id="period" name="period" class="form-control">\n          ';c=a.period;c=(l=e.option)?l.call(a,"One month","1",c,{hash:{}}):k.call(a,
"option","One month","1",c,{hash:{}});b+=m(c)+"\n          ";c=a.period;c=(l=e.option)?l.call(a,"Two months","2",c,{hash:{}}):k.call(a,"option","Two months","2",c,{hash:{}});b+=m(c)+"\n          ";c=a.period;c=(l=e.option)?l.call(a,"Six months","6",c,{hash:{}}):k.call(a,"option","Six months","6",c,{hash:{}});b+=m(c)+'\n        </select>\n      </div>\n      <div class="form-group">\n        <label class="control-label" for="end">GST Report for the Month Ending:</label>\n        <select id="end" name="end" class="form-control"></select>\n      </div>\n      ';
c={inputName:"year",inputLabel:"Year:","data-valid-regex":"^\\d{0,4}$","data-css-class":"input-width-mini",labelCssClass:"",widgetCssClass:""};c=(l=e.RegexInput)?l.call(a,{hash:c}):k.call(a,"RegexInput",{hash:c});return b+=m(c)+'\n    </div>\n  </div>\n\n  <div class="col-xs-24 text-right">\n    <button class="btn btn-primary action" id="generateButton">Generate report</button>\n  </div>\n</div>\n'}))}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["reports/business/trial_balance"]=Handlebars.template(function(b,a,e,c,d){e=e||b.helpers;b="";var f=e.helperMissing,g=this.escapeExpression;c={heading:"Trial balance"};c=(d=e.includePartial)?d.call(a,"page_heading",{hash:c}):f.call(a,"includePartial","page_heading",{hash:c});b+=g(c)+'\n<p id="pageContentOverview" class="bottom-buffer">Displays the activity of each account in the form of debits and credits for a specified month of a financial year, and also for the period from the beginning of the financial year up to that month.</p>\n\n<div class="row">\n  <div class="col-xs-24">\n    <div class="form-inline">\n\n      <div class="form-group">\n        <label class="control-label" for="month">Trial Balance for:</label>\n          <select id="month" name="month" class="form-control">\n            ';
c=a.month;c=(d=e.option)?d.call(a,"January","1",c,{hash:{}}):f.call(a,"option","January","1",c,{hash:{}});b+=g(c)+"\n            ";c=a.month;c=(d=e.option)?d.call(a,"February","2",c,{hash:{}}):f.call(a,"option","February","2",c,{hash:{}});b+=g(c)+"\n            ";c=a.month;c=(d=e.option)?d.call(a,"March","3",c,{hash:{}}):f.call(a,"option","March","3",c,{hash:{}});b+=g(c)+"\n            ";c=a.month;c=(d=e.option)?d.call(a,"April","4",c,{hash:{}}):f.call(a,"option","April","4",c,{hash:{}});b+=g(c)+
"\n            ";c=a.month;c=(d=e.option)?d.call(a,"May","5",c,{hash:{}}):f.call(a,"option","May","5",c,{hash:{}});b+=g(c)+"\n            ";c=a.month;c=(d=e.option)?d.call(a,"June","6",c,{hash:{}}):f.call(a,"option","June","6",c,{hash:{}});b+=g(c)+"\n            ";c=a.month;c=(d=e.option)?d.call(a,"July","7",c,{hash:{}}):f.call(a,"option","July","7",c,{hash:{}});b+=g(c)+"\n            ";c=a.month;c=(d=e.option)?d.call(a,"August","8",c,{hash:{}}):f.call(a,"option","August","8",c,{hash:{}});b+=g(c)+
"\n            ";c=a.month;c=(d=e.option)?d.call(a,"September","9",c,{hash:{}}):f.call(a,"option","September","9",c,{hash:{}});b+=g(c)+"\n            ";c=a.month;c=(d=e.option)?d.call(a,"October","10",c,{hash:{}}):f.call(a,"option","October","10",c,{hash:{}});b+=g(c)+"\n            ";c=a.month;c=(d=e.option)?d.call(a,"November","11",c,{hash:{}}):f.call(a,"option","November","11",c,{hash:{}});b+=g(c)+"\n            ";c=a.month;c=(d=e.option)?d.call(a,"December","12",c,{hash:{}}):f.call(a,"option",
"December","12",c,{hash:{}});b+=g(c)+"\n          </select>\n      </div>\n\n      ";c={inputName:"yearIndex",inputLabel:"Financial Year Ending:","data-valid-regex":"^\\d{0,4}$","data-css-class":"input-width-mini",labelCssClass:"",widgetCssClass:""};c=(d=e.RegexInput)?d.call(a,{hash:c}):f.call(a,"RegexInput",{hash:c});b+=g(c)+"\n      ";c={name:"isRounding",label:"Show whole dollars"};c.checked=a.isRounding;c=(d=e.CheckboxOld)?d.call(a,{hash:c}):f.call(a,"CheckboxOld",{hash:c});return b+=g(c)+'\n      <button class="btn btn-primary action" id="generateButton">Generate report</button>\n\n    </div>\n  </div>\n</div>\n'});
return this.HandlebarsTemplates["reports/business/trial_balance"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["reports/date_filter"]=Handlebars.template(function(b,a,e,c,d){e=e||b.helpers;var f,g=e.helperMissing,h=this.escapeExpression;b='<div class="form-inline">\n  ';c={inputLabel:"From: ",inputName:"from",labelCssClass:"",widgetCssClass:""};c=(f=e.DatePicker)?f.call(a,{hash:c}):g.call(a,"DatePicker",{hash:c});b+=h(c)+"\n  ";c={inputLabel:"To: ",inputName:"to",labelCssClass:"",widgetCssClass:""};c=(f=e.DatePicker)?
f.call(a,{hash:c}):g.call(a,"DatePicker",{hash:c});b+=h(c)+'\n  <button class="btn btn-primary action" id="datePickerUpdateButton">';c=a.showDisplayPeriods;if((c=e["if"].call(a,c,{hash:{},inverse:this.program(3,function(a,c){return"Update"},d),fn:this.program(1,function(a,c){return"Refresh"},d)}))||0===c)b+=c;return b+"</button>\n</div>\n"});return this.HandlebarsTemplates["reports/date_filter"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["reports/general_ledger_report"]=Handlebars.template(function(b,a,e,c,d){e=e||b.helpers;b="";d=e.helperMissing;var f=this.escapeExpression;c={heading:"General ledger details report"};c=(e=e.includePartial)?e.call(a,"page_heading",{hash:c}):d.call(a,"includePartial","page_heading",{hash:c});return b+=f(c)+'\n\n<div class="reportContainer">\n\n  <div class="row">\n    <div id="reportPreferenceAnchor" class="col-xs-24"></div>\n  </div>\n\n  <div class="row">\n    <div id="dateFilter" class="col-xs-16"></div>\n    <div class="col-xs-8">\n      <div class="pull-right">\n        <ul class="nav nav-pills pull-right">\n          <li class="dropdown">\n            <a class="dropdown-toggle btn-dropdown" id="selectAccounts" data-loading-text="Saving..." >\n              <i class="fa fa-caret-right"></i>\n              <span>\n                <span class="closed-label">Select</span><span class="open-label">Hide</span> accounts\n              </span>\n            </a>\n            <div class="dropdown-account dropdown-menu" role="menu" aria-labelledby="drop4"></div>\n          </li>\n        </ul>\n      </div>\n    </div>\n  </div>\n\n  <div class="row bottom-buffer">\n    <div class="col-xs-24">\n      <div class="text-right">\n        <button class="btn btn-default btn-xls">XLS</button>\n        <button class="btn btn-default btn-pdf">PDF</button>\n      </div>\n      <div class="loadingSpinner"></div>\n    </div>\n  </div>\n\n  <div class="row">\n    <div id="generalLedgerReportAnchor"></div>\n  </div>\n\n</div>\n'});
return this.HandlebarsTemplates["reports/general_ledger_report"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["reports/gst_detailed_report"]=Handlebars.template(function(b,a,e,c,d){e=e||b.helpers;b="";d=e.helperMissing;var f=this.escapeExpression;c={headingSuffix:"GST detailed report"};c=(e=e.includePartial)?e.call(a,"page_heading",{hash:c}):d.call(a,"includePartial","page_heading",{hash:c});return b+=f(c)+'\n\n<div class="reportContainer">\n\n  <div class="row">\n    <div id="reportPreferenceAnchor" class="col-xs-24"></div>\n  </div>\n\n  <div class="row">\n    <div id="dateFilter" class="col-xs-24"></div>\n  </div>\n\n  <div class="row bottom-buffer">\n    <div class="col-xs-24">\n      <div class="text-right">\n        <button class="btn btn-default btn-xls">XLS</button>\n        <button class="btn btn-default btn-pdf">PDF</button>\n      </div>\n      <div class="loadingSpinner"></div>\n    </div>\n  </div>\n\n  <div class="row">\n    <div id="gstDetailedReportAnchor"></div>\n  </div>\n\n</div>\n'});return this.HandlebarsTemplates["reports/gst_detailed_report"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["reports/gst_report_journal_entries"]=Handlebars.template(function(b,a,e,c,d){e=e||b.helpers;b="";var f=this.escapeExpression,g=e.helperMissing;c=a.entries;if((c=e.each.call(a,c,{hash:{},inverse:this.noop,fn:this.program(1,function(a,c){var b,d,n,q,p,t;b='\n  <tr class="detailRow">\n    <td class="ta_left">';(t=e.dateForFrontend)?d=t.call(a,{hash:{}}):(d=a.dateForFrontend,d="function"===typeof d?d():d);b+=
f(d)+'</td>\n    <td class="ta_left">';d=a.dateForFrontend;n=a.refNo;q=a.id;p=a.transactionTypeShortName;d=(t=e.linkToTransaction)?t.call(a,p,q,n,0,d,{hash:{}}):g.call(a,"linkToTransaction",p,q,n,0,d,{hash:{}});b+=f(d)+'</td>\n    <td class="ta_left">';(t=e.transactionTypeShortName)?d=t.call(a,{hash:{}}):(d=a.transactionTypeShortName,d="function"===typeof d?d():d);b+=f(d)+'</td>\n    <td class="ta_left">';(t=e.accountName)?d=t.call(a,{hash:{}}):(d=a.accountName,d="function"===typeof d?d():d);b+=f(d)+
'</td>\n    <td class="ta_left">';(t=e.description)?d=t.call(a,{hash:{}}):(d=a.description,d="function"===typeof d?d():d);b+=f(d)+'</td>\n    <td class="text-right">';(t=e.amountForView)?d=t.call(a,{hash:{}}):(d=a.amountForView,d="function"===typeof d?d():d);b+=f(d)+'</td>\n    <td class="text-right">';(t=e.gstForView)?d=t.call(a,{hash:{}}):(d=a.gstForView,d="function"===typeof d?d():d);b+=f(d)+'</td>\n    <td class="ta_left last">';(t=e.gstTypeName)?d=t.call(a,{hash:{}}):(d=a.gstTypeName,d="function"===
typeof d?d():d);return b+=f(d)+"</td>\n  </tr>\n"},d)}))||0===c)b+=c;return b+"\n"});return this.HandlebarsTemplates["reports/gst_report_journal_entries"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["reports/gst_type_tables"]=Handlebars.template(function(b,a,e,c,d){function f(a,b,c){var d;b='\n    <thead>\n      <th class="ta_left">Date</th>\n      <th class="ta_left">Reference</th>\n      <th class="ta_left">Transaction</th>\n      <th class="ta_left">Account</th>\n      <th class="ta_left">Description</th>\n      <th class="text-right">Amount</th>\n      <th class="text-right">';d=c.taxHeading;d="function"===
typeof d?d():d;b+=g(d)+'</th>\n      <th class="ta_left">Tax code</th>\n    </thead>\n    <thead>\n      <th colspan="8" class="subheading">';d=c.name;d="function"===typeof d?d():d;b+=g(d)+": ";(d=e.taxTypeDescription)?d=d.call(a,{hash:{}}):(d=a.taxTypeDescription,d="function"===typeof d?d():d);b+=g(d)+'</th>\n    </thead>\n    <tr class="tableTotal" id="';d=c.sectionId;d="function"===typeof d?d():d;b+=g(d)+"-";(d=e.taxType)?d=d.call(a,{hash:{}}):(d=a.taxType,d="function"===typeof d?d():d);b+=g(d)+
'" data-start-index="0">\n      <td>Totals</td>\n      <td></td>\n      <td></td>\n      <td></td>\n      <td></td>\n      <td class="text-right">';(d=e.totalAmountForView)?d=d.call(a,{hash:{}}):(d=a.totalAmountForView,d="function"===typeof d?d():d);b+=g(d)+'</td>\n      <td class="text-right">';(d=e.totalGstForView)?d=d.call(a,{hash:{}}):(d=a.totalGstForView,d="function"===typeof d?d():d);return b+=g(d)+'</td>\n      <td></td>\n    </tr>\n    <tr>\n      <td colspan="8" class="blankRow"></td>\n    </tr>\n  '}
e=e||b.helpers;var g=this.escapeExpression,h=this;b='<colgroup>\n  <col class="text-center" style="width:80px;">\n  <col class="text-center" style="width:85px;">\n  <col class="text-center" style="width:90px;">\n  <col class="text-center" style="width:120px;">\n  <col class="text-center" style="min-width:100px;">\n  <col style="min-width:60px;">\n  <col style="min-width:60px;">\n  <col style="min-width:60px;">\n</colgroup>\n';c=a.majorheadings;if((c=e.each.call(a,c,{hash:{},inverse:h.noop,fn:h.program(1,
function(a,b){var c,d;c='\n  <thead class="section-';(d=e.sectionId)?d=d.call(a,{hash:{}}):(d=a.sectionId,d="function"===typeof d?d():d);c+=g(d)+'">\n    <th colspan="8"class="accountName">';(d=e.name)?d=d.call(a,{hash:{}}):(d=a.name,d="function"===typeof d?d():d);c+=g(d)+"</th>\n  </thead>\n  ";d=a.taxCodeSections;if((d=e.each.call(a,d,{hash:{},inverse:h.noop,fn:h.programWithDepth(f,b,a)}))||0===d)c+=d;return c+'\n  <tr>\n    <td colspan="8" class="blankRow"></td>\n  </tr>\n'},d)}))||0===c)b+=c;
return b+"\n"});return this.HandlebarsTemplates["reports/gst_type_tables"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["reports/journal_entries"]=Handlebars.template(function(b,a,e,c,d){function f(a,b){var c,d;c='\n        <div class="note">';(d=e.note)?d=d.call(a,{hash:{}}):(d=a.note,d="function"===typeof d?d():d);return c+=g(d)+"</div>\n      "}e=e||b.helpers;b="";var g=this.escapeExpression,h=e.helperMissing,l=this;c=a.entries;if((c=e.each.call(a,c,{hash:{},inverse:l.noop,fn:l.programWithDepth(function(a,b,c){var d,p,t,
r,u,v;d='\n  <tr class="detailRow">\n    <td class="ta_left">';(v=e.dateForFrontend)?p=v.call(a,{hash:{}}):(p=a.dateForFrontend,p="function"===typeof p?p():p);d+=g(p)+'</td>\n    <td class="ta_left">';p=a.dateForFrontend;c=c.accountId;t=a.refNo;r=a.journalOrBankTransId;u=a.transactionTypeShortName;p=(v=e.linkToTransaction)?v.call(a,u,r,t,c,p,{hash:{}}):h.call(a,"linkToTransaction",u,r,t,c,p,{hash:{}});d+=g(p)+'</td>\n    <td class="ta_left">';(v=e.transactionTypeShortName)?p=v.call(a,{hash:{}}):(p=
a.transactionTypeShortName,p="function"===typeof p?p():p);d+=g(p)+'</td>\n    <td class="ta_left">';(v=e.description)?p=v.call(a,{hash:{}}):(p=a.description,p="function"===typeof p?p():p);d+=g(p)+"\n      ";p=a.note;if((p=e["if"].call(a,p,{hash:{},inverse:l.noop,fn:l.program(2,f,b)}))||0===p)d+=p;d+='\n    </td>\n    <td class="text-right">';(v=e.debitForView)?p=v.call(a,{hash:{}}):(p=a.debitForView,p="function"===typeof p?p():p);d+=g(p)+'</td>\n    <td class="text-right">';(v=e.creditForView)?p=
v.call(a,{hash:{}}):(p=a.creditForView,p="function"===typeof p?p():p);d+=g(p)+'</td>\n    <td class="text-right">';(v=e.runningBalanceForView)?p=v.call(a,{hash:{}}):(p=a.runningBalanceForView,p="function"===typeof p?p():p);d+=g(p)+'</td>\n    <td class="text-right last">';(v=e.gstForView)?p=v.call(a,{hash:{}}):(p=a.gstForView,p="function"===typeof p?p():p);return d+=g(p)+"</td>\n  </tr>\n"},d,a)}))||0===c)b+=c;return b+"\n"});return this.HandlebarsTemplates["reports/journal_entries"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["reports/journal_tables"]=Handlebars.template(function(b,a,e,c,d){function f(a,b){var c,d;c='\n    <thead>\n    <th class="accountName" colspan="8">';d=a.number;d="function"===typeof d?d():d;c+=h(d)+" ";d=a.name;d="function"===typeof d?d():d;return c+=h(d)+"</th>\n    </thead>\n  "}function g(a,c){return'\n    <tr>\n      <td colspan="8" class="blankRow"></td>\n    </tr>\n  '}e=e||b.helpers;var h=this.escapeExpression,
l=this;b='<colgroup>\n  <col class="text-center" style="width:80px;">\n  <col class="text-center" style="width:85px;">\n  <col class="text-center" style="width:70px;">\n  <col class="text-center" style="min-width:120px;">\n  <col style="min-width:60px;">\n  <col style="min-width:60px;">\n  <col style="min-width:60px;">\n  <col style="min-width:60px;">\n</colgroup>\n';c=a.accounts;if((c=e.each.call(a,c,{hash:{},inverse:l.noop,fn:l.programWithDepth(function(a,c,b){var d,p;d="\n  ";p=b.hideAccountHeader;
if((p=e.unless.call(a,p,{hash:{},inverse:l.noop,fn:l.program(2,f,c)}))||0===p)d+=p;d+='\n  <thead>\n  <th class="ta_left">Date</th>\n  <th class="ta_left">Ref No</th>\n  <th class="ta_left">Type</th>\n  <th class="ta_left">Description</th>\n  <th class="text-right">Debit</th>\n  <th class="text-right">Credit</th>\n  <th class="text-right">Balance</th>\n  <th class="text-right">GST Amt</th>\n  </thead>\n  <tbody class="account';p=a.id;p="function"===typeof p?p():p;d+=h(p)+'">\n    <tr class="tableTotal" id="';
p=a.id;p="function"===typeof p?p():p;d+=h(p)+'" data-start-index="0">\n      <td>Totals</td>\n      <td></td>\n      <td></td>\n      <td></td>\n      <td class="text-right">';p=a.totalDebitsForView;p="function"===typeof p?p():p;d+=h(p)+'</td>\n      <td class="text-right">';p=a.totalCreditsForView;p="function"===typeof p?p():p;d+=h(p)+'</td>\n      <td class="text-right">';p=a.finalRunningBalanceForView;p="function"===typeof p?p():p;d+=h(p)+'</td>\n      <td class="text-right">';p=a.totalGstForView;
p="function"===typeof p?p():p;d+=h(p)+"</td>\n    </tr>\n  </tbody>\n  ";p=b.hideBlank;if((p=e.unless.call(a,p,{hash:{},inverse:l.noop,fn:l.program(4,g,c)}))||0===p)d+=p;return d+"\n"},d,a)}))||0===c)b+=c;return b+"\n"});return this.HandlebarsTemplates["reports/journal_tables"]}).call(this);
(function(){Handlebars.registerPartial("_reports_partial_balance_sheet_accounts",Handlebars.template(function(b,a,e,c,d){function f(a,c){var b,d;b="\n    <td>";(d=e.accountNumber)?d=d.call(a,{hash:{}}):(d=a.accountNumber,d="function"===typeof d?d():d);return b+=k(d)+"</td>\n    "}function g(a,b,c){var d,f;b='\n          <a data-accountId="';(f=e.id)?d=f.call(a,{hash:{}}):(d=a.id,d="function"===typeof d?d():d);b+=k(d)+'" class="drillableAccount" id="';(f=e.id)?d=f.call(a,{hash:{}}):(d=a.id,d="function"===
typeof d?d():d);b+=k(d)+'">\n            ';d=c.precision;c=a.amount;d=(f=e.moneyValueFormatWithoutDollarSignShowZero)?f.call(a,c,d,{hash:{}}):m.call(a,"moneyValueFormatWithoutDollarSignShowZero",c,d,{hash:{}});return b+=k(d)+"\n          </a>\n      "}function h(a,b,c){var d,f;b="\n        ";c=c.precision;d=a.amount;c=(f=e.moneyValueFormatWithoutDollarSignShowZero)?f.call(a,d,c,{hash:{}}):m.call(a,"moneyValueFormatWithoutDollarSignShowZero",d,c,{hash:{}});return b+=k(c)+"\n      "}e=e||b.helpers;
c=c||b.partials;b="";var l,k=this.escapeExpression,m=e.helperMissing,n=this;l=a.accounts;if((l=e.each.call(a,l,{hash:{},inverse:n.noop,fn:n.programWithDepth(function(a,b,d){var l,u,v;l='\n  <tr id="account';(v=e.id)?u=v.call(a,{hash:{}}):(u=a.id,u="function"===typeof u?u():u);l+=k(u)+'">\n    ';u=d.showAccountNumbers;if((u=e["if"].call(a,u,{hash:{},inverse:n.noop,fn:n.program(2,f,b)}))||0===u)l+=u;l+="\n    <td>";(v=e.name)?u=v.call(a,{hash:{}}):(u=a.name,u="function"===typeof u?u():u);l+=k(u)+'</td>\n    <td class="text-right">\n      ';
u=a.subClassificationId;if((u=(v=e.ifDrillableSubClassification)?v.call(a,u,{hash:{},inverse:n.programWithDepth(h,b,d),fn:n.programWithDepth(g,b,d)}):m.call(a,"ifDrillableSubClassification",u,{hash:{},inverse:n.programWithDepth(h,b,d),fn:n.programWithDepth(g,b,d)}))||0===u)l+=u;l+='\n    </td>\n    <td class="blank">&nbsp;</td>\n  </tr>\n  <tr>\n    <td class="blank" colspan="4">\n      ';u=a.id;if((u=n.invokePartial(c._reports_partial_drilldown_journal_entries_container,"_reports_partial_drilldown_journal_entries_container",
u,e,c))||0===u)l+=u;return l+"\n    </td>\n  </tr>\n"},d,a)}))||0===l)b+=l;return b+"\n"}))}).call(this);
(function(){Handlebars.registerPartial("_reports_partial_balance_sheet_classfication",Handlebars.template(function(b,a,e,c,d){e=e||b.helpers;var f,g,h=this.escapeExpression,l=e.helperMissing;b='<tr class="classfication title"><td ';c=a.showAccountNumbers;if((c=e["if"].call(a,c,{hash:{},inverse:this.noop,fn:this.program(1,function(a,b){return'colspan="2"'},d)}))||0===c)b+=c;b+=">";(g=e.name)?c=g.call(a,{hash:{}}):(c=a.name,c="function"===typeof c?c():c);b+=h(c)+"</td><td>&nbsp;</td><td>&nbsp;</td></tr>\n";
c={};f=a.collection;c.collection=f;f=a.precision;c.precision=f;f=a.showAccountNumbers;c.showAccountNumbers=f;c=(g=e.includePartial)?g.call(a,"_reports_partial_balance_sheet_section",{hash:c}):l.call(a,"includePartial","_reports_partial_balance_sheet_section",{hash:c});b+=h(c)+'\n<tr>\n  <td class="blank" colspan="4">&nbsp;</td>\n</tr>\n<tr class="total';(g=e.name)?c=g.call(a,{hash:{}}):(c=a.name,c="function"===typeof c?c():c);b+=h(c)+'Row classfication classificationTotal">\n  <td colspan="';c=a.showAccountNumbers;
if((c=e["if"].call(a,c,{hash:{},inverse:this.noop,fn:this.program(3,function(a,b){return"2"},d)}))||0===c)b+=c;b+='">';(g=e.totalName)?c=g.call(a,{hash:{}}):(c=a.totalName,c="function"===typeof c?c():c);b+=h(c)+'</td>\n  <td class="text-right group-total amount">';c=a.precision;f=a.total;c=(g=e.moneyValueFormatWithoutDollarSignShowZero)?g.call(a,f,c,{hash:{}}):l.call(a,"moneyValueFormatWithoutDollarSignShowZero",f,c,{hash:{}});return b+=h(c)+'</td>\n</tr>\n<tr>\n  <td class="blank" colspan="4">&nbsp;</td>\n</tr>\n'}))}).call(this);
(function(){Handlebars.registerPartial("_reports_partial_balance_sheet_section",Handlebars.template(function(b,a,e,c,d){function f(a,b){return'colspan="2"'}e=e||b.helpers;var g=this.escapeExpression,h=e.helperMissing,l=this;b="\x3c!-- type, transactionId, referenceNumber, accountId, date --\x3e\n";c=a.collection;if((c=e.each.call(a,c,{hash:{},inverse:l.noop,fn:l.programWithDepth(function(a,b,c){var d,p,t,r;d='\n  <tr class="subclassfication"><td colspan="2">';(r=e.name)?p=r.call(a,{hash:{}}):(p=a.name,
p="function"===typeof p?p():p);d+=g(p)+"</td></tr>\n  ";p={};t=a.accounts;p.accounts=t;t=c.precision;p.precision=t;t=c.showAccountNumbers;p.showAccountNumbers=t;p=(r=e.includePartial)?r.call(a,"_reports_partial_balance_sheet_accounts",{hash:p}):h.call(a,"includePartial","_reports_partial_balance_sheet_accounts",{hash:p});d+=g(p)+'\n  <tr>\n    <td title="Total ';(r=e.name)?p=r.call(a,{hash:{}}):(p=a.name,p="function"===typeof p?p():p);d+=g(p)+'" ';p=c.showAccountNumbers;if((p=e["if"].call(a,p,{hash:{},
inverse:l.noop,fn:l.program(2,f,b)}))||0===p)d+=p;d+='>&nbsp;</td>\n    <td class="text-right group-total amount">';p=c.precision;t=a.amount;p=(r=e.moneyValueFormatWithoutDollarSignShowZero)?r.call(a,t,p,{hash:{}}):h.call(a,"moneyValueFormatWithoutDollarSignShowZero",t,p,{hash:{}});return d+=g(p)+'</td>\n    <td class="blank">&nbsp;</td>\n  </tr>\n'},d,a)}))||0===c)b+=c;return b+"\n"}))}).call(this);
(function(){Handlebars.registerPartial("_reports_partial_drilldown_journal_entries_container",Handlebars.template(function(b,a,e,c,d){e=this.escapeExpression;b='<div id="blankTopRow';a="function"===typeof a?a():a;b+=e(a)+'" class=\'topBorder\'></div>\n<div class="journalEntriesContainer" id="journalEntriesContainer';a="function"===typeof a?a():a;b+=e(a)+'" style="display:none;">\n  <div class="journalEntries" id="journalEntries';a="function"===typeof a?a():a;b+=e(a)+'" data-accountid="';a="function"===
typeof a?a():a;b+=e(a)+'"><div class="smallLoadingSpinner"></div></div>\n  <div><button class="closeAccountTransactions closeButton fa fa-times-circle" data-accountid="';a="function"===typeof a?a():a;b+=e(a)+'"></button></div>\n</div>\n<div id="blankRow';a="function"===typeof a?a():a;return b+=e(a)+"\" class='bottomBorder'></div>\n"}))}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["reports/payroll/payroll_report"]=Handlebars.template(function(b,a,e,c,d){function f(a,b){return"checked"}e=e||b.helpers;b="";var g,h=e.helperMissing,l=this.escapeExpression;c={heading:"Payroll reports"};c=(g=e.includePartial)?g.call(a,"page_heading",{hash:c}):h.call(a,"includePartial","page_heading",{hash:c});b+=l(c)+'\n\n<p id="pageContentOverview" class="bottom-buffer">Payroll summary & detailed reports for YTD or a specified period.</p>\n\n<div class="row">\n  <div class="col-xs-24">\n    <hr class="reportHr">\n  </div>\n</div>\n\n<div class="row bottom-buffer">\n  <div class="form-horizontal">\n    <label class="col-xs-2 control-label">Period: </label>\n    <div class="col-xs-22">\n      ';
c=a.periodSelection;c=(g=e.radio)?g.call(a,"ytd","Year to date","periodSelection","YTD",c,!0,{hash:{}}):h.call(a,"radio","ytd","Year to date","periodSelection","YTD",c,!0,{hash:{}});b+=l(c)+'\n    </div>\n  </div>\n</div>\n\n<div class="row bottom-buffer">\n  <div class="col-xs-22 col-xs-offset-2 form-inline">\n    <div class="radio">\n      <label for="daterange">\n        <input type="radio" name="periodSelection" value="DATERANGE" id="daterange" ';c=a.periodSelection;if((c=(g=e.ifEqual)?g.call(a,
c,"DATERANGE",{hash:{},inverse:this.noop,fn:this.program(1,f,d)}):h.call(a,"ifEqual",c,"DATERANGE",{hash:{},inverse:this.noop,fn:this.program(1,f,d)}))||0===c)b+=c;b+=">&nbsp;\n      </label>\n    </div>\n    ";c={inputLabel:"From: ",inputName:"from",labelCssClass:"",widgetCssClass:""};c=(g=e.DatePicker)?g.call(a,{hash:c}):h.call(a,"DatePicker",{hash:c});b+=l(c)+"\n    ";c={inputLabel:"To: ",inputName:"to",labelCssClass:"",widgetCssClass:""};c=(g=e.DatePicker)?g.call(a,{hash:c}):h.call(a,"DatePicker",
{hash:c});return b+=l(c)+'\n  </div>\n</div>\n\n<div class="row">\n  <div class="col-xs-24 text-right">\n    <button class="btn btn-default action" id="generateSummaryButton">Summary report</button>\n    <button class="btn btn-default action" id="generateDetailedButton">Detailed report</button>\n  </div>\n</div>\n'});return this.HandlebarsTemplates["reports/payroll/payroll_report"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["reports/pl_report_date_filter"]=Handlebars.template(function(b,a,e,c,d){function f(a,b){return" selected "}function g(a,b){return" selected "}function h(a,b){return" selected "}e=e||b.helpers;var l,k=this,m=e.helperMissing,n=this.escapeExpression;b='<div class="form-inline">\n  ';c={inputLabel:"From: ",inputName:"from",labelCssClass:"",widgetCssClass:""};c=(l=e.DatePicker)?l.call(a,{hash:c}):m.call(a,"DatePicker",
{hash:c});b+=n(c)+"\n  ";c={inputLabel:"To: ",inputName:"to",labelCssClass:"",widgetCssClass:""};c=(l=e.DatePicker)?l.call(a,{hash:c}):m.call(a,"DatePicker",{hash:c});b+=n(c)+"\n  ";c=a.showDisplayPeriods;if((c=e["if"].call(a,c,{hash:{},inverse:k.noop,fn:k.program(1,function(a,b){var c,d,l;c='\n    <div class="form-group">\n      <label class="control-label">Breakdown:</label>\n      <select id="dateRangeBreakdown" name="breakdown" class="form-control">\n        <option value="YEAR" ';d=a.breakdown;
if((d=(l=e.ifEqual)?l.call(a,d,"YEAR",{hash:{},inverse:k.noop,fn:k.program(2,f,b)}):m.call(a,"ifEqual",d,"YEAR",{hash:{},inverse:k.noop,fn:k.program(2,f,b)}))||0===d)c+=d;c+='>Total</option>\n        <option value="QUARTER" ';d=a.breakdown;if((d=(l=e.ifEqual)?l.call(a,d,"QUARTER",{hash:{},inverse:k.noop,fn:k.program(4,g,b)}):m.call(a,"ifEqual",d,"QUARTER",{hash:{},inverse:k.noop,fn:k.program(4,g,b)}))||0===d)c+=d;c+='>Quarterly</option>\n        <option value="MONTH" ';d=a.breakdown;if((d=(l=e.ifEqual)?
l.call(a,d,"MONTH",{hash:{},inverse:k.noop,fn:k.program(6,h,b)}):m.call(a,"ifEqual",d,"MONTH",{hash:{},inverse:k.noop,fn:k.program(6,h,b)}))||0===d)c+=d;return c+">Monthly</option>\n      </select>\n    </div>\n  "},d)}))||0===c)b+=c;b+='\n  <button class="btn btn-primary action" id="datePickerUpdateButton">';c=a.showDisplayPeriods;if((c=e["if"].call(a,c,{hash:{},inverse:k.program(10,function(a,b){return"Update"},d),fn:k.program(8,function(a,b){return"Refresh"},d)}))||0===c)b+=c;return b+"</button>\n</div>\n"});
return this.HandlebarsTemplates["reports/pl_report_date_filter"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["reports/profit_loss_quick_links"]=Handlebars.template(function(b,a,e,c,d){function f(a,b){return" selected "}function g(a,b){return" selected "}function h(a,b){return" selected "}function l(a,b){return" selected "}e=e||b.helpers;var k,m=e.helperMissing;b='<div class="form-group">\n  <label for="quickLinks" class="control-label">Commonly used reports:</label>\n  <select id="quickLinks" class="form-control input-width-xlarge">\n    <option value="NONE" ';c=
a.breakdown;if((c=(k=e.ifEqual)?k.call(a,c,"NONE",{hash:{},inverse:this.noop,fn:this.program(1,f,d)}):m.call(a,"ifEqual",c,"NONE",{hash:{},inverse:this.noop,fn:this.program(1,f,d)}))||0===c)b+=c;b+='>----------------------------------</option>\n    <option value="YEAR" ';c=a.breakdown;if((c=(k=e.ifEqual)?k.call(a,c,"YEAR",{hash:{},inverse:this.noop,fn:this.program(3,g,d)}):m.call(a,"ifEqual",c,"YEAR",{hash:{},inverse:this.noop,fn:this.program(3,g,d)}))||0===c)b+=c;b+='>Total - year to date</option>\n    <option value="QUARTER" ';
c=a.breakdown;if((c=(k=e.ifEqual)?k.call(a,c,"QUARTER",{hash:{},inverse:this.noop,fn:this.program(5,h,d)}):m.call(a,"ifEqual",c,"QUARTER",{hash:{},inverse:this.noop,fn:this.program(5,h,d)}))||0===c)b+=c;b+='>Quarterly breakdown - year to date</option>\n    <option value="MONTH" ';c=a.breakdown;if((c=(k=e.ifEqual)?k.call(a,c,"MONTH",{hash:{},inverse:this.noop,fn:this.program(7,l,d)}):m.call(a,"ifEqual",c,"MONTH",{hash:{},inverse:this.noop,fn:this.program(7,l,d)}))||0===c)b+=c;return b+">Monthly breakdown - year to date</option>\n  </select>\n</div>\n"});
return this.HandlebarsTemplates["reports/profit_loss_quick_links"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["reports/profit_loss_report_breakdown"]=Handlebars.template(function(b,a,e,c,d){function f(a,b){var c,d;c='\n    <div id="new_pl_report" class="col-xs-8">\n      <div class="pull-right" id="new_pl_report" >\n        <a href="';d=(d=e.businessUrl)?d.call(a,"/reports/compProfitLoss",{hash:{}}):g.call(a,"businessUrl","/reports/compProfitLoss",{hash:{}});return c+=h(d)+'">Switch to the new Profit & loss report</a>\n      </div>\n    </div>\n  '}
e=e||b.helpers;var g=e.helperMissing,h=this.escapeExpression;b='<div id="pageContentHeader" class="row">\n  <h1 class="col-xs-16">Profit & loss statement</h1>\n\n  ';if((a=(c=e.ifFeature)?c.call(a,"NEW_PL_REPORT",{hash:{},inverse:this.noop,fn:this.program(1,f,d)}):g.call(a,"ifFeature","NEW_PL_REPORT",{hash:{},inverse:this.noop,fn:this.program(1,f,d)}))||0===a)b+=a;return b+'\n\n</div>\n<div class="reportContainer">\n  <div class="row">\n    <div id="reportPreferenceAnchor" class="col-xs-24"></div>\n  </div>\n\n  <div class="row">\n    <div id="quickLinksContainer" class="col-xs-24 form-inline bottom-buffer"></div>\n  </div>\n\n  <div class="row bottom-buffer">\n    <div id="dateFilter" class="col-xs-24"></div>\n  </div>\n\n  <div class="row">\n    <div class="col-xs-24">\n      <div id="dateFilterError" class="alert alert-danger"></div>\n    </div>\n  </div>\n\n  <div class="row">\n    <div class="col-xs-24">\n      <hr class="reportHr">\n    </div>\n  </div>\n\n  <div class="row bottom-buffer">\n    <div class="col-xs-24">\n      <div id="rangeDescription" class="pull-left"></div>\n      <div class="pull-right">\n        <button class="btn btn-default btn-xls">XLS</button>\n        <button class="btn btn-default btn-pdf">PDF</button>\n      </div>\n      <div class="loadingSpinner"></div>\n    </div>\n  </div>\n\n  <div class="row">\n    <div id="profitLossReportAnchor"></div>\n  </div>\n\n</div>\n'});
return this.HandlebarsTemplates["reports/profit_loss_report_breakdown"]}).call(this);(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["reports/profit_loss_report_loading"]=Handlebars.template(function(b,a,e,c,d){return'<div class="loadingSpinner"></div>\n'});return this.HandlebarsTemplates["reports/profit_loss_report_loading"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["reports/profit_loss_report_table"]=Handlebars.template(function(b,a,e,c,d){function f(a,b,c,d){var f;f='\n    <tr class="blank">\n      <td>&nbsp;</td>\n      <td>&nbsp;</td>\n      <td>&nbsp;</td>\n      ';c=c.showAccountNumbers;if((c=e["if"].call(a,c,{hash:{},inverse:D.noop,fn:D.program(11,g,b)}))||0===c)f+=c;f+='\n    </tr>\n\n    <tr class="detailRow group">\n      <td class="ta_left group-title" ';c=
d.showAccountNumbers;if((c=e["if"].call(a,c,{hash:{},inverse:D.noop,fn:D.program(13,h,b)}))||0===c)f+=c;f+="><b>";(d=e.displayName)?c=d.call(a,{hash:{}}):(c=a.displayName,c="function"===typeof c?c():c);f+=y(c)+"</b></td>\n      ";c=a.displayName;if((c=(d=e.ifNotContains)?d.call(a,c,"Net",{hash:{},inverse:D.program(17,k,b),fn:D.program(15,l,b)}):F.call(a,"ifNotContains",c,"Net",{hash:{},inverse:D.program(17,k,b),fn:D.program(15,l,b)}))||0===c)f+=c;return f+'\n      <td class="blank">&nbsp;</td>\n    </tr>\n  '}
function g(a,c){return'\n        <td class="ta_left">&nbsp;</td>\n      '}function h(a,c){return'colspan="2"'}function l(a,c){var b,d;b='\n        <td class="text-right operating-total"><b>';(d=e.totalForView)?d=d.call(a,{hash:{}}):(d=a.totalForView,d="function"===typeof d?d():d);return b+=y(d)+"</b></td>\n      "}function k(a,c){var b,d;b='\n        <td class="text-right net-total"><b>';(d=e.totalForView)?d=d.call(a,{hash:{}}):(d=a.totalForView,d="function"===typeof d?d():d);return b+=y(d)+"</b></td>\n      "}
function m(a,c,b){var d,f,g;d="\n    <tr>\n      <td>&nbsp;</td>\n      ";f=b.showAccountNumbers;if((f=e["if"].call(a,f,{hash:{},inverse:D.noop,fn:D.program(20,n,c)}))||0===f)d+=f;d+="\n      ";f=a.displayName;if((f=(g=e.ifEqual)?g.call(a,f,"Income",{hash:{},inverse:D.program(24,p,c),fn:D.program(22,q,c)}):F.call(a,"ifEqual",f,"Income",{hash:{},inverse:D.program(24,p,c),fn:D.program(22,q,c)}))||0===f)d+=f;d+='\n      <td  class="blank">&nbsp;</td>\n    </tr>\n\n    <tr class="detailRow group">\n      <td class="ta_left group-title"><b>';
(g=e.displayName)?f=g.call(a,{hash:{}}):(f=a.displayName,f="function"===typeof f?f():f);d+=y(f)+"</b></td>\n      ";f=b.showAccountNumbers;if((f=e["if"].call(a,f,{hash:{},inverse:D.noop,fn:D.program(26,t,c)}))||0===f)d+=f;d+='\n      <td>&nbsp;</td>\n      <td class="blank">&nbsp;</td>\n    </tr>\n\n    ';f=a.accounts;if((f=e.each.call(a,f,{hash:{},inverse:D.noop,fn:D.programWithDepth(r,c,b)}))||0===f)d+=f;d+='\n\n    <tr class="detailRow">\n      ';f=b.showAccountNumbers;if((f=e["if"].call(a,f,{hash:{},
inverse:D.program(33,z,c),fn:D.program(31,v,c)}))||0===f)d+=f;return d+"\n    </tr>\n  "}function n(a,c){return'\n        <td class="ta_left">&nbsp;</td>\n      '}function q(a,c){return'\n        <td class="text-right"><b>$</b></td>\n      '}function p(a,c){return"\n        <td>&nbsp;</td>\n      "}function t(a,c){return"\n        <td>&nbsp;</td>\n      "}function r(a,c,b){var d;d='\n      <tr class="detailRow account">\n        ';b=b.showAccountNumbers;if((b=e["if"].call(a,b,{hash:{},inverse:D.noop,
fn:D.program(29,u,c)}))||0===b)d+=b;d+='\n        <td class="ta_left accountName">';(c=e.accountName)?b=c.call(a,{hash:{}}):(b=a.accountName,b="function"===typeof b?b():b);d+=y(b)+'</td>\n        <td class="text-right"><a data-accountId="';(c=e.accountSysId)?b=c.call(a,{hash:{}}):(b=a.accountSysId,b="function"===typeof b?b():b);d+=y(b)+'" class="accountBalance" id="';(c=e.accountSysId)?b=c.call(a,{hash:{}}):(b=a.accountSysId,b="function"===typeof b?b():b);d+=y(b)+'">';(c=e.amountForView)?b=c.call(a,
{hash:{}}):(b=a.amountForView,b="function"===typeof b?b():b);d+=y(b)+'</a></td>\n        <td class="blank">&nbsp;</td>\n      </tr>\n      <tr class="expand">\n        <td colspan="4">\n          <div id="blankTopRow';(c=e.accountSysId)?b=c.call(a,{hash:{}}):(b=a.accountSysId,b="function"===typeof b?b():b);d+=y(b)+'" class=\'topBorder\'></div>\n          <div class="journalEntriesContainer" id="journalEntriesContainer';(c=e.accountSysId)?b=c.call(a,{hash:{}}):(b=a.accountSysId,b="function"===typeof b?
b():b);d+=y(b)+'" >\n            <div class="journalEntries" id="journalEntries';(c=e.accountSysId)?b=c.call(a,{hash:{}}):(b=a.accountSysId,b="function"===typeof b?b():b);d+=y(b)+'" data-accountid="';(c=e.accountSysId)?b=c.call(a,{hash:{}}):(b=a.accountSysId,b="function"===typeof b?b():b);d+=y(b)+'"><div class="smallLoadingSpinner"></div></div>\n            <div><button class="closeAccountTransactions closeButton fa fa-times-circle" data-accountid="';(c=e.accountSysId)?b=c.call(a,{hash:{}}):(b=a.accountSysId,
b="function"===typeof b?b():b);d+=y(b)+'"></button></div>\n          </div>\n          <div id="blankRow';(c=e.accountSysId)?b=c.call(a,{hash:{}}):(b=a.accountSysId,b="function"===typeof b?b():b);return d+=y(b)+"\" class='bottomBorder'></div>\n        </td>\n      </tr>\n    "}function u(a,b){var c,d;c='\n          <td class="ta_left accountId">';(d=e.accountId)?d=d.call(a,{hash:{}}):(d=a.accountId,d="function"===typeof d?d():d);return c+=y(d)+"</td>\n        "}function v(a,b){var c,d;c='\n        <td class="ta_left">&nbsp;</td>\n        <td class="ta_left">&nbsp;</td>\n        <td class="text-right group-total"><b>';
(d=e.totalForView)?d=d.call(a,{hash:{}}):(d=a.totalForView,d="function"===typeof d?d():d);return c+=y(d)+'</b></td>\n        <td class="ta-right blank">&nbsp;</td>\n      '}function z(a,b){var c,d;c='\n        <td class="ta_left">&nbsp;</td>\n        <td class="text-right group-total"><b>';(d=e.totalForView)?d=d.call(a,{hash:{}}):(d=a.totalForView,d="function"===typeof d?d():d);return c+=y(d)+'</b></td>\n        <td class="ta-right blank">&nbsp;</td>\n      '}e=e||b.helpers;var y=this.escapeExpression,
D=this,F=e.helperMissing;b="<h1>Profit &amp; Loss / ";(c=e.companyName)?c=c.call(a,{hash:{}}):(c=a.companyName,c="function"===typeof c?c():c);b+=y(c)+"</h1>\n<h4>";(c=e.rangeDescription)?c=c.call(a,{hash:{}}):(c=a.rangeDescription,c="function"===typeof c?c():c);b+=y(c)+'</h4>\n<table class="table profitLossReport accounts">\n<colgroup>\n  ';c=a.showAccountNumbers;if((c=e["if"].call(a,c,{hash:{},inverse:D.program(3,function(a,b){return'\n    <col style="width:400px;">\n  '},d),fn:D.program(1,function(a,
b){return'\n    <col style="width:150px;">\n    <col style="width:400px;">\n  '},d)}))||0===c)b+=c;b+='\n  <col style="width:100px;">\n  ';c=a.showAccountNumbers;if((c=e["if"].call(a,c,{hash:{},inverse:D.program(7,function(a,b){return'\n    <col style="min-width:70px; width:380px;">\n  '},d),fn:D.program(5,function(a,b){return'\n    <col style="min-width:70px; width:230px;">\n  '},d)}))||0===c)b+=c;b+="\n</colgroup>\n";c=a.groups;if((c=e.each.call(a,c,{hash:{},inverse:D.noop,fn:D.programWithDepth(function(a,
b,c){var d,g;d="\n\n  ";g=a.profitGroup;if((g=e["if"].call(a,g,{hash:{},inverse:D.programWithDepth(m,b,c),fn:D.programWithDepth(f,b,a,c)}))||0===g)d+=g;return d+"\n"},d,a)}))||0===c)b+=c;return b+"\n</table>\n"});return this.HandlebarsTemplates["reports/profit_loss_report_table"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["reports/profit_loss_report_table_breakdown"]=Handlebars.template(function(b,a,e,c,d){function f(a,b){var c,d;c="\n      ";d=a.showAccountNumbers;if((d=e["if"].call(a,d,{hash:{},inverse:x.program(4,h,b),fn:x.program(2,g,b),data:b}))||0===d)c+=d;return c+"\n    "}function g(a,b){return'\n        <col style="width:120px;">\n        <col style="width:260px;">\n      '}function h(a,b){return'\n        <col style="width:380px;">\n      '}
function l(a,b){var c,d;c="\n      ";d=a.showAccountNumbers;if((d=e["if"].call(a,d,{hash:{},inverse:x.program(9,m,b),fn:x.program(7,k,b),data:b}))||0===d)c+=d;return c+"\n    "}function k(a,b){return'\n        <col style="width:90px;">\n        <col style="width:250px;">\n      '}function m(a,b){return'\n        <col style="width:340px;">\n      '}function n(a,b){var c,d;c="\n      ";d=a.showAccountNumbers;if((d=e["if"].call(a,d,{hash:{},inverse:x.program(14,p,b),fn:x.program(12,q,b),data:b}))||0===
d)c+=d;return c+"\n    "}function q(a,b){return'\n        <col style="width:63px;">\n        <col style="width:150px;">\n      '}function p(a,b){return'\n        <col style="width:213px;">\n      '}function t(a,b){var c,d,f,g;c="\n      ";d=a.startIndex;f=a.breakdownLabels;if((d=(g=e.forRange)?g.call(a,f,d,6,{hash:{},inverse:x.noop,fn:x.program(17,r,b),data:b}):K.call(a,"forRange",f,d,6,{hash:{},inverse:x.noop,fn:x.program(17,r,b),data:b}))||0===d)c+=d;return c+"\n    "}function r(a,b){return'\n        <col style="width:107px;">\n      '}
function u(a,b){var c,d,f,g;c="\n      ";d=a.startIndex;f=a.breakdownLabels;if((d=(g=e.forRange)?g.call(a,f,d,6,{hash:{},inverse:x.noop,fn:x.program(20,v,b),data:b}):K.call(a,"forRange",f,d,6,{hash:{},inverse:x.noop,fn:x.program(20,v,b),data:b}))||0===d)c+=d;return c+"\n    "}function v(a,b){return'\n        <col style="width:93px;">\n      '}function z(a,b){var c;c='\n    <td class="text-right breakdownLabels">';a="function"===typeof a?a():a;return c+=M(a)+"</td>\n    "}function y(a,b,c){var d,f,
g;d='\n    <tr class="detailRow group">\n      <td class="ta_left group-title" ';f=c.showAccountNumbers;if((f=e["if"].call(a,f,{hash:{},inverse:x.noop,fn:x.program(28,D,b),data:b}))||0===f)d+=f;d+="><b>";(g=e.displayName)?f=g.call(a,{hash:{},data:b}):(f=a.displayName,f="function"===typeof f?f():f);d+=M(f)+"</b></td>\n      ";f=c.breakdown;if((f=(g=e.unlessEqual)?g.call(a,f,"YEAR",{hash:{},inverse:x.noop,fn:x.programWithDepth(F,b,c),data:b}):K.call(a,"unlessEqual",f,"YEAR",{hash:{},inverse:x.noop,
fn:x.programWithDepth(F,b,c),data:b}))||0===f)d+=f;d+='\n        <td class="text-right operating-total amount group-total2 ';f=c.breakdown;if((f=(g=e.unlessEqual)?g.call(a,f,"YEAR",{hash:{},inverse:x.noop,fn:x.program(33,A,b),data:b}):K.call(a,"unlessEqual",f,"YEAR",{hash:{},inverse:x.noop,fn:x.program(33,A,b),data:b}))||0===f)d+=f;d+='">';(g=e.totalForView)?f=g.call(a,{hash:{},data:b}):(f=a.totalForView,f="function"===typeof f?f():f);return d+=M(f)+'</td>\n        <td class="blank">&nbsp;</td>\n    </tr>\n  '}
function D(a,b){return'colspan="2"'}function F(a,b,c){var d,f,g;d="\n        ";c=c.startIndex;f=a.subtotalsForView;if((c=(g=e.forRange)?g.call(a,f,c,6,{hash:{},inverse:x.noop,fn:x.program(31,w,b),data:b}):K.call(a,"forRange",f,c,6,{hash:{},inverse:x.noop,fn:x.program(31,w,b),data:b}))||0===c)d+=c;return d+"\n      "}function w(a,b){var c;c='\n          <td class="text-right group-total amount group-total2 allBorder">';a="function"===typeof a?a():a;return c+=M(a)+"</td>\n        "}function A(a,b){return"allBorder"}
function B(a,b,c){var d,f,g;d='\n    <tr class="detailRow group">\n      <td class="ta_left group-title" ';f=c.showAccountNumbers;if((f=e["if"].call(a,f,{hash:{},inverse:x.noop,fn:x.program(36,C,b),data:b}))||0===f)d+=f;d+="><b>";(g=e.displayName)?f=g.call(a,{hash:{},data:b}):(f=a.displayName,f="function"===typeof f?f():f);d+=M(f)+"</b></td>\n      ";f=c.breakdown;if((f=(g=e.unlessEqual)?g.call(a,f,"YEAR",{hash:{},inverse:x.noop,fn:x.programWithDepth(G,b,c),data:b}):K.call(a,"unlessEqual",f,"YEAR",
{hash:{},inverse:x.noop,fn:x.programWithDepth(G,b,c),data:b}))||0===f)d+=f;d+='\n      <td>&nbsp;</td>\n      <td class="blank">&nbsp;</td>\n    </tr>\n\n    ';f=a.accounts;if((f=e.each.call(a,f,{hash:{},inverse:x.noop,fn:x.programWithDepth(H,b,c),data:b}))||0===f)d+=f;d+='\n\n    <tr class="detailRow">\n      ';f=c.showAccountNumbers;if((f=e["if"].call(a,f,{hash:{},inverse:x.programWithDepth(ea,b,a,c),fn:x.programWithDepth(V,b,a,c),data:b}))||0===f)d+=f;return d+"\n    </tr>\n  "}function C(a,b){return' colspan="2" '}
function G(a,b,c){var d,f,g;d="\n        ";c=c.startIndex;f=a.subtotalsForView;if((c=(g=e.forRange)?g.call(a,f,c,6,{hash:{},inverse:x.noop,fn:x.program(39,N,b),data:b}):K.call(a,"forRange",f,c,6,{hash:{},inverse:x.noop,fn:x.program(39,N,b),data:b}))||0===c)d+=c;return d+"\n      "}function N(a,b){return"\n          <td>&nbsp;</td>\n        "}function H(a,b,d){var f,g,h;f='\n      <tr class="detailRow account">\n        ';g=d.showAccountNumbers;if((g=e["if"].call(a,g,{hash:{},inverse:x.noop,fn:x.program(42,
I,b),data:b}))||0===g)f+=g;f+='\n        <td class="ta_left accountName">';(h=e.accountName)?g=h.call(a,{hash:{},data:b}):(g=a.accountName,g="function"===typeof g?g():g);f+=M(g)+"</td>\n        ";g=d.breakdown;if((g=(h=e.unlessEqual)?h.call(a,g,"YEAR",{hash:{},inverse:x.noop,fn:x.programWithDepth(E,b,a,d),data:b}):K.call(a,"unlessEqual",g,"YEAR",{hash:{},inverse:x.noop,fn:x.programWithDepth(E,b,a,d),data:b}))||0===g)f+=g;f+='\n        <td class="text-right ';g=d.breakdown;if((g=(h=e.unlessEqual)?
h.call(a,g,"YEAR",{hash:{},inverse:x.noop,fn:x.program(52,R,b),data:b}):K.call(a,"unlessEqual",g,"YEAR",{hash:{},inverse:x.noop,fn:x.program(52,R,b),data:b}))||0===g)f+=g;f+='"><a data-accountId="';(h=e.accountSysId)?g=h.call(a,{hash:{},data:b}):(g=a.accountSysId,g="function"===typeof g?g():g);f+=M(g)+'" class="accountBalance amount" id="';(h=e.accountSysId)?g=h.call(a,{hash:{},data:b}):(g=a.accountSysId,g="function"===typeof g?g():g);f+=M(g)+'">';(h=e.amountForView)?g=h.call(a,{hash:{},data:b}):
(g=a.amountForView,g="function"===typeof g?g():g);f+=M(g)+'</a></td>\n      </tr>\n      <tr class="journalEntriesContainerRow">\n        <td colspan="';g=d.showAccountNumbers;d=a.periods;g=(h=e.profitLossCalculateColSpan)?h.call(a,d,g,{hash:{},data:b}):K.call(a,"profitLossCalculateColSpan",d,g,{hash:{},data:b});f+=M(g)+'">\n          ';g=a.accountSysId;if((g=x.invokePartial(c._reports_partial_drilldown_journal_entries_container,"_reports_partial_drilldown_journal_entries_container",g,e,c,b))||0===
g)f+=g;return f+"\n        </td>\n      </tr>\n    "}function I(a,b){var c,d;c='\n          <td class="ta_left accountId">';(d=e.accountId)?d=d.call(a,{hash:{},data:b}):(d=a.accountId,d="function"===typeof d?d():d);return c+=M(d)+"</td>\n        "}function E(a,b,c,d){var f,g,h;f="\n          ";d=d.startIndex;g=a.periods;if((d=(h=e.forRange)?h.call(a,g,d,6,{hash:{},inverse:x.noop,fn:x.programWithDepth(O,b,a,c),data:b}):K.call(a,"forRange",g,d,6,{hash:{},inverse:x.noop,fn:x.programWithDepth(O,b,a,c),
data:b}))||0===d)f+=d;return f+"\n        "}function O(a,b,c,d){var f;f="\n            ";if((a=e.unless.call(a,a,{hash:{},inverse:x.programWithDepth(T,b,c,d),fn:x.programWithDepth(Q,b,d),data:b}))||0===a)f+=a;return f+"\n          "}function Q(a,b,c){var d,f;d='\n              <td class="text-right accountPeriod ';c=c.breakdown;if((c=(f=e.unlessEqual)?f.call(a,c,"YEAR",{hash:{},inverse:x.noop,fn:x.program(47,L,b),data:b}):K.call(a,"unlessEqual",c,"YEAR",{hash:{},inverse:x.noop,fn:x.program(47,L,b),
data:b}))||0===c)d+=c;return d+'"></td>\n            '}function L(a,b){return"allBorder"}function T(a,b,c,d){var f,g;f='\n              <td class="text-right accountPeriod ';d=d.breakdown;if((d=(g=e.unlessEqual)?g.call(a,d,"YEAR",{hash:{},inverse:x.noop,fn:x.program(50,P,b),data:b}):K.call(a,"unlessEqual",d,"YEAR",{hash:{},inverse:x.noop,fn:x.program(50,P,b),data:b}))||0===d)f+=d;f+='"><a data-accountId="';d=c.accountSysId;d="function"===typeof d?d():d;f+=M(d)+'" class="accountPeriodBalance amount" data-from="';
(g=e.from)?d=g.call(a,{hash:{},data:b}):(d=a.from,d="function"===typeof d?d():d);f+=M(d)+'" data-to="';(g=e.to)?d=g.call(a,{hash:{},data:b}):(d=a.to,d="function"===typeof d?d():d);f+=M(d)+'" id="';d=c.accountSysId;d="function"===typeof d?d():d;f+=M(d);d=b.index;d="function"===typeof d?d():d;f+=M(d)+'">';(g=e.amountForView)?d=g.call(a,{hash:{},data:b}):(d=a.amountForView,d="function"===typeof d?d():d);return f+=M(d)+"</a></td>\n            "}function P(a,b){return"allBorder"}function R(a,b){return"allBorder"}
function V(a,b,c,d){var f,g,h;f='\n        <td class="ta_left">&nbsp;</td>\n        <td class="ta_left">&nbsp;</td>\n        ';g=d.breakdown;if((g=(h=e.unlessEqual)?h.call(a,g,"YEAR",{hash:{},inverse:x.noop,fn:x.programWithDepth(W,b,c,d),data:b}):K.call(a,"unlessEqual",g,"YEAR",{hash:{},inverse:x.noop,fn:x.programWithDepth(W,b,c,d),data:b}))||0===g)f+=g;f+='\n        <td class="text-right group-total amount ';g=d.breakdown;if((g=(h=e.unlessEqual)?h.call(a,g,"YEAR",{hash:{},inverse:x.noop,fn:x.program(59,
Z,b),data:b}):K.call(a,"unlessEqual",g,"YEAR",{hash:{},inverse:x.noop,fn:x.program(59,Z,b),data:b}))||0===g)f+=g;f+='">';(h=e.totalForView)?g=h.call(a,{hash:{},data:b}):(g=a.totalForView,g="function"===typeof g?g():g);return f+=M(g)+'</td>\n        <td class="blank">&nbsp;</td>\n      '}function W(a,b,c,d){var f,g,h;f="\n          ";d=d.startIndex;g=a.subtotalsForView;if((d=(h=e.forRange)?h.call(a,g,d,6,{hash:{},inverse:x.noop,fn:x.programWithDepth(X,b,c),data:b}):K.call(a,"forRange",g,d,6,{hash:{},
inverse:x.noop,fn:x.programWithDepth(X,b,c),data:b}))||0===d)f+=d;return f+"\n        "}function X(a,b,c){var d,f;d='\n            <td class="text-right group-total amount ';c=c.breakdown;if((c=(f=e.unlessEqual)?f.call(a,c,"YEAR",{hash:{},inverse:x.noop,fn:x.program(57,Y,b),data:b}):K.call(a,"unlessEqual",c,"YEAR",{hash:{},inverse:x.noop,fn:x.program(57,Y,b),data:b}))||0===c)d+=c;d+='">';a="function"===typeof a?a():a;return d+=M(a)+"</td>\n          "}function Y(a,b){return"allBorder"}function Z(a,
b){return"allBorder"}function ea(a,b,c,d){var f,g,h;f='\n        <td class="ta_left">&nbsp;</td>\n        ';g=d.breakdown;if((g=(h=e.unlessEqual)?h.call(a,g,"YEAR",{hash:{},inverse:x.noop,fn:x.programWithDepth(aa,b,c,d),data:b}):K.call(a,"unlessEqual",g,"YEAR",{hash:{},inverse:x.noop,fn:x.programWithDepth(aa,b,c,d),data:b}))||0===g)f+=g;f+='\n        <td class="text-right group-total amount ';g=d.breakdown;if((g=(h=e.unlessEqual)?h.call(a,g,"YEAR",{hash:{},inverse:x.noop,fn:x.program(66,ba,b),data:b}):
K.call(a,"unlessEqual",g,"YEAR",{hash:{},inverse:x.noop,fn:x.program(66,ba,b),data:b}))||0===g)f+=g;f+='">';(h=e.totalForView)?g=h.call(a,{hash:{},data:b}):(g=a.totalForView,g="function"===typeof g?g():g);return f+=M(g)+'</td>\n        <td class="blank">&nbsp;</td>\n      '}function aa(a,b,c,d){var f,g,h;f="\n          ";d=d.startIndex;g=a.subtotalsForView;if((d=(h=e.forRange)?h.call(a,g,d,6,{hash:{},inverse:x.noop,fn:x.programWithDepth(ca,b,c),data:b}):K.call(a,"forRange",g,d,6,{hash:{},inverse:x.noop,
fn:x.programWithDepth(ca,b,c),data:b}))||0===d)f+=d;return f+"\n        "}function ca(a,b,c){var d,f;d='\n          <td class="text-right group-total amount ';c=c.breakdown;if((c=(f=e.unlessEqual)?f.call(a,c,"YEAR",{hash:{},inverse:x.noop,fn:x.program(64,da,b),data:b}):K.call(a,"unlessEqual",c,"YEAR",{hash:{},inverse:x.noop,fn:x.program(64,da,b),data:b}))||0===c)d+=c;d+='">';a="function"===typeof a?a():a;return d+=M(a)+"</td>\n          "}function da(a,b){return"allBorder"}function ba(a,b){return"allBorder"}
function fa(a,b){return'\n      <td class="ta_left">&nbsp;</td>\n    '}e=e||b.helpers;c=c||b.partials;d=d||{};var J,U,S,x=this,K=e.helperMissing,M=this.escapeExpression;b='<div><a id="preButton" href="#" >&nbsp;</a></div>\n<div><a id="nextButton" href="#">&nbsp;</a></div>\n<table class="table drillableReport profitLossReport accounts" style="word-wrap:break-word;max-width:880px;width:880px;table-layout: fixed">\n  <colgroup>\n    ';J=a.breakdown;if((J=(S=e.ifEqual)?S.call(a,J,"YEAR",{hash:{},inverse:x.noop,
fn:x.program(1,f,d),data:d}):K.call(a,"ifEqual",J,"YEAR",{hash:{},inverse:x.noop,fn:x.program(1,f,d),data:d}))||0===J)b+=J;b+="\n    ";J=a.breakdown;if((J=(S=e.ifEqual)?S.call(a,J,"QUARTER",{hash:{},inverse:x.noop,fn:x.program(6,l,d),data:d}):K.call(a,"ifEqual",J,"QUARTER",{hash:{},inverse:x.noop,fn:x.program(6,l,d),data:d}))||0===J)b+=J;b+="\n    ";J=a.breakdown;if((J=(S=e.ifEqual)?S.call(a,J,"MONTH",{hash:{},inverse:x.noop,fn:x.program(11,n,d),data:d}):K.call(a,"ifEqual",J,"MONTH",{hash:{},inverse:x.noop,
fn:x.program(11,n,d),data:d}))||0===J)b+=J;b+="\n\n    ";J=a.breakdown;if((J=(S=e.ifEqual)?S.call(a,J,"QUARTER",{hash:{},inverse:x.noop,fn:x.program(16,t,d),data:d}):K.call(a,"ifEqual",J,"QUARTER",{hash:{},inverse:x.noop,fn:x.program(16,t,d),data:d}))||0===J)b+=J;b+="\n    ";J=a.breakdown;if((J=(S=e.ifEqual)?S.call(a,J,"MONTH",{hash:{},inverse:x.noop,fn:x.program(19,u,d),data:d}):K.call(a,"ifEqual",J,"MONTH",{hash:{},inverse:x.noop,fn:x.program(19,u,d),data:d}))||0===J)b+=J;b+='\n    <col style="width:115px;">\n  </colgroup>\n  <tr>\n    <td>&nbsp;</td>\n  ';
J=a.showAccountNumbers;if((J=e["if"].call(a,J,{hash:{},inverse:x.noop,fn:x.program(22,function(a,b){return"\n    <td>&nbsp;</td>\n  "},d),data:d}))||0===J)b+=J;b+="\n    ";J=a.startIndex;U=a.breakdownLabels;if((J=(S=e.forRange)?S.call(a,U,J,6,{hash:{},inverse:x.noop,fn:x.program(24,z,d),data:d}):K.call(a,"forRange",U,J,6,{hash:{},inverse:x.noop,fn:x.program(24,z,d),data:d}))||0===J)b+=J;b+='\n    <td class="text-right breakdownLabels">Total</td>\n  </tr>\n\n';J=a.groups;if((J=e.each.call(a,J,{hash:{},
inverse:x.noop,fn:x.programWithDepth(function(a,b,c){var d,f;d="\n\n  ";f=a.profitGroup;if((f=e["if"].call(a,f,{hash:{},inverse:x.programWithDepth(B,b,c),fn:x.programWithDepth(y,b,c),data:b}))||0===f)d+=f;d+='\n  <tr class="blank">\n    <td>&nbsp;</td>\n    <td >&nbsp;</td>\n    <td >&nbsp;</td>\n    ';f=c.showAccountNumbers;if((f=e["if"].call(a,f,{hash:{},inverse:x.noop,fn:x.program(68,fa,b),data:b}))||0===f)d+=f;return d+"\n  </tr>\n"},d,a),data:d}))||0===J)b+=J;return b+"\n"});return this.HandlebarsTemplates["reports/profit_loss_report_table_breakdown"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["reports/report_preferences"]=Handlebars.template(function(b,a,e,c,d){e=e||b.helpers;var f=e.helperMissing,g=this.escapeExpression;b='<div class="reportPerference dropdown">\n  <div class="preference">\n    <a class="dropdown-toggle" id="dropdownMenu" data-toggle="dropdown">Report options</a>\n  </div>\n  <div class="dropdown-menu" role="menu" aria-labelledby="dropdownMenu">\n    <ul>\n      <li role="presentation" class="showCashOption">\n        <div class="reportOption">\n          <span class="optionLabelLeft">Showing</span>: ';
c=a.cashBasis;if((c=e["if"].call(a,c,{hash:{},inverse:this.program(3,function(a,b){return"Accruals"},d),fn:this.program(1,function(a,b){return"Cash"},d)}))||0===c)b+=c;b+='\n          <a id="cashBasis" href="#">change</a>\n        </div>\n      </li>\n      <li role="presentation" class="showCentsOption">\n        <div class="reportOption">\n          <span class="optionLabelLeft">Showing</span>: ';c=a.showCents;if((c=e["if"].call(a,c,{hash:{},inverse:this.program(7,function(a,b){return"Whole dollars"},
d),fn:this.program(5,function(a,b){return"Cents"},d)}))||0===c)b+=c;b+='\n          <a id="showCents" href="#">change</a>\n        </div>\n      </li>\n      <li role="presentation" class="showAccountNumbersOption">\n        <div class="reportOption">\n          <span class="optionLabelLeft">';c=a.showAccountNumbers;if((c=e["if"].call(a,c,{hash:{},inverse:this.program(11,function(a,b){return"Hiding"},d),fn:this.program(9,function(a,b){return"Showing"},d)}))||0===c)b+=c;b+='</span>: Account numbers\n          <a id="showAccountNumbers" href="#">change</a>\n        </div>\n      </li>\n      <li role="presentation" class="parenthesisNegative">\n        <div class="reportOption">\n          Display negatives:\n          <span class="form-inline pull-right">\n          ';
c=a.parenthesisNegative;c=(d=e.radio)?d.call(a,"parenthesisNegativeTrue","(100)","parenthesisNegative",!0,c,{hash:{}}):f.call(a,"radio","parenthesisNegativeTrue","(100)","parenthesisNegative",!0,c,{hash:{}});b+=g(c)+"\n          ";c=a.parenthesisNegative;c=(d=e.radio)?d.call(a,"parenthesisNegativeFalse","-100","parenthesisNegative",!1,c,{hash:{}}):f.call(a,"radio","parenthesisNegativeFalse","-100","parenthesisNegative",!1,c,{hash:{}});return b+=g(c)+"\n          </span>\n        </div>\n      </li>\n    </ul>\n  </div>\n</div>\n"});
return this.HandlebarsTemplates["reports/report_preferences"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["reports/reports-list"]=Handlebars.template(function(b,a,e,c,d){function f(a,b){var c,d,f;c="\n    ";if((d=(f=e.unlessBusinessSetting)?f.call(a,"accountStatus","SUSPENDED",{hash:{},inverse:E.noop,fn:E.program(2,g,b)}):H.call(a,"unlessBusinessSetting","accountStatus","SUSPENDED",{hash:{},inverse:E.noop,fn:E.program(2,g,b)}))||0===d)c+=d;c+="\n    ";d=a.businessId;d=(f=e.reportItemWithAppUrl)?f.call(a,d,"/reports/compBalanceSheet",
"Balance sheet","Displays the balance of your MYOB Essentials asset, liability and equity accounts up to a certain date in a financial year.",{hash:{}}):H.call(a,"reportItemWithAppUrl",d,"/reports/compBalanceSheet","Balance sheet","Displays the balance of your MYOB Essentials asset, liability and equity accounts up to a certain date in a financial year.",{hash:{}});c+=I(d)+"\n    ";d=a.businessId;d=(f=e.reportItemWithAppUrl)?f.call(a,d,"/reports/trialBalance","Trial balance","Displays the activity of each account in the form of debits and credits for a specified month of a financial year, and also for the period from the beginning of the financial year up to that month.",
{hash:{}}):H.call(a,"reportItemWithAppUrl",d,"/reports/trialBalance","Trial balance","Displays the activity of each account in the form of debits and credits for a specified month of a financial year, and also for the period from the beginning of the financial year up to that month.",{hash:{}});c+=I(d)+"\n    ";if((d=(f=e.ifFeature)?f.call(a,"NEW_PL_REPORT",{hash:{},inverse:E.program(9,m,b),fn:E.program(7,k,b)}):H.call(a,"ifFeature","NEW_PL_REPORT",{hash:{},inverse:E.program(9,m,b),fn:E.program(7,
k,b)}))||0===d)c+=d;c+="\n    ";(f=e.ifAu)?d=f.call(a,{hash:{},inverse:E.noop,fn:E.program(12,q,b)}):(d=a.ifAu,d="function"===typeof d?d():d);e.ifAu||(d=O.call(a,d,{hash:{},inverse:E.noop,fn:E.program(12,q,b)}));if(d||0===d)c+=d;c+="\n\n    ";(f=e.ifNz)?d=f.call(a,{hash:{},inverse:E.noop,fn:E.program(14,p,b)}):(d=a.ifNz,d="function"===typeof d?d():d);e.ifNz||(d=O.call(a,d,{hash:{},inverse:E.noop,fn:E.program(14,p,b)}));if(d||0===d)c+=d;c+="\n    ";d=a.businessId;d=(f=e.reportItemWithAppUrl)?f.call(a,
d,"/reports/journals","Journals","Displays a list of all your transactions as journal entries.",{hash:{}}):H.call(a,"reportItemWithAppUrl",d,"/reports/journals","Journals","Displays a list of all your transactions as journal entries.",{hash:{}});c+=I(d)+"\n    ";d=a.businessId;d=(f=e.reportItemWithAppUrl)?f.call(a,d,"/reports/accountList","Accounts","Lists all or selected MYOB Essentials accounts, along with their balances as at a specific date.",{hash:{}}):H.call(a,"reportItemWithAppUrl",d,"/reports/accountList",
"Accounts","Lists all or selected MYOB Essentials accounts, along with their balances as at a specific date.",{hash:{}});c+=I(d)+"\n    ";d=a.businessId;d=(f=e.reportItemWithAppUrl)?f.call(a,d,"/reports/contacts","Contacts","Lists all or selected contacts, along with their phone and email details.",{hash:{}}):H.call(a,"reportItemWithAppUrl",d,"/reports/contacts","Contacts","Lists all or selected contacts, along with their phone and email details.",{hash:{}});c+=I(d)+"\n    ";d=a.businessId;d=(f=e.reportItemWithAppUrl)?
f.call(a,d,"/reports/generalLedgerReportForm","General ledger details","Lists all the transactions that have been applied to an account for a specified period.",{hash:{}}):H.call(a,"reportItemWithAppUrl",d,"/reports/generalLedgerReportForm","General ledger details","Lists all the transactions that have been applied to an account for a specified period.",{hash:{}});c+=I(d)+"\n\n    ";if((d=(f=e.ifBusinessSetting)?f.call(a,"businessReportable",!0,{hash:{},inverse:E.noop,fn:E.program(21,v,b)}):H.call(a,
"ifBusinessSetting","businessReportable",!0,{hash:{},inverse:E.noop,fn:E.program(21,v,b)}))||0===d)c+=d;return c+"\n  "}function g(a,b){var c,d;c="\n      ";if((d=(d=e.ifFeature)?d.call(a,"NEW_PL_REPORT",{hash:{},inverse:E.program(5,l,b),fn:E.program(3,h,b)}):H.call(a,"ifFeature","NEW_PL_REPORT",{hash:{},inverse:E.program(5,l,b),fn:E.program(3,h,b)}))||0===d)c+=d;return c+"\n    "}function h(a,b){var c,d,f;c="\n       ";d=a.businessId;d=(f=e.reportItemWithAppUrl)?f.call(a,d,"/reports/budgets","Budget management",
"Create and edit budgets.",{hash:{}}):H.call(a,"reportItemWithAppUrl",d,"/reports/budgets","Budget management","Create and edit budgets.",{hash:{}});return c+=I(d)+"\n      "}function l(a,b){var c,d,f,g;c="\n        ";d=a.businessId;f={extraLabelText:"Beta",extraLabelClass:"betaStyle"};d=(g=e.reportItemWithAppUrl)?g.call(a,d,"/reports/budgets","Budget management","Create and edit budgets.",{hash:f}):H.call(a,"reportItemWithAppUrl",d,"/reports/budgets","Budget management","Create and edit budgets.",
{hash:f});return c+=I(d)+"\n      "}function k(a,b){var c,d,f;c="\n       ";d=a.businessId;d=(f=e.reportItemWithAppUrl)?f.call(a,d,"/reports/compProfitLoss","Profit & loss","Displays a summary of your business performance as a report, bar chart and line graph. You can also compare the results to budgets and the previous year.",{hash:{}}):H.call(a,"reportItemWithAppUrl",d,"/reports/compProfitLoss","Profit & loss","Displays a summary of your business performance as a report, bar chart and line graph. You can also compare the results to budgets and the previous year.",
{hash:{}});return c+=I(d)+"\n    "}function m(a,b){var c,d,f;c="\n      ";d=a.businessId;d=(f=e.reportItemWithAppUrl)?f.call(a,d,"/reports/profitLoss","Profit & loss","Displays a summary of your business performance (income, expenses and profit) for a specific period within a financial year.",{hash:{}}):H.call(a,"reportItemWithAppUrl",d,"/reports/profitLoss","Profit & loss","Displays a summary of your business performance (income, expenses and profit) for a specific period within a financial year.",
{hash:{}});c+=I(d)+"\n      ";if((d=(f=e.unlessBusinessSetting)?f.call(a,"accountStatus","SUSPENDED",{hash:{},inverse:E.noop,fn:E.program(10,n,b)}):H.call(a,"unlessBusinessSetting","accountStatus","SUSPENDED",{hash:{},inverse:E.noop,fn:E.program(10,n,b)}))||0===d)c+=d;return c+"\n    "}function n(a,b){var c,d,f,g;c="\n         ";d=a.businessId;f={extraLabelText:"Beta",extraLabelClass:"betaStyle"};d=(g=e.reportItemWithAppUrl)?g.call(a,d,"/reports/compProfitLoss","Profit & loss","Displays a summary of your business performance as a report, bar chart and line graph. You can also compare the results to budgets and the previous year.",
{hash:f}):H.call(a,"reportItemWithAppUrl",d,"/reports/compProfitLoss","Profit & loss","Displays a summary of your business performance as a report, bar chart and line graph. You can also compare the results to budgets and the previous year.",{hash:f});return c+=I(d)+"\n      "}function q(a,b){var c,d,f;c="\n      ";d=a.businessId;d=(f=e.reportItemWithAppUrl)?f.call(a,d,"/reports/gstReport","GST report for activity statement","Displays GST Business Activity Statement information from the transactions you have created.",
{hash:{}}):H.call(a,"reportItemWithAppUrl",d,"/reports/gstReport","GST report for activity statement","Displays GST Business Activity Statement information from the transactions you have created.",{hash:{}});c+=I(d)+"\n      ";d=a.businessId;d=(f=e.reportItemWithAppUrl)?f.call(a,d,"/reports/gstDetailedReport","GST detailed report","Displays detailed information that you can use to prepare your BAS.",{hash:{}}):H.call(a,"reportItemWithAppUrl",d,"/reports/gstDetailedReport","GST detailed report","Displays detailed information that you can use to prepare your BAS.",
{hash:{}});return c+=I(d)+"\n    "}function p(a,b){var c,d;c="\n      ";if((d=(d=e.ifFeature)?d.call(a,"ENABLE_LEGACY_NZ_GST_DETAIL_REPORT",{hash:{},inverse:E.program(17,r,b),fn:E.program(15,t,b)}):H.call(a,"ifFeature","ENABLE_LEGACY_NZ_GST_DETAIL_REPORT",{hash:{},inverse:E.program(17,r,b),fn:E.program(15,t,b)}))||0===d)c+=d;c+="\n      ";if((d=(d=e.ifFeature)?d.call(a,"NZ_EGST_LODGEMENT_BETA",{hash:{},inverse:E.noop,fn:E.program(19,u,b)}):H.call(a,"ifFeature","NZ_EGST_LODGEMENT_BETA",{hash:{},inverse:E.noop,
fn:E.program(19,u,b)}))||0===d)c+=d;return c+"\n    "}function t(a,b){var c,d,f;c="\n          ";d=a.businessId;d=(f=e.reportItemWithAppUrl)?f.call(a,d,"/reports/gstReport","GST report","Displays summary or detailed information that you can use to prepare your GST Return.",{hash:{}}):H.call(a,"reportItemWithAppUrl",d,"/reports/gstReport","GST report","Displays summary or detailed information that you can use to prepare your GST Return.",{hash:{}});return c+=I(d)+"\n        "}function r(a,b){var c,
d,f;c="\n          ";d=a.businessId;d=(f=e.reportItemWithAppUrl)?f.call(a,d,"/reports/gstDetailedReport","GST detailed report","Displays a detailed report of your transactions organised by their tax codes. You can use this report to prepare your GST return.",{hash:{}}):H.call(a,"reportItemWithAppUrl",d,"/reports/gstDetailedReport","GST detailed report","Displays a detailed report of your transactions organised by their tax codes. You can use this report to prepare your GST return.",{hash:{}});c+=
I(d)+"\n          ";d=a.businessId;d=(f=e.reportItemWithAppUrl)?f.call(a,d,"/reports/gstReport","GST report","Generates GST summary reports and IRD return forms that you can use to prepare your GST return.",{hash:{}}):H.call(a,"reportItemWithAppUrl",d,"/reports/gstReport","GST report","Generates GST summary reports and IRD return forms that you can use to prepare your GST return.",{hash:{}});return c+=I(d)+"\n      "}function u(a,b){var c,d,f;c="\n        ";d=a.businessId;d=(f=e.reportItemWithAppUrl)?
f.call(a,d,"/reports/gstLodgement","GST Lodgement","Prepare your GST return and file it online with Inland Revenue.",{hash:{}}):H.call(a,"reportItemWithAppUrl",d,"/reports/gstLodgement","GST Lodgement","Prepare your GST return and file it online with Inland Revenue.",{hash:{}});return c+=I(d)+"\n      "}function v(a,b){var c,d,f;c="\n      ";d=a.businessId;d=(f=e.reportItemWithAppUrl)?f.call(a,d,"/reports/taxablePayments","Taxable payments annual report","Provides information on taxable payments made to suppliers of services in the building and construction industry that are reportable to the ATO.",
{hash:{}}):H.call(a,"reportItemWithAppUrl",d,"/reports/taxablePayments","Taxable payments annual report","Provides information on taxable payments made to suppliers of services in the building and construction industry that are reportable to the ATO.",{hash:{}});return c+=I(d)+"\n    "}function z(a,b){var c,d,f;c="\n    ";d=a.businessId;d=(f=e.reportItemWithAppUrl)?f.call(a,d,"/reports/journals","Journals","Displays a list of all your transactions as journal entries.",{hash:{}}):H.call(a,"reportItemWithAppUrl",
d,"/reports/journals","Journals","Displays a list of all your transactions as journal entries.",{hash:{}});c+=I(d)+"\n    ";d=a.businessId;d=(f=e.reportItemWithAppUrl)?f.call(a,d,"/reports/generalLedgerReportForm","General ledger details","Lists all the transactions that have been applied to an account for a specified period.",{hash:{}}):H.call(a,"reportItemWithAppUrl",d,"/reports/generalLedgerReportForm","General ledger details","Lists all the transactions that have been applied to an account for a specified period.",
{hash:{}});return c+=I(d)+"\n  "}function y(a,b){var c,d,f;c='\n  <br>\n\n  <table class="table banking-reports">\n    <thead>\n    <tr>\n      <th colspan="2" id="bankingReportsHeader">Banking reports</th>\n    </tr>\n    </thead>\n    <tbody>\n\n    ';d=a.businessId;d=(f=e.reportItemWithAppUrl)?f.call(a,d,"/reports/bankingReconciliation","Banking reconciliation","Displays the reconciliation summary for a bank account by taking the account balance, adding outstanding withdrawals, and deducting any outstanding deposits.",
{hash:{}}):H.call(a,"reportItemWithAppUrl",d,"/reports/bankingReconciliation","Banking reconciliation","Displays the reconciliation summary for a bank account by taking the account balance, adding outstanding withdrawals, and deducting any outstanding deposits.",{hash:{}});c+=I(d)+"\n    ";d=a.businessId;d=(f=e.reportItemWithAppUrl)?f.call(a,d,"/reports/bankingTransactions","Banking transactions","Displays deposits and withdrawals for your selected bank or credit card accounts along with a running balance.",
{hash:{}}):H.call(a,"reportItemWithAppUrl",d,"/reports/bankingTransactions","Banking transactions","Displays deposits and withdrawals for your selected bank or credit card accounts along with a running balance.",{hash:{}});return c+=I(d)+"\n\n    </tbody>\n  </table>\n"}function D(a,b){var c,d,f;c='\n  <br>\n\n  <table class="table payroll-reports">\n    <thead>\n    <tr>\n      <th colspan="2" id="payrollReportsHeader">Payroll reports</th>\n    </tr>\n    </thead>\n    <tbody>\n\n    ';(f=e.ifNz)?
d=f.call(a,{hash:{},inverse:E.noop,fn:E.program(28,F,b)}):(d=a.ifNz,d="function"===typeof d?d():d);e.ifNz||(d=O.call(a,d,{hash:{},inverse:E.noop,fn:E.program(28,F,b)}));if(d||0===d)c+=d;c+="\n\n    ";d=a.businessId;d=(f=e.reportItemWithAppUrl)?f.call(a,d,"/reports/pastPayRuns","Past pay runs","Pay run summary report and individual payslips to view, print or email.",{hash:{}}):H.call(a,"reportItemWithAppUrl",d,"/reports/pastPayRuns","Past pay runs","Pay run summary report and individual payslips to view, print or email.",
{hash:{}});c+=I(d)+"\n    ";d=a.businessId;d=(f=e.reportItemWithAppUrl)?f.call(a,d,"/reports/payrollReport","Payroll summary & details","Payroll summary & detailed reports for YTD or a specified period.",{hash:{}}):H.call(a,"reportItemWithAppUrl",d,"/reports/payrollReport","Payroll summary & details","Payroll summary & detailed reports for YTD or a specified period.",{hash:{}});c+=I(d)+"\n\n    ";(f=e.ifAu)?d=f.call(a,{hash:{},inverse:E.noop,fn:E.program(30,w,b)}):(d=a.ifAu,d="function"===typeof d?
d():d);e.ifAu||(d=O.call(a,d,{hash:{},inverse:E.noop,fn:E.program(30,w,b)}));if(d||0===d)c+=d;c+="\n\n    ";(f=e.ifNz)?d=f.call(a,{hash:{},inverse:E.noop,fn:E.program(33,B,b)}):(d=a.ifNz,d="function"===typeof d?d():d);e.ifNz||(d=O.call(a,d,{hash:{},inverse:E.noop,fn:E.program(33,B,b)}));if(d||0===d)c+=d;return c+"\n    </tbody>\n  </table>\n"}function F(a,b){var c,d,f;c="\n      ";d=a.businessId;d=(f=e.reportItemWithAppUrl)?f.call(a,d,"/reports/IRDMonthlyReturns","IRD monthly returns","Employer deductions  <strong>IR345</strong> - Form and payment slip to record and pay deductions.<br />\n      Employer monthly schedule <strong>IR348</strong> - showing employee deductions details.<br />\n      KiwiSaver employee details <strong>KS1</strong> - link to form to record employees automatically enrolled in KiwiSaver.",
{hash:{}}):H.call(a,"reportItemWithAppUrl",d,"/reports/IRDMonthlyReturns","IRD monthly returns","Employer deductions  <strong>IR345</strong> - Form and payment slip to record and pay deductions.<br />\n      Employer monthly schedule <strong>IR348</strong> - showing employee deductions details.<br />\n      KiwiSaver employee details <strong>KS1</strong> - link to form to record employees automatically enrolled in KiwiSaver.",{hash:{}});return c+=I(d)+"\n    "}function w(a,b){var c,d;c="\n      ";
if((d=(d=e.unlessBusinessSetting)?d.call(a,"accountStatus","SUSPENDED",{hash:{},inverse:E.noop,fn:E.program(31,A,b)}):H.call(a,"unlessBusinessSetting","accountStatus","SUSPENDED",{hash:{},inverse:E.noop,fn:E.program(31,A,b)}))||0===d)c+=d;return c+"\n    "}function A(a,b){var c,d,f;c="\n        ";d=a.businessId;d=(f=e.reportItemWithAppUrl)?f.call(a,d,"/paymentSummaryCentre","PAYG payment summaries","Financial year payment summary information that you then copy onto the ATO payment summary stationary.",
{hash:{}}):H.call(a,"reportItemWithAppUrl",d,"/paymentSummaryCentre","PAYG payment summaries","Financial year payment summary information that you then copy onto the ATO payment summary stationary.",{hash:{}});return c+=I(d)+"\n      "}function B(a,b){var c,d,f;c="\n      ";d=a.businessId;d=(f=e.reportItemWithAppUrl)?f.call(a,d,"/reports/leave","Leave","Keep track of your employees\u2019 leave. View available, taken and remaining annual and sick leave balances.",{hash:{}}):H.call(a,"reportItemWithAppUrl",
d,"/reports/leave","Leave","Keep track of your employees\u2019 leave. View available, taken and remaining annual and sick leave balances.",{hash:{}});return c+=I(d)+"\n    "}function C(a,b){var c,d,f;c='\n  <br>\n\n  <table class="table sales-reports">\n    <thead>\n    <tr>\n      <th colspan="2" id="salesReportsHeader">Sales reports</th>\n    </tr>\n    </thead>\n    <tbody>\n\n    ';d=a.businessId;d=(f=e.reportItemWithAppUrl)?f.call(a,d,"/reports/unpaidInvoices","Unpaid invoices","Displays the payments due from each customer, within a range of dates by which they are overdue.",
{hash:{}}):H.call(a,"reportItemWithAppUrl",d,"/reports/unpaidInvoices","Unpaid invoices","Displays the payments due from each customer, within a range of dates by which they are overdue.",{hash:{}});c+=I(d)+"\n    ";d=a.businessId;d=(f=e.reportItemWithAppUrl)?f.call(a,d,"/reports/salesReconciliation","Sales reconciliation","Lists each customer&rsquo;s outstanding invoice amounts and compares the total amount from outstanding invoices with the Receivables account up to a certain date.",{hash:{}}):
H.call(a,"reportItemWithAppUrl",d,"/reports/salesReconciliation","Sales reconciliation","Lists each customer&rsquo;s outstanding invoice amounts and compares the total amount from outstanding invoices with the Receivables account up to a certain date.",{hash:{}});c+=I(d)+"\n    ";d=a.businessId;d=(f=e.reportItemWithAppUrl)?f.call(a,d,"/reports/customerInvoices","Customer invoices","Displays a list of invoices for a certain period and shows the amount, amount due and status for each.",{hash:{}}):H.call(a,
"reportItemWithAppUrl",d,"/reports/customerInvoices","Customer invoices","Displays a list of invoices for a certain period and shows the amount, amount due and status for each.",{hash:{}});c+=I(d)+"\n    ";d=a.businessId;d=(f=e.reportItemWithAppUrl)?f.call(a,d,"/reports/customerPayments","Customer payments","Displays a list of payments for a certain period that were made for invoices.",{hash:{}}):H.call(a,"reportItemWithAppUrl",d,"/reports/customerPayments","Customer payments","Displays a list of payments for a certain period that were made for invoices.",
{hash:{}});c+=I(d)+"\n    ";d=a.businessId;d=(f=e.reportItemWithAppUrl)?f.call(a,d,"/reports/paymentTimeByCustomer","Payment time by customer","Displays the list of fully-paid sales, along with the number of days it took for them to be paid.",{hash:{}}):H.call(a,"reportItemWithAppUrl",d,"/reports/paymentTimeByCustomer","Payment time by customer","Displays the list of fully-paid sales, along with the number of days it took for them to be paid.",{hash:{}});c+=I(d)+"\n    ";d=a.businessId;d=(f=e.reportItemWithAppUrl)?
f.call(a,d,"/reports/salesTransactions","Sales transactions","Displays a list of sales transactions for each customer along with totals.",{hash:{}}):H.call(a,"reportItemWithAppUrl",d,"/reports/salesTransactions","Sales transactions","Displays a list of sales transactions for each customer along with totals.",{hash:{}});c+=I(d)+"\n    ";d=a.businessId;d=(f=e.reportItemWithAppUrl)?f.call(a,d,"/reports/salesByCustomer","Sales by customer","Displays a list of sales transactions for a certain period, organised by customer. You can choose to see a summary or detailed version of this report.",
{hash:{}}):H.call(a,"reportItemWithAppUrl",d,"/reports/salesByCustomer","Sales by customer","Displays a list of sales transactions for a certain period, organised by customer. You can choose to see a summary or detailed version of this report.",{hash:{}});c+=I(d)+"\n    ";d=a.businessId;d=(f=e.reportItemWithAppUrl)?f.call(a,d,"/reports/salesByItem","Sales by item","Displays sales data for each of your items.",{hash:{}}):H.call(a,"reportItemWithAppUrl",d,"/reports/salesByItem","Sales by item","Displays sales data for each of your items.",
{hash:{}});c+=I(d)+"\n    ";d=a.businessId;d=(f=e.reportItemWithAppUrl)?f.call(a,d,"/reports/itemList","Items","Lists details of your items.",{hash:{}}):H.call(a,"reportItemWithAppUrl",d,"/reports/itemList","Items","Lists details of your items.",{hash:{}});return c+=I(d)+"\n\n    </tbody>\n  </table>\n"}function G(a,c){var b,d,f;b='\n  <br>\n\n  <table class="table bills-reports">\n    <thead>\n    <tr>\n      <th colspan="2" id="expenseReportsHeader">Bills reports</th>\n    </tr>\n    </thead>\n    <tbody>\n\n    ';
d=a.businessId;d=(f=e.reportItemWithAppUrl)?f.call(a,d,"/reports/unpaidBills","Unpaid bills","Displays the payments due to each supplier, within a range of dates by which they are overdue.",{hash:{}}):H.call(a,"reportItemWithAppUrl",d,"/reports/unpaidBills","Unpaid bills","Displays the payments due to each supplier, within a range of dates by which they are overdue.",{hash:{}});b+=I(d)+"\n    ";d=a.businessId;d=(f=e.reportItemWithAppUrl)?f.call(a,d,"/reports/billsReconciliation","Bills reconciliation",
"Displays the amounts due to each supplier, and compares the total amount from outstanding bills with the Payables account up to a certain date.",{hash:{}}):H.call(a,"reportItemWithAppUrl",d,"/reports/billsReconciliation","Bills reconciliation","Displays the amounts due to each supplier, and compares the total amount from outstanding bills with the Payables account up to a certain date.",{hash:{}});b+=I(d)+"\n    ";d=a.businessId;d=(f=e.reportItemWithAppUrl)?f.call(a,d,"/reports/bills","Bills","Displays a list of bills for a certain period and shows the amount, amount owing and status for each.",
{hash:{}}):H.call(a,"reportItemWithAppUrl",d,"/reports/bills","Bills","Displays a list of bills for a certain period and shows the amount, amount owing and status for each.",{hash:{}});b+=I(d)+"\n    ";d=a.businessId;d=(f=e.reportItemWithAppUrl)?f.call(a,d,"/reports/supplierPayments","Supplier payments ","Displays a list of bills that were made for expenses in a certain period.",{hash:{}}):H.call(a,"reportItemWithAppUrl",d,"/reports/supplierPayments","Supplier payments ","Displays a list of bills that were made for expenses in a certain period.",
{hash:{}});b+=I(d)+"\n    ";d=a.businessId;d=(f=e.reportItemWithAppUrl)?f.call(a,d,"/reports/billTransactions","Bills transactions ","Displays a list of bill transactions for each supplier along with totals.",{hash:{}}):H.call(a,"reportItemWithAppUrl",d,"/reports/billTransactions","Bills transactions ","Displays a list of bill transactions for each supplier along with totals.",{hash:{}});b+=I(d)+"\n    ";d=a.businessId;d=(f=e.reportItemWithAppUrl)?f.call(a,d,"/reports/billsBySupplier","Bills by supplier",
"Displays a list of bill transactions for a certain period, organised by supplier. You can choose to see a summary or detailed version of this report.",{hash:{}}):H.call(a,"reportItemWithAppUrl",d,"/reports/billsBySupplier","Bills by supplier","Displays a list of bill transactions for a certain period, organised by supplier. You can choose to see a summary or detailed version of this report.",{hash:{}});return b+=I(d)+"\n\n    </tbody>\n  </table>\n"}e=e||b.helpers;b="";var N,H=e.helperMissing,I=
this.escapeExpression,E=this,O=e.blockHelperMissing;c={heading:"Reports"};c=(N=e.includePartial)?N.call(a,"page_heading",{hash:c}):H.call(a,"includePartial","page_heading",{hash:c});b+=I(c)+'\n\n<table class="table business-reports">\n  <thead>\n  <tr>\n    <th colspan="2" id="businessReportsHeader">Business reports</th>\n  </tr>\n  </thead>\n  <tbody>\n  ';if((c=(N=e.ifBusinessHasEntitlement)?N.call(a,"BANKING",{hash:{},inverse:E.program(23,z,d),fn:E.program(1,f,d)}):H.call(a,"ifBusinessHasEntitlement",
"BANKING",{hash:{},inverse:E.program(23,z,d),fn:E.program(1,f,d)}))||0===c)b+=c;b+="\n  </tbody>\n</table>\n\n\n";if((c=(N=e.ifBusinessHasEntitlement)?N.call(a,"BANKING",{hash:{},inverse:E.noop,fn:E.program(25,y,d)}):H.call(a,"ifBusinessHasEntitlement","BANKING",{hash:{},inverse:E.noop,fn:E.program(25,y,d)}))||0===c)b+=c;b+="\n\n";if((c=(N=e.ifBusinessHasEntitlement)?N.call(a,"PAYROLL",{hash:{},inverse:E.noop,fn:E.program(27,D,d)}):H.call(a,"ifBusinessHasEntitlement","PAYROLL",{hash:{},inverse:E.noop,
fn:E.program(27,D,d)}))||0===c)b+=c;b+="\n\n";if((c=(N=e.ifBusinessHasEntitlement)?N.call(a,"INVOICES",{hash:{},inverse:E.noop,fn:E.program(35,C,d)}):H.call(a,"ifBusinessHasEntitlement","INVOICES",{hash:{},inverse:E.noop,fn:E.program(35,C,d)}))||0===c)b+=c;b+="\n\n";if((c=(N=e.ifBusinessHasEntitlement)?N.call(a,"PURCHASES",{hash:{},inverse:E.noop,fn:E.program(37,G,d)}):H.call(a,"ifBusinessHasEntitlement","PURCHASES",{hash:{},inverse:E.noop,fn:E.program(37,G,d)}))||0===c)b+=c;return b+"\n"});return this.HandlebarsTemplates["reports/reports-list"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["reports/sales/customer_invoices_report"]=Handlebars.template(function(b,a,e,c,d){e=e||b.helpers;b="";var f=e.helperMissing,g=this.escapeExpression;c={heading:"Customer invoices report"};c=(d=e.includePartial)?d.call(a,"page_heading",{hash:c}):f.call(a,"includePartial","page_heading",{hash:c});b+=g(c)+'\n<p id="pageContentOverview" class="bottom-buffer">Displays a list of invoices for a certain period and shows the amount, amount due and status for each.</p>\n\n<div class="row">\n  <div class="col-xs-12">\n    <div class="form-horizontal">\n\n      ';
c={inputLabel:"Customer: ",inputName:"cardId",labelCssClass:"col-xs-10",widgetCssClass:"col-xs-14","data-collection":"contacts","data-collection-filter":"customers","data-labels":"name,firstName,\n      lastName","data-name-field":"name","data-value-field":"id","data-default-value":"","data-placeholder":"All"};c=(d=e.TypeaheadDropdown)?d.call(a,{hash:c}):f.call(a,"TypeaheadDropdown",{hash:c});b+=g(c)+'\n\n    </div>\n  </div>\n  <div class="col-xs-12">\n    <div class="form-horizontal">\n      ';
c={inputLabel:"Invoice status: ",inputName:"invoiceStatusList",labelCssClass:"col-xs-10",widgetCssClass:"col-xs-14","data-collection":"statuses","data-name-field":"name","data-value-field":"value"};c=(d=e.Select)?d.call(a,{hash:c}):f.call(a,"Select",{hash:c});b+=g(c)+'\n    </div>\n  </div>\n</div>\n\n<div class="row">\n  <div class="col-xs-12">\n    <div class="form-horizontal">\n      ';c={inputLabel:"Invoice no. from: ",inputName:"orderNumberFrom","data-maxlength":"13",labelCssClass:"col-xs-10",
widgetCssClass:"col-xs-14"};c=(d=e.TextInput)?d.call(a,{hash:c}):f.call(a,"TextInput",{hash:c});b+=g(c)+'\n    </div>\n  </div>\n  <div class="col-xs-12">\n    <div class="form-horizontal">\n      ';c={inputLabel:"To: ",inputName:"orderNumberTo","data-maxlength":"13",labelCssClass:"col-xs-10",widgetCssClass:"col-xs-14"};c=(d=e.TextInput)?d.call(a,{hash:c}):f.call(a,"TextInput",{hash:c});b+=g(c)+'\n    </div>\n  </div>\n</div>\n\n<div class="row">\n  <div class="col-xs-12">\n    <div class="form-horizontal">\n      ';
c={inputLabel:"Date issued: ",inputName:"from",labelCssClass:"col-xs-10",widgetCssClass:"col-xs-10"};c=(d=e.DatePicker)?d.call(a,{hash:c}):f.call(a,"DatePicker",{hash:c});b+=g(c)+'\n    </div>\n  </div>\n  <div class="col-xs-12">\n    <div class="form-horizontal">\n      ';c={inputLabel:"To: ",inputName:"to",labelCssClass:"col-xs-10",widgetCssClass:"col-xs-10"};c=(d=e.DatePicker)?d.call(a,{hash:c}):f.call(a,"DatePicker",{hash:c});b+=g(c)+'\n    </div>\n  </div>\n</div>\n\n<div class="row">\n  <div class="col-xs-12">\n    <div class="form-horizontal">\n      ';
c={inputLabel:"Amount from:",inputName:"fromAmount","data-decimal-places":"2","data-valid-regex":"^[-\\+]?\\d{0,2},?\\d{0,3},?\\d{0,3}(\\.\\d{0,2})?$","data-invalid-regex":"[,\\.]{2}",labelCssClass:"col-xs-10",widgetCssClass:"col-xs-14"};c=(d=e.MoneyInput)?d.call(a,{hash:c}):f.call(a,"MoneyInput",{hash:c});b+=g(c)+'\n    </div>\n  </div>\n  <div class="col-xs-12">\n    <div class="form-horizontal">\n      ';c={inputLabel:"To:",inputName:"toAmount","data-decimal-places":"2","data-valid-regex":"^[-\\+]?\\d{0,2},?\\d{0,3},?\\d{0,3}(\\.\\d{0,2})?$",
"data-invalid-regex":"[,\\.]{2}",labelCssClass:"col-xs-10",widgetCssClass:"col-xs-14"};c=(d=e.MoneyInput)?d.call(a,{hash:c}):f.call(a,"MoneyInput",{hash:c});return b+=g(c)+'\n    </div>\n  </div>\n</div>\n\n<div class="row top-buffer">\n  <div class="col-xs-24 text-right">\n    <button class="btn btn-primary action" id="generateButton">Generate report</button>\n  </div>\n</div>\n'});return this.HandlebarsTemplates["reports/sales/customer_invoices_report"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["reports/sales/customer_payments_report"]=Handlebars.template(function(b,a,e,c,d){e=e||b.helpers;b="";var f=e.helperMissing,g=this.escapeExpression;c={heading:"Take payments report"};c=(d=e.includePartial)?d.call(a,"page_heading",{hash:c}):f.call(a,"includePartial","page_heading",{hash:c});b+=g(c)+'\n<p id="pageContentOverview" class="bottom-buffer">Displays a list of payments for a certain period that were made for invoices.</p>\n\n<div class="row">\n  <div class="col-xs-24">\n    <div class="form-inline bottom-buffer">\n      ';
c={inputLabel:"Customer: ",inputName:"cardId",labelCssClass:"",widgetCssClass:"input-width-xlarge","data-collection":"customers","data-labels":"name,firstName,lastName","data-name-field":"name","data-value-field":"id","data-default-value":"","data-placeholder":"All"};c=(d=e.TypeaheadDropdown)?d.call(a,{hash:c}):f.call(a,"TypeaheadDropdown",{hash:c});b+=g(c)+"\n      ";c={inputLabel:"Payment date from: ",inputName:"from",labelCssClass:"",widgetCssClass:""};c=(d=e.DatePicker)?d.call(a,{hash:c}):f.call(a,
"DatePicker",{hash:c});b+=g(c)+"\n      ";c={inputLabel:"To: ",inputName:"to",labelCssClass:"",widgetCssClass:""};c=(d=e.DatePicker)?d.call(a,{hash:c}):f.call(a,"DatePicker",{hash:c});return b+=g(c)+'\n    </div>\n  </div>\n</div>\n\n<div class="row">\n  <div class="col-xs-24 text-right">\n    <button class="btn btn-primary action" id="generateButton">Generate report</button>\n  </div>\n</div>\n'});return this.HandlebarsTemplates["reports/sales/customer_payments_report"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["reports/sales/item_list_report"]=Handlebars.template(function(b,a,e,c,d){e=e||b.helpers;b="";var f=e.helperMissing,g=this.escapeExpression;c={heading:"Item list report"};c=(d=e.includePartial)?d.call(a,"page_heading",{hash:c}):f.call(a,"includePartial","page_heading",{hash:c});b+=g(c)+'\n<p id="pageContentOverview" class="bottom-buffer">Lists details of your items.</p>\n\n<div class="row">\n  <div class="col-xs-24">\n    <div class="form-inline bottom-buffer">\n      ';
c={name:"isInactive",label:"Show inactive items"};c.checked=a.isInactive;c=(d=e.CheckboxOld)?d.call(a,{hash:c}):f.call(a,"CheckboxOld",{hash:c});return b+=g(c)+'\n      <button class="btn btn-primary action" id="generateButton">Generate report</button>\n    </div>\n  </div>\n</div>\n'});return this.HandlebarsTemplates["reports/sales/item_list_report"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["reports/sales/payment_time_by_customer_report"]=Handlebars.template(function(b,a,e,c,d){e=e||b.helpers;b="";var f=e.helperMissing,g=this.escapeExpression;c={heading:"Payment time by customer report"};c=(d=e.includePartial)?d.call(a,"page_heading",{hash:c}):f.call(a,"includePartial","page_heading",{hash:c});b+=g(c)+'\n<p id="pageContentOverview" class="bottom-buffer">Displays the list of fully-paid sales, along with the number of days it took for them to be paid.</p>\n\n<div class="row">\n  <div class="col-xs-24">\n    <div class="form-inline bottom-buffer">\n      ';
c={inputLabel:"Customer: ",inputName:"cardId",labelCssClass:"",widgetCssClass:"input-width-xlarge","data-collection":"contacts","data-collection-filter":"customers","data-labels":"name,firstName,\n      lastName","data-name-field":"name","data-value-field":"id","data-default-value":"","data-placeholder":"All"};c=(d=e.TypeaheadDropdown)?d.call(a,{hash:c}):f.call(a,"TypeaheadDropdown",{hash:c});b+=g(c)+"\n\n\n      ";c={inputLabel:"Date issued: ",inputName:"from",labelCssClass:"",widgetCssClass:""};
c=(d=e.DatePicker)?d.call(a,{hash:c}):f.call(a,"DatePicker",{hash:c});b+=g(c)+"\n      ";c={inputLabel:"To: ",inputName:"to",labelCssClass:"",widgetCssClass:""};c=(d=e.DatePicker)?d.call(a,{hash:c}):f.call(a,"DatePicker",{hash:c});return b+=g(c)+'\n    </div>\n  </div>\n</div>\n\n<div class="row">\n  <div class="col-xs-24 text-right">\n    <button class="btn btn-primary action" id="generateButton">Generate report</button>\n  </div>\n</div>\n'});return this.HandlebarsTemplates["reports/sales/payment_time_by_customer_report"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["reports/sales/sales_by_customer_report"]=Handlebars.template(function(b,a,e,c,d){e=e||b.helpers;b="";var f;d=e.helperMissing;var g=this.escapeExpression;c={heading:"Sales by customer report"};c=(f=e.includePartial)?f.call(a,"page_heading",{hash:c}):d.call(a,"includePartial","page_heading",{hash:c});b+=g(c)+'\n<p id="pageContentOverview" class="bottom-buffer">Displays a list of sales transactions for a certain period, organised by customer. You can choose to see a summary or detailed version of this report.</p>\n\n<div class="row">\n  <div class="col-xs-12">\n    <div class="form-horizontal">\n      ';
c={inputLabel:"Customer: ",inputName:"cardId",labelCssClass:"col-xs-10",widgetCssClass:"col-xs-14","data-collection":"contacts","data-collection-filter":"customers","data-labels":"name,firstName,\n      lastName","data-name-field":"name","data-value-field":"id","data-default-value":"","data-placeholder":"All"};c=(f=e.TypeaheadDropdown)?f.call(a,{hash:c}):d.call(a,"TypeaheadDropdown",{hash:c});b+=g(c)+'\n\n    </div>\n  </div>\n  <div class="col-xs-12">\n    <div class="form-horizontal">\n      ';
c={inputLabel:"Invoice status: ",inputName:"invoiceStatusList",labelCssClass:"col-xs-10",widgetCssClass:"col-xs-14","data-collection":"statuses","data-name-field":"name","data-value-field":"value"};c=(f=e.Select)?f.call(a,{hash:c}):d.call(a,"Select",{hash:c});b+=g(c)+'\n    </div>\n  </div>\n</div>\n\n<div class="row">\n  <div class="col-xs-12">\n    <div class="form-horizontal">\n      ';c={inputLabel:"Invoice no. from: ",inputName:"orderNumberFrom","data-maxlength":"13",labelCssClass:"col-xs-10",
widgetCssClass:"col-xs-14"};c=(f=e.TextInput)?f.call(a,{hash:c}):d.call(a,"TextInput",{hash:c});b+=g(c)+'\n    </div>\n  </div>\n  <div class="col-xs-12">\n    <div class="form-horizontal">\n      ';c={inputLabel:"To: ",inputName:"orderNumberTo","data-maxlength":"13",labelCssClass:"col-xs-10",widgetCssClass:"col-xs-14"};c=(f=e.TextInput)?f.call(a,{hash:c}):d.call(a,"TextInput",{hash:c});b+=g(c)+'\n    </div>\n  </div>\n</div>\n\n<div class="row">\n  <div class="col-xs-12">\n    <div class="form-horizontal">\n      ';
c={inputLabel:"Date issued: ",inputName:"from",labelCssClass:"col-xs-10",widgetCssClass:"col-xs-10"};c=(f=e.DatePicker)?f.call(a,{hash:c}):d.call(a,"DatePicker",{hash:c});b+=g(c)+'\n    </div>\n  </div>\n  <div class="col-xs-12">\n    <div class="form-horizontal">\n      ';c={inputLabel:"To: ",inputName:"to",labelCssClass:"col-xs-10",widgetCssClass:"col-xs-10"};c=(f=e.DatePicker)?f.call(a,{hash:c}):d.call(a,"DatePicker",{hash:c});b+=g(c)+'\n    </div>\n  </div>\n</div>\n\n<div class="row">\n  <div class="col-xs-12">\n    <div class="form-horizontal">\n      ';
c={inputLabel:"Amount from:",inputName:"fromAmount","data-decimal-places":"2","data-valid-regex":"^[-\\+]?\\d{0,2},?\\d{0,3},?\\d{0,3}(\\.\\d{0,2})?$","data-invalid-regex":"[,\\.]{2}",labelCssClass:"col-xs-10",widgetCssClass:"col-xs-14"};c=(f=e.MoneyInput)?f.call(a,{hash:c}):d.call(a,"MoneyInput",{hash:c});b+=g(c)+'\n    </div>\n  </div>\n  <div class="col-xs-12">\n    <div class="form-horizontal">\n      ';c={inputLabel:"To:",inputName:"toAmount","data-decimal-places":"2","data-valid-regex":"^[-\\+]?\\d{0,2},?\\d{0,3},?\\d{0,3}(\\.\\d{0,2})?$",
"data-invalid-regex":"[,\\.]{2}",labelCssClass:"col-xs-10",widgetCssClass:"col-xs-14"};c=(f=e.MoneyInput)?f.call(a,{hash:c}):d.call(a,"MoneyInput",{hash:c});b+=g(c)+'\n    </div>\n  </div>\n</div>\n<div class="row">\n  <div class="col-xs-12">\n    <div class="form-horizontal">\n      <div class="form-group">\n        <label class="col-xs-10 control-label">Display:</label>\n        <div class="col-xs-14">\n          ';c={name:"isItemDetailIncluded",cssClass:"",label:"Item detail"};f=a.isItemDetailIncluded;
c.checked=f;c=(f=e.CheckboxOld)?f.call(a,{hash:c}):d.call(a,"CheckboxOld",{hash:c});b+=g(c)+"\n          ";c={name:"isSubTotalByItem",cssClass:"",label:"Subtotal by invoice"};f=a.isSubTotalByItem;c.checked=f;c=(f=e.CheckboxOld)?f.call(a,{hash:c}):d.call(a,"CheckboxOld",{hash:c});return b+=g(c)+'\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n\n<div class="row top-buffer">\n  <div class="col-xs-24 text-right">\n    <button class="btn btn-primary action" id="generateButton">Generate report</button>\n  </div>\n</div>\n'});
return this.HandlebarsTemplates["reports/sales/sales_by_customer_report"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["reports/sales/sales_by_item_report"]=Handlebars.template(function(b,a,e,c,d){e=e||b.helpers;b="";var f;d=e.helperMissing;var g=this.escapeExpression;c={heading:"Sales by item report"};c=(f=e.includePartial)?f.call(a,"page_heading",{hash:c}):d.call(a,"includePartial","page_heading",{hash:c});b+=g(c)+'\n<p id="pageContentOverview" class="bottom-buffer">Displays sales data for each of your items.</p>\n\n<div class="row">\n  <div class="col-xs-12">\n    <div class="form-horizontal">\n      ';c=
{inputLabel:"Item: ",inputName:"itemId",labelCssClass:"col-xs-10",widgetCssClass:"col-xs-14","data-collection":"items","data-collection-filter":"saleItems","data-name-field":"name","data-value-field":"number","data-default-name":"All","data-default-value":""};c=(f=e.Select)?f.call(a,{hash:c}):d.call(a,"Select",{hash:c});b+=g(c)+'\n    </div>\n  </div>\n  <div class="col-xs-12">\n    <div class="form-horizontal">\n      ';c={inputLabel:"Sales status: ",inputName:"invoiceStatusList",labelCssClass:"col-xs-10",
widgetCssClass:"col-xs-14","data-collection":"statuses","data-name-field":"name","data-value-field":"value"};c=(f=e.Select)?f.call(a,{hash:c}):d.call(a,"Select",{hash:c});b+=g(c)+'\n    </div>\n  </div>\n</div>\n\n<div class="row">\n  <div class="col-xs-12">\n    <div class="form-horizontal">\n      ';c={inputLabel:"Invoice no. from: ",inputName:"orderNumberFrom","data-maxlength":"13",labelCssClass:"col-xs-10",widgetCssClass:"col-xs-14"};c=(f=e.TextInput)?f.call(a,{hash:c}):d.call(a,"TextInput",{hash:c});
b+=g(c)+'\n    </div>\n  </div>\n  <div class="col-xs-12">\n    <div class="form-horizontal">\n      ';c={inputLabel:"To: ",inputName:"orderNumberTo","data-maxlength":"13",labelCssClass:"col-xs-10",widgetCssClass:"col-xs-14"};c=(f=e.TextInput)?f.call(a,{hash:c}):d.call(a,"TextInput",{hash:c});b+=g(c)+'\n    </div>\n  </div>\n</div>\n\n<div class="row">\n  <div class="col-xs-12">\n    <div class="form-horizontal">\n      ';c={inputLabel:"Date issued: ",inputName:"from",labelCssClass:"col-xs-10",widgetCssClass:"col-xs-10"};
c=(f=e.DatePicker)?f.call(a,{hash:c}):d.call(a,"DatePicker",{hash:c});b+=g(c)+'\n    </div>\n  </div>\n  <div class="col-xs-12">\n    <div class="form-horizontal">\n      ';c={inputLabel:"To: ",inputName:"to",labelCssClass:"col-xs-10",widgetCssClass:"col-xs-10"};c=(f=e.DatePicker)?f.call(a,{hash:c}):d.call(a,"DatePicker",{hash:c});b+=g(c)+'\n    </div>\n  </div>\n</div>\n\n<div class="row">\n  <div class="col-xs-12">\n    <div class="form-horizontal">\n      ';c={inputLabel:"Amount from:",inputName:"fromAmount",
"data-decimal-places":"2","data-valid-regex":"^[-\\+]?\\d{0,2},?\\d{0,3},?\\d{0,3}(\\.\\d{0,2})?$","data-invalid-regex":"[,\\.]{2}",labelCssClass:"col-xs-10",widgetCssClass:"col-xs-14"};c=(f=e.MoneyInput)?f.call(a,{hash:c}):d.call(a,"MoneyInput",{hash:c});b+=g(c)+'\n    </div>\n  </div>\n  <div class="col-xs-12">\n    <div class="form-horizontal">\n      ';c={inputLabel:"To:",inputName:"toAmount","data-decimal-places":"2","data-valid-regex":"^[-\\+]?\\d{0,2},?\\d{0,3},?\\d{0,3}(\\.\\d{0,2})?$","data-invalid-regex":"[,\\.]{2}",
labelCssClass:"col-xs-10",widgetCssClass:"col-xs-14"};c=(f=e.MoneyInput)?f.call(a,{hash:c}):d.call(a,"MoneyInput",{hash:c});b+=g(c)+'\n    </div>\n  </div>\n</div>\n<div class="row">\n  <div class="col-xs-12">\n    <div class="form-horizontal">\n      <div class="form-group">\n        <label class="col-xs-10 control-label">Display:</label>\n        <div class="col-xs-14">\n          ';c={name:"isCustomerDetailIncluded",cssClass:"",label:"Customer detail"};f=a.isCustomerDetailIncluded;c.checked=f;
c=(f=e.CheckboxOld)?f.call(a,{hash:c}):d.call(a,"CheckboxOld",{hash:c});b+=g(c)+"\n          ";c={name:"isSubTotalByCustomer",cssClass:"",label:"Subtotal by Customer"};f=a.isSubTotalByCustomer;c.checked=f;c=(f=e.CheckboxOld)?f.call(a,{hash:c}):d.call(a,"CheckboxOld",{hash:c});return b+=g(c)+'\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n\n<div class="row top-buffer">\n  <div class="col-xs-24 text-right">\n    <button class="btn btn-primary action" id="generateButton">Generate report</button>\n  </div>\n</div>\n'});
return this.HandlebarsTemplates["reports/sales/sales_by_item_report"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["reports/sales/sales_reconciliation_report"]=Handlebars.template(function(b,a,e,c,d){e=e||b.helpers;b="";var f=e.helperMissing,g=this.escapeExpression;c={heading:"Sales reconciliation"};c=(d=e.includePartial)?d.call(a,"page_heading",{hash:c}):f.call(a,"includePartial","page_heading",{hash:c});b+=g(c)+'\n<p id="pageContentOverview" class="bottom-buffer">Lists each customer\'s outstanding invoice amounts and compares the total amount from outstanding invoices with the Receivables account up to a certain date.</p>\n\n<div class="row">\n  <div class="col-xs-24">\n    <div class="form-inline bottom-buffer">\n      ';c=
{inputLabel:"As of date: ",inputName:"date",labelCssClass:"",widgetCssClass:""};c=(d=e.DatePicker)?d.call(a,{hash:c}):f.call(a,"DatePicker",{hash:c});return b+=g(c)+'\n      <button class="btn btn-primary action" id="generateButton">Generate report</button>\n    </div>\n  </div>\n</div>\n'});return this.HandlebarsTemplates["reports/sales/sales_reconciliation_report"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["reports/sales/sales_transactions_report"]=Handlebars.template(function(b,a,e,c,d){e=e||b.helpers;b="";var f=e.helperMissing,g=this.escapeExpression;c={heading:"Sales transactions report"};c=(d=e.includePartial)?d.call(a,"page_heading",{hash:c}):f.call(a,"includePartial","page_heading",{hash:c});b+=g(c)+'\n<p id="pageContentOverview" class="bottom-buffer">Displays a list of sales transactions for each customer along with totals.</p>\n\n<div class="row">\n  <div class="col-xs-24">\n    <div class="form-inline bottom-buffer">\n      ';
c={inputLabel:"Customer: ",inputName:"cardId",labelCssClass:"",widgetCssClass:"input-width-xlarge","data-collection":"customers","data-labels":"name,firstName,lastName","data-name-field":"name","data-value-field":"id","data-default-value":"","data-placeholder":"All"};c=(d=e.TypeaheadDropdown)?d.call(a,{hash:c}):f.call(a,"TypeaheadDropdown",{hash:c});b+=g(c)+"\n      ";c={inputLabel:"Date issued: ",inputName:"from",labelCssClass:"",widgetCssClass:""};c=(d=e.DatePicker)?d.call(a,{hash:c}):f.call(a,
"DatePicker",{hash:c});b+=g(c)+"\n      ";c={inputLabel:"To: ",inputName:"to",labelCssClass:"",widgetCssClass:""};c=(d=e.DatePicker)?d.call(a,{hash:c}):f.call(a,"DatePicker",{hash:c});return b+=g(c)+'\n    </div>\n  </div>\n</div>\n\n<div class="row">\n  <div class="col-xs-24 text-right">\n    <button class="btn btn-primary action" id="generateButton">Generate report</button>\n  </div>\n</div>\n'});return this.HandlebarsTemplates["reports/sales/sales_transactions_report"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["reports/sales/unpaid_invoices_report"]=Handlebars.template(function(b,a,e,c,d){e=e||b.helpers;b="";var f=e.helperMissing,g=this.escapeExpression;c={heading:"Unpaid invoices report"};c=(d=e.includePartial)?d.call(a,"page_heading",{hash:c}):f.call(a,"includePartial","page_heading",{hash:c});b+=g(c)+'\n<p id="pageContentOverview" class="bottom-buffer">Displays the payments due from each customer, within a range of dates by which they are overdue.</p>\n\n<div class="row">\n  <div class="col-xs-24">\n    <div class="form-inline bottom-buffer">\n      ';
c={inputLabel:"Customer: ",inputName:"cardId",labelCssClass:"",widgetCssClass:"input-width-xlarge","data-collection":"customers","data-labels":"name,firstName,lastName","data-name-field":"name","data-value-field":"id","data-default-value":"","data-placeholder":"All"};c=(d=e.TypeaheadDropdown)?d.call(a,{hash:c}):f.call(a,"TypeaheadDropdown",{hash:c});b+=g(c)+"\n      ";c={inputLabel:"As of date: ",inputName:"asOfDate",labelCssClass:"",widgetCssClass:""};c=(d=e.DatePicker)?d.call(a,{hash:c}):f.call(a,
"DatePicker",{hash:c});return b+=g(c)+'\n      <button class="btn btn-primary action" id="generateButton">Generate report</button>\n    </div>\n  </div>\n</div>\n'});return this.HandlebarsTemplates["reports/sales/unpaid_invoices_report"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["settings/account/import"]=Handlebars.template(function(b,a,e,c,d){function f(a,b){var c,d;c='\n      <div class="top-buffer-sm">\n        <button id="expand-imported-button" class=\'btn btn-default collapsed\' data-toggle="collapse"\n                data-target="#imported-accounts-container">\n          <span class="show-button-label">Show accounts</span>\n          <span class="hide-button-label">Hide accounts</span>\n        </button>\n      </div>\n\n      <div id="imported-accounts-container" class="collapse">\n\n        <table class="table-alt top-buffer">\n          <thead>\n          <tr>\n            <th>Account number</th>\n            <th>Account name</th>\n            <th>Account type</th>\n            <th>Original tax rate</th>\n          </tr>\n          </thead>\n          <tbody class="tbody">\n          ';d=
a.preview;d=null==d||!1===d?d:d.imported;if((d=e.each.call(a,d,{hash:{},inverse:u.noop,fn:u.program(3,g,b)}))||0===d)c+=d;c+="\n          ";d=a.preview;d=null==d||!1===d?d:d.importedWithWarnings;if((d=e.each.call(a,d,{hash:{},inverse:u.noop,fn:u.program(5,h,b)}))||0===d)c+=d;return c+"</tbody>\n        </table>\n\n      </div>\n    "}function g(a,c){var b,d;b="\n            <tr>\n              <td>";d=a.accountNumber;d="function"===typeof d?d():d;b+=r(d)+"</td>\n              <td>";d=a.accountName;
d="function"===typeof d?d():d;b+=r(d)+"</td>\n              <td>";d=a.accountType;d="function"===typeof d?d():d;b+=r(d)+"</td>\n              <td>";d=a.taxCode;d="function"===typeof d?d():d;return b+=r(d)+"</td>\n            </tr>\n          "}function h(a,b){var c,d;c="\n            <tr>\n              <td>";d=a.accountNumber;d="function"===typeof d?d():d;c+=r(d)+"</td>\n              <td>";d=a.accountName;d="function"===typeof d?d():d;c+=r(d)+"</td>\n              <td>";d=a.accountType;d="function"===
typeof d?d():d;c+=r(d)+"</td>\n              <td>";d=a.taxCode;d="function"===typeof d?d():d;return c+=r(d)+"</td>\n            </tr>\n          "}function l(a,c){var b,d;b='\n      <h3 id="unsupported-tax-codes-warning">\n        <i class="icon-failure-2"></i> ';d=a.preview;d=null==d||!1===d?d:d.importedWithWarnings;d=null==d||!1===d?d:d.length;d="function"===typeof d?d():d;b+=r(d)+" accounts have unsupported tax codes\n      </h3>\n      ";(d=e.ifAu)?d=d.call(a,{hash:{},inverse:u.program(10,m,c),
fn:u.program(8,k,c)}):(d=a.ifAu,d="function"===typeof d?d():d);e.ifAu||(d=v.call(a,d,{hash:{},inverse:u.program(10,m,c),fn:u.program(8,k,c)}));if(d||0===d)b+=d;b+='\n\n      <div class="top-buffer-sm">\n        <button id="expand-unsupported-tax-codes-button" class=\'btn btn-default collapsed\' data-toggle="collapse"\n                data-target="#unsupported-tax-codes-container">\n          <span class="show-button-label">Show accounts</span>\n          <span class="hide-button-label">Hide accounts</span>\n        </button>\n      </div>\n\n      <div id="unsupported-tax-codes-container" class="collapse">\n\n        <table class="table-alt top-buffer">\n          <thead>\n          <tr>\n            <th>Account number</th>\n            <th>Account name</th>\n            <th>Account type</th>\n            <th>Original tax rate</th>\n          </tr>\n          </thead>\n          <tbody class="tbody">\n          ';
d=a.preview;d=null==d||!1===d?d:d.importedWithWarnings;if((d=e.each.call(a,d,{hash:{},inverse:u.noop,fn:u.program(12,n,c)}))||0===d)b+=d;return b+"</tbody>\n        </table>\n\n      </div>\n    "}function k(a,b){return"\n        <small>These accounts will be assigned the NTR code. You can change this later.</small>\n      "}function m(a,b){return"\n        <small>These accounts will be assigned the Z code. You can change this later.</small>\n      "}function n(a,b){var c,d;c="\n            <tr>\n              <td>";
d=a.accountNumber;d="function"===typeof d?d():d;c+=r(d)+"</td>\n              <td>";d=a.accountName;d="function"===typeof d?d():d;c+=r(d)+"</td>\n              <td>";d=a.accountType;d="function"===typeof d?d():d;c+=r(d)+"</td>\n              <td>";d=a.taxCode;d="function"===typeof d?d():d;return c+=r(d)+"</td>\n            </tr>\n          "}function q(a,c){var b,d;b='\n      <h3 id="not-imported-count">';d=a.preview;d=null==d||!1===d?d:d.notImported;d=null==d||!1===d?d:d.length;d="function"===typeof d?
d():d;b+=r(d)+' accounts can\'t be imported</h3>\n      <small>You can\u2019t import header accounts or replace system accounts or accounts used in transactions.</small>\n\n      <div class="top-buffer-sm">\n        <button id="expand-not-imported-button" class=\'btn btn-default collapsed\' data-toggle="collapse"\n                data-target="#not-imported-accounts-container">\n          <span class="show-button-label">Show accounts</span>\n          <span class="hide-button-label">Hide accounts</span>\n        </button>\n      </div>\n\n      <div id="not-imported-accounts-container" class="collapse">\n\n        <table class="table-alt top-buffer">\n          <thead>\n          <tr>\n            <th>Account number</th>\n            <th>Account name</th>\n            <th>Account type</th>\n            <th>Issue</th>\n          </tr>\n          </thead>\n          <tbody class="tbody">\n          ';
d=a.preview;d=null==d||!1===d?d:d.notImported;if((d=e.each.call(a,d,{hash:{},inverse:u.noop,fn:u.program(15,p,c)}))||0===d)b+=d;return b+"</tbody>\n        </table>\n\n      </div>\n\n    </div>\n    "}function p(a,c){var b,d;b="\n            <tr>\n              <td>";d=a.accountNumber;d="function"===typeof d?d():d;b+=r(d)+"</td>\n              <td>";d=a.accountName;d="function"===typeof d?d():d;b+=r(d)+"</td>\n              <td>";d=a.accountType;d="function"===typeof d?d():d;b+=r(d)+"</td>\n              <td>";
d=a.validationMessages;if((d=e.each.call(a,d,{hash:{},inverse:u.noop,fn:u.program(16,t,c)}))||0===d)b+=d;return b+"\n              </td>\n            </tr>\n          "}function t(a,b){var c;c="\n                <p>";a="function"===typeof a?a():a;return c+=r(a)+"</p>\n              "}e=e||b.helpers;var r=this.escapeExpression,u=this,v=e.blockHelperMissing,z=e.helperMissing;b='<div id="account-list-import">\n\n  <h2>Import an account list</h2>\n  <hr>\n  <div class="row">\n\n    <div class="col-xs-2">\n      <i class="icon-documents fa-5x"></i>\n    </div>\n    <div class="col-xs-14">\n      <p>You can replace the default accounts list with one imported from MYOB AccountRight. The imported list must be a text file (.TXT)\n        with a comma or tab separated format.</p>\n\n      <p><strong>Things to note:</strong> You can\u2019t replace system accounts (those marked with a padlock) or accounts that have been used in\n        transactions. These accounts will remain unchanged. Also, you can\u2019t import AccountRight header accounts and some tax codes (such as\n        WET).</p>\n\n      <p>Learn about <a href="http://help.myob.com/wiki/x/OIB2" target="_blank">importing accounts</a>.</p>\n    </div>\n\n  </div>\n\n  ';
c=a.preview;if((c=e["if"].call(a,c,{hash:{},inverse:u.program(18,function(a,b){var c,d,f;c='\n\n    <hr>\n\n    <div class="loadingSpinner"></div>\n\n    <div class="pull-right">\n      <a id="cancel" href="';d=a.businessId;d=(f=e.appUrl)?f.call(a,d,"/settings/accounts",{hash:{}}):z.call(a,"appUrl",d,"/settings/accounts",{hash:{}});return c+=r(d)+'" class="right-buffer-sm">Cancel</a>\n    <span class="btn btn-primary btn-file">\n      Upload list of accounts <input id="attach-file-button" type="file" accept="text/plain,text/tab-separated-values,text/csv">\n    </span>\n    </div>\n\n  '},
d),fn:u.program(1,function(a,b){var c,d,g;c='\n\n  <div id="account-import-preview" class="top-buffer-lg">\n\n    <p>Account list to import: \'';(g=e.fileName)?d=g.call(a,{hash:{}}):(d=a.fileName,d="function"===typeof d?d():d);c+=r(d)+'\'</p>\n\n    <hr class="no-top-padding">\n\n    <h3 id="imported-count">';(g=e.totalImported)?d=g.call(a,{hash:{}}):(d=a.totalImported,d="function"===typeof d?d():d);c+=r(d)+" accounts will be imported</h3>\n\n    ";d=a.totalImported;if((d=(g=e.ifGreater)?g.call(a,
d,0,{hash:{},inverse:u.noop,fn:u.program(2,f,b)}):z.call(a,"ifGreater",d,0,{hash:{},inverse:u.noop,fn:u.program(2,f,b)}))||0===d)c+=d;c+="\n\n    ";d=a.preview;d=null==d||!1===d?d:d.importedWithWarnings;d=null==d||!1===d?d:d.length;if((d=(g=e.ifGreater)?g.call(a,d,0,{hash:{},inverse:u.noop,fn:u.program(7,l,b)}):z.call(a,"ifGreater",d,0,{hash:{},inverse:u.noop,fn:u.program(7,l,b)}))||0===d)c+=d;c+="\n\n    ";d=a.preview;d=null==d||!1===d?d:d.notImported;d=null==d||!1===d?d:d.length;if((d=(g=e.ifGreater)?
g.call(a,d,0,{hash:{},inverse:u.noop,fn:u.program(14,q,b)}):z.call(a,"ifGreater",d,0,{hash:{},inverse:u.noop,fn:u.program(14,q,b)}))||0===d)c+=d;return c+'\n\n    <hr>\n\n    <div class="pull-right">\n      <a id="cancel-upload-button" class="right-buffer-sm">Cancel</a>\n      <button id="import-accounts-button" class="btn btn-primary">\n        Continue\n      </button>\n    </div>\n\n  '},d)}))||0===c)b+=c;return b+"\n\n</div>\n"});return this.HandlebarsTemplates["settings/account/import"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["settings/account/list_iframe_container"]=Handlebars.template(function(b,a,e,c,d){function f(a,c){var b,d;b='\n              <div class="col-xs-8">\n                <h3>';(d=e.importedWithWarningsCount)?d=d.call(a,{hash:{}}):(d=a.importedWithWarningsCount,d="function"===typeof d?d():d);return b+=h(d)+'</h3>\n\n                <p class="number-description">accounts imported with updated tax codes</p>\n              </div>\n            '}
function g(a,c){var b,d;b='\n              <div class="col-xs-8">\n                <h3>';(d=e.notImportedCount)?d=d.call(a,{hash:{}}):(d=a.notImportedCount,d="function"===typeof d?d():d);return b+=h(d)+'</h3>\n\n                <p class="number-description">accounts not imported</p>\n              </div>\n            '}e=e||b.helpers;var h=this.escapeExpression,l=this,k=e.helperMissing;b='<div class="row">\n  <div class="col-xs-24">\n    <div id="onboarding-navigation-container" class="banner banner-blue"></div>\n  </div>\n</div>\n\n';
c=a.importSuccess;if((c=e["if"].call(a,c,{hash:{},inverse:l.noop,fn:l.program(1,function(a,c){var b,d,t;b='\n  <div class="row">\n    <div class="col-xs-20">\n      <div id="import-succeeded-panel" class="panel panel-gray top-buffer collapse in">\n        <div class="content bottom-buffer-sm">\n          <a id="import-succeeded-panel-close" class="close noticeboardClose" data-toggle="collapse"\n             data-target="#import-succeeded-panel">\n            <i class="fa fa-times-circle"></i>\n          </a>\n\n          <div class="row">\n            <div class="col-xs-2 top-buffer text-center">\n              <i class="icon-success-large fa-4x"></i>\n            </div>\n            <div class="col-xs-20">\n              <h1>Import successful</h1>\n\n              <p>Your accounts list has been imported and replaced the MYOB Essentials list (except for system accounts). Here\u2019s a\n                summary:</p>\n            </div>\n          </div>\n\n          <div class="row">\n            <div class="col-xs-4 col-xs-offset-2">\n              <h3>';
(t=e.importedCount)?d=t.call(a,{hash:{}}):(d=a.importedCount,d="function"===typeof d?d():d);b+=h(d)+'</h3>\n\n              <p class="number-description">accounts imported</p>\n            </div>\n\n            ';d=a.importedWithWarningsCount;if((d=(t=e.ifGreater)?t.call(a,d,0,{hash:{},inverse:l.noop,fn:l.program(2,f,c)}):k.call(a,"ifGreater",d,0,{hash:{},inverse:l.noop,fn:l.program(2,f,c)}))||0===d)b+=d;b+="\n            ";d=a.notImportedCount;if((d=(t=e.ifGreater)?t.call(a,d,0,{hash:{},inverse:l.noop,
fn:l.program(4,g,c)}):k.call(a,"ifGreater",d,0,{hash:{},inverse:l.noop,fn:l.program(4,g,c)}))||0===d)b+=d;return b+"\n\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n"},d)}))||0===c)b+=c;b+='\n<div class="loadingSpinner"></div>\n<div class="frame-container">\n  <iframe id="';(d=e.id)?c=d.call(a,{hash:{}}):(c=a.id,c="function"===typeof c?c():c);b+=h(c)+'" frameborder="no" scrolling="no" width="100%" height="100%" src="';(d=e.url)?c=d.call(a,{hash:{}}):(c=a.url,c="function"===
typeof c?c():c);return b+=h(c)+'"></iframe>\n</div>\n<div class="frame-overlay"></div>\n'});return this.HandlebarsTemplates["settings/account/list_iframe_container"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["settings/bank_feed_application_header"]=Handlebars.template(function(b,a,e,c,d){return'<tr>\n  <th data-field="financialInstitution">Bank</th>\n  <th class="account-number-column" data-field="accountNumber">Account number</th>\n  <th class="account-name-column" data-field="accountName">Account name</th>\n  <th class="linked-account-column" data-field="linkedChartAccount">Linked account</th>\n  <th data-field="statusDescription">Status</th>\n  <th class="application-date-column" data-field="applicationDate">Applied on</th>\n  <th colspan="2">&nbsp;</th>\n</tr>\n'});return this.HandlebarsTemplates["settings/bank_feed_application_header"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["settings/bank_feed_application_row"]=Handlebars.template(function(b,a,e,c,d){function f(a,b){var c,d;c='\n      <a href="';(d=e.adiFormLink)?d=d.call(a,{hash:{}}):(d=a.adiFormLink,d="function"===typeof d?d():d);return c+=h(d)+'" title="Print" class="print-button" target="_blank"><i class="fa fa-print fa-2x pull-right"></i></a>\n  '}e=e||b.helpers;var g,h=this.escapeExpression,l=e.helperMissing;b="<td>";(g=
e.financialInstitution)?c=g.call(a,{hash:{}}):(c=a.financialInstitution,c="function"===typeof c?c():c);b+=h(c)+"\n  ";c=a.completeOnline;if((c=e["if"].call(a,c,{hash:{},inverse:this.noop,fn:this.program(1,function(a,b){var c,d;c="\n      <br />(Ref ";(d=e.referenceNumber)?d=d.call(a,{hash:{}}):(d=a.referenceNumber,d="function"===typeof d?d():d);return c+=h(d)+")\n  "},d)}))||0===c)b+=c;b+="\n</td>\n<td>";(g=e.formattedAccountNumber)?c=g.call(a,{hash:{}}):(c=a.formattedAccountNumber,c="function"===
typeof c?c():c);b+=h(c)+"</td>\n<td>";(g=e.accountName)?c=g.call(a,{hash:{}}):(c=a.accountName,c="function"===typeof c?c():c);b+=h(c)+"</td>\n\n<td>\n";c=a.linkedChartAccount;if((c=e["if"].call(a,c,{hash:{},inverse:this.program(5,function(a,c){var b,d,f;b="\n  ";d={inputName:"account",labelCssClass:"",widgetCssClass:"","data-collection":"accounts","data-group-by":"type","data-name-field":"number,name","data-value-field":"id","data-sorted":"true","data-default-value":"-1","data-default-name":"Select account"};
d=(f=e.SelectGrouped)?f.call(a,{hash:d}):l.call(a,"SelectGrouped",{hash:d});return b+=h(d)+"\n"},d),fn:this.program(3,function(a,b){var c,d,f;c="\n  ";d={inputName:"account",labelCssClass:"",widgetCssClass:"","data-collection":"accounts","data-group-by":"type","data-name-field":"number,name","data-value-field":"id","data-sorted":"true"};d=(f=e.SelectGrouped)?f.call(a,{hash:d}):l.call(a,"SelectGrouped",{hash:d});return c+=h(d)+"\n  </td>\n"},d)}))||0===c)b+=c;b+="\n</td>\n\n<td>";(g=e.statusDescription)?
c=g.call(a,{hash:{}}):(c=a.statusDescription,c="function"===typeof c?c():c);b+=h(c)+"</td>\n<td>";c=a.applicationDate;c=(g=e.frontendDateFormat)?g.call(a,c,{hash:{}}):l.call(a,"frontendDateFormat",c,{hash:{}});b+=h(c)+'</td>\n<td class="action-column">\n  ';c=a.adiFormLink;if((c=(g=e.unlessBlank)?g.call(a,c,{hash:{},inverse:this.noop,fn:this.program(7,f,d)}):l.call(a,"unlessBlank",c,{hash:{},inverse:this.noop,fn:this.program(7,f,d)}))||0===c)b+=c;return b+'\n</td>\n<td class="action-column">\n    <span title="Cancel" class="cancel-button"><i class="fa fa-times-circle fa-2x"></i></span>\n</td>\n'});
return this.HandlebarsTemplates["settings/bank_feed_application_row"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["settings/bank_feed_applications"]=Handlebars.template(function(b,a,e,c,d){function f(a,c){return'\n    <button id="setupButton" class="btn btn-primary action">Add bank feed</button>\n  '}e=e||b.helpers;var g=e.helperMissing;b='<div class="row">\n  <div class="col-xs-24">\n    <div id="onboarding-navigation-container" class="banner banner-blue"></div>\n  </div>\n</div>\n\n<div class="loadingSpinner"></div>\n\n<div id="bank-feed-applications">\n\n  ';c=
{heading:"Manage bank feeds"};if((c=(e=e.pageHeading)?e.call(a,{hash:c,inverse:this.noop,fn:this.program(1,f,d)}):g.call(a,"pageHeading",{hash:c,inverse:this.noop,fn:this.program(1,f,d)}))||0===c)b+=c;return b+'\n\n  <hr/>\n    <div id="table"></div>\n  </div>\n</div>\n'});return this.HandlebarsTemplates["settings/bank_feed_applications"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["settings/bank_feed_cancellation_confirmation"]=Handlebars.template(function(b,a,e,c,d){e=e||b.helpers;c=this.escapeExpression;b='<p class="dialog-message">This will permanently stop your bank feed for:</p>\n<p class="dialog-message">\n<div>Account number: ';(d=e.accountNumber)?d=d.call(a,{hash:{}}):(d=a.accountNumber,d="function"===typeof d?d():d);b+=c(d)+"</div>\n<div>Financial institution: ";(d=e.financialInstitution)?
d=d.call(a,{hash:{}}):(d=a.financialInstitution,d="function"===typeof d?d():d);return b+=c(d)+'</div>\n</p>\n<p class="dialog-message">If you want to link this account again, you\u2019ll need to reapply for the bank feed. Depending on your bank, you might need to resend your application form or resubmit your online banking authorisation. This process can take up to 2 weeks.</p>\n<p class="dialog-message">Are you sure you want to cancel this bank feed?</p>\n'});return this.HandlebarsTemplates["settings/bank_feed_cancellation_confirmation"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["settings/bank_feed_linking_error"]=Handlebars.template(function(b,a,e,c,d){function f(a,c){var b,d;b="\n      <li>";(d=e.message)?d=d.call(a,{hash:{}}):(d=a.message,d="function"===typeof d?d():d);b+=h(d)+' Go to <a target="_blank" href="';d=(d=e.businessUrl)?d.call(a,"/reports/bankingReconciliation",{hash:{}}):l.call(a,"businessUrl","/reports/bankingReconciliation",{hash:{}});return b+=h(d)+'">Bank Reconciliation page.</a></li>\n    '}
function g(a,b){var c,d;c='\n      <li>Your bank transactions are in a lock period and can\u2019t be moved. Remove the locked period date, then try again. Go to <a target="_blank" href="';d=(d=e.businessUrl)?d.call(a,"/settings/businessDetails",{hash:{}}):l.call(a,"businessUrl","/settings/businessDetails",{hash:{}});return c+=h(d)+'">Business Details page.</a></li>\n    '}e=e||b.helpers;var h=this.escapeExpression,l=e.helperMissing,k=this;b='<ul class="processed-errors-list">\n  ';c=a.processedErrors;
if((c=e.each.call(a,c,{hash:{},inverse:k.noop,fn:k.program(1,function(a,c){var b,d;b="\n    ";if((d=(d=e.isAccountReconciliationError)?d.call(a,a,{hash:{},inverse:k.noop,fn:k.program(2,f,c)}):l.call(a,"isAccountReconciliationError",a,{hash:{},inverse:k.noop,fn:k.program(2,f,c)}))||0===d)b+=d;b+="\n    ";if((d=(d=e.isBusinessLockDateError)?d.call(a,a,{hash:{},inverse:k.noop,fn:k.program(4,g,c)}):l.call(a,"isBusinessLockDateError",a,{hash:{},inverse:k.noop,fn:k.program(4,g,c)}))||0===d)b+=d;return b+
"\n  "},d)}))||0===c)b+=c;return b+"\n</ul>\n"});return this.HandlebarsTemplates["settings/bank_feed_linking_error"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["settings/export"]=Handlebars.template(function(b,a,e,c,d){function f(a,b){var c,d,f;c='\n    <div id="exportButtons" class="form-inline">\n        <div class="top-buffer row">\n            <div class="col-xs-24 row">\n                <div class="col-xs-12">\n                    <p>From:</p>\n                  ';d={inputName:"from",labelCssClass:"",widgetCssClass:""};d=(f=e.DatePicker)?f.call(a,{hash:d}):
h.call(a,"DatePicker",{hash:d});c+=l(d)+'\n                </div>\n                <div class="col-xs-12">\n                    <p>To:</p>\n                  ';d={inputName:"to",labelCssClass:"",widgetCssClass:""};d=(f=e.DatePicker)?f.call(a,{hash:d}):h.call(a,"DatePicker",{hash:d});c+=l(d)+'\n                </div>\n            </div>\n        </div>\n        <div class="top-buffer row">\n            <div class="col-xs-24 row">\n                <div class="col-xs-12">\n                    <p>Change file name</p>\n                  ';
d={inputName:"name",labelCssClass:"",widgetCssClass:"exportFileSelector","data-maxlength":"255"};d=(f=e.TextInput)?f.call(a,{hash:d}):h.call(a,"TextInput",{hash:d});c+=l(d)+'\n                </div>\n                <div class="col-xs-12">\n                    <p>Export file type</p>\n                  ';d={inputName:"format",labelCssClass:"",widgetCssClass:"exportFileSelector","data-collection":"formats","data-name-field":"name","data-value-field":"value"};d=(f=e.Select)?f.call(a,{hash:d}):h.call(a,
"Select",{hash:d});return c+=l(d)+'\n                </div>\n            </div>\n        </div>\n        <div class="row">\n            <div class="col-xs-5 top-buffer">\n                <button id="exportButton" class="btn btn-primary action">Export</button>\n            </div>\n            <div class="col-xs-2 top-buffer">\n                <div class="smallLoadingSpinner exportSpinner"></div>\n            </div>\n        </div>\n    </div>\n'}function g(a,c){var b,d,f;b='\n    <div id="exportButtons" class="form-inline top-buffer">\n        <p>Include transactions</p>\n      ';
d={inputLabel:"from: ",inputName:"from",labelCssClass:"",widgetCssClass:""};d=(f=e.DatePicker)?f.call(a,{hash:d}):h.call(a,"DatePicker",{hash:d});b+=l(d)+"\n      ";d={inputLabel:"to: ",inputName:"to",labelCssClass:"",widgetCssClass:""};d=(f=e.DatePicker)?f.call(a,{hash:d}):h.call(a,"DatePicker",{hash:d});return b+=l(d)+'\n        <div class="top-buffer">\n            <button id="exportButton" class="btn btn-primary action">Export</button>\n        </div>\n    </div>\n\n'}e=e||b.helpers;var h=e.helperMissing,
l=this.escapeExpression;b="<h2>Exporting</h2>\n<p>Export data for your accountant</p>\n<p>You can export your MYOB Essentials transactions and balances to an MYE file. Your accountant can then import this\n    file into MYOB Accountants Office or other MYOB accountants' software.</p>\n";if((c=(c=e.ifFeature)?c.call(a,"DATACONVERTER",{hash:{},inverse:this.noop,fn:this.program(1,f,d)}):h.call(a,"ifFeature","DATACONVERTER",{hash:{},inverse:this.noop,fn:this.program(1,f,d)}))||0===c)b+=c;b+="\n";if((c=
(c=e.unlessFeature)?c.call(a,"DATACONVERTER",{hash:{},inverse:this.noop,fn:this.program(3,g,d)}):h.call(a,"unlessFeature","DATACONVERTER",{hash:{},inverse:this.noop,fn:this.program(3,g,d)}))||0===c)b+=c;return b+"\n"});return this.HandlebarsTemplates["settings/export"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["settings/ie_alert_dialog"]=Handlebars.template(function(b,a,e,c,d){return'<div class="modal-dialog">\n  <div class="modal-content">\n    <div class="modal-header">\n      <span id="modal-title-confirmation-dialog" class="modal-title">IE</span>\n    </div>\n    <div class="modal-body">\n      <div class="row">\n        <div class="col-xs-24">\n          <p>This feature requires IE v10 or above. Upgrade IE or <a target="_blank" href="http://www.google.com/chrome">Download Chrome</a> (our favourite browser)</p>\n        </div>\n        <div class="col-xs-24 text-right top-buffer">\n          <button name="cancelButton" id="cancelButton" class="btn btn-default">OK</button>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n\n'});return this.HandlebarsTemplates["settings/ie_alert_dialog"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["settings/import"]=Handlebars.template(function(b,a,e,c,d){e=e||b.helpers;var f=e.helperMissing,g=this.escapeExpression;b='<h2>Importing</h2>\n<p>If you\'re currently using MYOB BusinessBasics or AccountRight,\n    <a href="http://help.myob.com/wiki/x/O4IR" target="_blank">export your contacts or items</a> from your company file,\n    then import them into MYOB Essentials.\n    Otherwise, you\'ll need to organise your contacts or items in a text file matching the\n    <a href="http://help.myob.com/wiki/x/PIIR" target="_blank">MYOB Essentials format.</a>\n</p>\n\n<div id="importButtons">\n    <form id="importForm" method="POST" enctype="multipart/form-data" target="uploadTarget">\n        <div id="importType" class="row">\n            <div class="col-xs-8">\n              ';
c={inputLabel:"Contacts",inputId:"importTypeContacts",inputName:"importType",inputValue:"contacts",widgetCssClass:"col-xs-8"};c=(d=e.Radio)?d.call(a,{hash:c}):f.call(a,"Radio",{hash:c});b+=g(c)+'\n            </div>\n            <div class="col-xs-16">\n              ';c={inputLabel:"Items",inputId:"importTypeItems",inputName:"importType",inputValue:"items",widgetCssClass:"col-xs-8"};c=(d=e.Radio)?d.call(a,{hash:c}):f.call(a,"Radio",{hash:c});b+=g(c)+'\n            </div>\n        </div>\n\n        <div id="contactType" class="row" style="display: none">\n            <div class="col-xs-8">\n              ';
c={inputLabel:"Customers",inputId:"contactTypeCustomers",inputName:"selectCustomer",inputValue:"customer",widgetCssClass:"col-xs-8"};c=(d=e.Radio)?d.call(a,{hash:c}):f.call(a,"Radio",{hash:c});b+=g(c)+'\n            </div>\n            <div class="col-xs-16">\n              ';c={inputLabel:"Suppliers",inputId:"contactTypeSuppliers",inputName:"selectCustomer",inputValue:"supplier",widgetCssClass:"col-xs-8"};c=(d=e.Radio)?d.call(a,{hash:c}):f.call(a,"Radio",{hash:c});return b+=g(c)+'\n            </div>\n        </div>\n\n        <div class="row form-group">\n            <div class="col-xs-24 focused">\n                <input type="file" id="importFile" name="importFile"/>\n            </div>\n        </div>\n\n        <div class="top-buffer row">\n            <div class="col-xs-5">\n                <button id="importButton" class="btn btn-primary action">Import</button>\n            </div>\n            <div class="col-xs-2">\n                <div class="smallLoadingSpinner importSpinner"></div>\n            </div>\n        </div>\n    </form>\n</div>\n\n<iframe id="uploadTarget" name="uploadTarget"/>\n'});
return this.HandlebarsTemplates["settings/import"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["settings/import_export"]=Handlebars.template(function(b,a,e,c,d){function f(a,c){return'\n    <div class="bottom-buffer col-xs-24 row">\n        <p id="pageContentOverview">Here\'s where you import your items and contacts into MYOB\n            Essentials, or export your MYOB Essentials data for your accountant to use with MYOB Accountants Office.</p>\n    </div>\n    <ul class="nav nav-tabs col-xs-24 row">\n        <li class="active">\n            <a id="line-item-layout-link" data-panel="tmpImportContainer" class="tab clickable">Import</a>\n        </li>\n        <li>\n            <a id="invoice-template-link" data-panel="exportContainer" class="tab clickable">Export</a>\n        </li>\n    </ul>\n\n\n    <div class="tab-content col-xs-12">\n        <div id="tmpImportContainer" class="expandedPane">\n            <div id="importContainer"></div>\n            <div id="importItemContainer" class="hidden"></div>\n        </div>\n        <div id="exportContainer" class="expandedPane hidden"></div>\n    </div>\n\n'}function g(a,
c){return'\n    <p id="pageContentOverview" class="bottom-buffer">Here\'s where you import your items and contacts into MYOB\n        Essentials, or export your MYOB Essentials data for your accountant to use with MYOB Accountants Office.</p>\n    <hr/>\n\n    <div id="importExportContainer" class="row">\n        <div id="importContainer" class="col-xs-12">\n        </div>\n        <div id="exportContainer" class="col-xs-12">\n        </div>\n    </div>\n\n    <div id="importItemContainer" class="row hidden">\n    </div>\n'}
e=e||b.helpers;b="";var h,l=e.helperMissing,k=this.escapeExpression;c={heading:"Import/export data"};c=(h=e.includePartial)?h.call(a,"page_heading",{hash:c}):l.call(a,"includePartial","page_heading",{hash:c});b+=k(c)+"\n";if((c=(h=e.ifFeature)?h.call(a,"DATACONVERTER",{hash:{},inverse:this.noop,fn:this.program(1,f,d)}):l.call(a,"ifFeature","DATACONVERTER",{hash:{},inverse:this.noop,fn:this.program(1,f,d)}))||0===c)b+=c;b+="\n";if((c=(h=e.unlessFeature)?h.call(a,"DATACONVERTER",{hash:{},inverse:this.noop,
fn:this.program(3,g,d)}):l.call(a,"unlessFeature","DATACONVERTER",{hash:{},inverse:this.noop,fn:this.program(3,g,d)}))||0===c)b+=c;return b+"\n"});return this.HandlebarsTemplates["settings/import_export"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["settings/import_item"]=Handlebars.template(function(b,a,e,c,d){return'<h2>Item account mapping</h2>\n\n<div id="table">\n</div>\n\n<div class="row">\n    <div class="col-xs-24">\n      <div class="pull-right">\n        <button id="saveButton" class="btn btn-primary action">Save</button>\n        <button id="cancelButton" class="btn btn-default">Cancel</button>\n      </div>\n    </div>\n</div>\n'});return this.HandlebarsTemplates["settings/import_item"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["settings/import_item_header"]=Handlebars.template(function(b,a,e,c,d){return'<tr>\n  <th data-field="name" class="asc">Name<i class="fa fa-caret-up"></i></th>\n  <th data-field="saleAccountId">Sell account</th>\n  <th data-field="salePrice">Sell price</th>\n  <th data-field="saleGstCode">Sell tax type</th>\n  <th data-field="purchaseAccountId" class="text-left">Buy account</th>\n  <th data-field="purchasePrice" class="text-right">Buy price</th>\n  <th data-field="purchaseGstCode" class="text-center">Buy tax type</th>\n</tr>\n'});
return this.HandlebarsTemplates["settings/import_item_header"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["settings/import_item_row"]=Handlebars.template(function(b,a,e,c,d){e=e||b.helpers;var f=this.escapeExpression,g=e.helperMissing;b="<td>";(d=e.name)?c=d.call(a,{hash:{}}):(c=a.name,c="function"===typeof c?c():c);b+=f(c)+"</td>\n<td>";c={inputName:"saleAccountId","data-collection":"sellAccounts","data-labels":"number,name,type","data-label-field":"name",widgetCssClass:"input-width-medium"};c=(d=e.TypeaheadDropdown)?
d.call(a,{hash:c}):g.call(a,"TypeaheadDropdown",{hash:c});b+=f(c)+"</td>\n<td>";c={inputName:"salePrice","data-decimal-places":"4","data-valid-regex":"^[-\\+]?\\d{0,2},?\\d{0,3},?\\d{0,3}(\\.\\d{0,4})?$","data-invalid-regex":"[,\\.]{2}",labelCssClass:"","data-css-class":"text-right",widgetCssClass:"input-width-mini"};c=(d=e.MoneyInput)?d.call(a,{hash:c}):g.call(a,"MoneyInput",{hash:c});b+=f(c)+"</td>\n<td>";c={inputName:"saleGstCode","data-collection":"sellGstTypes","data-labels":"gstCode,name,rateLabel:right",
"data-value-field":"gstCode",widgetCssClass:"input-width-small"};c=(d=e.TypeaheadDropdown)?d.call(a,{hash:c}):g.call(a,"TypeaheadDropdown",{hash:c});b+=f(c)+"</td>\n<td>";c={inputName:"purchaseAccountId","data-collection":"buyAccounts","data-labels":"number,name,type","data-label-field":"name",widgetCssClass:"input-width-medium"};c=(d=e.TypeaheadDropdown)?d.call(a,{hash:c}):g.call(a,"TypeaheadDropdown",{hash:c});b+=f(c)+"</td>\n<td>";c={inputName:"purchasePrice","data-decimal-places":"4","data-valid-regex":"^[-\\+]?\\d{0,2},?\\d{0,3},?\\d{0,3}(\\.\\d{0,4})?$",
"data-invalid-regex":"[,\\.]{2}",labelCssClass:"","data-css-class":"text-right",widgetCssClass:"input-width-mini"};c=(d=e.MoneyInput)?d.call(a,{hash:c}):g.call(a,"MoneyInput",{hash:c});b+=f(c)+"</td>\n<td>";c={inputName:"purchaseGstCode","data-collection":"buyGstTypes","data-labels":"gstCode,name,rateLabel:right","data-value-field":"gstCode",widgetCssClass:"input-width-small"};c=(d=e.TypeaheadDropdown)?d.call(a,{hash:c}):g.call(a,"TypeaheadDropdown",{hash:c});return b+=f(c)+"</td>\n"});return this.HandlebarsTemplates["settings/import_item_row"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["settings/invoice/custom_business_details"]=Handlebars.template(function(b,a,e,c,d){function f(a,c){var b,d,f;b="\n            ";d={inputLabel:"ABN",inputId:"businessDetailOptions.includeAbn",inputName:"businessDetailOptions.includeAbn",inputValue:"businessDetailOptions.includeAbn",widgetCssClass:"bd-options","data-css-class":""};d=(f=e.Checkbox)?f.call(a,{hash:d}):p.call(a,"Checkbox",{hash:d});return b+=
t(d)+"\n          "}function g(a,c){var b,d,f;b="\n            ";d={inputLabel:"GST No",inputId:"businessDetailOptions.includeGstNumber",inputName:"businessDetailOptions.includeGstNumber",inputValue:"businessDetailOptions.includeGstNumber",widgetCssClass:"bd-options","data-css-class":""};d=(f=e.Checkbox)?f.call(a,{hash:d}):p.call(a,"Checkbox",{hash:d});return b+=t(d)+"\n          "}function h(a,b){var c,d;c="Phone: ";(d=e.phone)?d=d.call(a,{hash:{}}):(d=a.phone,d="function"===typeof d?d():d);return c+=
t(d)}function l(a,c){var b,d,f;b='\n              <div id="abnPreview">';d=a.abn;if((d=(f=e.unlessBlank)?f.call(a,d,{hash:{},inverse:r.noop,fn:r.program(8,k,c)}):p.call(a,"unlessBlank",d,{hash:{},inverse:r.noop,fn:r.program(8,k,c)}))||0===d)b+=d;return b+"</div>\n            "}function k(a,b){var c,d,f;c="ABN: ";d=a.abn;d=(f=e.formatABN)?f.call(a,d,{hash:{}}):p.call(a,"formatABN",d,{hash:{}});return c+=t(d)}function m(a,c){var b,d,f;b='\n              <div id="gstNumberPreview">';d=a.irdNumber;if((d=
(f=e.unlessBlank)?f.call(a,d,{hash:{},inverse:r.noop,fn:r.program(11,n,c)}):p.call(a,"unlessBlank",d,{hash:{},inverse:r.noop,fn:r.program(11,n,c)}))||0===d)b+=d;return b+"</div>\n            "}function n(a,b){var c,d,f;c="GST No: ";d=a.irdNumber;d=(f=e.formatIRD)?f.call(a,d,{hash:{}}):p.call(a,"formatIRD",d,{hash:{}});return c+=t(d)}e=e||b.helpers;var q,p=e.helperMissing,t=this.escapeExpression,r=this,u=e.blockHelperMissing;b='<div id="custom-business-details" class="clearfix">\n  <div><strong>Business details</strong><hr/></div>\n  <div class="row">\n      <div class="col-xs-16">\n        <div class="top-buffer">\n          ';
c={inputLabel:"Trading name",inputId:"businessDetailOptions.includeTradingName",inputName:"businessDetailOptions.includeTradingName",inputValue:"businessDetailOptions.includeTradingName",widgetCssClass:"bd-options","data-css-class":""};c=(q=e.Checkbox)?q.call(a,{hash:c}):p.call(a,"Checkbox",{hash:c});b+=t(c)+"\n\n          ";c={inputLabel:"Business name",inputId:"businessDetailOptions.includeBusinessName",inputName:"businessDetailOptions.includeBusinessName",inputValue:"businessDetailOptions.includeBusinessName",
widgetCssClass:"bd-options","data-css-class":""};c=(q=e.Checkbox)?q.call(a,{hash:c}):p.call(a,"Checkbox",{hash:c});b+=t(c)+"\n\n          ";c={inputLabel:"Street address",inputId:"businessDetailOptions.includeAddress",inputName:"businessDetailOptions.includeAddress",inputValue:"businessDetailOptions.includeAddress",widgetCssClass:"bd-options","data-css-class":""};c=(q=e.Checkbox)?q.call(a,{hash:c}):p.call(a,"Checkbox",{hash:c});b+=t(c)+"\n\n          ";c={inputLabel:"Phone number",inputId:"businessDetailOptions.includePhone",
inputName:"businessDetailOptions.includePhone",inputValue:"businessDetailOptions.includePhone",widgetCssClass:"bd-options","data-css-class":""};c=(q=e.Checkbox)?q.call(a,{hash:c}):p.call(a,"Checkbox",{hash:c});b+=t(c)+"\n\n          ";c={inputLabel:"Email",inputId:"businessDetailOptions.includeEmail",inputName:"businessDetailOptions.includeEmail",inputValue:"businessDetailOptions.includeEmail",widgetCssClass:"bd-options","data-css-class":""};c=(q=e.Checkbox)?q.call(a,{hash:c}):p.call(a,"Checkbox",
{hash:c});b+=t(c)+"\n\n          ";c={inputLabel:"Website",inputId:"businessDetailOptions.includeWebsite",inputName:"businessDetailOptions.includeWebsite",inputValue:"businessDetailOptions.includeWebsite",widgetCssClass:"bd-options","data-css-class":""};c=(q=e.Checkbox)?q.call(a,{hash:c}):p.call(a,"Checkbox",{hash:c});b+=t(c)+"\n\n          ";(q=e.ifAu)?c=q.call(a,{hash:{},inverse:r.noop,fn:r.program(1,f,d)}):(c=a.ifAu,c="function"===typeof c?c():c);e.ifAu||(c=u.call(a,c,{hash:{},inverse:r.noop,fn:r.program(1,
f,d)}));if(c||0===c)b+=c;b+="\n          ";(q=e.ifNz)?c=q.call(a,{hash:{},inverse:r.noop,fn:r.program(3,g,d)}):(c=a.ifNz,c="function"===typeof c?c():c);e.ifNz||(c=u.call(a,c,{hash:{},inverse:r.noop,fn:r.program(3,g,d)}));if(c||0===c)b+=c;b+='\n          <div>\n            <div id="missing-details-notice" class="text-muted" style="display: none;">You haven\'t entered any details for this field.</div>\n          </div>\n          <div id="update-details-notice" class="text-muted">\n            Update your business details on the\n            <a href="';
c=a.businessId;c=(q=e.appUrl)?q.call(a,c,"/settings/businessDetails",{hash:{}}):p.call(a,"appUrl",c,"/settings/businessDetails",{hash:{}});b+=t(c)+'" id="businessDetails-settings-link"><u>Business details screen.</u></a>\n          </div>\n        </div>\n      </div>\n      <div class="col-xs-8">\n        <div class="bd-preview-panel">\n          <div class="text-right">\n            <div id="tradingNamePreview">';(q=e.tradingName)?c=q.call(a,{hash:{}}):(c=a.tradingName,c="function"===typeof c?c():
c);b+=t(c)+'</div>\n            <div id="businessNamePreview">';(q=e.businessName)?c=q.call(a,{hash:{}}):(c=a.businessName,c="function"===typeof c?c():c);b+=t(c)+'</div>\n            <div id="addressPreview">\n              <div>';c=a.address;c=null==c||!1===c?c:c.streetAddress1;c="function"===typeof c?c():c;b+=t(c)+"</div>\n              <div>";c=a.address;c=null==c||!1===c?c:c.suburb;c="function"===typeof c?c():c;b+=t(c)+" ";c=a.address;c=null==c||!1===c?c:c.state;c="function"===typeof c?c():c;
b+=t(c)+" ";c=a.address;c=null==c||!1===c?c:c.postCode;c="function"===typeof c?c():c;b+=t(c)+"</div>\n              <div>";c=a.address;c=null==c||!1===c?c:c.country;c="function"===typeof c?c():c;b+=t(c)+'</div>\n            </div>\n            <div id="phonePreview">';c=a.phone;if((c=(q=e.unlessBlank)?q.call(a,c,{hash:{},inverse:r.noop,fn:r.program(5,h,d)}):p.call(a,"unlessBlank",c,{hash:{},inverse:r.noop,fn:r.program(5,h,d)}))||0===c)b+=c;b+='</div>\n            <div id="emailPreview">';(q=e.email)?
c=q.call(a,{hash:{}}):(c=a.email,c="function"===typeof c?c():c);b+=t(c)+'</div>\n            <div id="websitePreview">';(q=e.website)?c=q.call(a,{hash:{}}):(c=a.website,c="function"===typeof c?c():c);b+=t(c)+"</div>\n            ";(q=e.ifAu)?c=q.call(a,{hash:{},inverse:r.noop,fn:r.program(7,l,d)}):(c=a.ifAu,c="function"===typeof c?c():c);e.ifAu||(c=u.call(a,c,{hash:{},inverse:r.noop,fn:r.program(7,l,d)}));if(c||0===c)b+=c;b+="\n            ";(q=e.ifNz)?c=q.call(a,{hash:{},inverse:r.noop,fn:r.program(10,
m,d)}):(c=a.ifNz,c="function"===typeof c?c():c);e.ifNz||(c=u.call(a,c,{hash:{},inverse:r.noop,fn:r.program(10,m,d)}));if(c||0===c)b+=c;return b+"\n          </div>\n        </div>\n      </div>\n  </div>\n</div>\n"});return this.HandlebarsTemplates["settings/invoice/custom_business_details"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["settings/invoice/custom_header"]=Handlebars.template(function(b,a,e,c,d){e=e||b.helpers;d=e.helperMissing;var f=this.escapeExpression;b='<div id="custom-header-options">\n  <div id="full-header" class="row top-buffer-sm">\n    <div>\n      <div class="col-xs-24"><strong>Upload a header image</strong>\n        <hr/>\n      </div>\n      <div class="col-xs-24">\n\n          <div class="col-xs-11 text-muted top-buffer">\n            <strong>Your header image:</strong>\n\n            <div id="helpTextWithWindowedEnvelope" class="panel panel-default panel-warning top-buffer-sm bottom-buffer-sm">\n              <div class="panel-heading">\n                will be scaled to fit within an area of 181x30mm.\n                If you need a taller header, deselect the windowed envelope option.\n              </div>\n            </div>\n            <ul class="bottom-buffer-sm">\n              <li id="helpTextWithoutWindowedEnvelope">can be any size, but will be scaled to fit within an area of 181x92mm</li>\n              <li>can be in .JPG or .PNG format</li>\n              <li>should be high quality and high resolution</li>\n              <li>should include your business details</li>\n            </ul>\n            The header image will only be used on invoices and quotes, and doesn\u2019t replace your logo.\n            <div class="progress hide"></div>\n          </div>\n          <div class="col-xs-8 col-xs-offset-5" style="padding-right: 0;">\n            <div class="headerPreview">\n              <div class="headerImage">\n                <img src="';
c=a.businessId;c=(e=e.webUrl)?e.call(a,c,"/settings/invoiceTemplate/headerImage",{hash:{}}):d.call(a,"webUrl",c,"/settings/invoiceTemplate/headerImage",{hash:{}});return b+=f(c)+'" alt="Header">\n              </div>\n              <div class="headerBottom">\n              </div>\n          </div>\n          <div class="top-buffer-sm">\n            <div id="selectHeaderContainer">\n              <button id="selectHeader" class="btn btn-primary pull-right">Upload header image</button>\n            </div>\n            <a class="deleteHeader">Delete</a>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n'});
return this.HandlebarsTemplates["settings/invoice/custom_header"]}).call(this);(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["settings/invoice/default_header"]=Handlebars.template(function(b,a,e,c,d){return'<div id="default-header-options">\n    <div id="logo-settings-container"></div>\n    <div id="custom-business-details-container"></div>\n</div>\n'});return this.HandlebarsTemplates["settings/invoice/default_header"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["settings/invoice/email_options"]=Handlebars.template(function(b,a,e,c,d){return'<div id="invoice-email-options">\n\n  <div id="invoice-email-template-container" class="email-template-container">\n    <div class="panel panel-default">\n      <div class="panel-heading">\n        <div class="row">\n          <div class="col-xs-20">\n            <h4><b>Default Invoice Email</b></h4>\n          </div>\n          <div class="col-xs-4 text-right">\n            <div class="btn btn-default collapsed" data-toggle="collapse" data-target="#invoice-email-template-body-container"\n                 aria-expanded="false" aria-controls="invoice-email-template-body-container">\n              <i class="fa fa-caret-up"></i>\n              <i class="fa fa-caret-down"></i>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div id="invoice-email-template-body-container" class="panel-collapse collapse">\n      <div id="invoice-email-template-body" class="panel-body">\n          Placeholder for email template options\n        </div>\n      </div>\n    </div>\n  </div>\n\n  <div id="quote-email-template-container" class="email-template-container">\n    <div class="panel panel-default">\n      <div class="panel-heading">\n        <div class="row">\n          <div class="col-xs-20">\n            <h4><b>Default Quote Email</b></h4>\n          </div>\n          <div class="col-xs-4 text-right">\n            <div class="btn btn-default collapsed" data-toggle="collapse" data-target="#quote-email-template-body-container"\n                 aria-expanded="false" aria-controls="quote-email-template-body-container">\n            <i class="fa fa-caret-up"></i>\n              <i class="fa fa-caret-down"></i>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div id="quote-email-template-body-container" class="panel-collapse collapse">\n      <div id="quote-email-template-body" class="panel-body">\n          Placeholder for email template options\n        </div>\n      </div>\n    </div>\n  </div>\n\n</div>\n'});
return this.HandlebarsTemplates["settings/invoice/email_options"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["settings/invoice/email_template_invoice"]=Handlebars.template(function(b,a,e,c,d){e=e||b.helpers;var f=e.helperMissing,g=this.escapeExpression;b='<div class="row top-buffer-sm bottom-buffer">\n\n  <div class="col-xs-15 top-buffer-sm">\n  <p>Use this form to customise the default email that is sent with your invoices.</p>\n  </div>\n\n  <div class="col-xs-9">\n  <h4>Email Variables</h4>\n  </div>\n</div>\n\n<div class="row form-horizontal">\n\n  <div class="col-xs-15">\n  ';c=
{inputLabel:"Subject",inputId:"email-template-invoice-subject",inputName:"subject","data-maxlength":"250",widgetCssClass:"col-xs-20",labelCssClass:"col-xs-4"};c=(d=e.TextInput)?d.call(a,{hash:c}):f.call(a,"TextInput",{hash:c});b+=g(c)+"\n    ";c={inputLabel:"Message",inputId:"email-template-invoice-body",inputName:"body","data-maxlength":"5000","data-autosize":"false","data-rows":"15","data-cols":"50",widgetCssClass:"col-xs-20",labelCssClass:"col-xs-4"};c=(d=e.AutosizeTextarea)?d.call(a,{hash:c}):
f.call(a,"AutosizeTextarea",{hash:c});return b+=g(c)+'\n  </div>\n\n  <div class="col-xs-9">\n    <div class="row">\n\n      <div class="col-xs-23">\n        <div class="panel panel-default email-variable-list">\n          <div class="panel-body">\n            <button class="btn btn-default email-variable bottom-buffer-sm" data-email-variable="your_business_name">\n            Your Business Name\n            </button>\n            <button class="btn btn-default email-variable bottom-buffer-sm" data-email-variable="your_business_email">\n            Your Business Email\n            </button>\n            <button class="btn btn-default email-variable bottom-buffer-sm" data-email-variable="your_trading_name">\n              Your Trading Name\n            </button>\n            <button class="btn btn-default email-variable bottom-buffer-sm" data-email-variable="your_business_phone">\n              Your Business Phone\n            </button>\n            <button class="btn btn-default email-variable bottom-buffer-sm" data-email-variable="your_business_website">\n              Your Business Website\n            </button>\n            <button class="btn btn-default email-variable bottom-buffer-sm" data-email-variable="your_business_contact_full_name">\n              Your Business Contact Full Name\n            </button>\n            <button class="btn btn-default email-variable bottom-buffer-sm" data-email-variable="your_business_contact_first_name">\n              Your Business Contact First Name\n            </button>\n            <button class="btn btn-default email-variable bottom-buffer-sm" data-email-variable="customer_full_name">\n              Customer Full Name\n            </button>\n            <button class="btn btn-default email-variable bottom-buffer-sm" data-email-variable="customer_first_name">\n              Customer First Name\n            </button>\n            <button class="btn btn-default email-variable bottom-buffer-sm" data-email-variable="customer_business_name">\n              Customer Business Name\n            </button>\n            <button class="btn btn-default email-variable bottom-buffer-sm" data-email-variable="customer_position">\n              Customer Position\n            </button>\n            <button class="btn btn-default email-variable bottom-buffer-sm" data-email-variable="invoice_number">\n              Invoice Number\n            </button>\n            <button class="btn btn-default email-variable bottom-buffer-sm" data-email-variable="invoice_total_amount">\n            Invoice Total Amount\n            </button>\n            <button class="btn btn-default email-variable bottom-buffer-sm" data-email-variable="invoice_amount_due">\n              Invoice Amount Due\n            </button>\n            <button class="btn btn-default email-variable bottom-buffer-sm" data-email-variable="invoice_date_of_issue">\n              Invoice Date of Issue\n            </button>\n            <button class="btn btn-default email-variable bottom-buffer-sm" data-email-variable="invoice_due_date">\n            Invoice Due Date\n            </button>\n            <button class="btn btn-default email-variable" data-email-variable="purchase_order">\n              Purchase Order\n            </button>\n\n          </div>\n        </div>\n      </div>\n\n    </div>\n  </div>\n</div>\n\n\n<div class="row top-buffer bottom-buffer">\n<div class="col-xs-24">\n    <div class="pull-right">\n      <button class="btn btn-default email-template-clear">Clear changes</button>\n      <button class="btn btn-primary action email-template-save">Save</button>\n    </div>\n  </div>\n</div>\n'});
return this.HandlebarsTemplates["settings/invoice/email_template_invoice"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["settings/invoice/email_template_quote"]=Handlebars.template(function(b,a,e,c,d){e=e||b.helpers;var f=e.helperMissing,g=this.escapeExpression;b='<div class="row top-buffer-sm bottom-buffer">\n\n  <div class="col-xs-15 top-buffer-sm">\n  <p>Use this form to customise the default email that is sent with your quotes.</p>\n  </div>\n\n  <div class="col-xs-9">\n  <h4>Email Variables</h4>\n  </div>\n</div>\n\n<div class="row form-horizontal">\n\n  <div class="col-xs-15">\n    ';c=
{inputLabel:"Subject",inputId:"email-template-quote-subject",inputName:"subject","data-maxlength":"250",widgetCssClass:"col-xs-20",labelCssClass:"col-xs-4"};c=(d=e.TextInput)?d.call(a,{hash:c}):f.call(a,"TextInput",{hash:c});b+=g(c)+"\n    ";c={inputLabel:"Message",inputId:"email-template-quote-body",inputName:"body","data-maxlength":"5000","data-autosize":"false","data-rows":"15","data-cols":"50",widgetCssClass:"col-xs-20",labelCssClass:"col-xs-4"};c=(d=e.AutosizeTextarea)?d.call(a,{hash:c}):f.call(a,
"AutosizeTextarea",{hash:c});return b+=g(c)+'\n  </div>\n\n  <div class="col-xs-9">\n    <div class="row">\n\n      <div class="col-xs-23">\n        <div class="panel panel-default email-variable-list">\n          <div class="panel-body">\n            <button class="btn btn-default email-variable bottom-buffer-sm" data-email-variable="your_business_name">\n              Your Business Name\n            </button>\n            <button class="btn btn-default email-variable bottom-buffer-sm" data-email-variable="your_business_email">\n              Your Business Email\n            </button>\n            <button class="btn btn-default email-variable bottom-buffer-sm" data-email-variable="your_trading_name">\n              Your Trading Name\n            </button>\n            <button class="btn btn-default email-variable bottom-buffer-sm" data-email-variable="your_business_phone">\n              Your Business Phone\n            </button>\n            <button class="btn btn-default email-variable bottom-buffer-sm" data-email-variable="your_business_website">\n              Your Business Website\n            </button>\n            <button class="btn btn-default email-variable bottom-buffer-sm" data-email-variable="your_business_contact_full_name">\n              Your Business Contact Full Name\n            </button>\n            <button class="btn btn-default email-variable bottom-buffer-sm" data-email-variable="your_business_contact_first_name">\n              Your Business Contact First Name\n            </button>\n            <button class="btn btn-default email-variable bottom-buffer-sm" data-email-variable="customer_full_name">\n              Customer Full Name\n            </button>\n            <button class="btn btn-default email-variable bottom-buffer-sm" data-email-variable="customer_first_name">\n              Customer First Name\n            </button>\n            <button class="btn btn-default email-variable bottom-buffer-sm" data-email-variable="customer_business_name">\n              Customer Business Name\n            </button>\n            <button class="btn btn-default email-variable bottom-buffer-sm" data-email-variable="customer_position">\n              Customer Position\n            </button>\n            <button class="btn btn-default email-variable bottom-buffer-sm" data-email-variable="quote_number">\n              Quote Number\n            </button>\n            <button class="btn btn-default email-variable bottom-buffer-sm" data-email-variable="quote_total_amount">\n              Quote Total Amount\n            </button>\n            <button class="btn btn-default email-variable bottom-buffer-sm" data-email-variable="quote_date_of_issue">\n              Quote Date Of Issue\n            </button>\n            <button class="btn btn-default email-variable bottom-buffer-sm" data-email-variable="quote_expiration_date">\n              Quote Expiration Date\n            </button>\n          </div>\n        </div>\n      </div>\n\n    </div>\n  </div>\n</div>\n\n<div class="row top-buffer bottom-buffer">\n  <div class="col-xs-24">\n    <div class="pull-right">\n      <button class="btn btn-default email-template-clear">Clear changes</button>\n      <button class="btn btn-primary action email-template-save">Save</button>\n    </div>\n  </div>\n</div>\n'});
return this.HandlebarsTemplates["settings/invoice/email_template_quote"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["settings/invoice/header_options"]=Handlebars.template(function(b,a,e,c,d){e=e||b.helpers;var f=e.helperMissing,g=this.escapeExpression;b='<div id="header-options">\n  <div class="top-buffer">\n    <div class="row">\n      <div class="col-xs-24">\n        <h3>Set up your header</h3>\n        <hr/>\n      </div>\n      <div class="col-xs-24">\n        ';c={inputLabel:"Position address for windowed envelope",
inputName:"addressEnvelopePosition",widgetCssClass:""};c=(d=e.Checkbox)?d.call(a,{hash:c}):f.call(a,"Checkbox",{hash:c});b+=g(c)+'\n        <hr/>\n      </div>\n    </div>\n    <div class="row">\n      <div class="col-xs-6 header-options-keep-left">';c={inputLabel:"Logo and business details",inputId:"defaultHeader",inputName:"customHeader",inputValue:"false",widgetCssClass:"","data-css-class":""};c=(d=e.Radio)?d.call(a,{hash:c}):f.call(a,"Radio",{hash:c});b+=g(c)+'</div>\n      <div class="col-xs-18 header-options-keep-left">';
c={inputLabel:"Full width header image",inputId:"customHeader",inputName:"customHeader",inputValue:"true",widgetCssClass:"","data-css-class":""};c=(d=e.Radio)?d.call(a,{hash:c}):f.call(a,"Radio",{hash:c});return b+=g(c)+'</div>\n    </div>\n    <div id="default-header-options-container"></div>\n    <div id="custom-header-options-container"></div>\n  </div>\n</div>\n'});return this.HandlebarsTemplates["settings/invoice/header_options"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["settings/invoice/line_item_layout"]=Handlebars.template(function(b,a,e,c,d){function f(a,c){return'\n        <div id="combined-description">\n          <p><i class="fa fa-check"></i> are a stock-based business<br/>\n            <i class="fa fa-check"></i> sell the same things regularly<br/>\n            <i class="fa fa-check"></i> charge by the hour<br/>\n            <i class="fa fa-check"></i> use items to speed up data entry</p>\n        </div>\n      '}
function g(a,c){return'\n        <div id="service-description">\n          <p><i class="fa fa-check"></i> don\u2019t want to show items or quantities<br/>\n            <i class="fa fa-check"></i> sell date-based services (like professional services)<br/>\n            <i class="fa fa-check"></i> want a clean, simple invoice or quote<br/>\n            <i class="fa fa-check"></i> want to enter a different description each time</p>\n        </div>\n      '}function h(a,c){return"\n                  Use this type if you\u2019ve set up stock or service items to use on your invoices and quotes, or if you want to show\n                  quantities or hours\n                  for everything you sell.\n                "}
function l(a,c){return"\n                  Use this type if you want simple invoices and quotes that don\u2019t use quantities or items. It\u2019s good for date-based\n                  invoicing and\n                  professional services.\n                "}e=e||b.helpers;var k,m=e.helperMissing,n=this.escapeExpression;b='<div id="invoice-line-item-layout">\n\n  <h3>Choose your layout type</h3>\n\n  <div class="form-inline">\n    ';c={inputName:"layoutType",labelCssClass:"",widgetCssClass:"","data-collection":"layoutTypes",
"data-name-field":"name","data-value-field":"value"};c=(k=e.Select)?k.call(a,{hash:c}):m.call(a,"Select",{hash:c});b+=n(c)+'\n    <button id="save-line-item-layout" class="btn btn-primary action line-item-layout-save" data-loading-text="Saving...">Save</button>\n  </div>\n\n  <hr>\n\n  <div class="row">\n    <div class="col-xs-10">\n      <strong>Good if you:</strong>\n\n      ';c=a.layoutType;if((c=(k=e.ifEqual)?k.call(a,c,"COMBINED",{hash:{},inverse:this.program(3,g,d),fn:this.program(1,f,d)}):
m.call(a,"ifEqual",c,"COMBINED",{hash:{},inverse:this.program(3,g,d),fn:this.program(1,f,d)}))||0===c)b+=c;b+='\n    </div>\n    <div class="col-xs-11">\n      <div class="panel panel-default panel-gray">\n        <div class="panel-body">\n          <div class="row">\n            <div class="col-xs-3 top-buffer text-center">\n              <i class="icon-notice text-muted fa-3x"></i>\n            </div>\n            <div class="col-xs-21 col-no-left-padding">\n              <p class="text-muted top-buffer-sm">\n                ';
c=a.layoutType;if((c=(k=e.ifEqual)?k.call(a,c,"COMBINED",{hash:{},inverse:this.program(7,l,d),fn:this.program(5,h,d)}):m.call(a,"ifEqual",c,"COMBINED",{hash:{},inverse:this.program(7,l,d),fn:this.program(5,h,d)}))||0===c)b+=c;b+='\n              </p>\n            </div>\n          </div>\n\n        </div>\n      </div>\n\n    </div>\n  </div>\n\n  <strong>Sample invoice and quote</strong>\n\n  <div class="previewImage invoice-line-item-layout-';c=a.layoutType;c=(k=e.toLowerCase)?k.call(a,c,{hash:{}}):
m.call(a,"toLowerCase",c,{hash:{}});return b+=n(c)+' top-buffer-sm bottom-buffer"></div>\n\n</div>\n'});return this.HandlebarsTemplates["settings/invoice/line_item_layout"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["settings/invoice/logo_settings"]=Handlebars.template(function(b,a,e,c,d){e=e||b.helpers;c=c||b.partials;var f,g,h=this,l=e.helperMissing,k=this.escapeExpression;b='<div class="row top-buffer-sm">\n  <div class="col-xs-24">\n    <strong>Logo options</strong>\n    <hr>\n  </div>\n</div>\n<div class="row form-horizontal">\n  <div class="col-xs-24">\n    <div class="col-xs-16">\n      ';f=a.hasALogo;if((f=e["if"].call(a,
f,{hash:{},inverse:h.program(3,function(a,b){var d,f;d="\n        ";if((f=h.invokePartial(c._settings_invoice_partial_upload_logo_panel,"_settings_invoice_partial_upload_logo_panel",a,e,c))||0===f)d+=f;return d+"\n      "},d),fn:h.program(1,function(a,b){var d,f;d="\n        ";if((f=h.invokePartial(c._settings_invoice_partial_logo_update_panel,"_settings_invoice_partial_logo_update_panel",a,e,c))||0===f)d+=f;return d+"\n      "},d)}))||0===f)b+=f;b+='\n      <div class="form-group" id="logoPlacementButtons">\n\n        <label class="col-xs-7 control-label">Logo placement:</label>\n\n        <div class="col-xs-5">\n          ';
f={inputLabel:"Left",inputId:"logoPlacementLeft",inputName:"logoPlacementLeft",inputValue:"true",widgetCssClass:"col-xs-24"};f=(g=e.Radio)?g.call(a,{hash:f}):l.call(a,"Radio",{hash:f});b+=k(f)+'\n        </div>\n        <div class="col-xs-5">\n          ';f={inputLabel:"Right",inputId:"logoPlacementRight",inputName:"logoPlacementLeft",inputValue:"false",widgetCssClass:"col-xs-24"};f=(g=e.Radio)?g.call(a,{hash:f}):l.call(a,"Radio",{hash:f});b+=k(f)+"\n        </div>\n      </div>\n      ";f=a.hasALogo;
if((f=e["if"].call(a,f,{hash:{},inverse:h.noop,fn:h.program(5,function(a,b){var d,f;d="\n        ";if((f=h.invokePartial(c._settings_invoice_partial_logo_slider,"_settings_invoice_partial_logo_slider",a,e,c))||0===f)d+=f;return d+"\n      "},d)}))||0===f)b+=f;b+='\n    </div>\n    <div class="col-xs-8" style="padding-right: 0;">\n      <div class="logoPreviewWrapper">\n        <div class="logoPreview">\n          ';f=a.hasALogo;if((f=e["if"].call(a,f,{hash:{},inverse:h.noop,fn:h.program(7,function(a,
c){var b,d,f;b='\n            <img class="pull-left" src="';d=a.businessId;d=(f=e.webUrl)?f.call(a,d,"/logo",{hash:{}}):l.call(a,"webUrl",d,"/logo",{hash:{}});return b+=k(d)+'" alt="Logo">\n          '},d)}))||0===f)b+=f;return b+'\n          <div class="headerBusinessDetails pull-right">\n          </div>\n        </div>\n        <div class="headerBottom">\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n'});return this.HandlebarsTemplates["settings/invoice/logo_settings"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["settings/invoice/online_payment_options"]=Handlebars.template(function(b,a,e,c,d){function f(a,c){return"\n                  Edit your online payment options\n              "}function g(a,c){return"\n                  Set up online payment options\n              "}e=e||b.helpers;var h=this;b='<div id="online-payments" class="top-buffer">\n    <div class="row">\n      <div class="col-xs-24">\n        <h3 class="bottom-buffer">Online payment options</h3>\n      </div>\n    </div>\n    <div class="row">\n      <div class="col-xs-12 top-buffer">\n        <img src="frontend/visa-master-logos.svg" />\n        ';
c=a.duplicateSn;if((c=e["if"].call(a,c,{hash:{},inverse:h.program(3,function(a,c){var b,d;b='\n            <button class="btn btn-sm btn-default action" id="setupOnlinePaymentButton">\n              ';d=a.status;if((d=e["if"].call(a,d,{hash:{},inverse:h.program(6,g,c),fn:h.program(4,f,c)}))||0===d)b+=d;return b+"\n            </button>\n        "},d),fn:h.program(1,function(a,c){return'\n          <button class="btn btn-sm btn-default action" id="duplicateSnDialog">\n              Set up online payment options\n          </button>\n        '},
d)}))||0===c)b+=c;return b+'\n      </div>\n      <div class="col-xs-12" id="online-payment-settings-help">\n          <p><strong>Online payments</strong></p>\n          <p>\n            Setting up online payments allows your customers to pay direct from their emailed invoice - meaning you get paid faster and minimise the risk of overdue payments. <a class="alert-link" href="http://help.myob.com/wiki/x/qJmi" target="_blank">Learn more</a>\n        </p>\n      </div>\n    </div>\n</div>\n\n\n\n'});
return this.HandlebarsTemplates["settings/invoice/online_payment_options"]}).call(this);
(function(){Handlebars.registerPartial("_settings_invoice_partial_logo_slider",Handlebars.template(function(b,a,e,c,d){e=e||b.helpers;c=this.escapeExpression;b='<div class="form-group">\n  <label class="col-xs-7 control-label">Logo size:</label>\n\n  <div class="col-xs-12" style="padding-top: 10px">\n    <input id="logoSizeSlider" style="width: 200px" class=\'invoice-styling-and-layout-slide\' data-slider-id=\'ex1Slider\'\n           type="text" data-slider-min="2" data-slider-max="100" data-slider-step="1" data-slider-value="';(e=
e.logoSize)?a=e.call(a,{hash:{}}):(a=a.logoSize,a="function"===typeof a?a():a);return b+=c(a)+'"\n           data-slider-tooltip="hide"/>\n    <label for="logoSizeSlider"></label>\n  </div>\n</div>\n'}))}).call(this);
(function(){Handlebars.registerPartial("_settings_invoice_partial_logo_update_panel",Handlebars.template(function(b,a,e,c,d){e=e||b.helpers;d=e.helperMissing;var f=this.escapeExpression;b='<div class="top-buffer" id="logoUpdatePanel">\n  <div class="col-xs-19">\n    <div class="panel panel-default panel-gray">\n      <div class="panel-heading">\n        <div class="text-muted text-center">\n          Update your logo on the\n          <a href="';c=a.businessId;c=(e=e.appUrl)?e.call(a,c,"/settings/logo",
{hash:{}}):d.call(a,"appUrl",c,"/settings/logo",{hash:{}});return b+=f(c)+'" class="text-muted" id="logoPageHyperlink"><u>Logo</u></a>\n          page.\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n'}))}).call(this);
(function(){Handlebars.registerPartial("_settings_invoice_partial_upload_logo_panel",Handlebars.template(function(b,a,e,c,d){e=e||b.helpers;d=e.helperMissing;var f=this.escapeExpression;b='<div class="row top-buffer" id="uploadLogoPanel">\n  <div class="col-xs-16">\n    <div class="panel panel-default panel-warning">\n      <div class="panel-heading">\n        <div class="bottom-buffer-sm"><strong>No logo has been uploaded.</strong>\n        </div>\n        <div>You can upload one on\n          <a href="';c=
a.businessId;c=(e=e.appUrl)?e.call(a,c,"/settings/logo",{hash:{}}):d.call(a,"appUrl",c,"/settings/logo",{hash:{}});return b+=f(c)+'" class="text-warning" id="newLogoPageHyperlink"><u>logo settings\n            screen.</u>\n          </a>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div class="col-xs-8">\n  </div>\n</div>\n'}))}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["settings/invoice/payment_options_au"]=Handlebars.template(function(b,a,e,c,d){function f(a,c){var b,d,f;b='\n    <div id="online-payment-options"></div>\n\n    <div class="row top-buffer">\n        <div class="col-xs-8 bottom-buffer">\n            <p>Bank account for receiving online payments</p>\n\n            <div>\n                <td>\n                  ';d=a.account;if((d=e["if"].call(a,d,{hash:{},inverse:t.program(4,
h,c),fn:t.program(2,g,c)}))||0===d)b+=d;b+='\n                </td>\n            </div>\n        </div>\n\n        <div class="col-xs-12 col-xs-offset-4">\n            <p><strong>Bank account for receiving online payments</strong></p>\n            <p>This account must match the bank account you chose when setting up your online payments. If you need to, you can <a class="alert-link" href="';d=a.businessId;d=(f=e.appUrl)?f.call(a,d,"/settings/accounts",{hash:{}}):q.call(a,"appUrl",d,"/settings/accounts",
{hash:{}});b+=p(d)+'" target="_blank">create a new account</a></p>\n        </div>\n    </div>\n\n    <div id="onlineInvoicingOptions" class="row form-horizontal">\n      <div class="col-xs-24">\n        <p>Put your invoices online and see when customers open and view them.</p>\n      </div>\n      <div class="col-xs-24">\n        ';d={inputLabel:"Use online invoicing",inputName:"onlineInvoicing",widgetCssClass:"col-xs-24 text-left"};d=(f=e.Checkbox)?f.call(a,{hash:d}):q.call(a,"Checkbox",{hash:d});
b+=p(d)+'\n      </div>\n    </div>\n    <div id="attachmentOptions">\n      <div class="row form-horizontal">\n        <div class="col-xs-24">\n          ';d={inputLabel:"Enable PDF attachments",inputName:"emailAttachments",widgetCssClass:"col-xs-24 text-left"};d=(f=e.Checkbox)?f.call(a,{hash:d}):q.call(a,"Checkbox",{hash:d});return b+=p(d)+'\n        </div>\n      </div>\n    </div>\n\n    <h3 id="paymentOptionsHeader">Printed payment options</h3>\n  '}function g(a,b){var c,d,f;c="\n                    ";
d={inputName:"account",labelCssClass:"",widgetCssClass:"","data-collection":"accounts","data-group-by":"type","data-name-field":"number,name","data-value-field":"id","data-sorted":"true","data-default-value":""};d=(f=e.SelectGrouped)?f.call(a,{hash:d}):q.call(a,"SelectGrouped",{hash:d});return c+=p(d)+"\n                  "}function h(a,b){var c,d,f;c="\n                    ";d={inputName:"account",labelCssClass:"",widgetCssClass:"","data-collection":"accounts","data-group-by":"type","data-name-field":"number,name",
"data-value-field":"id","data-sorted":"true","data-default-value":"","data-default-name":"Select account"};d=(f=e.SelectGrouped)?f.call(a,{hash:d}):q.call(a,"SelectGrouped",{hash:d});return c+=p(d)+"\n                  "}function l(a,b){return'\n    <h3 id="paymentOptionsHeader">How to pay details</h3>\n  '}function k(a,b){var c,d,f;c="\n    ";d=a.hideOnlineInvoicingOptIn;if((d=(f=e.ifEqual)?f.call(a,d,!1,{hash:{},inverse:t.noop,fn:t.program(9,m,b)}):q.call(a,"ifEqual",d,!1,{hash:{},inverse:t.noop,
fn:t.program(9,m,b)}))||0===d)c+=d;return c+"\n  "}function m(a,b){var c,d,f;c='\n        <h3>Online invoicing</h3>\n          <div class="row form-horizontal">\n            <div class="col-xs-24">\n              <p>Put your invoices online and see when customers open and view them.</p>\n            </div>\n            <div class="col-xs-24">\n              ';d={inputLabel:"Use online invoicing",inputName:"onlineInvoicing",widgetCssClass:"col-xs-24 text-left"};d=(f=e.Checkbox)?f.call(a,{hash:d}):
q.call(a,"Checkbox",{hash:d});c+=p(d)+'\n            </div>\n          </div>\n          <div id="attachmentOptions">\n            <div class="row form-horizontal">\n                <div class="col-xs-24">\n                    ';d={inputLabel:"Enable PDF attachments",inputName:"emailAttachments",widgetCssClass:"col-xs-24 text-left"};d=(f=e.Checkbox)?f.call(a,{hash:d}):q.call(a,"Checkbox",{hash:d});return c+=p(d)+"\n                </div>\n            </div>\n          </div>\n    "}e=e||b.helpers;
var n,q=e.helperMissing,p=this.escapeExpression,t=this;b='<div id="payment-options-au">\n\n  ';c=(n=e.includePartial)?n.call(a,"invoice_payment_term",{hash:{}}):q.call(a,"includePartial","invoice_payment_term",{hash:{}});b+=p(c)+"\n\n  ";if((c=(n=e.ifFeature)?n.call(a,"ONLINE_PAYMENTS",{hash:{},inverse:t.program(6,l,d),fn:t.program(1,f,d)}):q.call(a,"ifFeature","ONLINE_PAYMENTS",{hash:{},inverse:t.program(6,l,d),fn:t.program(1,f,d)}))||0===c)b+=c;b+='\n\n  <div class="row bottom-buffer">\n    <div class="col-xs-24">\n      <p>Select the payment options you want to include on your sales invoices</p>\n    </div>\n  </div>\n\n  <div class="row form-horizontal">\n\n    <div class="col-xs-24">\n      ';
c={inputLabel:"Direct deposit",inputName:"directDeposit",widgetCssClass:"col-xs-24 text-left"};c=(n=e.Checkbox)?n.call(a,{hash:c}):q.call(a,"Checkbox",{hash:c});b+=p(c)+'\n    </div>\n    <div class="col-xs-24"><p>Enter the details of the bank account you want your customers to deposit payments into</p></div>\n    <div class="col-xs-12">\n      ';c={inputLabel:"Bank",inputName:"bankName","data-maxlength":"60","data-css-class":"bank-data"};c=(n=e.TextInput)?n.call(a,{hash:c}):q.call(a,"TextInput",
{hash:c});b+=p(c)+"\n      ";c={inputLabel:"Account Name",inputName:"accountName","data-maxlength":"60","data-css-class":"bank-data"};c=(n=e.TextInput)?n.call(a,{hash:c}):q.call(a,"TextInput",{hash:c});b+=p(c)+"\n      ";c={inputLabel:"BSB No",inputName:"bsbNumber","data-maxlength":"6","data-css-class":"bank-data"};c=(n=e.TextInput)?n.call(a,{hash:c}):q.call(a,"TextInput",{hash:c});b+=p(c)+"\n      ";c={inputLabel:"Account Number",inputName:"accountNumber","data-maxlength":"9","data-css-class":"bank-data"};
c=(n=e.TextInput)?n.call(a,{hash:c}):q.call(a,"TextInput",{hash:c});b+=p(c)+'\n    </div>\n  </div>\n\n  <div class="row form-horizontal">\n\n    <div class="col-xs-24">\n      ';c={inputLabel:"Mail",inputName:"mail",widgetCssClass:"col-xs-24 text-left"};c=(n=e.Checkbox)?n.call(a,{hash:c}):q.call(a,"Checkbox",{hash:c});b+=p(c)+'\n    </div>\n\n  </div>\n\n  <div class="row form-horizontal">\n    <div class="col-xs-7">I want payments to be mailed to my:</div>\n    <div class="col-xs-7">\n      ';c=
{inputLabel:"Business address",inputId:"businessAddress",inputName:"mailRecipient",inputValue:"BUSINESS",widgetCssClass:"col-xs-24","data-css-class":"mail-data"};c=(n=e.Radio)?n.call(a,{hash:c}):q.call(a,"Radio",{hash:c});b+=p(c)+'\n    </div>\n  </div>\n  <div class="row form-horizontal">\n    <div class="col-xs-7"></div>\n    <div class="col-xs-7">\n      ';c={inputLabel:"Postal address",inputId:"postalAddress",inputName:"mailRecipient",inputValue:"POSTAL",widgetCssClass:"col-xs-24","data-css-class":"mail-data"};
c=(n=e.Radio)?n.call(a,{hash:c}):q.call(a,"Radio",{hash:c});b+=p(c)+"\n    </div>\n  </div>\n\n\n  ";if((c=(n=e.unlessFeature)?n.call(a,"ONLINE_PAYMENTS",{hash:{},inverse:t.noop,fn:t.program(8,k,d)}):q.call(a,"unlessFeature","ONLINE_PAYMENTS",{hash:{},inverse:t.noop,fn:t.program(8,k,d)}))||0===c)b+=c;return b+'\n\n  <div class="row">\n    <div class="col-xs-24">\n      <div class="pull-right">\n        <button class="btn btn-primary action" id="save-payment-options-au" data-loading-text="Saving..." disabled>Save</button>\n      </div>\n    </div>\n  </div>\n</div>\n'});
return this.HandlebarsTemplates["settings/invoice/payment_options_au"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["settings/invoice/payment_options_nz"]=Handlebars.template(function(b,a,e,c,d){function f(a,c){var b,d,f;b='\n    <div id="online-payment-options"></div>\n\n    <div class="row top-buffer">\n        <div class="col-xs-8 bottom-buffer">\n            <p>Bank account for receiving online payments</p>\n\n            <div>\n                <td>\n                  ';d={inputName:"account",labelCssClass:"",widgetCssClass:"",
"data-collection":"accounts","data-group-by":"type","data-name-field":"number,name","data-value-field":"id","data-sorted":"true","data-default-value":"-1","data-default-name":"Select account"};d=(f=e.SelectGrouped)?f.call(a,{hash:d}):m.call(a,"SelectGrouped",{hash:d});b+=n(d)+'\n                </td>\n            </div>\n        </div>\n\n        <div class="col-xs-12 col-xs-offset-4">\n            <p><strong>Bank account for receiving online payments</strong></p>\n            <p>This account must match the bank account you chose when setting up your online payments. If you need to, you can <a class="alert-link" href="';
d=a.businessId;d=(f=e.appUrl)?f.call(a,d,"/settings/accounts",{hash:{}}):m.call(a,"appUrl",d,"/settings/accounts",{hash:{}});b+=n(d)+'" target="_blank">create a new account</a></p>\n        </div>\n    </div>\n\n    <div id="onlineInvoicingOptions" class="row form-horizontal">\n      <div class="col-xs-24">\n        <p>Put your invoices online and see when customers open and view them.</p>\n      </div>\n      <div class="col-xs-24">\n        ';d={inputLabel:"Use online invoicing",inputName:"onlineInvoicing",
widgetCssClass:"col-xs-24 text-left"};d=(f=e.Checkbox)?f.call(a,{hash:d}):m.call(a,"Checkbox",{hash:d});b+=n(d)+'\n      </div>\n    </div>\n    <div id="attachmentOptions">\n      <div class="row form-horizontal">\n        <div class="col-xs-24">\n          ';d={inputLabel:"Enable PDF attachments",inputName:"emailAttachments",widgetCssClass:"col-xs-24 text-left"};d=(f=e.Checkbox)?f.call(a,{hash:d}):m.call(a,"Checkbox",{hash:d});return b+=n(d)+"\n        </div>\n      </div>\n    </div>\n\n    <h3>Printed payment options</h3>\n  "}
function g(a,b){return"\n    <h3>How to pay details</h3>\n  "}function h(a,b){var c,d,f;c="\n    ";d=a.hideOnlineInvoicingOptIn;if((d=(f=e.ifEqual)?f.call(a,d,!1,{hash:{},inverse:q.noop,fn:q.program(6,l,b)}):m.call(a,"ifEqual",d,!1,{hash:{},inverse:q.noop,fn:q.program(6,l,b)}))||0===d)c+=d;return c+"\n  "}function l(a,b){var c,d,f;c='\n      <h3>Online invoicing</h3>\n      <div class="row form-horizontal">\n        <div class="col-xs-24">\n          <p>Put your invoices online and see when customers open and view them.</p>\n        </div>\n        <div class="col-xs-24">\n          ';
d={inputLabel:"Use online invoicing",inputName:"onlineInvoicing",widgetCssClass:"col-xs-24 text-left"};d=(f=e.Checkbox)?f.call(a,{hash:d}):m.call(a,"Checkbox",{hash:d});c+=n(d)+'\n        </div>\n      </div>\n      <div id="attachmentOptions">\n        <div class="row form-horizontal">\n          <div class="col-xs-24">\n            ';d={inputLabel:"Enable PDF attachments",inputName:"emailAttachments",widgetCssClass:"col-xs-24 text-left"};d=(f=e.Checkbox)?f.call(a,{hash:d}):m.call(a,"Checkbox",{hash:d});
return c+=n(d)+"\n          </div>\n        </div>\n      </div>\n    "}e=e||b.helpers;var k,m=e.helperMissing,n=this.escapeExpression,q=this;b='<div id="payment-options-nz">\n\n  ';c=(k=e.includePartial)?k.call(a,"invoice_payment_term",{hash:{}}):m.call(a,"includePartial","invoice_payment_term",{hash:{}});b+=n(c)+"\n\n\n  ";if((c=(k=e.ifFeature)?k.call(a,"ONLINE_PAYMENTS",{hash:{},inverse:q.program(3,g,d),fn:q.program(1,f,d)}):m.call(a,"ifFeature","ONLINE_PAYMENTS",{hash:{},inverse:q.program(3,g,
d),fn:q.program(1,f,d)}))||0===c)b+=c;b+='\n\n  <div class="row bottom-buffer">\n    <div class="col-xs-24">\n      <p>Select the payment options you want to include on your sales invoices</p>\n    </div>\n  </div>\n\n  <div class="row form-horizontal">\n\n    <div class="col-xs-24">\n      ';c={inputLabel:"Direct deposit",inputName:"directDeposit",widgetCssClass:"col-xs-24 text-left"};c=(k=e.Checkbox)?k.call(a,{hash:c}):m.call(a,"Checkbox",{hash:c});b+=n(c)+'\n    </div>\n    <div class="col-xs-24"><p>Enter the details of the bank account you want your customers to deposit payments into</p></div>\n    <div class="col-xs-15">\n      ';
c={inputLabel:"Bank",inputName:"bankName","data-maxlength":"60","data-css-class":"bank-data"};c=(k=e.TextInput)?k.call(a,{hash:c}):m.call(a,"TextInput",{hash:c});b+=n(c)+"\n      ";c={inputLabel:"Account Name",inputName:"accountName","data-maxlength":"60","data-css-class":"bank-data"};c=(k=e.TextInput)?k.call(a,{hash:c}):m.call(a,"TextInput",{hash:c});b+=n(c)+'\n      <div class="row">\n        <div class="col-xs-8 control-label">\n          <label>Account Number</label>\n        </div>\n        <div class="col-xs-3">\n          ';
c={inputName:"bankNumber",widgetCssClass:"col-xs-24","data-maxlength":"2","data-css-class":"bank-data"};c=(k=e.TextInput)?k.call(a,{hash:c}):m.call(a,"TextInput",{hash:c});b+=n(c)+'\n          <span class="small">Bank</span>\n        </div>\n        <div class="col-xs-4">\n          ';c={inputName:"branch",widgetCssClass:"col-xs-24","data-maxlength":"4","data-css-class":"bank-data"};c=(k=e.TextInput)?k.call(a,{hash:c}):m.call(a,"TextInput",{hash:c});b+=n(c)+'\n          <span class="small">Branch</span>\n        </div>\n        <div class="col-xs-5">\n          ';
c={inputName:"accountNumber",widgetCssClass:"col-xs-24","data-maxlength":"8","data-css-class":"bank-data"};c=(k=e.TextInput)?k.call(a,{hash:c}):m.call(a,"TextInput",{hash:c});b+=n(c)+'\n          <span class="small">Acc no.</span>\n        </div>\n        <div class="col-xs-4">\n          ';c={inputName:"suffix",widgetCssClass:"col-xs-24","data-maxlength":"3","data-css-class":"bank-data"};c=(k=e.TextInput)?k.call(a,{hash:c}):m.call(a,"TextInput",{hash:c});b+=n(c)+'\n          <span class="small">Suffix</span>\n        </div>\n      </div>\n    </div>\n  </div>\n\n  <div class="row form-horizontal">\n\n    <div class="col-xs-24">\n      ';
c={inputLabel:"Mail",inputName:"mail",widgetCssClass:"col-xs-24 text-left"};c=(k=e.Checkbox)?k.call(a,{hash:c}):m.call(a,"Checkbox",{hash:c});b+=n(c)+'\n    </div>\n\n  </div>\n\n  <div class="row form-horizontal">\n    <div class="col-xs-7">I want payments to be mailed to my:</div>\n    <div class="col-xs-7">\n      ';c={inputLabel:"Business address",inputId:"businessAddress",inputName:"mailRecipient",inputValue:"BUSINESS",widgetCssClass:"col-xs-24","data-css-class":"mail-data"};c=(k=e.Radio)?k.call(a,
{hash:c}):m.call(a,"Radio",{hash:c});b+=n(c)+'\n    </div>\n  </div>\n  <div class="row form-horizontal">\n    <div class="col-xs-7"></div>\n    <div class="col-xs-7">\n      ';c={inputLabel:"Postal address",inputId:"postalAddress",inputName:"mailRecipient",inputValue:"POSTAL",widgetCssClass:"col-xs-24","data-css-class":"mail-data"};c=(k=e.Radio)?k.call(a,{hash:c}):m.call(a,"Radio",{hash:c});b+=n(c)+"\n    </div>\n  </div>\n\n\n  ";if((c=(k=e.unlessFeature)?k.call(a,"ONLINE_PAYMENTS",{hash:{},inverse:q.noop,
fn:q.program(5,h,d)}):m.call(a,"unlessFeature","ONLINE_PAYMENTS",{hash:{},inverse:q.noop,fn:q.program(5,h,d)}))||0===c)b+=c;return b+'\n\n\n  <div class="row">\n    <div class="col-xs-24">\n      <div class="pull-right">\n        <button class="btn btn-primary action" id="save-payment-options-nz" data-loading-text="Saving..." disabled>Save</button>\n      </div>\n    </div>\n  </div>\n</div>\n'});return this.HandlebarsTemplates["settings/invoice/payment_options_nz"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["settings/invoice/settings"]=Handlebars.template(function(b,a,e,c,d){e=e||b.helpers;b="";d=e.helperMissing;var f=this.escapeExpression;c={heading:"Invoice and quote settings"};c=(e=e.includePartial)?e.call(a,"page_heading",{hash:c}):d.call(a,"includePartial","page_heading",{hash:c});return b+=f(c)+'\n\n<div id="invoice-settings">\n\n  <ul class="nav nav-tabs">\n    <li class="active">\n      <a id="line-item-layout-link" data-panel="line-item-layout-container" class="tab clickable">Layout type</a>\n    </li>\n    <li>\n      <a id="invoice-template-link" data-panel="invoice-template-container" class="tab clickable">Styling and themes</a>\n    </li>\n    <li>\n      <a id="invoice-payment-options-link" data-panel="invoice-payment-options-container" class="tab clickable">Payment options</a>\n    </li>\n    <li>\n      <a id="invoice-email-options-link" data-panel="invoice-email-options-container" class="tab clickable">Default email text</a>\n    </li>\n  </ul>\n\n\n  <div class="tab-content">\n      <div id="line-item-layout-container" class="expandedPane"></div>\n      <div id="invoice-template-container" class="expandedPane hidden"></div>\n    <div id="invoice-payment-options-container" class="expandedPane hidden"></div>\n    <div id="invoice-email-options-container" class="expandedPane hidden"></div>\n  </div>\n\n</div>\n'});
return this.HandlebarsTemplates["settings/invoice/settings"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["settings/invoice/template"]=Handlebars.template(function(b,a,e,c,d){return'<div id="invoice-template">\n\n  <div id="header-options-container"></div>\n  <div id="theme-container">\n\n  </div>\n  <div class="row">\n    <div class="col-xs-24">\n      <div class="pull-right">\n        <button class="btn btn-default action invoice-styling-and-layout-preview">Preview</button>\n        <button class="btn btn-default invoice-styling-and-layout-cancel">Clear changes</button>\n        <button id="save-invoice-styling-and-layout" class="btn btn-primary action invoice-styling-and-layout-save"\n                data-loading-text="Saving...">Save\n        </button>\n      </div>\n    </div>\n  </div>\n</div>\n\n\n'});return this.HandlebarsTemplates["settings/invoice/template"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["settings/invoice/theme"]=Handlebars.template(function(b,a,e,c,d){e=e||b.helpers;var f=e.helperMissing,g=this.escapeExpression;b='<h3>Theme options</h3>\n<hr/>\n<div class="row form-horizontal top-buffer">\n  <div class="col-xs-8">\n    ';c={inputLabel:"Select theme:",inputName:"template",labelCssClass:"col-xs-10",widgetCssClass:"col-xs-14","data-collection":"templates","data-name-field":"name","data-value-field":"value"};
c=(d=e.Select)?d.call(a,{hash:c}):f.call(a,"Select",{hash:c});b+=g(c)+'\n    <div class="form-group">\n      <div class="col-xs-24">\n        <div class="pull-right previewImage invoice-template-';c=a.template;c=(d=e.toLowerCase)?d.call(a,c,{hash:{}}):f.call(a,"toLowerCase",c,{hash:{}});return b+=g(c)+'"></div>\n      </div>\n    </div>\n  </div>\n  <div class="col-xs-10">\n\n    <div class="form-group">\n      <label class="col-xs-12 control-label" for="headerColour">Header colour:</label>\n\n      <div class="col-xs-12 form-control-wrapper" data-widget="ColourPicker"\n           data-name="headerColour" data-id="headerColour"></div>\n    </div>\n\n    <div class="form-group">\n      <label class="col-xs-12 control-label" for="headerTextColour">Header text colour:</label>\n\n      <div class="col-xs-12 form-control-wrapper" data-widget="ColourPicker"\n           data-name="headerTextColour" data-id="headerTextColour"></div>\n    </div>\n\n    <div class="form-group">\n      <div class="col-xs-24 text-right">\n        <a class="invoice-styling-and-layout-reset-colour">Reset to default</a>\n      </div>\n    </div>\n  </div>\n</div>\n\n\n'});
return this.HandlebarsTemplates["settings/invoice/theme"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["settings/logo"]=Handlebars.template(function(b,a,e,c,d){function f(a,c){return"\n  <p>Your logo appears at the top of your invoices, quotes and payslips.</p>\n"}function g(a,c){return"\n  <p>Your logo appears at the top of your employees' payslips.</p>\n"}e=e||b.helpers;b="";var h,l=e.helperMissing,k=this.escapeExpression;c={heading:"Logo"};c=(h=e.includePartial)?h.call(a,"page_heading",{hash:c}):l.call(a,
"includePartial","page_heading",{hash:c});b+=k(c)+"\n";if((c=(h=e.ifBusinessHasEntitlement)?h.call(a,"INVOICE",{hash:{},inverse:this.program(3,g,d),fn:this.program(1,f,d)}):l.call(a,"ifBusinessHasEntitlement","INVOICE",{hash:{},inverse:this.program(3,g,d),fn:this.program(1,f,d)}))||0===c)b+=c;b+='\n<div class="row top-buffer">\n  <div class="col-xs-12 logoPreview">\n    <div>\n      <img class="" src="';c=a.businessId;c=(h=e.webUrl)?h.call(a,c,"/logo",{hash:{}}):l.call(a,"webUrl",c,"/logo",{hash:{}});
return b+=k(c)+'" alt="Logo">\n    </div>\n    <div>\n      <a class="deleteLogo">Delete</a>\n    </div>\n  </div>\n  <div class="col-xs-12 logoUpload">\n    <p>Your logo image</p>\n    <ul>\n      <li>must be a jpg, gif, png or bmp file and RGB colour.</li>\n      <li>must be less than 1MB in size.</li>\n    </ul>\n    <p>We also recommend that you use a logo with a white background.</p>\n    <div id="selectLogoContainer"><button id="selectLogo" class="btn btn-primary">Select logo</button></div>\n    <div class="progress hide"></div>\n    <div class="resizingMessage hide"><div class="smallLoadingSpinner"></div> Resizing...</div>\n  </div>\n</div>\n'});
return this.HandlebarsTemplates["settings/logo"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["spotLight/spot_light"]=Handlebars.template(function(b,a,e,c,d){e=e||b.helpers;d=e.helperMissing;var f=this.escapeExpression;b='<div>\n  <div class="mask"></div>\n  <div class="row">\n    ';c={inputLabel:"",inputName:"action","data-collection":"actions",labelCssClass:"",widgetCssClass:"","data-value-field":"action","data-labels":"actionName","data-label-field":"actionName"};c=(e=e.TypeaheadDropdown)?e.call(a,
{hash:c}):d.call(a,"TypeaheadDropdown",{hash:c});return b+=f(c)+"\n  </div>\n</div>\n"});return this.HandlebarsTemplates["spotLight/spot_light"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["users/edit_user"]=Handlebars.template(function(b,a,e,c,d){e=e||b.helpers;var f,g=e.helperMissing,h=this.escapeExpression;b='<h3>Edit user</h3>\n<p>Update or add details for an existing user.</p>\n\n<div class="row">\n  <div class="col-xs-8">\n    <label for="givenNames">First name</label>\n  </div>\n  <div class="col-xs-8">\n    <label for="surname">Last name</label>\n  </div>\n  ';c=a.isCurrentUser;if((c=
e.unless.call(a,c,{hash:{},inverse:this.noop,fn:this.program(1,function(a,c){return'\n  <div class="col-xs-8">\n      <label for="surname">Privilege</label>\n  </div>\n  '},d)}))||0===c)b+=c;b+='\n</div>\n<div class="row">\n  <div class="col-xs-8">\n    ';c={inputName:"firstName",widgetCssClass:"","data-maxlength":"50"};c=(f=e.TextInput)?f.call(a,{hash:c}):g.call(a,"TextInput",{hash:c});b+=h(c)+'\n  </div>\n  <div class="col-xs-8">\n    ';c={inputName:"lastName",widgetCssClass:"","data-maxlength":"50"};
c=(f=e.TextInput)?f.call(a,{hash:c}):g.call(a,"TextInput",{hash:c});b+=h(c)+"\n  </div>\n  ";c=a.isCurrentUser;if((c=e.unless.call(a,c,{hash:{},inverse:this.noop,fn:this.program(3,function(a,c){var b,d,f;b='\n      <div class="col-xs-8">\n        ';d={inputName:"privilege",labelCssClass:"",widgetCssClass:"","data-collection":"privileges","data-name-field":"name","data-value-field":"value"};d=(f=e.Select)?f.call(a,{hash:d}):g.call(a,"Select",{hash:d});return b+=h(d)+"\n      </div>\n  "},d)}))||0===
c)b+=c;return b+'\n\n</div>\n\n<div class="row">\n\n  <div class="col-xs-12 button-group pull-right text-right">\n    <button id="saveButton" class="btn btn-primary action" disabled="">Save</button>\n    <button id="cancelButton" class="btn btn-default">Cancel</button>\n  </div>\n\n</div>\n'});return this.HandlebarsTemplates["users/edit_user"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["users/invite_user"]=Handlebars.template(function(b,a,e,c,d){function f(a,c){return"\n    Enter the details to invite someone to use the Partner Dashboard. All users you set up will have full access to every business in the dashboard.\n  "}function g(a,c){return"\n    Enter the details to invite someone to work on this business with you.\n  "}e=e||b.helpers;var h,l=e.helperMissing,k=this.escapeExpression;
b='<div class="slidable">\n<h3><h3>\n  ';c=a.id;if((c=e["if"].call(a,c,{hash:{},inverse:this.program(3,function(a,c){return"\n      Invite a user\n  "},d),fn:this.program(1,function(a,c){return"\n      Resend invite\n  "},d)}))||0===c)b+=c;b+="\n</h3>\n<p>\n  ";if((c=(h=e.ifBusinessSetting)?h.call(a,"clientType","PP",{hash:{},inverse:this.program(7,g,d),fn:this.program(5,f,d)}):l.call(a,"ifBusinessSetting","clientType","PP",{hash:{},inverse:this.program(7,g,d),fn:this.program(5,f,d)}))||0===c)b+=
c;b+='\n</p>\n\n<div class="row">\n  <div class="col-xs-6">\n    <label for="firstName">First name</label>\n  </div>\n  <div class="col-xs-6">\n    <label for="lastName">Last name</label>\n  </div>\n  <div class="col-xs-6">\n    <label for="privilege">Privilege</label>\n  </div>\n  <div class="col-xs-6">\n    <label for="email">Email</label>\n  </div>\n</div>\n\n<div class="row">\n  <div class="col-xs-6">\n    ';c={inputName:"firstName",widgetCssClass:"","data-maxlength":"50"};c=(h=e.TextInput)?h.call(a,
{hash:c}):l.call(a,"TextInput",{hash:c});b+=k(c)+'\n  </div>\n\n  <div class="col-xs-6">\n    ';c={inputName:"lastName",widgetCssClass:"","data-maxlength":"50"};c=(h=e.TextInput)?h.call(a,{hash:c}):l.call(a,"TextInput",{hash:c});b+=k(c)+'\n  </div>\n\n  <div class="col-xs-6">\n    ';c={inputName:"privilege",labelCssClass:"",widgetCssClass:"","data-collection":"privileges","data-name-field":"name","data-value-field":"value"};c=(h=e.Select)?h.call(a,{hash:c}):l.call(a,"Select",{hash:c});b+=k(c)+'\n  </div>\n\n  <div class="col-xs-6">\n    ';
c={inputName:"email",widgetCssClass:"","data-delay":"on"};c=(h=e.TextInput)?h.call(a,{hash:c}):l.call(a,"TextInput",{hash:c});b+=k(c)+'\n  </div>\n</div>\n<div class="row">\n  <div class="col-xs-24 text-right">\n    <button id="saveButton" class="btn btn-primary action">';c=a.id;if((c=e["if"].call(a,c,{hash:{},inverse:this.program(11,function(a,c){return"Send"},d),fn:this.program(9,function(a,c){return"Resend"},d)}))||0===c)b+=c;return b+' invitation</button>\n    <button id="cancelButton" class="btn btn-default">Cancel</button>\n  </div>\n</div>\n</div>\n'});
return this.HandlebarsTemplates["users/invite_user"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["users/user_list_item"]=Handlebars.template(function(b,a,e,c,d){function f(a,c){var b,d;b="\n            ";if((d=(d=e.ifBusinessSetting)?d.call(a,"currentUserPrivilege","ADMINISTRATOR",{hash:{},inverse:p.noop,fn:p.program(8,g,c)}):t.call(a,"ifBusinessSetting","currentUserPrivilege","ADMINISTRATOR",{hash:{},inverse:p.noop,fn:p.program(8,g,c)}))||0===d)b+=d;return b+"\n          "}function g(a,c){var b,d;b=
'\n              <button class="btn btn-default resendInvite" data-id="';(d=e.id)?d=d.call(a,{hash:{}}):(d=a.id,d="function"===typeof d?d():d);return b+=q(d)+'">Resend invite</button>\n            '}function h(a,c){var b,d;b="\n            ";d=a.canUpdate;if((d=e["if"].call(a,d,{hash:{},inverse:p.noop,fn:p.program(11,l,c)}))||0===d)b+=d;return b+"\n          "}function l(a,b){var c,d;c='\n              <button class="btn btn-default editUser" data-id="';(d=e.id)?d=d.call(a,{hash:{}}):(d=a.id,d="function"===
typeof d?d():d);return c+=q(d)+'">Edit</button>\n            '}function k(a,c){var b,d;b="\n            ";d=a.isCurrentUser;if((d=e.unless.call(a,d,{hash:{},inverse:p.noop,fn:p.program(14,m,c)}))||0===d)b+=d;return b+"\n          "}function m(a,b){var c,d;c='\n                <i class="fa fa-times-circle fa-2x deleteButton" data-id="';(d=e.id)?d=d.call(a,{hash:{}}):(d=a.id,d="function"===typeof d?d():d);return c+=q(d)+'"></i>\n            '}e=e||b.helpers;var n,q=this.escapeExpression,p=this,t=e.helperMissing;
b='<div class="itemContent">\n    <div class="row">\n        <div class="col-xs-5 user-item-email">\n            <div class="subtext">Email</div>\n            <div>';(n=e.email)?c=n.call(a,{hash:{}}):(c=a.email,c="function"===typeof c?c():c);b+=q(c)+'</div>\n            <div class="subtext">\n            ';c=a.isCurrentUser;if((c=e["if"].call(a,c,{hash:{},inverse:p.noop,fn:p.program(1,function(a,c){return"(Me)"},d)}))||0===c)b+=c;b+="\n            ";(n=e.invitationStatus)?c=n.call(a,{hash:{}}):(c=
a.invitationStatus,c="function"===typeof c?c():c);b+=q(c)+'\n            </div>\n        </div>\n        <div class="col-xs-5 user-item-name">\n            <div class="subtext">Name</div>\n            <div>';(n=e.name)?c=n.call(a,{hash:{}}):(c=a.name,c="function"===typeof c?c():c);b+=q(c)+'</div>\n        </div>\n        <div class="col-xs-5 user-item-username">\n            <div class="subtext">Username</div>\n            <div>';c=a.ssoLinked;if((c=e["if"].call(a,c,{hash:{},inverse:p.program(5,function(a,
c){var b;(b=e.username)?b=b.call(a,{hash:{}}):(b=a.username,b="function"===typeof b?b():b);return q(b)},d),fn:p.program(3,function(a,b){var c;(c=e.email)?c=c.call(a,{hash:{}}):(c=a.email,c="function"===typeof c?c():c);return q(c)},d)}))||0===c)b+=c;b+='</div>\n        </div>\n        <div class="col-xs-5 user-item-privilege no-border-right">\n            <div class="subtext">Privilege</div>\n            <div>';(n=e.privilege)?c=n.call(a,{hash:{}}):(c=a.privilege,c="function"===typeof c?c():c);b+=
q(c)+'</div>\n        </div>\n        <div class="col-xs-2 actions text-center text-actions">\n          ';c=a.type;if((c=(n=e.ifEqual)?n.call(a,c,"invitation",{hash:{},inverse:p.program(10,h,d),fn:p.program(7,f,d)}):t.call(a,"ifEqual",c,"invitation",{hash:{},inverse:p.program(10,h,d),fn:p.program(7,f,d)}))||0===c)b+=c;b+='\n        </div>\n        <div class="col-xs-2 delete text-right">\n          ';if((c=(n=e.ifBusinessSetting)?n.call(a,"currentUserPrivilege","ADMINISTRATOR",{hash:{},inverse:p.noop,
fn:p.program(13,k,d)}):t.call(a,"ifBusinessSetting","currentUserPrivilege","ADMINISTRATOR",{hash:{},inverse:p.noop,fn:p.program(13,k,d)}))||0===c)b+=c;return b+"\n        </div>\n    </div>\n</div>\n"});return this.HandlebarsTemplates["users/user_list_item"]}).call(this);
(function(){this.HandlebarsTemplates||(this.HandlebarsTemplates={});this.HandlebarsTemplates["users/users"]=Handlebars.template(function(b,a,e,c,d){function f(a,c){var b,d;b="\n        ";if((d=(d=e.ifBusinessSetting)?d.call(a,"currentUserPrivilege","ADMINISTRATOR",{hash:{},inverse:k.noop,fn:k.program(2,g,c)}):m.call(a,"ifBusinessSetting","currentUserPrivilege","ADMINISTRATOR",{hash:{},inverse:k.noop,fn:k.program(2,g,c)}))||0===d)b+=d;return b+"\n      "}function g(a,c){return'\n          <button id="inviteAccountant" class="btn btn-default">Invite advisor</button>\n        '}
function h(a,c){return'\n        <button id="addUser" class="btn btn-primary">Invite user</button>\n      '}function l(a,c){return'\n    <div class="row overview-container">\n      <div class="col-xs-24">\n        <p class="overview">Anyone listed here can access the partner dashboard and open the companies listed. Set up new users and edit or delete existing users.</p>\n      </div>\n    </div>\n  '}e=e||b.helpers;var k=this,m=e.helperMissing;b='<div class="row">\n  <div class="col-xs-24">\n    <div id="onboarding-navigation-container" class="banner banner-blue"></div>\n  </div>\n</div>\n\n<div id="pageContentHeader">\n  <div class="row">\n    <div class="col-xs-8">\n      <h1>Users</h1>\n    </div>\n    <div class="col-xs-16 h1-control text-right">\n      ';
if((c=(c=e.ifBusinessSetting)?c.call(a,"viewedByProfessionalPartner",!1,{hash:{},inverse:k.noop,fn:k.program(1,f,d)}):m.call(a,"ifBusinessSetting","viewedByProfessionalPartner",!1,{hash:{},inverse:k.noop,fn:k.program(1,f,d)}))||0===c)b+=c;b+='\n\n      <button id="changePassword" class="btn btn-default">Change my password</button>\n\n      ';if((c=(c=e.unlessBusinessSetting)?c.call(a,"currentUserPrivilege","STANDARD_USER",{hash:{},inverse:k.noop,fn:k.program(4,h,d)}):m.call(a,"unlessBusinessSetting",
"currentUserPrivilege","STANDARD_USER",{hash:{},inverse:k.noop,fn:k.program(4,h,d)}))||0===c)b+=c;b+="\n    </div>\n  </div>\n  ";if((c=(c=e.ifBusinessSetting)?c.call(a,"clientType","PP",{hash:{},inverse:k.noop,fn:k.program(6,l,d)}):m.call(a,"ifBusinessSetting","clientType","PP",{hash:{},inverse:k.noop,fn:k.program(6,l,d)}))||0===c)b+=c;return b+'\n</div>\n<div class="row">\n  <div class="col-xs-24">\n    <div id="userList"></div>\n  </div>\n</div>\n'});return this.HandlebarsTemplates["users/users"]}).call(this);
ns("la.models",function(b){b.Address=la.models.Model.extend({defaults:{streetAddress1:"",streetAddress2:"",suburb:"",postCode:"",state:"",country:""},getFormattedString:function(){var a=[this.get("streetAddress1"),this.get("streetAddress2"),[this.get("suburb"),this.get("state"),this.get("postCode")].join(" "),this.get("country")];return _(a).filter(function(a){return!_(a).isBlank()}).join("\n")}})});ns("la.models.admin",function(b){b.DemotePartnerBusnesses=la.models.Model.extend({url:function(){return UrlUtils.anonymousApiUrl("/admin/demotepartnerbusinesses")}})});
ns("la.models.admin",function(b){b.IntermediaryDepLine=la.models.Model.extend({defaults:{depBusinessId:"",depMonth:"01",depYear:"2015"}})});ns("la.models.admin",function(b){b.IntermediaryEps=la.models.Model.extend({relations:[{type:Backbone.Many,key:"depLines",relatedModel:"la.models.admin.IntermediaryDepLine"}],defaults:{dcpBusinessIds:"",dcpMonth:"01",dcpYear:"2015"}})});
ns("la.models.admin",function(b){b.IntermediaryIrdBankFile=la.models.Model.extend({defaults:{month:"01",year:"2015",paymentDate:"",businessIds:""},validation:{paymentDate:{required:!0,validDate:!0}}})});ns("la.models.admin",function(b){b.IntermediaryScf=la.models.Model.extend({defaults:{scfMonth:"01",scfYear:"2015"}})});
ns("la.models.business",function(b){b.BusinessValidatedAddress=la.models.Address.extend({validation:{streetAddress1:{required:!0,maxLength:255},suburb:{required:!0,maxLength:50},state:{required:{"if":function(a){return la.Config.isAU()}}},country:{required:!0},postCode:{required:!0,length:4,pattern:"digits",notAllow:{values:["9999"]}}}})});
ns("la.models.advisor",function(b){b.AdvisorDetails=la.models.Model.extend({relations:[{type:Backbone.One,key:"address",relatedModel:"la.models.business.BusinessValidatedAddress"},{type:Backbone.One,key:"postalAddress",relatedModel:"la.models.business.BusinessValidatedAddress"}],defaults:{address:new la.models.business.BusinessValidatedAddress},validation:{businessName:{required:!0}},url:function(){return UrlUtils.apiUrl(this.get("id"),"/details")}})});
ns("la.models.advisor",function(b){b.BusinessType=la.models.Model.extend({url:function(){return this.getUrl("businessType")}})});ns("la.models.advisor",function(b){b.ChartOfAccountsType=la.models.Model.extend({initialize:function(a,b){this.type=b;this._setValues(a,b);this._super()},_setValues:function(a,b){var c,d,f=a.get("id");"business"===b?(c="businessName",d="cloneBusinessId"):(c="description",d="businessType");this.set({id:b+"_"+f,type:b,modelId:f,modelIdAttribute:d,name:a.get(c),wrappedModel:a})}})});
ns("la.models.advisor",function(b){b.HandoverInvitation=la.models.Model.extend({url:function(){return this.getBaseUrl("advisor/managedBusinesses/"+this.get("businessId")+"/handover",la.BusinessSettings.getBusinessId())}})});
ns("la.models.advisor",function(b){b.HandoverManagedBusiness=la.models.Model.extend({defaults:{firstName:"",lastName:"",email:""},validation:{email:{email:!0,msg:"Must be a valid email address"},firstName:{required:!0},lastName:{required:!0},confirmEmail:{required:!0,confirm:{forElement:"email",forLabel:"Email address"}}},url:function(){return this.getUrl("advisor/managedBusinesses/"+this.get("handoverBusinessId")+"/handover")}})});
ns("la.models.advisor",function(b){b.InvitedBusiness=la.models.Model.extend({defaults:{},validation:{businessName:{required:!0},email:{pattern:"email",msg:"Must be a valid email address"},confirmEmail:{required:!0,confirm:{forElement:"email",forLabel:"Email address"}}},url:function(){return this.getUrl("advisor/invitations")}})});
ns("la.models.advisor",function(b){b.ManagedBusiness=la.models.Model.extend({defaults:{status:"PREHANDOVER",suspensionDateForNotHandoveredBusiness:null},relations:[{type:Backbone.One,key:"handoverInvitation",relatedModel:"la.models.advisor.HandoverInvitation"}],validation:{businessName:{required:!0},chartOfAccountsType:{required:!0},referrer:{required:!1,range:[1,999999999999]}},hasBeenHandedOver:function(){return!(this.isStatus("PREHANDOVER")||this.isStatus("HANDOVER"))},isStatus:function(a){return a===
this.get("status")},url:function(){return this.getUrl("advisor/managedBusinesses")},toJSON:function(a){var b=this.get("chartOfAccountsType");a=this._super(a);b&&b instanceof Backbone.Model&&(delete a.chartOfAccountsType,a[b.get("modelIdAttribute")]=b.get("modelId"));return a}})});ns("la.models.advisor",function(b){b.UnallocatedTransactions=Backbone.Model.extend({url:function(){return UrlUtils.apiUrl(this.get("businessId"),"/advisor/managedBusinesses/"+this.get("managedBusinessId")+"/unallocatedTransactions")}})});
ns("la.models.advisor",function(b){b.VerifyAdvisor=la.models.Model.extend({validation:{clientCrmIdOrSerialNumber:{required:!0}},url:function(){return UrlUtils.apiUrl(this.get("id"),"/advisor/verify")}})});
ns("la.models.banking",function(b){b.Allocation=la.models.Model.extend({relations:[{type:Backbone.Many,key:"lines",relatedModel:"la.models.banking.AllocationLine"}],validation:{lines:{allValid:{msg:"All lines must be valid"}},contactId:{required:{"if":function(a,b){return!0===b.reportable}}},remainingBalance:{min:0,max:0}},defaults:{remainingBalance:0},url:function(){return UrlUtils.apiUrl(la.BusinessSettings.getBusinessId(),"/banktransactions/"+this.get("bankTransactionId")+"/allocation")},getPopulatedLines:function(){return new Backbone.Collection(this.toJSON().lines)},
toJSON:function(){var a=this._super();a.lines=_.filter(a.lines,function(a){return _.isNumber(a.accountId)});return a}})});
ns("la.models.banking",function(b){b.AllocationLine=la.models.Model.extend({validation:{taxCode:function(a){return this.validateTaxCode(a)},tax:function(a){return this.validateCustomTaxAmount(a)}},initialize:function(a){this._super(a);_(["amount","accountId","taxCode","tax","percentage"]).each(function(a){this.validation[a]=this.validation[a]||{};this.validation[a].required={"if":function(a){return!a.isEmpty()}}}.bind(this))},isEmpty:function(){return _("amount accountId taxCode tax contactId description percentage".split(" ")).every(function(a){return _(this.get(a)).isBlank()}.bind(this))},
validateTaxCode:function(a){if(la.BusinessSettings.isRegisteredForGst()&&_.isBlank(a)&&!this.isEmpty())return"This field is required"},validateCustomTaxAmount:function(a){if(la.BusinessSettings.isRegisteredForGst()){if(_.isBlank(a)&&!this.isEmpty())return"This field is required";var b=this.getCalculatedTax();if(0<=b){if(0>a||a>b)return 0===b?"tax amount must be zero":"tax amount must be between 0 and "+b}else if(a>b)return"tax amount can't be greater than "+b}},getCalculatedTax:function(){var a=this.get("amount"),
b=this.get("taxCode");if(!_.isBlank(a)&&!_.isBlank(b))return b=this._getTaxRate(),this._calculateTaxByAmountAndRate(a,b)},_getTaxRate:function(){return la.collections.commons.GstTypes.getByCode(this.get("taxCode")).get("rate")},_calculateTaxByAmountAndRate:function(a,b){var c=new TaxCalculator(a,b,!0);return MO.round(c.tax(),2)}})});
ns("la.models.banking",function(b){b.AllocationRule=la.models.Model.extend({relations:[{type:Backbone.Many,key:"lines",relatedModel:"la.models.banking.AllocationRuleLine"}],defaults:{remainingBalance:0,lines:[],amountType:"anyAmount",amountPercent:"percentage",deposit:!0,withdrawal:!0},validation:{lines:{allValid:{msg:"All lines must be valid"}},contactId:{required:{"if":function(a,b){return!0===b.reportable}}},description:{required:!0},remainingBalance:function(){if(0!==this.get("remainingBalance")){if("percentage"===
this.get("amountPercent")){var a=0;this.get("lines").each(function(b){b.get("percentage")&&(a+=Number(b.get("percentage")))});if(100===a)return}return this._validateRemainingBalance()}}},_validateRemainingBalance:function(){if(0!==this.get("remainingBalance")&&("anyAmount"!==this.get("amountType")||"anyAmount"===this.get("amountType")&&"percentage"===this.get("amountPercent"))||1!==this.get("lines").filter(function(a){return 0===a.get("amount")&&100===a.get("percentage")}).length)return"Remaining should be zero"},
url:function(){return UrlUtils.apiUrl(la.BusinessSettings.getBusinessId(),"/allocation-rules-new-old")},getPopulatedLines:function(){return new Backbone.Collection(this.toJSON().lines)},toJSON:function(){var a=this._super();a.lines=_.filter(a.lines,function(a){return _.isNumber(a.accountId)});return a},isAnyAmountDollarAmount:function(){return"anyAmount"===this.get("amountType")&&"dollar"===this.get("amountPercent")}})});
ns("la.models.banking",function(b){b.AllocationRuleLine=la.models.Model.extend({validation:{amount:function(a){return this.validateAmount(a)},amountLabel:function(a){if(!_.isBlank(a)&&0===Number(a))return"Amount cannot be zero"},taxCode:function(a){return this.validateTaxCode(a)},tax:function(a){}},validateAmount:function(a){if(!(void 0!==a&&0!==a&&!_.isBlank(a)||void 0!==this.get("percentage")&&0!==this.get("percentage")||void 0===this.get("accountId")||_.isBlank(this.get("accountId"))))return"Amount should be greater than zero"},
initialize:function(a){this._super(a);_(["amount","accountId","taxCode"]).each(function(a){this.validation[a]=this.validation[a]||{};this.validation[a].required={"if":function(a){return!a.isEmpty()}}}.bind(this))},isEmpty:function(){return _(["amount","accountId","taxCode","contactId","description"]).every(function(a){return _(this.get(a)).isBlank()}.bind(this))},validateTaxCode:function(a){if(la.BusinessSettings.isRegisteredForGst()&&_.isBlank(a)&&!this.isEmpty())return"This field is required"},
getCalculatedTax:function(){return 0}})});ns("la.models.banking",function(b){b.BankFeed=la.models.Model.extend({url:function(){return this.getUrl("bank-feeds")}})});
ns("la.models.banking",function(b){b.BankFeedApplication=Backbone.Model.extend({initialize:function(a){this._super(a);this.banks=a.banks},defaults:{type:"Trading Account",applicationMethod:"PAPER","creditCardAccount.ccFirst":"XXXX","creditCardAccount.ccSecond":"XXXX","creditCardAccount.ccThird":"XXXX"},validation:{financialInstitutionId:{required:!0},applicationMethod:{required:!0},acceptedTerms:function(a){if(!0!==a)return" "},"bankAccount.accountName":{required:function(a){return this._validateRequiredField("accountName",
a)},maxLength:100},"bankAccount.accountNumber":{required:function(a){return this._validateRequiredField("accountNumber",a)},conditionalPattern:function(){return this._bankAccountNumberPattern()}},"bankAccount.accountType":{required:function(a){return this._validateRequiredField("accountType",a)},maxLength:100},"bankAccount.bsb":{required:function(a){return this._validateRequiredField("bsb",a)},pattern:"digits"},"bankAccount.bsbBank":{required:function(a){return this._validateRequiredField("bsbBank",
a)},pattern:"digits"},"bankAccount.bsbBranch":{required:function(a){return this._validateRequiredField("bsbBranch",a)},pattern:"digits"},"bankAccount.accountSuffix":{required:function(a){return this._validateRequiredField("accountSuffix",a)},pattern:"digits"},"bankAccount.branchName":{required:function(a){return this._validateRequiredField("branchName",a)},maxLength:100},"creditCardAccount.nameOnCard":{required:function(a){return this._validateRequiredField("nameOnCard",a)},maxLength:100},"creditCardAccount.lastFourDigits":{required:function(a){return this._validateRequiredField("lastFourDigits",
a)},pattern:"digits",maxLength:4}},_bankAccountNumberPattern:function(){return this.isAccountNumberAllowCharacter()?"digitsAndAlphanumeric":"digits"},_validateRequiredField:function(a,b){if(!this.isOnlineApplication()){var c=this.banks.get(this.get("financialInstitutionId"));if(c&&!0===c.get(a+"Required")&&_.isBlank(b))return"This field is required"}},isOnlineApplication:function(){var a;this.banks&&(a=this.banks.get(this.get("financialInstitutionId")));var b=!_.isUndefined(a),c="ONLINE"===this.get("applicationMethod");
return FeatureTagUtils.isFeatureAvailable(FeatureTag.BANK_FEED_APPLICATION_WITHOUT_HACKS)?b&&c:b&&c&&"CBA"!==a.get("code")},isAccountNumberAllowCharacter:function(){var a=this.get("financialInstitutionId"),b;this.banks&&(b=this.banks.get(a));return"undefined"!==typeof a&&b&&!0===b.get("allowAlphanumeric")},resetToDefault:function(){this.clear({silent:!0}).set(this.defaults)},clearAccountDetails:function(){_.each(this.attributes,function(a,b){(_(b).startsWith("bankAccount.")||_(b).startsWith("creditCardAccount."))&&
this.set(b,this.defaults[b])}.bind(this))},url:function(){return this.isOnlineApplication()?UrlUtils.apiUrl(la.BusinessSettings.getBusinessId(),"/bank-feeds/online"):UrlUtils.apiUrl(la.BusinessSettings.getBusinessId(),"/bank-feeds/applications")},toJSON:function(){var a=this._super();if(this.isOnlineApplication()){var b=this.get("financialInstitutionId"),b=this.banks.get(b);_.isEmpty(b)||(a.bankName=b.get("name"),a.bankCode=b.get("code"))}else a.bankAccount={bankName:this.get("bankAccount.bankName"),
branchName:this.get("bankAccount.branchName"),accountName:this.get("bankAccount.accountName"),bsb:this.get("bankAccount.bsb"),bsbBank:this.get("bankAccount.bsbBank"),bsbBranch:this.get("bankAccount.bsbBranch"),accountNumber:this.get("bankAccount.accountNumber"),accountType:this.get("bankAccount.accountType"),accountSuffix:this.get("bankAccount.accountSuffix")},a.creditCardAccount={bankName:this.get("creditCardAccount.bankName"),branchName:this.get("creditCardAccount.branchName"),nameOnCard:this.get("creditCardAccount.nameOnCard"),
lastFourDigits:this.get("creditCardAccount.lastFourDigits")},delete a.banks;return a}})});ns("la.models.commons",function(b){b.ComputedModel=Backbone.Model.extend({set:function(a,b,c){this._super(a,b,c);_(a).isObject()&&this.computeValues&&(this.computeValues(b),this.trigger("computed",b));return this}})});
ns("la.models.banking",function(b){b.BankTransaction=la.models.commons.ComputedModel.extend({validation:{note:{required:!0}},computeValues:function(a){Backbone.Model.prototype.set.call(this,{formattedDate:DateUtils.backendToFrontendWithoutException(this.get("transactionDate")),legacyFormattedDate:this.get("transactionDate").replace("T"," "),spent:$.money.formatNumeric(this.get("withdrawal")),formattedGst:$.money.formatNumeric(this.get("gst")),received:$.money.formatNumeric(this.get("deposit")),allocateOrMatchMessage:this._getAllocateOrMatchMessage(),
allocateOrMatchOnClickClass:this._getAllocateOrMatchOnClickClass(),allocatedAccountName:this._getAccountName("allocatedAccountId"),transferredFromAccountName:this._getAccountName("transferredFromAccountId"),transferredToAccountName:this._getAccountName("transferredToAccountId"),hasPotentialMatches:this._hasPotentialMatches(),linked:this.isLinked(),isSimpleAllocation:this._isSimpleAllocation(),formattedAmount:this._getFormattedAmount()},a)},_getFormattedAmount:function(){return this.get("withdrawal")?
"("+$.money.formatNumeric(this.get("withdrawal"))+")":$.money.formatNumeric(this.get("deposit"))},url:function(){return UrlUtils.apiUrl(la.BusinessSettings.getBusinessId(),"/banktransaction/"+this.get("id"))},isDeposit:function(){return!_(this.get("deposit")).isBlank()},getAmount:function(){return this.isDeposit()?this.get("deposit"):this.get("withdrawal")},updateMatchCountIfChanged:function(a){this.get("matchCount")!==a&&this.set({matchCount:a})},clearLinkData:function(){this.set({gstCode:null,allocated:!1,
split:!1,matched:!1,transfer:!1,linkedReferenceNumber:null,allocatedAccountId:null,transferredFromAccountId:null,transferredToAccountId:null},{silent:!0})},_getAllocateOrMatchMessage:function(){if(this.get("allocated"))return this.get("split")?"Split across accounts":this._getAccountName("allocatedAccountId");if(this.get("transfer"))return _(this.get("deposit")).isBlank()?"Transferred to "+this._getAccountName("transferredToAccountId"):"Transferred from "+this._getAccountName("transferredFromAccountId");
var a=this.get("matchCount");return this.get("matched")?this.get("linkedToMultipleCashTransactions")||this.get("linkedToMultipleAccrualTransactions")?"Split across transactions":"Matched to "+(_.isUndefined(la.models.TransactionType[this.get("linkedType")])?"":la.models.TransactionType[this.get("linkedType")].description.toLowerCase()+" ")+this.get("linkedReferenceNumber"):1<a?a+" matches available":1===a?a+" match available":"Allocate me"},isLinked:function(){return this._isSplit()||this._isAllocated()||
this._isMatched()||this._isTransfer()},_getAllocateOrMatchOnClickClass:function(){if(this.get("allocated")){if(this.get("split"))return"allocate-transaction-tab"}else{if(this.get("transfer"))return"transfer-transaction-tab";this.get("matchCount");if(this.get("matched")||this._hasPotentialMatches())return"match-transaction-tab"}return"showDropDown"},_isSimpleAllocation:function(){return this._isAllocated()&&!this._isSplit()&&!this._isTransfer()&&!this._isMatched()},_hasPotentialMatches:function(){var a=
this.get("matchCount");return!_(a).isBlank()&&0<a},_isSplit:function(){return!0===this.get("split")},_isAllocated:function(){return!0===this.get("allocated")},_isMatched:function(){return!0===this.get("matched")},_isTransfer:function(){return!0===this.get("transfer")},_getAccountName:function(a){if(_(this.accounts).isEmpty())return null;var b=this,c=this.accounts.filter(function(c){return c.get("id")===b.get(a)});return _(c).isEmpty()?null:c[0].get("name")}})});
ns("la.models.banking",function(b){b.BankTransactionBulkAction=la.models.Model.extend({validation:{allocateToAccountId:{required:!0},taxCode:function(a){return this.validateTaxCodeIsRequired(a)}},unAllocateUrl:function(){return UrlUtils.apiUrl(la.BusinessSettings.getBusinessId(),"/banktransactions/unlink")},allocateUrl:function(){return UrlUtils.apiUrl(la.BusinessSettings.getBusinessId(),"/banktransactions/bulk-allocate")},reportUrl:function(){return UrlUtils.apiUrl(la.BusinessSettings.getBusinessId(),
"/banktransactions/coding-report.pdf")},validateTaxCodeIsRequired:function(a){if(!_.isBlank(this.get("allocateToAccountId"))&&_.isBlank(a)&&la.BusinessSettings.isRegisteredForGst())return"This field is required"}})});ns("la.models.banking",function(b){b.BankTransactionLink=la.models.Model.extend({url:function(){var a="/banktransactions/"+this.get("bankTransactionId")+"/links";return UrlUtils.apiUrl(la.BusinessSettings.getBusinessId(),a)}})});
ns("la.models.banking",function(b){b.BankTransactionNote=la.models.Model.extend({validation:{note:{required:!0}},url:function(){return UrlUtils.apiUrl(la.BusinessSettings.get("businessId"),"/banktransactions/"+this.get("bankTransactionId")+"/note")}})});
ns("la.models.reports",function(b){b.DateFilter=la.models.Model.extend({validation:{from:{required:!0,validDate:!0,notInFuture:!0},to:{required:!0,validDate:!0,afterDate:{from:"from",message:"To date cannot be before from date"}}},initialize:function(a){this.preferenceName=a.preferenceName;this.fromDatePreferenceName=a.preferenceName+"."+la.BusinessSettings.getBusinessId()+".fromDate";this.toDatePreferenceName=a.preferenceName+"."+la.BusinessSettings.getBusinessId()+".toDate";this.set("from",a.from||
sessionStore.get(this.fromDatePreferenceName)||a.bankingDefaultFrom||DateUtils.startOfCurrentFinancialYear());this.set("to",a.to||sessionStore.get(this.toDatePreferenceName)||DateUtils.today())},saveDateFilterPreferences:function(){sessionStore.set(this.fromDatePreferenceName,this.get("from"));sessionStore.set(this.toDatePreferenceName,this.get("to"))}})});
ns("la.models.banking",function(b){b.DateAccountFilter=la.models.reports.DateFilter.extend({ALL_ACCOUNTS_ID:0,initialize:function(a){this._setupDefaultFilterDate(a);this._super(a);var b;a.accountName&&(a=a.accounts.findByName(a.accountName))&&(b=a.get("id"));this.set("accountId",b||sessionStore.get(this.preferenceName+"."+la.BusinessSettings.getBusinessId()+".accountId")||this.ALL_ACCOUNTS_ID)},saveFilterPreferences:function(){sessionStore.set(this.preferenceName+"."+la.BusinessSettings.getBusinessId()+
".accountId",this.get("accountId"));this.saveDateFilterPreferences()},_setupDefaultFilterDate:function(a){a.bankingDefaultFrom=DateUtils.startOfLastMonth()}})});
ns("la.models.banking",function(b){b.HistoryTransaction=la.models.commons.ComputedModel.extend({computeValues:function(a){Backbone.Model.prototype.set.call(this,{formattedDate:DateUtils.backendToFrontendWithoutException(this.get("transactionDate")),legacyFormattedDate:this.get("transactionDate").replace("T"," "),spent:$.money.formatNumeric(this.get("withdrawal")),received:$.money.formatNumeric(this.get("deposit"))},a)}})});ns("la.models.banking",function(b){b.TransactionHistoryFilter=b.DateAccountFilter.extend({initialize:function(a){this._super(_(a).extend({preferenceName:"transactionHistory"}))}})});
ns("la.models.banking.transactions",function(b){b.ImportStatement=la.models.Model.extend({validation:{accountId:{required:!0},statementFileDateFormat:{required:!0},uploadInput:{fn:"validateFile"}},validateFile:function(a,b,c){if(0<$("#uploadInput").length){a=$("#uploadInput")[0].files[0];if(!a)return"This field is required";a=a.name;a=a.toLowerCase();a=a.slice(a.lastIndexOf("."),a.length);if(!_.contains([".qif",".ofx"],a))return"Only .qif or .ofx is allowed"}return""},url:function(){return UrlUtils.webUrl(la.BusinessSettings.getBusinessId(),
"/accounts/"+this.get("accountId")+"/statements.json")}})});
ns("la.models.banking.transactions",function(b){b.Match=la.models.Model.extend({defaults:{filter:"EXACT_MATCH"},validation:{remainingBalance:function(a){if(this.collection.hasMatches()&&0!==a)return"must be 0.00"}},initialize:function(a){this.bankTransactionId=a.bankTransactionId;this.collection=a.collection},url:function(){return UrlUtils.apiUrl(la.BusinessSettings.getBusinessId(),"/banktransactions/"+this.bankTransactionId+"/match")},toJSON:function(){return this.pluckMatches()},pluckMatches:function(){var a=
this.collection.where({matched:!0});return new Backbone.Collection(a.map(function(a){return _.pick(a.toJSON(),["transactionId","lineId","amountApplied"])}))}})});
ns("la.models.banking.transactions",function(b){b.PotentialMatch=la.models.commons.ComputedModel.extend({defaults:{amountApplied:0,validMatch:!0,matched:!1},computeValues:function(a){Backbone.Model.prototype.set.call(this,{formattedDate:DateUtils.backendToFrontendWithoutException(this.get("transactionDate")),formattedAmount:$.money.formatNumeric(this.get("amount")),formattedAmountRemaining:$.money.formatNumeric(this.get("amountRemaining")),formattedAmountApplied:$.money.formatNumeric(this.get("amountApplied")),
formattedAccrualTotal:$.money.formatNumeric(this.get("accrualTotal")),isPartiallyPaidTransaction:this._isPartiallyPaidTransaction(),disabled:this.get("validMatch")?"":"disabled",description:this._getDescription(a)},a)},_isPartiallyPaidTransaction:function(){var a=this.get("accrualTotal"),b=this.get("amountRemaining"),c=this.get("amountApplied"),d=this.get("matched");return!_.isBlank(a)&&d?a>c:a>b},_getDescription:function(a){if(a){var b=this.get("contact")?this.get("contact").id:void 0;a=b?a.contacts.get(b):
void 0;return util.transaction.getTransactionDescription(this.get("type"),a,this.get("reference"),this.get("description"))}return this.get("description")},updateIsValidMatch:function(a){var b=this.get("validMatch");a=this._isValidMatch(a);a!==b&&this.set({validMatch:a})},_isValidMatch:function(a){return this.get("matched")?!0:0===a?!1:this.get("accrual")?!0:this.get("amountRemaining")<=a}})});
ns("la.models.banking.transactions",function(b){b.Transfer=la.models.Model.extend({initialize:function(a){this.bankTransactionId=a.bankTransactionId},url:function(){return UrlUtils.apiUrl(la.BusinessSettings.getBusinessId(),"/banktransactions/"+this.bankTransactionId+"/transfer")}})});
ns("la.models.banking",function(b){b.TransactionsFilter=b.DateAccountFilter.extend({initialize:function(a){this._super(_(a).extend({preferenceName:"bankTransactions"}));this.set({lastFrom:this.get("from"),lastTo:this.get("to")},{silent:!0})},defaults:{processed:"ALL"},isFilteringUnlinkedTransactions:function(){return"UNLINKED"===this.get("processed")}})});
ns("la.models.billflow",function(b){b.BillflowDocument=la.models.Model.extend({url:function(){return this.getBaseUrl("documents/"+this.get("id"))},downloadUrl:function(a){var b="MYOB-DOC-"+moment(this.get("received_at")).format("YYYYMMDDHHmmss");return UrlUtils.apiUrl(a,this._styleUrl("download")+"&fileName="+b)},pdfUrl:function(a){return UrlUtils.apiUrl(a,this._styleUrl("pdf"))},pdfUrlApiPath:function(a){return UrlUtils.apiUrl(a,"/documents/"+this.get("id")+"/url_path?style=pdf")},thumbnailUrl:function(a){return UrlUtils.apiUrl(a,
this._styleUrl("thumbnail"))},_styleUrl:function(a){return"/documents/"+this.get("id")+"/url?style="+a},fetch:function(){this._super(BillflowErrorUtils.unavailableErrorHandler())}})});
ns("la.models.business",function(b){b.Details=la.models.Model.extend({relations:[{type:Backbone.One,key:"address",relatedModel:"la.models.business.BusinessValidatedAddress"},{type:Backbone.One,key:"postalAddress",relatedModel:"la.models.business.BusinessValidatedAddress"}],defaults:{address:new la.models.business.BusinessValidatedAddress},validation:{businessName:{required:!0},contactFirstName:{required:!0},contactLastName:{required:!0},email:{required:!0,email:!0},abn:{required:{"if":function(a,
b){return b.reportable}},abnOrAcn:{required:!0}},irdNumber:{ird:{required:!1}},lockDataDate:function(a,b,c){try{if(a&&DateUtils.parseBackendDate(a).isBefore(c.openingBalanceDate))return"Date should be later than the opening balance date";if(c.dataLocked&&_.isBlank(a))return"Date is required"}catch(d){return d}}},url:function(){return UrlUtils.apiUrl(this.get("id"),"/details")}})});
ns("la.models.business",function(b){b.PrimaryContactCandidates=la.collections.Collection.extend({url:function(){return UrlUtils.apiUrl(la.BusinessSettings.getBusinessId(),"/primaryContactCandidates")}})});
ns("la.models.businesses",function(b){b.AddBusiness=la.models.Model.extend({validation:{firstName:{required:!0},lastName:{required:!0},email:{required:!0,email:!0},phoneNumber:{required:!0},businessName:{required:!0},businessTypeId:{required:!0}},url:function(){var a=UrlUtils.anonymousApiUrl("/businesses");this.isNew()||(a=a+"/"+this.id);return a}})});ns("la.models.commons",function(b){b.Account=la.models.Model.extend({url:function(){return this.getUrl("account")}})});
ns("la.models.commons",function(b){b.Confirmation=Backbone.AssociatedModel.extend({defaults:{buttonYes:!1,buttonNo:!1,buttonClose:!1,buttonYesText:"Yes",buttonNoText:"No",buttonOK:!1,buttonCancel:!1,minimumShowTime:0}})});
ns("la.models.commons",function(b){b.EmailAttachment=la.models.Model.extend({INVALID_SIZE:"Maximum size exceeded (6MB).",validation:{filename:{required:!0,msg:"Please select file to upload."},size:function(a){if(6291456<a)return this.getInvalidSizeMessage}},getDisplayFilename:function(){var a=this.get("filename");if(20<a.length)var b=a.match(/\.[0-9a-z]+$/i),a=a.substring(0,12)+".."+b;return a},validate:function(a,b){if(!a.filename||!a.filename.trim())return"Please select file to upload.";if(6291456<
a.size)return this.getInvalidSizeMessage},getInvalidSizeMessage:function(){return this.INVALID_SIZE}})});
ns("la.models.reports.mixins",function(b){b.DateFilter={validation:{from:{required:!0,notInFuture:!0},to:{required:!0,afterDate:{from:"from",message:"To date cannot be before from date"}}},initialize:function(a){a=a||{};this.fromDatePreferenceName=_.join(".",this.preferencePrefix,la.BusinessSettings.getBusinessId(),"fromDate");this.toDatePreferenceName=_.join(".",this.preferencePrefix,la.BusinessSettings.getBusinessId(),"toDate");this.set({from:a.from||sessionStore.get(this.fromDatePreferenceName)||
DateUtils.startOfCurrentFinancialYear()});this.set({to:a.to||sessionStore.get(this.toDatePreferenceName)||DateUtils.today()})},saveDateFilterPreferences:function(){sessionStore.set(this.fromDatePreferenceName,this.get("from"));sessionStore.set(this.toDatePreferenceName,this.get("to"))}}});
ns("la.models.reports.mixins",function(b){b.LocalPreferences={_getPreferenceName:function(a){return _.join(".",this.preferencePrefix,la.BusinessSettings.getBusinessId(),a)},setFromLocalPreference:function(a,b){var c=this._getPreferenceName(a),c=_.isUndefined(sessionStore.get(c))?b:sessionStore.get(c);this.set(a,c)},setToLocalPreference:function(a){sessionStore.set(this._getPreferenceName(a),this.get(a))}}});
ns("la.models.commons",function(b){b.NextNumber=la.models.Model.extend({url:function(){return UrlUtils.apiUrl(this.get("businessId"),"/nextNumber/"+this.get("type"))}})});
ns("la.models.commons",function(b){b.OnboardingNavigation={Accounts:{title:"Start your client off with the right accounts",contents:["We\u2019ve set up the basic accounts you need to use MYOB Essentials. Now it\u2019s your turn to fully customise the accounts list to your client\u2019s needs.",'Add accounts manually, or save time by importing an accounts list from MYOB AccountRight. You can also use Excel to set up an accounts list to import. Here\u2019s a <a href="http://help.myob.com.au/essentials/sample/ACCOUNTS.TXT" target="_blank">sample to get you started</a>.','You can\u2019t change the basic accounts we\u2019ve already set up, or any accounts that already contain transactions. <a href="http://help.myob.com/wiki/x/OIB2" target="_blank">Learn more</a>.'],
previousText:"Back to Dashboard",previousUrl:"/home",nextHeader:"Next Step",nextText:"Fill in business details",nextUrl:"/settings/businessDetails?show-onboarding=true"},BusinessDetails:{title:"Complete some basic details",contents:["Enter your client's <strong>business name</strong> and <strong>contact details</strong> so they'll appear on their invoices and quotes.","And don't forget to enter their <strong>ABN</strong> so that customers don't withhold extra tax."],previousText:"Back to Accounts list",
previousUrl:"/settings/accounts?show-onboarding=true",nextHeader:"Next Step",nextText:"Complete GST settings",nextUrl:"/settings/gstSettings?show-onboarding=true"},GstSettings:{title:"Tell us how to handle GST",contents:["Make sure MYOB Essentials deals with your client\u2019s GST calculations correctly by choosing their accounting basis and whether they\u2019re registered for GST.","Set up their reporting frequency and BAS options so they can easily run reports to complete their BAS and see their GST balance at a glance on their Dashboard."],
previousText:"Back to Business details",previousUrl:"/settings/businessDetails?show-onboarding=true",nextHeader:"Next Step",nextText:"Set up bank feeds",nextUrl:"/settings/bankFeeds?show-onboarding=true"},BankFeeds:{title:"Get a head start on bank feeds",contents:["Bank feeds can take a few days (online applications) or  a few weeks (paper applications) before transactions start appearing in MYOB Essentials. Start the application process now so it\u2019s ready for your client when they start using the business.",
"You\u2019ll need a signatory of the bank account to authorise the feed, either online through the internet banking portal, or by signing the authorisation form."],previousText:"Back to GST settings",previousUrl:"/settings/gstSettings?show-onboarding=true",nextHeader:"Next Step",nextText:"Invite your clients",nextUrl:"/settings/users?show-onboarding=true"},InviteUsers:{title:"Finished the setup?",contents:["Nice work. Now, hand things over to your client by inviting them to their new MYOB Essentials business.",
"When they accept, you\u2019ll continue to have access to everything in the business, including making changes and running reports."],previousText:"Back to Manage bank feeds",previousUrl:"/settings/bankFeeds?show-onboarding=true",nextHeader:"Next Step",nextText:"Checkout the Dashboard",nextUrl:"/home"}}});
ns("la.models.commons",function(b){b.PreselectBusiness=la.models.Singleton.extend({url:function(){return UrlUtils.apiUrl(this.getBusinessId(),"/preSelect")},select:function(a){this.getBusinessId()!==a&&(this.set({businessId:a}),this.fetch({type:"POST"}))},getBusinessId:function(){return this.get("businessId")}})});
ns("la.models.commons",function(b){b.getSearchableModel=function(a,e){b.searchableMethodLookup={};e=e||[];return a.extend({SEPARATOR:",",getAll:function(a){return _.map(a.split(this.SEPARATOR),function(a){return this.getByFunctionOrAttribute(a)},this).join(this.SEPARATOR)},get:function(a){return this.getByFunctionOrAttribute(a)},toJSON:function(){var a=this._super();_.forEach(e,function(b){a[b]=this.getByFunctionOrAttribute(b)},this);return a},getByFunctionOrAttribute:function(a){var b="",b=this[this.getFunctionName(a)],
b="function"===typeof b?b.apply(this):this.attributes[a];return null===b||"undefined"===typeof b||""===b?"":b},getFunctionName:function(a){"undefined"===typeof b.searchableMethodLookup[a]&&(b.searchableMethodLookup[a]="get"+a.replace(/^([a-z])/,function(a,b,c){return a.toUpperCase()}));return b.searchableMethodLookup[a]}})};b.createSearchableModel=function(a,e,c){return new (b.getSearchableModel(a,e))(c)};b.SearchableModel=b.getSearchableModel(Backbone.Model)});
ns("la.models",function(b){b.ContactEmail=la.models.Model.extend({validation:{additionalEmail:{required:!1,pattern:"email",msg:"Invalid email format"}},isEmpty:function(){return _(this.get("additionalEmail")).isEmpty()}})});
ns("la.models",function(b){b.Contact=la.models.Model.extend({REQUIRED_MESSAGE:"This field is required",relations:[{type:Backbone.One,key:"shippingAddress",relatedModel:"la.models.Address"},{type:Backbone.One,key:"billingAddress",relatedModel:"la.models.Address"},{type:Backbone.Many,key:"additionalEmailsModel",relatedModel:"la.models.ContactEmail"}],defaults:{name:"",active:!0,type:"Customer",shippingAddress:new la.models.Address,billingAddress:new la.models.Address,additionalEmailsModel:[],firstName:"",
lastName:"",abn:"",ird:"",individual:!1,differentBillingAddress:!1,retainedEarningsAccNo:"",retainedEarningsAccName:"",currentYearEarningsAccNo:"",currentYearEarningsAccName:""},validation:{abn:{abn:!0},ird:{ird:{required:!1}},email:{required:!1,pattern:"email",msg:"Invalid email format"},name:function(a){if(!1===this.get("individual")&&_.isBlank(a))return this.REQUIRED_MESSAGE},firstName:function(a){return this.validateIndividualName(a)},lastName:function(a){return this.validateIndividualName(a)},
retainedEarningsAccNo:function(a,b,c){return this.validateAccountNumber(a,c)},retainedEarningsAccName:function(a,b,c){return this.validateAccountName(a,c.type)},currentYearEarningsAccNo:function(a,b,c){return this.validateAccountNumber(a,c)},currentYearEarningsAccName:function(a,b,c){return this.validateAccountName(a,c.type)}},initialize:function(){var a=this.get("additionalEmailsModel")||new la.collections.Collection([]);this.set({shippingAddress:new la.models.Address,billingAddress:new la.models.Address,
additionalEmailsModel:a})},url:function(){return this.getUrl("contacts")},validateIndividualName:function(a){if(!0===this.get("individual")&&_.isBlank(a))return this.REQUIRED_MESSAGE},validateAccountNumber:function(a,b){if(_.str.include(b.type,"Owner")){if(_.isBlank(a))return this.REQUIRED_MESSAGE;if(!a.match(/^[^<>()#%;+'\\\\"]*$/))return"This field cannot contain: < > ( ) # % ; + ' \\ \"";if(10<a.length)return"This field must be at most 10 characters";if(1<_.filter([b.retainedEarningsAccNo,b.currentYearEarningsAccNo],
function(b){return b===a}).length)return"Account number must be unique"}},validateAccountName:function(a,b){if(_.str.include(b,"Owner")){if(_.isBlank(a))return this.REQUIRED_MESSAGE;if(!a.match(/^[^<>()#%;+'\\\\"]*$/))return"This field cannot contain: < > ( ) # % ; + ' \\ \"";if(50<a.length)return"This field must be at most 50 characters"}},validateIRD:function(a){a=a||"";if(la.Config.isNZ()&&!_(a).isBlank()&&!a.toString().match(Backbone.Validation.patterns.ird))return this.INVALID_IRD},hasBusinessNumber:function(){return!_(this.getBusinessNumber()).isBlank()},
getBusinessNumber:function(){return this.get(this._getBusinessNumberField())},setBusinessNumber:function(a,b){this.set(this._getBusinessNumberField(),a,b||{})},canBeReportable:function(){return 0<=this.get("type").indexOf("Supplier")},getFormattedBillingAddress:function(){var a=null,a=this.get("differentBillingAddress")?this.get("billingAddress"):this.get("shippingAddress");return _(a).isUndefined()||_(a).isNull()?"":a.getFormattedString()},getDisplayName:function(){return!0===this.get("individual")?
this.get("firstName")+" "+this.get("lastName"):this.get("name")},getContactName:function(){var a=_(this.get("firstName")).trim(),b=_(this.get("lastName")).trim();return _(a).isBlank()&&_(b).isBlank()?this.get("name"):_([a,b]).compact().join(" ")},isCustomer:function(){return _.str.contains(this.get("type"),"Customer")},toJSON:function(){var a=this.get("additionalEmailsModel").map(function(a){return a.get("additionalEmail")});this.set("additionalEmails",a);this.set("retainedEarningsAccount",_.extend({},
this.get("retainedEarningsAccount"),{number:this.get("retainedEarningsAccNo"),name:this.get("retainedEarningsAccName")}));this.set("currentYearEarningsAccount",_.extend({},this.get("currentYearEarningsAccount"),{number:this.get("currentYearEarningsAccNo"),name:this.get("currentYearEarningsAccName")}));return this._super()},parse:function(a,b){if(null===a)return this._super(a,b);var c=this._super(a,b),d=[];_(c.additionalEmails||[]).each(function(a){d.push(new la.models.ContactEmail({additionalEmail:a}))});
c.retainedEarningsAccount&&_.extend(c,{retainedEarningsAccNo:c.retainedEarningsAccount.number,retainedEarningsAccName:c.retainedEarningsAccount.name});c.currentYearEarningsAccount&&_.extend(c,{currentYearEarningsAccNo:c.currentYearEarningsAccount.number,currentYearEarningsAccName:c.currentYearEarningsAccount.name});_.extend(c,{additionalEmailsModel:d});return c},_getBusinessNumberField:function(){return la.Config.isNZ()?"ird":"abn"}})});
ns("la.models",function(b){b.ContactLite=Backbone.Model.extend({defaults:{active:!0,type:"Customer"},isType:function(a){return _.str.contains(this.get("type"),a)}})});ns("la.models",function(b){b.Email=Backbone.Model.extend({validation:{email:{email:{msg:"invalid email"}}},defaults:{email:""},toJSON:function(){return this.get("email")}})});ns("la.models.gst",function(b){b.ClientGstType=la.models.Model.extend({})});
ns("la.models.gst",function(b){b.Settings=la.models.Model.extend({url:function(){return UrlUtils.apiUrl(this.get("businessId"),"/gstDetail")},validation:{gstAdjustmentInputAccountId:{required:{"if":function(a,b){return!0===b.registeredForGst}},validDate:{"if":function(a,b){return"ANNUALLY"===b.reportingPeriod&&!0===b.registeredForGst}}}}})});
ns("la.models.home",function(b){b.Email=Backbone.Model.extend({url:function(){return UrlUtils.apiUrl(this.get("businessId"),"/email")},validation:{email:{required:function(){return $("#otherEmailRadio").prop("checked")},email:!0}}})});ns("la.models.home.graphs",function(b){b.AgedDebtorGraph=Backbone.Model.extend({url:function(){return UrlUtils.apiUrl(this.get("businessId"),"/home/agedDebtorDetails")}})});
ns("la.models.home.graphs",function(b){b.SalesTargetGraph=Backbone.Model.extend({initialize:function(){this.set("target",this.getSalesTarget())},url:function(){return UrlUtils.apiUrl(this.get("businessId"),"/home/salesDetails")},getSalesTarget:function(){return la.BusinessSettings.getPreferenceWithDefault("salesTarget","target","10000")},setSalesTarget:function(a){_(a).isBlank()&&(a="0");this.set("target",a);la.BusinessSettings.setPreference("salesTarget","target",a)}})});
ns("la.models.home",function(b){b.NoticeBoard=Backbone.Model.extend({url:function(){return UrlUtils.noticeboardUrl()},getContent:function(a){var b=this.get("content");return _.isBlank(b)?"":b.replace(/newstack/g,"app/businesses/"+a).replace(/primestack/g,"app.htm#businesses/"+a).replace(/\/contextPath/g,".")}})});ns("la.models.home",function(b){b.OnBoardingInfo=Backbone.Model.extend({url:function(){return UrlUtils.apiUrl(this.get("businessId"),"/onBoarding")}})});
ns("la.models.home.stats",function(b){b.Billflow=la.models.Model.extend({url:function(){return this.getUrl("home/billflowSummary")}})});ns("la.models.home.stats",function(b){b.GstAmount=Backbone.Model.extend({url:function(){return UrlUtils.apiUrl(this.get("businessId"),"/home/gstAmount?from="+this.get("from")+"&to="+this.get("to"))}})});ns("la.models.home.stats",function(b){b.OpenExpenses=Backbone.Model.extend({url:function(){return UrlUtils.apiUrl(this.get("businessId"),"/home/openExpensesSummary")}})});
ns("la.models.home.stats",function(b){b.OpenInvoices=Backbone.Model.extend({url:function(){return UrlUtils.apiUrl(this.get("businessId"),"/home/openInvoicesSummary")}})});ns("la.models.home.stats",function(b){b.OverdueInvoices=Backbone.Model.extend({url:function(){return UrlUtils.apiUrl(this.get("businessId"),"/home/overdueInvoicesSummary")}})});ns("la.models.home.stats",function(b){b.PaygAndSuperPayable=Backbone.Model.extend({url:function(){return UrlUtils.apiUrl(this.get("businessId"),"/home/paygAndSuperPayable")}})});
ns("la.models.home.stats",function(b){b.TotalBankBalance=Backbone.Model.extend({url:function(){return UrlUtils.apiUrl(this.get("businessId"),"/home/totalBankBalance")}})});ns("la.models.home.stats",function(b){b.TotalCreditCardBalance=Backbone.Model.extend({url:function(){return UrlUtils.apiUrl(this.get("businessId"),"/home/totalCreditCardBalance")}})});
ns("la.models.home.stats",function(b){b.UnallocatedTransactions=Backbone.Model.extend({url:function(){return UrlUtils.apiUrl(this.get("businessId"),"/home/unallocatedTransactions")}})});ns("la.models.invitation",function(b){b.BusinessInvitation=la.models.Model.extend({defaults:{privilege:"STANDARD_USER",sourceType:"invitation"},validation:{firstName:{required:!0},lastName:{required:!0},email:{required:!0,email:!0}},url:function(){return this.getUrl("invitations")}})});
ns("la.models.invitation",function(b){b.Invitation=la.models.Model.extend({defaults:{privilege:2},validation:{firstName:{required:!0},lastName:{required:!0},email:{required:!0,email:!0}},url:function(){return UrlUtils.anonymousApiUrl("/invitations/"+this.get("id"))}})});
ns("la.models.invoices",function(b){b.UnrealisedTransactionLine=Backbone.AssociatedModel.extend({strategy:null,validation:{accountId:{required:!0},taxCode:{required:{"if":function(){return la.BusinessSettings.isRegisteredForGst()}}},quantity:{required:!0},unitPrice:{required:!0},total:{min:-9.999999999E7,max:9.999999999E7}},makeImmutable:function(a){this.strategy=new la.invoices.UnchangedInvoiceLine(this.get("total"),this.get("totalExcludingGst"),this.get("unitPrice"),this.get("quantity"),this.getGstPercentage(),
a)},makeMutable:function(){if(!_.isBlank(this.get("unitPrice"))&&this.isImmutable()){var a;this.getStrategy().isUnitPriceTaxInclusive()?(calc=new LineCalculator(this.getStrategy().unitPrice(),this.getStrategy().quantity(),this.getStrategy().gstPercentage(),!0),a=calc.unitPriceTaxExclusive()):a=this.getStrategy().unitPrice();this.strategy=new la.invoices.ChangedInvoiceLine(a,!1)}},recalculateUnitPrice:function(a){_(this.get("unitPrice")).isBlank()||this.set({unitPrice:this.getStrategy().getUnitPrice(this,
a)})},newUnitPrice:function(a,b){this.strategy=new la.invoices.ChangedInvoiceLine(parseFloat(a,10),b)},getTotal:function(a){return _(this.get("unitPrice")).isUndefined()||_(this.get("quantity")).isUndefined()?"0.00":this.getStrategy().getTotal(this,a)},getGst:function(a){return _(this.get("unitPrice")).isUndefined()||_(this.get("quantity")).isUndefined()?"0.00":this.getStrategy().getGst(this,a)},isImmutable:function(){return this.getStrategy().isImmutable()},getStrategy:function(){null===this.strategy&&
(this.strategy=new la.invoices.ChangedInvoiceLine(this.get("unitPrice"),!1));return this.strategy},isEmpty:function(){return _(["description","accountId","quantity","unitPrice","taxCode"]).every(function(a){return _(this.get(a)).isBlank()}.bind(this))},getGstPercentage:function(){return la.collections.commons.GstTypes.getByCode(this.get("taxCode")).get("rate")}})});
ns("la.models.invoices",function(b){b.UnrealisedTransaction=la.models.Model.extend({relations:[{type:Backbone.Many,key:"lines",relatedModel:"la.models.invoices.UnrealisedTransactionLine"}],defaults:{invoiceNumber:"",gstInclusive:!1,sent:!1,lines:[],status:"OPEN"},validation:{total:{min:0,max:9.999999999E7,msg:"The total amount cannot be negative or greater than 99,999,999.99"},contactId:{required:!0},invoiceNumber:{required:!0},issueDate:{required:!0,validDate:!0},dueDate:{required:!0,afterDate:{from:"issueDate",
message:"Can't be prior to the date of issue"}},lines:{atLeastOne:{msg:"Invoice lines must not be empty"},allValid:{msg:"All invoice lines must be valid"}}},initialize:function(a){a=a||{};_(a.issueDate).isUndefined()&&this.set("issueDate",DateUtils.today());this.updateDueDateOld()},getName:function(){return _(this.get("type")).capitalize()},url:function(){return this.getUrl(this.get("type")+"s")},toJSON:function(){var a=this._super();a.paid=this.isPaid();a.lines=_(a.lines).filter(function(a){return!(new b.UnrealisedTransactionLine(a)).isEmpty()});
return a},updateDueDateOld:function(a){if(DateUtils.isBackendDateValid(this.get("issueDate"))){var b=DateUtils.parseBackendDate(this.get("issueDate"));if(_(a).isBlank()||_(a).startsWith("-"))a=this.paymentTerms();!_(b).isNull()&&b.isValid()&&(a=b.add("days",a),this.set({dueDate:a.format("YYYY-MM-DDTHH:mm:ss")}))}},getSubtotal:function(){return this.get("lines").reduce(function(a,b){return MO.add(a,b.getTotal(this.get("gstInclusive")))},0,this)},getGst:function(){return this.get("lines").reduce(function(a,
b){return MO.add(a,b.getGst(this.get("gstInclusive")))},0,this)},getTotal:function(){return this.get("gstInclusive")?this.getSubtotal():MO.add(this.getSubtotal(),this.getGst())},paymentTerms:function(){return _(this.get("issueDate")).isBlank()||_(this.get("dueDate")).isBlank()?this.get("paymentTermDays"):this._getDateDifference()},_getDateDifference:function(){var a=DateUtils.parseBackendDate(this.get("issueDate"));return DateUtils.parseBackendDate(this.get("dueDate")).diff(a,"days")},isPaid:function(){var a=
this.get("amountPaid");return a===this.get("total")&&0===a?!1:"PAID"===this.get("status")||0<a}})});ns("la.models.invoices",function(b){b.Bill=b.UnrealisedTransaction.extend({defaults:{saleOrPurchase:"purchase",recipient:"Supplier",type:"bill"}});_.extend(b.Bill.prototype.defaults,b.UnrealisedTransaction.prototype.defaults)});
ns("la.invoices",function(b){b.ChangedInvoiceLine=function(a,b){return{getTotal:function(a,b){var e=new LineCalculator(a.get("unitPrice"),a.get("quantity"),a.getGstPercentage(),b);return b?e.grossAmountWithRounding(2).toFixed(2):e.netAmountWithRounding(2).toFixed(2)},getGst:function(a,b){return(new LineCalculator(a.get("unitPrice"),a.get("quantity"),a.getGstPercentage(),b)).taxWithRounding(2).toFixed(2)},getUnitPrice:function(c,d){var f=new TaxCalculator(a,c.getGstPercentage(),b);return d?f.grossAmount():
f.netAmount()},isImmutable:function(){return!1}}}});ns("la.models.invoices",function(b){b.COASettingModel=Backbone.Model.extend({defaults:{payment:""},validation:{account:{required:!0}},url:function(){return UrlUtils.apiUrl(la.BusinessSettings.getBusinessId(),"/settings/invoice/paymentCoa")}})});
ns("la.models.invoices",function(b){b.HistoryFilter=la.models.Model.extend({DEFAULT_CONTACTS_ID:0,DEFAULT_DATE_RANGE_ID:"startOfThisMonth",initialize:function(a){this._super(a);this.type=a.historyType;this.set("contactId",store.get(this.type+".history."+la.BusinessSettings.getBusinessId()+".contactId")||this.DEFAULT_CONTACTS_ID);this.set("dateRange",store.get(this.type+".history."+la.BusinessSettings.getBusinessId()+".dateRange")||this.DEFAULT_DATE_RANGE_ID)},saveFilterPreferences:function(){store.set(this.type+
".history."+la.BusinessSettings.getBusinessId()+".contactId",this.get("contactId"));store.set(this.type+".history."+la.BusinessSettings.getBusinessId()+".dateRange",this.get("dateRange"))}})});
ns("la.models.invoices",function(b){b.HistoryTransaction=la.models.commons.ComputedModel.extend({computeValues:function(a){Backbone.Model.prototype.set.call(this,{formattedDate:DateUtils.backendToFrontendWithoutException(this.get("transactionDate")),formattedAmount:$.money.formatNumeric(this.get("amount")),formattedPaymentAmount:$.money.formatNumeric(this.get("paymentAmount")),formattedType:this._formatType(this.get("type"))},a)},_formatType:function(a){switch(a){case "INVOICE":return"Invoice";case "CUSTOMER_PAYMENT":return"Receipt";
case "CUSTOMER_RETURN":return"Return";case "CUSTOMER_REFUND":return"Refund";case "SALE_CREDIT":return"Credit";case "BILL":return"Bill";case "SUPPLIER_PAYMENT":return"Payment";case "PURCHASE_DEBIT":return"Debit";case "SUPPLIER_RETURN":return"Return";case "SUPPLIER_REFUND":return"Refund"}}})});
ns("la.models.invoices",function(b){b.Invoice=b.UnrealisedTransaction.extend({defaults:{saleOrPurchase:"sale",recipient:"Customer",type:"invoice",layoutType:"COMBINED"}});_.extend(b.Invoice.prototype.defaults,b.UnrealisedTransaction.prototype.defaults)});
ns("la.models.invoices",function(b){b.InvoiceEmail=la.models.Model.extend({defaults:{to:[],cc:[],bcc:"",subject:"",body:"",files:new Backbone.Collection([],{model:la.models.commons.EmailAttachment})},validation:{to:{emailAddresses:{required:!0}},cc:{emailAddresses:{}},subject:{required:!0},body:{required:!0}},initialize:function(a){this._super(a);null===la.BusinessSettings.get("businessEmail")&&(this.set("sendBcc",!1),this.set("hideBcc",!0));this._updateBccEmailAddress(this,this.get("sendBcc"));this.on("change:sendBcc",
this._updateBccEmailAddress);this.get("to").bind("add remove",this._validateToEmailCollection,this)},url:function(){return UrlUtils.apiUrl(la.BusinessSettings.getBusinessId(),"/"+this.get("type")+"s/"+this.get("invoiceId")+"/email")},_validateToEmailCollection:function(){this.validate("to")},_updateBccEmailAddress:function(a,b){this.set("bcc",!0===b?la.BusinessSettings.get("businessEmail"):"")}})});
ns("la.models.invoices",function(b){b.InvoiceEntitlementUsage=la.models.Model.extend({initialize:function(a){this.businessId=a.businessId;this.type=a.type},url:function(){return UrlUtils.apiUrl(this.businessId,"/"+this.type+"s/entitlement-usage")},getRemainingNumber:function(){if(this.get("limitsReached"))return 0;if(this.get("limits")){var a=this.get("usage"),b=this.get("limits");return a>=b?0:b-a}return null},reachLimits:function(){return this.get("limitsReached")||0===this.getRemainingNumber()}})});
ns("la.models.items",function(b){b.Item=la.models.Model.extend({defaults:{active:!0,unitOfMeasure:"Qty"},initialize:function(){this.validation={number:{required:!0,unique:{message:"Item number has been taken"}},name:{required:!0},salePrice:{required:!0},saleAccountId:{required:!0},saleGstCode:{required:!0},purchasePrice:{required:!0},purchaseAccountId:{required:!0},purchaseGstCode:{required:!0},unitOfMeasure:{required:!0}};this.updateRequiredFields()},url:function(){return this.getUrl("items")},isSale:function(){return this.isType("sale")},
isPurchase:function(){return this.isType("purchase")},isType:function(a){return!(this.get("serviceItem")||_(this.get(a+"GstCode")).isBlank()||_(this.get(a+"Price")).isBlank())},description:function(){return this.get("description")||this.get("name")},updateRequiredFields:function(){var a=!this.allSaleFieldsEmpty()||this.allPurchaseFieldsEmpty();this.setSaleFieldsRequired(a);this.setPurchaseFieldsRequired(!this.allPurchaseFieldsEmpty()||this.allSaleFieldsEmpty());this.validate();return a},setSaleFieldsRequired:function(a){this._setRequiredFields("sale",
a)},setPurchaseFieldsRequired:function(a){this._setRequiredFields("purchase",a)},_setRequiredFields:function(a,b){this.validation[a+"Price"].required=b;this.validation[a+"AccountId"].required=b;this.validation[a+"GstCode"].required=b},allSaleFieldsEmpty:function(){return this._allFieldsEmpty("sale")},allPurchaseFieldsEmpty:function(){return this._allFieldsEmpty("purchase")},_allFieldsEmpty:function(a){return this._zeroOrBlank(this.get(a+"Price"))&&_(this.get(a+"AccountId")).isBlank()&&_(this.get(a+
"GstCode")).isBlank()},_zeroOrBlank:function(a){return _(a).isBlank()||0===parseFloat(a)},isEmpty:function(){return _("name salePrice saleAccountId saleGstCode purchasePrice purchaseAccountId purchaseGstCode".split(" ")).every(function(a){return _(this.get(a)).isBlank()}.bind(this))}})});
ns("la.models.invoices",function(b){b.InvoiceItem=la.models.items.Item.extend({initialize:function(a){this._super(a);a="purchase"===a.saleOrPurchase?"sale":"purchase";var b=[a+"Price",a+"AccountId",a+"GstCode"];_(b).each(function(a){this.validation[a]={noneOrAll:{relatedAttributes:_(b).without(a),message:"         "}}}.bind(this))}})});ns("la.models.invoices",function(b){b.PaymentMethod=Backbone.Model.extend({})});
ns("la.collections.invoices",function(b){b.PaymentMethods=Backbone.Collection.extend({model:la.models.invoices.PaymentMethod,initialize:function(a,b){this.businessId=b.businessId;this.invoiceId=b.invoiceId},url:function(){return UrlUtils.apiUrl(this.businessId,"/settings/invoice/"+this.invoiceId+"/paymentMethods")},save:function(){return $.ajax({type:"PUT",url:this.url(),data:JSON.stringify(this.toJSON()),dataType:"json",contentType:"application/json"})}})});
ns("la.models.invoices",function(b){b.Quote=b.UnrealisedTransaction.extend({defaults:{saleOrPurchase:"sale",recipient:"Customer",type:"quote",layoutType:"COMBINED"}});_.extend(b.Quote.prototype.defaults,b.UnrealisedTransaction.prototype.defaults)});
ns("la.invoices",function(b){b.UnchangedInvoiceLine=function(a,b,c,d,f,g){return{getTotal:function(c,d){return d?a:b},getGst:function(c,d){return a-b},getUnitPrice:function(a,b){var e=new LineCalculator(c,d,f,g);return b?g?c:e.unitPriceTaxInclusive():g?e.unitPriceTaxExclusive():c},isImmutable:function(){return!0},unitPrice:function(){return c},quantity:function(){return d},gstPercentage:function(){return f},isUnitPriceTaxInclusive:function(){return g}}}});
ns("la.models.items",function(b){b.ContactTypeAbbreviation="C;C S;S;O;I;R;N".split(";");b.ContactTypeName="Customer;Customer & Supplier;Supplier;Other;Inactive;Reportable;Owner".split(";");b.ContactType=_.object(b.ContactTypeName,b.ContactTypeAbbreviation);b.ContactTypeTooltip=_.object(b.ContactTypeAbbreviation,b.ContactTypeName);b.Contact=Backbone.Model.extend({getAbbreviatedType:function(){return!1===this.attributes.active?"I":la.BusinessSettings.get("businessReportable")&&!0===this.attributes.reportable?
b.ContactType[this.attributes.type]+" R":b.ContactType[this.attributes.type]},getSearchableField:function(){return this.getAll("name,firstName,lastName,phone,mobile,email")}})});ns("la.models.items",function(b){b.ItemImportFile=la.models.Model.extend({relations:[{type:Backbone.Many,key:"items",relatedModel:"la.models.items.Item"}],defaults:{items:[]},validation:{items:{allValid:{msg:"All items must be valid"}}},url:function(){return UrlUtils.apiUrl(la.BusinessSettings.getBusinessId(),"/items/import")}})});
ns("la.models",function(b){la.models.JournalType={NO_TYPE:{id:0,shortDescription:"",description:""},SPEND_MONEY:{id:1,shortDescription:"Spend Mny",description:"Spend Money"},RECEIVE_MONEY:{id:2,shortDescription:"Receive Mny",description:"Receive Money"},JOURNAL_JOURNAL:{id:4,shortDescription:"Gen Jrnl",description:"General Journal"},OPEN_BALANCE:{id:7,shortDescription:"Op Bal",description:"Opening Balance"},JOURNAL_SALES:{id:9,shortDescription:"Gen Jrnl",description:"General Journal"},JOURNAL_PURCHASE:{id:10,
shortDescription:"Gen Jrnl",description:"General Journal"},TRANSFER:{id:14,shortDescription:"Transfer",description:"Transfer"},INVOICE:{id:15,shortDescription:"Invoice",description:"Invoice"},CUSTOMER_PAYMENT:{id:16,shortDescription:"Cust Pmt",description:"Customer Payment"},SALE_DISCOUNT:{id:17,shortDescription:"Sale Disc",description:"Sale Discount"},CUSTOMER_REFUND:{id:18,shortDescription:"Cust Rfnd",description:"Customer Refund"},CUSTOMER_RETURN:{id:19,shortDescription:"Cust Rtrn",description:"Customer Return"},
SALE_CREDIT:{id:21,shortDescription:"Credit Note",description:"Credit Note"},BILL:{id:22,shortDescription:"Bill",description:"Bill"},SUPPLIER_PAYMENT:{id:23,shortDescription:"Supp Pmt",description:"Supplier Payment"},PURCHASE_DISCOUNT:{id:24,shortDescription:"Supp Disc",description:"Supplier Discount"},SUPPLIER_REFUND:{id:25,shortDescription:"Supp Rfnd",description:"Supplier Refund"},SUPPLIER_RETURN:{id:26,shortDescription:"Supp Rtrn",description:"Supplier Return"},PURCHASE_DEBIT:{id:28,shortDescription:"Debit Note",
description:"Debit Note"},PAYROLL:{id:29,shortDescription:"Payroll",description:"Payrun"},QUOTE:{id:30,shortDescription:"Quote",description:"Quote"},getById:function(a){return _(la.models.JournalType).where({id:a})[0]}}});
ns("la.models",function(b){b.MeetTheTeam=la.models.Model.extend({defaults:{totalNumberRequired:3},getTeamEA:function(){return[{id:"p0",name:"Tim Su",strength:"Product Development",weakness:"Not known",coffeeLevel:1,teaLevel:2},{id:"p1",name:"Armin Keyvanloo",strength:"Product Development",weakness:"Stickers",coffeeLevel:1,teaLevel:2},{id:"p2",name:"David Perta",strength:"Quality Assurance",weakness:"Not known",coffeeLevel:1,teaLevel:1},{id:"p3",name:"Eduardo Gomes",strength:"Product Development",
weakness:"Not known",coffeeLevel:1,teaLevel:1},{id:"p4",name:"Felipe Flores",strength:"Product Development",weakness:"Delicious dairy",coffeeLevel:1,teaLevel:1},{id:"p5",name:"Jack Low",strength:"Product Development",weakness:"Colour fill",coffeeLevel:1,teaLevel:1},{id:"p6",name:"James Rowland",strength:"Product Management",weakness:"Chocolate",coffeeLevel:2,teaLevel:1},{id:"p7",name:"Jigger Fantonial",strength:"Quality Assurance",weakness:"Not known",coffeeLevel:1,teaLevel:1},{id:"p8",name:"Kerry Wang",
strength:"Product Development",weakness:"M&M Beans",coffeeLevel:0,teaLevel:1},{id:"p9",name:"Mahesh Shivamallappa",strength:"Business Analysis",weakness:"Baby",coffeeLevel:1,teaLevel:1},{id:"p10",name:"Matt Riley",strength:"Product Development",weakness:"Not known",coffeeLevel:2,teaLevel:1},{id:"p11",name:"Nana Jia",strength:"Product Development",weakness:"Steam buns",coffeeLevel:0,teaLevel:1},{id:"p12",name:"Peter Nham",strength:"Product Management",weakness:"Board games",coffeeLevel:1,teaLevel:1},
{id:"p13",name:"Phil Michael",strength:"Product Development",weakness:"Not known",coffeeLevel:2,teaLevel:2},{id:"p14",name:"Prasanth Musunuri",strength:"Quality Assurance",weakness:"Not known",coffeeLevel:1,teaLevel:1},{id:"p15",name:"Romesh Udalagama",strength:"Business Analysis",weakness:"Not known",coffeeLevel:1,teaLevel:1},{id:"p16",name:"Rui Yang",strength:"Product Development",weakness:"SUBWAY FOOTLONG",coffeeLevel:0,teaLevel:0},{id:"p17",name:"Sohail Siddiqui",strength:"Team Management",weakness:"Not known",
coffeeLevel:2,teaLevel:1},{id:"p18",name:"Wesley Li",strength:"Product Development",weakness:"Coffee",coffeeLevel:3,teaLevel:1},{id:"p19",name:"Nick Bligh",strength:"UX Designer",weakness:"Developers",coffeeLevel:2,teaLevel:1},{id:"p20",name:"Konstantin Ilinov",strength:"Product Development",weakness:"Robots",coffeeLevel:2,teaLevel:1},{id:"p21",name:"Uditha Jayasinghe",strength:"Product Development",weakness:"Not known",coffeeLevel:1,teaLevel:1},{id:"p22",name:"Kiran Ramachandran",strength:"Quality Assurance",
weakness:"Not known",coffeeLevel:1,teaLevel:1}]}})});
ns("la.models.notification",function(b){b.BankTransactionRuleMetricEventHandler=la.models.Singleton.extend({constructor:function(a){a.registerForEvents({callback:this._onNotificationServiceEvent.bind(this),eventContext:"BANK_TRANSACTIONS",sticky:!0})},_onNotificationServiceEvent:function(a){window.analytics&&a.metricTrackingId&&window.analytics.track("rule-metrics",{metricTrackingId:a.metricTrackingId,eventName:"ApplyRule-handleNSEventInTheUI",bankTransactionId:a.bankTransactionId})}})});
ns("la.models.notification",function(b){b.NotificationServiceClient=la.models.Singleton.extend({serialNumber:null,client:null,eventListeners:[],notificationToken:null,serialNumberWithoutSpaces:null,serviceAddress:null,maxNumberOfRetries:-999,numberOfRetiresLeft:-999,FIVE_MINUTES:3E5,constructor:function(a){this.numberOfRetiresLeft=this.maxNumberOfRetries=a||50;this._connect()},_connect:function(){var a=la.Config.get("notificationServiceAuthenticateUrl"),b=la.Config.get("notificationServiceUrl");_.isBlank(b)||
_.isBlank(la.BusinessSettings.get("businessSerialNumber"))||(this.serialNumber=la.BusinessSettings.get("businessSerialNumber"),this.serialNumberWithoutSpaces=this.serialNumber.split(" ").join(""),this.serviceAddress=b+"/connect/",this._createNotificationServiceClient(a))},reset:function(){this.client.close();this.constructor()},resetEventListeners:function(){this.eventListeners=this.eventListeners.filter(function(a){return!!a.sticky})},registerForEvents:function(a){this.eventListeners.push(a)},_createSubscriptions:function(){return{businessSerialNumber:this.serialNumberWithoutSpaces,
subscriptions:[]}},_forwardEvent:function(a){this.eventListeners&&0!==this.eventListeners.length&&!this._eventIsInvalid(a)&&this.eventListeners.forEach(function(b){this._contextsDontMatch(b,a)||b.callback(a.payload)}.bind(this))},_eventIsInvalid:function(a){return!a||!a.payload||!a.payload.context},_contextsDontMatch:function(a,b){return a.eventContext&&a.eventContext!==b.payload.context},_createNotificationServiceClient:function(a){this._authenticate(a)},_authData:function(){return JSON.stringify({authToken:$.cookie(la.AUTH_TOKEN_KEY),
businessSerialNumber:this.serialNumberWithoutSpaces,authServiceBaseUrl:this._getAuthServiceBaseUrl()})},_getAuthServiceBaseUrl:function(){return window.location.origin?window.location.origin+"/"+UrlUtils.context():window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"")+"/"+UrlUtils.context()},_establishServiceConnection:function(a){a.token&&(this.client=new WebSocketClient(this.serviceAddress+a.token),this.client.onopen=function(){console.log("onopen: Connection established with "+
this.serviceAddress);_.isBlank(la.BusinessSettings.get("businessSerialNumber"))||(console.log(JSON.stringify(this._createSubscriptions())),this.client.send(JSON.stringify(this._createSubscriptions())))}.bind(this),this.client.onclose=function(a){!a.wasClean&&0<this.numberOfRetiresLeft?(a=Math.min(100*Math.pow(this.maxNumberOfRetries-this.numberOfRetiresLeft,2),this.FIVE_MINUTES),setTimeout(function(){this._connect()}.bind(this),a),this.numberOfRetiresLeft--):0>=this.numberOfRetiresLeft&&console.log("Exhausted the max number of retries to connect to Notification service!")}.bind(this),
this.client.onmessage=function(a){a&&(console.log("Received message: "+a.data),a=JSON.parse(a.data),this._forwardEvent(a))}.bind(this))},_authenticate:function(a){$.ajax({url:a,type:"POST",data:this._authData(),contentType:"application/json",success:this._establishServiceConnection.bind(this),statusCode:{403:this._log403Error}})},_log403Error:function(a){console.log("Error authenticating with NS");console.log(a)}})});
ns("la.models.payroll.employee",function(b){b.SuperSMSF=la.models.Model.extend({validation:{fundABNOfSMSF:{abn:!0},smsfBSB:{bsbNumber:!0},apraBSB:{bsbNumber:!0}}})});ns("la.models",function(b){b.ValidatedAddress=la.models.Address.extend({validation:{streetAddress1:{required:!0,maxLength:38},streetAddress2:{required:!1,maxLength:38},suburb:{required:!0,maxLength:50},state:{required:{"if":function(a){return la.Config.isAU()}}},postCode:{required:!0,length:4,pattern:"digits",notAllow:{values:["9999"]}}}})});
ns("la.models.payroll.ird",function(b){b.IRDMonthlyReturns=la.models.Model.extend({validation:{contactName:[{required:!0},{maxLength:20},{pattern:/^[^,\[\]\\"]+$/,msg:"Remove invalid characters in the name"}],contactPhone:[{required:!0},{maxLength:12},{pattern:/^([0-9a-zA-Z]*|([0-9a-zA-Z]+[ -])*)[0-9a-zA-Z]+$/,msg:"Remove invalid characters in the phone number"}],contactEmail:[{required:!0},{maxLength:60},{email:!0,msg:"Invalid email address"},{pattern:/^[a-zA-Z0-9-_@\.]+$/,msg:"Invalid email address"}],
irdNumber:{required:!0}},url:function(){return UrlUtils.apiUrl(la.BusinessSettings.getBusinessId(),"/irdReportContact")},parse:function(a,b){var c=DateUtils.serverDate().startOf("month").subtract(1,"month"),c={irdNumber:la.BusinessSettings.get("gstNumber"),month:_.lpad(c.month()+1,2,"0"),year:c.year().toString()};if(null===a)return this._super(c,b);var d=this._super(a,b);_.extend(d,c);return d}})});ns("la.models.payroll.payment_summaries",function(b){b.Allowance=la.models.Model.extend({})});
ns("la.models.payroll.payment_summaries",function(b){b.BusinessDetails=la.models.Model.extend({relations:[{type:Backbone.One,key:"address",relatedModel:"la.models.ValidatedAddress"},{type:Backbone.One,key:"postalAddress",relatedModel:"la.models.ValidatedAddress"}],validation:{businessName:{required:!0},abn:{abn:{required:!0,"if":function(a){return"abn"===a.get("abnOrWpn")}}},wpn:{wpn:{required:!0,"if":function(a){return"wpn"===a.get("abnOrWpn")}}},contactName:{required:{"if":function(a){return a.contactDetailsMandatory}}},
phone:{required:{"if":function(a){return a.contactDetailsMandatory}},phoneNumber:!0},fax:{phoneNumber:!0},email:{required:!1,email:!0}},defaults:{address:new la.models.ValidatedAddress,postalAddress:new la.models.ValidatedAddress,abnOrWpn:"abn"},contactDetailsMandatory:!0,url:function(){return UrlUtils.apiUrl(this.get("businessId"),"/details")},parse:function(a){var b=this.transformAddress(a.address),c;a.postalAddressDifferentAsBusinessAddress&&(c=this.transformAddress(a.postalAddress));var d=_.clone(a);
_.extend(d,{abn:a.abn?a.abn.replace(/[^\d]/g,""):"",abnBranch:_(a.abnBranch).trim(),address:b,postalAddress:c});return d},transformAddress:function(a){var b=la.collections.commons.States.getAll().pluck("name"),c=a.state?a.state.toUpperCase():"",d=a.streetAddress1||"";return{streetAddress1:d&&38<d.length?"":d.replace(/\n/g," "),suburb:a.suburb&&27<a.suburb.length?"":a.suburb,state:_(b).include(c)?c:"",postCode:a.postCode}}})});ns("la.models.payroll.payment_summaries",function(b){b.Deduction=la.models.Model.extend({})});
ns("la.models.payroll.payment_summaries",function(b){b.PaymentSummaryBase=la.models.Model.extend({initialize:function(a){this.set("name",this.name())},name:function(){return _([this.get("firstName"),this.get("lastName")]).compact().join(" ")}})});
ns("la.models.payroll.payment_summaries",function(b){b.Email=b.PaymentSummaryBase.extend({defaults:{email:"",body:"Hi [Employee name],\n\nPlease find attached your PAYG payment summary for the [year] financial year.\n\nRegards,\n\n[Your name]"},validation:{email:{required:!1,pattern:"email",msg:"Invalid email format"},bcc:{required:!1,pattern:"email",msg:"Invalid email format"}},initialize:function(a){a&&a.businessDetails&&this.set("bcc",a.businessDetails.get("email"));this.set("sendBcc",!_.isEmpty(this.get("bcc")));
this._super(a)},url:function(){return UrlUtils.apiUrl(this.get("businessId"),"/paymentsummaries/"+this.get("year")+"/employees/"+this.get("employeeId")+"/email")},resetBody:function(){this.set("body",la.models.payroll.payment_summaries.Email.prototype.defaults.body)}})});
ns("la.collections.payroll.payment_summaries",function(b){b.Allowances=la.collections.Collection.extend({model:la.models.payroll.payment_summaries.Allowance,total:function(){return this.reduce(function(a,b){var c=b.get("overriddenAmount");return a+_(_(c).isBlank()?b.get("amount"):c.toString().replace(/(,|\.$)/g,"")).toNumber(2)},0)},typeFilter:function(a){return this.filter(function(b){return b.get("allocationType")===a})},getGross:function(){return new b.Allowances(this.typeFilter("GROSS"))},getAllowance:function(){return new b.Allowances(this.typeFilter("ALLOWANCE"))},
calculateTotalGross:function(){return this.getGross().total()}})});
ns("la.collections.payroll.payment_summaries",function(b){b.Deductions=la.collections.Collection.extend({model:la.models.payroll.payment_summaries.Deduction,total:function(){return this.reduce(function(a,b){var c=b.get("overriddenAmount");return a+_(_(c).isBlank()?b.get("amount"):c.toString().replace(/(,|\.$)/g,"")).toNumber(2)},0)},unionFees:function(){return this._filterByType("UNION_FEE")},workplaceGiving:function(){return this._filterByType("WORKPLACE_GIVING")},employerSuper:function(){return this._filterByType("EMPLOYER_SUPER")},
_filterByType:function(a){return new b.Deductions(this.filter(function(b){return b.get("allocationType")===a}))}})});
ns("la.models.payroll.payment_summaries",function(b){b.Employee=b.PaymentSummaryBase.extend({relations:[{type:Backbone.One,key:"address",relatedModel:"la.models.ValidatedAddress"},{type:Backbone.Many,key:"allowances",relatedModel:la.models.payroll.payment_summaries.Allowance,collectionType:la.collections.payroll.payment_summaries.Allowances},{type:Backbone.Many,key:"deductions",relatedModel:la.models.payroll.payment_summaries.Deduction,collectionType:la.collections.payroll.payment_summaries.Deductions},
{type:Backbone.Many,key:"additionalRateItems",relatedModel:la.models.payroll.payment_summaries.Allowance,collectionType:la.collections.payroll.payment_summaries.Allowances}],defaults:{address:new la.models.ValidatedAddress,allowances:[],deductions:[],additionalRateItems:[],completed:0},validation:{taxFileNumber:{required:{"if":function(a){return"PROVIDED"===a.get("existingTaxFileNumberStatus")}},auTaxFileNumber:!0},taxFileNumberStatus:{required:{"if":function(a){return"PROVIDED"!==a.get("existingTaxFileNumberStatus")}}},
dateOfBirth:{validDate:!0},workPeriodStart:{required:{"if":function(a){return!1===a.get("workWholeYear")}},notInFuture:!0,sameTaxYear:{from:"workPeriodStart",to:"workPeriodEnd"}},workPeriodEnd:{required:{"if":function(a){return!1===a.get("workWholeYear")}},afterDate:{from:"workPeriodStart",message:"To date cannot be before from date"},sameTaxYear:{from:"workPeriodStart",to:"workPeriodEnd"}},otherIncomeLumpSumAType:{required:{"if":function(a,b){return 0<parseInt(b.otherIncomeLumpSumA||0,10)}},msg:"  "},
otherIncomeLumpSumA:{greaterThanZero:{"if":function(a,b){return!_(b.otherIncomeLumpSumAType).isBlank()}}},otherIncomeLumpSumEPreviousYear:{minIfPresent:{min:400,msg:"Amount cannot be less than $400"}},otherIncomeLumpSumEBeforePreviousYear:{minIfPresent:{min:400,msg:"Amount cannot be less than $400"}}},initialize:function(a){var b={name:this.name(),step:this.get("completed")+1,detailsPagePath:this.detailsPagePath()},c=this.getTaxYearDateRange(a.taxYear);a=this.getWorkPeriod(a.taxYear,this.get("workPeriodStart"),
this.get("workPeriodEnd"));b=$.extend({},b,c);b=$.extend({},b,a);this.set(b)},areAllTotalsValid:function(){return this.isTotalGrossValid()&&this.isTotalGrossGreaterThanOrEqualZero()&&this.isTotalAllowanceValid()&&this.isTotalUnionFeeValid()&&this.isTotalWorkplaceGivingValid()&&this.isTotalEmployerSuperValid()},isTotalGrossValid:function(){return 1E8>this.calculateTotalGross()},isTotalGrossGreaterThanOrEqualZero:function(){return 0<=this.calculateTotalGross()},isTotalAllowanceValid:function(){return 1E8>
this.getTotalAllowance()},isTotalEmployerSuperValid:function(){return 1E8>this.getTotalEmployerSuper()},isTotalWorkplaceGivingValid:function(){return 1E8>this.getTotalWorkplaceGiving()},isTotalUnionFeeValid:function(){return 1E8>this.getTotalUnionFee()},getTaxYearDateRange:function(a){a=DateUtils.startOfAuTaxYear(a-1);var b=DateUtils.parseBackendDate(a),b=b.add("years",1).add("days",-1).format("YYYY-MM-DDTHH:mm:ss");return{taxYearStart:a,taxYearEnd:b}},getWorkPeriod:function(a,b,c){var d=DateUtils.isDateValid(b),
f=DateUtils.isDateValid(c),g={workPeriodStart:b,workPeriodEnd:c};d&&DateUtils.withinTaxYear(DateUtils.parseBackendDate(b),a)||(g.workPeriodStart=this.getTaxYearDateRange(a).taxYearStart);f&&DateUtils.withinTaxYear(DateUtils.parseBackendDate(c),a)||(g.workPeriodEnd=this.getTaxYearDateRange(a).taxYearEnd);return g},updateFromToDate:function(){var a=this.get("taxYear"),b=this.get("workPeriodStart"),c=this.get("workPeriodEnd");this.set(this.getWorkPeriod(a,b,c))},getDefaultDate:function(a){return this.get("workPeriodStart"===
a?"taxYearStart":"taxYearEnd")},detailsPagePath:function(){return"/payroll/employees/"+this.get("employeeId")},getUpdateUrl:function(a,b){return UrlUtils.apiUrl(a,"/paymentsummaries/"+b+"/paymentsummaryemployees/"+this.get("id"))},calculateTotalGross:function(){return this._normalPay()+this._annualLeave()+this._sickLeave()+this._bonus()+this._commission()+this._totalAdditionalRates()+this._totalGrossAllowances()},getTotalAllowance:function(){var a=this.get("allowances");return _(a).isBlank()?0:a.getAllowance().total()},
getTotalEmployerSuper:function(){var a=this.get("deductions");return _(a).isBlank()?0:a.employerSuper().total()},getTotalWorkplaceGiving:function(){var a=this.get("deductions");return _(a).isBlank()?0:a.workplaceGiving().total()},getTotalUnionFee:function(){var a=this.get("deductions");return _(a).isBlank()?0:a.unionFees().total()},lumpSumETotal:function(){var a=this._cleanMoneyValue(this.get("otherIncomeLumpSumEPreviousYear")||"0"),b=this._cleanMoneyValue(this.get("otherIncomeLumpSumEBeforePreviousYear")||
"0");return _(a).toNumber()+_(b).toNumber()},isCompleted:function(){return!this.isAmountInvalid()&&6<=this.get("step")},isReviewed:function(){return this.get("authorisedSignatory")?!0:!1},isEmpDupeCreated:function(){return!0===this.get("empdupeCreated")},isValidForStep:function(a){var b=_(this.validation).clone();this.validation=this.validationForStep(a);var c=this.isValid()&&this.get("address").isValid();4===a&&(c=this.areAllTotalsValid()&&c);this.validation=b;return c},validationForStep:function(a){var b=
this.validation;return 1===a?{taxFileNumber:b.taxFileNumber,taxFileNumberStatus:b.taxFileNumberStatus,dateOfBirth:b.dateOfBirth}:2===a?{workPeriodStart:b.workPeriodStart,workPeriodEnd:b.workPeriodEnd}:3===a||4===a?{}:5===a?{otherIncomeLumpSumA:b.otherIncomeLumpSumA,otherIncomeLumpSumAType:b.otherIncomeLumpSumAType,otherIncomeLumpSumEPreviousYear:b.otherIncomeLumpSumEPreviousYear,otherIncomeLumpSumEBeforePreviousYear:b.otherIncomeLumpSumEBeforePreviousYear}:this.validation},isAmountInvalid:function(){return this._hasNoNonZeroTotal()||
this._isLumpSumEInvalid()||this._hasOnlyLumpSumD()||this._isTotalTaxWithheldInvalid()},invalidAmountType:function(){return this._hasNoNonZeroTotal()?"noNonZeroAmountError":this._isLumpSumEInvalid()?"lumpSumEInvalidError":this._hasOnlyLumpSumD()?"onlyLumpSumDError":this._isTotalTaxWithheldInvalid()?"totalTaxWithheldError":""},_hasNoNonZeroTotal:function(){return 0===this._totalExceptLumpSumD()+_(this.get("otherIncomeLumpSumD")).toNumber()},_isLumpSumEInvalid:function(){return 1E8<=this.lumpSumETotal()},
_hasOnlyLumpSumD:function(){return 0===this._totalExceptLumpSumD()&&0===_(this.get("otherIncomeExemptForeignIncome")).toNumber()&&0!==_(this.get("otherIncomeLumpSumD")).toNumber()},_isTotalTaxWithheldInvalid:function(){var a=_(this.get("overriddenTotalTaxWithheld")||this.get("totalTaxWithheld")||0).toNumber();if(0<a){var b=this.calculateTotalGross()+this.getTotalAllowance()+_(this.get("otherIncomeLumpSumA")).toNumber()+_(this.get("otherIncomeLumpSumEPreviousYear")).toNumber()+_(this.get("otherIncomeLumpSumEBeforePreviousYear")).toNumber()+
_(this.get("otherIncomeCommunityDevelopment")).toNumber()+5*_(this.get("otherIncomeLumpSumB")).toNumber()/100;return a>b}return!1},_totalExceptLumpSumD:function(){var a=this.get("exemptFBT")?_(this.get("otherIncomeReportableFringeBenefitsExempt")).toNumber():0;return this.calculateTotalGross()+this.getTotalAllowance()+this.getTotalEmployerSuper()+a+_(this.get("otherIncomeCommunityDevelopment")).toNumber()+_(this.get("otherIncomeReportableFringeBenefits")).toNumber()+_(this.get("otherIncomeDeductibleOfUnDeductedPriceOfAnnuity")).toNumber()+
_(this.get("otherIncomeLumpSumA")).toNumber()+_(this.get("otherIncomeLumpSumB")).toNumber()+_(this.get("otherIncomeLumpSumEPreviousYear")).toNumber()+_(this.get("otherIncomeLumpSumEBeforePreviousYear")).toNumber()},_totalAdditionalRates:function(){var a=this.get("additionalRateItems");return _(a).isBlank()?0:a.total()},_totalGrossAllowances:function(){var a=this.get("allowances");return _(a).isBlank()?0:a.calculateTotalGross()},_totalAllowances:function(){var a=this.get("allowances");return _(a).isBlank()?
0:a.getAllowance().total()},normalPayWithSuper:function(){var a=this.get("deductions").employerSuper(),a=_(a).isBlank()?0:a.total();return _(this.get("normalPay")).toNumber(2)-a},_normalPay:function(){return this._getAmountFromOriginalAndOverriddenValues(this.normalPayWithSuper(),this.get("overriddenNormalPay"))},_annualLeave:function(){return this._getAmountConsiderZero("overriddenAnnualLeave","annualLeave")},_sickLeave:function(){return this._getAmountConsiderZero("overriddenSickLeave","sickLeave")},
_bonus:function(){return this._getAmountConsiderZero("overriddenBonus","bonus")},_commission:function(){return this._getAmountConsiderZero("overriddenCommission","commission")},_getAmount:function(a,b){return this._getAmountFromOriginalAndOverriddenValues(this.get(b),this.get(a))},_getAmountConsiderZero:function(a,b){return this._getAmountFromOriginalAndOverriddenValuesConsiderZero(this.get(b),this.get(a))},_getAmountFromOriginalAndOverriddenValues:function(a,b){return _(_(b).isBlank()?a:this._cleanMoneyValue(b)).toNumber(2)},
_getAmountFromOriginalAndOverriddenValuesConsiderZero:function(a,b){return _(a).isBlank()||0===a?0:this._getAmountFromOriginalAndOverriddenValues(a,b)},_cleanMoneyValue:function(a){return a.toString().replace(/(,|\.$)/g,"")},isInOtherIncomeStep:function(){return 5<=this.get("step")}})});
ns("la.models.payroll.payment_summaries",function(b){b.LodgingDetails=la.models.Model.extend({relations:[{type:Backbone.One,key:"businessDetails",relatedModel:"la.models.payroll.payment_summaries.BusinessDetails"},{type:Backbone.One,key:"thirdPartyDetails",relatedModel:"la.models.payroll.payment_summaries.BusinessDetails"}],defaults:{thirdParty:!1,businessDetails:new la.models.payroll.payment_summaries.BusinessDetails,thirdPartyDetails:new la.models.payroll.payment_summaries.BusinessDetails},url:function(){return UrlUtils.apiTokenUrl(this.get("businessId"),
"/"+this.get("lodgingType")+"/"+this.get("year"))}})});ns("la.models.payroll.payment_summaries",function(b){b.PaymentSummary=la.models.Model.extend({relations:[{type:Backbone.Many,key:"employees",relatedModel:"la.models.payroll.payment_summaries.Employee"}],defaults:{id:1,employees:[]},validation:{authorisedSignatory:{required:!0}},url:function(){return this.getByYearUrl(this.get("employees").year)},getByYearUrl:function(a){return UrlUtils.apiUrl(this.get("businessId"),"/paymentsummaries/"+a)},toJSON:function(){return this.get("employees").toJSON()}})});
ns("la.models.payroll.paysuper",function(b){b.PaysuperFilter=Backbone.Model.extend({mixins:[la.models.reports.mixins.LocalPreferences],validation:{from:{required:!0,validDate:!0,afterDate:{from:"featureDayOne",message:"Can't be prior to 01/07/2015"}},to:{required:!0,validDate:!0,afterDate:{from:"from",message:"To date cannot be before from date"}}},preferencePrefix:"paySuperPreference",initialize:function(a){this.set("featureDayOne","2015-07-01T00:00:00");this.setFromLocalPreference("from",DateUtils.startOfThisQuarter());
this.setFromLocalPreference("to",DateUtils.today())},saveDatePreference:function(){this.setToLocalPreference("from");this.setToLocalPreference("to")}})});ns("la.models.payroll.paysuper",function(b){b.PaySuperOnboarding=Backbone.Model.extend({initialize:function(a){this._super(a)},defaults:{updateBusinessSettings:!1,updateBankDetails:!1,updateEmployee:!1,numberOfEmployees:0},url:function(){return UrlUtils.apiUrl(la.BusinessSettings.getBusinessId(),"/super/settings/missingInfo")}})});
ns("la.models.payroll.reports",function(b){b.EmployeeListModel=la.models.commons.ComputedModel.extend({computeValues:function(a){Backbone.Model.prototype.set.call(this,{displayName:this.get("active")?this.get("name"):this.get("name")+" (Inactive)"},a);this.trigger("computed")}})});
ns("la.models.registration",function(b){b.Registration=la.models.Model.extend({initialize:function(a){try{this.set("productInfo",window.atob(UrlUtils.getQueryParamValue("product-info")))}catch(b){}},validation:{email:{checkUsername:{required:!0}},phoneNumber:{required:!0,minLength:8,maxLength:25},password:{validPassword:{required:!0}},businessTypeId:{required:!0}},url:function(){return UrlUtils.anonymousApiUrl("/registration")}})});ns("la.models.reports",function(b){b.AccountJournalEntry=la.models.Model.extend({})});
ns("la.models.reports.banking",function(b){b.BankingTransactionsReport=Backbone.Model.extend({mixins:[la.models.reports.mixins.LocalPreferences,la.models.reports.mixins.DateFilter],preferencePrefix:"bankingTransactionsReport",initialize:function(a){this.setFromLocalPreference("cardId","");this.setFromLocalPreference("accountId","");this.setFromLocalPreference("transactionType","");this.setFromLocalPreference("fromRefNo","");this.setFromLocalPreference("toRefNo","");this.setFromLocalPreference("fromAmount",
"");this.setFromLocalPreference("toAmount","")},saveLocalPreferences:function(){this.saveDateFilterPreferences();this.setToLocalPreference("cardId");this.setToLocalPreference("accountId");this.setToLocalPreference("transactionType");this.setToLocalPreference("fromRefNo");this.setToLocalPreference("toRefNo");this.setToLocalPreference("fromAmount");this.setToLocalPreference("toAmount")},validation:{fromRefNo:{lessThan:{field:"toRefNo",message:"Ref. no. from is greater than ref. no. to"}},toRefNo:{greaterThan:{field:"fromRefNo",
message:"Ref. no. to is less than ref. no. from"}},fromAmount:{lessThan:{field:"toAmount",numeric:!0,message:"Amount from is greater than amount to"}},toAmount:{greaterThan:{field:"fromAmount",numeric:!0,message:"Amount to is less than amount from"}}},defaults:{reportName:"XSL_ACCOUNT_REGISTER_REPORT",isGetTransactionEntryReportFilterRequest:!0,isCompanyNameDisplayed:!0,isSelectionDisplayed:!1},pdfUrl:function(){var a={reportName:this.get("reportName"),cardIdTo:this.get("cardId"),cardIdFrom:this.get("cardId"),
accountIdTo:this.get("accountId"),accountIdFrom:this.get("accountId"),transactionType:this.get("transactionType"),fromRefNo:this.get("fromRefNo"),toRefNo:this.get("toRefNo"),fromDate:DateUtils.parseBackendDate(this.get("from")).format("YYYY-MM-DD"),toDate:DateUtils.parseBackendDate(this.get("to")).format("YYYY-MM-DD"),fromAmount:_(this.get("fromAmount")).isBlank()?0:this.get("fromAmount"),toAmount:this.get("toAmount"),isGetTransactionEntryReportFilterRequest:this.get("isGetTransactionEntryReportFilterRequest"),
isCompanyNameDisplayed:this.get("isCompanyNameDisplayed"),isSelectionDisplayed:this.get("isSelectionDisplayed")};return UrlUtils.url("/VerificationProxy?request=/PDFout&"+$.param(a))}})});
ns("la.models.reports.bill",function(b){b.BillsBySupplierReport=Backbone.Model.extend({mixins:[la.models.reports.mixins.LocalPreferences,la.models.reports.mixins.DateFilter],preferencePrefix:"billsBySupplierReport",initialize:function(a){this.setFromLocalPreference("cardId","");this.setFromLocalPreference("expenseStatusList","-1");this.setFromLocalPreference("orderNumberFrom","");this.setFromLocalPreference("orderNumberTo","");this.setFromLocalPreference("fromAmount","");this.setFromLocalPreference("toAmount",
"");this.setFromLocalPreference("isItemDetailIncluded",!0);this.setFromLocalPreference("isSubTotalByItem",!0)},saveLocalPreferences:function(){this.saveDateFilterPreferences();this.setToLocalPreference("cardId");this.setToLocalPreference("expenseStatusList");this.setToLocalPreference("orderNumberFrom");this.setToLocalPreference("orderNumberTo");this.setToLocalPreference("fromAmount");this.setToLocalPreference("toAmount");this.setToLocalPreference("isItemDetailIncluded");this.setToLocalPreference("isSubTotalByItem")},
validation:{orderNumberFrom:{lessThan:{field:"orderNumberTo",message:"Bill no. from is greater than bill no. to"}},orderNumberTo:{greaterThan:{field:"orderNumberFrom",message:"Bill no. to is less than bill no. from"}},fromAmount:{lessThan:{field:"toAmount",numeric:!0,message:"Amount from is greater than amount to"}},toAmount:{greaterThan:{field:"fromAmount",numeric:!0,message:"Amount to is less than amount from"}}},defaults:{reportName:"XSL_SALES_CUSTOMER_REPORT",isGetSalesCustomerReportFilterRequest:!0,
isCompanyNameDisplayed:!0,isSelectionDisplayed:"",invoiceTypeId:15,isItemDetailIncluded:!0,isSubTotalByItem:!0,isSale:0},pdfUrl:function(){var a={reportName:this.get("reportName"),cardIdTo:this.get("cardId"),cardIdFrom:this.get("cardId"),InvoiceStatusList:this.get("expenseStatusList"),statusDesc:this.get("expenseStatusList"),status:this.get("expenseStatusList"),orderNumberFrom:this.get("orderNumberFrom"),orderNumberTo:this.get("orderNumberTo"),invoiceDateFrom:DateUtils.parseBackendDate(this.get("from")).format("YYYY-MM-DD"),
invoiceDateTo:DateUtils.parseBackendDate(this.get("to")).format("YYYY-MM-DD"),fromAmount:_(this.get("fromAmount")).isBlank()?0:this.get("fromAmount"),toAmount:this.get("toAmount"),isGetSalesCustomerReportFilterRequest:this.get("isGetSalesCustomerReportFilterRequest"),isCompanyNameDisplayed:this.get("isCompanyNameDisplayed"),isSelectionDisplayed:this.get("isSelectionDisplayed"),invoiceTypeId:this.get("invoiceTypeId"),isItemDetailIncluded:this.get("isItemDetailIncluded"),isSubTotalByItem:this.get("isSubTotalByItem"),
isSale:this.get("isSale")};return UrlUtils.url("/VerificationProxy?request=/PDFout&"+$.param(a))}})});
ns("la.models.reports.bill",function(b){b.BillTransactionsReport=Backbone.Model.extend({mixins:[la.models.reports.mixins.LocalPreferences,la.models.reports.mixins.DateFilter],preferencePrefix:"expenseTransactionsReport",initialize:function(a){this.setFromLocalPreference("cardId","")},saveLocalPreferences:function(){this.saveDateFilterPreferences();this.setToLocalPreference("cardId")},defaults:{reportName:"XSL_PURCHASE_TRANSACTIONS_REPORT",isGetPurchaseTransactionsReportFilterRequest:!0,isCompanyNameDisplayed:!0,
isSelectionDisplayed:""},pdfUrl:function(){var a={reportName:this.get("reportName"),invoiceDateFrom:DateUtils.parseBackendDate(this.get("from")).format("YYYY-MM-DD"),invoiceDateTo:DateUtils.parseBackendDate(this.get("to")).format("YYYY-MM-DD"),cardIdTo:this.get("cardId"),cardIdFrom:this.get("cardId"),isGetPurchaseTransactionsReportFilterRequest:this.get("isGetPurchaseTransactionsReportFilterRequest"),isCompanyNameDisplayed:this.get("isCompanyNameDisplayed"),isSelectionDisplayed:this.get("isSelectionDisplayed")};
return UrlUtils.url("/VerificationProxy?request=/PDFout&"+$.param(a))}})});
ns("la.models.reports.bill",function(b){b.BillsReconciliationReport=Backbone.Model.extend({mixins:[la.models.reports.mixins.LocalPreferences],preferencePrefix:"billsReconciliationReport",validation:{date:{required:!0,validDate:!0}},initialize:function(a){this.setFromLocalPreference("date",DateUtils.today())},saveLocalPreferences:function(){this.setToLocalPreference("date")},pdfUrl:function(){var a={date:DateUtils.parseBackendDate(this.get("date")).format("YYYY-MM-DD")};return UrlUtils.url("/app/report/reconciliation/bills.pdf?"+
$.param(a))}})});
ns("la.models.reports.bill",function(b){b.BillsReport=Backbone.Model.extend({mixins:[la.models.reports.mixins.LocalPreferences,la.models.reports.mixins.DateFilter],preferencePrefix:"billsReport",initialize:function(a){this.setFromLocalPreference("cardId","");this.setFromLocalPreference("invoiceStatusList","-1");this.setFromLocalPreference("orderNumberFrom","");this.setFromLocalPreference("orderNumberTo","");this.setFromLocalPreference("fromAmount","");this.setFromLocalPreference("toAmount","")},saveLocalPreferences:function(){this.saveDateFilterPreferences();
this.setToLocalPreference("cardId");this.setToLocalPreference("invoiceStatusList");this.setToLocalPreference("orderNumberFrom");this.setToLocalPreference("orderNumberTo");this.setToLocalPreference("fromAmount");this.setToLocalPreference("toAmount")},validation:{orderNumberFrom:{lessThan:{field:"orderNumberTo",message:"Bill no. from is greater than bill no. to"}},orderNumberTo:{greaterThan:{field:"orderNumberFrom",message:"Bill no. to is less than bill no. from"}},fromAmount:{lessThan:{field:"toAmount",
numeric:!0,message:"Amount from is greater than amount to"}},toAmount:{greaterThan:{field:"fromAmount",numeric:!0,message:"Amount to is less than amount from"}}},defaults:{reportName:"XSL_PURCHASES_REPORT",isGetPurchasesReportFilterRequest:!0,isCompanyNameDisplayed:!0,isSelectionDisplayed:"",invoiceTypeId:22},pdfUrl:function(){var a={reportName:this.get("reportName"),cardIdTo:this.get("cardId"),cardIdFrom:this.get("cardId"),InvoiceStatusList:this.get("invoiceStatusList"),statusDesc:this.get("invoiceStatusList"),
status:this.get("invoiceStatusList"),orderNumberFrom:this.get("orderNumberFrom"),orderNumberTo:this.get("orderNumberTo"),invoiceDateFrom:DateUtils.parseBackendDate(this.get("from")).format("YYYY-MM-DD"),invoiceDateTo:DateUtils.parseBackendDate(this.get("to")).format("YYYY-MM-DD"),fromAmount:_(this.get("fromAmount")).isBlank()?0:this.get("fromAmount"),toAmount:this.get("toAmount"),isGetPurchasesReportFilterRequest:this.get("isGetPurchasesReportFilterRequest"),isCompanyNameDisplayed:this.get("isCompanyNameDisplayed"),
isSelectionDisplayed:this.get("isSelectionDisplayed"),invoiceTypeId:this.get("invoiceTypeId")};return UrlUtils.url("/VerificationProxy?request=/PDFout&"+$.param(a))}})});
ns("la.models.reports.bill",function(b){b.SupplierPaymentsReport=Backbone.Model.extend({mixins:[la.models.reports.mixins.LocalPreferences,la.models.reports.mixins.DateFilter],preferencePrefix:"supplierPaymentsReport",initialize:function(a){this.setFromLocalPreference("cardId","")},saveLocalPreferences:function(){this.saveDateFilterPreferences();this.setToLocalPreference("cardId")},defaults:{reportName:"XSL_SUPPLIER_PAYMENT_REPORT",isGetSupplierPaymentReportFilterRequest:!0,isCompanyNameDisplayed:!0,
isSelectionDisplayed:""},pdfUrl:function(){var a={reportName:this.get("reportName"),paymentDateFrom:DateUtils.parseBackendDate(this.get("from")).format("YYYY-MM-DD"),paymentDateTo:DateUtils.parseBackendDate(this.get("to")).format("YYYY-MM-DD"),cardIdTo:this.get("cardId"),cardIdFrom:this.get("cardId"),isGetSupplierPaymentReportFilterRequest:this.get("isGetSupplierPaymentReportFilterRequest"),isCompanyNameDisplayed:this.get("isCompanyNameDisplayed"),isSelectionDisplayed:this.get("isSelectionDisplayed")};
return UrlUtils.url("/VerificationProxy?request=/PDFout&"+$.param(a))}})});
ns("la.models.reports.bill",function(b){b.UnpaidBillsReport=Backbone.Model.extend({mixins:[la.models.reports.mixins.LocalPreferences],preferencePrefix:"unpaidBillsReport",validation:{asOfDate:{required:!0,validDate:!0}},initialize:function(a){this.setFromLocalPreference("asOfDate",DateUtils.today());this.setFromLocalPreference("cardId","")},saveLocalPreferences:function(){this.setToLocalPreference("asOfDate");this.setToLocalPreference("cardId")},defaults:{reportName:"XSL_FO_AGED_PAYABLES",isGetAgedReceivablesReportFilterRequest:!0,
isCompanyNameDisplayed:!0,isItemDetailIncluded:!0,isSale:0},pdfUrl:function(){var a={reportName:this.get("reportName"),asOfDate:DateUtils.parseBackendDate(this.get("asOfDate")).format("YYYY-MM-DD"),cardIdTo:this.get("cardId"),cardIdFrom:this.get("cardId"),isGetAgedReceivablesReportFilterRequest:this.get("isGetAgedReceivablesReportFilterRequest"),isCompanyNameDisplayed:this.get("isCompanyNameDisplayed"),isItemDetailIncluded:this.get("isItemDetailIncluded"),isSale:this.get("isSale")};return UrlUtils.url("/VerificationProxy?request=/PDFout&"+
$.param(a))}})});
ns("la.models.reports.business",function(b){b.AccountListReport=Backbone.Model.extend({mixins:[la.models.reports.mixins.LocalPreferences],preferencePrefix:"accountListReport",validation:{asOfDate:{required:!0,validDate:!0}},initialize:function(a){this.setFromLocalPreference("asOfDate",DateUtils.today());this.setFromLocalPreference("isInactive",this.defaults.isInactive);this.setFromLocalPreference("isZeroBalances",this.defaults.isZeroBalances)},saveLocalPreferences:function(){this.setToLocalPreference("asOfDate");this.setToLocalPreference("isInactive");
this.setToLocalPreference("isZeroBalances")},defaults:{reportName:"XSL_RPT_ACCOUNT_LIST",isInactive:!0,isZeroBalances:!1,accountType:-1,isGetAccountListReportFilterRequest:!0,isCompanyNameDisplayed:!0,includeSubtotals:!1},pdfUrl:function(){var a={reportName:this.get("reportName"),asOfDate:DateUtils.parseBackendDate(this.get("asOfDate")).format("YYYY-MM-DD"),isInactive:this.get("isInactive"),isZeroBalances:this.get("isZeroBalances"),accountType:this.get("accountType"),isGetAccountListReportFilterRequest:this.get("isGetAccountListReportFilterRequest"),
isCompanyNameDisplayed:this.get("isCompanyNameDisplayed"),includeSubtotals:this.get("includeSubtotals")};return UrlUtils.url("/VerificationProxy?request=/PDFout&"+$.param(a))}})});
ns("la.models.reports.business",function(b){b.BalanceSheet=la.models.Model.extend({validation:{to:{required:!0,notInFuture:!0}},initialize:function(a){this.toDatePreferenceName="balanceSheetReport."+la.BusinessSettings.get("businessId")+".toDate";this.set({to:a.to||sessionStore.get(this.toDatePreferenceName)||DateUtils.today()})},savePreference:function(){sessionStore.set(this.toDatePreferenceName,this.get("to"))}})});
ns("la.models.reports.business",function(b){b.BalanceSheetData=la.models.Model.extend({initialize:function(a){},url:function(){var a=this.get("to"),a=_(a).isUndefined()?DateUtils.today():a,b=this.get("showCents")?2:0,a="/balanceSheetReport?reportDate="+DateUtils.convertToBackendFormat(a)+"&precision="+b;return UrlUtils.apiUrl(this.get("businessId"),a)}})});
ns("la.models.reports.business",function(b){b.ContactReport=Backbone.Model.extend({mixins:[la.models.reports.mixins.LocalPreferences],preferencePrefix:"contactReport",initialize:function(){this.setFromLocalPreference("cardType",this.defaults.cardType);this.setFromLocalPreference("isInactive",this.defaults.isInactive)},saveLocalPreferences:function(){this.setToLocalPreference("cardType");this.setToLocalPreference("isInactive")},defaults:{reportName:"XSL_RPT_CARD_LIST",isGetCardListReportFilterRequest:"true",
cardType:"-10",isCompanyNameDisplayed:"true",isSelectionDisplayed:"false",isInactive:"true"},pdfUrl:function(){var a={reportName:this.get("reportName"),isGetCardListReportFilterRequest:this.get("isGetCardListReportFilterRequest"),cardType:this.get("cardType"),isCompanyNameDisplayed:this.get("isCompanyNameDisplayed"),isSelectionDisplayed:this.get("isSelectionDisplayed"),isInactive:this.get("isInactive")};return UrlUtils.url("/VerificationProxy?request=/PDFout&"+$.param(a))}})});
ns("la.models.reports.business",function(b){b.GstReport=Backbone.Model.extend({mixins:[la.models.reports.mixins.LocalPreferences,la.models.reports.mixins.DateFilter],preferencePrefix:"gstReport",initialize:function(a){a=a||{};var b=la.BusinessSettings.getServerDate();this.set("period",a.period||1);this.setFromLocalPreference("gstBasis",this.defaults.gstBasis);this.setFromLocalPreference("type",this.defaults.type);this.setFromLocalPreference("year",b.format("YYYY"));this.setFromLocalPreference("end",
b.endOf("month").format("YYYY-MM-DD"))},saveLocalPreferences:function(){this.saveDateFilterPreferences();this.setToLocalPreference("gstBasis");this.setToLocalPreference("type");this.setToLocalPreference("year");this.setToLocalPreference("end")},defaults:{gstBasis:!0,type:"detailed"},pdfUrl:function(){var a=this.get("type"),b=this._getQueryParams(a);return la.Config.isAU()?UrlUtils.url("/app/report/gst/form.pdf?au&"+$.param(b)):UrlUtils.url("/app/report/gst/"+a+".pdf?nz&"+$.param(b))},checkUrl:function(){if(la.Config.isNZ()){var a=
this.get("type"),b=this._getQueryParams(a);return UrlUtils.url("/report/gst/"+a+"/has-entries.json?nz&"+$.param(b))}throw"checkUrl is only valid for NZ";},_getQueryParams:function(a){return la.Config.isNZ()&&"form"===a?{end:this.get("end"),period:this.get("period"),gstBasis:this.get("gstBasis")?1:2}:{from:DateUtils.parseBackendDate(this.get("from")).format("YYYY-MM-DD"),to:DateUtils.parseBackendDate(this.get("to")).format("YYYY-MM-DD"),gstBasis:this.get("gstBasis")?1:2}}})});
ns("la.models.reports.business",function(b){b.JournalReport=Backbone.Model.extend({mixins:[la.models.reports.mixins.DateFilter],preferencePrefix:"journalReport",defaults:{reportName:"XSL_JOURNAL_REPORT",user:"All",isGetJournalReportFilterRequest:"true",isCompanyNameDisplayed:"true",isSelectionDisplayed:"false"},pdfUrl:function(){var a={reportName:this.get("reportName"),user:this.get("user"),isGetJournalReportFilterRequest:this.get("isGetJournalReportFilterRequest"),isCompanyNameDisplayed:this.get("isCompanyNameDisplayed"),
isSelectionDisplayed:this.get("isSelectionDisplayed"),fromDate:DateUtils.backendToFrontend(this.get("from")),toDate:DateUtils.backendToFrontend(this.get("to"))};return UrlUtils.url("/VerificationProxy?request=/PDFout&"+$.param(a))}})});
ns("la.models.reports.business",function(b){b.TrialBalanceReport=Backbone.Model.extend({mixins:[la.models.reports.mixins.LocalPreferences],preferencePrefix:"trialBalance",initialize:function(){var a=la.BusinessSettings.getServerDate().format("YYYY");this.setFromLocalPreference("yearIndex",a);this.setFromLocalPreference("isRounding",this.defaults.isRounding);this.setFromLocalPreference("month",this.defaults.month)},saveLocalPreferences:function(){this.setToLocalPreference("yearIndex");this.setToLocalPreference("isRounding");
this.setToLocalPreference("month")},validation:{yearIndex:{required:!0,length:4,pattern:"digits",min:1970},isRounding:{required:!0},month:{required:!0}},defaults:{reportName:"XSL_RPT_TRIAL_BALANCE",isGetTrialBalanceReportFilterRequest:!0,isZeroBalances:!1,isCompanyNameDisplayed:!0,isSelectionDisplayed:!1,isRounding:!1,month:1},pdfUrl:function(){var a={reportName:this.get("reportName"),yearIndex:this.get("yearIndex"),isRounding:this.get("isRounding"),month:this.get("month"),isGetTrialBalanceReportFilterRequest:this.get("isGetTrialBalanceReportFilterRequest"),
isZeroBalances:this.get("isZeroBalances"),isCompanyNameDisplayed:this.get("isCompanyNameDisplayed"),isSelectionDisplayed:this.get("isSelectionDisplayed")};return UrlUtils.url("/VerificationProxy?request=/PDFout&"+$.param(a))}})});
ns("la.models.reports",function(b){b.FinancialYearDateFilter=la.models.reports.DateFilter.extend({validation:{from:{required:!0,notInFuture:!0,sameFinancialYear:!0},to:{required:!0,afterDate:{from:"from",message:"To date cannot be before from date"},sameFinancialYear:!0}},initialize:function(a){a=a.preferenceName;var b=la.BusinessSettings.get("businessId");this.fromDatePreferenceName=a+"."+b+".fromDate";this.toDatePreferenceName=a+"."+b+".toDate";a=sessionStore.get(this.fromDatePreferenceName);sessionStore.get(this.toDatePreferenceName);
b=DateUtils.startOfCurrentFinancialYear();DateUtils.today();this.set({to:sessionStore.get(this.toDatePreferenceName)||DateUtils.today(),from:a},{validate:!0});this.isValid()||this.set({to:DateUtils.today(),from:b},{validate:!0})}})});ns("la.models.reports",function(b){b.GstReportJournalEntry=la.models.Model.extend({})});ns("la.models.reports",function(b){b.JournalEntry=la.models.Model.extend({})});
ns("la.models.reports.payroll",function(b){b.LeaveReport=la.models.reports.DateFilter.extend({initialize:function(a){this.set("businessId",la.BusinessSettings.getBusinessId());a=new Backbone.Collection([{id:"",name:"Select a leave type"},{id:"annual",name:"Annual leave"},{id:"sick",name:"Sick leave"}]);this.set("leaveTypes",a);this.initModelFromSession()},defaults:{periodSelection:"YTD",employeeId:void 0,showInactive:!1},validation:{leaveType:{required:!0},from:{required:function(a,b,c){return"YTD"!==
c.periodSelection},notInFuture:!0},to:{required:function(a,b,c){return"YTD"!==c.periodSelection},afterDate:{from:"from",message:"To date cannot be before from date"}}},pdfUrl:function(a){return this._pdfUrl(a)},_pdfUrl:function(a){return this._getReportsBaseUrl(a)},_recordCountUrl:function(){return this._getReportsBaseUrl("leave-report-count")},_getReportsBaseUrl:function(a){var b=this._getUrlQueryParams();return UrlUtils.webUrl(this.get("businessId"),"/reports/"+a+"?"+$.param(b))},_getUrlQueryParams:function(){var a=
"YTD"===this.get("periodSelection");return{leaveType:this.get("leaveType"),employeeId:this.get("employeeId"),isInactiveIncluded:this.get("showInactive"),from:a?DateUtils.startOfYear():DateUtils.convertToBackendFormat(this.get("from")),to:a?DateUtils.today():DateUtils.convertToBackendFormat(this.get("to"))}},initModelFromSession:function(){this._initModelFromSession("from","leaveReportFrom",!0);this._initModelFromSession("to","leaveReportTo",!0);this._initModelFromSession("periodSelection","periodSelection",
!1)},_initModelFromSession:function(a,b,c){(b=sessionStore.get(b))&&this.set(a,c?DateUtils.convertToFrontendFormat(b):b)}})});
ns("la.models.reports.payroll",function(b){b.PayrollReport=Backbone.Model.extend({mixins:[la.models.reports.mixins.LocalPreferences,la.models.reports.mixins.DateFilter],preferencePrefix:"payrollReport",initialize:function(a){this.set("businessId",la.BusinessSettings.getBusinessId());this.setFromLocalPreference("periodSelection",this.defaults.periodSelection)},saveLocalPreferences:function(){this.saveDateFilterPreferences();this.setToLocalPreference("periodSelection")},defaults:{periodSelection:"YTD"},
summaryPdfUrl:function(){return this._pdfUrl("payrollSummaryReport.pdf")},detailedPdfUrl:function(){return this._pdfUrl("payrollDetailedReport.pdf")},_pdfUrl:function(a){var b="YTD"===this.get("periodSelection"),b={periodSelection:this.get("periodSelection"),periodStart:b?"":DateUtils.backendToFrontend(this.get("from")),periodEnd:b?"":DateUtils.backendToFrontend(this.get("to"))};return UrlUtils.webUrl(this.get("businessId"),"/"+a+"?"+$.param(b))}})});
ns("la.models.reports",function(b){b.PLReportFinancialYearDateFilter=la.models.reports.FinancialYearDateFilter.extend({initialize:function(a){this._super(a);"QUICK_LINKS"===sessionStore.get("PL.breakdownSelector")&&(sessionStore.remove(this.fromDatePreferenceName),sessionStore.remove(this.toDatePreferenceName))}})});
ns("la.collections.reports",function(b){b.ProfitLossReport=la.models.Model.extend({initialize:function(a){this.set("cashBasis",a.cashBasis||!1);this.set("showAccountNumbers",a.showAccountNumbers||!1);this.set("showCents",a.showCents||!1);this.set("breakdown",a.breakdown)},url:function(){var a=_.isUndefined(this.get("breakdown"))?"/profitLossReport":"/profitLossReportBreakdown";return UrlUtils.apiUrl(this.get("businessId"),a+"?from="+this.get("from")+"&to="+this.get("to")+"&cashBasis="+this.get("cashBasis")+
"&showAccountNumbers="+this.get("showAccountNumbers")+"&showCents="+this.get("showCents")+"&breakdown="+this.get("breakdown")+"&parenthesisNegative="+this.get("parenthesisNegative"))}})});ns("la.models.reports",function(b){b.ReportPreferences=la.models.Model.extend({})});
ns("la.models.reports.sales",function(b){b.CustomerInvoicesReport=Backbone.Model.extend({mixins:[la.models.reports.mixins.LocalPreferences,la.models.reports.mixins.DateFilter],preferencePrefix:"customerInvoicesReport",initialize:function(a){this.setFromLocalPreference("cardId","");this.setFromLocalPreference("invoiceStatusList","-1");this.setFromLocalPreference("orderNumberFrom","");this.setFromLocalPreference("orderNumberTo","");this.setFromLocalPreference("fromAmount","");this.setFromLocalPreference("toAmount",
"")},saveLocalPreferences:function(){this.saveDateFilterPreferences();this.setToLocalPreference("cardId");this.setToLocalPreference("invoiceStatusList");this.setToLocalPreference("orderNumberFrom");this.setToLocalPreference("orderNumberTo");this.setToLocalPreference("fromAmount");this.setToLocalPreference("toAmount")},validation:{orderNumberFrom:{lessThan:{field:"orderNumberTo",message:"Invoice no. from is greater than invoice no. to"}},orderNumberTo:{greaterThan:{field:"orderNumberFrom",message:"Invoice no. to is less than invoice no. from"}},
fromAmount:{lessThan:{field:"toAmount",numeric:!0,message:"Amount from is greater than amount to"}},toAmount:{greaterThan:{field:"fromAmount",numeric:!0,message:"Amount to is less than amount from"}}},defaults:{reportName:"XSL_CUSTOMER_INVOICES_REPORT",isGetCustomerInvoicesReportFilterRequest:!0,isCompanyNameDisplayed:!0,isSelectionDisplayed:!1,invoiceTypeId:15},pdfUrl:function(){var a={reportName:this.get("reportName"),cardIdTo:this.get("cardId"),cardIdFrom:this.get("cardId"),InvoiceStatusList:this.get("invoiceStatusList"),
statusDesc:this.get("invoiceStatusList"),status:this.get("invoiceStatusList"),orderNumberFrom:this.get("orderNumberFrom"),orderNumberTo:this.get("orderNumberTo"),invoiceDateFrom:DateUtils.parseBackendDate(this.get("from")).format("YYYY-MM-DD"),invoiceDateTo:DateUtils.parseBackendDate(this.get("to")).format("YYYY-MM-DD"),fromAmount:_(this.get("fromAmount")).isBlank()?0:this.get("fromAmount"),toAmount:this.get("toAmount"),isGetCustomerInvoicesReportFilterRequest:this.get("isGetCustomerInvoicesReportFilterRequest"),
isCompanyNameDisplayed:this.get("isCompanyNameDisplayed"),isSelectionDisplayed:this.get("isSelectionDisplayed"),invoiceTypeId:this.get("invoiceTypeId")};return UrlUtils.url("/VerificationProxy?request=/PDFout&"+$.param(a))}})});
ns("la.models.reports.sales",function(b){b.CustomerPaymentsReport=Backbone.Model.extend({mixins:[la.models.reports.mixins.LocalPreferences,la.models.reports.mixins.DateFilter],preferencePrefix:"customerPaymentsReport",initialize:function(a){this.setFromLocalPreference("cardId","")},saveLocalPreferences:function(){this.saveDateFilterPreferences();this.setToLocalPreference("cardId")},defaults:{reportName:"XSL_CUSTOMER_PAYMENT_REPORT",isGetCustomerPaymentReportFilterRequest:!0,isCompanyNameDisplayed:!0,
isSelectionDisplayed:!1},pdfUrl:function(){var a={reportName:this.get("reportName"),paymentDateFrom:DateUtils.parseBackendDate(this.get("from")).format("YYYY-MM-DD"),paymentDateTo:DateUtils.parseBackendDate(this.get("to")).format("YYYY-MM-DD"),cardIdTo:this.get("cardId"),cardIdFrom:this.get("cardId"),isGetCustomerPaymentReportFilterRequest:this.get("isGetCustomerPaymentReportFilterRequest"),isCompanyNameDisplayed:this.get("isCompanyNameDisplayed"),isSelectionDisplayed:this.get("isSelectionDisplayed")};
return UrlUtils.url("/VerificationProxy?request=/PDFout&"+$.param(a))}})});
ns("la.models.reports.sales",function(b){b.ItemListReport=Backbone.Model.extend({mixins:[la.models.reports.mixins.LocalPreferences],preferencePrefix:"itemListReport",initialize:function(a){this.setFromLocalPreference("isInactive",this.defaults.isInactive)},saveLocalPreferences:function(){this.setToLocalPreference("isInactive")},defaults:{reportName:"XSL_RPT_ITEM_LIST",isInactive:!0,isGetItemListReportFilterRequest:!0,isCompanyNameDisplayed:!0,itemType:"",itemIdFrom:"",itemIdTo:"",isSelectionDisplayed:""},
pdfUrl:function(){var a={reportName:this.get("reportName"),isInactive:this.get("isInactive"),isGetItemListReportFilterRequest:this.get("isGetItemListReportFilterRequest"),isCompanyNameDisplayed:this.get("isCompanyNameDisplayed"),itemType:this.get("itemType"),itemIdFrom:this.get("itemIdFrom"),itemIdTo:this.get("itemIdTo"),isSelectionDisplayed:this.get("isSelectionDisplayed")};return UrlUtils.url("/VerificationProxy?request=/PDFout&"+$.param(a))}})});
ns("la.models.reports.sales",function(b){b.PaymentTimeByCustomerReport=Backbone.Model.extend({mixins:[la.models.reports.mixins.LocalPreferences,la.models.reports.mixins.DateFilter],preferencePrefix:"paymentTimeByCustomerReport",initialize:function(a){this.setFromLocalPreference("cardId","")},saveLocalPreferences:function(){this.saveDateFilterPreferences();this.setToLocalPreference("cardId")},defaults:{reportName:"XSL_CUSTOMER_DAYS_TO_PAY_REPORT",isGetCustomerDaysToPayReportFilterRequest:!0,isCompanyNameDisplayed:!0,
isSelectionDisplayed:!1},pdfUrl:function(){var a={reportName:this.get("reportName"),invoiceDateFrom:DateUtils.parseBackendDate(this.get("from")).format("YYYY-MM-DD"),invoiceDateTo:DateUtils.parseBackendDate(this.get("to")).format("YYYY-MM-DD"),cardIdTo:this.get("cardId"),cardIdFrom:this.get("cardId"),isGetCustomerDaysToPayReportFilterRequest:this.get("isGetCustomerDaysToPayReportFilterRequest"),isCompanyNameDisplayed:this.get("isCompanyNameDisplayed"),isSelectionDisplayed:this.get("isSelectionDisplayed")};
return UrlUtils.url("/VerificationProxy?request=/PDFout&"+$.param(a))}})});
ns("la.models.reports.sales",function(b){b.SalesByCustomerReport=Backbone.Model.extend({mixins:[la.models.reports.mixins.LocalPreferences,la.models.reports.mixins.DateFilter],preferencePrefix:"salesByCustomerReport",initialize:function(a){this.setFromLocalPreference("cardId","");this.setFromLocalPreference("invoiceStatusList","-1");this.setFromLocalPreference("orderNumberFrom","");this.setFromLocalPreference("orderNumberTo","");this.setFromLocalPreference("fromAmount","");this.setFromLocalPreference("toAmount",
"");this.setFromLocalPreference("isItemDetailIncluded",!0);this.setFromLocalPreference("isSubTotalByItem",!0)},saveLocalPreferences:function(){this.saveDateFilterPreferences();this.setToLocalPreference("cardId");this.setToLocalPreference("invoiceStatusList");this.setToLocalPreference("orderNumberFrom");this.setToLocalPreference("orderNumberTo");this.setToLocalPreference("fromAmount");this.setToLocalPreference("toAmount");this.setToLocalPreference("isItemDetailIncluded");this.setToLocalPreference("isSubTotalByItem")},
validation:{orderNumberFrom:{lessThan:{field:"orderNumberTo",message:"Invoice no. from is greater than invoice no. to"}},orderNumberTo:{greaterThan:{field:"orderNumberFrom",message:"Invoice no. to is less than invoice no. from"}},fromAmount:{lessThan:{field:"toAmount",numeric:!0,message:"Amount from is greater than amount to"}},toAmount:{greaterThan:{field:"fromAmount",numeric:!0,message:"Amount to is less than amount from"}}},defaults:{reportName:"XSL_SALES_CUSTOMER_REPORT",isGetSalesCustomerReportFilterRequest:!0,
isCompanyNameDisplayed:!0,isSelectionDisplayed:"",invoiceTypeId:15,isItemDetailIncluded:!0,isSubTotalByItem:!0},pdfUrl:function(){var a={reportName:this.get("reportName"),cardIdTo:this.get("cardId"),cardIdFrom:this.get("cardId"),InvoiceStatusList:this.get("invoiceStatusList"),statusDesc:this.get("invoiceStatusList"),status:this.get("invoiceStatusList"),orderNumberFrom:this.get("orderNumberFrom"),orderNumberTo:this.get("orderNumberTo"),invoiceDateFrom:DateUtils.parseBackendDate(this.get("from")).format("YYYY-MM-DD"),
invoiceDateTo:DateUtils.parseBackendDate(this.get("to")).format("YYYY-MM-DD"),fromAmount:_(this.get("fromAmount")).isBlank()?0:this.get("fromAmount"),toAmount:this.get("toAmount"),isGetSalesCustomerReportFilterRequest:this.get("isGetSalesCustomerReportFilterRequest"),isCompanyNameDisplayed:this.get("isCompanyNameDisplayed"),isSelectionDisplayed:this.get("isSelectionDisplayed"),invoiceTypeId:this.get("invoiceTypeId"),isItemDetailIncluded:this.get("isItemDetailIncluded"),isSubTotalByItem:this.get("isSubTotalByItem")};
return UrlUtils.url("/VerificationProxy?request=/PDFout&"+$.param(a))}})});
ns("la.models.reports.sales",function(b){b.SalesByItemReport=Backbone.Model.extend({mixins:[la.models.reports.mixins.LocalPreferences,la.models.reports.mixins.DateFilter],preferencePrefix:"salesByItemReport",initialize:function(a){this.setFromLocalPreference("itemId","");this.setFromLocalPreference("invoiceStatusList","-1");this.setFromLocalPreference("orderNumberFrom","");this.setFromLocalPreference("orderNumberTo","");this.setFromLocalPreference("fromAmount","");this.setFromLocalPreference("toAmount",
"");this.setFromLocalPreference("isCustomerDetailIncluded",!0);this.setFromLocalPreference("isSubTotalByCustomer",!0)},saveLocalPreferences:function(){this.saveDateFilterPreferences();this.setToLocalPreference("itemId");this.setToLocalPreference("invoiceStatusList");this.setToLocalPreference("orderNumberFrom");this.setToLocalPreference("orderNumberTo");this.setToLocalPreference("fromAmount");this.setToLocalPreference("toAmount");this.setToLocalPreference("isCustomerDetailIncluded");this.setToLocalPreference("isSubTotalByCustomer")},
validation:{orderNumberFrom:{lessThan:{field:"orderNumberTo",message:"Invoice no. from is greater than invoice no. to"}},orderNumberTo:{greaterThan:{field:"orderNumberFrom",message:"Invoice no. to is less than invoice no. from"}},fromAmount:{lessThan:{field:"toAmount",numeric:!0,message:"Amount from is greater than amount to"}},toAmount:{greaterThan:{field:"fromAmount",numeric:!0,message:"Amount to is less than amount from"}}},defaults:{reportName:"XSL_SALES_ITEM_REPORT",isGetSalesItemReportFilterRequest:!0,
isCompanyNameDisplayed:!0,isSelectionDisplayed:"",invoiceTypeId:15,isCustomerDetailIncluded:!0,isSubTotalByCustomer:!0},pdfUrl:function(){var a={reportName:this.get("reportName"),itemIdTo:this.get("itemId"),itemIdFrom:this.get("itemId"),statusDesc:this.get("invoiceStatusList"),status:this.get("invoiceStatusList"),orderNumberFrom:this.get("orderNumberFrom"),orderNumberTo:this.get("orderNumberTo"),invoiceDateFrom:DateUtils.parseBackendDate(this.get("from")).format("YYYY-MM-DD"),invoiceDateTo:DateUtils.parseBackendDate(this.get("to")).format("YYYY-MM-DD"),
fromAmount:_(this.get("fromAmount")).isBlank()?0:this.get("fromAmount"),toAmount:this.get("toAmount"),isGetSalesItemReportFilterRequest:this.get("isGetSalesItemReportFilterRequest"),isCompanyNameDisplayed:this.get("isCompanyNameDisplayed"),isSelectionDisplayed:this.get("isSelectionDisplayed"),invoiceTypeId:this.get("invoiceTypeId"),isCustomerDetailIncluded:this.get("isCustomerDetailIncluded"),isSubTotalByCustomer:this.get("isSubTotalByCustomer")};return UrlUtils.url("/VerificationProxy?request=/PDFout&"+
$.param(a))}})});
ns("la.models.reports.sales",function(b){b.SalesReconciliationReport=Backbone.Model.extend({mixins:[la.models.reports.mixins.LocalPreferences],preferencePrefix:"salesReconciliationReport",validation:{date:{required:!0,validDate:!0}},initialize:function(a){this.setFromLocalPreference("date",DateUtils.today())},saveLocalPreferences:function(){this.setToLocalPreference("date")},pdfUrl:function(){var a={date:DateUtils.parseBackendDate(this.get("date")).format("YYYY-MM-DD")};return UrlUtils.url("/app/report/reconciliation/sales.pdf?"+$.param(a))}})});
ns("la.models.reports.sales",function(b){b.SalesTransactionsReport=Backbone.Model.extend({mixins:[la.models.reports.mixins.LocalPreferences,la.models.reports.mixins.DateFilter],preferencePrefix:"salesTransactionsReport",initialize:function(a){this.setFromLocalPreference("cardId","")},saveLocalPreferences:function(){this.saveDateFilterPreferences();this.setToLocalPreference("cardId")},defaults:{reportName:"XSL_SALES_REGISTER_REPORT",isGetSalesRegisterReportFilterRequest:!0,isCompanyNameDisplayed:!0,
isSelectionDisplayed:!1},pdfUrl:function(){var a={reportName:this.get("reportName"),invoiceDateFrom:DateUtils.parseBackendDate(this.get("from")).format("YYYY-MM-DD"),invoiceDateTo:DateUtils.parseBackendDate(this.get("to")).format("YYYY-MM-DD"),cardIdTo:this.get("cardId"),cardIdFrom:this.get("cardId"),isGetSalesRegisterReportFilterRequest:this.get("isGetSalesRegisterReportFilterRequest"),isCompanyNameDisplayed:this.get("isCompanyNameDisplayed"),isSelectionDisplayed:this.get("isSelectionDisplayed")};
return UrlUtils.url("/VerificationProxy?request=/PDFout&"+$.param(a))}})});
ns("la.models.reports.sales",function(b){b.UnpaidInvoicesReport=Backbone.Model.extend({mixins:[la.models.reports.mixins.LocalPreferences],preferencePrefix:"unpaidInvoicesReport",validation:{asOfDate:{required:!0,validDate:!0}},initialize:function(a){this.setFromLocalPreference("asOfDate",DateUtils.today());this.setFromLocalPreference("cardId","")},saveLocalPreferences:function(){this.setToLocalPreference("asOfDate");this.setToLocalPreference("cardId")},defaults:{reportName:"XSL_FO_AGED_RECEIVABLES",
isGetAgedReceivablesReportFilterRequest:!0,isCompanyNameDisplayed:!0,isItemDetailIncluded:!0},pdfUrl:function(){var a={reportName:this.get("reportName"),asOfDate:DateUtils.parseBackendDate(this.get("asOfDate")).format("YYYY-MM-DD"),cardIdTo:this.get("cardId"),cardIdFrom:this.get("cardId"),isGetAgedReceivablesReportFilterRequest:this.get("isGetAgedReceivablesReportFilterRequest"),isCompanyNameDisplayed:this.get("isCompanyNameDisplayed"),isItemDetailIncluded:this.get("isItemDetailIncluded")};return UrlUtils.url("/VerificationProxy?request=/PDFout&"+
$.param(a))}})});ns("la.models.settings.account",function(b){b.Import=Backbone.Model.extend({initialize:function(a){this.businessId=a.businessId},url:function(){return UrlUtils.apiUrl(this.get("businessId"),"/coa/accounts/import/validate")}})});ns("la.models.settings.account",function(b){b.ImportPreview=Backbone.Model.extend({})});ns("la.models.settings",function(b){b.BankFeedMigrateAccountConfirmation=la.models.Model.extend({defaults:{message:"All transactions from this bank feed will be moved to the new linked account. Are you sure you want to change the linked account for this bank feed?"}})});
ns("la.models.settings",function(b){b.Export=Backbone.Model.extend({defaults:{format:"mye"},validation:{name:{required:{"if":function(a,b){return!0}}},from:{required:!0,notInFuture:!0,sameFinancialYear:{message:"Dates must be within the same financial year"}},to:{required:!0,afterDate:{from:"from",message:"To date cannot be before from date"},sameFinancialYear:{message:"Dates must be within the same financial year"}}},mixins:[la.models.reports.mixins.DateFilter],preferencePrefix:"export",url:function(){return UrlUtils.apiTokenUrl(la.BusinessSettings.getBusinessId(),
"/mye.mye?fromDate="+this.get("from")+"&toDate="+this.get("to"))},newUrl:function(){return UrlUtils.apiTokenUrl(la.BusinessSettings.getBusinessId(),"/export/jobs",{format:this.get("format"),fromDate:this.get("from"),toDate:this.get("to"),name:this.get("name")})}})});
ns("la.models.settings",function(b){b.Import=Backbone.Model.extend({defaults:{importType:"items",selectCustomer:"customer"},url:function(){return"contacts"===this.get("importType")?"VerificationProxy?request=/JSP/Cards/CardUpload.jsp":"VerificationProxy?request=/JSP/Items/ItemsImportXML.jsp"}})});
ns("la.models.settings.invoice",function(b){b.CustomBusinessDetails=la.models.Model.extend({defaults:{includeBusinessName:!0,includeTradingName:!1,includeAddress:!0,includePhone:!0,includeEmail:!1,includeWebsite:!1,includeAbn:!0,includeGstNumber:!1}})});
ns("la.models.settings.invoice",function(b){b.EmailTemplate=la.models.Model.extend({validation:{subject:{required:!1,maxLength:250,validHandlebarsTemplate:!0},body:{required:!1,maxLength:5E3,validHandlebarsTemplate:!0}},initialize:function(a){this.type=a.type},url:function(){return UrlUtils.apiUrl(la.BusinessSettings.getBusinessId(),"/settings/invoice/email-template/"+this.type)}})});
ns("la.models.settings.invoice",function(b){b.OnlinePaymentOptions=la.models.Model.extend({idAttribute:"businessId",defaults:{status:"NOT_APPLIED"},initialize:function(a){this.set("businessId",a.businessId)},url:function(){return UrlUtils.apiUrl(this.get("businessId"),"/settings/invoice/payment/online")},hasApplied:function(){return"APPLIED"===this.get("status")}})});
ns("la.models.settings.invoice",function(b){b.PaymentOptionsAU=la.models.Model.extend({idAttribute:"businessId",validation:{paymentTermDays:{required:{"if":function(a,b){return"NO_TERMS"!==b.paymentTermType}}},bankName:{required:{"if":function(a,b){return!0===b.directDeposit}}},accountName:{required:{"if":function(a,b){return!0===b.directDeposit}}},bsbNumber:{required:{"if":function(a,b){return!0===b.directDeposit}},pattern:"number",minLength:6,maxLength:6},accountNumber:{required:{"if":function(a,
b){return!0===b.directDeposit}},pattern:"number"},mailRecipient:{required:{"if":function(a,b){return!0===b.mail}}}},initialize:function(a){this.set("businessId",a.businessId);this.listenTo(this,"change:mail",this._defaultToBusinessIfRequired)},_defaultToBusinessIfRequired:function(){this.get("mail")&&!this.get("mailRecipient")&&this.set("mailRecipient","BUSINESS")},_resetDirectDepositFieldsIfRequired:function(){this.get("directDeposit")||(this.set("bankName",""),this.set("accountName",""),this.set("bsbNumber",
""),this.set("accountNumber",""))},_resetMailFieldsIfRequired:function(){this.get("mail")||this.set("mailRecipient","")},url:function(){return UrlUtils.apiUrl(this.get("businessId"),"/settings/invoice/au/payment")},save:function(a,b){this._resetDirectDepositFieldsIfRequired();this._resetMailFieldsIfRequired();return Backbone.Model.prototype.save.call(this,a,b)}})});
ns("la.models.settings.invoice",function(b){b.PaymentOptionsNZ=la.models.Model.extend({idAttribute:"businessId",validation:{paymentTermDays:{required:{"if":function(a,b){return"NO_TERMS"!==b.paymentTermType}}},bankName:{required:{"if":function(a,b){return!0===b.directDeposit}}},accountName:{required:{"if":function(a,b){return!0===b.directDeposit}}},bankNumber:{required:{"if":function(a,b){return!0===b.directDeposit}},pattern:"number",maxLength:2},branch:{required:{"if":function(a,b){return!0===b.directDeposit}},
pattern:"number",maxLength:4},accountNumber:{required:{"if":function(a,b){return!0===b.directDeposit}},pattern:"number",maxLength:8},suffix:{required:{"if":function(a,b){return!0===b.directDeposit}},pattern:"number",maxLength:3},mailRecipient:{required:{"if":function(a,b){return!0===b.mail}}}},initialize:function(a){this.set("businessId",a.businessId);this.listenTo(this,"change:mail",this._defaultToBusinessIfRequired)},_defaultToBusinessIfRequired:function(){this.get("mail")&&!this.get("mailRecipient")&&
this.set("mailRecipient","BUSINESS")},_resetDirectDepositFieldsIfRequired:function(){this.get("directDeposit")||(this.set("bankName",""),this.set("accountName",""),this.set("bankNumber",""),this.set("branch",""),this.set("accountNumber",""),this.set("suffix",""))},_resetMailFieldsIfRequired:function(){this.get("mail")||this.set("mailRecipient","")},url:function(){return UrlUtils.apiUrl(this.get("businessId"),"/settings/invoice/nz/payment")},save:function(a,b){this._resetDirectDepositFieldsIfRequired();
this._resetMailFieldsIfRequired();return Backbone.Model.prototype.save.call(this,a,b)}})});
ns("la.models.settings.invoice",function(b){b.Template=la.models.Model.extend({idAttribute:"businessId",relations:[{type:Backbone.One,key:"businessDetailOptions",relatedModel:"la.models.settings.invoice.CustomBusinessDetails"}],defaults:{template:"RENAISSANCE",logoPlacementLeft:!0,addressEnvelopePosition:!1,headerColour:"#FDB813",headerTextColour:"#000000",layoutType:"COMBINED",businessDetailOptions:new la.models.settings.invoice.CustomBusinessDetails({})},validation:{headerColour:{required:!0,pattern:"colour",
msg:"This is not a valid HEX value"},headerTextColour:{required:!0,pattern:"colour",msg:"This is not a valid HEX value"}},url:function(){return UrlUtils.apiUrl(this.get("businessId"),"/settings/invoiceTemplate")}})});ns("la.models.settings.invoice",function(b){b.TemplateHeaderImage=la.models.Model.extend({idAttribute:"businessId",url:function(){return UrlUtils.apiUrl(this.get("businessId"),"/settings/invoiceTemplate/headerImage")}})});
ns("la.models.settings",function(b){b.Logo=la.models.Model.extend({idAttribute:"businessId",url:function(){return UrlUtils.apiUrl(this.get("businessId"),"/logo")},destroy:function(a){this.id="dummy";return this._super(a)}})});ns("la.models.subscription",function(b){b.SubscriptionPayment=la.models.Model.extend({url:function(){return this.getUrl("subscription")}})});
ns("la.models",function(b){la.models.TransactionType={SPEND_MONEY:{id:1,shortDescription:"Spend Mny",description:"Spend Money"},RECEIVE_MONEY:{id:2,shortDescription:"Receive Mny",description:"Receive Money"},GENERAL_JOURNAL:{id:4,shortDescription:"Gen Jrnl",description:"General Journal"},OPEN_BALANCE:{id:7,shortDescription:"Op Bal",description:"Opening Balance"},TRANSFER:{id:14,shortDescription:"Transfer",description:"Transfer"},INVOICE:{id:15,shortDescription:"Invoice",description:"Invoice"},CUSTOMER_PAYMENT:{id:16,
shortDescription:"Cust Pmt",description:"Customer Payment"},SALE_DISCOUNT:{id:17,shortDescription:"Sale Disc",description:"Sale Discount"},CUSTOMER_REFUND:{id:18,shortDescription:"Cust Rfnd",description:"Customer Refund"},CUSTOMER_RETURN:{id:19,shortDescription:"Cust Rtrn",description:"Customer Return"},SALE_CREDIT:{id:21,shortDescription:"Credit Note",description:"Credit Note"},BILL:{id:22,shortDescription:"Bill",description:"Bill"},SUPPLIER_PAYMENT:{id:23,shortDescription:"Supp Pmt",description:"Supplier Payment"},
PURCHASE_DISCOUNT:{id:24,shortDescription:"Supp Disc",description:"Supplier Discount"},SUPPLIER_REFUND:{id:25,shortDescription:"Supp Rfnd",description:"Supplier Refund"},SUPPLIER_RETURN:{id:26,shortDescription:"Supp Rtrn",description:"Supplier Return"},PURCHASE_DEBIT:{id:28,shortDescription:"Debit Note",description:"Debit Note"},PAYROLL:{id:29,shortDescription:"Payroll",description:"Payroll"},getById:function(a){return _(la.models.TransactionType).where({id:a})[0]}}});
ns("la.models.users",function(b){b.User=la.models.Model.extend({defaults:{privilege:"STANDARD_USER",sourceType:"user"},validation:{firstName:{required:!0},lastName:{required:!0},email:{required:!0,email:!0}},url:function(){return this.getUrl("users")}})});
ns("la.models.users",function(b){b.UserInvitation=la.models.Model.extend({initialize:function(a,b){this._super(a,b);this.source=b.source;this.type=b.type;this._populateFromSource()},_populateFromSource:function(){if(this.source){var a=this["_"+this.source.get("sourceType")+"ToModel"].call(this,this.source);this.set(a,{silent:!0})}},url:function(){return this.getUrl(this.source.get("sourceType")+"s")},destroy:function(){this.source.destroy()},fetch:function(){this._super({success:function(a){this.source=
a;this._populateFromSource()}.bind(this)})},_userToModel:function(a){return{type:"user",id:a.get("id"),email:a.get("email"),username:a.get("username"),name:a.get("firstName")+" "+a.get("lastName"),ssoLinked:a.get("ssoLinked"),privilege:_(a.get("privilege")).humanize(),invitationStatus:""}},_invitationToModel:function(a){return{type:"invitation",id:a.get("id"),email:a.get("email"),username:"",name:a.get("firstName")+" "+a.get("lastName"),ssoLinked:!1,privilege:_(a.get("privilege")).humanize(),invitationStatus:"(Invitation Pending)"}}})});
var ACCOUNTS_SORT_TYPE={SPENDING_FIRST:0,INCOME_FIRST:1};
ns("la.collections.commons",function(b){b.Accounts=la.collections.Collection.extend({model:la.models.commons.Account,url:function(){return UrlUtils.apiUrl(la.BusinessSettings.getBusinessId(),"/accounts")},getAccountTypeCount:function(){return _.size(_(this.models).countBy(function(a){return a.get("type")}))},getSelectedAccountsAsString:function(){return _.pluck(this.where({selected:!0}),"id").join(",")},active:function(a){a=a||{};var e=a.whitelist||[];return new b.Accounts(this.filter(function(a){return a.get("active")||
_(e).contains(a.get("id"))}))},findByName:function(a){return this.find(function(b){return b.get("name")===a})},findByNumber:function(a){return this.find(function(b){return b.get("number")===a})},bankingTransactions:function(){return this._filteredByTypes(["Banking","Credit Card"])},allBankingAccounts:function(){return this._filteredByTypes(["Banking","Credit Card"],!0)},sales:function(){return this._filteredByTypes(["Income","Other Income"])},purchases:function(){return this._filteredByTypes(["Expense",
"Cost of Sales","Other Expense","Current Assets","Fixed Assets"])},allocatables:function(){var a=this._filteredByTypes("Income;Expense;Cost of Sales;Other Income;Other Expense;Banking;Credit Card;Current Assets;Current Liabilities;Long Term Liabilities;Fixed Assets;Equity;Retained Earnings".split(";"));return new b.Accounts(a.filter(function(a){return 0<a.get("id")}))},bankingAccountsWithInactiveIndicated:function(){var a=this._filteredByTypes(["Banking","Credit Card"],!0);a.each(function(a){!1===
a.get("active")&&a.set("name",a.get("name")+" (inactive)")});return a},excludes:function(a){return new b.Accounts(this.filter(function(b){return-1===a.indexOf(b.get("id"))}))},_filteredByTypes:function(a,e){return new b.Accounts(this.filter(function(b){var d=b.get("type");return(e?!0:b.get("active"))&&_(a).contains(d)}))},setSortType:function(a){var b;if(a===ACCOUNTS_SORT_TYPE.SPENDING_FIRST)b="Expense;Other Expense;Cost of Sales;Income;Other Income;Banking;Current Assets;Fixed Assets;Credit Card;Current Liabilities;Long Term Liabilities;Equity;Current Earnings;Retained Earnings".split(";");
else if(a===ACCOUNTS_SORT_TYPE.INCOME_FIRST)b="Income;Other Income;Expense;Other Expense;Cost of Sales;Banking;Current Assets;Fixed Assets;Credit Card;Current Liabilities;Long Term Liabilities;Equity;Current Earnings;Retained Earnings".split(";");else throw"wrong parameter passed to Accounts::setSortType";this.comparator=function(a){return("00"+b.indexOf(a.get("type"))).slice(-2)+","+a.get("name")}}})});
ns("la.collections.commons",function(b){b.BaseCollection=la.collections.Collection.extend({fetch:function(a){a=_.extend({reset:!0},a);return this._super(a)},isLastExcludingDestroyed:function(a){var b=this.excludingDestroyed();return b.indexOf(a)===b.size()-1},lengthExcludingDestroyed:function(){return this.excludingDestroyed().size()},excludingDestroyed:function(){return _(this.reject(this._isMarkedForDestruction))},_isMarkedForDestruction:function(a){return a.isDestroyed()}})});
ns("la.collections.commons",function(b){b.Businesses=la.collections.Collection.extend({initialize:function(a,b){this._super(a,b);b=b||{};this.type=b.type},url:function(){return UrlUtils.anonymousApiUrl("/businesses"+(this.type?"?type="+this.type:""))}})});
ns("la.collections.commons",function(b){b.SearchablePager=Backbone.Paginator.clientPager.extend({model:la.models.commons.SearchableModel,paginator_ui:{perPage:10},sortDirection:"asc",initialize:function(a,b){var c=b||{};this._super(a,c);this.options=c;this.paginator_core={type:c.type||"GET",dataType:c.dataType||"json",url:c.url};this.businessId=c.businessId},reset:function(a,b){var c=_({}).extend(this.options,b);this._super(a,c)},resort:function(){this.setSort(this.sortColumn,this.sortDirection)},
setSort:function(a,b){this._super(a,b);this.trigger("sortOrFilter")},goTo:function(a,b){this._super(a,b);this.trigger("sortOrFilter")},setFilterAndSort:function(a,b,c){this._setFilter(a);this.setSort(b,c)},setFieldFilter:function(a){this._setFilter(a);this.pager();this.info();this.trigger("sortOrFilter")},_setFilter:function(a){this.lastFieldFilterRules=this.fieldFilterRules;this.fieldFilterRules=a},fetch:function(a){this.fetching=!0;this.origModels=void 0;a=a||{silent:!0,reset:!0};var b=this,c=a.success;
a.success=function(a,f){b.bootstrap();c&&c(arguments);this.resort()}.bind(this);this._super(a)},actualModels:function(){return _(this.origModels||this.models)}})});ns("la.collections.commons",function(b){b.EditablePager=b.SearchablePager.extend({initialize:function(a){this._super(a);this.listenTo(this,"add",this.resort);this.listenTo(this,"remove",this.resort);this.listenTo(this,"change",this.resort)}})});
ns("la.collections.commons",function(b){b.GstType=Backbone.Model.extend({rateLabel:function(){return _(this.get("rate")).numberFormat(1)+"%"}});b.GstTypes=la.collections.Collection.extend({model:b.GstType,hasCode:function(a){return this.any(function(b){return b.get("gstCode")===a})}});b.GstTypes.getAll=function(a,e){if(la.Config.isNZ()){var c=[new b.GstType({id:3,gstCode:"E",rate:0,name:"Exempt"}),new b.GstType({id:4,gstCode:"I",rate:100,name:"GST on Imported Supplies"}),new b.GstType({id:1,gstCode:"S",
rate:12.5,name:"Standard"}),new b.GstType({id:2,gstCode:"Z",rate:0,name:"Zero-rated"})];!_(e).isBlank()&&DateUtils.parseBackendDate(e).isBefore(DateUtils.parseBackendDate("2010-10-01T00:00:00"))||c.splice(3,0,new b.GstType({id:14,gstCode:"S15",rate:15,name:"Standard 15% GST"}));b.NzGstTypes=new b.GstTypes(c);return b.NzGstTypes}b.AuGstTypes=b.AuGstTypes||new b.GstTypes([new b.GstType({id:5,gstCode:"ABN",rate:-46.5,name:"ABN Not Disclosed - Withholdings",buy:!0,sell:!1}),new b.GstType({id:6,gstCode:"CAP",
rate:10,name:"Capital Acquisitions",buy:!0,sell:!1}),new b.GstType({id:7,gstCode:"EXP",rate:0,name:"Export Sales",buy:!1,sell:!0}),new b.GstType({id:10,gstCode:"GST",rate:10,name:"GST",buy:!0,sell:!0}),new b.GstType({id:8,gstCode:"FRE",rate:0,name:"GST Free",buy:!0,sell:!0}),new b.GstType({id:11,gstCode:"INP",rate:0,name:"Input Taxed Purchases",buy:!0,sell:!1}),new b.GstType({id:12,gstCode:"ITS",rate:0,name:"Input Taxed Sales",buy:!1,sell:!0}),new b.GstType({id:9,gstCode:"GNR",rate:0,name:"Not Registered",
buy:!0,sell:!1}),new b.GstType({id:13,gstCode:"NTR",rate:0,name:"Not Reportable",buy:!0,sell:!0})]);c=b.AuGstTypes;_(a).isUndefined()||"all"===a||(c=_.filter(b.AuGstTypes.models,function(b){return b.get(a)}),c=new b.GstTypes(c));return c};b.GstTypes.getByCode=function(a,e){e&&(DateUtils.parseBackendDate(e).isBefore(DateUtils.parseBackendDate("2010-10-01T00:00:00"))?"S15"===a&&(a="S"):"S"===a&&(a="S15"));var c=b.GstTypes.getAll("all",e).find(function(b){return b.get("gstCode")===a});return _(c).isUndefined()?
new b.GstType({id:"",rate:0,gstCode:a}):c}});
ns("la.collections.commons",function(b){b.PagedCollection=la.collections.commons.BaseCollection.extend({initialize:function(a,b){this._super(a,b||{});this.pageState=new la.collections.commons.PagedCollectionState(this.pageSettings);this.staleRequestAssasinator=new la.collections.commons.PagedCollectionStaleRequestAssasinator},fetchFirstPage:function(a){this.pageState.page=1;a=_.extend({},a,{page:this.pageState.page,beforeTriggerName:"beforeFetchFirstPage"});Backbone.Events.trigger("clean:tableBody");
Backbone.Events.trigger("clean:renderedRowModels");return this.fetch(a)},loadNextPage:function(){this.pageState.page++;return this.fetch({page:this.pageState.page,appendResult:!0})},hasNextPage:function(){return this.pageState.hasMoreData},currentSort:function(){return{sortBy:this.pageState.sortBy,sortDirection:this.pageState.sortDirection}},performSort:function(a,b){return this.fetchFirstPage({sortBy:a,sortDirection:b})},fetch:function(a){var b=a||{},c=b.success,b=this.pageState.generateFetchOptions(_.extend(this.getQueryParams(),
b)),d=this;b.success=function(a,b,e){d.pageState.sync(e,b);d._invoke(c,[a,b,e]);Backbone.trigger("banking:serverSidePagination")};a&&a.beforeTriggerName&&d.trigger(a.beforeTriggerName);return this.staleRequestAssasinator.fetch(this._super.bind(this),b)},_invoke:function(a,b){a&&a.apply(void 0,b)}})});
ns("la.collections.commons",function(b){b.PagedCollectionStaleRequestAssasinator=function(){this.openRequests=[]};b.PagedCollectionStaleRequestAssasinator.prototype={fetch:function(a,b){this._isNewRequest(b.data)&&this._abortStaleRequests();var c=a(b);this.openRequests.push(c);return c},_isNewRequest:function(a){return a&&1===a.page},_abortStaleRequests:function(){this.openRequests.forEach(function(a){a&&(a.abort?a.abort():console.log("openRequest does not have abort() function!",a))});this.openRequests=
[]}}});
ns("la.collections.commons",function(b){b.PagedCollectionState=function(a){a=a||{};this.fetchData={};this.hasMoreData=!0;this.page=1;this.size=a.size||50;this.sortBy=a.sortBy;this.sortDirection=a.sortDirection||"asc"};b.PagedCollectionState.prototype={sync:function(a,b){var c=this._copy(a.data);this._withEachPageSetting(function(a){this[a]=c[a]});this.fetchData=c;this.hasMoreData=(b||[]).length>=this.size},generateFetchOptions:function(a){var b=this._copy(a),c=this._copy(b.data||this.fetchData);this._withEachPageSetting(function(a){c[a]=
b[a]||this[a]});b.remove=b.reset=_.isUndefined(b.appendResult)||!b.appendResult;b.data=c;return b},_withEachPageSetting:function(a){_(["page","size","sortBy","sortDirection"]).each(function(b){a.call(this,b)},this)},_copy:function(a){return _.extend({},a)}}});
ns("la.collections.commons",function(b){b.States={getAll:function(){if(la.Config.isNZ())return b.NzStates=b.NzStates||new Backbone.Collection([]),b.NzStates;b.AuStates=b.AuStates||new Backbone.Collection([{name:"ACT",stateCode:"ACT"},{name:"NSW",stateCode:"NSW"},{name:"NT",stateCode:"NT"},{name:"QLD",stateCode:"QLD"},{name:"SA",stateCode:"SA"},{name:"TAS",stateCode:"TAS"},{name:"VIC",stateCode:"VIC"},{name:"WA",stateCode:"WA"}]);return b.AuStates}}});
ns("la.collections.advisor",function(b){b.BusinessTypes=Backbone.Collection.extend({model:la.models.advisor.BusinessType,initialize:function(a,b){this.businessId=b.businessId},url:function(){return UrlUtils.apiUrl(this.businessId,"/businessTypes")}})});
ns("la.collections.advisor",function(b){b.InvitedBusinesses=la.collections.commons.EditablePager.extend({paginator_ui:{perPage:250},sortColumn:"dateIssued",sortDirection:"asc",model:la.models.commons.getSearchableModel(la.models.advisor.InvitedBusiness,[])})});
ns("la.collections.advisor",function(b){b.ManagedBusinessPager=la.collections.commons.EditablePager.extend({paginator_ui:{perPage:250},sortColumn:"businessName",constructor:function(a,e){b.ManagedBusinessPager.__super__.constructor.apply(this,arguments);this.paginator_core.url=UrlUtils.apiUrl(la.BusinessSettings.getBusinessId(),"/advisor/managedBusinesses");this.model=la.models.commons.getSearchableModel(la.models.advisor.ManagedBusiness.extend({getSearchableField:function(){return this.getAll("businessName,abn,irdNumber,gstStatus,bankFeedStatus,accountStatus")},
getGstStatus:function(){return this.get("registeredForGST")?"Registered":"Not registered"},getRole:function(){return this.isStatus("PREHANDOVER")?"Owner":"Advisor"},getBankFeedStatus:function(){return this.get("hasBankFeeds")?this.get("unallocatedTransactionCount")+" unallocated transactions":"Not registered"},getAccountStatus:function(){return"HANDOVER"===this.get("status")?"Ownership pending":_(this.get("status")).humanize()}}),[]);this.perPage=this.paginator_ui.perPage}})});
ns("la.collections.banking",function(b){b.BankTransactionsPager=la.collections.commons.PagedCollection.extend({pagingDefaults:{size:50,sortBy:"date",sortDirection:"desc"},constructor:function(a,e){this.accounts=e.accounts;this.contacts=e.contacts;this.parentView=e.parentView;this.url=e.url;this.model=la.models.banking.BankTransaction.extend({accounts:this.accounts,contacts:this.contacts});this.pageSettings=_.extend(this.pagingDefaults,{sortBy:this.parentView.model.get("sortBy")||this.pagingDefaults.sortBy,
sortDirection:this.parentView.model.get("sortDirection")||this.pagingDefaults.sortDirection});b.BankTransactionsPager.__super__.constructor.apply(this,arguments)},getQueryParams:function(){var a={from:this.parentView.model.get("from"),to:this.parentView.model.get("to")};this.parentView.model.get("q")&&(a.q=_(this.parentView.model.get("q")).trim());0<this.parentView.model.get("accountId")&&(a.accountId=this.parentView.model.get("accountId"));"WITH_NOTES"===this.parentView.model.get("processed")?a.withNotes=
"true":"ALL"!==this.parentView.model.get("processed")&&(a.processed=this.parentView.model.get("processed"));return{data:a}},url:function(){return this.url}})});ns("la.collections.banking",function(b){b.FinancialInstitutions=la.collections.Collection.extend({model:Backbone.Model,financialInstitutionsByType:function(a){return this.filter(function(b){return b.get("accountType")===a})},url:function(){return UrlUtils.anonymousApiUrl("/financial-institutions")}})});
ns("la.collections.banking",function(b){b.Matches=la.collections.commons.SearchablePager.extend({paginator_ui:{perPage:9007199254740992},sortDirection:"desc",sortColumn:"transactionDate",constructor:function(a,e){b.Matches.__super__.constructor.apply(this,arguments);this.model=this.getSearchableModel();this.perPage=this.paginator_ui.perPage;this.bankTransactionId=e.bankTransactionId;this.paginator_core.url=this.buildUrl({})},getSearchableModel:function(){return la.models.commons.getSearchableModel(la.models.banking.transactions.PotentialMatch.extend({getSearchableField:function(){return this.getAll("formattedDate,description,amount")}}),
[])},setFilterAndFetch:function(a){this.paginator_core.url=this.buildUrl(a);this.fetch()},hasMatches:function(){return 0<this.actualModels().filter(function(a){return!0===a.get("matched")}).length},buildUrl:function(a){var b=_(a).isEmpty()?"":"?"+Object.keys(a).reduce(function(b,d){b.push(d+"="+a[d]);return b},[]).join("&");return UrlUtils.apiUrl(la.BusinessSettings.getBusinessId(),"/banktransactions/"+this.bankTransactionId+"/matches"+b)}})});
ns("la.collections.banking",function(b){b.TransactionHistoryPager=la.collections.commons.SearchablePager.extend({paginator_ui:{perPage:250},sortDirection:"desc",sortColumn:"transactionDate",constructor:function(a,e){b.TransactionHistoryPager.__super__.constructor.apply(this,arguments);this.model=la.models.commons.getSearchableModel(la.models.banking.HistoryTransaction.extend({getSearchableField:function(){return this.getAll("reference,formattedDate,description,accountName,spent,received")}}),[]);
this.perPage=this.paginator_ui.perPage}})});ns("la.collections.banking",function(b){b.Transfers=la.collections.Collection.extend({model:la.models.banking.transactions.Transfer,initialize:function(a){this.bankTransactionId=a.bankTransactionId},url:function(){return UrlUtils.apiUrl(la.BusinessSettings.getBusinessId(),"/banktransactions/"+this.bankTransactionId+"/transfer-candidate")}})});
ns("la.collections.billflow",function(b){b.Documents=la.collections.Collection.extend({model:la.models.billflow.BillflowDocument,initialize:function(a,b){this._super(a,b);this.sortingByNewest=!0},url:function(){return UrlUtils.apiUrl(this.businessId,"/documents")},comparator:function(a,b){var c=a.get("received_at"),d=b.get("received_at");if(c===d)return 0;c=this.sortingByNewest?c>d:c<d;return c?-1:1},resort:function(){0!==this.size()?(this.sort(),this.trigger("sortOrFilter")):this.trigger("billflow:displayEmptyMessage");
Backbone.trigger("billflow:showCarousel")},sortByNewest:function(){this.sortingByNewest=!0;this.resort()},sortByOldest:function(){this.sortingByNewest=!1;this.resort()}})});
ns("la.collections.businesses",function(b){b.BusinessesPager=la.collections.commons.EditablePager.extend({paginator_ui:{perPage:250},sortColumn:"id",constructor:function(){b.BusinessesPager.__super__.constructor.apply(this,arguments);this.model=la.models.commons.getSearchableModel(Backbone.Model.extend({getSearchableField:function(){return this.get("name")}}),[]);this.perPage=this.paginator_ui.perPage},initialize:function(a){this._super(a||{});this.paginator_core.url=UrlUtils.anonymousApiUrl("/businesses")}});
_.extend(b.BusinessesPager.prototype,la.collections.SelectableCollection)});ns("la.collections",function(b){b.Contacts=la.collections.Collection.extend({model:la.models.Contact,url:function(){return UrlUtils.apiUrl(this.businessId,"/contacts")}})});
ns("la.collections",function(b){b.ContactsLite=la.collections.Collection.extend({model:la.models.ContactLite,url:function(){return UrlUtils.apiUrl(la.BusinessSettings.getBusinessId(),"/contacts")},filteredByActiveAndType:function(a,e){e=e||{};var c=e.whitelist||[],d=this.filter(function(b){return b.isType(a)&&(_(c).contains(b.get("id"))||b.get("active"))});return new b.ContactsLite(d)},customers:function(){return this._filteredByTypes(["Customer","Customer & Supplier"])},suppliers:function(){return this._filteredByTypes(["Supplier",
"Customer & Supplier"])},activeCustomers:function(){return this.customers()._getFilteredCollection(this._activeFilter)},activeSuppliers:function(){return this.suppliers()._getFilteredCollection(this._activeFilter)},_filteredByTypes:function(a){return this._getFilteredCollection(function(b){return _(a).contains(b.get("type"))})},_getFilteredCollection:function(a){return new b.ContactsLite(this.filter(a))},_activeFilter:function(a){return a.get("active")}})});
ns("la.collections",function(b){var a=function(a){return!0===a.get("selected")};b.SelectableCollection={isAllSelected:function(){return 0!==this.size()&&this.all(a)},isSomeSelected:function(){return 0!==this.size()&&this.any(a)},selectedItems:function(){return(this.actualModels?this.actualModels():this).filter(a)}}});
ns("la.collections",function(b){b.ContactsPager=la.collections.commons.SearchablePager.extend({paginator_ui:{perPage:250},model:la.models.commons.getSearchableModel(la.models.items.Contact,["abbreviatedType"]),removeSelected:function(a,b,c){var d=this.selectedDeletableContacts(),f=this,g=_(d).map(function(a){return a.get("id")});$.ajax({url:UrlUtils.apiUrl(a,"/contacts/delete"),type:"PUT",contentType:"application/json",dataType:"json",data:JSON.stringify(g),success:function(a){f.origModels=f.actualModels().reject(function(a){return _(d).contains(a)});
f.goTo(f.currentPage>Math.ceil(f.origModels.length/f.perPage)?1:f.currentPage);b()},error:function(a){400===a.status&&c()}})},reportSelected:function(a,b){var c=this.selectedReportableContacts(),c=_(c).map(function(a){return a.get("id")}),d=this;$.ajax({url:UrlUtils.apiUrl(a,"/contacts/markReportable"),type:"PUT",contentType:"application/json",data:JSON.stringify(c),success:function(){_(d.selectedReportableContacts()).map(function(a){a.set({reportable:!0})});b()}})},removeSelectedAttribute:function(){return this.actualModels().map(function(a){a.set("selected",
!1)})},selectedCount:function(){return this.actualModels().filter(function(a){return!0===a.get("selected")}).length},selectedDeletableContacts:function(){return this.actualModels().filter(function(a){return!0===a.get("selected")&&!0!==a.get("hasJournalTransactions")&&!0!==a.get("hasAllocationRules")})},selectedDeletableContactCount:function(){return this.selectedDeletableContacts().length},selectedReportableContacts:function(){return this.actualModels().filter(function(a){return!0===a.get("selected")&&
a.get("type")&&0<=a.get("type").indexOf("Supplier")})},selectedReportableContactCount:function(){return this.selectedReportableContacts().length}});_.extend(b.ContactsPager.prototype,la.collections.SelectableCollection)});ns("la.collections.gst",function(b){b.ClientGstTypes=la.collections.Collection.extend({model:la.models.gst.ClientGstType,url:function(){return UrlUtils.apiUrl(this.businessId,"/gstTypes")},sortedByName:function(){return new b.ClientGstTypes(this.sortBy(function(a){return a.get("name")}))}})});
ns("la.collections.home",function(b){b.EmailConfirmation=la.collections.Collection.extend({model:la.models.home.Email,initialize:function(a){this.businessId=a.businessId},url:function(){return UrlUtils.apiUrl(this.businessId,"/emails")}})});
ns("la.collections.invoices",function(b){b.ActivitiesNew=la.collections.Collection.extend({initialize:function(a,b){this.businessId=b.businessId;this.invoiceId=b.invoiceId},url:function(){var a=jstz.determine();return UrlUtils.apiUrl(this.businessId,"/invoices/"+this.invoiceId+"/activities?tz="+a.name())},parse:function(a){return util.ActivitiesTransformer.transform(a)}})});
ns("la.collections.invoices",function(b){b.HistoryPager=la.collections.commons.SearchablePager.extend({paginator_ui:{perPage:250},sortColumn:"transactionDate",constructor:function(a,e){b.HistoryPager.__super__.constructor.apply(this,arguments);this.model=la.models.commons.getSearchableModel(la.models.invoices.HistoryTransaction.extend({getSearchableField:function(){return this.getAll("reference,formattedDate,contactName,formattedType,formattedAmount,formattedPaymentAmount,status")}}),[]);this.perPage=
this.paginator_ui.perPage},getTotal:function(){return this._sum("amount")},getPaymentTotal:function(){return this._sum("paymentAmount")},_sum:function(a){return _(this.models).reduce(function(b,c){return _(c.get(a)).isBlank()?b:b+c.get(a)},0)}})});
ns("la.collections.invoices",function(b){b.InvoicesPager=la.collections.commons.SearchablePager.extend({paginator_ui:{perPage:250},sortColumn:"number",sortDirection:"desc",constructor:function(a,e){b.InvoicesPager.__super__.constructor.apply(this,arguments);this.model=la.models.commons.getSearchableModel(Backbone.Model.extend({getSearchableField:function(){return this.getAll("number,contactName,issueDate,dueDate,total,amountDue,status,supplierInvoiceNumber")},getDocumentId:function(){return this.attributes.documentId}}),
[]);this.perPage=this.paginator_ui.perPage},getTotal:function(){return this._sum("total")},getDueTotal:function(){return this._sum("amountDue")},_sum:function(a){return _(this.models).reduce(function(b,c){return b+c.get(a)},0)}});_.extend(b.InvoicesPager.prototype,la.collections.SelectableCollection)});
ns("la.collections.invoices",function(b){b.Transactions=la.collections.Collection.extend({model:Backbone.Model,initialize:function(a,b){this._super(a,b);this.invoiceId=b.invoiceId},url:function(){return UrlUtils.apiUrl(this.businessId,"/invoices/"+this.invoiceId+"/transactions")},getTotalAmountApplied:function(){return this.reduce(function(a,b){return MO.add(a,b.get("amountApplied"))},0)}})});
ns("la.collections.invoices",function(b){b.UnitTypes=la.collections.Collection.extend({model:Backbone.Model,initialize:function(a,b){this._super(arguments);this.models=[new Backbone.Model({id:1,code:"Qty",description:"Quantity"}),new Backbone.Model({id:2,code:"Hrs",description:"Hours"})]}})});
ns("la.collections.items",function(b){b.Items=la.collections.Collection.extend({model:la.models.items.Item,saleItems:function(a){return this.itemsByType("sale",a)},purchaseItems:function(a){return this.itemsByType("purchase",a)},itemsByType:function(a,e){e=e||{};var c=e.whitelist||[];return new b.Items(this.filter(function(b){return b.isType(a)&&(b.get("active")||_(c).contains(b.get("id")))}))},sortedByNumber:function(){return new b.Items(this.sortBy(function(a){return a.get("number")}))},url:function(){return UrlUtils.apiUrl(this.businessId,
"/prime/items")}})});ns("la.collections.items",function(b){b.ItemsPager=la.collections.commons.SearchablePager.extend({paginator_ui:{perPage:250},sortColumn:"number",constructor:function(a,e){b.ItemsPager.__super__.constructor.apply(this,arguments);this.model=la.models.commons.getSearchableModel(Backbone.Model.extend({getSearchableField:function(){return this.getAll("number,name,description,salePrice,type")}}),[]);this.perPage=this.paginator_ui.perPage}});_.extend(b.ItemsPager.prototype,la.collections.SelectableCollection)});
ns("la.collections.payroll",function(b){b.EmployeeList=la.collections.Collection.extend({model:la.models.payroll.reports.EmployeeListModel,url:function(){return UrlUtils.apiUrl(la.BusinessSettings.getBusinessId(),"/report-employees")},activeEmployees:function(){return this._getFilteredCollection(this._activeFilter)},allEmployees:function(){return this._getFilteredCollection(this._allFilter)},_getFilteredCollection:function(a){return new b.EmployeeList(this.filter(a))},_activeFilter:function(a){return a.get("active")},
_allFilter:function(){return!0}})});
ns("la.collections.paysuper",function(b){b.PaySuperEmployeesPager=la.collections.commons.SearchablePager.extend({paginator_ui:{perPage:250},sortColumn:"payDate",constructor:function(a,e){b.PaySuperEmployeesPager.__super__.constructor.apply(this,arguments);this.model=la.models.commons.getSearchableModel(Backbone.Model.extend({getSearchableField:function(){return this.getAll("payDate,employeeName,superFundName,superGuarantee,memberContributions,total")}}),[]);this.perPage=this.paginator_ui.perPage}});
_.extend(b.PaySuperEmployeesPager.prototype,la.collections.SelectableCollection)});
ns("la.collections.payroll.payment_summaries",function(b){b.Employees=la.collections.Collection.extend({model:la.models.payroll.payment_summaries.Employee,initialize:function(a,b){this._super(a,b);this.year=b?b.year:void 0},comparator:function(a){return a.name().toLowerCase()},url:function(){return UrlUtils.apiUrl(this.businessId,"/paymentsummaries/"+this.year)},isAllSelectedCompleted:function(){var a=new b.Employees(this.selectedItems());return 0!==a.size()&&a.all(function(a){return a.isCompleted()})},
isAllSelectedReviewed:function(){var a=new b.Employees(this.selectedItems());return 0!==a.size()&&a.all(function(a){return a.isReviewed()})},isAllSelectedWithDupeFile:function(){var a=new b.Employees(this.selectedItems());return 0!==a.size()&&a.all(function(a){return a.isEmpDupeCreated()})}});_.extend(b.Employees.prototype,la.collections.SelectableCollection)});
ns("la.collections.payroll.payment_summaries",function(b){b.FinancialYears=la.collections.Collection.extend({initialize:function(a){this.businessId=a.businessId},url:function(){return UrlUtils.apiUrl(this.businessId,"/paymentsummaries/years")}})});
ns("la.collections.payroll.payment_summaries",function(b){b.PaymentSummaryList=la.collections.Collection.extend({model:la.models.payroll.payment_summaries.Email,initialize:function(a,b){this._super(a,b);this.year=b?b.year:void 0},url:function(){return UrlUtils.apiUrl(this.businessId,"/paymentsummaries/"+this.year+"/list")}});_.extend(b.PaymentSummaryList.prototype,la.collections.SelectableCollection)});
ns("la.collections.payroll.payment_summaries",function(b){b.PaymentSummaryEmailList=b.PaymentSummaryList.extend({isAllSelected:function(){for(var a=!0,b=0;b<this.length;b++){var c=this.at(b);c.isValid()&&!_.isEmpty(c.get("email"))&&!1===c.get("selected")&&(a=!1)}return 0!==this.size()&&a},fetch:function(a){var b=a.success;a.success=function(a){var d=a.selectedItems();_.each(d,function(a){a.set("selected",a.isValid())});a.reset(d);b&&b()};this._super(a)}})});
ns("la.collections.commons",function(b){b.SuperApraFunds=la.collections.Collection.extend({model:la.models.Model,url:function(){return UrlUtils.anonymousApiUrl("/payroll/apraSuperFunds")}});b.ElectronicServiceAddresses=la.collections.Collection.extend({model:la.models.Model,url:function(){return UrlUtils.anonymousApiUrl("/payroll/electronicServiceAddresses")}})});
ns("la.collections.quotes",function(b){b.ActivitiesNew=la.collections.Collection.extend({initialize:function(a,b){this.businessId=b.businessId;this.quoteId=b.quoteId},url:function(){return UrlUtils.apiUrl(this.businessId,"/quotes/"+this.quoteId+"/activities")},parse:function(a){return util.ActivitiesTransformer.transform(a)}})});
ns("la.collections.reports",function(b){b.AccountJournalEntries=la.collections.Collection.extend({model:la.models.reports.AccountJournalEntry,initialize:function(a,b){this._super(a,b)},fetchByDateAccountIds:function(a,b,c,d,f){0<c.length&&this.fetch({url:UrlUtils.apiUrl(this.businessId,"/generalLedgerReport?from="+a+"&to="+b+"&accountIds="+c+"&isCashBasis="+d),success:function(a,b,c){f.success()}})}})});
ns("la.collections.reports",function(b){b.GstReportJournalEntries=la.collections.Collection.extend({model:la.models.reports.GstReportJournalEntry,initialize:function(a,b){this._super(a,b)},fetchByFilters:function(a,b,c,d,f){this.fetch({url:UrlUtils.apiUrl(this.businessId,"/gstDetailedReport?from="+a+"&to="+b+"&isTaxInclusive="+c+"&isCashBasis="+d),success:function(a,b,c){f.success()}})}})});
ns("la.collections.reports",function(b){b.JournalEntries=la.collections.Collection.extend({model:la.models.reports.JournalEntry,initialize:function(a,b){this._super(a,b);this.from=b.from;this.to=b.to;this.accountId=b.accountId;this.cashBasis=b.cashBasis||!1;this.includeOpeningBalance=b.includeOpeningBalance||!1},url:function(){return UrlUtils.apiUrl(this.businessId,"/accounts/"+this.accountId+"/journalEntries?from="+this.from+"&to="+this.to+"&cashBasis="+this.cashBasis+"&includeOpeningBalance="+this.includeOpeningBalance)}})});
ns("la.collections.settings",function(b){b.BankFeedApplications=la.collections.Collection.extend({model:la.models.banking.BankFeed,url:function(){return UrlUtils.apiUrl(this.businessId,"/bankfeed/applications")},hasEntryForAccountId:function(a){return this.some(function(b){return String(b.get("linkedChartAccount").id)===String(a)})},nonCancelledBankFeeds:function(){return new b.BankFeedApplications(this.filter(function(a){return"CC"!==a.get("statusCode")}))}})});
ns("la.collections.users",function(b){b.Invitations=Backbone.Collection.extend({model:la.models.invitation.BusinessInvitation,initialize:function(a,b){this.types=b?b.types:void 0;this._super(a,b)},url:function(){return UrlUtils.apiUrl(la.BusinessSettings.getBusinessId(),"/invitations"+this._getTypeQueryString())},_getTypeQueryString:function(){return this.types?"?"+_(this.types).map(function(a){return"type="+a}).join("&"):""}})});
ns("la.collections.users",function(b){b.Users=Backbone.Collection.extend({model:la.models.users.User,url:function(){return UrlUtils.apiUrl(la.BusinessSettings.getBusinessId(),"/users")}})});
ns("la.collections.users",function(b){b.UsersAndInvitations=Backbone.Collection.extend({model:la.models.users.UserInvitation,users:new la.collections.users.Users,invitations:new la.collections.users.Invitations([],{types:["SME_INVITE_USER","ADVISOR_INVITE_USER"]}),resort:function(){this.sort();this.trigger("sortOrFilter")},comparator:function(a){return(("Inactive"===a.get("status")?"B":"A")+a.get("email")).toUpperCase()},fetch:function(a){$.when(this.users.fetch(),this.invitations.fetch()).done(function(){this.reset();
for(var b=0;b<this.users.size();b++)this.add(new la.models.users.UserInvitation({},{type:"user",source:this.users.at(b)}));for(b=0;b<this.invitations.size();b++)this.add(new la.models.users.UserInvitation({},{type:"invitation",source:this.invitations.at(b)}));a.success&&a.success()}.bind(this)).always(function(){a.complete&&a.complete()}.bind(this))}})});
ns("la.views.commons",function(b){b.AddressView=la.views.ValidatedFormView.extend({initialize:function(a){this.templateName=a.template;this.model=a.address||new la.models.ValidatedAddress;this.states=la.collections.commons.States.getAll()}})});
ns("la.views.commons",function(b){b.AddressesView=la.views.ValidatedFormView.extend({initialize:function(a){this.listenTo(this.model,"change:postalAddressDifferentAsBusinessAddress",this.togglePostalAddress);this.template=a.addressTemplate;this.addressView=this.addSubview(new la.views.commons.AddressView({template:this.template,address:this.model.get("address"),container:this}),".streetAddress");this.model.get("postalAddressDifferentAsBusinessAddress")&&(this.postalAddressView=this.addPostalAddressView())},
render:function(){this.renderHandlebars("commons/addresses",this.model);this.renderSubviews();return this},togglePostalAddress:function(a,b){this.$(".postalAddressContainer").toggleClass("hidden",!b);b?this.addPostalAddress():this.removePostalAddress()},isValid:function(){return this.model.get("address").isValid()&&(!this.model.get("postalAddressDifferentAsBusinessAddress")||this.model.get("postalAddress")&&this.model.get("postalAddress").isValid())},addPostalAddress:function(){this.model.set("postalAddress",
new la.models.ValidatedAddress);this.postalAddressView=this.addPostalAddressView();this.renderSubviews(this.postalAddressView)},addPostalAddressView:function(){return this.addSubview(new la.views.commons.AddressView({template:this.template,address:this.model.get("postalAddress"),container:this}),".postalAddress")},removePostalAddress:function(){this.model.unset("postalAddress");this.removeSubview(this.postalAddressView)}})});
ns("la.views.commons",function(b){b.HeaderView=la.views.BaseView.extend({mixins:[la.views.mixins.Logoutable],id:"header",events:{"click a:not(.dropdown-toggle)":"selectMenu"},initialize:function(a){_.bindAll(this);this.model=a.model;this.model.on("change",this.render)},render:function(){this._super();this._selectMenu();return this},selectMenu:function(a){a.target.href!==window.location.href&&"_blank"!==a.target.target&&la.breadcrumb.clear();sessionStore.set("menu",$(a.target).closest(".top-menu").find("> a").text().trim())},
_selectMenu:function(){var a=sessionStore.get("menu")||this.model.get("menuName");a&&(this.$("li.active").removeClass("active"),this.$("li.top-menu > a:contains('"+a+"')").each(function(b,c){_($(c).text()).trim()===a&&$(c).parent().addClass("active")}))}})});
ns("la.views.commons",function(b){b.BusinessHeaderView=la.views.commons.HeaderView.extend({templateName:"header/business_header",businessHeaderEvents:{"click .getting-started-opt-in":"optInGettingStarted"},initialize:function(a){this._super(a);la.BusinessSettings.on("sync",this.render);a=la.BusinessSettings.attributes.accountStatus;"SUSPENDED"!==a&&"CANCELLED"!==a&&la.BusinessSettings.hasEntitlement("PURCHASES")&&(this.billflowStatView=new la.views.home.stats.BillflowStatView({container:this}),this.addSubview(this.billflowStatView,
"li.top-menu.reports-menu","after"));this.upgradeView=new la.views.commons.BusinessHeaderUpgradeView({container:this});this.addSubview(this.upgradeView,"#headerUpgrade");this.businessId=la.BusinessSettings.getBusinessId();this.events=this._mergeEvents(this.businessHeaderEvents,this.events)},render:function(){this._super();this.toggleGettingStarted();return this},setGettingStarted:function(a){this.gettingStartedEnabled=a;this.toggleGettingStarted()},toggleGettingStarted:function(){this.$("li.getting-started-menu-item").toggleClass("disabled",
!this.gettingStartedEnabled);this.$("li.getting-started-menu-item a").toggleClass("getting-started-opt-in",this.gettingStartedEnabled)},optInGettingStarted:function(){var a=window.gettingStartedView;a&&a.optIn()}})});ns("la.views.commons",function(b){b.AdminHeaderView=la.views.commons.HeaderView.extend({templateName:"commons/admin_header"})});ns("la.views.commons",function(b){b.AdvisorCentreHeaderView=la.views.commons.BusinessHeaderView.extend({templateName:"commons/advisor_centre_header"})});
ns("la.views.message",function(b){b.InfoMessage=la.views.BaseView.extend({className:"alert alert-info alert-dismissable",templateName:"message/simple_message",initialize:function(a){this._super(a);this.model=a.model}})});ns("la.views.message",function(b){b.SuccessMessage=la.views.BaseView.extend({className:"alert alert-success alert-dismissable",templateName:"message/simple_message",initialize:function(a){this._super(a);this.model=a.model}})});
ns("la.views.message",function(b){b.WelcomeMessage=la.views.BaseView.extend({className:"alert alert-welcome alert-dismissable",templateName:"message/welcome_message",initialize:function(a){this._super(a);this.model=a.model}})});
ns("la.views.commons",function(b){b.ApplicationMessagesView=la.views.BaseView.extend({templateName:"commons/application_messages",events:{"click .messages button.close":"_closeMessage"},initialize:function(a){this._super(a);this.initDataSources(a);this.messagesInit();ApplicationMessagesUtils.clearAll()},messageRenderer:{info:la.views.message.InfoMessage,success:la.views.message.SuccessMessage,welcome:la.views.message.WelcomeMessage},initDataSources:function(a){a=a.messages||[];var b=ApplicationMessagesUtils.retrieveMessages();
this.messages=_.union(a,b)},messagesInit:function(){for(var a=0;a<this.messages.length;a++)this._addMessageSubView(new Backbone.Model(this.messages[a]),0<a)},_addMessageSubView:function(a,b){var c=this._createMessageView(a);b?this.addSubview(c,".messages > div:last","after"):this.addSubview(c,".messages")},_createMessageView:function(a){var b=a.get("type");return new this.messageRenderer[b]({model:a})},_closeMessage:function(a){ApplicationMessagesUtils.removeMessage(a.currentTarget.dataset.key)}})});
ns("la.views.commons",function(b){b.BusinessFooterView=la.views.BaseView.extend({id:"footer",templateName:"header/business_footer",initialize:function(a){this._super(a);this.model=new la.models.Model({currentYear:(new Date).getFullYear()})}})});
ns("la.views.commons",function(b){b.BusinessHeaderUpgradeView=la.views.BaseView.extend({templateName:"header/business_header_upgrade",allEntitlements:["BANKING","PURCHASES","INVOICES","PAYROLL"],defaultLinkLabel:"Upgrade to invoices and more",defaultPopoverContent:"<p>Business growing? Do you need to send invoices, pay staff or record bills?</p><p>Upgrading to Essentials Accounting is easy and will allow you to manage your cash flow and compliance in one place.</p>",events:{"click a#businessHeaderUpgradeLink":"subscribe"},
initialize:function(a){this._super(a);this.model=new la.models.Model;this.contextHelp={business_header_upgrade:"businessHeaderUpgradeText",business_header_upgrade_link:"businessHeaderUpgradeLink"};_.bindAll(this);this.listenTo(this.model,"change:upgradeHelpContext",this._setupContainer);this._canUpgrade()&&(ContextHelpManager.getById("business_header_upgrade")?this._setupHelpContext():ContextHelpManager.renderHelps(this,this._setupHelpContext,this._onRenderContextFailed))},render:function(){var a=
this._canUpgrade();a&&(this.renderHandlebars(this.templateName,this.model,{canUpgrade:a}),this._setupContainer());return this},_setupHelpContext:function(){var a=ContextHelpManager.getById("business_header_upgrade")?ContextHelpManager.getById("business_header_upgrade").get("content"):this.defaultPopoverContent,b=ContextHelpManager.getById("business_header_upgrade_link")?ContextHelpManager.getById("business_header_upgrade_link").get("content"):this.defaultLinkLabel;this.model.set("upgradeHelpContext",
{linkLabel:b,popoverContent:a});la.HeaderService.updateUpgradeHeader(b,a)},_setupContainer:function(){var a=this.model.get("upgradeHelpContext");a&&(this.$("#businessHeaderUpgradeContainer").removeClass("hide"),this.$("#businessHeaderUpgradeLink").html(a.linkLabel),this.$("#businessHeaderUpgradeLink").popover({trigger:"hover",placement:"bottom",html:!0,content:function(){return a.popoverContent}}))},_onRenderContextFailed:function(){this.model.set("upgradeHelpContext",{linkLabel:this.defaultLinkLabel,
popoverContent:this.defaultPopoverContent})},subscribe:function(){la.BusinessSettings.findOrCreatePreference("subscription","viewedSubscriptionPage").updateBooleanPreference("true");UrlUtils.navigateToRoute(la.BusinessSettings.get("businessId"),"/settings/subscription")},_canUpgrade:function(){var a=_.map(la.BusinessSettings.get("entitlements"),function(a){return a.toUpperCase()});return _.intersection(this.allEntitlements,a).length!==this.allEntitlements.length}})});
ns("la.views.commons",function(b){b.BusinessesHeaderView=la.views.BaseView.extend({mixins:[la.views.mixins.Logoutable],id:"header",templateName:"header/businesses_header"})});
ns("la.views.commons",function(b){b.ConfirmationDialog=la.views.DialogView.extend({templateName:"commons/confirmation_dialog",attributes:{tabindex:"-1","data-backdrop":"static","aria-labelledby":"modal-title-confirmation-dialog",role:"dialog","aria-hidden":"false"},events:{"click #buttonCancel":"hide","click #buttonClose":"hide","click #buttonOK":"executeOKAction","click #buttonYes":"executeYesAction","click #buttonNo":"executeNoAction"},initialize:function(a){this.container=a.container;this.messageTemplate=
a.messageTemplate||"commons/confirmation_message";this.messageModel=a.messageModel||this.model;this.listenTo(this.model,"change",this.render)},render:function(){this._super();this.showMessage(this.messageModel,this.messageTemplate);return this},beforeShow:function(){this.container&&(this.container.disableForm(),this.enableForm())},beforeHide:function(){this.container&&this.container.enableForm()},afterHide:function(){this.executeAction("afterHide")},afterShow:function(){this.executeAction("afterShow")},
show:function(){this.showTime=(new Date).getTime();this._super();this.$("#buttonClose").hide();this.$(".btn-primary").focus()},hide:function(){var a=(new Date).getTime(),a=this.model.get("minimumShowTime")-(a-this.showTime);0<a?_.delay($.proxy(this._super,this),a):this._super()},executeNoAction:function(){var a=this;this.executeAction("noAction",function(){a.hide()})},executeOKAction:function(){var a=this;this.executeAction("okAction",function(){a.hide()})},executeYesAction:function(){this.showSpinner(!0);
this.executeAction("yesAction")},executeAction:function(a,b){var c=this.model.get(a)||b;_.isFunction(c)&&c()},showSpinner:function(a){a?(this.$(".message-content").hide(),this.$(".mediumLoadingSpinner").show(),this.$("button").attr("disabled","disabled")):(this.$(".message-content").show(),this.$(".mediumLoadingSpinner").hide(),this.$("button").removeAttr("disabled"))},onError:function(){this.showSpinner(!1);this.$("button").hide();this.$("#buttonClose").show()},showMessage:function(a,b){this.$(".message-content").html(HandlebarsTemplates[b](this.createHandlebarsContext(a)))}})});
ns("la.views.commons",function(b){b.ConfirmationMessageView=la.views.BaseView.extend({templateName:"commons/confirmation_message"})});
ns("la.views.commons",function(b){b.EmailAttachmentListView=la.views.BaseView.extend({MAX_ATTACHMENTS_SIZE:12582912,events:{"change #attachFileInput":"_validateAndUploadFile","click #attachFileButton":"_clickAttach"},initialize:function(a){_.bindAll(this);this._super(a);this.options=a;this.invoiceNumber=a.invoiceNumber;this.model=this.collection=a.files;this.listenTo(this.model,"change",this._renderAllAttachments);this.listenTo(this.model,"add",this._renderAllAttachments);this.listenTo(this.model,
"remove",this._renderAllAttachments)},render:function(){this.renderHandlebars("commons/email_attachment_list",this.model,this.options);this._renderAllAttachments();return this},_renderAllAttachments:function(){this.$("#filesUploaded").empty();this._clearErrorMessage();this.collection.each(this._renderAttachment)},_renderAttachment:function(a){a=new la.views.commons.EmailAttachmentView({model:a,collection:this.collection});a.render();this.$("#filesUploaded").append(a.el)},_validateAndUploadFile:function(){if(IE9.isEqualOrLessThanIE9())(new la.views.settings.IEAlertView({container:this})).show();
else{this._clearErrorMessage();var a=this.$("#attachFileInput")[0].files,b=!0;0===a.length?b=!1:6<this.collection.size()+a.length&&(this._errorMessage("Sorry, you can\u2019t attach more than 6 files."),b=!1);b&&(b=this._readAndEncodeFiles(a));return b}},_errorMessage:function(a){this.$(".email-attachment-error").html(a)},_clearErrorMessage:function(){this._errorMessage("&nbsp;")},_readAndEncodeFiles:function(a){for(var b=!0,c=0;c<a.length;c++){var d=a[c],f=new la.models.commons.EmailAttachment({filename:d.name,
size:d.size,mimeType:d.type});if(this._validateTotalFileSize(d.size))f.set("displayFilename",f.getDisplayFilename()),this._fetchFile(d,f),this.collection.add(f);else{this._errorMessage("Sorry, you can\u2019t attach more than 12MB.");b=!1;break}}return b},_validateTotalFileSize:function(a){var b=a;this.collection&&0<this.collection.size()&&this.collection.each(function(a){b+=a.get("size")});return b<=this.MAX_ATTACHMENTS_SIZE},_fetchFile:function(a,b){var c=new FileReader;c.onload=function(a){var c=
"";a=new Uint8Array(a.target.result);for(var g=a.byteLength,h=0;h<g;h++)c+=String.fromCharCode(a[h]);c=window.btoa(c);b.set("file",c)};c.readAsArrayBuffer(a)},_clickAttach:function(){var a=$("#attachFileInput").clone(!0);$("#attachFileInput").replaceWith(a);a.click()}})});
ns("la.views.commons",function(b){b.EmailAttachmentView=la.views.BaseView.extend({tagName:"li",className:"email-attachment",events:{"click i#removeAttachment":"_removeAttachment"},initialize:function(a){_.bindAll(this);this.model=a.model;this.collection=a.collection;Backbone.Validation.bind(this)},_removeAttachment:function(){this.collection.remove(this.model)},render:function(){this.renderHandlebars("commons/email_attachment",this.model,this.options);return this}})});
ns("la.views.commons",function(b){b.FooterView=la.views.BaseView.extend({id:"footer",templateName:"commons/footer",initialize:function(a){this._super(a);this.model=new la.models.Model({currentYear:(new Date).getFullYear()})}})});var checkCondition=function(b,a,e){return b?a.fn(e):a.inverse(e)};Handlebars.registerHelper("ifAu",function(b){return checkCondition(la.Config.isAU(),b,this)});Handlebars.registerHelper("ifNz",function(b){return checkCondition(la.Config.isNZ(),b,this)});
Handlebars.registerHelper("ifDrillableTransaction",function(b,a){return checkCondition(!_(b).isBlank()&&"OPEN_BALANCE"!==b,a,this)});Handlebars.registerHelper("ifFeature",function(b,a){return checkCondition(FeatureTagUtils.isFeatureAvailable(b),a,this)});Handlebars.registerHelper("unlessFeature",function(b,a){return checkCondition(!FeatureTagUtils.isFeatureAvailable(b),a,this)});Handlebars.registerHelper("ifPartner",function(b){return checkCondition(la.BusinessSettings.isPartner(),b,this)});
Handlebars.registerHelper("ifRegisteredForGst",function(b){return checkCondition(la.BusinessSettings.isRegisteredForGst(),b,this)});Handlebars.registerHelper("unlessRegisteredForGst",function(b){return checkCondition(!la.BusinessSettings.isRegisteredForGst(),b,this)});Handlebars.registerHelper("ifBusinessReportable",function(b){return checkCondition(la.BusinessSettings.isReportable(),b,this)});
Handlebars.registerHelper("unlessBusinessReportable",function(b){return checkCondition(!la.BusinessSettings.isReportable(),b,this)});Handlebars.registerHelper("ifBusinessSetting",function(b,a,e){return checkCondition(la.BusinessSettings.get(b)===a,e,this)});Handlebars.registerHelper("ifBlankBusinessSetting",function(b,a){return checkCondition(_.isBlank(la.BusinessSettings.get(b)),a,this)});
Handlebars.registerHelper("ifUserHasRole",function(b,a){return checkCondition(_(la.CurrentUserDetails.get("roles")).contains(b),a,this)});Handlebars.registerHelper("isActiveOrTrialBusiness",function(b){var a="TRIAL"===la.BusinessSettings.get("accountStatus")||"ACTIVE"===la.BusinessSettings.get("accountStatus");return checkCondition(a,b,this)});
Handlebars.registerHelper("isTrialOrSuspendedBusiness",function(b){var a="TRIAL"===la.BusinessSettings.get("accountStatus")||"SUSPENDED"===la.BusinessSettings.get("accountStatus");return checkCondition(a,b,this)});Handlebars.registerHelper("unlessBusinessSetting",function(b,a,e){return checkCondition(la.BusinessSettings.get(b)!==a,e,this)});Handlebars.registerHelper("ifBusinessPreference",function(b,a,e,c){return checkCondition(la.BusinessSettings.getPreference(b,a)===e,c,this)});
Handlebars.registerHelper("unlessBusinessPreference",function(b,a,e,c){return checkCondition(la.BusinessSettings.getPreference(b,a)!==e,c,this)});Handlebars.registerHelper("ifBusinessPreferenceAsBoolean",function(b,a,e,c){return checkCondition(la.BusinessSettings.getPreferenceAsBoolean(b,a)===e,c,this)});Handlebars.registerHelper("unlessBusinessPreferenceAsBoolean",function(b,a,e,c){return checkCondition(la.BusinessSettings.getPreferenceAsBoolean(b,a)!==e,c,this)});
Handlebars.registerHelper("ifBusinessHasEntitlement",function(b,a){return checkCondition(la.BusinessSettings.hasEntitlement(b),a,this)});Handlebars.registerHelper("ifBusinessHasOneOfEntitlements",function(){for(var b=arguments[arguments.length-1],a=[],e=0;e<arguments.length-1;++e)a.push(arguments[e]);return checkCondition(la.BusinessSettings.hasAnyEntitlement(a),b,this)});
Handlebars.registerHelper("ifCOAEntitlementAndPreference",function(b){var a=FeatureTagUtils.isFeatureAvailable("COA_SERVICE"),e=!1===la.BusinessSettings.getPreferenceAsBoolean("coa_service","oldAccounts");return checkCondition(a&&e,b,this)});Handlebars.registerHelper("ifPayrollStandalone",function(b){return checkCondition(la.BusinessSettings.get("payrollStandalone"),b,this)});
Handlebars.registerHelper("unlessPayrollStandalone",function(b){return checkCondition(!la.BusinessSettings.get("payrollStandalone"),b,this)});Handlebars.registerHelper("ifEqual",function(b,a,e){return checkCondition(String(b)===String(a),e,this)});Handlebars.registerHelper("ifEqualOr",function(){for(var b=arguments[0],a=arguments[arguments.length-1],e=1;e<arguments.length-1;e++)if(String(b)===String(arguments[e]))return checkCondition(!0,a,this);return checkCondition(!1,a,this)});
Handlebars.registerHelper("unlessEqual",function(b,a,e){return checkCondition(String(b)!==String(a),e,this)});Handlebars.registerHelper("ifNumber",function(b,a){return checkCondition(_.isNumber(b),a,this)});Handlebars.registerHelper("ifNotContains",function(b,a,e){return checkCondition(!_.str.include(b,a),e,this)});Handlebars.registerHelper("ifUndefined",function(b,a){return checkCondition(_.isUndefined(b),a,this)});
Handlebars.registerHelper("ifDefined",function(b,a){return checkCondition(!_.isUndefined(b),a,this)});Handlebars.registerHelper("unlessBlank",function(b,a){return checkCondition(!_.isBlank(b),a,this)});Handlebars.registerHelper("ifBlank",function(b,a){return checkCondition(_.isBlank(b),a,this)});Handlebars.registerHelper("ifGreater",function(b,a,e){return checkCondition(!_.isBlank(b)&&b>a,e,this)});
Handlebars.registerHelper("ifAllSelected",function(b,a){var e=_(b).every(function(a){return!0===a.selected});return checkCondition(e,a,this)});Handlebars.registerHelper("forRange",function(b,a,e,c){var d=c.fn,f=c.inverse,g=a,h="",l;c.data&&(l=Handlebars.createFrame(c.data));if(b&&"object"===typeof b)if(b instanceof Array)for(c=b.length;g<c&&g<a+e;g++)l&&(l.index=g),h+=d(b[g],{data:l});else for(var k in b)b.hasOwnProperty(k)&&(l&&(l.key=k),h+=d(b[k],{data:l}),g++);0===g&&(h=f(this));return h});
Handlebars.registerHelper("isBusinessLockDateError",function(b,a){return checkCondition(ErrorUtils.isBusinessLockDateError(b),a,this)});Handlebars.registerHelper("isAccountReconciliationError",function(b,a){return checkCondition(ErrorUtils.isAccountReconciliationError(b),a,this)});Handlebars.registerHelper("ifInArray",function(b,a,e){a=_(a).any(function(a){return a===b});return checkCondition(a,e,this)});
Handlebars.registerHelper("pageHeading",function(b){var a=b.hash;b.fn&&(a.primaryButtons=b.fn(this,b));return new Handlebars.SafeString(Handlebars.partials.page_heading(a))});Handlebars.registerPartial("hr",HandlebarsTemplates["commons/partial/hr"]);Handlebars.registerPartial("page_heading",HandlebarsTemplates["commons/partial/page_heading"]);Handlebars.registerPartial("form_group_input",HandlebarsTemplates["commons/partial/form_group_input"]);Handlebars.registerPartial("form_group_checkbox",HandlebarsTemplates["commons/partial/form_group_checkbox"]);
Handlebars.registerPartial("form_group_radio",HandlebarsTemplates["commons/partial/form_group_radio"]);Handlebars.registerPartial("checkbox",HandlebarsTemplates["commons/partial/checkbox"]);Handlebars.registerPartial("home_getting_started_task",HandlebarsTemplates["home/getting_started_task"]);Handlebars.registerPartial("invoice_payment_term",HandlebarsTemplates["invoices/payment_term"]);Handlebars.registerPartial("bill_line",HandlebarsTemplates["invoices/partial/bill_line"]);
Handlebars.registerPartial("combined_invoice_quote_line",HandlebarsTemplates["invoices/partial/combined_invoice_quote_line"]);Handlebars.registerPartial("service_invoice_quote_line",HandlebarsTemplates["invoices/partial/service_invoice_quote_line"]);Handlebars.registerPartial("pay_super_missing_info",HandlebarsTemplates["payroll/paysuper/pay_super_missing_info"]);Handlebars.registerPartial("transaction_panel_unsaved_change_message",HandlebarsTemplates["banking/transactions/partial/transaction_panel_unsaved_change_message"]);
Handlebars.registerHelper("forLoop",function(b,a){for(var e="",c=0;c<b;++c)e+=a.fn(c);return e});
ns("handlebars.helper",function(b){b.serialiseAttributes=function(a,b){b=b||"";return _.map(_.pairs(a),function(a){return b+a[0]+'="'+a[1]+'"'}).join(" ")};b.getValue=function(a,b){var c=a,d=b.split(".");_.each(d,function(a){c=_.isBlank(c)?"":c[a]});_.isBlank(c)&&(c="");return Handlebars.Utils.escapeExpression(c)};b.invokePartial=function(a,b){return new Handlebars.SafeString(Handlebars.VM.invokePartial(Handlebars.partials[a],a,b,void 0,Handlebars.partials))};b.widget=function(a,e){return b.invokePartial("form_group_input",
this._getWidgetContext(a,e))};b.widgetCheckbox=function(a,e){return b.invokePartial("form_group_checkbox",this._getWidgetContext(a,e))};b.widgetRadio=function(a,e){return b.invokePartial("form_group_radio",this._getWidgetContext(a,e))};b._getWidgetContext=function(a,b){var c=b.hash,d=handlebars.helper.serialiseAttributes(_(c).omit("inputName","inputId","widgetCssClass","inputLabel","inputValue","labelCssClass","cssClass"));return _(c||{}).chain().pick("inputName","widgetCssClass","inputLabel","inputId",
"inputValue","labelCssClass","cssClass").extend({widgetName:a,widgetOptions:d}).value()};b.reportItem=function(a,b,c,d,f){var g=d?_.slugify(b+" "+d):_.slugify(b);d&&(b+='<span class="boxed label purple sml '+f+'">'+d+"</span>");return new Handlebars.SafeString("<tr>"+('<td name="reportName"><a id="'+g+'" href="'+a+'">'+b+"</a></td>")+('<td name="reportDescription">'+c+"</td>")+"</tr>")};b.checkbox=function(a){return b.invokePartial("checkbox",a.hash)}});
var convertToString=function(b){_(b).isBlank()||(b=b.toString());return b},buildDropdownOptions=function(b,a,e,c,d){c=convertToString(c);var f="";_(b).each(function(b){var h=convertToString(b[a]);b=_.escape(b[e]);d&&(b=b.replace(/\s/g,"&nbsp;"));f=h===c?f+('<option value="'+_.escape(h)+'" selected="selected">'+b+"</option>"):f+('<option value="'+_.escape(h)+'">'+b+"</option>")});return new Handlebars.SafeString(f)};
Handlebars.registerHelper("option",function(b,a,e){a=convertToString(a);e=convertToString(e);b=a===e?'<option value="'+_.escape(a)+'" selected="selected">'+_.escape(b)+"</option>":'<option value="'+_.escape(a)+'">'+_.escape(b)+"</option>";return new Handlebars.SafeString(b)});Handlebars.registerHelper("options",function(b,a,e,c){return buildDropdownOptions(b,a,e,c)});Handlebars.registerHelper("paddedOptions",function(b,a,e,c){return buildDropdownOptions(b,a,e,c,!0)});
Handlebars.registerHelper("radio",function(b,a,e,c,d,f){var g="boolean"===typeof c?"boolean":"";d=c===d?" checked ":"";f=!1===f?" disabled ":"";b='<div class="radio"><label for="'+_.escape(b)+'"><input type="radio" class="'+g+'" name="'+_.escape(e)+'" value="'+_.escape(c)+'" id="'+_.escape(b)+'"'+d+f+"/>"+_.escape(a)+"</label></div>";return new Handlebars.SafeString(b)});
var createTooltip=function(b,a){return'<span rel="tooltip" data-original-title="'+_.escape(a)+'" data-placement="right">'+_.escape(b)+"</span>"};Handlebars.registerHelper("tooltip",function(b,a){return new Handlebars.SafeString(createTooltip(b,a))});Handlebars.registerHelper("abbreviatedTypeWithTooltip",function(b){b=_.collect(b.split(" "),function(a){return createTooltip(a,la.models.items.ContactTypeTooltip[a])}).join(" ");return new Handlebars.SafeString(b)});
Handlebars.registerHelper("linkToTransaction",function(b,a,e,c,d){if("SUSPENDED"===la.BusinessSettings.get("accountStatus"))return _.escape(e);b=UrlUtils.getTransactionUrl(b,a,c,d);return _(b).isUndefined()?e:new Handlebars.SafeString('<a data-transaction-id="'+_.escape(a)+'" href="'+_.escape(b)+'">'+_.escape(e)+"</a>")});Handlebars.registerHelper("profitLossCalculateColSpan",function(b,a){return a?b.length+6:b.length+5});
Handlebars.registerHelper("reportItemWithContextUrl",function(b,a,e,c){return handlebars.helper.reportItem(Handlebars.helpers.contextUrl(a),e,c)});Handlebars.registerHelper("reportItemWithWebUrl",function(b,a,e,c){return handlebars.helper.reportItem(Handlebars.helpers.webUrl(b,a),e,c)});Handlebars.registerHelper("reportItemWithAppUrl",function(b,a,e,c,d){var f=d.hash.extraLabelText;d=d.hash.extraLabelClass;return handlebars.helper.reportItem(Handlebars.helpers.appUrl(b,a),e,c,f,d)});
Handlebars.registerHelper("RegexInput",function(b){return handlebars.helper.widget("RegexInput",b)});Handlebars.registerHelper("TextInput",function(b){return handlebars.helper.widget("TextInput",b)});Handlebars.registerHelper("AutosizeTextarea",function(b){return handlebars.helper.widget("AutosizeTextarea",b)});Handlebars.registerHelper("EmailInput",function(b){return handlebars.helper.widget("EmailInput",b)});
Handlebars.registerHelper("MoneyInput",function(b){return handlebars.helper.widget("MoneyInput",b)});Handlebars.registerHelper("PasswordInput",function(b){return handlebars.helper.widget("PasswordInput",b)});Handlebars.registerHelper("TypeaheadDropdown",function(b){return handlebars.helper.widget("TypeaheadDropdown",b)});Handlebars.registerHelper("ModelSelectTypeaheadDropdown",function(b){return handlebars.helper.widget("ModelSelectTypeaheadDropdown",b)});
Handlebars.registerHelper("DatePicker",function(b){return handlebars.helper.widget("DatePicker",b)});Handlebars.registerHelper("DateOfBirthDatePicker",function(b){return handlebars.helper.widget("DateOfBirthDatePicker",b)});Handlebars.registerHelper("TypeaheadDropdown",function(b){return handlebars.helper.widget("TypeaheadDropdown",b)});Handlebars.registerHelper("CheckboxOld",function(b){return handlebars.helper.checkbox(b)});
Handlebars.registerHelper("Checkbox",function(b){return handlebars.helper.widgetCheckbox("Checkbox",b)});Handlebars.registerHelper("Radio",function(b){return handlebars.helper.widgetRadio("Radio",b)});Handlebars.registerHelper("Select",function(b){return handlebars.helper.widget("Select",b)});Handlebars.registerHelper("SelectGrouped",function(b){return handlebars.helper.widget("SelectGrouped",b)});
Handlebars.registerHelper("SelectGroupedAccounts",function(b){return handlebars.helper.widget("SelectGroupedAccounts",b)});Handlebars.registerHelper("truncate",function(b,a){return b.substr(0,a)});Handlebars.registerHelper("notEqual",function(b,a,e){return b===a?e.inverse(this):e.fn(this)});Handlebars.registerHelper("contextUrl",function(b){return UrlUtils.url(b.replace("{contextPath}",UrlUtils.context()))});Handlebars.registerHelper("appUrl",function(b,a){return UrlUtils.appUrl(b,a)});
Handlebars.registerHelper("businessUrl",function(b){return UrlUtils.businessUrl(b)});Handlebars.registerHelper("bankFeedsUrl",function(b){return UrlUtils.appUrl(b,UrlUtils.bankFeedPath())});Handlebars.registerHelper("adminUrl",function(b){return UrlUtils.adminUrl(b)});Handlebars.registerHelper("homeUrl",function(){return UrlUtils.homeUrl()});Handlebars.registerHelper("webUrl",function(b,a){return UrlUtils.webUrl(b,a)});Handlebars.registerHelper("apiUrl",function(b,a){return UrlUtils.apiUrl(b,a)});
Handlebars.registerHelper("transactionUrl",function(b,a,e,c){return UrlUtils.getTransactionUrl(la.models.JournalType[b].id,a,e,c)});Handlebars.registerHelper("configProperty",function(b){return la.Config.get(b)});Handlebars.registerHelper("toLowerCase",function(b){return b?new Handlebars.SafeString(b.toLowerCase()):""});Handlebars.registerHelper("pageSet",function(b,a){return[1,2,3,4,5,6]});
Handlebars.registerHelper("showAuTaxYear",function(b,a,e){var c=DateUtils.parseFrontendDate("01/07/"+(b-a-1));b=DateUtils.parseFrontendDate("30/06/"+(b-a));return"YYYY/YY"===e?c.format("YYYY")+"/"+b.format("YY"):c.format("YYYY")+" - "+b.format("YYYY")});Handlebars.registerHelper("startOfAuTaxYear",function(b,a){return DateUtils.parseFrontendDate("01/07/"+(b-a-1)).format("DD/MM/YYYY")});Handlebars.registerHelper("capitalize",function(b){return _.str.capitalize(b)});
Handlebars.registerHelper("humanize",function(b){return _.str.humanize(b)});Handlebars.registerHelper("removeSpace",function(b){return b.replace(/\s+/g,"")});Handlebars.registerHelper("businessSetting",function(b){return la.BusinessSettings.get(b)});Handlebars.registerHelper("businessSettingTrailExpiresOnDate",function(){return DateUtils.serverDate().add("days",la.BusinessSettings.get("trialDaysRemaining")).format("DD MMM YYYY")});Handlebars.registerHelper("frontendDateFormat",function(b){return DateUtils.backendToFrontendWithoutException(b)});
Handlebars.registerHelper("frontendDateTimeFormat",function(b){return DateUtils.backendToFrontendDateTimeWithoutException(b)});Handlebars.registerHelper("frontendTimeFormat",function(b){return DateUtils.backendToFrontendTimeWithoutException(b)});Handlebars.registerHelper("formatDate",function(b,a){return DateUtils.backendToFormatWithoutException(b,a)});
Handlebars.registerHelper("bankAccountNumber",function(b,a,e){function c(a,b){_(b).isEmpty()||a.push(_.str.trim(b))}if(_(b).isEmpty())return b=_.str.trim(a),"xxxxxxxxxxxx"+b.substr(b.length-4,4);var d=[];c(d,b);c(d,a);c(d,e);return d.join("-")});Handlebars.registerHelper("moneyValueFormat",function(b){return _(b).isUndefined()||0===b?"":parseFloat(b).toFixed(2)});
Handlebars.registerHelper("moneyValueFormatWithComma",function(b,a,e){if(_(b).isUndefined()||0===b)return"";!0===e&&("string"===typeof b?b=-1*parseFloat(b):"number"===typeof b&&(b*=-1));return $.money.format(b,_(a).isUndefined()?2:a)});
Handlebars.registerHelper("moneyValueFormatWithCommaShowZero",function(b,a,e,c){if(_(b).isUndefined()||0===b)return b=$.money.format(0,_(a).isUndefined()?2:a),c?new Handlebars.SafeString(b.replace(/\.\d+/,"<span class='cents'>$&</span>")):b;!0===e&&("string"===typeof b?b=-1*parseFloat(b):"number"===typeof b&&(b*=-1));b=$.money.format(b,_(a).isUndefined()?2:a);return c?new Handlebars.SafeString(b.replace(/\.\d+/,"<span class='cents'>$&</span>")):b});
Handlebars.registerHelper("moneyValueFormatToSixDigits",function(b,a){if(_(b).isUndefined()||0===b)return $.money.format(0,0);!0===a&&("string"===typeof b?b=-1*parseFloat(b):"number"===typeof b&&(b*=-1));return 1E6<b||-1E6>b?$.money.format(b/1E6,1)+"M":$.money.format(b,0)});Handlebars.registerHelper("moneyValueFormatWithoutDollarSign",function(b,a){return _(b).isUndefined()||0===b?"":$.money.formatNumeric(b,_(a).isUndefined()?2:a)});
Handlebars.registerHelper("moneyValueFormat2or4DecimalPlaces",function(b,a){var e="object"===typeof a;e&&_(b).isUndefined()&&(b=0);e&&b&&(e=_(b.toString()).words("."),1<e.length&&2<e[1].length&&(a=3===e[1].length?3:4));return $.money.formatNumeric(b,a)});Handlebars.registerHelper("supplierInvoiceNumberFormatTruncated",function(b){if(null!==b&&!_(b).isUndefined()){var a=b,e=b.length;10<e&&(a=b.slice(0,4)+"\u2026"+b.slice(e-4,e));return a}return""});
Handlebars.registerHelper("moneyValueFormatWithoutDollarSignShowZero",function(b,a){return"object"===typeof a&&_(b).isUndefined()?"0":$.money.formatNumeric(b,a)});Handlebars.registerHelper("moneyValueFormatWithoutDollarSignAndCents",function(b){return _(b).isBlank()||0===b?"0":$.money.formatNumeric(b,2).split(".")[0]});Handlebars.registerHelper("simpleFormat",function(b){return new Handlebars.SafeString(_.simpleFormat(b))});
Handlebars.registerHelper("key_value",function(b,a){var e="",c;for(c in b)b.hasOwnProperty(c)&&(e+=a.fn({key:c,value:b[c]}));return e});Handlebars.registerHelper("year",function(){return(new Date).getFullYear()});Handlebars.registerHelper("month",function(){return DateUtils.monthName((new Date).getMonth()+1)});
Handlebars.registerHelper("includePartial",function(b,a){var e=$.extend({},this,_(a).isUndefined()?void 0:a.hash);return new Handlebars.SafeString(Handlebars.VM.invokePartial(Handlebars.partials[b],b,e,void 0,Handlebars.partials))});Handlebars.registerHelper("formatABN",function(b){if(_.isBlank(b)||2>b.length)return b;b=b.replace(/\s+/g,"");for(var a=9===b.length?3:2,e=b.substring(0,a),c=a;c<=b.length-a;c+=3)e+=" ",e+=b.substring(c,c+3);return e});
Handlebars.registerHelper("formatIRD",function(b){if(_.isBlank(b)||3>b.length)return b;b=b.replace(/\-+/g,"").replace(/\s+/g,"");for(var a=8===b.length?2:3,e=b.substring(0,a),c=a;c<=b.length-a;c+=3)e+="-",e+=b.substring(c,c+3);return e});Handlebars.registerHelper("partnerDashboardUrl",function(){return UrlUtils.partnerDashboardUrl()});
ns("la.views.commons",function(b){b.LoginView=la.views.FormView.extend({initialize:function(){var a=UrlUtils.getQueryParam("StartUrl");_(a).isUndefined()?UrlUtils.redirect(UrlUtils.homeUrl()):UrlUtils.redirect(UrlUtils.url(decodeURIComponent(a)))}})});
ns("la.views.commons",function(b){b.NotificationView=la.views.View.extend({id:"notificationView",initialize:function(){this.listenTo(this.model,"hide",this.hide);this.listenTo(this.model,"hideImmediate",this.hideImmediate);this.listenTo(this.model,"show",this.show);this.timer=null;_(this).bindAll()},hide:function(){this.$el.fadeOut("slow")},hideImmediate:function(){this.$el.hide()},show:function(a){this.$el.html(HandlebarsTemplates[a&&a.template?"commons/"+a.template:"commons/notification"](this.model.toJSON()));
window.clearTimeout(this.timer);var b=this.$el;b.fadeIn("slow");a&&!0===a.fade&&(this.timer=window.setTimeout(this.hide,8E3));0<b.length&&a&&!0===a.scrollIntoView&&b[0].scrollIntoView({block:"start",behavior:"smooth"})}})});
ns("la.views.commons",function(b){b.OnboardingNavigationView=la.views.BaseView.extend({templateName:"commons/onboarding_navigation",events:{"click #onboarding-previous-btn":"_handlePreviousClick","click #onboarding-next-btn":"_handleNextClick"},initialize:function(a){this._super(a);this.model=a.model},onDomReady:function(){"true"===this._getCurrentUrl().split("show-onboarding=")[1]&&this.$("div#onboarding-navigation").removeClass("hidden")},_getCurrentUrl:function(){return window.location.href},_handlePreviousClick:function(){la.breadcrumb.clear();
UrlUtils.redirect(UrlUtils.businessUrl(this.model.previousUrl))},_handleNextClick:function(){la.breadcrumb.clear();UrlUtils.redirect(UrlUtils.businessUrl(this.model.nextUrl))}})});
var PaginatorView=la.views.View.extend({events:{"click .page":"page"},initialize:function(){this.listenTo(this.collection,"reset",this.render)},render:function(){var b=this.collection.info();if(1>=b.totalPages)return this.$el.html(""),this;b.pageSet=this.calculatePageSet(b.totalPages,b.currentPage);$(this.el).html(HandlebarsTemplates["commons/paginator"](b));return this},page:function(b){b.preventDefault();b=$(b.target).data("page");_.isNumber(b)&&this.collection.goTo(b)},calculatePageSet:function(b,
a){return 6>=b?this.calculatePageSetForNoMoreThan6(b,a):this.calculatePageSetForMoreThan6(b,a)},calculatePageSetForNoMoreThan6:function(b,a){var e=[];for(page=1;page<=b;page++)e.push(page);return e},calculatePageSetForMoreThan6:function(b,a){var e=[],c=a-2,c=0<c?c:1;for(page=c=c>b-5?b-5:c;page<c+5;page++)e.push(page);b!==c+5&&e.push("...");e.push(b);return e}});
ns("la.views.commons",function(b){b.PublicHeaderView=la.views.BaseView.extend({id:"header",templateName:"commons/simple_header",initialize:function(a){_.bindAll(this,"render")}})});Handlebars.registerHelper("ifDrillableSubClassification",function(b,a){return checkCondition(14!==b&&999!==b,a,this)});
ns("la.views.commons",function(b){b.TableView=la.views.View.extend({tagName:"table",className:"table-alt",initialize:function(a){this.options=a;this.filterModel=a.model;this.headerView=a.headerView||this.headerView;this.footerView=a.footerView||this.footerView;this.rowView=a.rowView||this.rowView;this.businessId=a.businessId;this.noRecordMessage=a.noRecordMessage||this.noRecordMessage||"There are no records.";this.loadingMessage=a.loadingMessage;_.bindAll(this,"render");this.rowViews=[];this.renderedRowModels=
[];this.listenTo(this.collection,"remove",this._removeRow);this.listenTo(Backbone,"clean:renderedRowModels",this._cleanRenderedRowModels)},render:function(){this.renderHeader();this.$tbody=$('<tbody class="tbody"></tbody>');this.$el.append(this.$tbody);this.renderFooter();this.loadingMessage?this.showMessage(this.loadingMessage):this.$el.append('<tr><td colspan="8"><div class="mediumLoadingSpinner" style="display:block"></div></td></tr>');return this},renderHeader:function(){this.header=this._renderHeaderOrFooter(this.headerView)},
renderFooter:function(){this.footer=this._renderHeaderOrFooter(this.footerView)},_renderHeaderOrFooter:function(a){var b;a&&(b=createObject(a,_(this.options).extend({container:this,filterModel:this.filterModel})),this.$el.append(b.render().el));return b},renderRows:function(){_(this.rowViews).each(function(a){a.remove()});this.rowViews=[];var a=this.getCollection();if(0===a.length)this.showMessage(this.noRecordMessage);else{var b=[];a.each(function(a){a=this.createRowView(a);this.rowViews.push(a);
b.push(a.render().el)}.bind(this));this.$tbody.empty();this.$tbody.append(b)}IE9.supportPlaceHolder(this.$el);this.trigger("renderrows")},_cleanRenderedRowModels:function(){this.renderedRowModels=[]},appendRows:function(){var a=this.getCollection();if(0===a.length)this.showMessage(this.noRecordMessage);else{var b=[];a.each(function(a){if(-1===this.renderedRowModels.indexOf(a)){var d=this.createRowView(a);this.renderedRowModels.push(a);this.rowViews.push(d);b.push(d.render().el)}}.bind(this));this.$tbody.append(b)}IE9.supportPlaceHolder(this.$el);
this.trigger("renderrows")},getCollection:function(){return this.collection},showMessage:function(a){var b=this.$("thead th").size();this.$tbody.html('<tr><td colspan="'+b+'" class="center">'+_.escape(a)+"</td></tr>")},createRowView:function(a){return createObject(this.rowView,_.extend(this.options,{model:a,container:this,filterModel:this.filterModel}))},_removeRow:function(a){var b=_(this.rowViews).find(function(b){return b.model.cid===a.cid});b&&(b.$el.remove(),b.remove(),this.rowViews.remove(this.rowViews.indexOf(b)));
this._checkIfListEmpty()},_checkIfListEmpty:function(){0===this.collection.size()&&this.showMessage(this.noRecordMessage)}})});
ns("la.views.commons",function(b){b.SortableTableView=b.TableView.extend({className:"table-alt table-sortable",events:{"click > thead th":"sort","click > thead th i":"sort","mouseenter [rel='tooltip']":"showTooltip"},initialize:function(a){this._super(a);this.listenTo(this.collection,"sortOrFilter",this.renderRows)},sort:function(a){var b=this.$(a.target).closest("th");a=b.attr("data-field");_.isUndefined(a)||(b=b.hasClass("asc")?"desc":"asc",this.setSort(a,b))},setSort:function(a,b){this.$("thead th").removeClass("asc");
this.$("thead th").removeClass("desc");this.$("thead th i.fa-caret-up").remove();this.$("thead th i.fa-caret-down").remove();var c='<i id="date-sort-icon" class="fa '+("asc"===b?"fa-caret-up":"fa-caret-down")+'"></i>';this.$('thead th[data-field="'+a+'"]').addClass(b).append(c);this.collection.setSort(a,b)},showTooltip:function(a){$(a.target).tooltip("show")}})});ns("la.views.commons",function(b){b.TableFooterView=la.views.View.extend({tagName:"tfoot"})});
ns("la.views.commons",function(b){b.TableHeaderView=la.views.BaseView.extend({tagName:"thead",initialize:function(a){this._super(a);this.filterModel=a?a.filterModel:void 0}})});
ns("la.views.commons",function(b){b.TableHeaderSelectableView=la.views.commons.TableHeaderView.extend({model:new la.models.Model,initialize:function(){this.listenTo(this.collection,"change reset",this.setSelectAll)},render:function(){this.model.set({checked:this.collection.isAllSelected()});return this._super()},setSelectAll:function(){this.$("#selectAll").attr("checked",this.collection.isAllSelected())}})});
ns("la.views.commons",function(b){b.TableRowBaseView={tagName:"tr",initialize:function(a){this._super(a);this.options=a;this.listenTo(this.model,"change:selected",this.toggleCheckbox)},toggleCheckbox:function(){var a=this.$('input:checkbox[name="selected"]');"disabled"===a.attr("disabled")&&(this.model.attributes.selected=!1);this.model.get("selected")?a.attr("checked","checked"):a.removeAttr("checked")}}});ns("la.views.commons",function(b){b.TableRowFormView=la.views.ValidatedFormView.extend(b.TableRowBaseView)});
ns("la.views.commons",function(b){b.TableRowView=la.views.BaseView.extend(b.TableRowBaseView)});ns("la.views.admin",function(b){b.AdvisorDetailsReportView=la.views.BaseIFrameView.extend({templateName:"commons/iframe_container",initialize:function(a){this._super(a);this._setId("advisorDetailsReportFrame");this._setUrl(UrlUtils.url("/admin/ad-advisor-details.html"))}})});
ns("la.views",function(b){b.ReactView=la.views.BaseView.extend({contentId:"pageContents",onDomReady:function(){this.reactLib.ReactDOM.render(this.reactLib.React.createElement(this.component,this.params),document.getElementById(this.contentId))},remove:function(){this.reactLib.ReactDOM.unmountComponentAtNode(document.getElementById(this.contentId))}})});var FrontendNew=FrontendNew||{};
ns("la.views.admin",function(b){b.BusinessFeatureTagsView=la.views.ReactView.extend({initialize:function(a){this._super(a);this.reactLib=FrontendNew;this.component=FrontendNew.businessFeatureTagsPage;this.params={notification:la.fixedNotification}}})});ns("la.views.admin",function(b){b.ContextualHelpView=la.views.BaseIFrameView.extend({templateName:"commons/iframe_container",initialize:function(a){this._super(a);this._setId("contextualHelpFrame");this._setUrl(UrlUtils.url("/admin/manage-contextual-help.html"))}})});
ns("la.views.admin",function(b){b.DeleteBankStatementView=la.views.BaseIFrameView.extend({templateName:"commons/iframe_container",initialize:function(a){this._super(a);this._setId("deleteBankStatementFrame");this._setUrl(UrlUtils.url("/admin/delete-bank-statements.html"))}})});
ns("la.views.admin",function(b){b.DemotePartnerBusnessesView=la.views.FormView.extend({templateName:"admin/demote_partner_businesses",events:{"click #demotePartnerBusiness":"_demotePartnerBusinesses"},initialize:function(){this._super();this.model=new la.models.admin.DemotePartnerBusnesses},_demotePartnerBusinesses:function(){this.saveAndCallback({message:"Successfully demoted partner businesses."})}})});FrontendNew=FrontendNew||{};
ns("la.views.admin",function(b){b.FeatureTagsView=la.views.ReactView.extend({initialize:function(a){this._super(a);this.reactLib=FrontendNew;this.component=FrontendNew.featureTagsPage}})});ns("la.views.admin",function(b){b.HealthCheckReportsView=la.views.BaseIFrameView.extend({templateName:"admin/health_check_reports"})});
ns("la.views.admin",function(b){b.HealthCheckView=la.views.BaseIFrameView.extend({templateName:"commons/iframe_container",initialize:function(a){this._super(a);this._setId("healthCheckFrame");this._setUrl(UrlUtils.url("/admin/admin-report.html?report="+a.reportName))}})});
ns("la.views.admin",function(b){b.IntermediaryDepListView=la.views.BaseView.extend({rowView:"la.views.admin.IntermediaryDepRowView",tagName:"tbody",initialize:function(a){this._super(a);this.options=a;this.collection=a.model.get("depLines");Cocktail.mixin(b.IntermediaryDepListView,la.views.mixins.Listable)}})});
ns("la.views.admin",function(b){b.IntermediaryDepRowView=la.views.BaseView.extend({className:"intermediary-dep-row-view",templateName:"admin/intermediary_dep_row",tagName:"tr",initialize:function(a){this.model=a.model;this.irdMonths=a.irdMonths;this.irdYears=a.irdYears;this.collection=a.collection}})});
ns("la.views.admin",function(b){b.IntermediaryEpsView=la.views.BaseView.extend({templateName:"admin/intermediary_eps",events:{"click #eps-download-button":"_downloadEps"},initialize:function(a){this._super(a);this.irdMonths=new Backbone.Collection([{id:"01",name:"January"},{id:"02",name:"February"},{id:"03",name:"March"},{id:"04",name:"April"},{id:"05",name:"May"},{id:"06",name:"June"},{id:"07",name:"July"},{id:"08",name:"August"},{id:"09",name:"September"},{id:"10",name:"October"},{id:"11",name:"November"},
{id:"12",name:"December"}]);this.irdYears=new Backbone.Collection([{id:"2016"},{id:"2017"},{id:"2018"}]);this._createModel();a=_({}).extend(a,{model:this.model,irdMonths:this.irdMonths,irdYears:this.irdYears});this.addSubview(new la.views.admin.IntermediaryDepListView(a),"#dep-table-body")},_createModel:function(){this.model=new la.models.admin.IntermediaryEps({});this._initialiseDepLines()},_initialiseDepLines:function(){for(var a=[],b=0;15>b;b++)a.push(new la.models.admin.IntermediaryDepLine({}));
this.model.set("depLines",new Backbone.Collection(a));this.collection=this.model.get("depLines")},_downloadEps:function(){$.ajax({type:"POST",url:UrlUtils.url("/app/intermediary/eps"),contentType:"application/json",dataType:"json",data:JSON.stringify(this.model),success:function(a){var b=document.createElement("a"),c=new Blob([a.content]),c=URL.createObjectURL(c);b.href=c;b.download=a.filename+".csv";document.body.appendChild(b);b.click();document.body.removeChild(b)}})}})});
ns("la.views.admin",function(b){b.IntermediaryIrdBankFileView=la.views.ValidatedFormView.extend({templateName:"admin/intermediary_ird_bank_file",events:{"click #ird-bank-file-download-button":"_downloadIrdBankFile"},initialize:function(a){this._super(a);this.irdMonths=new Backbone.Collection([{id:"01",name:"January"},{id:"02",name:"February"},{id:"03",name:"March"},{id:"04",name:"April"},{id:"05",name:"May"},{id:"06",name:"June"},{id:"07",name:"July"},{id:"08",name:"August"},{id:"09",name:"September"},
{id:"10",name:"October"},{id:"11",name:"November"},{id:"12",name:"December"}]);this.irdYears=new Backbone.Collection([{id:"2016"},{id:"2017"},{id:"2018"}]);this.model=new la.models.admin.IntermediaryIrdBankFile({})},render:function(){this._super();this.$("#paymentDate").blur();return this},_downloadIrdBankFile:function(){$.ajax({type:"POST",url:UrlUtils.url("/app/intermediary/bank-file/creditIrd"),contentType:"application/json",dataType:"json",data:JSON.stringify(this.model),success:function(a){var b=
document.createElement("a"),c=new Blob([a.content]),c=URL.createObjectURL(c);b.href=c;b.download=a.filename;document.body.appendChild(b);b.click();document.body.removeChild(b)}})}})});
ns("la.views.admin",function(b){b.IntermediaryScfView=la.views.BaseView.extend({templateName:"admin/intermediary_scf",events:{"click #scf-download-button":"_downloadScf"},initialize:function(a){this._super(a);this.irdMonths=new Backbone.Collection([{id:"01",name:"January"},{id:"02",name:"February"},{id:"03",name:"March"},{id:"04",name:"April"},{id:"05",name:"May"},{id:"06",name:"June"},{id:"07",name:"July"},{id:"08",name:"August"},{id:"09",name:"September"},{id:"10",name:"October"},{id:"11",name:"November"},
{id:"12",name:"December"}]);this.irdYears=new Backbone.Collection([{id:"2016"},{id:"2017"},{id:"2018"}]);this.model=new la.models.admin.IntermediaryScf({})},_downloadScf:function(){var a=this.$(".loadingSpinner");$.ajax({type:"GET",url:UrlUtils.url("/app/intermediary/scf?month="+this.model.get("scfMonth")+"&year="+this.model.get("scfYear")),beforeSend:function(){a.show()},success:function(a){var b=document.createElement("a"),d=new Blob([a.content]),d=URL.createObjectURL(d);b.href=d;b.download=a.filename+
".csv";document.body.appendChild(b);b.click();document.body.removeChild(b)},complete:function(){a.hide()}})}})});FrontendNew=FrontendNew||{};ns("la.views.admin",function(b){b.ManageBusinessesView=la.views.ReactView.extend({initialize:function(a){this._super(a);this.reactLib=FrontendNew;this.component=FrontendNew.manageBusinessesPage}})});
ns("la.views.admin",function(b){b.NoticeboardView=la.views.BaseIFrameView.extend({templateName:"commons/iframe_container",initialize:function(a){this._super(a);this._setId("noticeboardFrame");this._setUrl(UrlUtils.url("/admin/manage-noticeboard.html"))}})});FrontendNew=FrontendNew||{};ns("la.views.admin",function(b){b.PartnerProgramView=la.views.ReactView.extend({initialize:function(a){this._super(a);this.reactLib=FrontendNew;this.component=FrontendNew.partnerProgramPage}})});
ns("la.views.admin",function(b){b.PMReportsView=la.views.BaseIFrameView.extend({templateName:"commons/iframe_container",initialize:function(a){this._super(a);this._setId("pmReportsFrame");this._setUrl(UrlUtils.url("/admin/pm-reports.html"))}})});ns("la.views.admin",function(b){b.QueueUsersView=la.views.BaseIFrameView.extend({templateName:"commons/iframe_container",initialize:function(a){this._super(a);this._setId("queueUsersFrame");this._setUrl(UrlUtils.url("/admin/mydot-user-migration.html"))}})});
FrontendNew=FrontendNew||{};ns("la.views.admin",function(b){b.UserFeatureTagsView=la.views.ReactView.extend({initialize:function(a){this._super(a);this.reactLib=FrontendNew;this.component=FrontendNew.userFeatureTagsPage}})});
ns("la.views.advisor",function(b){b.AddBusinessView=la.views.ValidatedFormView.extend({mixins:[la.views.mixins.Slidable,la.views.mixins.ResettingView],templateName:"advisor/add_business",id:"addBusinessForm",focusElementId:"businessName",className:"panel panel-grey",events:{"click #addButton":"addManagedBusiness"},initialize:function(a){_.bindAll(this);this.container=a.container;this.managedBusinesses=a.managedBusinesses;this.businessTypes=a.businessTypes;this.initializeChartOfAccountsTypes();this.prePopulateMyobCrmIdIfExists()},
initializeChartOfAccountsTypes:function(){this.chartOfAccountsTypes=new Backbone.Collection;_(this.businessTypes.models).each(function(a){this.chartOfAccountsTypes.add(new la.models.advisor.ChartOfAccountsType(a,"businessType"))}.bind(this));_(this.managedBusinesses.models).each(function(a){this.chartOfAccountsTypes.add(new la.models.advisor.ChartOfAccountsType(a,"business"))}.bind(this))},addManagedBusiness:function(){this.saveAndCallFunction(this.hideAndUpdateCollection,{modelName:"Managed business"})},
hideAndUpdateCollection:function(){this.hide();this.managedBusinesses.add(this.model.clone());this.initializeChartOfAccountsTypes()},afterShown:function(){this.setFocus()},prePopulateMyobCrmIdIfExists:function(){FeatureTagUtils.isFeatureAvailable(FeatureTag.PARTNER_CLEANUP_VALIDATE_PARTNER)&&this._hasMyobCrmId()&&this.model.set("referrer",la.BusinessSettings.get("myobCrmId"))},render:function(){this._super();FeatureTagUtils.isFeatureAvailable(FeatureTag.PARTNER_CLEANUP_VALIDATE_PARTNER)&&this._hasMyobCrmId()&&
this.$("#referrer").attr("disabled","disabled");return this},_hasMyobCrmId:function(){return!_.isBlank(la.BusinessSettings.get("myobCrmId"))}})});
ns("la.views.advisor",function(b){b.AdvisorBusinessDetailsView=la.views.ValidatedFormView.extend({id:"advisorBusinessDetailsView",templateName:"advisor/advisor_details",events:{"click #saveBusinessDetails":"_saveBusinessDetails"},initialize:function(a){this._super(a);this.addressesView=this.addSubview(new la.views.business.BusinessAddressesView({addressTemplate:"business/address",model:this.model,container:this}),".addresses");_.bindAll(this);this.render()},isValid:function(){return this.model.isValid()&&
this.addressesView.isValid()},_saveBusinessDetails:function(){this.saveAndCallback({message:"Business details saved"})}})});
ns("la.views.advisor",function(b){b.AdvisorDashboardView=la.views.BaseView.extend({mixins:[la.views.mixins.TableContainerView,la.views.mixins.Searchable],className:"managedBusinesses",templateName:"advisor/advisor_dashboard",tableViewName:"la.views.advisor.ManagedBusinessListView",events:{"click #inviteBusinessButton":"showInviteBusinessForm","click #addNewBusiness":"showAddNewBusinessForm","click #bannerButton":"openPartnerDashboard"},initialize:function(a){this.fetchBusinessTypes();this.collection=
new la.collections.advisor.ManagedBusinessPager([]);this.addSubview(new la.views.commons.ApplicationMessagesView(a),"#applicationMessages");this.listenTo(this.collection,"sync",this._checkNotHandoverBusinessesExist);this._super(a)},render:function(){return this._super()},_checkNotHandoverBusinessesExist:function(){0<this.collection.filter(function(a){return!_.isBlank(a.get("suspensionDateForNotHandoveredBusiness"))}).length?this.showFixedNotification("You've got some businesses that have yet to be transferred ownership. Transfer them soon or they'll be suspended.",
"warning"):this.hideFixedNotification()},showInviteBusinessForm:function(a){this.inviteBusinessView=this.inviteBusinessView||new la.views.advisor.InviteBusinessView({model:new la.models.advisor.InvitedBusiness({}),businessId:this.businessId,container:this.$("#pageContentHeader")});this.inviteBusinessView.toggle()},showAddNewBusinessForm:function(){this.addBusinessView=this.addBusinessView||new la.views.advisor.AddBusinessView({model:new la.models.advisor.ManagedBusiness({}),businessId:this.businessId,
container:this.$("#pageContentHeader"),managedBusinesses:this.collection,businessTypes:this.businessTypes});this.addBusinessView.toggle()},fetchBusinessTypes:function(){this.businessTypes=new la.collections.advisor.BusinessTypes([],{businessId:this.businessId});this.businessTypes.fetch()},openPartnerDashboard:function(){UrlUtils.openWindow(la.Config.attributes.partnerDashboardUrl)}})});
ns("la.views.advisor",function(b){b.BusinessInvitationsRowView=la.views.BaseView.extend({templateName:"advisor/businessinvitations_row",className:"item",events:{"click .resendInvitation":"showInviteBusinessForm","click .deleteButton":"confirmDeleteInvitation"},showInviteBusinessForm:function(a){this.inviteBusinessView=this.inviteBusinessView||new la.views.advisor.InviteBusinessView({model:this.model.clone(),businessId:this.businessId,container:$(a.currentTarget).closest(".item"),invitations:this.collection,
saved:function(a){a.fetch({success:function(){var b=this.collection.get(a.get("id"));this.collection.remove(b);this.collection.add(a)}.bind(this)})}.bind(this)});this.inviteBusinessView.toggle()},confirmDeleteInvitation:function(a){this.confirmAndAction({title:I18n.t("advisor.deleteInvitationDialogTitle"),messages:[I18n.t("advisor.deleteInvitationDialogMessage1"),I18n.t("advisor.deleteInvitationDialogMessage2")],yesAction:function(){this.confirmationDialog.hide();this.deleteInvitation()}.bind(this)})},
deleteInvitation:function(a){a=this.collection.get(this.model.get("id"));a.set("businessId",this.businessId,!0);this.collection.remove(a);a.destroy();this.showNotification(I18n.t("advisor.deleteInvitationSuccessful"))}});b.BusinessInvitationsListView=la.views.BaseView.extend({mixins:[la.views.mixins.List,la.views.mixins.Listable],rowView:"la.views.advisor.BusinessInvitationsRowView",noItemsMessage:"There are no outstanding business invitations."});b.BusinessInvitationsView=la.views.BaseView.extend({templateName:"advisor/business_invitations",
id:"businessInvitations",events:{"click #inviteBusinessButton":"showInviteBusinessForm"},initialize:function(a){this.model=new Backbone.Model;this.addSubview(new la.views.advisor.BusinessInvitationsListView(a),".businessInvitations")},showInviteBusinessForm:function(a){this.inviteBusinessView=this.inviteBusinessView||new la.views.advisor.InviteBusinessView({model:new la.models.advisor.InvitedBusiness({}),businessId:this.businessId,container:this.$("#pageContentHeader"),saved:function(a){a.fetch({success:function(){this.findSubviewInSelector(".businessInvitations").collection.add(a)}.bind(this)})}.bind(this)});
this.inviteBusinessView.toggle()}})});
ns("la.views.advisor",function(b){b.HandoverBusinessView=la.views.ValidatedFormView.extend({mixins:[la.views.mixins.Slidable,la.views.mixins.ResettingView],id:"handoverBusinessForm",templateName:"advisor/handover_business",focusElementId:"firstName",className:"rowForm",tagName:"tr",events:{"click #handoverButton":"save"},initialize:function(a){_.bindAll(this)},save:function(){this.saveAndCallFunction(this.saveCallback,{message:I18n.t("advisor.managedBusinessHandoverSuccessful",{businessName:this.businessToHandover().get("businessName")})})},
saveCallback:function(){this.hide();this.businessToHandover().set("status","HANDOVER");this.businessToHandover().fetch()},createHandlebarsContext:function(a,b){var c=this._super(a,b);c.businessName=this.businessToHandover().get("businessName");return c},businessToHandover:function(){return this.collection.get(this.model.get("handoverBusinessId"))},afterShown:function(){this.setFocus()}})});
ns("la.views.advisor",function(b){b.InviteBusinessView=la.views.ValidatedFormView.extend({mixins:[la.views.mixins.Slidable,la.views.mixins.ResettingView],templateName:"advisor/invite_business",id:"inviteBusiness",focusElementId:"email",className:"rowForm",style:"display: none;",events:{"click #inviteButton":"inviteManagedBusiness"},initialize:function(a){this._super(a);this.container=a.container;this.invitations=a.invitations;this.saved=a.saved;this.businessTypes=new la.collections.advisor.BusinessTypes([],
{businessId:a.businessId});this.businessTypes.fetch();this.model.set("confirmEmail",this.model.get("email"));this.model.set("partnerResourcesUrl",!0===la.Config.isAU()?"http://myob.com.au/partners/partner-resources-1258090827546":"http://myob.co.nz/partners/partner-resources-1257828256665");_.bindAll(this)},inviteManagedBusiness:function(){this.saveAndCallFunction(this.hideAndCallback,{message:"Invitation sent to "+this.model.get("email")})},hideAndCallback:function(){this.hide();this.saved&&this.saved(this.model.clone())},
afterShown:function(){this.setFocus()}})});ns("la.views.advisor",function(b){b.ManagedBusinessHeaderView=la.views.commons.TableHeaderView.extend({templateName:"advisor/managedbusiness_header"})});ns("la.views.advisor",function(b){b.ManagedBusinessListView=la.views.commons.SortableTableView.extend({headerView:"la.views.advisor.ManagedBusinessHeaderView",rowView:"la.views.advisor.ManagedBusinessRowView",noRecordMessage:I18n.t("advisor.noManagedBusinessesMessage")})});
ns("la.views.advisor",function(b){b.ManagedBusinessRowView=la.views.commons.TableRowFormView.extend({templateName:"advisor/managedbusiness_row",className:function(){return"item"+("HANDOVER"===this.model.get("status")?" pending":"")},events:{"click .deleteButton":"confirmDeleteManagedBusiness","click .handoverManagedBusiness":"handoverManagedBusiness","click .resendHandoverInvitation":"handoverManagedBusiness","click .cancelHandoverInvitation":"confirmCancelHandoverInvitation"},render:function(){this._super();
if(!0===this.model.get("hasBankFeeds")){var a=new la.models.advisor.UnallocatedTransactions({businessId:this.businessId,managedBusinessId:this.model.get("id")});a.fetch({success:function(){this.$(".unallocatedTransactionCount").html(a.get("number")+" unallocated")}.bind(this)})}return this},confirmDeleteManagedBusiness:function(){this.confirmAndAction({title:this._confirmDeleteTitle(),messages:this._confirmDeleteMessage(),yesAction:function(){this.confirmationDialog.hide();this.deleteManagedBusiness()}.bind(this),
afterHide:function(){$("body").removeClass("modal-open")}.bind(this)})},_confirmDeleteTitle:function(){return I18n.t(this.model.hasBeenHandedOver()?"advisor.unlinkManagedBusinessDialogTitle":"advisor.deleteManagedBusinessDialogTitle")},_confirmDeleteMessage:function(){return I18n.t(this.model.hasBeenHandedOver()?"advisor.unlinkManagedBusinessDialogMessages":"advisor.deleteManagedBusinessDialogMessages")},deleteManagedBusiness:function(a){this.model.destroy();this.collection.remove(this.model);this.showNotification(I18n.t("advisor.deleteManagedBusinessSuccessful"));
this.collection.trigger("sync")},handoverManagedBusiness:function(a){this.handoverView=this.handoverView||new la.views.advisor.HandoverBusinessView({collection:this.collection,container:$(a.currentTarget).closest(".item"),model:new la.models.advisor.HandoverManagedBusiness({businessId:this.businessId,handoverBusinessId:this.model.get("id")}),businessId:this.businessId});this.handoverView.toggle()},confirmCancelHandoverInvitation:function(a){this.confirmAndAction({title:I18n.t("advisor.cancelManagedBusinessHandoverDialogTitle"),
messages:[I18n.t("advisor.cancelManagedBusinessHandoverDialogMessage")],yesAction:function(){this.confirmationDialog.hide();this.cancelHandoverInvitation()}.bind(this)})},cancelHandoverInvitation:function(){var a=this.model.get("handoverInvitation");a&&a.destroy({success:function(){this.showNotification(I18n.t("advisor.cancelManagedBusinessHandover",{businessName:this.model.get("businessName")}));this.model.fetch()}.bind(this)})}})});
ns("la.views.advisor",function(b){b.VerifyAdvisorInvalidView=la.views.BaseView.extend({id:"verifyAdvisorInvalidView",templateName:"advisor/verify_advisor_invalid",initialize:function(a){this._super(a)}})});
ns("la.views.advisor",function(b){b.VerifyAdvisorMainView=la.views.BaseView.extend({id:"verifyAdvisorMainView",templateName:"advisor/verify_advisor_main",initialize:function(a){this._super(a);this.addSubview(new la.views.advisor.VerifyAdvisorView(a),"#verifyAdvisor");this.addSubview(new la.views.advisor.VerifyAdvisorInvalidView(a),"#verifyAdvisorInvalid")}})});
ns("la.views.advisor",function(b){b.VerifyAdvisorView=la.views.ValidatedFormView.extend({id:"verifyAdvisorView",templateName:"advisor/verify_advisor",events:{"click #continueButton":"_validateArchiePartner","click #demotePartner":"_demotePartnerBusiness"},initialize:function(a){this._super(a);_.bindAll(this);this.businessId=a.businessId;la.BusinessSettings.set("businessId",this.businessId);this.model=new la.models.advisor.VerifyAdvisor({id:this.businessId});this.notificationModel=new Backbone.Model;
this.addSubview(new la.views.commons.NotificationView({model:this.notificationModel}),"#verifyNotification")},_goToDashboard:function(){UrlUtils.navigateToRoute(this.businessId,"/advisor")},_onValidateSuccess:function(){la.BusinessSettings.fetch({success:this._onBusinessFetchSuccess})},_onBusinessFetchSuccess:function(){this._goToDashboard();la.notification.showNotification("All done! Thanks for validating your Client ID.","success")},_validateArchiePartner:function(){this.disableForm();this.model.save([],
{success:this._onValidateSuccess,error:function(){this.enableForm()}.bind(this),statusCode:{400:this._displayErrorNotification}})},_displayErrorNotification:function(a){a=$.parseJSON(a.responseText);a=this._errorMessageFor(a);this.notificationModel.set({message:a,type:"danger",closeButton:!0});this.notificationModel.trigger("show")},_errorMessageFor:function(a){return this._invalidSerialOrCrmId(a)?"Sorry there is no Partner Program associated with that Serial Number or Client ID.":this._crmIdAlreadyExists(a)?
"Invalid Serial Number or Client ID. Please re-enter. If error persists, contact your Partner Manager directly or the Partner Team on 1300 555 117":"An error occurred."},_invalidSerialOrCrmId:function(a){return ErrorUtils.hasErrorWithCode(a,"1102")},_crmIdAlreadyExists:function(a){return ErrorUtils.hasErrorWithCode(a,"1150")},_demotePartnerBusiness:function(a){a.preventDefault();$.post(UrlUtils.apiUrl(this.businessId,"/advisor/demote")).done(this._demotePartnerBusinessCallback)},_demotePartnerBusinessCallback:function(){UrlUtils.navigateToPublicRoute("/myBusinesses");
la.notification.showFixedNotification("Welcome to your My Businesses page. You can access and work with your clients' businesses from this page. <a href='http://help.myob.com/wiki/x/BoA3' target='_blank'>Learn more.</a>","info")}})});
ns("la.views.banking",function(b){b.BankFeedSignupDetailsView=la.views.BaseView.extend({initialize:function(a){this._super(a);this.banks=a.banks;this.applicationModel=a.model;this.listenTo(this.applicationModel,"change:financialInstitutionId",this._toggleInputVisibility)},_toggleInputVisibility:function(a,b){var c=this.banks.get(b);c&&(this.$('label[for="'+this.modelName+'.accountNumber"]').text(c.get("accountNumberLabel")),this.$(".notes small").text(null===c.get("notes")?"":c.get("notes")),_.each(this.toggleFields,
function(a){this._toggleField(c,a)},this))},_toggleField:function(a,b){var c=this.$("#"+this.modelName+"\\."+b).closest(".form-group").parent();c.toggleClass("hidden",!a.get(b+"Required"));c.prev(".dashed").not(".hidden").toggleClass("dash-after",!c.hasClass("hidden"))}})});
ns("la.views.banking",function(b){b.BankDetailsView=b.BankFeedSignupDetailsView.extend({id:"bank-details",modelName:"bankAccount",templateName:"banking/bank_details",className:"panel-body",toggleFields:"accountName bsb accountNumber accountType bsbBank bsbBranch accountSuffix branchName".split(" "),initialize:function(a){this._super(a);this.model=a.model}})});
ns("la.views.banking",function(b){b.BankFeedApplicationChecker=la.Class.extend({isClientSetupValid:function(){return!la.BusinessSettings.get("duplicateCrmId")&&!_(la.BusinessSettings.get("myobCrmId")).isBlank()&&!_(la.BusinessSettings.get("businessSerialNumber")).isBlank()},isValidAccountStatus:function(){var a=la.BusinessSettings.get("accountStatus");return"ACTIVE"===a||"TRIAL"===a},isBankFeedApplicationPossible:function(){return this.isClientSetupValid()&&this.isValidAccountStatus()}})});
ns("la.views.banking",function(b){b.BankFeedSignupContainerView=la.views.BaseView.extend({mixins:[la.views.mixins.Slidable],id:"bank-feed-signup-container",templateName:"banking/bank_feed_signup_container",className:"panel panel-gray",initialize:function(a){a=_(a).extend({complete:this.signupCompleted.bind(this)});this.signupView=new la.views.banking.BankFeedSignupView(a);this.signupReadonlyView=new la.views.banking.BankFeedSignupReadonlyView(a);this.signupView.render();this.addSubview(this.signupView,
"#bank-feed-signup");this.addSubview(this.signupReadonlyView,"#bank-feed-signup-readonly")},signupCompleted:function(a){a&&"TRUSTED"!==a.get("applicationMethod")?(this.signupReadonlyView.model=a,this.signupReadonlyView.render(),this.$("#bank-feed-signup").addClass("hidden"),this.$("#bank-feed-signup-readonly").removeClass("hidden"),la.BusinessSettings.setPreference("bankfeeds","signupFinished",!0)):this.hide()}})});
ns("la.views.banking",function(b){b.BankFeedSignupReadonlyView=la.views.BaseView.extend({mixins:[la.views.mixins.Validatable],templateName:"banking/bank_feed_signup_readonly",events:{"click #continue-button":"_openInternetBanking","click #print-button":"_openApplicationPdf","click #close-button":"hide"},initialize:function(a){this.complete=a.complete;this.model=new Backbone.Model},hide:function(){this.complete()},_openApplicationPdf:function(){var a=UrlUtils.apiUrl(la.BusinessSettings.getBusinessId(),
"/bank-feeds/applications/"+this.model.get("id")+"/form.pdf");UrlUtils.openWindow(a)},_openInternetBanking:function(){var a=this._buildOnlineBankingUrl();UrlUtils.openWindow(a)},_buildOnlineBankingUrl:function(){return FeatureTagUtils.isFeatureAvailable(FeatureTag.BANK_FEED_APPLICATION_WITHOUT_HACKS)?this._substituteMyobIdIntoOnlineBankingUrl():this._addMyobIdOntoOnlineBankingUrl()},_addMyobIdOntoOnlineBankingUrl:function(){var a=this.model.get("onlineBankingUrl");this.model.get("myobIdInUrlRequired")&&
(a+="&myobid="+this.model.get("refCode"));return a},_substituteMyobIdIntoOnlineBankingUrl:function(){var a=this.model.get("onlineBankingUrl"),b=this.model.get("refCode");return a.replace("MYOB_ID_GOES_HERE",b)}})});
ns("la.views.banking",function(b){b.BankFeedSignupUnableView=la.views.BaseView.extend({mixins:[la.views.mixins.Slidable],id:"bank-feed-signup-unable",templateName:"banking/bank_feed_signup_unable",className:"panel panel-gray",events:{"click #close-button":"hide"},initialize:function(){var a=new la.views.banking.BankFeedApplicationChecker;this.model=new Backbone.Model({accountStatus:la.BusinessSettings.get("accountStatus"),validSetup:(new la.views.banking.BankFeedApplicationChecker).isClientSetupValid(),
invalidSetupForValidBusiness:!a.isClientSetupValid()&&a.isValidAccountStatus()})}})});
ns("la.views.banking",function(b){b.BankFeedSignupView=la.views.BaseView.extend({mixins:[la.views.mixins.Validatable],templateName:"banking/bank_feed_signup",events:{"click #apply-button":"_submitApplication","click #cancel-button":"_cancel","click #let-us-know-link":"_clickLetUsKnow"},initialize:function(a){this.complete=a.complete;this.bankFeeds=a.bankFeeds;this.banks=new Backbone.Collection;this.allBanks=new la.collections.banking.FinancialInstitutions;this.model=new la.models.banking.BankFeedApplication({banks:this.allBanks});
this.addSubview(new la.views.banking.BankDetailsView({model:this.model,banks:this.allBanks}),"#bank-details-container");this.addSubview(new la.views.banking.CreditCardDetailsView({model:this.model,banks:this.allBanks}),"#credit-card-details-container");this.listenTo(this.allBanks,"sync",this._filterBanksByType);this.listenTo(this.model,"change:type",this._filterBanksByTypeAndToggleForm);this.listenTo(this.model,"change:financialInstitutionId",this._handleBankIdChange);this.listenTo(this.model,"change:applicationMethod",
this._handleApplicationMethodChange);this.allBanks.fetch()},_submitApplication:function(a){this.saveAndCallback({button:$(a.target),message:"Application submitted",success:function(a){this.bankFeeds.fetch();"PAPER"===this.model.get("applicationMethod")?this._doPaperApplicationMethod(a):"ONLINE"===this.model.get("applicationMethod")?this._doOnlineApplicationMethod(a):this._doTrustedApplicationMethod()}.bind(this)})},_doPaperApplicationMethod:function(){this.resetModelAndComplete(this.model.clone())},
_doOnlineApplicationMethod:function(){var a=this.model.clone(),b=this.banks.get(this.model.get("financialInstitutionId"));a.set("onlineBankingUrl",b.get("onlineApplicationLink"));FeatureTagUtils.isFeatureAvailable(FeatureTag.BANK_FEED_APPLICATION_WITHOUT_HACKS)||a.set("myobIdInUrlRequired","AMEX"===b.get("code")?!0:!1);this.resetModelAndComplete(a)},_doTrustedApplicationMethod:function(){this.resetModelAndComplete(this.model.clone())},_cancel:function(){this.resetModelAndComplete()},resetModelAndComplete:function(a){this.reset();
this.complete(a)},reset:function(){this.model.resetToDefault();this._filterBanksByType()},_filterBanksByType:function(){this.banks.reset();this.banks.add(this.allBanks.financialInstitutionsByType(this.model.get("type")));this.render()},_toggleApplicationMethodUI:function(a){var b=!0===a.get("onlineApplicationSupported"),c=!0===a.get("paperApplicationSupported"),d=b&&c;this.$("#applicationMethodOnline").closest(".row").toggleClass("hidden",!b);this.$("#applicationMethodPaper").closest(".row").toggleClass("hidden",
!c);d?this.$(".application-method-paper").find(".control-label").css("visibility","hidden"):c&&this.$(".application-method-paper").find(".control-label").css("visibility","visible");this.model.set("applicationMethod",this._getApplicationMethod(a))},_handleBankIdChange:function(){this.model.clearAccountDetails();var a=this.model.get("financialInstitutionId");a?(a=this.banks.get(a),this._toggleApplicationMethodUI(a),this._handleApplicationMethodChange()):this.reset()},_handleApplicationMethodChange:function(){var a=
this.model.get("financialInstitutionId"),b="Trading Account"===this.model.get("type"),a="undefined"!==typeof a,c=this.model.isOnlineApplication();this.model.set("onlineApplication",c);this.$("#bank-details-container").toggleClass("hidden",!a||!b||c);this.$("#credit-card-details-container").toggleClass("hidden",!a||b||c)},_getApplicationMethod:function(a){return!0===a.get("trustedApplicationSupported")?"TRUSTED":a.get("onlineApplicationSupported")?"ONLINE":"PAPER"},_filterBanksByTypeAndToggleForm:function(){this._filterBanksByType();
this.model.unset("financialInstitutionId",{validate:!0})},_clickLetUsKnow:function(){la.feedback.triggerFeedback("bank-feed-requests")}})});ns("la.views.banking",function(b){b.CreditCardDetailsView=b.BankFeedSignupDetailsView.extend({id:"credit-card-details",modelName:"creditCardAccount",templateName:"banking/credit_card_details",className:"panel-body",toggleFields:["nameOnCard","lastFourDigits"],initialize:function(a){this._super(a);this.model=a.model}})});
ns("la.views.banking",function(b){b.DepositMoneyView=la.views.BaseIFrameView.extend({templateName:"commons/iframe_container",initialize:function(a){this._super(a);this._setId("bankingDepositMoneyFrame");this._setUrl(UrlUtils.url(this.buildUrlPath(a)))},buildUrlPath:function(a){var b="/VerificationProxy?request=/JSP/Banking/DepositMoney/DepositMoney.jsp",b=a.bCallDatabase?b+("&bCallDatabase="+a.bCallDatabase):b+"&bCallDatabase=menu";a.prevScreenURL&&"13c02741843e75545947de8e2d949cd3"!==a.prevScreenURL?
b+="&prevScreenURL="+a.prevScreenURL:(b+="&prevScreenURL=/LA.CO.NZ%2FVerificationProxy%3Frequest%3D%2FJSP%2FBanking%2FAccountRegister%2FAccountRegister.jsp",b+="%26screen%3DAccount%26accountSysId%3D%26dateSearchId%3D-1%26selectedCondition%3DFirst");a.journalSysId&&"-99"!==a.journalSysId&&(b+="&journalSysId="+a.journalSysId);b=a.accountSysId&&"-99"!==a.accountSysId?b+("&accountSysId="+a.accountSysId):b+"&accountSysId=";a.defaultDate&&(b+="&default-date="+a.defaultDate);a.flgContinue&&(b+="&flgContinue="+
a.flgContinue);a.isInclusive&&(b+="&isInclusive="+a.isInclusive);return b}})});
ns("la.views.banking",function(b){b.ImportHistoryView=la.views.BaseIFrameView.extend({templateName:"commons/iframe_container",initialize:function(a){this._super(a);this._setId("importHistoryFrame");var b="/VerificationProxy?request=/JSP/Banking/BankStatements.jsp";_.isUndefined(a.id)||_.isNull(a.id)||(b=b+"&id="+a.id);_.isUndefined(a.accId)||_.isNull(a.accId)||(b=b+"&accId="+a.accId);_.isUndefined(a.accName)||_.isNull(a.accName)||(b=b+"&accName="+a.accName);this._setUrl(UrlUtils.url(b))}})});
ns("la.views.banking",function(b){b.ManageBankFeedsView=la.views.BaseIFrameView.extend({templateName:"commons/iframe_container",initialize:function(a){this._super(a);this._setId("manageBankFeedsFrame");this._setUrl(UrlUtils.url("/VerificationProxy?request=/JSP/Registration/BankFeedSubscription.jsp"))},render:function(){if(FeatureTagUtils.isFeatureAvailable(FeatureTag.NEW_BANK_FEED_LIST))la.breadcrumb.removeLastEntry(),UrlUtils.navigateToRoute(this.businessId,"/settings/bankFeeds");else return this._super(),
this}})});ns("la.views.banking",function(b){b.OnlineApplicationReferenceView=la.views.BaseView.extend({id:"online-application-reference",templateName:"banking/online_application_reference",className:"panel-body",initialize:function(a){this._super(a);this.model=a.model}})});
ns("la.views.banking",function(b){b.PayrollTransactionView=la.views.BaseIFrameView.extend({templateName:"commons/iframe_container",initialize:function(a){this._super(a);this._setId("payrollTransactionFrame");this._setUrl(UrlUtils.webUrl(la.BusinessSettings.getBusinessId(),"/accounts/"+a.accountId+"/transactions/payroll/"+a.transactionId))}})});
ns("la.views.banking",function(b){b.ReconcileTransactionsView=la.views.BaseIFrameView.extend({templateName:"banking/transactions/bank_transactions_old",events:{"click .switch-banking":"_switchBanking","click #OldBanking_PlayVideo":"_trackVideoPlay"},initialize:function(a){this._super(a);this._setId("reconcilTransactionsFrame");this._setUrl(UrlUtils.url(this.buildUrlPath(a)))},render:function(){this._super();UnlinkedBankFeedsNotificationUtil.check(this.businessId);return this},buildUrlPath:function(a){var b=
"/VerificationProxy?request=/JSP/Banking/Reconcile/ReconcileTransactions.jsp";a.states&&(b+="&stateArray="+a.states);a.startDate&&(b+="&startDateForFilter="+a.startDate);a.endDate&&(b+="&endDateForFilter="+a.endDate);a.accountId&&(b+="&accountForFilter="+a.accountId);a.accountName&&(b+="&strAccountName="+a.accountName);a.prevAccountId&&(b+="&prevAccId="+a.prevAccountId);a.transId&&(b+="&transIdToFilter="+a.transId);a.lastTxnDate&&(b+="&lastTransDate="+a.lastTxnDate);a.strAccId&&(b+="&strAccId="+a.strAccId);
a.displayFilter&&(b+="&displayFilterValue="+a.displayFilter);return b},_switchBanking:function(){UrlUtils.redirect(UrlUtils.appUrl(la.BusinessSettings.getBusinessId(),"/banking/transactions"));analytics.track("banking_click",{page:"banking-reconcile-transactions",target_id:"old-return-link"})},_trackVideoPlay:function(){analytics.track("banking_click",{page:"banking-reconcile-transactions",target_id:"old-banking-play-video"})}})});
ns("la.views.banking",function(b){b.ReconciliationView=la.views.BaseIFrameView.extend({templateName:"commons/iframe_container",initialize:function(a){this._super(a);this._setId("reconciliationsFrame");this._setUrl(UrlUtils.webUrl(this.businessId,"/reconciliations"))}})});
ns("la.views.banking",function(b){b.SpendMoneyView=la.views.BaseIFrameView.extend({templateName:"commons/iframe_container",initialize:function(a){this._super(a);this._setId("bankingSpendMoneyFrame");this._setUrl(UrlUtils.url(this.buildUrlPath(a)))},buildUrlPath:function(a){var b="/VerificationProxy?request=/JSP/Banking/SpendMoney.jsp",b=a.bCallDatabase?b+("&bCallDatabase="+a.bCallDatabase):b+"&bCallDatabase=menu";a.prevScreenURL&&"13c02741843e75545947de8e2d949cd3"!==a.prevScreenURL?b+="&prevScreenURL="+
a.prevScreenURL:(b+="&prevScreenURL=/LA.CO.NZ%2FVerificationProxy%3Frequest%3D%2FJSP%2FBanking%2FAccountRegister%2FAccountRegister.jsp",b+="%26screen%3DAccount%26accountSysId%3D%26dateSearchId%3D-1%26selectedCondition%3DFirst");a.journalSysId&&"-99"!==a.journalSysId&&(b+="&journalSysId="+a.journalSysId);b=a.accountSysId&&"-99"!==a.accountSysId?b+("&accountSysId="+a.accountSysId):b+"&accountSysId=";a.defaultDate&&(b+="&default-date="+a.defaultDate);return b}})});
ns("la.views.banking",function(b){b.TransactionHistoryTableHeaderView=la.views.commons.TableHeaderView.extend({templateName:"banking/transaction_history_header"});b.TransactionHistoryRowView=la.views.commons.TableRowFormView.extend({templateName:"banking/transaction_history_row"});b.TransactionHistoryTableView=la.views.commons.SortableTableView.extend({headerView:"la.views.banking.TransactionHistoryTableHeaderView",rowView:"la.views.banking.TransactionHistoryRowView",noRecordMessage:"There are no transactions."});
b.TransactionHistoryView=la.views.BaseView.extend({mixins:[la.views.mixins.TableContainerView,la.views.mixins.Searchable],id:"transactionHistory",tableViewName:"la.views.banking.TransactionHistoryTableView",templateName:"banking/transaction_history",events:{"click #updateButton":"filter"},initialize:function(a){this.model=new la.models.banking.TransactionHistoryFilter(a);this.collection=new la.collections.banking.TransactionHistoryPager([],{url:this._getFilterUrl()});this._super(_(a).extend({model:this.model}));
this.accounts=a.accounts.bankingAccountsWithInactiveIndicated();this.accounts.unshift(new la.models.commons.Account({id:0,name:"All bank accounts",type:"Banking"}));Backbone.Validation.bind(this)},filter:function(){this.model.saveFilterPreferences();this.showSpinner(!0);this.collection.paginator_core.url=this._getFilterUrl();this.collection.fetch({success:function(){this.showSpinner(!1)}.bind(this),silent:!1});this.search()},_getFilterUrl:function(){var a=UrlUtils.apiUrl(la.BusinessSettings.getBusinessId(),
"/transactions/history?fromDate="+this.model.get("from")+"&toDate="+this.model.get("to"));0<this.model.get("accountId")&&(a+="&accountId="+this.model.get("accountId"));return a}})});ns("la.views.banking.transactions",function(b){b.AllocateTransactionListView=la.views.BaseView.extend({mixins:[la.views.mixins.Listable],rowView:"la.views.banking.transactions.AllocateTransactionRowView",initialize:function(a){this._super(a);this.options=a;this.collection=a.model.get("lines")}})});
ns("la.views.banking.transactions",function(b){b.AllocateTransactionPanelView=la.views.BaseView.extend({mixins:[la.views.mixins.Validatable,la.views.mixins.LinesAddEmpty,la.views.mixins.CollectionValidatable,la.views.mixins.BankingPanelUnsavedChangeMessage],templateName:"banking/transactions/allocate_transaction_panel",events:{"click #saveButton":"_save","click button.popup-for-rules":"_popupRuleModal"},initialize:function(a){this._super(a);this.bankTransaction=a.model;this.accounts=a.accounts;this.contacts=
a.contacts;this._createModel();a=_({}).extend(a,{model:this.model,gstTypes:this.gstTypes,bankTransaction:this.bankTransaction});this.addSubview(new la.views.banking.transactions.AllocateTransactionListView(a),".alloc-list");this.addSubview(new la.views.banking.transactions.RemainingBalanceView({model:this.model,bankTransaction:this.bankTransaction}),".remaining-balance");this.addSubview(new la.views.banking.transactions.RemainingPercentageView({model:this.model,bankTransaction:this.bankTransaction}),
".remaining-percentage");this.addSubview(new la.views.banking.transactions.ReportableView({model:this.model,contacts:this.contacts,bankTransaction:this.bankTransaction}),".reportable")},_popupRuleModal:function(){var a=this;$(".banking-rules-modal").modal({backdrop:!0,keyboard:!1,show:!0}).on("shown.bs.modal",function(){a._goToCreatePage()}).on("hidden.bs.modal",function(){a._goToBankTransactionsPage()})},_goToCreatePage:function(){window.bankTransaction=this.bankTransaction;window.location.hash=
"businesses/"+la.BusinessSettings.getBusinessId()+"/banking/transactions/create/"+encodeURIComponent(this.bankTransaction.get("description"))},_goToBankTransactionsPage:function(){window.location.hash="businesses/"+la.BusinessSettings.getBusinessId()+"/banking/transactions"},_createModel:function(){this.gstTypes=b.lookupGstTypes(this.bankTransaction);this.model=new la.models.banking.Allocation({bankTransactionId:this.bankTransaction.get("id")});this.bankTransaction.get("allocated")?this.model.fetch({async:!1,
success:function(){this.collection=this.model.get("lines");this.addRow();this._addCollectionListeners()}.bind(this),statusCode:{404:this._initialisedAllocationLines.bind(this)}}):this._initialisedAllocationLines()},_initialisedAllocationLines:function(){this.model.set("lines",new Backbone.Collection([new la.models.banking.AllocationLine({amount:this.bankTransaction.getAmount()}),new la.models.banking.AllocationLine({})]));this.collection=this.model.get("lines");this.bankTransaction.get("linked")&&
this.model.set("id",-1)},buildEmptyLine:function(){var a=new la.models.banking.AllocationLine({});this.collection.add(a);a=new la.views.banking.transactions.AllocateTransactionRowView({model:a,accounts:this.accounts,gstTypes:this.gstTypes,bankTransaction:this.bankTransaction,collection:this.collection});a.render();return a.el},_save:function(){this.saveAndCallback({message:"Transaction allocated",success:function(){this.bankTransaction.fetch({silent:!0});Backbone.trigger("banking:closeAnyTabs")}.bind(this)})}})});
ns("la.views.banking.transactions",function(b){b.AllocateTransactionRowView=la.views.BaseView.extend({id:"allocate-transaction-row-view",templateName:"banking/transactions/allocate_transaction_row",className:"row",mixins:[la.views.mixins.Validatable,la.views.mixins.GstWithAccount,la.views.mixins.DeletableLine,la.views.mixins.AmountPercentage],events:{'input input[name="amount"]':"_updatePercentage",'input input[name="percentage"]':"_updateAmount"},initialize:function(a){this.model=a.model;this.accounts=
a.accounts;this.gstTypes=a.gstTypes;this.bankTransaction=a.bankTransaction;this.collection=a.collection;this.options={isDeposit:a.bankTransaction.isDeposit(),registerGST:!0===la.BusinessSettings.isRegisteredForGst()};this.listenTo(this.model,"change",function(){this.model.validate()});this.listenTo(this.model,"change:accountId",this.delayFocusOnDescription.bind(this));this.listenTo(this.model,"change:description",function(){this.model.trigger("change")})},render:function(){this._updatePercentageSilently();
this._super();return this},delayFocusOnDescription:function(){_.delay(function(){this._focusOnDescription()}.bind(this),0)},_focusOnDescription:function(){this.$("#description").focus();this.$("#description").select()}})});ns("la.views.banking.transactions",function(b){b.AllocationRuleListView=la.views.BaseView.extend({mixins:[la.views.mixins.Listable],rowView:"la.views.banking.transactions.AllocationRuleRowView",initialize:function(a){this._super(a);this.options=a;this.collection=a.model.get("lines")}})});
ns("la.views.banking.transactions",function(b){b.AllocationRulePanelView=la.views.BaseView.extend({mixins:[la.views.mixins.Validatable,la.views.mixins.CollectionValidatable,la.views.mixins.BankingPanelUnsavedChangeMessage],id:"allocationRulePanelView",templateName:"banking/transactions/allocation_rule_panel",events:{"click #save-rule-button":"_save"},initialize:function(a){this._super(a);this.options=a;this.bankTransaction=a.model;this.amountTypes=new Backbone.Collection([{id:"equalTo",name:"equal to "+
$.money.format(this.bankTransaction.getAmount(),2)},{id:"anyAmount",name:"any amount"}]);this.amountPercents=new Backbone.Collection([{id:"dollar",name:"dollar amount"},{id:"percentage",name:"percentage"}]);this._createModel(a);var b=_({}).extend(a,{model:this.model,gstTypes:this.gstTypes,bankTransaction:this.bankTransaction,allocationRule:this.model});this.addSubview(new la.views.banking.transactions.AllocationRuleListView(b),".alloc-list");this.addSubview(new la.views.banking.transactions.RemainingBalanceView({model:this.model,
bankTransaction:this.bankTransaction}),".remaining-balance");this.addSubview(new la.views.banking.transactions.RemainingPercentageView({model:this.model}),".remaining-percentage");this.addSubview(new la.views.banking.transactions.ReportableView({model:this.model,contacts:a.contacts,bankTransaction:this.bankTransaction,templateName:"banking/transactions/reportable_rule"}),".reportable");this.listenTo(this.model,"change:amountType",this._processAmountTypeChange.bind(this));this.listenTo(this.model,
"change:amountPercent",this._processAmountPercentChange.bind(this));this.listenTo(this.model.get("lines"),"remove",this._handleLineRemoval);this.listenTo(this.model.get("lines"),"change",this._maybeAddNewRow)},_createModel:function(a){this.gstTypes=b.lookupGstTypes(this.bankTransaction);this.accounts=a.accounts;this.model=new la.models.banking.AllocationRule({description:this.bankTransaction.get("description"),amountType:"anyAmount",amountPercent:"percentage"});this.model.set("lines",new Backbone.Collection([new la.models.banking.AllocationRuleLine({amount:this.bankTransaction.getAmount(),
percentage:100})]));this.model.isAnyAmountDollarAmount()&&this.model.get("lines").models[0].set("amount",0);this.collection=this.model.get("lines")},_maybeAddNewRow:function(){var a=this;this.model.get("lines").every(function(b){var c=la.BusinessSettings.isRegisteredForGst()&&!_.isBlank(b.get("taxCode"))||!la.BusinessSettings.isRegisteredForGst()&&_.isBlank(b.get("taxCode")),c=(0<b.get("percentage")||0<b.get("amount"))&&!_.isBlank(b.get("accountId"))&&c;return a.model.isAnyAmountDollarAmount()?c&&
!_.isBlank(b.get("amountLabel")):c})&&this._addRow()},_addRow:function(){this.$(".list").append(this.buildEmptyLine());this._updateRemainingAmountLabel();this._toggleAmountPercentInputs();this.model.validate()},buildEmptyLine:function(){var a=new la.models.banking.AllocationRuleLine({});this.collection.add(a);a=new la.views.banking.transactions.AllocationRuleRowView({model:a,allocationRule:this.model,accounts:this.accounts,gstTypes:this.gstTypes,bankTransaction:this.bankTransaction,collection:this.collection});
a.render();return a.el},_updateAmount:function(){this.model.set("amount","equalTo"===this.model.get("amountType")?this.bankTransaction.getAmount():void 0)},_handleLineRemoval:function(){this._updateRemainingAmountLabel();this._toggleAmountPercentInputs();this.model.validate()},_processAmountPercentChange:function(){this._resetValues();this._toggleDollarAmountPlaceHolders();this._toggleRemainingBalanceView();this._toggleAmountPercentInputs();this.collection.trigger("check-empty")},_resetValues:function(){this.model.isAnyAmountDollarAmount()?
this.model.set("lines",new la.models.banking.AllocationRuleLine({amount:0,percentage:100})):this.model.set("lines",new la.models.banking.AllocationRuleLine({amount:this.bankTransaction.getAmount(),percentage:100}));this._updateRemainingAmountLabel()},_processAmountTypeChange:function(){this._resetValues();this._toggleDollarAmountPlaceHolders();this._updateAmount();this._toggleAmountPercentInputs();this._toggleRemainingBalanceView()},_toggleAmountPercentInputs:function(){var a="dollar"===this.model.get("amountPercent");
this.$(".amount-percent-label").text(a?"Amount":"Percentage");this.$(".percent-input").toggleClass("hidden","dollar"===this.model.get("amountPercent"));this.$(".amount-input").toggleClass("hidden",!("anyAmount"!==this.model.get("amountType")&&"dollar"===this.model.get("amountPercent"))||"percentage"===this.model.get("amountPercent"));this.$(".amount-label-input").toggleClass("hidden","anyAmount"!==this.model.get("amountType")&&"dollar"===this.model.get("amountPercent")||"percentage"===this.model.get("amountPercent"))},
_toggleRemainingBalanceView:function(){this.$(".remaining-balance").toggleClass("hidden","percentage"===this.model.get("amountPercent")||"dollar"===this.model.get("amountPercent")&&"anyAmount"===this.model.get("amountType"));this.$(".remaining-percentage").toggleClass("hidden","dollar"===this.model.get("amountPercent"));this.$(".filler").toggleClass("hidden",!("dollar"===this.model.get("amountPercent")&&"anyAmount"===this.model.get("amountType")))},_toggleDollarAmountPlaceHolders:function(){this.model.isAnyAmountDollarAmount()&&
($($(this.el).find("input[id=amountLabel]:first")).attr("placeholder","Full amount"),this.model.get("lines").models[0].unset("amountLabel"),this.model.get("lines").models[0].set("amount",0),this._updateRemainingAmountLabel())},_updateRemainingAmountLabel:function(){this.model.isAnyAmountDollarAmount()&&(1<this.model.get("lines").size()?(0===this.model.get("lines").last().get("amount")||this.model.get("lines").last().isEmpty()||this._toggleAmountPercentInputs(),$($(this.el).find("input[id=amountLabel]:last")).attr("placeholder",
"Remaining amount")):$($(this.el).find("input[id=amountLabel]")).attr("placeholder","Full amount"),this.model.get("lines").last().set({amount:0,percentage:100,amountLabel:"",tax:0},{silent:!0}))},_save:function(){this.saveAndCallback({message:"Allocate rule created",success:function(){Backbone.trigger("banking:closeAnyTabs");Backbone.trigger("banking:refreshSilently")}.bind(this)})}})});
ns("la.views.banking.transactions",function(b){b.AllocationRuleRowView=la.views.BaseView.extend({id:"allocation-rule-row-view",templateName:"banking/transactions/allocation_rule_row",className:"row",mixins:[la.views.mixins.Validatable,la.views.mixins.GstWithAccount,la.views.mixins.DeletableLine,la.views.mixins.AmountPercentage],events:{'change input[name="amount"]':"_updatePercentage",'change input[name="percentage"]':"_updateAmount",'click input[name="amountLabel"]':"_updateAmount"},initialize:function(a){this.options=
{registerGST:!0===la.BusinessSettings.isRegisteredForGst()};this.model=a.model;this.allocationRule=a.allocationRule;this.accounts=a.accounts;this.gstTypes=a.gstTypes;this.bankTransaction=a.bankTransaction;this.collection=a.collection;this.listenTo(this.model,"change",function(){this._copyLabelAmountToAmount();this.model.validate();this.collection.trigger("change")})},render:function(){this._super();this._toggleAmountOrPercentage();return this},_copyLabelAmountToAmount:function(){this.allocationRule.isAnyAmountDollarAmount()&&
(_.isBlank(this.model.get("amountLabel"))?(this.model.set({amount:0,percentage:100},{silent:!0}),this.model!==this.collection.last()&&this.model.set({amountLabel:0},{silent:!0})):this.model.set({amount:Number(this.model.get("amountLabel")),percentage:0},{silent:!0}))},_toggleAmountOrPercentage:function(){this.$(".percent-input").toggleClass("hidden","dollar"===this.allocationRule.get("amountPercent"));this.$(".amount-input").toggleClass("hidden",!this.allocationRule.isAnyAmountDollarAmount()||"percentage"===
this.allocationRule.get("amountPercent"));this.$(".amount-label-input").toggleClass("hidden","anyAmount"!==this.allocationRule.get("amountType")&&"dollar"===this.allocationRule.get("amountPercent")||"percentage"===this.allocationRule.get("amountPercent"))}})});
ns("la.views.banking.transactions",function(b){b.BankTransactionsBulkActionsView=la.views.BaseView.extend({templateName:"banking/transactions/bank_transactions_bulk_actions",events:{"click #unallocate-button":"_unAllocateTransactions","click #allocate-button":"_showBulkAllocateView","click .bulk-allocate-overlay":"_hideBulkAllocateView","blur #generate-report-button":"_resetReportLink","click #generate-report-link":"_generateReportLink"},initialize:function(a){this._super(a);this.accounts=a.accounts;
this.gstTypes=la.collections.commons.GstTypes.getAll();this.bulkAllocateModel=new la.models.banking.BankTransactionBulkAction({bankTransactionIds:[]});this.bulkAllocateView=new b.BankTransactionsBulkAllocateView({model:this.bulkAllocateModel,accounts:this.accounts,selectedBankTransactions:this.model.get("selectedBankTransactions")});this.filterModel=a.filterModel;this.addSubview(this.bulkAllocateView,"#bulk-allocate-container");this.listenTo(this.model,"change",this._modelChanged);this.listenTo(this.bulkAllocateView,
"hideBulkAllocateView",this._hideBulkAllocateView);this.listenTo(Backbone,"banking:unselectBankTransactions",this._unselectBankTransactions)},_unAllocateTransactions:function(){this.unAllocateModel=this._getUnAllocateModel(this._getSelectedBankTransactions());0<this.unAllocateModel.get("bankTransactionIds").length&&($.ajax({url:this.unAllocateModel.unAllocateUrl(),type:"POST",data:JSON.stringify(this.unAllocateModel),contentType:"application/json",success:this._unAllocateSuccessHandler.bind(this)}),
this._trackEvent({target_id:"bulk-unallocate",transactions_count:this.unAllocateModel.get("bankTransactionIds").length}))},_unAllocateSuccessHandler:function(){var a=this.unAllocateModel.get("bankTransactionIds");this._bulkActionSuccessHandler(a)},_bulkActionSuccessHandler:function(a){this._setBankTransactionsAsPending(a);this._unselectNonSubmittedBankTransactionIds(a)},_modelChanged:function(){var a=this._getSelectedBankTransactions()?this._getSelectedBankTransactions().length:0,b='<span class="text-gray-base">('+
a+")</span> transactions selected";1===a&&(b='<span class="text-gray-base">(1)</span> transaction selected');this.$("#bulk-actions div.transactions-selected-message").html(b);this._toggle(0<a)},_toggle:function(a){this.$("#bulk-actions").toggleClass("hidden",!a)},hide:function(){this._toggle(!1)},_linkedFilter:function(a){return!!a.get("linked")},_getUnAllocateModel:function(a){a=this._mapBankTransactionIds(a.filter(this._linkedFilter));return new la.models.banking.BankTransactionBulkAction({bankTransactionIds:a})},
_showBulkAllocateView:function(){this._updatePopOverPosition();this.bulkAllocateModel.set("bankTransactionIds",this._getSelectedBankTransactionIds());this.bulkAllocateView.selectedBankTransactions=this._getSelectedBankTransactions();this.$el.find("#bulk-allocate-wrapper").toggleClass("hidden")},_mapBankTransactionIds:function(a){return a.map(function(a){return a.get("id")})},_hideBulkAllocateView:function(){this.bulkAllocateModel.unset("accountId");this.bulkAllocateModel.unset("taxCode");this.$el.find("#bulk-allocate-wrapper").toggleClass("hidden")},
_updatePopOverPosition:function(){var a=this.$el.find("#allocate-button"),b=this.$el.find("#bulk-allocate-container"),a=a.offset();b.css({top:a.top+34+10,left:a.left+34-150,position:"absolute"})},_resetReportLink:function(){this.$("#generate-report-link").attr("href","#")},_generateReportLink:function(){var a=this.$("#generate-report-link");a.attr("href",this._getReportUrlWithParams());a.attr("onload",this._unselectAllSelectedBankTransactions());this._trackEvent({target_id:"coding-query-report"});
return!0},_getReportUrlWithParams:function(){var a=this._getCodingReportModel(this._getSelectedBankTransactionIds());return a.reportUrl()+"?bankTransactionIds="+a.get("bankTransactionIdsString")+"&from="+a.get("from")+"&to="+a.get("to")+"&requestDate="+a.get("requestDate")},_getCodingReportModel:function(a){return new la.models.banking.BankTransactionBulkAction({from:this.filterModel.get("from"),to:this.filterModel.get("to"),requestDate:this._getCurrentDate(),bankTransactionIdsString:this._getBankTransactionsIdsString(a)})},
_getBankTransactionsIdsString:function(a){return _.reduce(a,function(b,c,d){return b+c+(d<a.length-1?",":"")},"")},_getCurrentDate:function(){return moment().format("YYYY-MM-DDTHH:mm:ss")},_trackEvent:function(a){analytics.track("banking_click",_.extend({page:"banking-transactions"},a))},_unselectAllSelectedBankTransactions:function(){_.map(this.model.get("selectedBankTransactions"),this._unselectBankTransactionModel.bind(this))},_unselectBankTransactions:function(a){_.map(a.bankTransactionIds,this._unselectBankTransactionById.bind(this))},
_unselectBankTransactionById:function(a){a=this._findBankTransaction(a);this._unselectBankTransactionModel(a)},_unselectBankTransactionModel:function(a){a&&(a.set({selected:!1}),Backbone.trigger("banking:updateBulkActionsViewModel"))},_findBankTransaction:function(a){return _.find(this._getSelectedBankTransactions(),function(b){return b.id===a})},_getSelectedBankTransactions:function(){return this.model.get("selectedBankTransactions")},_getSelectedBankTransactionIds:function(){return this._mapBankTransactionIds(this._getSelectedBankTransactions())},
_setBankTransactionsAsPending:function(a){_.each(a,function(a){this._findBankTransaction(a).set("pendingAction",!0)}.bind(this))},_unselectNonSubmittedBankTransactionIds:function(a){a=_.difference(this._getSelectedBankTransactionIds(),a);this._unselectBankTransactions({bankTransactionIds:a})}})});
ns("la.views.banking.transactions",function(b){b.BankTransactionsBulkAllocateView=la.views.BaseView.extend({templateName:"banking/transactions/bank_transactions_bulk_allocate",mixins:[la.views.mixins.Validatable],events:{"click #bulk-allocate-submit":"_bulkAllocate","click #bulk-allocate-cancel":"_hideView"},initialize:function(a){this._super(a);this.accounts=a.accounts;this.gstTypes=la.collections.commons.GstTypes.getAll();this.registeredForGST=la.BusinessSettings.isRegisteredForGst();this.selectedBankTransactions=
a.selectedBankTransactions;this.listenTo(this.model,"change:allocateToAccountId",this._allocateToAccountIdChanged)},_allocateToAccountIdChanged:function(a,b){var c=this.accounts.get(b?b:"");!_.isBlank(c)&&la.BusinessSettings.isRegisteredForGst()&&(c=la.collections.commons.GstTypes.getByCode(c.get("gstCode")).get("gstCode"),this.model.set("taxCode",c))},_bulkAllocate:function(){var a=this.model;a.isValid()&&($.ajax({url:a.allocateUrl(),type:"POST",data:JSON.stringify(a),contentType:"application/json",
success:this._bulkAllocateSuccessHandler.bind(this)}),analytics.track("banking_click",{page:"banking-transactions",target_id:"bulk-allocate",transactions_count:a.get("bankTransactionIds").length}))},_bulkAllocateSuccessHandler:function(){this.selectedBankTransactions.forEach(function(a){a.set("pendingAction",!0)});this._hideView()},_hideView:function(){this.trigger("hideBulkAllocateView")}})});
ns("la.views.banking.transactions",function(b){b.bankTransactionsRowViewEvents={"click .unlink-button":"_unlink","click button.actions-button,button.actions-button>*":"_showTabPanelOnMostRelevantTab","click td.showDropDown,td.showDropDown>*":"_showDropdownAllocateOrMatchOnClick","click td.allocate,td.allocate>*":"_showTabPanelOnMostRelevantTabForAllocateOrMatchOnClick","keypress input.typeaheadInput":"_handleKeyPressInAllocationField","focus div.message":"_messageFocus","focus input.typeaheadInput":"_selectInputContents",
'blur input[name="allocatedAccountId"]':"_blurringFromAllocation",'change td input[name="selected"]':"_onSelectRowClick","click *":"_focusOnAllocateOrMatch","click .transaction-notes":"_showNotesTab","click .delete-note-icon":"_deleteNote"}});
ns("la.views.banking.transactions",function(b){b.bankTransactionsRowViewListeners=function(){this.render=_.wrap(this.render.bind(this),function(a){a();this._onAfterRender();return this}.bind(this));this.listenTo(this.model,"change:allocatedAccountId",this.allocate);this.listenTo(this.model,"change:pendingAction",this._onPendingAction);this.listenTo(this.model,"computed",this._render.bind(this));this.listenTo(Backbone,"banking:closeAnyTabs",function(){this.tabsView&&(this.tabsView.hide(),this.$el.removeClass("active"))}.bind(this));
this.listenTo(Backbone,"banking:renderNote",function(){this.render()})}});
ns("la.views.banking.transactions",function(b){b.BankTransactionsRowView=la.views.commons.TableRowFormView.extend({templateName:"banking/transactions/bank_transactions_row",className:"clickable",events:b.bankTransactionsRowViewEvents,initialize:function(a){this._super(a);this.contacts=a.contacts;this.accounts=_.isBlank(this.model.get("withdrawal"))?a.incomeFirstAccounts:a.spendingFirstAccounts;this.model.set({filterAccount:a.filterModel.get("accountId"),selected:!1},{silent:!0});this._addListeners();
this._clickRowIfSourceIdMatched()},_addListeners:b.bankTransactionsRowViewListeners,_onSelectRowClick:function(){var a=this.$("input#selected").prop("checked");this.model.set({selected:a},{renderOnly:"selected"});Backbone.trigger("banking:updateBulkActionsViewModel")},_clickRowIfSourceIdMatched:function(){var a=UrlUtils.getQueryParamValue("sourceId");this.model.get("id").toString()===a&&_.delay(function(){this.$("td.allocate").click()}.bind(this),500)},_showNotesTab:function(a){this._selectTab(a,
"note-tab");analytics.track("banking_click",{page:"banking-transactions",target_id:"add-notes-link"})},_showTabPanelOnMostRelevantTab:function(a){this._showAllocationWidget(!1);var b="showDropDown"===this.model.get("allocateOrMatchOnClickClass")?"allocate-transaction-tab":this.model.get("allocateOrMatchOnClickClass");this._selectTab(a,b)},_showDropdownAllocateOrMatchOnClick:function(){this._showAllocationWidgetWhenUnallocated()},_showTabPanelOnMostRelevantTabForAllocateOrMatchOnClick:function(a){if("showDropDown"===
this.model.get("allocateOrMatchOnClickClass"))return!1;this._showTabPanelOnMostRelevantTab(a);return!1},_handleKeyPressInAllocationField:function(a){switch(a.charCode||a.keyCode||a.key.charAt(0)){case 13:this._moveFocusToNextRow(this.$el);break;case 45:_.delay(this._delayedHandleHyphenPressInAllocationField.bind(this),10);break;case 43:a.preventDefault(),a.stopPropagation(),a.stopImmediatePropagation(),Backbone.trigger("banking:repeatAboveAllocation",this.model)}},_delayedHandleHyphenPressInAllocationField:function(){if(this._isAllocateInputFieldHidden()||
"-"===this.$("td.allocate input").val())return this._unlink(),Backbone.trigger("banking:closeAnyTabs"),!1},_isAllocateInputFieldHidden:function(){return this.$("td.allocate input").closest(".form-control-wrapper").hasClass("hidden")},_selectInputContents:function(){this.$("td input").select()},_messageFocus:function(){this._showAllocationWidgetWhenUnallocated()},_blurringFromAllocation:function(){_.delay(function(){this._hasLostFocus()&&this._showAllocationWidget(!1)}.bind(this),100)},_hasLostFocus:function(){return!this.$("*:not(input#selected)").is(":focus")},
_isTabsViewOpen:function(){return void 0!==this.tabsView},_focusOnAllocateOrMatch:function(a){var b=$(a.target);a=b.hasClass("dropdown-toggle")&&0!==b.closest('input[name="allocatedAccountId"]');var c=b.hasClass("actions-button")||b.closest("button").hasClass("actions-button"),d=b.hasClass("unallocate-button"),f=b.closest("a").hasClass("transaction-notes"),b="selected"===b.attr("id");if(a||c||d)return!1;if(f||b)return!0;this._showAllocationWidgetWhenUnallocated()},_removeSpinner:function(){this.$(".smallLoadingSpinner").hide()},
_showSpinner:function(){this.$(".smallLoadingSpinner").show();this.$('[data-widget="TypeaheadDropdown"]').addClass("hidden")},_getLinkModel:function(){return new la.models.banking.BankTransactionLink({id:this.model.get("linked")?1:void 0,bankTransactionId:this.model.get("id")})},_getAllocationModel:function(a){var b={accountId:this.model.get("allocatedAccountId")};la.BusinessSettings.isRegisteredForGst()&&$.extend(b,{taxCode:this.model.get("gstCode")});return new la.models.banking.Allocation({id:_(a).isBlank()?
void 0:1,bankTransactionId:this.model.get("id"),lines:new Backbone.Collection(new la.models.banking.AllocationLine(b))})},allocate:function(a){_.isBlank(this.model.get("allocatedAccountId"))?this.model.set("allocatedAccountId",a._previousAttributes.allocatedAccountId,{silent:!0}):(this.model.computeValues(),this._showSpinner(),this._getAllocationModel(a._previousAttributes.allocatedAccountId).save(void 0,{success:this._refreshRow.bind(this),error:this._allocateErrorHandler.bind(this)}),this._moveFocusToNextRow(this.$el),
la.feedback.trackEvent("bank-transaction-allocated"))},_onPendingAction:function(){this.model.get("pendingAction")?this._showSpinner():this._removeSpinner()},_onAfterRender:function(){this._disappearIfNotRelevant()},_unlink:function(){this._showSpinner();la.feedback.trackEvent("bank-transaction-unallocated");this._getLinkModel().destroy({success:this._unlinkSuccessHandler.bind(this),error:this._allocateErrorHandler.bind(this)});return!1},_disappearIfNotRelevant:function(){this._shouldDisappear()&&
(this.$el.addClass("fading"),_.delay(function(){this.$el.fadeOut(800);_.delay(this._removeRow.bind(this),500)}.bind(this),1E3))},_shouldDisappear:function(){var a=this.container.model.get("sortBy");return this.container.model.isFilteringUnlinkedTransactions()&&this.model.isLinked()&&"allocatedAccount"!==a},_removeRow:function(){this.collection.remove(this.model)},_unlinkSuccessHandler:function(){var a=this.model.get("matched")||this.model.get("transfer");this._updateLinesForTransfer();this.model.clearLinkData();
this._refreshRow();a&&Backbone.trigger("banking:refreshMatchCounts")},_updateLinesForTransfer:function(){if(this.model.get("transfer")){var a=_(this.collection.models).filter(function(a){return a.get("linkedReferenceNumber")===this.model.get("linkedReferenceNumber")&&a.get("id")!==this.model.get("id")}.bind(this));a&&a[0]&&Backbone.trigger("banking:refreshBankTransactions",{bankTransactionIds:[a[0].get("id"),this.model.get("id")]})}},_refreshRow:function(){!1===NotificationServiceUtils.isClientActive()&&
(this.model.fetch({silent:!0}),this.render())},_allocateErrorHandler:function(){this.model.set("allocatedAccountId",this.model._previousAttributes.allocatedAccountId,{silent:!0});this.render()},_toggleTabs:function(a){this.tabsView||(this.tabsView=new la.views.banking.transactions.BankingTabsView({container:$(a.currentTarget).closest("tr"),model:this.model,accounts:this.accounts,contacts:this.contacts,toggleCallback:function(){this.$el.toggleClass("active",!this.tabsView.isVisible());this.tabsView.isVisible()&&
(this.tabsView=void 0)}.bind(this)}));this.tabsView.toggle()},_selectTab:function(a,b){this._toggleTabs(a);this.tabsView&&this.tabsView.selectTabByClass(b)},_showAllocationWidgetWhenUnallocated:function(){"showDropDown"!==this.model.get("allocateOrMatchOnClickClass")||this._isTabsViewOpen()||this._showAllocationWidget(!0)},_showAllocationWidget:function(a){var b=this.$(".allocate");b.find(".message").toggleClass("hidden",a);b.find(".reportable").toggleClass("hidden",a);b.find(".form-control-wrapper").toggleClass("hidden",
!a);a&&b.find('input[name="allocatedAccountId"]').focus()},_moveFocusToNextRow:function(a){a.next().find("div.message").focus()},_deleteNote:function(){var a=new la.models.banking.BankTransactionNote({bankTransactionId:this.model.get("id"),note:null}),b=this;b.saveAndCallback({model:a,success:function(){b.model.set("note",null);b.tabsView&&b._toggleTabs();b.render()}})},_render:function(a){if(a&&a.renderOnly)switch(a.renderOnly){case "selected":this._renderSelectedColumn();break;default:this.render()}else this.render()},
_renderSelectedColumn:function(){var a=this.model.get("selected");this.$("#selected").prop("checked",a);a?this.$("td").addClass("highlighted"):this.$("td").removeClass("highlighted")}})});
ns("la.views.banking.transactions",function(b){b.BankTransactionsTableHeaderView=la.views.commons.TableHeaderView.extend({templateName:"banking/transactions/bank_transactions_header",events:{"change #select-all-input":"_selectAllClick"},initialize:function(a){this._super(a);this.listenTo(this.filterModel,"change:accountId",this.render.bind(this));this.listenTo(this.model,"change:selectAll",this._selectAll.bind(this));this.listenTo(Backbone,"banking:serverSidePagination",this._selectAllAutoCheck.bind(this));
this.listenTo(Backbone,"banking:updateBulkActionsViewModel",this._selectAllAutoCheck.bind(this))},_selectAllAutoCheck:function(){if(0===this.collection.models.length)this._updateSelectAllInputState({checked:!1,disabled:!0});else{var a=this.collection.models.filter(function(a){return!0===a.get("selected")});a.length===this.collection.models.length&&(this.model.set({selectAll:!0},{silent:!0}),this._updateSelectAllInputState({checked:!0}));a.length<this.collection.models.length&&(this.model.set({selectAll:!1},
{silent:!0}),this._updateSelectAllInputState({checked:!1}))}},_updateSelectAllInputState:function(a){this.$("input#select-all-input").prop("checked",a.checked?!0:!1).prop("disabled",a.disabled?"disabled":"")},_selectAllClick:function(){var a=this.$("input#select-all-input").prop("checked");this.model.set({selectAll:a})},_selectAll:function(){var a=this.model.get("selectAll");this._updateSelectAllInputState({checked:a});this.collection.models.forEach(function(b){b.get("selected")!==a&&b.set({selected:a},
{silent:!0,renderOnly:"selected"})});Backbone.trigger("banking:updateBulkActionsViewModel")},render:function(a){this.model.set("filterAccount",this.filterModel.get("accountId"),{silent:!0});this._super(a);return this}})});
ns("la.views.banking.transactions",function(b){b.BankTransactionsTableView=la.views.commons.TableView.extend({className:"table-alt bank-transaction-theader",headerView:"la.views.banking.transactions.BankTransactionsTableHeaderView",rowView:"la.views.banking.transactions.BankTransactionsRowView",noRecordMessage:"There are no transactions.",initialize:function(a){this._super(a);this.model=a.model;this.collection=a.collection},render:function(a){this._super(a);return this}})});
ns("la.views.banking.transactions",function(b){b.bankTransactionsViewEvents={"click .return-link":"_returnToOldBanking","click #import-statement-button":"_importStatement","click #import-history-button":"_importHistory","change #processed":"_saveProcessedSelectionPreference","change #accountId":"_saveAccountIdSelectionPreference","click .bank-transaction-theader th[data-sort-field]":"updateSortColumn","click .allocateOrMatchSortWarning a":"removeSortWarningCheck",'mouseenter [rel="tooltip"]':function(a){$(a.target).tooltip("show")}};
b.bankTransactionsViewBindKeyEvents=function(){Mousetrap.bind("alt+m",function(a){return this._clickTabOnKeyEvents(a,"a.match-transaction-tab")}.bind(this));Mousetrap.bind("alt+a",function(a){return this._clickTabOnKeyEvents(a,"a.allocate-transaction-tab")}.bind(this));Mousetrap.bind("alt+t",function(a){return this._clickTabOnKeyEvents(a,"a.transfer-transaction-tab")}.bind(this));Mousetrap.bind("alt+n",function(a){return this._clickTabOnKeyEvents(a,"a.note-tab ")}.bind(this))}});
ns("la.views.banking.transactions",function(b){b.bankTransactionsViewListeners=function(){this.listenTo(this.model,"change:processed",this.filter);this.listenTo(this.model,"change:accountId",this.filter);this.listenTo(this.model,"change:q",this.filter);this.listenTo(this.model,"change:sortBy",this._saveBankingSortByPreference);this.listenTo(this.model,"change:sortDirection",this._saveBankingSortDirectionPreference);this.listenTo(Backbone,"banking:refreshSilently",this._filterSilently);this.listenTo(Backbone,
"banking:refreshMatchCounts",this._refreshMatchCounts);this.listenTo(Backbone,"banking:refreshBankTransactions",this._refreshBankTransactions);this.listenTo(Backbone,"datepicker-clicked",this._saveDatePreference);this.listenTo(Backbone,"banking:repeatAboveAllocation",this._repeatAboveAllocation);this.listenTo(Backbone,"banking:updateBulkActionsViewModel",this._updateBulkActionsViewModel);this.listenTo(this.collection,"beforeFetchFirstPage",this._hideBulkActionsView)}});
ns("la.views.banking.transactions",function(b){b.BankTransactionsView=la.views.BaseView.extend({mixins:[la.views.mixins.TableContainerView,la.views.mixins.Pageable,la.views.mixins.MetricEnabledColumnSortable,la.views.mixins.DateRangeFilterView,la.views.mixins.OnboardBanner,la.views.mixins.BankTransactionEvents,la.views.mixins.BankTransactionSortWarning],id:"bank-transactions",tableViewName:"la.views.banking.transactions.BankTransactionsTableView",templateName:"banking/transactions/bank_transactions",
events:b.bankTransactionsViewEvents,initialize:function(a){la.BusinessSettings.hasAnyEntitlement(["INVOICES","PURCHASES","PAYROLL"])||this.initializeBanner(a);this.model=new la.models.banking.TransactionsFilter(a);this.allAccounts=new la.collections.commons.Accounts;this.accounts=new Backbone.Collection;this.contacts=new la.collections.ContactsLite;this.spendingFirstAccounts=new la.collections.commons.Accounts;this.incomeFirstAccounts=new la.collections.commons.Accounts;this.spendingFirstAccounts.setSortType(ACCOUNTS_SORT_TYPE.SPENDING_FIRST);
this.incomeFirstAccounts.setSortType(ACCOUNTS_SORT_TYPE.INCOME_FIRST);this.newPagination=!0;this.spinnerSelector=".mediumLoadingSpinner";this.collection=new la.collections.banking.BankTransactionsPager([],{parentView:this,url:this._getBankTransactionsFilterUrlPagination(),accounts:this.allAccounts,contacts:this.contacts});this._addListeners();this._setFilters();this.contacts.fetch({async:!1});this.allAccounts.fetch({async:!1,success:function(){var a=new la.models.commons.Account({id:0,name:"All bank accounts",
type:"Banking"});this.spendingFirstAccounts.add(this.allAccounts.allocatables().models);this.incomeFirstAccounts.add(this.allAccounts.allocatables().models);this.accounts.add(_.union([a],this.allAccounts.bankingAccountsWithInactiveIndicated().models))}.bind(this)});_.extend(a,{spendingFirstAccounts:this.spendingFirstAccounts,incomeFirstAccounts:this.incomeFirstAccounts,contacts:this.contacts});this.model.set({showAllocateOrMatchSortWarning:this._shouldShowAllocateOrMatchSortWarningClass()});this._setModelFromQueryString();
this._setSortOrderFromPreference();this._super(_(a).extend({model:this.model}));this.processedTypes=new Backbone.Collection([{id:"ALL",name:"All transactions"},{id:"UNLINKED",name:"Unallocated transactions"},{id:"LINKED",name:"Allocated transactions"},{id:"WITH_NOTES",name:"Transactions with notes"}]);this.bulkActionsModel=new Backbone.Model({selectedBankTransactions:[]});this.bulkActionsView=new la.views.banking.transactions.BankTransactionsBulkActionsView({model:this.bulkActionsModel,accounts:this.incomeFirstAccounts,
filterModel:this.model});this.addSubview(this.bulkActionsView,"#bulk-actions-container");Backbone.Validation.bind(this);this._bindKeyEvents()},_addListeners:b.bankTransactionsViewListeners,_bindKeyEvents:b.bankTransactionsViewBindKeyEvents,_repeatAboveAllocation:function(a){var b=_.indexOf(this.collection.models,a);0!==b&&(b=this.collection.models[b-1],!a.get("linked")&&b.get("isSimpleAllocation")&&a.set({allocatedAccountId:b.get("allocatedAccountId"),gstCode:b.get("gstCode")}))},render:function(){this._super();
this.bulkActionsView.render();UnlinkedBankFeedsNotificationUtil.check(this.businessId);return this},_clickTabOnKeyEvents:function(a,b){0<this.$("tr.clickable.active ").length&&this.$(b).click()},_setSortOrderFromPreference:function(){var a=la.BusinessSettings.findPreference("banking-sort","sortBy"),b=la.BusinessSettings.findPreference("banking-sort","sortDirection"),a=a?a.get("preferenceValue")||"date":"date",b=b?b.get("preferenceValue")||"desc":"desc";this.model.set("sortBy",a);this.model.set("sortDirection",
b);$.extend(this.collection.pageState,{sortBy:a,sortDirection:b});this.updateSortWarningCheck()},updateSortColumn:function(a){this.updateSort(a);this.updateSortWarningCheck()},_setFilters:function(){var a=la.BusinessSettings.findPreference("banking-filter","processed");a&&this._setModelValueIfNotBlank("processed",a.get("preferenceValue"));(a=la.BusinessSettings.findPreference("banking-filter","accountId"))&&this._setModelValueIfNotBlank("accountId",a.get("preferenceValue"));this._setDateWithPreference("from",
la.BusinessSettings.findPreference("banking-filter","fromDate"));this._setDateWithPreference("to",la.BusinessSettings.findPreference("banking-filter","toDate"))},_setDateWithPreference:function(a,b){if(b){var c=b.get("preferenceValue");"TODAY"===c&&(c=DateUtils.frontendToBackend(moment().format("DD/MM/YYYY")));this._setModelValueIfNotBlank(a,c)}},_setModelFromQueryString:function(){var a=UrlUtils.getQueryParamValue("processed"),b=UrlUtils.getQueryParamValue("from"),c=UrlUtils.getQueryParamValue("to"),
d=UrlUtils.getQueryParamValue("accountId"),f=la.BusinessSettings.findPreference("banking-sort","sortBy"),f=f?f.get("preferenceValue")||"date":"date";void 0!==a&&"LINKED"!==a&&"allocatedAccount"===f&&(this._setModelValueIfNotBlank("sortBy","date"),this._setModelValueIfNotBlank("sortDirection","desc"));this._setModelValueIfNotBlank("processed",a);this._setModelValueIfNotBlank("from",b);this._setModelValueIfNotBlank("to",c);this._setModelValueIfNotBlank("accountId",d)},_setModelValueIfNotBlank:function(a,
b){_.isBlank(b)||this.model.set(a,b)},_saveDatePreference:function(a){var b="today"===a.target?"TODAY":this.model.get(a.input);la.BusinessSettings.setPreference("banking-filter",a.input+"Date",b)},_saveProcessedSelectionPreference:function(){la.BusinessSettings.setPreference("banking-filter","processed",this.model.get("processed"))},_saveAccountIdSelectionPreference:function(){la.BusinessSettings.setPreference("banking-filter","accountId",this.model.get("accountId"))},_saveBankingSortByPreference:function(){la.BusinessSettings.setPreference("banking-sort",
"sortBy",this.model.get("sortBy"))},_saveBankingSortDirectionPreference:function(){la.BusinessSettings.setPreference("banking-sort","sortDirection",this.model.get("sortDirection"))},filter:function(){this._filter(!1)},_filterSilently:function(){this._filter(!0)},_filter:function(a){this.model.isValid()&&(this.showSpinnerInsteadOfTable(!0),this.collection.fetchFirstPage({success:function(){this.showSpinnerInsteadOfTable(!1)}.bind(this),silent:a}))},_getBankTransactionsFilterUrlPagination:function(){return UrlUtils.apiUrl(la.BusinessSettings.getBusinessId(),
"/banktransactions")},_getPartialBankTransactionsFilterUrl:function(a){return UrlUtils.apiUrl(la.BusinessSettings.getBusinessId(),"/banktransactions/"+a.toString())},_getMatchCountsFilterUrl:function(a){return UrlUtils.apiUrl(la.BusinessSettings.getBusinessId(),"/banktransactions/matches/counts"+this._getFilterQueryString(this.model,a))},_getFilterQueryString:function(a,b){var c="?from="+a.get("from")+"&to="+a.get("to");0<b&&(c+="&accountId="+b);"WITH_NOTES"===a.get("processed")?c+="&withNotes=true":
"ALL"!==a.get("processed")&&(c+="&processed="+a.get("processed"));return c},_returnToOldBanking:function(){UrlUtils.redirect(UrlUtils.appUrl(la.BusinessSettings.getBusinessId(),"/banking/reconcileTransactions"));analytics.track("banking_click",{page:"banking-transactions",target_id:"new-return-link"});la.feedback.triggerFeedback("banking-opt-out-feedback")},_importStatement:function(){this.importStatementView=this.importStatementView||new la.views.banking.transactions.ImportStatementView({parent:this,
container:this.$("#pageContentHeader"),businessId:this.businessId});this.importStatementView.toggle()},_importHistory:function(){UrlUtils.redirect(UrlUtils.appUrl(la.BusinessSettings.getBusinessId(),"/banking/importHistory"))},_refreshMatchCounts:function(a){if(this.model.isValid()){var b=new Backbone.Collection;b.url=this._getMatchCountsFilterUrl(this.model.get("accountId"));b.fetch({success:function(){_.each(b.models,function(a){var b=this.collection.get(a.id);b&&b.updateMatchCountIfChanged(a.get("count"))},
this)}.bind(this),silent:!0})}},_refreshBankTransactions:function(a){var b=new Backbone.Collection([],{model:la.models.banking.BankTransaction});b.url=this._getPartialBankTransactionsFilterUrl(a.bankTransactionIds);b.fetch({success:function(){_(b.models).each(function(b){var d=this.collection.get(b.id);if(d&&(d.clearLinkData(),d.set(b.attributes,{silent:!0}),a.onSuccess))a.onSuccess()},this)}.bind(this),error:function(){if(a.onError)a.onError()},silent:!0})},_updateBulkActionsViewModel:function(){this.bulkActionsModel.set("selectedBankTransactions",
this._selectedRows())},_selectedRows:function(){return _(this.collection.models).filter(function(a){return a.get("selected")})},_hideBulkActionsView:function(){this.bulkActionsView.hide()}})});
ns("la.views.banking.transactions",function(b){b.BankingTabsView=la.views.BaseView.extend({mixins:[la.views.mixins.Slidable,la.views.mixins.TabbedView],tagName:"tr",className:"expanded",templateName:"banking/transactions/banking_tabs",events:{"click a.transfer-transaction-tab":function(){this._addSubViewByTabName("transfer-transaction-tab","#transfer-transaction-panel")},"click a.allocate-transaction-tab":function(){this._addSubViewByTabName("allocate-transaction-tab","#allocate-transaction-panel")},
"click a.match-transaction-tab":function(){this._addSubViewByTabName("match-transaction-tab","#match-transaction-panel")}},initialize:function(a){this._super(a);this.optionValues=a;this.toggleCallback=a.toggleCallback;this._addCurrentSubView(a.model.get("allocateOrMatchOnClickClass"));this.addSubview(new la.views.banking.transactions.AllocationRulePanelView(a),"#allocation-rule-panel");this.addSubview(new la.views.banking.transactions.NotePanelView(a),"#note-panel")},_addSubViewByTabName:function(a,
b){if(!this.findSubviewInSelector(b)){var c=this._addCurrentSubView(a);this.renderSubviews(c)}},_addCurrentSubView:function(a){var b;"match-transaction-tab"===a?(b=new la.views.banking.transactions.MatchTransactionPanelView(this.optionValues),this.addSubview(b,"#match-transaction-panel")):"allocate-transaction-tab"===a||"showDropDown"===a?(b=new la.views.banking.transactions.AllocateTransactionPanelView(this.optionValues),this.addSubview(b,"#allocate-transaction-panel")):"transfer-transaction-tab"===
a&&(b=new la.views.banking.transactions.TransferTransactionPanelView(this.optionValues),this.addSubview(b,"#transfer-transaction-panel"));return b},afterShown:function(){this.$el.click()},hide:function(){this.toggleCallback()},show:function(){Backbone.trigger("banking:closeAnyTabs");this.toggleCallback()}})});
ns("la.views.banking.transactions",function(b){b.lookupGstTypes=function(a){var b=_.isBlank(a.get("withdrawal"))?"all":"buy";a=a.get("transactionDate");return la.collections.commons.GstTypes.getAll(b,a)}});
ns("la.views.banking.transactions",function(b){b.ImportStatementView=la.views.BaseView.extend({mixins:[la.views.mixins.Validatable,la.views.mixins.Slidable,la.views.mixins.ResettingView],id:"bank-transactions-import-statement-form",className:"rowForm",templateName:"banking/transactions/import_statement",events:{"click .importButton":"importStatement","change #uploadInput":"validateFileToUpload"},initialize:function(a){this._super(a);this.container=a.container;this.parent=a.parent;this.allAccounts=
new la.collections.commons.Accounts;this.accounts=new Backbone.Collection;this.allAccounts.fetch({async:!1,success:function(){this.accounts.add(this.allAccounts.bankingAccountsWithInactiveIndicated().models)}.bind(this)});this.dateFormats=new Backbone.Collection([{name:"dd/MM/yy"},{name:"MM/dd/yy"}]);this.model=new la.models.banking.transactions.ImportStatement({statementFileDateFormat:this.dateFormats.at(0).get("name")})},validateFileToUpload:function(){this.model.validate()},importStatement:function(a){var b=
$(a.target);b.attr("disabled",!0);$.ajax(this.model.url(),{type:"POST",data:{dateFormatCombo:this.model.get("statementFileDateFormat")},files:this.$("#uploadInput"),iframe:!0,processData:!1,dataType:"json"}).complete(function(a){a.responseText&&(a=JSON.parse(a.responseText),a.success?this.showNotification("The statements have been imported successfully."):this.showNotification(a.message,"info"),this.parent.filter(),b.attr("disabled",!1),this.hide())}.bind(this))}})});
ns("la.views.banking.transactions",function(b){b.MatchTransactionHeaderView=la.views.commons.TableHeaderView.extend({templateName:"banking/transactions/match_transaction_header"})});
ns("la.views.banking.transactions",function(b){b.MatchTransactionPanelView=la.views.BaseView.extend({mixins:[la.views.mixins.Validatable,la.views.mixins.Searchable,la.views.mixins.BankingPanelUnsavedChangeMessage],id:"matchTransactionPanelView",templateName:"banking/transactions/match_transaction_panel",events:{"click .save-match":"_saveMatch"},initialize:function(a){this._super(a);this.bankTransaction=a.model;this.totalAmount=_.isBlank(this.bankTransaction.get("withdrawal"))?this.bankTransaction.get("deposit"):
this.bankTransaction.get("withdrawal");this.collection=new la.collections.banking.Matches([],{bankTransactionId:this.bankTransaction.get("id"),contacts:a.contacts});this.model=new la.models.banking.transactions.Match({bankTransactionId:this.bankTransaction.get("id"),collection:this.collection});this.tableView=this.addSubview(new la.views.banking.transactions.MatchTransactionTableView({collection:this.collection,contacts:a.contacts,parentModel:this.model}),".match-table-container");this.listenTo(this.collection,
"sync",this.renderRowsAndUpdateRemainingBalance.bind(this));this.listenTo(this.collection,"change",this._updateRemainingBalance);this.listenTo(this.model,"change:filter",this._filter);this.filters=new Backbone.Collection([{id:"ALL",name:"All transactions"},{id:"EXACT_MATCH",name:"Exact matches"}])},render:function(){this._super();this._initializeRemainingBalance();this._filter();return this},renderRowsAndUpdateRemainingBalance:function(){this.tableView.renderRows();this._updateRemainingBalance()},
_saveMatch:function(){this.model.get("collection").models=this.model.get("collection").origModels;this.saveAndCallback({message:"Transaction matched",success:function(){this.bankTransaction.fetch({silent:!0});Backbone.trigger("banking:closeAnyTabs");Backbone.trigger("banking:refreshMatchCounts")}.bind(this)})},_filter:function(){var a="ALL"===this.model.get("filter")?{}:{amount:this.bankTransaction.getAmount()};this.$(".match-table-container .tbody").html('<tr><td colspan="100%"><div class="mediumLoadingSpinner" style="display:block"></div></td></tr>');
this.collection.setFilterAndFetch(a)},_updateRemainingBalance:function(){var a=_.reduce(this.collection.origModels,function(a,b){if(b.get("matched")){var d=b.get("amountApplied")?b.get("amountApplied"):0;return MO.subtract(a,d)}return a},this.totalAmount);this.model.set("remainingBalance",a);this._updateRemainingBalanceLabel();this.model.validate()},_initializeRemainingBalance:function(){this.model.set("remainingBalance",this.totalAmount);this._updateRemainingBalanceLabel()},_updateRemainingBalanceLabel:function(){this.$("#remainingBalance").text($.money.format(this.model.get("remainingBalance"),
2))}})});
ns("la.views.banking.transactions",function(b){b.MatchTransactionRowView=la.views.commons.TableRowView.extend({templateName:"banking/transactions/match_transaction_row",initialize:function(a){this._super(a);this.model=a.model;this.model.contacts=a.contacts;this.parentModel=a.parentModel;this._addModelListeners();this.updateIsValidMatch()},_addModelListeners:function(){this.listenTo(this.model,"change:matched",this.applyAmount);this.listenTo(this.model,"computed",this.render.bind(this));this.listenTo(this.parentModel,"change:remainingBalance",
this.updateIsValidMatch)},applyAmount:function(a,b){this._toggleApplyAmount()},updateIsValidMatch:function(){var a=this.parentModel.get("remainingBalance");this.model.updateIsValidMatch(a)},_toggleApplyAmount:function(){this.model.get("matched")?this._applyAmount():this._unApplyAmount()},_applyAmount:function(){var a=this.model.get("amountRemaining"),b=this._calculateAmountApplied(a);this.model.set({amountApplied:b});this.model.set({amountRemaining:this._calculateAmountRemaining(a,b)})},_unApplyAmount:function(){var a=
this.model.get("amountApplied"),b=this.model.get("amountRemaining");this.model.set({amountApplied:0});this.model.set({amountRemaining:b+a})},_calculateAmountApplied:function(a){var b=this.parentModel.get("remainingBalance");return a>b?b:a},_calculateAmountRemaining:function(a,b){return a-b}})});
ns("la.views.banking.transactions",function(b){b.MatchTransactionTableView=la.views.commons.SortableTableView.extend({className:"table-alt table-sortable transactions",headerView:"la.views.banking.transactions.MatchTransactionHeaderView",rowView:"la.views.banking.transactions.MatchTransactionRowView",initialize:function(a){this._super(a);this.options=a;this.bankTransaction=a.bankTransaction;this.model=a.model}})});
ns("la.views.banking.transactions",function(b){b.NoteCharacterCountView=la.views.BaseView.extend({templateName:"banking/transactions/note_character_count",initialize:function(a){this._super(a);this.model=a.model;this.listenTo(this.model,"change:note",this.render)},render:function(){var a=this.model.get("note")||"";this.model.set("noteCharacterCount",140-a.length);this._super();return this}})});
ns("la.views.banking.transactions",function(b){b.NotePanelView=la.views.BaseView.extend({templateName:"banking/transactions/note_panel",mixins:[la.views.mixins.Validatable],events:{"click #saveButton":"_saveNote"},initialize:function(a){this._super(a);this.bankTransaction=a.model;this.model=new la.models.banking.BankTransactionNote({bankTransactionId:this.bankTransaction.get("id"),note:this.bankTransaction.get("note")});this.model.validate();this.noteCharacterCountView=new la.views.banking.transactions.NoteCharacterCountView({model:this.model});
this.addSubview(this.noteCharacterCountView,"#note-character-count-container");this.listenTo(this.model,"change:note",this._handleUnsavedChanges)},render:function(){this._super();this.renderSubviews();return this},_handleUnsavedChanges:function(){this.$("#unsavedWarning").removeClass("hidden")},_saveNote:function(){var a=this;this.saveAndCallback({success:function(){a.bankTransaction.set("note",a.model.get("note"));Backbone.trigger("banking:closeAnyTabs");Backbone.trigger("banking:renderNote");analytics.track("banking_click",
{page:"banking-transactions",target_id:"successfully-saved-note"})}})}})});
ns("la.views.banking.transactions",function(b){b.RemainingBalanceView=la.views.BaseView.extend({templateName:"banking/transactions/remaining_balance",initialize:function(a){this.model=a.model;this.bankTransaction=a.bankTransaction;this.listenTo(this.model.get("lines"),"change",this._updateRemainingBalance);this.listenTo(this.model.get("lines"),"remove",this._updateRemainingBalance)},render:function(){this._super();this._initializeRemainingBalance();return this},_initializeRemainingBalance:function(){this._updateRemainingBalanceLabel()},
_updateRemainingBalance:function(){var a=_.reduce(this.model.get("lines").models,function(a,b){var d=b.get("amount");return _(d).isBlank()?a:MO.subtract(a,d)},this.bankTransaction.getAmount());this.model.set("remainingBalance",a);this._updateRemainingBalanceLabel();this.model.validate()},_updateRemainingBalanceLabel:function(){this.$("#remainingBalance").text($.money.format(this.model.get("remainingBalance"),2))}})});
ns("la.views.banking.transactions",function(b){b.RemainingPercentageView=la.views.BaseView.extend({templateName:"banking/transactions/remaining_percentage",initialize:function(a){this.model=a.model;this.bankTransaction=a.bankTransaction;this.listenTo(this.model.get("lines"),"change:percentage",this._updateRemainingPercentage);this.listenTo(this.model.get("lines"),"remove",this._updateRemainingPercentage)},render:function(){this._super();this._updateRemainingPercentage();return this},_updatePercentageIfLinesAmountEqualBankTransactionAmount:function(){if(this.bankTransaction){var a=
0;this.model.get("lines").each(function(b){b.get("amount")&&(a+=Number(b.get("amount")))});this.bankTransaction.getAmount()===a&&(this.remainingPercentage=0)}},_calculateRemainingPercentage:function(){this.remainingPercentage=_.reduce(this.model.get("lines").models,function(a,b){var c=b.get("percentage");return _(c).isBlank()||!c?a:a-c},100);this.remainingPercentage=MO.round(this.remainingPercentage,2)},_updateRemainingPercentage:function(){window.setTimeout(function(){this._calculateRemainingPercentage();
this._updatePercentageIfLinesAmountEqualBankTransactionAmount();this.updateRemainingPercentageLabel();this.model.validate()}.bind(this),0)},updateRemainingPercentageLabel:function(){this.$("#remainingPercentage").text(this.remainingPercentage+"%")}})});
ns("la.views.banking.transactions",function(b){b.ReportableView=la.views.BaseView.extend({mixins:[la.views.mixins.Validatable],templateName:"banking/transactions/reportable",events:{"click .clear-supplier-button":"_clearSupplier"},initialize:function(a){this.model=a.model;this.contacts=a.contacts;this.bankTransaction=a.bankTransaction;this.templateName=a.templateName||this.templateName;this.listenTo(this.model,"change:contactId",this._toggleClearSupplierButton);this.listenTo(this.model,"change:reportable",
this._validateModel)},render:function(){this.options={isDeposit:this.bankTransaction.isDeposit()};this._super();this._toggleClearSupplierButton();return this},_toggleClearSupplierButton:function(){var a=null===this.model.get("contactId")||void 0===this.model.get("contactId");this.$(".clear-supplier-button").toggleClass("hidden",a)},_clearSupplier:function(){this.model.unset("contactId")}})});ns("la.views.banking.transactions",function(b){b.TransferTransactionHeaderView=la.views.commons.TableHeaderView.extend({templateName:"banking/transactions/transfer_transaction_header"})});
ns("la.views.banking.transactions",function(b){b.TransferTransactionPanelView=la.views.BaseView.extend({mixins:[la.views.mixins.BankingPanelUnsavedChangeMessage],id:"transferTransactionPanelView",templateName:"banking/transactions/transfer_transaction_panel",events:{"click #saveButton":"_transfer"},initialize:function(a){this._super(a);this.bankTransaction=a.model;this.businessId=la.BusinessSettings.getBusinessId();this.collection=new la.collections.banking.Transfers({bankTransactionId:this.bankTransaction.get("id")});
this.collection.fetch();this.tableView=this.addSubview(new la.views.banking.transactions.TransferTransactionTableView({collection:this.collection,bankTransaction:this.bankTransaction}),"#transfer-table-container");this.listenTo(this.collection,"sync",this._displayRecordCount);this.listenTo(this.collection,"change",this._toggleSaveButton)},_displayRecordCount:function(){this.$("#transfer-record-count").empty();this.$("#transfer-record-count").html('Displaying <span class="text-gray-base">'+this.collection.length+
"</span> record"+(1!==this.collection.length?"s":""))},_toggleSaveButton:function(){this.$("#saveButton").prop("disabled",!1)},_transfer:function(){var a=this._findSelectedBankTransaction(),b=this._findOriginalTransferBankTransactionId();if(a){var c=this.bankTransaction.get("id"),a=a.get("id"),d=this._getBankTransactionIdsToRefresh(b,c,a);this.transfer=this._getTransferModel(c,a);this.saveAndCallback({model:this.transfer,message:"Transfer bank transaction",success:function(){Backbone.trigger("banking:closeAnyTabs");
Backbone.trigger("banking:refreshBankTransactions",{bankTransactionIds:d})}.bind(this)})}},_findSelectedBankTransaction:function(){return _.find(this.collection.models,function(a){return!0===a.get("selected")}.bind(this))},_findOriginalTransferBankTransactionId:function(){var a=this.bankTransaction.get("id"),b=this.bankTransaction.get("linkedReferenceNumber"),c=_.find(this.collection.models,function(c){var f=c.get("linkedReferenceNumber")===b;c=c.get("id")!==a;return f&&c}.bind(this));return c?c.get("id"):
void 0},_getBankTransactionIdsToRefresh:function(a,b,c){b=[b,c];a&&a!==c&&b.push(a);return b},_getTransferModel:function(a,b){return new la.models.banking.transactions.Transfer({bankTransactionId:a,transferBankTransactionId:b})}})});
ns("la.views.banking.transactions",function(b){b.TransferTransactionRowView=la.views.commons.TableRowView.extend({templateName:"banking/transactions/transfer_transaction_row",events:{"change input":"_selectOption","click input":"_selectOption"},initialize:function(a){this._super(a);this.model=a.model},_selectOption:function(){this.model.set("selected",!0)}})});
ns("la.views.banking.transactions",function(b){b.TransferTransactionTableView=la.views.commons.TableView.extend({className:"table-alt transactions",headerView:"la.views.banking.transactions.TransferTransactionHeaderView",rowView:"la.views.banking.transactions.TransferTransactionRowView",initialize:function(a){this._super(a);this.collection=a.collection;this.listenTo(this.collection,"sync",this.renderRows)}})});
ns("la.views.banking",function(b){b.TransferFundsView=la.views.BaseIFrameView.extend({templateName:"commons/iframe_container",initialize:function(a){this._super(a);this._setId("transferFundsFrame");var b="/VerificationProxy?request=/JSP/Banking/BankTrans.jsp";_.isUndefined(a.journalSysId)||_.isNull(a.journalSysId)||(b=b+"&journalSysId="+a.journalSysId);this._setUrl(UrlUtils.url(b))}})});
ns("la.views.billflow",function(b){b.AccordionView=la.views.BaseView.extend({templateName:"billflow/accordion",className:"accordionGroup",initialize:function(a){this._super(a);_.bindAll(this);a=this.model.inTrayContext;this.billflowDropzonePanel=new la.views.billflow.BillflowDropzonePanel({businessId:this.businessId});this.selectThumbnailPanel=new la.views.billflow.SelectThumbnailPanel({businessId:this.businessId,model:{inTrayContext:a},container:this});this.addSubview(this.billflowDropzonePanel,
"#billflowDropzonePanel");this.addSubview(this.selectThumbnailPanel,"#selectThumbnailPanel");this.listenTo(Backbone,"billflow:accordionTransitionOccurred",this.transitionAccordion);this.listenTo(Backbone,"billflow:attachToBillView:onDomReady",this.onSubviewDomReady);this.listenTo(Backbone,"billflow:billView:onDomReady",this.onSubviewDomReady)},events:{"click .sortByOldest":"sortByOldest","click .sortByNewest":"sortByNewest"},readyToTransition:!1,render:function(){var a=this._super();this.renderAccordion(a.$el);
return a},renderAccordion:function(a){function b(){a.find(".accordion-header-active").removeClass("accordion-header-active");var c=a.find(".accordion-header");c.find(".accordion-heading").removeClass("active");c.find(".ordinal").removeClass("active");c.find(".active-header-content").hide()}function c(a){a.addClass("accordion-header-active");a.find(".ordinal").addClass("active");a.find(".accordion-heading").addClass("active");a.find(".active-header-content").show()}a.accordion({icons:!1,event:null,
animate:500,heightStyle:"content",create:function(a,f){b();c(f.header)},beforeActivate:function(a,f){b();c(f.newHeader)}})},onSubviewDomReady:function(){this.readyToTransition=!0},transitionAccordion:function(a,b){var c=this;if(c.readyToTransition){c.readyToTransition=!1;this.$el.accordion("refresh");c.$el.accordion("option","active",a);var d="Bill";switch(b){case "link-bill":d="Link document to bill";break;case "create-bill":d="Create bill"}c.$el.find(".bill-panel-heading").text(d)}else _.delay(function(){c.transitionAccordion(a,
b)},100)},sortByOldest:function(a){this.selectThumbnailPanel.sortByOldest();this.setCurrentSortText(this.$el.find(".sortByOldest"))},sortByNewest:function(a){this.selectThumbnailPanel.sortByNewest();this.setCurrentSortText(this.$el.find(".sortByNewest"))},setCurrentSortText:function(a){a=$(a);$(".dropdown-menu").find("button").removeClass("btn-active");a.addClass("btn-active");a=a.text();$("#document-sort-dropdown").text(a)}})});
ns("la.views.billflow",function(b){b.AttachToBillButtons=la.views.BaseView.extend({className:"attach-buttons pull-right",templateName:"billflow/attach_to_bill_buttons",id:"attach-buttons",initialize:function(a){this._super(a)}})});
ns("la.views.invoices",function(b){b.InvoiceTableHeaderView=la.views.commons.TableHeaderSelectableView.extend({initialize:function(a){this._super(a);this.model.set("modelName",a.container.modelName);this.templateName="invoices/"+a.container.modelName+"_header"}});b.InvoiceTableFooterView=la.views.commons.TableFooterView.extend({initialize:function(a){this._super(a);this.modelName=a.container.modelName;this.collection=a.container.collection;this.templateName="invoices/"+a.container.modelName+"_footer";
this.listenTo(this.collection,"reset",this.render)},render:function(){return this._renderTemplate({total:this.collection.getTotal(),dueTotal:this.collection.getDueTotal(),modelName:this.modelName})}});b.InvoiceRowView=la.views.commons.TableRowFormView.extend({initialize:function(a){this._super(a);this.templateName="invoices/"+a.container.modelName+"_row"}});b.InvoiceTableView=la.views.commons.SortableTableView.extend({headerView:"la.views.invoices.InvoiceTableHeaderView",footerView:"la.views.invoices.InvoiceTableFooterView",
rowView:"la.views.invoices.InvoiceRowView",initialize:function(a){this._super(a);this.modelName=a.modelName;this.noRecordMessage="There are no "+this.modelName+"s."},createRowView:function(a){return createObject(this.rowView,{businessId:this.businessId,modelName:this.modelName,model:a,container:this})}});b.InvoiceListView=la.views.FormView.extend({mixins:[la.views.mixins.TableContainerView,la.views.mixins.OnlineInvoiceBanner,la.views.mixins.InvoiceEntitlement],id:"invoiceList",className:"invoices",
tableViewName:"la.views.invoices.InvoiceTableView",events:{"click #createButton":"create","click #createCustomerReturnButton":"navigateToCreateCustomerReturnPage","click #createExpenseButton":"createBill","click #createSupplierReturnButton":"navigateToCreateSupplierReturnPage","click #bulkPrint":"bulkPrint"},initialize:function(a){var b=new la.models.Model;a.model=b;this._super(a);this.invoiceEntitlementType=this.modelName=a.modelName;this._initFilters(b);this.templateName="invoices/"+this.modelName+
"s";this.listenTo(b,"change:filter",this.filterResults);this.listenTo(b,"change:search",this.search);this._isInvoiceListView()&&(FeatureTagUtils.isFeatureAvailable(FeatureTag.ONLINE_PAYMENTS)?this.addSubview(new la.views.invoices.OnlinePaymentsBannerView(a),"#online-payments-banner"):this.showOnlineInvoicingBanner()&&this.addSubview(new la.views.invoices.OnlineInvoicingOptInView({container:this,model:this.model,businessId:this.businessId}),"#online-invoicing"));_.bindAll(this);this.model=b},showEntitlementUsage:function(){if(null!==
this.invoiceEntitlementUsage.getRemainingNumber()){var a=new la.views.invoices.EntitlementUsageView({model:this.invoiceEntitlementUsage});this.$("#entitlementUsage").html(a.render().el)}},render:function(){this._super();this.renderEntitlementUsage();return this},renderEntitlementUsage:function(){this._isInvoiceOrBillListView()&&this.retrieveEntitlementUsage(this.showEntitlementUsage)},_isInvoiceListView:function(){return"invoice"===this.modelName},_isInvoiceOrBillListView:function(){return this._isInvoiceListView()||
"bill"===this.modelName},_initFilters:function(a){this.model=a;a.set("filter",la.BusinessSettings.getPreference("dataTable",this.modelName+"ListStatus"));a.set("search",sessionStore.get(this.modelName+".search"));this.search()},create:function(){this._isInvoiceOrBillListView()?this.checkEntitlementLimits(this.navigateToCreatePage):this.navigateToCreatePage()},navigateToCreatePage:function(){UrlUtils.navigateToRoute(this.businessId,"/"+this.modelName+"s/new")},navigateToCreateCustomerReturnPage:function(){UrlUtils.redirect(UrlUtils.appUrl(la.BusinessSettings.getBusinessId(),
"/invoices/return/new"))},createBill:function(){this.checkEntitlementLimits(this.navigateToCreateExpensePage)},navigateToCreateExpensePage:function(){UrlUtils.redirect(UrlUtils.getTransactionUrl("Bill","new"))},navigateToCreateSupplierReturnPage:function(){UrlUtils.redirect(UrlUtils.appUrl(la.BusinessSettings.getBusinessId(),"/bills/return/new"))},search:function(){var a=[],b=this.model.get("search"),c=this.model.get("hideLinked");sessionStore.set(this.modelName+".search",b);_.isBlank(b)||a.push({field:"searchableField",
type:"function",value:function(a){return _.str.contains(this.formatFields(a).toLowerCase(),b.toLowerCase())}.bind(this)});c&&a.push({field:"documentId",type:"function",value:function(a){return _.isBlank(a)}});this.collection.setFieldFilter(a)},formatFields:function(a){a=a.split(",");a[2]=DateUtils.backendToFrontendWithoutException(a[2]);a[3]=DateUtils.backendToFrontendWithoutException(a[3]);a[4]=Handlebars.helpers.moneyValueFormatWithoutDollarSignShowZero(a[4]);"quote"!==this.modelName&&(a[5]=Handlebars.helpers.moneyValueFormatWithoutDollarSignShowZero(a[5]));
return a.join(",")},filterResults:function(){this.showSpinner(!0);var a=this.model.get("filter"),b=UrlUtils.apiUrl(this.businessId,"/"+(this.modelName+"s")+("?type="+a));this.collection.paginator_core.url=b;this.collection.fetch({success:function(){this.showSpinner(!1)}.bind(this),silent:!0});la.BusinessSettings.setPreference("dataTable",this.modelName+"ListStatus",a)},bulkPrint:function(){var a=this.collection.selectedItems();if(0===a.length)return!1;var b=_(a).filter(function(a){return"INVOICE"===
a.get("type")}),a=_(a).filter(function(a){return"INVOICE"!==a.get("type")}),b=_(b).map(function(a){return a.get("id")}),a=_(a).map(function(a){return a.get("id")});0<b.length&&(b=UrlUtils.webUrl(this.businessId,"/invoices/print.pdf?ids="+b.join(",")),this._openPdfUrl(b));0<a.length&&(b="/"+UrlUtils.context()+"/app/report/invoice-list.pdf?journalIds="+a.join("|"),this._openPdfUrl(b))},_openPdfUrl:function(a){window.open(a+"&t="+(new Date).getTime(),"_blank","toolbar=no,location=no,directories=no,status=yes,menubar=no,scrollbars=yes,copyhistory=no,resizable=yes,alwaysRaised").focus()},
showSpinner:function(a){this.$(".loadingSpinner").toggle(a);this.$("#page").toggle(!a)}})});
ns("la.views.invoices",function(b){b.AttachToBillView=la.views.invoices.InvoiceListView.extend({id:"billList",tableViewName:"la.views.billflow.BillTableView",attributes:{"data-backdrop":"static"},initialize:function(a){this._super(a);_.bindAll(this);this.listenTo(this.tableView,"renderrows",this.updateSelection);this.addSubview(new la.views.billflow.AttachToBillButtons,"#pagination","after");this.listenTo(this.model,"change:documentId",this.setUpBillFlowThumbnail);this.listenTo(Backbone,"billflow:billSelected",
this.selectBill);this.listenTo(this,"billflow:cancelAction",this.navigateToList);this.listenTo(this,"billflow:enlargeAction",this.enlargeThumbnail);this.listenTo(this,"billflow:downloadAction",this.downloadDocument);this.model.set("hideLinked",!0);this.listenTo(this.collection,"sync",this.search)},events:{"click #link-to-bill":"linkButtonClicked","click .cancel-button":"navigateToList"},render:function(){this._super();this.setUpBillFlowThumbnail();return this},selectBill:function(a){this.billModel=
new la.models.invoices.Bill({id:a.billId});this.enableLinkButton()},linkButtonClicked:function(){this.disableForm();this.billModel.fetch({success:this.updateExpense,error:this.enableForm})},updateExpense:function(){this.billModel.set({documentId:this.options.documentId});this.saveAndCallFunction(this.updateExpenseSuccess,{model:this.billModel,message:"Bill saved"})},updateExpenseSuccess:function(){Backbone.trigger("updateNotification");var a=this.billModel.get("total");analytics.track("bill_link_existing",
{env:la.Config.get("environment"),documentAttached:!0,billId:this.billModel.isNew()?"new":this.billModel.id,smartMatch:this.ocrBillId===this.billModel.id,totalWasPrefilled:!1,insideInTray:!0,billTotal:a,trinityDocumentId:this.billflowDocument.get("id")});this.navigateToList()},navigateToList:function(){UrlUtils.redirect(la.breadcrumb.getPreviousUrl())},enlargeThumbnail:function(){var a=this.billflowDocument.pdfUrlApiPath(this.businessId);(new la.views.billflow.PdfEnlargeView({pdfUrlApiPath:a,container:this})).renderPdf()},
downloadDocument:function(){window.location.href=this.billflowDocument.downloadUrl(this.businessId)},enableLinkButton:function(){this.$(".attach-buttons #link-to-bill").prop("disabled",!1)},disableLinkButton:function(){this.$(".attach-buttons #link-to-bill").prop("disabled",!0)},setUpBillFlowThumbnail:function(){this.options.documentId&&(this.billflowDocument=new la.models.billflow.BillflowDocument({id:this.options.documentId}),this.billflowThumbnailPreviewView=new la.views.billflow.ThumbnailPreviewView({model:this.billflowDocument,
businessId:this.businessId}),this.billflowThumbnailPreviewButtonsView=new la.views.billflow.ThumbnailPreviewButtonsView({model:{cancel:!0,enlarge:!0,splitView:!1,popOut:!0,download:!0},billflowDocument:this.billflowDocument,businessId:this.businessId,container:this}),this.listenTo(this.billflowDocument,"change",this.renderBillflowThumbnail),this.billflowDocument.fetch())},renderBillflowThumbnail:function(){this.$("#billflow_thumbnail").html(this.billflowThumbnailPreviewView.render().el);this.$(".thumbnail-button-panel").html(this.billflowThumbnailPreviewButtonsView.render().el);
this.updateSelection();Backbone.trigger("billflow:attachToBillView:onDomReady")},updateSelection:function(){this.highlightOcr();this.reselectBill()},reselectBill:function(){if(this.billModel){var a=this.$("input:radio[class=billSelector][data-billid="+this.billModel.get("id")+"]");0<a.length?a.click():this.disableLinkButton()}},highlightOcr:function(){if(void 0===this.ocrBillId&&this.billflowDocument){var a=(new util.BillMatcher).findMatchingBill(this.billflowDocument,this.collection);0<a.length&&
(this.ocrBillId=a[0].id)}if(this.ocrBillId){var a=this.$("input:radio[class=billSelector][data-billid="+this.ocrBillId+"]"),b=a.parent().parent(),c=b.parent();b.addClass("prefilled").detach().prependTo(c).before("<tr><td class=prefilled-header colspan=6>We found this bill for you</td></tr>");void 0===this.billModel&&a.click()}}})});
ns("la.views.billflow",function(b){b.BillTableHeaderView=la.views.commons.TableHeaderSelectableView.extend({templateName:"billflow/bill_header"});b.BillRowView=la.views.commons.TableRowFormView.extend({templateName:"billflow/bill_row",events:{"click input.billSelector":"billSelected"},billSelected:function(){Backbone.trigger("billflow:billSelected",{billId:this.model.id})}});b.BillTableView=la.views.commons.SortableTableView.extend({headerView:"la.views.billflow.BillTableHeaderView",rowView:"la.views.billflow.BillRowView",
initialize:function(a){this._super(a);_.bindAll(this)},createRowView:function(a){return new b.BillRowView({billId:this.options.billId,businessId:this.businessId,model:a,container:this})}})});
ns("la.views.billflow",function(b){b.BillflowDropzonePanel=la.views.BaseView.extend({templateName:"billflow/dropzone_panel",mixins:[la.views.mixins.DropzoneUIState],id:"uploadPreviewPanel",events:{"click .continue-button":"continueUpload"},_dropzone:{},getDropzone:function(){return this._dropzone},newDocuments:[],fatalError:!1,uploadError:!1,isFileDragging:!1,uploadFileCount:0,successCount:0,errorCount:0,initialize:function(a){this._super(a);this.newDocuments=[];this.uploadError=this.fatalError=!1;
this.errorCount=this.successCount=this.uploadFileCount=0;this.dropzoneUIState.currentState=this.dropzoneUIStateEmpty},preventDefaultListener:function(a){a=a||event;a.preventDefault()},remove:function(){this._super();document.removeEventListener("dragover",this.preventDefaultListener);document.removeEventListener("drop",this.preventDefaultListener)},onDomReady:function(){this._super();this.initDropzone();this.setupDropzoneHandlers()},initDropzone:function(){var a=document.querySelector("#template");
a.id="";var b=a.parentNode.innerHTML;a.parentNode.removeChild(a);a=UrlUtils.apiUrl(this.businessId,"/documents/document");this._dropzone=new Dropzone("#uploadPreviewPanel",{url:a,autoProcessQueue:!1,parallelUploads:1,clickable:".upload-documents",previewTemplate:b,previewsContainer:"#uploading-items"})},setupDropzoneHandlers:function(){this.listenTo(this,"billflow:finaliseUpload",this.finaliseUpload);this.listenTo(Backbone,"billflow:fatalError",this.displayFatalError);this.listenTo(Backbone,"billflow:browserEnter",
this.dropzoneUIState.browserEnter);this.listenTo(Backbone,"billflow:browserExit",this.dropzoneUIState.browserExit);this.listenTo(Backbone,"billflow:dropped",this.dropzoneUIState.dropped);this.listenTo(Backbone,"billflow:uploadComplete",this.dropzoneUIState.uploadComplete);document.addEventListener("dragover",this.preventDefaultListener,!1);document.addEventListener("drop",this.preventDefaultListener,!1);this.listenTo(this,"dropzone:uploadstart",this.uploadStart);this.listenTo(this,"dropzone:addedfile",
this.addedFile);this.listenTo(this,"dropzone:drop",this.drop);this.listenTo(this,"dropzone:error",this.error);this.listenTo(this,"dropzone:uploadprogress",this.uploadProgress);this.listenTo(this,"dropzone:success",this.success);this.listenTo(this,"dropzone:queuecomplete",this.queueComplete);var a=this;$("#uploadPreviewPanel").on("dragover",function(b){a.invalidateDrag(b.originalEvent)});$(document).on("dragover",function(b){a.invalidateDrag(b.originalEvent)});this.getDropzone().on("drop",function(a){this.trigger("dropzone:drop",
a)}.bind(this));this.getDropzone().on("uploadstart",function(a){this.trigger("dropzone:uploadstart",a)}.bind(this));this.getDropzone().on("addedfile",function(a){this.trigger("dropzone:addedfile",a)}.bind(this));this.getDropzone().on("queuecomplete",function(){this.trigger("dropzone:queuecomplete")}.bind(this));this.getDropzone().on("success",function(a,b){this.trigger("dropzone:success",a,b)}.bind(this));this.getDropzone().on("error",function(a){this.trigger("dropzone:error",a)}.bind(this));this.getDropzone().on("uploadprogress",
function(a,b){this.trigger("dropzone:uploadprogress",a,b)}.bind(this))},uploadStart:function(a){this.getDropzone().disable();this.dropzoneUIState.currentState=this.dropzoneUIStateProcessing;this.uploadFileCount=a.length;BillflowFileValidation.validateFiles(a)?this.setupOverlay():this.fatalError=!0},addedFile:function(a){this.fatalError?this.getDropzone().removeFile(a):BillflowFileValidation.isValidFileType(a.name)?BillflowFileValidation.isValidFileSize(a.size)?($(".cancel-upload-button").removeAttr("disabled"),
_.delay(function(){this.getDropzone().processFile(a)}.bind(this),500)):this.uploadFailed(a,"file-size","File too large!",!0):this.uploadFailed(a,"file-type","Wrong file type!",!0)},drop:function(a){Backbone.trigger("billflow:dropped");this.isFileDragging=!1},success:function(a,b){this.successCount+=1;this.newDocuments.push(b);this.showProcessingComplete(a)},error:function(a){this.uploadFailed(a,"server-error","File upload failed!",!1)},uploadProgress:function(a,b){100===b&&this.showProcessingIndeterminate(a)},
queueComplete:function(){this.uploadError?$(".continue-button").show():_.delay(function(){this.trigger("billflow:finaliseUpload")}.bind(this),2E3)},showProcessingIndeterminate:function(a){_.delay(function(){var b=new la.views.billflow.UploadProgressView({model:{preview_class:"upload-progress-indicator",preview_text:"Generating preview..."}});b.render();this.$(".bottom-panel",a.previewElement).empty().append(b.el)},200)},showProcessingComplete:function(a){_.delay(function(){var b=new la.views.billflow.UploadProgressView({model:{preview_class:"upload-complete-indicator billflow-upload-complete",
preview_text:"Preview generated"}});b.render();this.$(".bottom-panel",a.previewElement).empty().append(b.el)},500)},setupOverlay:function(){this.showDropzone();this.showProcessingDropzone()},addDocumentsToCarousel:function(){_.each(this.newDocuments,this.addDocumentToCarousel);this.newDocuments=[]},displayFatalError:function(a){this.setupOverlay();$(".fatal-error-message").find("span").text(a);$(".fatal-error-message").show();$(".continue-button").show()},uploadFailed:function(a,b,c,d){this.uploadError=
!0;this.errorCount+=1;b=$(a.previewElement);b.addClass("error-state");d&&(this.getDropzone().removeFile(a),$("#uploading-items").append(b),this.successCount+this.errorCount===this.uploadFileCount&&$(".continue-button").show());_.delay(function(){$(".bottom-panel",a.previewElement).empty().append('<span class="upload-error-message file-type">'+c+"</span>")},200)},addDocumentToCarousel:function(a,b){_.delay(function(){Backbone.trigger("billflow:addThumbnail",a)},1E3*(b+1))},finaliseUpload:function(){Backbone.trigger("updateNotification");
this.addDocumentsToCarousel();this.resetDropzone();this.getDropzone().enable();Backbone.trigger("billflow:uploadComplete")},resetDropzone:function(){this.newDocuments=[];this.fatalError=this.uploadError=!1;this.errorCount=this.successCount=this.uploadFileCount=0;$("#uploadPreviewPanelInner").hide(300);$("#uploading-items").empty(300);$("#uploadPreviewPanel").hide(300);$(".fatal-error-message").find("span").text("");$(".fatal-error-message").hide()},showDropzone:function(){var a=$("#selectThumbnailPanel").width(),
b=$("#selectThumbnailPanel").height();$("#uploadPreviewPanel").width(a).height(b);$("#uploadPreviewPanel").show();$(".drag-in").show();$(".continue-button").hide()},showProcessingDropzone:function(){$("p.drag-in").hide();$("#uploadPreviewPanelInner").show()},hideDropzone:function(){$("#uploadPreviewPanel").hide();$(".drag-in").hide();$("#uploadPreviewPanelInner").hide()},continueUpload:function(){this.trigger("billflow:finaliseUpload")},invalidateDrag:function(a){if(a){var b=this;if((a=a.dataTransfer)&&
a.types){for(var c=!1,d=0;d<a.types.length;d++)if("Files"===a.types[d]){c=!0;break}c&&((a=window.dropZoneTimeout)?clearTimeout(a):(Backbone.trigger("billflow:browserEnter"),b.isFileDragging=!0),window.dropZoneTimeout=setTimeout(function(){Backbone.trigger("billflow:browserExit");b.isFileDragging=!1},100))}}}})});
var BillflowErrorUtils={showErrorMessage:function(){ErrorUtils.showErrorMessages({errorMessage:"Sorry, we can\u2019t access your documents right now. Please try again in a few minutes. You can still manually enter bills but you won't be able to attach documents."})},unavailableErrorHandler:function(){return{statusCode:{400:function(){BillflowErrorUtils.showErrorMessage()}}}}};
ns("la.views.billflow",function(b){b.Carousel={renderCarousel:function(a){var b=this;this.$el.slick({infinite:!1,slidesToShow:this.thumbsPerPage,slidesToScroll:this.thumbsPerPage,dots:!0,arrows:!1,onInit:function(c){b.slick=c;b.addPagingButtons();Backbone.trigger("billflow:thumbnailsInitialized");a&&a.call(b)},onAfterChange:b.updatePagingButtonState,onReInit:b.updatePagingButtonState});this.updateThumbnailIcons()},removeCarousel:function(){this.$el.unslick();this.$el.removeClass("fake-slick");this.$el.empty();
this.slick=null;this.disableThumbnailActionButtons()},dropAndRedrawCarousel:function(){this.removeCarousel();this.collection.sortingByNewest?this.collection.sortByNewest():this.collection.sortByOldest()},showNoThumbnailsMessage:function(){this.$el.hasClass("fake-slick")||(this.removeCarousel(),this.$el.append('<div class="slick-list"></div>'),this.addPagingButtons(),this.$el.addClass("slick-slider fake-slick"),this.$el.append('<div class="empty-message"><b>You currently have no documents in your In tray.</b><p>Email, upload or drag and drop some documents here.</p></div>'));
this.eventQueue.readyForService()},addPagingButtons:function(){var a=this.$el.find(".slick-list");this.prevButton=this.addPagingButton("left",a);this.nextButton=this.addPagingButton("right",a);this.updatePagingButtonState()},addPagingButton:function(a,b){var c=createObject("la.views.billflow.CarouselPagingButtonView",{model:{direction:a},container:this});b.after(c.render().$el);return c},pagePrevious:function(){this.$el.slickPrev();this.updatePagingButtonState()},pageNext:function(){this.$el.slickNext();
this.updatePagingButtonState()},updatePagingButtonState:function(){0>=this.lastPage()?(this.prevButton.deactivate(),this.nextButton.deactivate()):(0===this.currentPage()?this.prevButton.deactivate():this.prevButton.activate(),this.currentPage()===this.lastPage()?this.nextButton.deactivate():this.nextButton.activate())},currentPage:function(){var a=this.slick.getCurrent();return 0<a%this.thumbsPerPage?0:a/this.thumbsPerPage},lastPage:function(){return Math.ceil(this.collection.length/this.thumbsPerPage)-
1}}});ns("la.views.billflow",function(b){b.CarouselPagingButtonView=la.views.BaseView.extend({templateName:"billflow/carousel_paging_button",initialize:function(a){this._super(a);this.activeClass="carousel-arrow-active";this.events={};this.events["click ."+this.activeClass]="scroll"},scroll:function(){this.container.$el.trigger("pageButtonClicked",[this])},activate:function(){this.$el.children().first().addClass(this.activeClass)},deactivate:function(){this.$el.children().first().removeClass(this.activeClass)}})});
ns("la.views.billflow",function(b){b.DocumentsView=la.views.BaseView.extend({templateName:"billflow/documents",initialize:function(a){this._super(a);this.gettingStartedId="intray";this.addSubview(new la.views.billflow.AccordionView({businessId:this.businessId,model:{inTrayContext:!0},container:this}),"#accordion");this.listenTo(Backbone,"billflow:fetchDocumentsFailed",this.showDocumentsErrorMessage)},showDocumentsErrorMessage:function(){BillflowErrorUtils.showErrorMessage()}})});
ns("la.views.billflow",function(b){b.EventQueue=function(a){var b=[],c=!1;return{enqueue:function(a){return function(c){b.push({event:c,handler:a,added:Date.now()})}},service:function(){for(var d=!1,f=0;f<b.length;f++){var g=b[f];Date.now()>g.added+1E4?(b.shift(),d=!0):f++}d&&(c=!1);if(b.length&&!c){d=b.shift();c=!0;try{d.handler.call(a,d.event)}catch(h){throw c=!1,h;}}},readyForService:function(){c=!1}}}});
Handlebars.registerHelper("multiplePagesClass",function(){return this.multiple_pages?"multi":""});Handlebars.registerHelper("badgeClass",function(){var b="";switch(this.badge){case "ocrProcessing":b="ocr-processing-badge";break;case "noOcrData":b="no-ocr-data-badge"}return b});Handlebars.registerHelper("billflowMoneyFormat",function(b){return _(b).isUndefined()||0===b||null===b?"":$.money.format(parseFloat(b)/100,2)});
ns("la.views.billflow",function(b){b.OcrHint=la.views.BaseView.extend({className:"alert alert-info alert-dismissible ocr-hint",attributes:{role:"alert"},initialize:function(a){this._super(a)},render:function(){this.renderHandlebars("billflow/ocr_hint");return this}})});
ns("la.views.billflow",function(b){b.OcrPrefiller={prefillWithOcrData:function(){var a=this.billflowDocument.get("ocr_data");if(a){var b={},c=function(a,b){return!a.has(b)},d=function(a){return a.isNew()},f=this,g=function(a,b,c){for(var d=0;d<b.length;d++){var e=b[d][0],g=b[d][1],h=b[d][2];!g||h&&!h(a,e)||(a.set(e,g),f.stylePrefilledElement(e),c[e]=g)}},h=this.contacts.find(function(b){var c=la.Config.isNZ()?"ird":"abn";b=b.get(c);return!_(b).isBlank()&&b===a.businessNumber});h&&(this.contactPrefilled=
!0);g(this.model,[["supplierInvoiceNumber",a.invoiceNumber,c],["issueDate",a.invoiceDate,d],["dueDate",a.invoiceDueDate,d],["contactId",h?h.id:null,c]],b);this.linesUnfilled()&&(g(this.model.get("lines").first(),[["quantity",1],["unitPrice",a.invoiceAmount/100]],b),g(this.model,[["gstInclusive",!0]],b));analytics.track("bill_data_prefilled",{prefilledWith:b,env:la.Config.get("environment"),insideInTray:this.inTrayContext(),billId:this.model.isNew()?"new":this.model.id,trinityDocumentId:this.billflowDocument.get("id")});
this.showOcrHint()}},removePrefilledStyle:function(){$(".prefilled").removeClass("prefilled")},clearOcrData:function(){this.contactPrefilled=!1;this.billflowDocument&&(this.billflowDocument.attributes.ocr_data=null);this.removePrefilledStyle()},showOcrHint:function(){if(!this.$el.find(".ocr-hint")[0]&&this.$el.find(".prefilled").length){var a=new la.views.billflow.OcrHint;this.$el.find("#invoiceContainer").prepend(a.render().$el)}},stylePrefilledElement:function(a){$("#"+a).addClass("prefilled").on("change input",
function(a){$(a.target).removeClass("prefilled")})}}});
ns("la.views.billflow",function(b){b.PdfEnlargeView=la.views.BaseView.extend({templateName:"billflow/pdf_enlarge_view",id:"billPdf",className:"clearfix",events:{"click #closeEnlargeButton":"closeEnlarge"},closeEnlarge:function(){this.$el.remove();this.remove();this.enableBodyScroll()},initialize:function(a){this._super(a);this.pdfUrlApiPath=a.pdfUrlApiPath;this.pdfViewerView=this.addSubview(new la.views.billflow.PdfViewerView({container:this}),"#enlargeContainer")},render:function(){this._super();
this.registerCloseEvent();this.disableBodyScroll();return this},registerCloseEvent:function(){var a=this;this.$el.keyup(function(b){b.preventDefault();27===b.keyCode&&a.closeEnlarge()})},renderPdf:function(){this.appendToBody();var a=this,b={url:a.pdfUrlApiPath,type:"GET",contentType:"application/json",dataType:"json",success:function(b){a.pdfViewerView.showPdf(b.url);a.registerGlobalEventHandler()}},b=_.extend(b,BillflowErrorUtils.unavailableErrorHandler());$.ajax(b)},appendToBody:function(){$("body").append(this.render().$el)},
disableBodyScroll:function(){$("body").css("overflow","hidden")},enableBodyScroll:function(){$("body").css("overflow","auto")},remove:function(){this.removeGlobalEventHandler()},registerGlobalEventHandler:function(){this.removeGlobalEventHandler();$("body").click({view:this},this.handleGlobalClick)},handleGlobalClick:function(a){var b=a.data.view;b.currentlyWithinViewer(a)||b.closeEnlarge()},currentlyWithinViewer:function(a){return!!$(a.target).parents("#viewer")[0]},removeGlobalEventHandler:function(){$("body").unbind("click",
this.handleGlobalClick)}})});ns("la.views.billflow",function(b){b.PdfViewerView=la.views.BaseView.extend({templateName:"billflow/pdf_viewer",className:"pdf-viewer",showPdf:function(a,b){PDFJS.workerSrc="/LA.CO.NZ/frontend/pdfjs/pdf.worker-3daded43057f4eb47cdb7a57417a85b4.js";b&&$(window).bind("documentload",function(){b();$(window).unbind("documentload")});PDFView.initialize(a).then(webViewerInitialized)}})});
ns("la.views.billflow",function(b){b.SelectThumbnailPanel=la.views.BaseView.extend({templateName:"billflow/select_thumbnail",mixins:[la.views.mixins.Transitionable],events:{"click button.enlarge-btn":"enlargePdf","click button.download-btn":"downloadPdf","click button.cancel-btn":"notifyCancelled","click button.link-btn":"notifyLinkRequest","click button.delete-btn":"deleteDocument"},initialize:function(a){this._super(a);this.thumbnailsView=new la.views.billflow.ThumbnailsView({businessId:this.businessId,
container:this});this.addSubview(this.thumbnailsView,"#thumbnails")},downloadPdf:function(){window.location.href=this.downloadPdfUrl()},downloadPdfUrl:function(){return this.thumbnailsView.getSelectedDocument().downloadUrl(this.businessId)},enlargePdf:function(){var a=this.thumbnailsView.getSelectedDocument().pdfUrlApiPath(this.businessId);(new b.PdfEnlargeView({pdfUrlApiPath:a,container:this})).renderPdf()},deleteDocument:function(){var a=this.thumbnailsView.selectedThumbnailView;a&&a.removeThumbnail()},
notifyCancelled:function(){Backbone.trigger("billflow:thumbnailsCancelled")},notifyLinkRequest:function(){var a=this.thumbnailsView.selectedThumbnailView;a&&Backbone.trigger("billflow:notifyLinkRequest",a.model.get("id"))},sortByNewest:function(){this.thumbnailsView.collection.sortingByNewest=!0;this.thumbnailsView.trigger("billflow:resortThumbnails")},sortByOldest:function(){this.thumbnailsView.collection.sortingByNewest=!1;this.thumbnailsView.trigger("billflow:resortThumbnails")}})});
ns("la.views.billflow",function(b){b.SplitView={initialize:function(){this.events["click .close-split-view"]="removeSplitView";this.lines=this.model.get("lines")},showSplitView:function(){this.savePrefilledElements();this.renderHandlebars("billflow/split_view",this.model,{});this.renderSplitViewCustomer();this.repopulateInvoiceLines(!0);this.renderPdf();$("html").addClass("split-view-background");analytics.track("show_split_view",{env:la.Config.get("environment"),insideInTray:this.inTrayContext(),
billId:this.model.isNew()?"new":this.model.get("id"),trinityDocumentId:_.isNull(this.model.get("documentId"))?"nil":this.model.get("documentId")})},repopulateInvoiceLines:function(a){this.minLines=a?2:5;this.removeBlankInvoiceLines();this.addInvoiceLinesForEditingInvoice()},addInvoiceLinesForEditingInvoice:function(){for(;this.lines.size()<=this.minLines-1;)this.lines.add(new la.models.invoices.UnrealisedTransactionLine,{silent:!0});this.addEmptyLine()},addEmptyLine:function(a){a=_.isUndefined(a);
this.lines.every(function(a){return!a.isEmpty()})&&this.lines.add(new la.models.invoices.UnrealisedTransactionLine({}),{silent:a})},renderPdf:function(){var a=new la.views.billflow.PdfViewerView({container:this});$("#pdf").append(a.render().$el);var b=this;$.ajax({url:b.billflowDocument.pdfUrlApiPath(this.businessId),type:"GET",contentType:"application/json",dataType:"json",success:function(c){a.showPdf(c.url,function(){window.scrollTo(0,0);$("#pdf").show();b.removeSpinner()})}})},removeSpinner:function(){this.$el.find(".split-view-spinner").remove()},
removeBlankInvoiceLines:function(){var a=this.lines.filter(function(a){return a.isEmpty()});0<a.length&&this.lines.remove(a,{silent:!0})},renderSplitViewCustomer:function(){new la.views.invoices.CustomerView({el:this.$("#contactContainer"),template:"billflow/split_view_customer",businessId:this.businessId,contacts:this.contacts,model:this.model})},removeSplitView:function(){$("html").removeClass("split-view-background");this.savePrefilledElements();this.repopulateInvoiceLines(!1);la.views.bills.BillView.prototype.render.call(this);
this.renderBillflowThumbnail();this.restylePrefilledElements();this.accordion=void 0},savePrefilledElements:function(){this.prefilledElementIds=[];this.prefilledElementIds=_.map(this.$el.find(".prefilled"),function(a){return $(a).attr("id")})},restylePrefilledElements:function(){var a=this;this.prefilledElementIds&&this.prefilledElementIds.length&&_.each(this.prefilledElementIds,function(b){a.stylePrefilledElement(b)})}}});
ns("la.views.billflow",function(b){b.ThumbnailPlaceholderView=la.views.BaseView.extend({templateName:"billflow/thumbnail_placeholder",className:"thumbnail-placeholder",events:{"click .link-document-action":"onLinkDocumentClick"},onLinkDocumentClick:function(){this.container.trigger("billflow:link-document")}})});
ns("la.views.billflow",function(b){b.ThumbnailPreviewButtonsView=la.views.BaseView.extend({templateName:"billflow/thumbnail_preview_buttons",events:{"click .split-view-button":"splitViewAction","click .download-button":"downloadAction","click .cancel-button":"cancelAction","click .enlarge-button":"enlargeAction","click .pop-out-button":"popOutAction","hover .thumb-action":"showText"},initialize:function(a){this.billflowDocument=a.billflowDocument;this.businessId=a.businessId},splitViewAction:function(){this.container.trigger("billflow:splitViewAction")},
downloadAction:function(){this.container.trigger("billflow:downloadAction")},cancelAction:function(){this.container.trigger("billflow:cancelAction")},enlargeAction:function(){this.container.trigger("billflow:enlargeAction")},popOutAction:function(){var a=this.billflowDocument.pdfUrlApiPath(this.businessId);$.ajax({url:a,type:"GET",contentType:"application/json",dataType:"json",async:!1,success:this.openBillDocument})},openBillDocument:function(a){UrlUtils.openWindow(a.url)},showText:function(a){$(a.currentTarget).toggleClass("hide-text")}})});
ns("la.views.billflow",function(b){b.ThumbnailPreviewView=la.views.BaseView.extend({render:function(){this.renderHandlebars("billflow/thumbnail_preview",this.model,{thumbnailUrl:this.model.thumbnailUrl(this.businessId)});return this}})});
ns("la.views.billflow",function(b){b.ThumbnailView=la.views.BaseView.extend({initialize:function(a){this._super(a);this.listenTo(this.model,"change:badge",this.renderBadge);this.imageLoaded=!1},events:{"click .thumb":"onSelect"},activate:function(){this.$el.find(".thumb").addClass("selectable")},deactivate:function(){this.$el.find(".thumb").removeClass("selectable")},select:function(){this.$el.find(".thumb-container").addClass("selected");this.deactivate()},onSelect:function(){Backbone.trigger("billflow:carouselThumbnailClicked",
this)},removeThumbnail:function(){var a=this;this.model.destroy({success:function(b){Backbone.trigger("updateNotification");a.container.trigger("billflow:removeThumbnail",a)}})},render:function(){this.renderHandlebars("billflow/thumbnail",this.model,{thumbnailUrl:this.model.thumbnailUrl(this.businessId)});var a=this.$el.find(".thumb"),b=a.find("img"),c=this,d=function(b){a.siblings(".upload-progress-indicator").remove();a.css("opacity",1);c.imageLoaded=!0;c.renderBadge()};b.error(d);b.load(d);return this},
renderBadge:function(){var a=this.$el.find(".trinity-badge"),b=this.createHandlebarsContext(this.model,{imageLoaded:this.imageLoaded}),c=$(HandlebarsTemplates["billflow/badge"](b));a.html(c);_.delay(function(){this.imageLoaded&&c.css("opacity",1)}.bind(this),500)}})});
ns("la.views.billflow",function(b){b.ThumbnailsView=la.views.BaseView.extend({mixins:[la.views.mixins.List,la.views.mixins.ListableWithoutRemove,la.views.billflow.Carousel,la.views.billflow.EventQueue],rowView:"la.views.billflow.ThumbnailView",className:"carousel-container",initialize:function(a){this._super(a);this.collection=new la.collections.billflow.Documents([],{businessId:a.businessId});var b=this;this.eventQueue=a.eventQueue||la.views.billflow.EventQueue(this);this.eventQueueIntervalId=setInterval(function(){b.eventQueue.service()},
50);this.listenTo(Backbone,"billflow:carouselThumbnailClicked",this.eventQueue.enqueue(this.selectThumbnail));this.listenTo(Backbone,"billflow:accordionTransitionOccurred",this.handleAccordionTransition);this.listenTo(Backbone,"billflow:addThumbnail",this.eventQueue.enqueue(this.addThumbnail));this.listenTo(this,"billflow:removeThumbnail",this.eventQueue.enqueue(this.removeThumbnail));this.listenTo(this,"billflow:resortThumbnails",this.eventQueue.enqueue(this.redrawCarousel));this.listenTo(this.collection,
"billflow:displayEmptyMessage",this.eventQueue.enqueue(this.showNoThumbnailsMessage));this.listenTo(this.collection,"change",this.eventQueue.enqueue(this.updateThumbnailIcons));this.listenTo(this.collection,"add",this.eventQueue.enqueue(this.addThumbnailsFromServer));this.thumbsPerPage=7;this.hideSpinner=!0;if(a=parseInt(la.Config.get("billflowPollingInterval"),10))b.billflowPolling=setInterval(function(){var a=_.extend({remove:!1},BillflowErrorUtils.unavailableErrorHandler());b.collection.fetch(a)},
a);this.transitionEnd="transitionend webkitTransitionEnd oTransitionEnd otransitionend"},events:{pageButtonClicked:"pageButtonClicked"},onRowsRendered:function(){Backbone.trigger("billflow:showCarousel");this.renderCarousel()},extraListFetchOptions:function(){return{statusCode:{400:function(){Backbone.trigger("billflow:fetchDocumentsFailed")}}}},createDocumentAndThumbnailView:function(a){a=new la.models.billflow.BillflowDocument(a);this.collection.add(a,{silent:!0});return{el:createObject(this.rowView,
{businessId:this.businessId,model:a,collection:this.collection,container:this}).render().el,doc:a}},addThumbnailsFromServer:function(a){this.addThumbnail(a.attributes)},thumbnailPlaceholder:function(){return $('<div class="placeholder"></div>')},thumbnailAlreadyInList:function(a){return a?!!this.$el.find('.thumb[data-documentid="'+a.id+'"]').length:!1},addThumbnail:function(a){if(this.slick)if(this.thumbnailAlreadyInList(a))this.eventQueue.readyForService();else{var b=this,c=this.thumbnailPlaceholder();
c.one(this.transitionEnd,function(){$(this).unbind(b.transitionEnd);c.removeClass("placeholder");var d=b.createDocumentAndThumbnailView(a);c.html(d.el);b.updatePagingButtonState();b.updateBadge(d.doc);b.eventQueue.readyForService()});this.$el.slickGoTo(0);this.$el.slickAdd(c,0,!0);c.width(144)}else this.createDocumentAndThumbnailView(a),this.dropAndRedrawCarousel(),this.eventQueue.readyForService()},removeThumbnail:function(a){if(this.collection.size()){var b=a.$el,c=this;b.hasClass("slick-slide")||
(a=a.model.get("id"),b=this.$el.find('.slick-slide:has(.thumb[data-documentid="'+a+'"])'));b.on(this.transitionEnd,function(a){$(this).hasClass("shrink")?(b.unbind(c.transitionEnd),a=c.$el.find(".slick-slide").index(b),c.$el.slickRemove(a),0===c.collection.size()?c.showNoThumbnailsMessage():(c.updatePagingButtonState(),c.disableThumbnailActionButtons(),c.selectedThumbnailView=null,c.eventQueue.readyForService())):$(this).hasClass("fadeOut")&&$(this).addClass("shrink")});b.addClass("fadeOut")}else this.dropAndRedrawCarousel(),
this.eventQueue.readyForService()},updateThumbnailIcons:function(){var a=this;this.collection.each(function(b){a.updateBadge(b)});this.eventQueue.readyForService()},updateBadge:function(a){function b(a){if(!a.has("ocr_data"))return!1;a=_.values(a.get("ocr_data"));return a.length?!_.every(a,function(a){return null===a}):!1}var c="none";_.isNull(a.attributes.ocr_data)?c="ocrProcessing":b(a)||(c="noOcrData");a.set("badge",c)},selectThumbnail:function(a){this.selectedThumbnailView&&this.selectedThumbnailView.activate();
this.deselectAllThumbnails();a&&a.select();this.selectedThumbnailView=a;this.enableThumbnailActionButtons();this.eventQueue.readyForService()},deselectAllThumbnails:function(){$(".thumb-container").removeClass("selected")},remove:function(){void 0!==this.prevButton&&this.prevButton.remove();void 0!==this.nextButton&&this.nextButton.remove();clearInterval(this.billflowPolling);clearInterval(this.eventQueueIntervalId);this._super()},pageButtonClicked:function(a,b){b===this.prevButton?this.pagePrevious():
this.pageNext()},enableThumbnailActionButtons:function(){$(".thumbnail-action").removeAttr("disabled")},disableThumbnailActionButtons:function(){$(".thumbnail-action").attr("disabled","disabled")},resetPanel:function(){this.selectThumbnail(null);this.disableThumbnailActionButtons()},handleAccordionTransition:function(a,b){"thumbnails"===b&&this.resetPanel()},getSelectedDocument:function(){return this.selectedThumbnailView.model},redrawCarousel:function(){this.dropAndRedrawCarousel();this.eventQueue.readyForService()}})});
ns("la.views.billflow",function(b){b.UploadProgressView=la.views.BaseView.extend({className:"upload-progress-container",render:function(){this.renderHandlebars("billflow/upload_progress",this.model,this.options);return this}})});
ns("la.views.bills",function(b){b.ApplyReturnToBillView=la.views.BaseIFrameView.extend({templateName:"commons/iframe_container",initialize:function(a){this._super(a);this._setId("applyReturnToExpenseFrame");var b="/VerificationProxy?request=/JSP/SalePurchase/ApplyReturn/ApplyReturn.jsp&type=purchases";_.isUndefined(a.journalSysId)||_.isNull(a.journalSysId)||(b=b+"&journalSysId="+a.journalSysId);_.isUndefined(a.invoiceSysId)||_.isNull(a.invoiceSysId)||(b=b+"&invoiceSysId="+a.invoiceSysId);_.isUndefined(a.cardSysId)||
_.isNull(a.cardSysId)||(b=b+"&cardSysId="+a.cardSysId);this._setUrl(UrlUtils.url(b))}})});
ns("la.views.bills",function(b){b.BaseBillView=la.views.invoices.UnrealisedTransactionView.extend({feedbackQuestionId:12,initialize:function(a){this._super(a);this.modelName=_(this.model.get("type")).capitalize();this.listenTo(this.model,"change:issueDate",function(){this.showIssueDateRelatedNotification()},this);this.locked=!this._isIssueDateAfterLockedDate();this.listenTo(this.model,"change:issueDate",this.checkIfInvoiceIsLocked);this.listenTo(this.model,"saved",this.rememberNotesAndRenderActivities)},
render:function(){this.model.isNew()&&this.model.set({notes:la.BusinessSettings.getPreference("invoices",this.model.get("type")+"NoteToRemember")});this._super();this.model.isNew()||this.renderActivities();this.showIssueDateRelatedNotification();return this},renderActivities:function(){var a={businessId:this.businessId,invoiceId:this.model.get("id")},a=new la.collections.invoices.ActivitiesNew([],a);this.$("#activitiesContainer").empty().append((new la.views.invoices.ActivitiesNewView({collection:a})).el)},
rememberNotesAndRenderActivities:function(){this.$("#rememberNote").is(":checked")&&la.BusinessSettings.setPreference("invoices",this.model.get("type")+"NoteToRemember",this.model.get("notes"));this.renderActivities()},showIssueDateRelatedNotification:function(){DateUtils.isBackendDateValid(this.model.get("issueDate"))&&(this.showLockedPeriodInvoiceMessageIfRequired()||this.showHistoricalInvoiceMessageIfRequired()||this.hideFixedNotification())},showLockedPeriodInvoiceMessageIfRequired:function(){if(!this._isIssueDateAfterLockedDate()){var a=
this._getLockedDate();this.showFixedNotification(I18n.t(this.model.get("type")+"s.lockedInvoiceMessage",{lockDate:a.format("DD/MM/YYYY")}),"info",!1);return!0}return!1},showHistoricalInvoiceMessageIfRequired:function(){var a=la.BusinessSettings.get("openingBalanceDate");if(_(a).isUndefined())return!1;a=DateUtils.parseBackendDate(a);return DateUtils.parseBackendDate(this.model.get("issueDate")).isBefore(a)?(this.showFixedNotification(I18n.t(this.model.get("type")+"s.historicalInvoiceMessage",{openingBalanceDate:a.format("DD/MM/YYYY")}),
"info",!1),!0):!1},checkIfInvoiceIsLocked:function(){this.locked=!this._isIssueDateAfterLockedDate()},_isIssueDateAfterLockedDate:function(){return la.BusinessSettings.get("dataLocked")?DateUtils.parseBackendDate(this.model.get("issueDate")).isAfter(this._getLockedDate()):!0}})});
ns("la.views.bills",function(b){b.BillGridView=la.views.BaseView.extend({templateName:"invoices/bill_grid",initialize:function(a){this.options=a;this.lines=a.lines;this.allItems=this.items=a.items;this.model=a.model;this.businessId=a.businessId;this.accounts=a.accounts}})});ns("la.views.bills",function(b){b.BillsHistoryView=la.views.BaseIFrameView.extend({templateName:"commons/iframe_container",initialize:function(a){this._super(a);this._setId("expensesHistoryFrame");this._setUrl(UrlUtils.url("/VerificationProxy?request=/JSP/SalePurchase/SalePurchaseRegister/SalePurchaseRegister.jsp&type=purchases&isSalesHistory=1"))}})});
ns("la.views.invoices",function(b){b.InvoiceView=la.views.invoices.UnrealisedTransactionView.extend({mixins:[la.views.mixins.OnlineInvoiceBanner,la.views.mixins.InvoiceEntitlement],feedbackQuestionId:12,events:{"keyup #paymentTermDays":"updateDueDate","blur  #paymentTermDays":"handleEmptyPaymentTermDays"},initialize:function(a){this._super(a);this.modelName=_(this.model.get("type")).capitalize();this.invoiceEntitlementType=this.model.get("type");this.contacts=a.contacts.filteredByActiveAndType(this.model.get("recipient"),
{whitelist:[this.model.get("contactId")]});this.listenTo(this.model,"change:issueDate",function(){this.showIssueDateRelatedNotification()},this);this.locked=!this._isIssueDateAfterLockedDate();this.model.isNew()&&(this._populatePaymentOptions(),this.model.set("dueDate",this._calculateDueDate()),this._populateTemplateSettings());this._populatePaymentTermTypes();this._setupListeners();this.invoiceGridView=new la.views.invoices.UnrealisedTransactionGridView(a);this.addSubview(this.invoiceGridView,"#invoiceLinesContainer");
FeatureTagUtils.isFeatureAvailable(FeatureTag.ONLINE_PAYMENTS)?(this.paymentView=this.addSubview(new la.views.invoices.OnlinePaymentsView({invoiceModel:this.model,businessId:this.businessId}),"#online-payments-container"),this.addSubview(new la.views.invoices.OnlinePaymentsBannerView({}),"#online-payments-banner")):this.showOnlineInvoicingBanner()&&this.addSubview(new la.views.invoices.OnlineInvoicingOptInView({container:this,model:this.model,businessId:this.businessId}),"#online-invoicing")},_populatePaymentOptions:function(){var a;
a=la.Config.isAU()?new la.models.settings.invoice.PaymentOptionsAU({businessId:this.businessId}):new la.models.settings.invoice.PaymentOptionsNZ({businessId:this.businessId});a.fetch({async:!1});this.model.set("paymentTermType",a.get("paymentTermType"));this.model.set("paymentTermDays",a.get("paymentTermDays"))},_populateTemplateSettings:function(){var a;a=new la.models.settings.invoice.Template({businessId:this.businessId});a.fetch({async:!1});this.model.set("layoutType",a.get("layoutType"))},_populatePaymentTermTypes:function(){this.paymentTermTypes=
new Backbone.Collection([new Backbone.Model({value:"NO_TERMS",name:"Due on"}),new Backbone.Model({value:"INVOICE_DATE",name:"From invoice date"}),new Backbone.Model({value:"END_OF_THIS_MONTH",name:"From end of this month"})],{comparator:!1})},_setupListeners:function(){this.listenTo(this.model,"saved",this.rememberNotesAndRenderActivities);this.listenTo(this.model,"change:issueDate",this.checkIfInvoiceIsLocked);this.listenTo(this.model,"change:issueDate",this.issueDateChanged);this.listenTo(this.model,
"change:dueDate",this._dueDateChanged);this.listenTo(this.model,"change:paymentTermType",this._enableOrDisablePaymentTermDays);this.listenTo(this.model,"change:paymentTermType",this._updateDueDateOnPaymentTermTypeChanged)},render:function(){this.model.isNew()&&this.model.set({notes:la.BusinessSettings.getPreference("invoices",this.model.get("type")+"NoteToRemember")});this._super();this.model.isNew()?this._enableOrDisablePaymentTermDays():this.renderActivities();this.showIssueDateRelatedNotification();
this.renderCustomer();this.renderButtons();this.model.isNew()&&this.checkEntitlementLimits();return this},renderCustomer:function(){this.customerView=new la.views.invoices.CustomerView({el:this.$("#contactContainer"),businessId:this.businessId,contacts:this.contacts,model:this.model})},renderButtons:function(){this.buttonsView=new la.views.invoices.ButtonView({model:this.model,el:this.$("#buttonsContainer"),feedbackQuestionId:this.feedbackQuestionId,locked:this.locked,paid:this.paid,businessId:this.businessId});
this.listenTo(this.buttonsView,"invoiceSaved",this._savePaymentOptions)},_savePaymentOptions:function(){FeatureTagUtils.isFeatureAvailable(FeatureTag.ONLINE_PAYMENTS)&&this.paymentView.savePaymentMethodsForInvoice(this.businessId,this.model)},_calculateDueDate:function(){var a=this.model.get("issueDate"),b=this.model.get("paymentTermType"),c=this.model.get("paymentTermDays");return la.views.invoices.InvoiceDueDateCalculator.calculate(a,b,c)},_updateDueDateOnPaymentTermTypeChanged:function(){"NO_TERMS"!==
this.model.get("paymentTermType")&&this.model.set("dueDate",this._calculateDueDate(),{validate:!0})},_enableOrDisablePaymentTermDays:function(){"NO_TERMS"===this.model.get("paymentTermType")?(this.model.set("paymentTermDays",void 0,{validate:!0}),this._disablePaymentTermDays()):("INVOICE_DATE"===this.model.get("paymentTermType")?_.isBlank(this.model.get("paymentTermDays"))&&this.model.set("paymentTermDays",30,{validate:!0}):_.isBlank(this.model.get("paymentTermDays"))&&this.model.set("paymentTermDays",
20,{validate:!0}),this._enablePaymentTermDays())},_disablePaymentTermDays:function(){this.disableField(this.$("#paymentTermDays"));this.$("#payment-term-days-text").addClass("text-muted");this.$("label[for='paymentTermDays']").addClass("text-muted")},_enablePaymentTermDays:function(){this.enableField(this.$("#paymentTermDays"));this.$("#payment-term-days-text").removeClass("text-muted");this.$("label[for='paymentTermDays']").removeClass("text-muted")},disableField:function(a){a.attr("disabled","disabled");
a.parents(".form-control-wrapper").first().attr("data-disabled",!0)},enableField:function(a){a.removeAttr("disabled","disabled");a.parents(".form-control-wrapper").first().removeAttr("data-disabled")},_dueDateChanged:function(){this._calculateDueDate()!==this.model.get("dueDate")&&this.model.set("paymentTermType","NO_TERMS")},updateDueDate:function(a){a=$(a.target).val();_(a).isBlank()||this.model.set("dueDate",this._calculateDueDate(),{validate:!0})},handleEmptyPaymentTermDays:function(a){a=$(a.target).val();
_(a).isBlank()&&(this.model.set("paymentTermDays",0),this.model.set("dueDate",this._calculateDueDate(),{validate:!0}))},issueDateChanged:function(){DateUtils.isBackendDateValid(this.model.get("issueDate"))&&(void 0===this._calculateDueDate()?this.model.validate("dueDate"):this.model.set("dueDate",this._calculateDueDate(),{validate:!0}))},renderActivities:function(){var a={businessId:this.businessId,invoiceId:this.model.get("id")},a=new la.collections.invoices.ActivitiesNew([],a);this.$("#activitiesContainer").empty().append((new la.views.invoices.ActivitiesNewView({collection:a})).el)},
rememberNotesAndRenderActivities:function(){this.$("#rememberNote").is(":checked")&&la.BusinessSettings.setPreference("invoices",this.model.get("type")+"NoteToRemember",this.model.get("notes"))},showIssueDateRelatedNotification:function(){DateUtils.isBackendDateValid(this.model.get("issueDate"))&&(this.showLockedPeriodInvoiceMessageIfRequired()||this.showHistoricalInvoiceMessageIfRequired()||this.hideFixedNotification())},showLockedPeriodInvoiceMessageIfRequired:function(){if(!this._isIssueDateAfterLockedDate()){var a=
this._getLockedDate();this.showFixedNotification(I18n.t(this.model.get("type")+"s.lockedInvoiceMessage",{lockDate:a.format("DD/MM/YYYY")}),"info",!1);return!0}return!1},showHistoricalInvoiceMessageIfRequired:function(){var a=la.BusinessSettings.get("openingBalanceDate");if(_(a).isUndefined())return!1;a=DateUtils.parseBackendDate(a);return DateUtils.parseBackendDate(this.model.get("issueDate")).isBefore(a)?(this.showFixedNotification(I18n.t(this.model.get("type")+"s.historicalInvoiceMessage",{openingBalanceDate:a.format("DD/MM/YYYY")}),
"info",!1),!0):!1},checkIfInvoiceIsLocked:function(){this.locked=!this._isIssueDateAfterLockedDate()},_isIssueDateAfterLockedDate:function(){return la.BusinessSettings.get("dataLocked")?DateUtils.parseBackendDate(this.model.get("issueDate")).isAfter(this._getLockedDate()):!0},remove:function(){this.buttonsView&&this.buttonsView.remove();this.customerView&&this.customerView.remove();this._super()}})});
ns("la.views.bills",function(b){b.BillView=la.views.bills.BaseBillView.extend({mixins:[la.views.billflow.SplitView,la.views.billflow.OcrPrefiller,la.views.mixins.UnrealisedTransactionLines,la.views.mixins.UnrealisedTransactionLineItems,la.views.mixins.UnrealisedTransactionLinesDragAndDrop,la.views.mixins.InvoiceEntitlement],initialize:function(a){this._super(a);this.contacts=a.contacts.filteredByActiveAndType(this.model.get("recipient"),{whitelist:[this.model.get("contactId")]});this.invoiceEntitlementType=
this.model.get("type");this.listenTo(this.model,"saved",this.updateNotificationBadge);this.listenTo(this.model,"change:documentId",this.setUpBillFlowThumbnail);this.listenTo(this.model,"saved",this.updateContact);this.listenTo(this.model,"request",this.sendSavedMetrics);this.listenTo(this.model,"destroy",this.sendDestroyedMetrics);this.listenTo(this,"billflow:link-document",this.showThumbnails);this.listenTo(Backbone,"billflow:notifyLinkRequest",this.updateExpense);this.listenTo(Backbone,"billflow:thumbnailsCancelled",
this.hideThumbnails);this.listenTo(Backbone,"billflow:fetchDocumentsFailed",this.onFetchDocumentsFailed);this.listenTo(Backbone,"billflow:showCarousel",this.showCarousel);this.listenTo(this,"billflow:cancelAction",this.deselectThumbnail);this.listenTo(this,"billflow:cancelAction",this.clearOcrData);this.listenTo(this,"billflow:enlargeAction",this.enlargeThumbnail);this.listenTo(this,"billflow:downloadAction",this.downloadDocument);this.listenTo(this,"billflow:splitViewAction",this.showSplitView);
this.listenTo(this,"billflow:splitViewAction",this.renderLines);this.listenTo(this,"billflow:splitViewAction",this.restylePrefilledElements);this.listenTo(this,"billflow:splitViewAction",this._configureDragAndDrop);this.listenTo(Backbone,"billflow:updateContact",this.contactChanged);this.addSubview(new la.views.bills.BillGridView(a),"#invoiceLinesContainer")},render:function(){this._super();this.model.id?this.updateTotalDetailsInitialLoad():this.updateTotalDetailsAfterChange();this.renderLines();
this.renderPaymentTerms();this.setUpBillFlowThumbnail();this.renderCustomer();this.renderButtons();this.model.isNew()&&this.checkEntitlementLimits();return this},renderCustomer:function(){new la.views.invoices.CustomerView({el:this.$("#contactContainer"),businessId:this.businessId,contacts:this.contacts,model:this.model})},renderButtons:function(){this.buttonsView=new la.views.invoices.ButtonView({model:this.model,el:this.$("#buttonsContainer"),feedbackQuestionId:this.feedbackQuestionId,locked:this.locked,
paid:this.paid,businessId:this.businessId})},onDomReady:function(){Backbone.trigger("billflow:billView:onDomReady")},remove:function(){this._super();$("html").removeClass("split-view-background")},renderPaymentTerms:function(){new la.views.invoices.PaymentTermsView({model:this.model,el:this.$("#paymentTermsContainer"),preferences:{key:"invoices",value:this.model.get("type")+"ExpirationTerms"}})},contactChanged:function(a,b){var c=$("#businessNumber",b.$el);c.hide();if(this.toUpdateAbn()&&!a.hasBusinessNumber()&&
!this.contactPrefilled){var d=this.billflowDocument.get("ocr_data").businessNumber;a.setBusinessNumber(d,{validate:!0});a.isValid()&&a.getBusinessNumber()&&a.getBusinessNumber().trim()&&(c.find(".businessNumberLabel").html(la.Config.isNZ()?"IRD":"ABN"),c.find(".value").addClass("prefilled").html(a.getBusinessNumber()),c.show())}},sendSavedMetrics:function(){var a=!1;this.toUpdateAbn()&&this.billflowDocument.get("ocr_data")&&(a=parseFloat(this.billflowDocument.get("ocr_data").invoiceAmount/100)===
this.model.get("total"));this.model.isNew()?analytics.track("bill_created",{env:la.Config.get("environment"),documentAttached:!_.isUndefined(this.model.get("documentId")),billId:"new",totalWasPrefilled:a,insideInTray:this.inTrayContext(),billTotal:this.model.get("total"),trinityDocumentId:_.isUndefined(this.model.get("documentId"))?"nil":this.model.get("documentId")}):this.model.get("needToSendDocumentMetrics")&&analytics.track("bill_link_existing",{env:la.Config.get("environment"),documentAttached:!_.isUndefined(this.model.get("documentId")),
billId:this.model.id,smartMatch:!1,totalWasPrefilled:a,insideInTray:this.inTrayContext(),billTotal:this.model.get("total"),trinityDocumentId:_.isUndefined(this.model.get("documentId"))?"nil":this.model.get("documentId")});this.model.set("needToSendDocumentMetrics",!1)},sendDestroyedMetrics:function(){analytics.track("bill_deleted",{env:la.Config.get("environment"),documentAttached:!_.isNull(this.model.get("documentId")),billId:this.model.id,insideInTray:this.inTrayContext(),billTotal:this.model.get("total"),
trinityDocumentId:_.isNull(this.model.get("documentId"))?"nil":this.model.get("documentId")})},toUpdateAbn:function(){return this.billflowDocument&&this.billflowDocument.get("ocr_data")},updateContact:function(){if(this.toUpdateAbn()){var a=new la.models.Contact({id:this.model.get("contactId")}),b=this.billflowDocument.get("ocr_data").businessNumber,c=this.billflowDocument.get("id"),d=this.model.id;a.fetch({success:function(){this.hasBusinessNumber()||(this.setBusinessNumber(b,{validate:!0}),this.isValid()&&
(this.save(),analytics.track("supplier_updated_with_ocr",{env:la.Config.get("environment"),supplierId:this.id,supplierName:this.get("name"),supplierBusinessNumber:this.getBusinessNumber(),billId:d,trinityDocumentId:c})))}})}},setUpBillFlowThumbnail:function(){this.model.get("documentId")?(this.billflowDocument=new la.models.billflow.BillflowDocument({id:this.model.get("documentId")}),this.billflowThumbnailPreviewView=new la.views.billflow.ThumbnailPreviewView({model:this.billflowDocument,businessId:this.businessId}),
this.billflowThumbnailPreviewButtonsView=new la.views.billflow.ThumbnailPreviewButtonsView({model:{cancel:!0,enlarge:!0,splitView:!0,popOut:!0,download:!0},billflowDocument:this.billflowDocument,businessId:this.businessId,container:this}),this.listenTo(this.billflowDocument,"change",this.renderBillflowThumbnail),this.listenTo(this.billflowDocument,"change",this.prefillWithOcrData),this.billflowDocument.fetch()):this.renderBillflowThumbnailPlaceholder()},renderBillflowThumbnail:function(){this.hideThumbnails();
this.$("#billflow_thumbnail").html(this.billflowThumbnailPreviewView.render().el);this.$(".thumbnail-button-panel").html(this.billflowThumbnailPreviewButtonsView.render().el)},renderBillflowThumbnailPlaceholder:function(){var a=new la.views.billflow.ThumbnailPlaceholderView({container:this});this.$("#billflow_thumbnail").html(a.render().el)},showThumbnails:function(){this.inTrayContext()||(this.accordion?this.showCarousel():(this.makeCarousel(),this.havePreviousDocument()&&this.addDocumentToCarousel(this.model.previous("documentId"))))},
makeCarousel:function(){this.accordion=new la.views.billflow.AccordionView({businessId:this.businessId,model:{inTrayContext:this.inTrayContext()},container:this});this.$(".billflow_thumbnails").html(this.accordion.render().el);this.accordion.onDomReady()},showCarousel:function(){this._isCarouselVisible()||$(".billflow_thumbnails").slideDown(800)},_isCarouselVisible:function(){return $(".billflow_thumbnails").is(":visible")},removeCarousel:function(){this.accordion.$el.remove();this.accordion.remove();
this.accordion=void 0},onFetchDocumentsFailed:function(){this.removeCarousel();BillflowErrorUtils.showErrorMessage()},havePreviousDocument:function(){var a=this.model.previous("documentId");return!_.isNull(a)&&!_.isUndefined(a)},addDocumentToCarousel:function(a){(new la.models.billflow.BillflowDocument({id:a})).fetch({success:function(a){this.accordion.selectThumbnailPanel.addNewDocument(a.attributes);this.accordion.selectThumbnailPanel.addDocumentsToCarousel()}.bind(this)})},deselectThumbnail:function(){var a=
this.model.get("documentId");this.inTrayContext()?UrlUtils.redirect(la.breadcrumb.getPreviousUrl()):(this.model.unset("documentId"),this.model.id&&this.model.isValid()&&this.saveAndCallback({model:this.model}));analytics.track("bill_unlink",{env:la.Config.get("environment"),trinityDocumentId:a,insideInTray:this.inTrayContext(),billId:this.model.isNew()?"new":this.model.get("id")})},enlargeThumbnail:function(){var a=this.billflowDocument.pdfUrlApiPath(this.businessId);(new la.views.billflow.PdfEnlargeView({pdfUrlApiPath:a,
container:this})).renderPdf()},downloadDocument:function(){window.location.href=this.billflowDocument.downloadUrl(this.businessId)},linesUnfilled:function(){return _.every(this.model.get("lines").models,function(a){return a.isEmpty()})},inTrayContext:function(){return"newBillPanel"===this.el.parentElement.id},hideThumbnails:function(){this._isCarouselVisible()&&$(".billflow_thumbnails").slideUp(800)},updateNotificationBadge:function(){Backbone.trigger("updateNotification")},updateExpense:function(a){this.model.set({documentId:a});
this.model.set({needToSendDocumentMetrics:!0})}})});ns("la.views.bills",function(b){b.PaymentAddView=la.views.BaseIFrameView.extend({templateName:"commons/iframe_container",initialize:function(a){this._super(a);this._setId("expensesPaymentNewFrame");var b="/VerificationProxy?request=/JSP/SalePurchase/ReceivePayInvoice/ReceivePayInvoice.jsp&type=purchases";_.isUndefined(a.cardSysId)||_.isNull(a.cardSysId)||(b=b+"&cardSysId="+a.cardSysId);this._setUrl(UrlUtils.url(b))}})});
ns("la.views.bills",function(b){b.PaymentDetailView=la.views.BaseIFrameView.extend({templateName:"commons/iframe_container",initialize:function(a){this._super(a);this._setId("expensesPaymentDetailFrame");this._setUrl(UrlUtils.url("/VerificationProxy?request=/JSP/SalePurchase/ReceivePayInvoice/ReceivePayInvoice.jsp&type=purchases&journalSysId="+a.journalSysId))}})});
ns("la.views.bills",function(b){b.PaymentEditView=la.views.BaseIFrameView.extend({templateName:"commons/iframe_container",initialize:function(a){this._super(a);this._setId("expensesPaymentEditFrame");this._setUrl(UrlUtils.url("/VerificationProxy?request=/JSP/SalePurchase/ReceivePayInvoice/ReceivePayInvoice.jsp&type=purchases&journalSysId="+a.journalSysId+"&edit=true"))}})});
ns("la.views.bills",function(b){b.ProcessReturnView=la.views.BaseIFrameView.extend({templateName:"commons/iframe_container",initialize:function(a){this._super(a);this._setId("expensesProcessReturnFrame");this._setUrl(UrlUtils.url("/VerificationProxy?request=/JSP/SalePurchase/ProcessReturnCredit/ProcessReturnCredit.jsp&type=purchases"))}})});
ns("la.views.bills",function(b){b.RefundFromSupplierView=la.views.BaseIFrameView.extend({templateName:"commons/iframe_container",initialize:function(a){this._super(a);this._setId("refundFromSupplierViewFrame");var b="/VerificationProxy?request=/JSP/SalePurchase/WriteRefund/WriteRefund.jsp&type=purchases";_.isUndefined(a.journalSysId)||_.isNull(a.journalSysId)||(b=b+"&journalSysId="+a.journalSysId);_.isUndefined(a.invoiceSysId)||_.isNull(a.invoiceSysId)||(b=b+"&invoiceSysId="+a.invoiceSysId);_.isUndefined(a.cardSysId)||
_.isNull(a.cardSysId)||(b=b+"&cardSysId="+a.cardSysId);this._setUrl(UrlUtils.url(b))}})});ns("la.views.bills",function(b){b.ReturnAddView=la.views.BaseIFrameView.extend({templateName:"commons/iframe_container",initialize:function(a){this._super(a);this._setId("expensesReturnNewFrame");this._setUrl(UrlUtils.url("/VerificationProxy?request=/JSP/SalePurchase/EnterSale/EnterSale.jsp&type=purchaseReturn"))}})});
ns("la.views.bills",function(b){b.ReturnEditView=la.views.BaseIFrameView.extend({templateName:"commons/iframe_container",initialize:function(a){this._super(a);this._setId("expensesReturnEditFrame");var b="/VerificationProxy?request=/JSP/SalePurchase/EnterSale/EnterSale.jsp&type=purchaseReturn&journalSysId="+a.journalSysId;_.isUndefined(a.printInvoice)||_.isNull(a.printInvoice)||(b=b+"&printInvoice="+a.printInvoice);_.isUndefined(a.emailSentSuccessfully)||_.isNull(a.emailSentSuccessfully)||(b=b+"&emailSentSuccessfully="+
a.emailSentSuccessfully);_.isUndefined(a.emailTo)||_.isNull(a.emailTo)||(b=b+"&emailTo="+a.emailTo);this._setUrl(UrlUtils.url(b))}})});ns("la.views.business",function(b){b.BusinessAddressesView=la.views.commons.AddressesView.extend({id:"businessAddressView",addPostalAddress:function(){this.model.set("postalAddress",new la.models.business.BusinessValidatedAddress);this.postalAddressView=this.addPostalAddressView();this.renderSubviews(this.postalAddressView)}})});
ns("la.views.business",function(b){b.BusinessDetailsView=la.views.BaseView.extend({templateName:"business/business_details",mixins:[la.views.mixins.TabbedView],initialize:function(a){this._super(a);this.addSubview(new la.views.business.DetailsView({model:a.model,primaryContactCandidates:a.primaryContactCandidates}),"#business-details-layout-container");FeatureTagUtils.isFeatureAvailable("INCOME_ALLOCATION")&&this.addSubview(new la.views.business.IncomeAllocationView({businessId:a.model.id}),"#income-allocation-container")}})});
ns("la.views.business",function(b){b.DetailsView=la.views.ValidatedFormView.extend({events:{"click #saveBusinessDetails":"save"},initialize:function(a){this.businessId=this.model.get("id");this.addressesView=this.addSubview(new la.views.business.BusinessAddressesView({addressTemplate:"business/address",model:this.model,container:this}),".addresses");this.addSubview(new la.views.commons.OnboardingNavigationView({model:la.models.commons.OnboardingNavigation.BusinessDetails}),"#onboarding-navigation-container");
var b=DateUtils.getAllMonthlyPeriods();this.financialYearAllPeriods=b.map(function(a,d){return{description:a.start+" to "+a.end,monthOfFinancialYearEndId:0===d?b.length:d}},this);this.primaryContactCandidates=a.primaryContactCandidates;this.model.set("showPrimaryContact",0<this.primaryContactCandidates.size());this.updateDataLocked();this.listenTo(this.model,"change:lockDataDate",this.updateDataLocked);this.listenTo(this.model,"change:dataLocked",this.updateLockDataDate);this.listenTo(this.model,
"change:abn",this.showOrHideAbnBranch);_.bindAll(this)},render:function(){la.views.business.DetailsViewModelCleanup.clean(this.model);this.renderHandlebars("business/details",this.model,{simpleOpeningBalanceDate:DateUtils.backendStringToFrontend(this.model.get("openingBalanceDate")),financialYearAllPeriods:this.financialYearAllPeriods});this.renderSubviews();this.showOrHideAbnBranch();this.toggleSuperAlertBox();return this},toggleSuperAlertBox:function(){"true"===window.top.location.href.split("show-alert=")[1]&&
this.$("div.super-setup-alert").removeClass("hidden")},isValid:function(){return this.model.isValid()&&this.addressesView.isValid()},showOrHideAbnBranch:function(){this.model.get("abn")&&this.$(".form-group:has(#abnBranch)").toggle(9!==this.model.get("abn").length)},save:function(){var a=this;this.model.get("showPrimaryContact")&&this.model.set("primaryContactUserId",this.$("#primaryContactUserId").val());this.saveAndCallback({message:"Business details saved",scrollToMessage:!0,success:function(){la.BusinessSettings.updateBusinessSettings(a.businessId,
!0);FeatureTagUtils.isFeatureAvailable("INCOME_ALLOCATION")&&(window.currentComponent&&window.currentComponent.remove(),la.routers.helpers.IaHelper.renderIA(a.businessId,document.getElementById("income-allocation-container")))}})},updateDataLocked:function(){var a=!_.isEmpty(this.model.get("lockDataDate"));this.model.get("dataLocked")!==a&&(this.$("#dataLocked").prop("checked",a),this.model.set("dataLocked",a,{validate:!0}))},updateLockDataDate:function(){this.model.get("dataLocked")||_.isEmpty(this.model.get("lockDataDate"))||
(this.model.set("lockDataDate",null,{validate:!0}),this.$("[name=lockDataDate]").val(""))}})});ns("la.views.business",function(b){b.DetailsViewModelCleanup={clean:function(a){"My Business"===a.get("businessName")&&a.unset("businessName");"Business"===a.get("contactFirstName")&&a.unset("contactFirstName");"Buddy"===a.get("contactLastName")&&a.unset("contactLastName")}}});
ns("la.views.business",function(b){b.IncomeAllocationView=Backbone.View.extend({initialize:function(a){this.businessId=a.businessId},onDomReady:function(){la.routers.helpers.IaHelper.loadIAComponent(this.businessId,document.getElementById("income-allocation-container"))}})});
ns("la.views.businesses",function(b){b.AddBusinessView=la.views.ValidatedFormView.extend({mixins:[la.views.mixins.Slidable,la.views.mixins.ResettingView],id:"addBusinessForm",className:"rowForm",templateName:"businesses/add_business",focusElementId:"businessName",events:{"click #addButton":"addBusiness"},initialize:function(a){_.bindAll(this);this.container=a.container;this.successCallback=a.successCallback;this.model=new la.models.businesses.AddBusiness({email:la.CurrentUserDetails.get("email"),
firstName:la.CurrentUserDetails.get("firstName"),lastName:la.CurrentUserDetails.get("lastName")});this.businessTypes=new Backbone.Collection([new Backbone.Model({value:"",name:""}),new Backbone.Model({value:"170",name:"I sell products"}),new Backbone.Model({value:"180",name:"I sell services"}),new Backbone.Model({value:"190",name:"I sell products & services"}),new Backbone.Model({value:"200",name:"I work in building & construction"}),new Backbone.Model({value:"210",name:"I work in agriculture"})],
{comparator:!1});this.fetchProductOptions()},addBusiness:function(){this.sendEventToDatalayerOnce();this.saveAndCallFunction(this.hideAndCallSuccessCallback,{message:"Business added."})},hideAndCallSuccessCallback:function(a){this.hide();this.successCallback&&this.successCallback(a)},afterShown:function(){this.hideProductSelection();this.setFocus()},sendEventToDatalayerOnce:function(){this.preactivated||(this.preactivated=!0,GoogleTagManagerUtils.pushToDataLayer({conversion_type:"preactivation",event:"conversionEvent",
uid:la.CurrentUserDetails.get("ssoId")||null}))},fetchProductOptions:function(){this.productOptions=new Backbone.Collection;this.productOptions.url=UrlUtils.anonymousApiUrl("/products/payroll");this.productOptions.fetch()},hideProductSelection:function(){this.productOptions&&1!==this.productOptions.length||this.$(".product-select").hide()}})});FrontendNew=FrontendNew||{};
ns("la.views.admin",function(b){b.BanklinkConnectedLedgerMigrationView=la.views.ReactView.extend({initialize:function(a){this._super(a);this.reactLib=FrontendNew;this.component=FrontendNew.banklinkConnectedLedgerMigrationPage;this.params={businessId:a.businessId,businessName:la.BusinessSettings.get("businessName")}}})});ns("la.views.businesses",function(b){b.BusinessListView=la.views.BaseView.extend({mixins:[la.views.mixins.TableContainerView],templateName:"businesses/business_list",tableViewName:"la.views.businesses.BusinessTableView"})});
ns("la.views.businesses",function(b){b.SelectBusinessRadioListContainerView=la.views.BaseView.extend({mixins:[la.views.mixins.TableContainerView],templateName:"businesses/select_business_radio_list",tableViewName:"la.views.businesses.SelectBusinessRadioListView",getSelectedOption:function(){return _.find(this.collection.models,function(a){return!!a.get("selected")})}})});ns("la.views.businesses",function(b){b.BusinessTableHeaderView=la.views.commons.TableHeaderView.extend({templateName:"businesses/business_table_header"})});
ns("la.views.businesses",function(b){b.BusinessTableRowView=la.views.commons.TableRowView.extend({templateName:"businesses/business_table_row"})});ns("la.views.businesses",function(b){b.BusinessTableView=la.views.commons.SortableTableView.extend({headerView:"la.views.businesses.BusinessTableHeaderView",rowView:"la.views.businesses.BusinessTableRowView"})});
ns("la.views.businesses",function(b){b.SelectBusinessRadioListView=la.views.commons.TableView.extend({className:"table-alt table-hover table-bottom-border",rowView:"la.views.businesses.SelectBusinessRadioListRowView",initialize:function(a){this.options=a||{};this._super(a)}})});
ns("la.views.businesses",function(b){b.SelectBusinessRadioListRowView=la.views.commons.TableRowView.extend({templateName:"businesses/select_business_radio_row",events:{click:"_selectMe"},initialize:function(a){this._super(a)},_selectMe:function(){this.$("input:radio[name=businessSelection]").prop("checked",!0);this.$el.siblings(".selected").removeClass("selected");this.$el.addClass("selected");this.model.collection.models.forEach(function(a){a.set("selected",!1)});this.model.set("selected",!0)}})});
ns("la.views.businesses",function(b){b.SwitchBusinessView=la.views.BaseView.extend({id:"switchBusinessView",mixins:[la.views.mixins.Searchable],className:"businesses",templateName:"businesses/switch_business",events:{"click #addNewBusiness":"showAddNewBusinessForm"},initialize:function(a){this._super(a);this.autoRedirect=a.autoRedirect;this.model=new Backbone.Model;this.collection=new la.collections.businesses.BusinessesPager;this.listenTo(this.collection,"sync",this._collectionLoaded);this.addSubview(new la.views.businesses.BusinessListView({collection:this.collection}),
"#businessListContainer")},render:function(){this._super();this.showSpinner(!0);if("CANCELLED"===la.PreselectBusiness.attributes.serviceAccountStatus){var a=la.PreselectBusiness.attributes.businessName,b=la.Config.get("contactUsUrl");la.notification.showFixedNotification("<b>"+a+" has been cancelled</b><br/>It looks like the subscription for "+a+" has been cancelled, so we'll remove this business from the list.<br/>Want to resubscribe? <a class='alert-link' href='"+b+"' target='_blank'>Give our support team a call</a>.",
"warning")}return this},_collectionLoaded:function(){if(this.autoRedirect&&1===this.collection.length){var a=this.collection.models[0];"SME"===a.get("type")?UrlUtils.navigateToRoute(a.get("id"),"/home"):this.handleNavigateForAdvisor(a)}else this.showSpinner(!1),0===this.collection.length&&(this.sendEventToDatalayerOnce(),this.showAddNewBusinessForm())},handleNavigateForAdvisor:function(a){FeatureTagUtils.isFeatureAvailable(FeatureTag.PARTNER_CLEANUP_VALIDATE_PARTNER)&&_.isBlank(a.get("myobCrmId"))?
UrlUtils.navigateToRoute(a.get("id"),"/advisor/verify"):UrlUtils.navigateToRoute(a.get("id"),"/advisor")},showAddNewBusinessForm:function(){this.addBusinessView=this.addBusinessView||new la.views.businesses.AddBusinessView({container:this.$("#pageContentHeader"),successCallback:function(a){store.set("activated_business_id",a.get("id"));this.collection.fetch()}.bind(this)});this.addBusinessView.show()},showSpinner:function(a){this.$("#loadingSpinner").toggle(a);this.$("#page").toggle(!a)},sendEventToDatalayerOnce:function(){this.preregistered||
(this.preregistered=!0,GoogleTagManagerUtils.pushToDataLayer({event:"view_change",view:"preregister",uid:la.CurrentUserDetails.get("ssoId")||null}))}})});
ns("la.views.contacts",function(b){b.ContactEmailListView=la.views.BaseView.extend({initialize:function(a){_.bindAll(this);this._super(a);this.model=a.collection;this.listenTo(this.model,"change",this.automaticAddEmptyRow);this.listenTo(this.model,"add",this.renderRows);this.listenTo(this.model,"remove",this.renderRows);this.addEmptyEmailToList()},render:function(){return this.renderRows()},renderRows:function(){this.$el.empty();this.model.each(this.renderRow);return this},renderRow:function(a){a=
new la.views.contacts.ContactEmailView({model:a,collection:this.model,container:this});this.$el.append(a.render().$el)},addEmptyEmailToList:function(){var a=new la.models.ContactEmail({additionalEmail:""});this.model.add(a,{silent:!0});return a},automaticAddEmptyRow:function(){0!==this.$(".form-group:last input").val().length&&this.renderRow(this.addEmptyEmailToList())}})});
ns("la.views.contacts",function(b){b.ContactEmailView=la.views.BaseView.extend({mixins:[la.views.mixins.Validatable],templateName:"contacts/contact_email",events:{"keyup input":"_add","click i#delete":"onRemove"},initialize:function(a){this._super(a);this.options=this.options||{};this.collection=a.collection;this.index=a.index;Backbone.Validation.bind(this)},_add:function(){this.collection.trigger("change")},onRemove:function(){1<this.collection.size()?this.collection.remove(this.model):this.model.set("additionalEmail",
"",{validate:!0})}})});
ns("la.views.contacts",function(b){b.ContactTableHeaderView=la.views.commons.TableHeaderView.extend({className:"sortable",initialize:function(){this.listenTo(this.collection,"reset",this.setSelectAll);this.listenTo(this.collection,"change:selected",this.setSelectAll)},render:function(){this.$el.html(HandlebarsTemplates["contacts/contact_header"]({}));return this},setSelectAll:function(){this.$("#selectAll").attr("checked",this.collection.isAllSelected())}});b.ContactRowView=la.views.BaseView.extend({tagName:"tr",
templateName:"contacts/contact_row",events:{"change input":"updateSelected"},initialize:function(){this.listenTo(this.model,"change",this.render)},updateSelected:function(a){this.model.set({selected:$(a.target).is(":checked")},{silent:!0});this.model.trigger("change:selected")}});b.ContactTableView=la.views.commons.SortableTableView.extend({noRecordMessage:"There are no contacts.",headerView:"la.views.contacts.ContactTableHeaderView",rowView:"la.views.contacts.ContactRowView"});b.ContactListView=
la.views.ListView.extend({events:{"keyup #search":"filter","change #filter":"filter","click #createButton":"navigateToCreatePage","change #selectAll":"toggleSelectAll","click #destroyAll":"showDeleteContactsDialog","click #reportable":"updateReportable"},initialize:function(a){this.render()},createHandlebarsContext:function(a,b){var c=this._super(a,b);c.reportable=this.isReportable();return c},isReportable:function(){return la.Config.isAU()&&la.BusinessSettings.get("businessReportable")},render:function(){this.renderHandlebars("contacts/list_contacts");
this.tableView=(new b.ContactTableView({collection:this.collection,businessId:this.businessId,container:this})).render();this.$("#table").append(this.tableView.$el);this.paginatorView=new PaginatorView({collection:this.collection,el:this.$("#pagination"),container:this});this.disableForm();return this},onDomReady:function(){var a=this;this.collection.fetch({success:function(){a.filter();a.enableForm()},silent:!0});this._super()},filter:function(){var a=[],b=$("#filter").find("option:selected").val();
"Active"===b?a.push({field:"active",type:"equalTo",value:!0}):"Inactive"===b?a.push({field:"active",type:"equalTo",value:!1}):"Other"===b||"Owner"===b?a.push({field:"type",type:"equalTo",value:b}):"Reportable"===b?a.push({field:"reportable",type:"equalTo",value:!0}):"*"!==b&&a.push({field:"type",type:"pattern",value:new RegExp("("+b+"|Customer & Supplier)","ig")});var c=$("#search").val();_.isBlank(c)||a.push({field:"searchableField",type:"function",value:function(a){return _.str.contains(a.toLowerCase(),
c.toLowerCase())}});this.collection.setFieldFilter(a)},navigateToCreatePage:function(){UrlUtils.navigateToRoute(this.businessId,"/contacts/new")},toggleSelectAll:function(){var a=this.$("#selectAll").is(":checked");this.collection.each(function(b){b.set({selected:a},{silent:!0}).trigger("change")})},updateReportable:function(){var a=this.collection;0===a.selectedCount()?this.showInformationDialog(I18n.t("contacts.markReportableTitle"),["Please select a contact."]):0===a.selectedReportableContactCount()?
(this.showInformationDialog(I18n.t("contacts.markReportableTitle"),[I18n.t("contacts.reportableNonSupplier")]),this.collection.removeSelectedAttribute()):this.processReportable()},showDeleteContactsDialog:function(){var a=this,b=a.collection,c=b.selectedCount(),d=b.selectedDeletableContactCount(),f=a.businessId,g=this.createMessagesForDialog(c,d);0===c||0===d?this.showInformationDialog(I18n.t("contacts.deleteDialogTitle"),g):this.confirmAndAction({title:I18n.t("contacts.deleteDialogTitle"),messages:g,
yesAction:function(){b.removeSelected(f,function(){a.confirmationDialog.hide();a.showNotification(I18n.t("itemsDeletedNotification",{count:d,item:"contact"}));b.trigger("sortOrFilter")},function(){a.confirmationDialog.hide()})}})},processReportable:function(){var a=this,b=a.collection;b.selectedReportableContactCount()<b.selectedCount()?this.showDialog({title:I18n.t("contacts.markReportableTitle"),messages:[I18n.t("contacts.reportableNonSupplier")],buttonOK:!0,okAction:function(){a.confirmationDialog.hide();
a.markSelectedAsReportable()}}):this.markSelectedAsReportable()},markSelectedAsReportable:function(){var a=this,b=this.collection;this.showDialog({title:I18n.t("contacts.markReportableTitle"),messages:[I18n.t("processingMessage")],minimumShowTime:800,afterHide:function(){a.showNotification(I18n.t("contactsMarkedReportableNotification",{count:b.selectedReportableContactCount()}));a.collection.removeSelectedAttribute();a.$('th [type="checkbox"]').removeAttr("checked")},afterShow:function(){b.reportSelected(a.businessId,
function(){a.confirmationDialog.hide()})}})},createMessagesForDialog:function(a,b){return _([I18n.t("itemSelection",{count:a,item:"contact",action:"to delete"}),this.messageForUndeletableContacts(a,b),this.messageForAction(a,b)]).compact()},messageForUndeletableContacts:function(a,b){var c=I18n.t("contactUndeletable");if(0<a){if(0===b)return I18n.t("itemUndeletable",{count:0,item:"contact",region_specific_message:c});var d=a-b;if(0<d)return I18n.t("itemUndeletable",{count:d,item:"contact",region_specific_message:c})}},
messageForAction:function(a,b){if(0<b)return 0===a-b?I18n.t("itemConfirmDelete",{count:a,item:"contact"}):I18n.t("itemConfirmDelete",{count:0,item:"contact"})}})});
ns("la.views.contacts",function(b){b.ContactView=la.views.ValidatedFormView.extend({className:"contact",id:"contacts",focusElementId:"name",templateName:"contacts/edit_contact",events:{"click #save":"save","click #new":"saveAndNew","click #cancel":"cancel","mouseup #cancel":"cancel","click #destroy":"destroy"},initialize:function(){this.addSubview(new la.views.contacts.ContactEmailListView({collection:this.model.get("additionalEmailsModel"),container:this}),"#additionalEmails");this.listenTo(this.model,
"change:differentBillingAddress",this.showOrHideBillingAddress);this.listenTo(this.model,"change:individual",this.individualChanged);this.listenTo(this.model,"change:reportable",this.revalidateModel);this.listenTo(this.model,"change:type",this.showOrHideAccountsInformation);this.listenTo(this.model,"change:type",this.showOrHideReportable)},isValid:function(){return this._super()?this._isContactEmailsValid():!1},_isContactEmailsValid:function(){var a=this.model.get("additionalEmailsModel"),a=_(a.models).find(function(a){return!a.isValid()});
return _(a).isUndefined()},render:function(){this._super();this.showOrHideBillingAddress();this.setRequiredFields();this.model.isNew()||this.validateAndShowAllFormErrors();return this},setRequiredFields:function(){this.setRequired(["firstName","lastName"],this.model.get("individual"));this.setRequired("name",!this.model.get("individual"))},save:function(){var a=this;this.saveAndCallback({message:"Contact saved",success:function(b){a.navigateToList()}})},saveAndNew:function(){var a=this;this.saveAndCallback({message:"Contact saved",
success:function(b){a.navigateToNewContact()}})},cancel:function(){this.navigateToList()},destroy:function(){this.createConfirmDeleteDialog()},navigateToList:function(){UrlUtils.redirect(la.breadcrumb.getPreviousUrl())},navigateToNewContact:function(){la.breadcrumb.clear();UrlUtils.callRouteHandler(UrlUtils.appFragment(this.businessId,"/contacts/new"))},showOrHideBillingAddress:function(){this.model.get("billingAddress")||this.model.set({billingAddress:new la.models.Address});this.setVisible("billingAddress",
this.model.get("differentBillingAddress"));this.model.get("billingAddress").trigger("change")},showOrHideAccountsInformation:function(){var a=_.str.include(this.model.get("type"),"Owner"),b=this.model.isNew();this.setVisible("createAccountsInformation",a&&b)},showOrHideReportable:function(){var a=this.model.canBeReportable();this.setVisible("reportableContainer",a);a||this.$("#reportable").attr("checked",!1).change()},individualChanged:function(){this.revalidateModel()},revalidateModel:function(){this.setRequiredFields();
this.model.validate()},createConfirmDeleteDialog:function(){var a=this;this.model.get("hasJournalTransactions")||this.model.get("hasAllocationRules")?this.showInformationDialog("Delete contact",this.createMessagesForDialog()):this.confirmAndDestroy({title:"Delete contact",messages:this.createMessagesForDialog(),success:function(){a.navigateToList();a.showNotification("Contact deleted")}})},createMessagesForDialog:function(){var a=I18n.t("itemConfirmDeleteSingle",{item:"contact"});this.model.get("hasJournalTransactions")&&
this.model.get("hasAllocationRules")?a=I18n.t("contacts.undeletable.hasTransactionsOrAllocationRules"):this.model.get("hasJournalTransactions")?a=I18n.t("contacts.undeletable.hasTransactions"):this.model.get("hasAllocationRules")&&(a=I18n.t("contacts.undeletable.hasAllocationRules"));return[a]}})});
ns("la.views",function(b){b.DrillableAccountsView={drillableEvents:{"click .drillableAccount:not(td.highlight a)":"drilldownToAccount","click .closeAccountTransactions":"hideAccountTransactions","click .journalEntries a":"addExpandedAccountToLocalPreference","click .highlight a":"hideAccountTransactions"},initializeDrillable:function(a){this.events=this._mergeEvents(this.drillableEvents,this.events);this.expandedAccountId=sessionStore.get(this.expandedAccountIdKey);this.highlightedTransactionId=sessionStore.get(this.highlightedTransactionIdKey);
this.listenTo(this.model,"change:to",this.resetExpandedAccount);this.listenTo(this.model,"change:from",this.resetExpandedAccount);this.listenTo(this.model,"change",this.drilldownToOpenAccount);$(window).scroll(this.detectScroll);return this},resetExpandedAccount:function(){this.highlightedTransactionId=this.expandedAccountId=void 0;sessionStore.remove(this.expandedAccountIdKey);sessionStore.remove(this.highlightedTransactionIdKey)},drilldownToAccount:function(a){a=$(a.target).data("accountid");this.toggleHighlightAccount(a,
!0);this.showAccountTransactions(a)},toggleHighlightAccount:function(a,b){var c=$("a[data-accountid="+a+"]").parents("td").first();b?c.addClass("highlight"):c.removeClass("highlight")},addExpandedAccountToLocalPreference:function(a){var b=$(a.target);a=b.parents(".journalEntries").data("accountid");b=b.data("transactionId");sessionStore.set(this.expandedAccountIdKey,a);sessionStore.set(this.highlightedTransactionIdKey,b)},showAccountTransactions:function(a){var b=this,c=this.model.get("to"),d=this.model.get("from")||
DateUtils.startOfFinancialYear(DateUtils.parse(c)),f=this.model.get("cashBasis")||!1,g=this.model.get("includeOpeningBalance")||!1,h=this.model.get("businessId");this.showLoadingSpinner(a,!0);this.collection=new la.collections.reports.JournalEntries(void 0,{businessId:h,from:d,to:c,cashBasis:f,accountId:a,includeOpeningBalance:g});this.collection.fetch({success:function(a){b.renderDrilldownData(a);b.scrollToExpandedAccountAndHighlightedTransaction();b.resetExpandedAccount()},error:function(){b.showLoadingSpinner(a,
!1)}})},renderDrilldownData:function(a){this.journalTable=new la.views.reports.JournalTableView({businessId:this.businessId,collection:a,hideAccountHeader:!0,hideBlank:!0,container:this});this.journalTableView=this.addSubview(this.journalTable,"#journalEntries"+a.accountId);this.renderSubviews(this.journalTableView);this.toggleTransactionContainer(a.accountId,!0)},showLoadingSpinner:function(a,b){var c=this.$("#journalEntriesContainer"+a);b?(c.show(),this.$("#journalEntries"+a,c).html('<div class="smallLoadingSpinner"></div>').show(),
this.$("#journalEntriesContainer"+a+" div.smallLoadingSpinner").show()):this.$("#journalEntriesContainer"+a+" div.smallLoadingSpinner").hide()},toggleTransactionContainer:function(a,b){var c=["#journalEntriesContainer"+a,"#blankTopRow"+a,"#blankRow"+a].join(),c=this.$(c);b?c.show({duration:200}):($(window).scroll(this.detectScroll),c.slideUp(),c=this.findSubviewInSelector("#journalEntries"+a),this.removeSubview(c))},hideAccountTransactions:function(a){a=$(a.target).data("accountid");$(".highlight[data-accountid="+
a+"]").removeClass("highlight");this.toggleTransactionContainer(a,!1);this.toggleHighlightAccount(a,!1)},drilldownToOpenAccount:function(){_.isUndefined(this.expandedAccountId)||(this.showAccountTransactions(this.expandedAccountId),this.toggleHighlightAccount(this.expandedAccountId,!0))},detectScroll:function(){if(0<this.$(".highlight").length)for(var a=this.$("td div.journalEntriesContainer button"),b=a.length,c=0;c<b;c++){var d=$(a[c]),f=d.offset().top,g=d.parents("td").find("#blankRow"+d.data("accountid")).offset().top,
h=d.parents("td").find("#blankTopRow"+d.data("accountid")).offset().top,f=ScrollUtils.getYInViewPosition(h+17,g-24,f,24);d.offset({top:f})}},scrollToExpandedAccountAndHighlightedTransaction:function(){if(this.highlightedTransactionId&&this.expandedAccountId)try{var a=this.$("#"+this.expandedAccountId).data("accountid");$(window).height();var b=$("#journalEntries"+a+" tr:has(a[data-transaction-id="+this.highlightedTransactionId+"])");if(0===b.length){var c=$("#"+this.expandedAccountId).offset().top-
$(window).height()/2;$("html, body").animate({scrollTop:c},200)}else{var d=b.offset().top-$(window).height()/2;$("html, body").animate({scrollTop:d},200);b.addClass("highlight");window.setTimeout(function(){b.addClass("fadeOutHighlight")},2E3)}}catch(f){this.highlightedTransactionId=this.expandedAccountId=void 0}}}});
ns("la.views.gettingStarted",function(b){b.GettingStartedView=la.views.BaseView.extend({id:"gettingStartedWagon",preferenceType:"gettingStarted",initialize:function(a){this._super();this.headerView=a.headerView;this.helpId=a.helpId||"";this.$el.on("wagon:closed",this.onOptOut);this.$el.on("wagon:docked",this.onDock)},render:function(){$("body").append(this.$el);var a=this;GettingStartedUtils.isGettingStartedFeatureOn()&&la.WagonContent.loadPages(function(){a.renderWelcomeWagon(a.helpId)})},optIn:function(){var a=
this.helpId,b=this;la.gettingStartedPreference.setPageDocked(a,!1);la.BusinessSettings.setPreference(this.preferenceType,a,!0,{success:function(){b.render()}})},onOptOut:function(a,b){la.BusinessSettings.setPreference("gettingStarted",b,!1)},onDock:function(a,b){la.gettingStartedPreference.setPageDocked(b.helpId,b.isDocked)},toShowGettingStarted:function(a){return la.BusinessSettings.getPreferenceAsBoolean(this.preferenceType,a,!0)},renderWelcomeWagon:function(a){la.WagonContent.hasHelpOnPage(a)?
(this.headerView.setGettingStarted(!0),this.toShowGettingStarted(a)&&this.showWelcomeWagon(a)):this.headerView.setGettingStarted(!1)},showWelcomeWagon:function(a){var b=la.Config.isProduction();WelcomeWagon.Service.create({container:this.$el,helpId:a,isPublished:b,locale:this.locale(),wagonOpen:!la.gettingStartedPreference.isPageDocked(a)})},locale:function(){return la.Config.isAU()?"en-AU":"en-NZ"},remove:function(){this._super();GettingStartedUtils.isGettingStartedFeatureOn()&&(WelcomeWagon.Service.remove(),
this.$el.remove())}})});
ns("la.views.gst",function(b){b.SettingsView=la.views.ValidatedFormView.extend({templateName:"gst/settings",events:{"click #gstSettingsSaveButton":"_saveSettings","click #viewGstTypesLink":"_viewGstTypes"},initialize:function(){this._super();_(this).bindAll();this.listenTo(this.model,"change:registeredForGst",this.updateRegisteredForGstValue);this.addSubview(new la.views.commons.OnboardingNavigationView({model:la.models.commons.OnboardingNavigation.GstSettings}),"#onboarding-navigation-container")},updateRegisteredForGstValue:function(){this.changeControlsStatus(this.model.get("registeredForGst"))},
changeControlsStatus:function(a){(la.BusinessSettings.hasEntitlement("INVOICES")||la.BusinessSettings.hasEntitlement("PURCHASES"))&&this.$("[name=gstBasis]").attr("disabled",!a);this.$("[name=reportingPeriod]").attr("disabled",!a)},onDomReady:function(){this.changeControlsStatus(this.model.get("registeredForGst"));this._super();la.BusinessSettings.hasEntitlement("INVOICES")||la.BusinessSettings.hasEntitlement("PURCHASES")||(this.$("[name=gstBasis]").attr("disabled",!0),this.$("span#cash-only-text").show(),
this.$("input#cash").closest("div").css("display","inline-block"),this.$("[name=gstBasis]").closest("div").css("margin-top","-5px"))},_saveSettings:function(){this.saveAndCallback({message:"GST settings saved",success:this._saveBusinessDetails,error:this.hide})},_saveBusinessDetails:function(){la.BusinessSettings.set({registeredForGst:this.model.get("registeredForGst"),gstReportingPeriod:this.model.get("reportingPeriod"),gstAccountingCashBased:"CASH"===this.model.get("gstBasis")});this.changeControlsStatus(this.model.get("registeredForGst"))},
_viewGstTypes:function(a){a.preventDefault();var b=new la.collections.gst.ClientGstTypes([],{businessId:this.model.get("businessId")}),c=this;$.when(b.fetch()).done(function(){(new la.views.gst.ClientGstTypesModalDialogView({model:b.sortedByName(),container:c})).show()})}})});
ns("la.views.gst",function(b){b.AuSettingsView=la.views.gst.SettingsView.extend({initialize:function(a){this._super(a);this._changeInputIdFormat();this.listenTo(this.model,"change:reportingPeriod",this.changeReportingPeriod);this.listenTo(this.model,"change:gstAdjustmentOutputAccountId",this._outputIdChanged);this.listenTo(this.model,"change:gstAdjustmentInputAccountId",this._inputIdChanged)},changeControlsStatus:function(a){this._super(a);this.$("[name=gstAdjustmentInputAccountId]").attr("disabled",
!a);this.$("[name=gstAdjustmentOutputAccountId]").attr("disabled",!a);this.$("[data-name=gstAdjustmentInputAccountId]").data("widget-ref").enable(a)},onDomReady:function(){this.reportingPeriodChanged();this._super()},_saveSettings:function(){"ANNUALLY"===this.model.get("reportingPeriod")?this.model.set({gstAdjustmentInputAccountId:this._convertDateStringToAccountId(this.model.get("gstAdjustmentInputAccountId").toString())}):"QUARTERLY"===this.model.get("reportingPeriod")&&(this.model.set({gstAdjustmentInputAccountId:_(this.model.get("gstAdjustmentInputAccountId")).toNumber()}),
this.model.set({gstAdjustmentOutputAccountId:_(this.model.get("gstAdjustmentOutputAccountId")).toNumber()}));this._super();this._changeInputIdFormat()},_changeInputIdFormat:function(){if("ANNUALLY"===this.model.get("reportingPeriod")){var a=this.model.get("gstAdjustmentInputAccountId").toString(),a=this._convertInputIdToDate(a);this.model.set({gstAdjustmentInputAccountId:a},{validate:!0})}},_convertInputIdToDate:function(a){if(1===a.length)return"2013-10-31T00:00:00";7===a.length&&(a="0"+a);return a.substring(4,
8)+"-"+a.substring(2,4)+"-"+a.substring(0,2)+"T00:00:00"},_convertDateStringToAccountId:function(a){var b=a.substring(0,4),c=a.substring(5,7);a=a.substring(8,10);return _.startsWith(a,"0")?_(a.substring(1,2)+c+b).toNumber():_(a+c+b).toNumber()},changeReportingPeriod:function(){this.reportingPeriodChanged();"ANNUALLY"===this.model.get("reportingPeriod")&&this.$("#gstAdjustmentInputAccountId").focus()},reportingPeriodChanged:function(){switch(this.model.get("reportingPeriod")){case "MONTHLY":this.$("#gstAdjustmentInputAccountId").val("");
this.model.set({gstAdjustmentInputAccountId:1});this.model.set({gstAdjustmentOutputAccountId:1});this.$("#monthlyDueDateInfo").removeClass("hidden");this.$("#quarterlyDueDateInfo").addClass("hidden");this.$("#annuallyDueDateInfo").addClass("hidden");break;case "ANNUALLY":this.model.set({gstAdjustmentOutputAccountId:1});this.$("#annuallyDueDateInfo").removeClass("hidden");this.$("#monthlyDueDateInfo").addClass("hidden");this.$("#quarterlyDueDateInfo").addClass("hidden");break;case "QUARTERLY":this.$("#gstAdjustmentInputAccountId").val(""),
this.$("#quarterlyDueDateInfo").removeClass("hidden"),this.$("#monthlyDueDateInfo").addClass("hidden"),this.$("#annuallyDueDateInfo").addClass("hidden"),this._convertIdToString()}},_convertIdToString:function(){var a=this.model.get("gstAdjustmentInputAccountId").toString();1!==a.length?this.model.set({gstAdjustmentInputAccountId:"1"},{validate:!0}):this.model.set({gstAdjustmentInputAccountId:a},{validate:!0});this.model.set({gstAdjustmentOutputAccountId:this.model.get("gstAdjustmentOutputAccountId").toString()})},
_outputIdChanged:function(){if("QUARTERLY"===this.model.get("reportingPeriod"))switch(this.model.get("gstAdjustmentOutputAccountId")){case "1":case "2":this._inputIdChanged();break;case "3":this.$("#basLodgementMethod").addClass("hidden"),this._showLodgeByPaperDueDate()}},_inputIdChanged:function(){if("QUARTERLY"===this.model.get("reportingPeriod"))switch(this.$("#basLodgementMethod").removeClass("hidden"),this.model.get("gstAdjustmentInputAccountId")){case "1":this._showLodgeByPaperDueDate();break;
case "2":case "3":this.$("#lodgeByPaperDueDate").addClass("hidden");this.$("#lodgeByECIDueDate").removeClass("hidden");this.$("#lodgeElectronicallyDueDate").addClass("hidden");break;case "4":this.$("#lodgeByPaperDueDate").addClass("hidden"),this.$("#lodgeByECIDueDate").addClass("hidden"),this.$("#lodgeElectronicallyDueDate").removeClass("hidden")}},_showLodgeByPaperDueDate:function(){this.$("#lodgeByPaperDueDate").removeClass("hidden");this.$("#lodgeByECIDueDate").addClass("hidden");this.$("#lodgeElectronicallyDueDate").addClass("hidden")}})});
ns("la.views.gst",function(b){b.ClientGstTypeHeaderView=la.views.commons.TableHeaderView.extend({render:function(){this.$el.html(HandlebarsTemplates["gst/client_gst_types_header"]());return this}});b.ClientGstTypeRowView=la.views.ValidatedFormView.extend({tagName:"tr",templateName:"gst/client_gst_types_row"});b.ClientGstTypeTableView=la.views.commons.TableView.extend({noRecordMessage:"There are no tax types.",headerView:"la.views.gst.ClientGstTypeHeaderView",rowView:"la.views.gst.ClientGstTypeRowView"});
b.ClientGstTypeListView=la.views.ListView.extend({initialize:function(a){this._super(a)},render:function(){this.renderHandlebars("gst/client_gst_types_list");this.tableView=this.addSubview(new b.ClientGstTypeTableView({collection:this.collection,businessId:this.businessId,container:this}),"#table");this.renderSubviews();this.tableView.renderRows();return this}})});
ns("la.views.gst",function(b){b.ClientGstTypesModalDialogView=la.views.ValidatedFormDialogView.extend({id:"clientGstTypesDialog",attributes:{"data-backdrop":"true"},initialize:function(a){this._super(a);this.addSubview(new b.ClientGstTypeListView({businessId:this.businessId,collection:this.model,container:this}),"#gstTypes")},render:function(){this.renderHandlebars("gst/client_gst_types_modal",this.model);this.renderSubviews();return this}})});
ns("la.views.home",function(b){b.DashboardView=la.views.BaseView.extend({templateName:"home/dashboard",mixins:[la.views.mixins.OnboardBanner],initialize:function(a){this._super(a);this.addSubview(new la.views.home.NoticeBoardView(a),"#noticeboard-container");this.initializeBanner(a);this.addSubview(new la.views.home.StatsView(a),"#stats-container");this.addSubview(new la.views.home.GraphsView(a),"#graphs-container");this.addSubview(new la.views.commons.ApplicationMessagesView(a),"#applicationMessages");
la.breadcrumb.clear();this._bindKeyEvents()},_bindKeyEvents:function(){Mousetrap.bind("t e a m",function(a){this.renderMeetTheTeam()}.bind(this))},renderMeetTheTeam:function(){!$("#meet-the-team-dialog").is(":visible")&&-1<UrlUtils.requestHref().indexOf("/home")&&(new la.views.MeetTheTeamView).show()},render:function(){return this._super()},onDomReady:function(){this._super();new la.views.home.EmailConfirmationDialogView({container:this,businessId:this.businessId});UnlinkedBankFeedsNotificationUtil.check(this.businessId);
UncategorisedAccountsChecker.check(this.businessId)}})});ns("la.views.home",function(b){b.DuplicateSnWarningModalView=la.views.DialogView.extend({templateName:"home/duplicate_sn_warning_modal",id:"duplicateSnWarningDialog",focusElementId:"okButton",attributes:{tabindex:"-1"},events:{"click #okButton":"close","blur #okButton":"blur"},initialize:function(a){_.bindAll(this)},close:function(){this.hide()},afterHide:function(){this.remove()},blur:function(){setTimeout(function(){this.$("#okButton").focus()}.bind(this))}})});
ns("la.views.home",function(b){b.EmailConfirmationDialogView=la.views.ValidatedFormDialogView.extend({id:"emailConfirmationModalDialog",events:{"click #saveButton":"_saveEmail","focus #otherEmailInput":"selectOtherEmailRadio"},attributes:{tabindex:"-1","aria-labelledby":"modal-title-email-confirmation-dialog"},initialize:function(a){this._super(a);this.model=new la.models.home.Email;if(!la.BusinessSettings.isPartner()){_.bindAll(this);this.collection=new la.collections.home.EmailConfirmation({businessId:a.businessId});
var b=this;this.collection.fetch({success:function(){1<b.collection.size()&&(b.show(),b.$(".radio input:first").prop("checked",!0).change(),IE9.supportPlaceHolder(b.$el))}})}},render:function(){$(this.el).html(HandlebarsTemplates["home/email_confirmation"]({emails:this.collection.toJSON()}));return this},selectOtherEmailRadio:function(){this.$("#otherEmailRadio").prop("checked",!0).change()},_saveEmail:function(){this.saveAndCallFunction(this.hide,{modelName:"Email"})}})});
ns("la.views.home",function(b){b.GettingStartedSetupView=la.views.BaseView.extend({templateName:"home/getting_started_new",events:{"click .close":"_dismiss"},_dismiss:function(){la.BusinessSettings.setPreference("newOnBoarding","dismissed",!0);this.$el.slideUp()}})});
ns("la.views.home",function(b){b.GettingStartedView=la.views.BaseView.extend({events:{"click .getting-started .task-container .task":"taskClicked","click .getting-started .task-container .close":"closeClicked"},render:function(){this.renderHandlebars("home/getting_started");var a=this.$(".getting-started .task-container");0===a.length?this.$el.hide():(a=(5-a.length)/5*100,this.$(".getting-started-status").text("Your profile is "+a+"% complete"),this.$(".getting-started-completion-bar .progress .bar").css("width",
a+"%"));return this},taskClicked:function(a){$.trackEvent("Dashboard - Tasks","Action : "+this._getHumanizedTaskName(a),"Business Id : "+la.Config.getRegion()+"-"+this.businessId);la.BusinessSettings.setPreference("task",this._getTaskName(a),!0);this.render()},closeClicked:function(a){a.preventDefault();$.trackEvent("Dashboard - Tasks","Dismiss : "+this._getHumanizedTaskName(a),"Business Id : "+la.Config.getRegion()+"-"+this.businessId);la.BusinessSettings.setPreference("task",this._getTaskName(a),
!0);this.render()},_getTaskName:function(a){return $(a.currentTarget).data("taskname")},_getHumanizedTaskName:function(a){return _.str.humanize(this._getTaskName(a))}})});
ns("la.views.home.graphs",function(b){b.AgedDebtorGraphView=la.views.BaseView.extend({templateName:"home/graphs/aged_debtor_graph",initialize:function(a){this._super(a);this.model=new la.models.home.graphs.AgedDebtorGraph(a);_.bindAll(this)},render:function(){this._super();var a=this.model.get("due"),b=this.model.get("overdueLessThan30Days"),c=this.model.get("overdueLessThan60Days"),d=this.model.get("overdueMoreThan60Days");a&&b&&c&&d&&(a.positive||b.positive||c.positive||d.positive?(this.$(".graphs-none").hide(),
this.$(".graphs-container").show(),this._buildPieChart(a,b,c,d)):(this.$(".graphs-none").show(),this.$(".graphs-container").hide()));return this},_buildPieChart:function(a,b,c,d){a=[{label:"Current",color:"#5fa52c",data:this._getValueIfPositive(a)},{label:"1-30 days overdue",color:"#f2ae44",data:this._getValueIfPositive(b)},{label:"31-60 days overdue",color:"#ec6915",data:this._getValueIfPositive(c)},{label:"61+ days overdue",color:"#d2322a",data:this._getValueIfPositive(d)}];this.$(".aged-debtor-graph").plot(a,
{series:{pie:{show:!0,radius:.9,innerRadius:.5,label:{show:!1,radius:.6,threshold:.1,formatter:this._valueFormatter}}},grid:{hoverable:!0},legend:{show:!0,margin:[0,80],position:"ne",labelBoxBorderColor:"#fff"}});this.$(".aged-debtor-graph").bind("plothover",this._showLabelTooltip)},_getValueIfPositive:function(a){return a.positive?a.value:0},_valueFormatter:function(a,b){var c=b.data[0][1];return 1E6<c||-1E6>c?$.money.format(c/1E6,1)+"M":$.money.format(c,0)},_showLabelTooltip:function(a,b,c){a=this.$(".aged-debtor-graph");
var d=a.data("plot");c?(a.data("previous-post")!==c.seriesIndex&&(a.data("previous-post",c.seriesIndex),d.unhighlight(),d.highlight(c.series,c.datapoint)),this._showTooltip(b.pageX,b.pageY,c.series.label+" - "+this._valueFormatter(c.series.label,c.series))):(a.data("previous-post",-1),d.unhighlight(),this._removeTooltip())},_showTooltip:function(a,b,c){this._removeTooltip();$('<div id="tooltip">'+c+"</div>").css({position:"absolute",top:b+20,left:a+20,border:"1px solid #FFDDDD",padding:"2px","background-color":"#FFEEEE",
"font-family":"Arial, Helvetica, sans-serif",opacity:.8}).appendTo("body")},_removeTooltip:function(){$("#tooltip").remove()}})});
ns("la.views.home.graphs",function(b){b.SalesTargetGraphView=la.views.BaseView.extend({templateName:"home/graphs/sales_target_graph",events:{"click .description a":"_toggleSalesTargetContainer","click #saveSalesTarget":"_saveSalesTarget","keypress #salesTarget input":"_keyPressSalesTarget"},initialize:function(a){this._super(a);this.model=new la.models.home.graphs.SalesTargetGraph(a)},render:function(){this._super();if(this.model.get("total")){var a=parseInt(this.model.getSalesTarget(),10),b=parseFloat(this.model.get("total").value);
b>=a?this.$(".sales-target-graph .progress .bar").css("width","100%"):this.$(".sales-target-graph .progress .bar").css("width",100*b/a+"%")}return this},_toggleSalesTargetContainer:function(){this.$("#showSalesTargetContainer").toggle();this.$("#saveSalesTargetContainer").toggle()},_keyPressSalesTarget:function(a){13===a.keyCode&&(this._toggleSalesTargetContainer(),this._saveSalesTarget())},_saveSalesTarget:function(){var a=this.$("#salesTarget input").val();this.model.getSalesTarget()!==a&&($.trackEvent("Dashboard - Graphs",
"Sales Target Changed","Business Id : "+la.Config.getRegion()+"-"+this.businessId),this.model.setSalesTarget(a),this.render())}})});
ns("la.views.home",function(b){b.GraphsView=la.views.BaseView.extend({initialize:function(a){this._super(a);this.addSubview(new la.views.home.graphs.AgedDebtorGraphView(a),"#aged-debtor-container");this.addSubview(new la.views.home.graphs.SalesTargetGraphView(a),"#sales-target-container")},render:function(){this.renderHandlebars("home/graphs");this.renderSubviews();return this},onDomReady:function(){_(this.subviews).each(function(a){var b=a.subview;$.when(b.model.fetch()).done(function(){b.render()})});
this._super();return this}})});ns("la.views.home",function(b){b.MissingSNWarningModalView=la.views.DialogView.extend({templateName:"home/missing_sn_warning_modal",id:"missing-sn-warning-modal-dialog",focusElementId:"closeButton",attributes:{tabindex:"-1"},events:{"click #closeButton":"closeDialog","blur #closeButton":"blur"},initialize:function(a){this._super(a);_.bindAll(this)},closeDialog:function(){this.hide()},afterHide:function(){this.remove()},blur:function(){setTimeout(function(){this.$("#closeButton").focus()}.bind(this))}})});
ns("la.views.home",function(b){b.NoticeBoardView=la.views.BaseView.extend({events:{"click .noticeboardClose":"closeNoticeBoard"},initialize:function(a){this._super(a);this.model=new la.models.home.NoticeBoard},render:function(){var a=this;$.when(this.model.fetch()).done(function(){a.renderTemplate()});return this},renderTemplate:function(){this.renderHandlebars("home/notice_board",[],{});var a=this.model.getContent(this.businessId);_.isBlank(a)||(this.$("#noticeboard-text").html(a),this.$("#noticeboard").removeClass("hidden"))},
closeNoticeBoard:function(a){a.preventDefault();this.$("#noticeboard").slideUp();this.model.save()}})});
ns("la.views.home",function(b){b.PartnerBusinessSelectView=la.views.BaseView.extend({templateName:"home/partner_business_select",events:{"click #confirmBusinessSelection":"_businessSelectionConfirmed","click #businessListContainer":"_checkSelectionAndEnableButton"},_checkSelectionAndEnableButton:function(){this.businessListSubview.getSelectedOption().id&&this.$("#confirmBusinessSelection").removeClass("disabled")},initialize:function(a){this.options=a;this.invitation=new la.models.invitation.Invitation({id:this.options.invitationId});
this.model=new Backbone.Model;_.bindAll(this);this.collection=new la.collections.commons.Businesses(void 0,{type:"PP"});this.businessListSubview=this.addSubview(new la.views.businesses.SelectBusinessRadioListContainerView({collection:this.collection}),"#businessListContainer");this._loadInvitation()},_loadInvitation:function(){this.invitation.fetch({async:!1,success:function(a,b){this.options=_.extend(this.options,{invitation:b})}.bind(this)})},_businessSelectionConfirmed:function(){var a=this.businessListSubview.getSelectedOption();
a&&InvitationUtils.linkPartnerToSme(this.options.invitationId,a.id,function(){UrlUtils.redirect(UrlUtils.homeUrl())})}})});
ns("la.views.home.stats",function(b){b.BaseExpandableStatView=la.views.BaseView.extend({events:{"click .stats-expand-container":"toggleStatDetails"},toggleStatDetails:function(){this.gaLabel&&!this.$el.find(".stats-details").is(":visible")&&$.trackEvent("Dashboard - Stats","Show "+this.gaLabel+" Details","Business Id : "+la.Config.getRegion()+"-"+this.businessId);this.$el.find(".stats-expand").toggle();this.$el.find(".stats-details").slideToggle()}})});
ns("la.views.home.stats",function(b){b.BillflowStatView=la.views.BaseView.extend({templateName:"home/stats/billflow_stat",tagName:"li",className:"top-menu billflow-menu",initialize:function(a){this._super(a);this.listenTo(Backbone,"updateNotification",this.forceRefresh.bind(this));this.model=new la.models.home.stats.Billflow({busId:la.BusinessSettings.get("businessId")});if(a=parseInt(la.Config.get("billflowPollingInterval"),10))this.billflowPolling=setInterval(this.forceRefresh.bind(this),a);this.getStatus()},
forceRefresh:function(){this.getStatus()},render:function(){var a=this._super();la.HeaderService.updateBillflowCount(this.model.get("total"));return a},getStatus:function(){var a=this;this.model.fetch().done(function(){a.render()})},remove:function(){clearInterval(this.billflowPolling);this._super()}})});
ns("la.views.home.stats",function(b){b.GstDueStatView=la.views.BaseView.extend({templateName:"home/stats/gst_due_stat",events:{"click .stats-number-container .description a":"updateGstReportDates"},updateGstReportDates:function(){$.trackEvent("Dashboard - Stats","Show GST Detailed Report","Business Id : "+la.Config.getRegion()+"-"+this.businessId);sessionStore.set("gstDetailedReport."+this.model.get("businessId")+".reportingPeriod",la.BusinessSettings.get("gstReportingPeriod"));sessionStore.set("gstDetailedReport."+
this.model.get("businessId")+".toDate",this.model.get("to"));sessionStore.set("gstDetailedReport."+this.model.get("businessId")+".fromDate",this.model.get("from"))}})});
ns("la.views.home.stats",function(b){b.GstRefundStatView=la.views.BaseView.extend({templateName:"home/stats/gst_refund_stat",events:{"click .stats-number-container .description a":"updateGstReportDates"},updateGstReportDates:function(){$.trackEvent("Dashboard - Stats","Show GST Detailed Report","Business Id : "+la.Config.getRegion()+"-"+this.businessId);sessionStore.set("gstDetailedReport."+this.model.get("businessId")+".reportingPeriod",la.BusinessSettings.get("gstReportingPeriod"));sessionStore.set("gstDetailedReport."+
this.model.get("businessId")+".toDate",this.model.get("to"));sessionStore.set("gstDetailedReport."+this.model.get("businessId")+".fromDate",this.model.get("from"))}})});
ns("la.views.home.stats",function(b){b.OpenExpensesStatView=la.views.BaseView.extend({templateName:"home/stats/open_expenses_stat",events:{"click .stats-number-container .description a":"updateExpensesFilterPreference"},initialize:function(a){this._super(a);this.model=new la.models.home.stats.OpenExpenses(a)},updateExpensesFilterPreference:function(){$.trackEvent("Dashboard - Stats","Show Open Expenses","Business Id : "+la.Config.getRegion()+"-"+this.businessId);la.BusinessSettings.setPreference("dataTable",
"billListStatus","OPEN")}})});
ns("la.views.home.stats",function(b){b.OpenInvoicesStatView=la.views.BaseView.extend({templateName:"home/stats/open_invoices_stat",events:{"click .stats-number-container .description a.open-invoice":"updateInvoicesFilterPreference"},initialize:function(a){this._super(a);this.model=new la.models.home.stats.OpenInvoices(a);this.addSubview(new la.views.home.stats.OverdueInvoicesStatView(a),"#overdue-invoices-container")},updateInvoicesFilterPreference:function(){$.trackEvent("Dashboard - Stats","Show Open Invoices",
"Business Id : "+la.Config.getRegion()+"-"+this.businessId);la.BusinessSettings.setPreference("dataTable","invoiceListStatus","OPEN")},onDomReady:function(){_(this.subviews).each(function(a){var b=a.subview;$.when(b.model.fetch()).done(function(){b.render()})});this._super();return this}})});
ns("la.views.home.stats",function(b){b.OverdueInvoicesStatView=la.views.BaseView.extend({templateName:"home/stats/overdue_invoices_stat",events:{"click .stats-number-container .description a":"updateInvoicesFilterPreference"},initialize:function(a){this._super(a);this.model=new la.models.home.stats.OverdueInvoices(a)},updateInvoicesFilterPreference:function(){$.trackEvent("Dashboard - Stats","Show Overdue Invoices","Business Id : "+la.Config.getRegion()+"-"+this.businessId);la.BusinessSettings.setPreference("dataTable",
"invoiceListStatus","OVERDUE")}})});ns("la.views.home.stats",function(b){b.PaygAndSuperPayableStatView=b.BaseExpandableStatView.extend({gaLabel:"Payg/Super Payable",templateName:"home/stats/payg_and_super_payable_stat",initialize:function(a){this._super(a);this.model=new la.models.home.stats.PaygAndSuperPayable(a)}})});
ns("la.views.home.stats",function(b){b.TotalBankBalanceStatView=b.BaseExpandableStatView.extend({gaLabel:"Bank Balance",templateName:"home/stats/total_bank_balance_stat",initialize:function(a){this._super(a);this.model=new la.models.home.stats.TotalBankBalance(a)}})});
ns("la.views.home.stats",function(b){b.TotalCreditCardBalanceStatView=b.BaseExpandableStatView.extend({gaLabel:"Credit Card Balance",templateName:"home/stats/total_credit_card_balance_stat",initialize:function(a){this._super(a);this.model=new la.models.home.stats.TotalCreditCardBalance(a)}})});
ns("la.views.home.stats",function(b){b.UnallocatedTransactionsStatView=la.views.BaseView.extend({templateName:"home/stats/unallocated_transactions_stat",events:{"click .stats-number-container .description a":"showUnallocatedTransactions","click #unallocated-transactions-link":"redirectToTransactionPage"},initialize:function(a){this._super(a);this.model=new la.models.home.stats.UnallocatedTransactions(a)},redirectToTransactionPage:function(){analytics.track("Dashboard Stats Events",{target_id:"unallocated-transactions-link",
source:"button-click"});var a=moment().subtract(12,"months").format("YYYY-MM-DDTHH:mm:ss"),b=moment().format("YYYY-MM-DDTHH:mm:ss");UrlUtils.redirect(UrlUtils.businessUrl("/banking/transactions?processed=UNLINKED&accountId=0&from="+a+"&to="+b))},showUnallocatedTransactions:function(){$.trackEvent("Dashboard - Stats","Show Unallocated Transactions","Business Id : "+la.Config.getRegion()+"-"+this.businessId)}})});
ns("la.views.home",function(b){b.StatsView=la.views.BaseView.extend({events:{"click .setupBankFeeds":"setupBankFeedsPage"},initialize:function(a){this._super(a);this.addSubview(new la.views.home.stats.OpenInvoicesStatView(a),"#open-invoices-container");this.addSubview(new la.views.home.stats.OpenExpensesStatView(a),"#open-expenses-container");this.addSubview(new la.views.home.stats.PaygAndSuperPayableStatView(a),"#payg-and-super-payable-container");this.addSubview(new la.views.home.stats.TotalBankBalanceStatView(a),
"#total-bank-balance-container");this.addSubview(new la.views.home.stats.TotalCreditCardBalanceStatView(a),"#total-credit-card-balance-container");this.addSubview(new la.views.home.stats.UnallocatedTransactionsStatView(a),"#unallocated-transaction-container");this.shouldShowGSTStats()&&(this.gstAmountModel=new la.models.home.stats.GstAmount($.extend({},a,this._getGstStatusDates())),this.gstRefundStatView=new la.views.home.stats.GstRefundStatView($.extend({model:this.gstAmountModel},a)),this.gstDueStatView=
new la.views.home.stats.GstDueStatView($.extend({model:this.gstAmountModel},a)),this.addSubview(this.gstRefundStatView,"#gst-refund-container"),this.addSubview(this.gstDueStatView,"#gst-due-container"))},render:function(){this.renderHandlebars("home/stats",{},{shouldShowBankFeedSignup:this.shouldShowBankFeedSignup()});this.renderSubviews();return this},onDomReady:function(){var a=this;_(this.subviews).each(function(b){var c=b.subview;c!==a.gstRefundStatView&&c!==a.gstDueStatView&&$.when(c.model.fetch()).done(function(){c.render()})});
this.shouldShowGSTStats()&&$.when(this.gstAmountModel.fetch()).done(function(){a.gstRefundStatView.render();a.gstDueStatView.render()});this._super();return this},setupBankFeedsPage:function(){$.trackEvent("Dashboard - Stats","Setup Bank Feeds","Business Id : "+la.Config.getRegion()+"-"+this.businessId)},shouldShowGSTStats:function(){return la.Config.isAU()&&la.BusinessSettings.isRegisteredForGst()&&"ANNUALLY"!==this._getGstReportingPeriod()},shouldShowBankFeedSignup:function(){var a=la.BusinessSettings.get("accountStatus");
return"ACTIVE"===a||"TRIAL"===a},_getGstReportingPeriod:function(){return la.BusinessSettings.get("gstReportingPeriod")},_getGstStatusDates:function(){return"QUARTERLY"===this._getGstReportingPeriod()?this._getGstStatusDateQuarterly():this._getGstStatusDateMonthly()},_getGstStatusDateQuarterly:function(){var a=DateUtils.serverDate().startOf("month");a.month(3*Math.floor(a.month()/3));return{from:DateUtils.formatAsBackend(a),to:DateUtils.formatAsBackend(a.add("months",2).endOf("month").startOf("day"))}},
_getGstStatusDateMonthly:function(){var a=DateUtils.serverDate();return{from:DateUtils.formatAsBackend(a.startOf("month")),to:DateUtils.formatAsBackend(a.endOf("month").startOf("day"))}}})});
ns("la.views.home",function(b){b.SubscribeAlertView=la.views.BaseView.extend({templateName:"home/subscribe_alert",events:{"click .subscribe":"showSubscribe"},showSubscribe:function(a){$.trackEvent("Dashboard - Alerts","Subscribe Now","Business Id : "+la.Config.getRegion()+"-"+this.businessId);UrlUtils.navigateToRoute(this.businessId,"/settings/subscription")}})});
ns("la.views.home",function(b){b.UpdatePaymentDetailsAlertView=la.views.BaseView.extend({events:{"click .update-payment-details-alert a.close":"alertCloseClicked"},render:function(){this.renderHandlebars("home/update_payment_details_alert");return this},alertCloseClicked:function(){la.BusinessSettings.setPreference("task","creditCard",!0)}})});
ns("la.views.invoices",function(b){b.ActivitiesNewView=la.views.BaseView.extend({templateName:"invoices/activities_new",events:{"click a.retry":"_triggerRetrySendInvoice"},initialize:function(a){this.collection.on("reset",function(){this.render()},this);this.collection.fetch({reset:!0})},render:function(){var a=HandlebarsTemplates[this.templateName](),b=this.collection.map(function(a){return(0,HandlebarsTemplates["invoices/activities_new_row"])(a.toJSON())});this.$el.append(a);this.$("tbody").append(b.join(""))},
_triggerRetrySendInvoice:function(a){Backbone.trigger("retrySendInvoice");a.preventDefault()}})});
ns("la.views.invoices",function(b){b.AddContactView=la.views.ValidatedFormDialogView.extend({templateName:"invoices/add_contact",id:"contactDialog",focusElementId:"name",events:{"click #saveButton":"_saveContact"},initialize:function(a){_.bindAll(this);this.invoice=a.invoice;this.contacts=a.contacts;this.model=a.model;this.listenTo(this.model,"change:individual",this.individualChanged)},_saveContact:function(){this.saveAndCallFunction(this._closeDialogAndSelectNewContact,{modelName:"Contact"})},_closeDialogAndSelectNewContact:function(){this.contacts.add(this.model);
this.model.set("name",this._getDisplayName());this.invoice.set("contactId",this.model.get("id"));this.hide()},_getDisplayName:function(){return!0===this.model.get("individual")&&_(this.model.get("name")).isBlank()?this.model.get("firstName")+" "+this.model.get("lastName"):this.model.get("name")},individualChanged:function(){this.revalidateModel()},revalidateModel:function(){this.setRequiredFields();this.model.validate()},setRequiredFields:function(){this.setRequired(["firstName","lastName"],this.model.get("individual"));
this.setRequired("name",!this.model.get("individual"))}})});
ns("la.views.items",function(b){b.ItemFormEventsMixin={_saleAccountChanged:function(a,b){this._accountChanged(a,b,"sale")},_purchaseAccountChanged:function(a,b){this._accountChanged(a,b,"purchase")},_accountChanged:function(a,b,c){_(b).isBlank()?this.model.set(c+"GstCode",""):(a=this[c+"Accounts"].get(b),this.model.set(c+"GstCode",a.get("gstCode")))},_validateBuyingDetails:function(){this.model.validate({purchaseAccountId:this.model.get("purchaseAccountId"),purchaseGstCode:this.model.get("purchaseGstCode")})}}});
ns("la.views.invoices",function(b){b.AddItemView=la.views.ValidatedFormDialogView.extend({mixins:[la.views.items.ItemFormEventsMixin],templateName:"invoices/add_item",id:"addItemDialog",focusElementId:"number",events:{"click #saveButton":"_saveItem"},initialize:function(a){this.saleAccounts=a.saleAccounts;this.purchaseAccounts=a.purchaseAccounts;this.buyGstTypes=a.buyGstTypes;this.sellGstTypes=a.sellGstTypes;this.items=a.items;this.model.collection=a.items;this.invoiceLine=a.invoiceLine;_(this).bindAll();
this.listenTo(this.model,"change:saleAccountId",this._saleAccountChanged);this.listenTo(this.model,"change:purchaseAccountId",this._purchaseAccountChanged);this.listenTo(this.model,"change:purchasePrice",this._validateBuyingDetails)},_setValidation:function(){},_saveItem:function(a){this.saveAndCallback({message:"Item saved",success:this._closeDialogAndSelectNewItem,error:this.hide})},_closeDialogAndSelectNewItem:function(){this.items.add(this.model);this.invoiceLine.set("itemId",this.model.get("id")).trigger("change");
this.hide()}})});
ns("la.views.invoices",function(b){b.ApplyReturnToInvoiceView=la.views.BaseIFrameView.extend({templateName:"commons/iframe_container",initialize:function(a){this._super(a);this._setId("applyReturnToInvoiceFrame");var b="/VerificationProxy?request=/JSP/SalePurchase/ApplyReturn/ApplyReturn.jsp";_.isUndefined(a.journalSysId)||_.isNull(a.journalSysId)||(b=b+"&journalSysId="+a.journalSysId);_.isUndefined(a.invoiceSysId)||_.isNull(a.invoiceSysId)||(b=b+"&invoiceSysId="+a.invoiceSysId);_.isUndefined(a.cardSysId)||
_.isNull(a.cardSysId)||(b=b+"&cardSysId="+a.cardSysId);this._setUrl(UrlUtils.url(b))}})});
ns("la.views.invoices",function(b){b.ButtonView=la.views.FormView.extend({mixins:[la.views.mixins.InvoiceEntitlement],events:{"click #cancel":"navigateToList","click #save":"save","click #saveAndNew":"saveAndNew","click #saveAndPrint":"saveAndPrint","click #enterPayment":"saveAndNavigateToPayment","click #createInvoiceFromSource":"saveAndCreateInvoiceFromSource","click #destroy":"destroy","click #email":"fetchAndShowEmailDialog"},initialize:function(a){this.options=a;this.locked=a.locked;this.paid=
a.paid;this.businessId=a.businessId;this.templateName="invoices/"+this.model.get("type")+"_buttons";this.invoiceEntitlementType="quote"===this.model.get("type")?"invoice":this.model.get("type");_.bindAll(this);this.render();this.listenTo(this.model,"change:sent",this.updateSentStatus);this.listenTo(Backbone,"retrySendInvoice",this.fetchAndShowEmailDialog);FeatureTagUtils.isFeatureAvailable(FeatureTag.ONLINE_PAYMENTS)&&"invoice"===this.model.get("type")&&(OnlinePaymentOptionsCache.getModel(),this.paymentOptionsPromise=
OnlinePaymentOptionsCache.getPromise(),this.coaSettingPromise=(new la.models.invoices.COASettingModel).fetch())},render:function(){this.renderHandlebars(this.templateName,this.model,{locked:this.locked,paid:this.paid,paidOrLocked:this.isPaidOrLocked()})},isPaidOrLocked:function(){return this.paid||this.locked},save:function(){this.saveInvoiceAndCallFunction(this.navigateToList);la.feedback.trackEvent(this.model.get("type")+"-saved")},saveAndCreateInvoiceFromSource:function(){this.saveInvoiceAndCallFunction(this._getInvoiceNumberAndCreateInvoiceFromSource,
!0,!0)},saveInvoiceAndCallFunction:function(a,b,c){this.saveAndCallFunction(function(){this.trigger("invoiceSaved");a(arguments)}.bind(this),{modelName:this.model.getName(),async:b,noMessage:c,error:function(a,b){this._handleEntitlementError(b)}.bind(this)})},_handleEntitlementError:function(a){a&&400===a.status&&(a=$.parseJSON(a.responseText).errors,0<_.filter(a,function(a){return"1800"===a.code}).length&&(this.invoiceEntitlementUsage.set("limitsReached",!0),this.showEntitlementDialog()))},_getInvoiceNumberAndCreateInvoiceFromSource:function(){this._getNextNumber(this._getCopyType(),
this._createInvoiceFromSource)},_getNextNumber:function(a,b){(new la.models.commons.NextNumber({businessId:this.businessId,type:a})).fetch({success:function(a){b(a)}})},_getCopyType:function(){return"quote"===this.model.get("type")?"invoice":this.model.get("type")},_createInvoiceFromSource:function(a){var b=_(this.model.attributes).clone(),c=this._getCopyType(),b=_(b).extend({id:null,documentId:null,type:c,invoiceNumber:a.get("number"),issueDate:DateUtils.today(),sourceId:this.model.get("id"),sourceType:this.model.get("type"),
status:"OPEN",sent:!1,unrealisedTransactionType:"QUOTE"===this.model.get("unrealisedTransactionType")?"INVOICE":this.model.get("unrealisedTransactionType")}),d=createObject("la.models.invoices."+this.model.getName(),b);"invoice"===c?d.set("dueDate",this._calculateDueDateForNewInvoice(d.get("issueDate"),this._getPaymentOptions())):d.updateDueDateOld(la.BusinessSettings.getPreferenceWithDefault("invoices",c+"ExpirationTerms",30));d.on("sync",function(a){la.breadcrumb.clear();UrlUtils.navigateToRoute(this.businessId,
"/"+c+"s/"+a.get("id"));a=this.model.getName()+" saved. Here's your new copy (it has also been saved).";"quote"===this.model.get("type")&&(a=a.replace("copy","invoice"));this._showSuccessfulNotification(d,{message:a})},this);d.save().error(function(a){this._handleEntitlementError(a)}.bind(this))},_getPaymentOptions:function(){var a;a=la.Config.isAU()?new la.models.settings.invoice.PaymentOptionsAU({businessId:this.businessId}):new la.models.settings.invoice.PaymentOptionsNZ({businessId:this.businessId});
a.fetch({async:!1});return a},_calculateDueDateForNewInvoice:function(a,b){var c=b.get("paymentTermType"),d=b.get("paymentTermDays"),c=la.views.invoices.InvoiceDueDateCalculator.calculate(a,c,d);_.isUndefined(c)&&(c=DateUtils.formatAsBackend(DateUtils.parseBackendDate(a).add("days",30)));return c},saveAndNavigateToPayment:function(){var a=this.$("#enterPayment");a.hasClass("disabled")||(a.addClass("disabled"),this.locked?this.navigateToPayment():this.saveInvoiceAndCallFunction(this.navigateToPayment))},
saveAndNew:function(){this.saveInvoiceAndCallFunction(this.navigateToNew)},saveAndPrint:function(){this.locked?this.openInvoicePdf():this.saveInvoiceAndCallFunction(this.openInvoicePdf,!1)},navigateToPayment:function(){UrlUtils.redirect(UrlUtils.appUrl(la.BusinessSettings.getBusinessId(),"/"+this.model.get("type")+"s/payment/new/to-"+this.model.get("contactId")))},navigateToNew:function(){la.breadcrumb.clear();UrlUtils.callRouteHandler(UrlUtils.appFragment(this.businessId,"/"+this.model.get("type")+
"s/new"))},openInvoicePdf:function(){var a=this.model.get("invoiceNumber").replace(/[^a-z0-9\.]+/gi,"_"),a=UrlUtils.apiTokenUrl(this.businessId,"/"+this.model.get("type")+"s/"+this.model.get("id")+"/"+a+".pdf");UrlUtils.openWindow(a,this.model.get("type")+"Preview")},navigateToList:function(){UrlUtils.redirect(la.breadcrumb.getPreviousUrl())},toggleButtons:function(){var a=!this.model.isValid();this.$("#enterPayment").toggleClass("disabled",a).prop("disabled",a)},destroy:function(){this.$("#destroy").hasClass("disabled")||
(this.confirmDestroyAndCallFunction(this.navigateToList,I18n.t("itemConfirmDeleteTitle",{item:this.model.get("type")}),I18n.t("itemConfirmDeleteSingle",{item:this.model.get("type")}),I18n.t("itemConfirmDeleteNotification",{item:this.model.getName()})),$("body").removeClass("modal-open"))},_showEmailDialog:function(){(new la.views.invoices.InvoiceEmailView({container:this,invoiceModel:this.model,shouldSaveInvoice:!this.locked})).show();this.$("#email").removeAttr("disabled")},fetchAndShowEmailDialog:function(){this.$("#email").attr("disabled")||
(this.$("#email").attr("disabled","disabled"),FeatureTagUtils.isFeatureAvailable(FeatureTag.ONLINE_PAYMENTS)&&"invoice"===this.model.get("type")?this._showEmailDialogWithCoaSettingCheck():this._showEmailDialog())},_showEmailDialogWithCoaSettingCheck:function(){var a=this;this.coaSettingPromise.done(function(b){b?a._showEmailDialog():a.paymentOptionsPromise.done(function(b){"APPLIED"===b.status?(new la.views.invoices.InvoiceCOASettingModalView({onSettingSave:function(){a.coaSettingPromise=(new la.models.invoices.COASettingModel).fetch();
a._showEmailDialog()},onSettingCancel:function(){a.$("#email").removeAttr("disabled")}})).show():a._showEmailDialog()}).fail(function(){a._showEmailDialog()})})},updateSentStatus:function(){this.model.get("sent")&&this.$("#email").text("Resend to customer")}})});FrontendNew=FrontendNew||{};
ns("la.views.invoices",function(b){b.CustomerStatementsNewView=la.views.ReactView.extend({initialize:function(a){this._super(a);this.reactLib=FrontendNew;this.component=FrontendNew.customerStatementsPage;this.params={isAu:la.Config.isAU(),business:{accountStatus:la.BusinessSettings.get("accountStatus"),entitlements:la.BusinessSettings.get("entitlements"),businessId:a.businessId,archieClientId:la.BusinessSettings.get("myobCrmId"),serialNumber:la.BusinessSettings.get("businessSerialNumber")},user:{isPartnerUser:la.BusinessSettings.isPartner(),
ssoId:la.CurrentUserDetails.get("ssoId")},featureTag:{customerStatements:FeatureTagUtils.isFeatureAvailable(FeatureTag.CUSTOMER_STATEMENTS)}}}})});ns("la.views.invoices",function(b){b.CustomerStatementsView=la.views.BaseIFrameView.extend({templateName:"commons/iframe_container",initialize:function(a){this._super(a);this._setId("customerStatementsFrame");this._setUrl(UrlUtils.url("/VerificationProxy?request=/JSP/SalePurchase/CustomerStatement/CustomerStatementFilter.jsp"))}})});
ns("la.views.invoices",function(b){b.CustomerView=la.views.BaseView.extend({initialize:function(a){this.contacts=a.contacts;this.businessId=a.businessId;this.templateName=a.template||"invoices/"+this.model.get("type")+"_contact";this.listenTo(this.model,"change:address",this.updateAddress);this.listenTo(this.model,"change:contactId",this.contactChanged);this.render();this.showOrHideAddressLabel()},showOrHideAddressLabel:function(){var a=this.model.get("address");a&&a.trim()?this.$("#addressLabel").show():
this.$("#addressLabel").hide()},updateAddress:function(){this.showOrHideAddressLabel();this.$("#address").html(_.simpleFormat(this.model.get("address")))},contactChanged:function(a,b){if(_(b).isBlank())this.model.set("address","");else{var c=new la.models.Contact({id:b,businessId:this.businessId});c.on("sync",function(){this.model.set("address",c.getFormattedBillingAddress());this.model.set("reportable",c.get("reportable"))},this);c.fetch({success:function(){Backbone.trigger("billflow:updateContact",
c,this)}.bind(this)})}},addCustomer:function(){var a=new la.views.invoices.AddContactView({model:new la.models.Contact({type:this.model.get("recipient")}),invoice:this.model,contacts:this.contacts,businessId:this.businessId,container:this}),b=this;a.$el.on("hidden",function(){b.$("#contactId").focus()});a.show();return a}})});
ns("la.views.invoices",function(b){b.EntitlementDialogView=la.views.DialogView.extend({templateName:"invoices/entitlement_dialog",id:"invoiceEntitlementModalDialog",attributes:{"data-backdrop":"static","aria-labelledby":"modal-title-entitlement-dialog",role:"dialog","aria-hidden":"false"},initialize:function(a){this._super(a);_.bindAll(this)},events:{"click button#upgradeButton":"subscribe","click button#cancelButton":"goToInvoiceListPage","click button.close":"goToInvoiceListPage"},render:function(){this.model.getRemainingNumber();
this.renderHandlebars(this.templateName,this.model,{reachLimits:this.model.reachLimits(),actionText:this.getActionText()});return this},goToInvoiceListPage:function(){this.afterHide=function(){UrlUtils.navigateToRoute(this.model.get("businessId"),"/"+this.model.get("type")+"s")};this.hide()},subscribe:function(){this.afterHide=function(){UrlUtils.navigateToRoute(this.model.get("businessId"),"/settings/subscription")};this.hide()},getActionText:function(){return"invoice"===this.model.get("type")?"send":
"record"}})});
ns("la.views.invoices",function(b){b.EntitlementUsageView=la.views.BaseView.extend({templateName:"invoices/entitlement_usage",tagName:"span",events:{"click #needMore":"showEntitlementDialog"},initialize:function(a){this._super(a);_.bindAll(this)},render:function(){var a=this.model.getRemainingNumber(),b=this.model.get("type")+(1<a?"s":"")+" remaining this month";this.renderHandlebars(this.templateName,this.model,{remainingNumber:a,remainingText:b,labelColor:0===a?"red":"light-grey"});return this},
showEntitlementDialog:function(a){a.preventDefault();(new la.views.invoices.EntitlementDialogView({model:this.model})).show()}})});
ns("la.views.invoices",function(b){b.HistoryTableHeaderView=la.views.commons.TableHeaderView.extend({templateName:"invoices/history_header"});b.HistoryTableFooterView=la.views.commons.TableFooterView.extend({templateName:"invoices/history_footer",initialize:function(a){this._super(a);this.historyType=a.historyType;this.collection=a.container.collection;this.listenTo(this.collection,"reset",this.render)},render:function(){return this._renderTemplate({historyType:this.historyType,total:this.collection.getTotal(),
paymentTotal:this.collection.getPaymentTotal()})}});b.HistoryRowView=la.views.commons.TableRowFormView.extend({templateName:"invoices/history_row"});b.HistoryTableView=la.views.commons.SortableTableView.extend({headerView:"la.views.invoices.HistoryTableHeaderView",footerView:"la.views.invoices.HistoryTableFooterView",rowView:"la.views.invoices.HistoryRowView",noRecordMessage:"There are no transactions."});b.HistoryView=la.views.FormView.extend({mixins:[la.views.mixins.TableContainerView,la.views.mixins.Searchable],
id:"transactionHistory",tableViewName:"la.views.invoices.HistoryTableView",templateName:"invoices/history",initialize:function(a){this.historyType=a.historyType;this.model=new la.models.invoices.HistoryFilter(a);this.dateRanges=new Backbone.Collection([{id:"today",name:"Today"},{id:"startOfThisWeek",name:"This week"},{id:"startOfThisMonth",name:"This month"},{id:"startOfThisQuarter",name:"This quarter"},{id:"startOfCurrentFinancialYear",name:"This financial year"}]);this.collection=new la.collections.invoices.HistoryPager([],
{url:this._getFilterUrl(),businessId:a.businessId});this._super(_(a).extend({model:this.model}));this.contacts=a.contacts;this.contacts.unshift(new la.models.Contact({id:0,name:"All "+("bill"===this.historyType?"suppliers":"customers")}));this._addListeners()},_addListeners:function(){this.listenTo(this.model,"change",this.filter)},filter:function(){this.model.saveFilterPreferences();this.showSpinner(!0);this.collection.paginator_core.url=this._getFilterUrl();this.collection.fetch({success:function(){this.showSpinner(!1)}.bind(this),
silent:!1});this.search()},_getFilterUrl:function(){var a=UrlUtils.apiUrl(this.businessId,"/"+this.historyType+"s/history?");"all"!==this.model.get("dateRange")&&(a+="fromDate="+DateUtils[this.model.get("dateRange")]()+"&toDate="+DateUtils.today());0<this.model.get("contactId")&&(a+="all"!==this.model.get("dateRange")?"&":"",a+="contactId="+this.model.get("contactId"));return a}})});
ns("la.views.invoices",function(b){b.InvoiceCOASettingModalView=la.views.DialogView.extend({mixins:[la.views.mixins.Validatable],templateName:"invoices/coa_setting_modal",id:"emailInvoiceDialog",focusElementId:"account",events:{"click #saveCoaSettingButton":"save","click #cancelButton, .close":"cancel"},initialize:function(a){_.bindAll(this);this.onSettingSave=a.onSettingSave;this.onSettingCancel=a.onSettingCancel;this.model=new la.models.invoices.COASettingModel;this.accounts=new la.collections.commons.Accounts;
this.accounts.on("sync",this.filterAccountsDropDown,this);this.accounts.fetch()},filterAccountsDropDown:function(){this.accounts.set(this.accounts.bankingTransactions().models)},save:function(){this.model.save().done(function(){this.hide();this.afterHide=this.onSettingSave}.bind(this))},cancel:function(){this.hide()},beforeHide:function(){this.onSettingCancel()}})});
ns("la.views.invoices",function(b){b.InvoiceDueDateCalculator={calculate:function(a,b,c){var d;DateUtils.isBackendDateValid(a)&&(a=DateUtils.parseBackendDate(a),"END_OF_THIS_MONTH"===b?d=DateUtils.formatAsBackend(DateUtils.parseBackendDate(DateUtils.endOfThisMonthOfDate(a)).add("days",c)):"INVOICE_DATE"===b&&(d=DateUtils.formatAsBackend(a.add("days",c))));return d}}});
ns("la.views.invoices",function(b){b.InvoiceEmailFactory={build:function(a){var b=a.get("type"),c=this._fetchContact(a.get("contactId")),d=this._fetchEmailTemplate(b),f=this._buildEmailCollection([c.get("email")]),g=this._buildEmailCollection(c.get("additionalEmails")),c=this._getEmailContext(a,c);a=this._generateContent(d.get("subject"),c);d=this._generateContent(d.get("body"),c);return this._create(b,f,g,d,a)},_fetchContact:function(a){a=new la.models.Contact({id:a,businessId:la.BusinessSettings.getBusinessId()});
a.fetch({async:!1});return a},_fetchEmailTemplate:function(a){a=new la.models.settings.invoice.EmailTemplate({type:a});a.fetch({async:!1});return a},_buildEmailCollection:function(a){a=_(a).filter(function(a){return!_(a).isEmpty()}).map(function(a){return new la.models.Email({email:a})});return new la.collections.Collection(a)},_generateContent:function(a,b){return Handlebars.compile(a,{noEscape:!0})(b)},_getEmailContext:function(a,b){var c={};_.extend(c,this._getBusinessContext());_.extend(c,this._getCustomerContext(b));
_.extend(c,"invoice"===a.get("type")?this._getInvoiceContext(a):this._getQuoteContext(a));return c},_getBusinessContext:function(){var a=_(la.BusinessSettings.get("contactFirstName")).trim(),b=_(la.BusinessSettings.get("contactLastName")).trim(),b=_(a+" "+b).trim();return{your_business_name:la.BusinessSettings.get("businessName"),your_trading_name:la.BusinessSettings.get("tradingName"),your_business_email:la.BusinessSettings.get("businessEmail"),your_business_phone:la.BusinessSettings.get("businessPhone"),
your_business_website:la.BusinessSettings.get("businessWebsite"),your_business_contact_first_name:a,your_business_contact_full_name:b}},_getCustomerContext:function(a){var b=_(a.get("firstName")).trim(),c=_(a.get("lastName")).trim(),c=_(b+" "+c).trim(),d=_(a.get("name")).trim();return{customer_first_name:_(b).isBlank()?d:b,customer_full_name:_(c).isBlank()?d:c,customer_business_name:_(d).isBlank()?b:d,customer_position:a.get("position")}},_getInvoiceContext:function(a){var b=a.get("total"),c=b-(a.has("amountPaid")?
a.get("amountPaid"):0);return{invoice_number:a.get("invoiceNumber"),invoice_total_amount:$.money.formatNumeric(b,2),invoice_amount_due:$.money.formatNumeric(c,2),invoice_date_of_issue:DateUtils.backendToFrontend(a.get("issueDate")),invoice_due_date:DateUtils.backendToFrontend(a.get("dueDate")),purchase_order:a.get("purchaseOrderNumber")}},_getQuoteContext:function(a){return{quote_number:a.get("invoiceNumber"),quote_total_amount:$.money.formatNumeric(a.get("total"),2),quote_date_of_issue:DateUtils.backendToFrontend(a.get("issueDate")),
quote_expiration_date:DateUtils.backendToFrontend(a.get("dueDate"))}},_create:function(a,b,c,d,f){return new la.models.invoices.InvoiceEmail({type:a,to:b,cc:c,body:d,subject:f,sendBcc:la.BusinessSettings.getPreferenceAsBoolean("sale","emailInvoiceBccUser")})}}});
ns("la.views.invoices",function(b){b.InvoiceEmailView=la.views.ValidatedFormDialogView.extend({templateName:"invoices/invoice_email",id:"emailInvoiceDialog",focusElementId:"to",events:{"click #emailButton":"saveInvoiceAndEmail","drop .email-widget":"handleDrop","dragstart .token":"dragStart"},initialize:function(a){_.bindAll(this);this.invoiceView=a.container;this.invoiceModel=a.invoiceModel;this.shouldSaveInvoice=_.isUndefined(a.shouldSaveInvoice)?!0:a.shouldSaveInvoice;this.model=la.views.invoices.InvoiceEmailFactory.build(this.invoiceModel);
this.listenTo(this.model,"change:sendBcc",this.updateBccPreference);this.addSubview(new la.views.commons.EmailAttachmentListView({container:this,invoiceNumber:this.invoiceModel.get("invoiceNumber"),files:this.model.get("files")}),"#attachments")},saveInvoiceAndEmail:function(){this._showHideSpinner();this.shouldSaveInvoice?this.invoiceView.saveInvoiceAndCallFunction(this.sendEmail,!1,!0):this.sendEmail()},sendEmail:function(){var a=this.model.get("to").map(function(a){return a.get("email")}).join("; "),
a="invoice"===this.invoiceModel.get("type")?"A copy of this invoice has been sent to "+a:"A copy of this quote has been sent to "+a;this.model.set("invoiceId",this.invoiceModel.get("id"));this.saveAndCallFunction(this.emailSent,{message:a,error:this._showHideSpinner})},emailSent:function(){this.invoiceModel.set("sent",!0);this.hide()},hide:function(){this.model.get("files").reset();this._super()},handleDrop:function(a){a.preventDefault();var b=this.$(a.target).parents(".email-widget");0===b.size()&&
(b=this.$(a.target));b=b.attr("id");a=a.originalEvent.dataTransfer.getData("text");b!==this.dragSourceId&&(this.model.get(b).add(new la.models.Email({email:a})),b=this.model.get(this.dragSourceId),b.remove(b.findWhere({email:a})))},dragStart:function(a){a.originalEvent.dataTransfer.setData("text",$(a.target).data("value"));this.dragSourceId=$(a.target).parents(".email-widget").attr("id")},updateBccPreference:function(a,b){la.BusinessSettings.setPreference("sale","emailInvoiceBccUser",b)},_showHideSpinner:function(){this.$(".smallLoadingSpinnerWithStatus").toggle();
this.$("#sendEmailButtons").toggle()}})});ns("la.views.invoices",function(b){b.OnlineInvoicingOptInView=la.views.BaseView.extend({templateName:"invoices/online_invoicing_optin",events:{"click .close":"closeClicked","click .accept":"acceptClicked"},closeClicked:function(a){la.BusinessSettings.setPreference("invoices","dismissOnlineInvoicing",new Date);this.$el.slideUp()},acceptClicked:function(){la.BusinessSettings.setPreference("invoices","onlineInvoicing",!0);this.$el.slideUp()}})});
ns("la.views.invoices",function(b){b.OnlinePaymentsView=la.views.BaseView.extend({templateName:"invoices/online_payment",events:{"click #setupOnlinePayment":"onlinePaymentSetup","click #duplicateSnDialog":"showDuplicateSnDialog","change input[name=payment-methods]":"_togglePaymentMethod"},initialize:function(a){this._super(a);this.model=new la.models.Model;this.model.set("status","UNKNOWN");if(a.invoiceModel.isNew())this.businessPaymentOptionsPromise=OnlinePaymentOptionsCache.getPromise(),this.businessPaymentOptionsPromise.done(this._updatePaymentOptionsForBusiness.bind(this));
else a.invoiceModel.once("sync",this._setupPaymentMethodsForInvoice.bind(this,a.businessId))},_toStatus:function(a){return"APPLIED"===a?"ENABLED":"NOT_ENABLED"},_updatePaymentOptionsForBusiness:function(a){this.model.set("status",this._toStatus(a.status));this.model.set("duplicateSn",a.withDuplicateSN);this.model.set("paymentMethods",this._toPaymentMethods(a.options));this.render()},_setupPaymentMethodsForInvoice:function(a,b){OnlinePaymentOptionsCache.getPromise().done(function(c){"APPLIED"===c.status?
(new la.collections.invoices.PaymentMethods([],{businessId:a,invoiceId:b.get("id")})).fetch().done(function(a){this.model.set("paymentMethods",a);this.model.set("status","ENABLED");this.render()}.bind(this)):(this.model.set("duplicateSn",c.withDuplicateSN),this.model.set("status","NOT_ENABLED"),this.render())}.bind(this))},savePaymentMethodsForInvoice:function(a,b){var c=this.model.get("paymentMethods"),c=_.map(c,function(a){var b=new la.models.invoices.PaymentMethod;b.set("name",a.name);b.set("enabled",
a.enabled);return a});(new la.collections.invoices.PaymentMethods(c,{businessId:a,invoiceId:b.get("id")})).save()},onlinePaymentSetup:function(){_.isEmpty(la.BusinessSettings.get("businessSerialNumber"))?(new la.views.home.MissingSNWarningModalView({})).show():(UrlUtils.navigateToOnlinePaymentSetupPortal(),OnlinePaymentOptionsCache.clearCache())},showDuplicateSnDialog:function(){(new la.views.home.DuplicateSnWarningModalView({})).show()},_togglePaymentMethod:function(a){a=$(a.target);a=this._updatePaymentMethod(this.model.get("paymentMethods"),
a.val(),a.is(":checked"));this.model.set("paymentMethods",a)},_updatePaymentMethod:function(a,b,c){return _.map(a,function(a){return{name:a.name,enabled:a.name===b?c:a.enabled}})},_toPaymentMethods:function(a){return _.filter(_.map(a,function(a){return{name:a.name,enabled:!a.canApply}}),function(a){return!0===a.enabled})}})});
ns("la.views.invoices",function(b){b.OnlinePaymentsBannerView=la.views.BaseView.extend({templateName:"invoices/online_payments_banner",events:{"click #dismissPayDirect":"dismissClicked","click #turnOnPayDirect":"turnOnPayDirectClicked","click #duplicateSnDialog":"duplicateSnDialogClicked"},initialize:function(a){this._super(a);this._isDismissed()||OnlinePaymentOptionsCache.getPromise().always(this.render.bind(this));this.options=a},render:function(a){a&&(this.onlinePaymentOptions=a);this._super();
if(this._isDismissed()||OnlinePaymentOptionsCache.getModel().hasApplied()||OnlinePaymentOptionsCache.isFetching())this.$el.hide();else{if("none"===this.$el.css("display"))this.$el.addClass("animated fadeIn").one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){$(this).removeClass("animated fadeIn")});(a||this.onlinePaymentOptions)&&(a?a:this.onlinePaymentOptions).withDuplicateSN&&(this.$el.find("#turnOnPayDirect").hide(),this.$el.find("#duplicateSnDialog").show());
this.$el.show()}return this},dismissClicked:function(){la.BusinessSettings.setPreference("invoices","dismissOnlinePayments",new Date);this.$el.slideUp()},turnOnPayDirectClicked:function(){"TRIAL"===la.BusinessSettings.get("accountStatus")?(new la.views.invoices.OnlinePaymentsTrialWarningModalView(this.options)).show():_.isEmpty(la.BusinessSettings.get("businessSerialNumber"))?(new la.views.home.MissingSNWarningModalView({})).show():(UrlUtils.navigateToOnlinePaymentSetupPortal(),OnlinePaymentOptionsCache.clearCache(),
this.$el.slideUp())},duplicateSnDialogClicked:function(){(new la.views.home.DuplicateSnWarningModalView({})).show()},_isDismissed:function(){return void 0!==la.BusinessSettings.getPreference("invoices","dismissOnlinePayments")}})});
ns("la.views.invoices",function(b){b.OnlinePaymentsTrialWarningModalView=la.views.DialogView.extend({templateName:"invoices/online_payments_trial_warning_modal",id:"online-payments-trial-warning-modal-dialog",focusElementId:"closeButton",attributes:{tabindex:"-1"},events:{"click #closeButton":"closeDialog","blur #closeButton":"blur","click #subscribeNowButton":"subscribeNowClick"},initialize:function(a){this._super(a);_.bindAll(this)},subscribeNowClick:function(){UrlUtils.navigateToRoute(this.businessId,
"/settings/subscription")},closeDialog:function(){this.hide()},afterHide:function(){this.remove()},blur:function(){setTimeout(function(){this.$("#closeButton").focus()}.bind(this))}})});
ns("la.views.invoices",function(b){b.PaymentAddView=la.views.BaseIFrameView.extend({templateName:"commons/iframe_container",initialize:function(a){this._super(a);this._setId("invoicesPaymentNewFrame");var b="/VerificationProxy?request=/JSP/SalePurchase/ReceivePayInvoice/ReceivePayInvoice.jsp&type=sales";_.isUndefined(a.cardSysId)||_.isNull(a.cardSysId)||(b=b+"&cardSysId="+a.cardSysId);this._setUrl(UrlUtils.url(b))}})});
ns("la.views.invoices",function(b){b.PaymentDetailView=la.views.BaseIFrameView.extend({templateName:"commons/iframe_container",initialize:function(a){this._super(a);this._setId("invoicesPaymentDetailFrame");this._setUrl(UrlUtils.url("/VerificationProxy?request=/JSP/SalePurchase/ReceivePayInvoice/ReceivePayInvoice.jsp&type=sales&journalSysId="+a.journalSysId))}})});
ns("la.views.invoices",function(b){b.PaymentEditView=la.views.BaseIFrameView.extend({templateName:"commons/iframe_container",initialize:function(a){this._super(a);this._setId("invoicesPaymentEditFrame");this._setUrl(UrlUtils.url("/VerificationProxy?request=/JSP/SalePurchase/ReceivePayInvoice/ReceivePayInvoice.jsp&type=sales&journalSysId="+a.journalSysId+"&edit=true"))}})});
ns("la.views.invoices",function(b){b.PaymentTermsView=Backbone.View.extend({events:{"keyup #paymentTerms":"updateDueDateOld","blur  #paymentTerms":"handleEmptyPaymentTerms"},initialize:function(a){this.options=a;this.model.isNew()&&this.model.updateDueDateOld(la.BusinessSettings.getPreferenceWithDefault(a.preferences.key,a.preferences.value,30));this.listenTo(this.model,"saved",this.updatePaymentTermsPreference)},updatePaymentTermsPreference:function(){la.BusinessSettings.setPreference(this.options.preferences.key,
this.options.preferences.value,this.model.paymentTerms())},updateDueDateOld:function(a){a=$(a.target).val();_(a).isBlank()||this.model.updateDueDateOld(a)},handleEmptyPaymentTerms:function(a){a=$(a.target).val();_(a).isBlank()&&(this.model.updateDueDateOld(),this.$("#paymentTerms").val(this.model.paymentTerms()))}})});
ns("la.views.invoices",function(b){b.ProcessReturnView=la.views.BaseIFrameView.extend({templateName:"commons/iframe_container",initialize:function(a){this._super(a);this._setId("invoicesProcessReturnFrame");this._setUrl(UrlUtils.url("/VerificationProxy?request=/JSP/SalePurchase/ProcessReturnCredit/ProcessReturnCredit.jsp"))}})});
ns("la.views.invoices",function(b){b.QuoteView=la.views.invoices.UnrealisedTransactionView.extend({modelName:"Quote",feedbackQuestionId:4,initialize:function(a){this._super(a);this.contacts=a.contacts.filteredByActiveAndType(this.model.get("recipient"),{whitelist:[this.model.get("contactId")]});this.listenTo(this.model,"saved",this.rememberNotesAndRenderActivities);this.listenTo(this.model,"change:issueDate",this.issueDateChanged);this.listenTo(this.model,"change:dueDate",this.updatePaymentTerms);
this.initLayout();this.addSubview(new la.views.invoices.UnrealisedTransactionGridView(a),"#invoiceLinesContainer")},initLayout:function(){if(this.model.isNew()){var a=new la.models.settings.invoice.Template({businessId:this.businessId});a.fetch({async:!1});this.model.set("layoutType",a.get("layoutType"))}},render:function(){this.model.isNew()&&this.model.set({notes:la.BusinessSettings.getPreference("invoices","quoteNoteToRemember")});this._super();this.model.isNew()||this.renderActivities();this.renderExpirationTerms();
this.renderCustomer();this.renderButtons();return this},renderCustomer:function(){new la.views.invoices.CustomerView({el:this.$("#contactContainer"),businessId:this.businessId,contacts:this.contacts,model:this.model})},renderButtons:function(){this.buttonsView=new la.views.invoices.ButtonView({model:this.model,el:this.$("#buttonsContainer"),feedbackQuestionId:this.feedbackQuestionId,locked:this.locked,paid:this.paid,businessId:this.businessId})},renderActivities:function(){var a={businessId:this.businessId,
quoteId:this.model.get("id")},a=new la.collections.quotes.ActivitiesNew([],a);this.$("#activitiesContainer").empty().append((new la.views.invoices.ActivitiesNewView({collection:a})).el)},renderExpirationTerms:function(){new la.views.invoices.PaymentTermsView({model:this.model,el:this.$("#expirationTermsContainer"),preferences:{key:"quote",value:"expirationTerms"},locked:this.locked,businessId:this.businessId})},issueDateChanged:function(){DateUtils.isBackendDateValid(this.model.get("issueDate"))&&
this.model.updateDueDateOld(this.model.get("paymentTerms"))},updatePaymentTerms:function(){if(DateUtils.isBackendDateValid(this.model.get("dueDate"))){var a=this.model.paymentTerms().toString();this.$("#paymentTerms").val(a);this.model.set({paymentTerms:a},{validate:!0})}},rememberNotesAndRenderActivities:function(){this.$("#rememberNote").is(":checked")&&la.BusinessSettings.setPreference("invoices","quoteNoteToRemember",this.model.get("notes"));this.renderActivities()}})});
ns("la.views.invoices",function(b){b.RefundToCustomerView=la.views.BaseIFrameView.extend({templateName:"commons/iframe_container",initialize:function(a){this._super(a);this._setId("refundToCustomerViewFrame");var b="/VerificationProxy?request=/JSP/SalePurchase/WriteRefund/WriteRefund.jsp";_.isUndefined(a.journalSysId)||_.isNull(a.journalSysId)||(b=b+"&journalSysId="+a.journalSysId);_.isUndefined(a.invoiceSysId)||_.isNull(a.invoiceSysId)||(b=b+"&invoiceSysId="+a.invoiceSysId);_.isUndefined(a.cardSysId)||
_.isNull(a.cardSysId)||(b=b+"&cardSysId="+a.cardSysId);this._setUrl(UrlUtils.url(b))}})});ns("la.views.invoices",function(b){b.ReturnAddView=la.views.BaseIFrameView.extend({templateName:"commons/iframe_container",initialize:function(a){this._super(a);this._setId("invoicesReturnNewFrame");this._setUrl(UrlUtils.url("/VerificationProxy?request=/JSP/SalePurchase/EnterSale/EnterSale.jsp&type=returnCredit"))}})});
ns("la.views.invoices",function(b){b.ReturnEditView=la.views.BaseIFrameView.extend({templateName:"commons/iframe_container",initialize:function(a){this._super(a);this._setId("invoicesReturnEditFrame");var b="/VerificationProxy?request=/JSP/SalePurchase/EnterSale/EnterSale.jsp&type=returnCredit&journalSysId="+a.journalSysId;_.isUndefined(a.printInvoice)||_.isNull(a.printInvoice)||(b=b+"&printInvoice="+a.printInvoice);_.isUndefined(a.emailSentSuccessfully)||_.isNull(a.emailSentSuccessfully)||(b=b+"&emailSentSuccessfully="+
a.emailSentSuccessfully);_.isUndefined(a.emailTo)||_.isNull(a.emailTo)||(b=b+"&emailTo="+a.emailTo);this._setUrl(UrlUtils.url(b))}})});
ns("la.views.invoices",function(b){b.UnrealisedTransactionGridView=la.views.BaseView.extend({mixins:[la.views.mixins.UnrealisedTransactionLines,la.views.mixins.UnrealisedTransactionLineItems,la.views.mixins.UnrealisedTransactionLinesDragAndDrop],templateName:"invoices/unrealised_transaction_grid",initialize:function(a){this.options=a;this.lines=a.lines;this.allItems=this.items=a.items;this.model=a.model;this.businessId=a.businessId;this.accounts=a.accounts},render:function(){this._super();this.model.id?
this.updateTotalDetailsInitialLoad():this.updateTotalDetailsAfterChange();this.renderLines();return this}})});
ns("la.views.invoices",function(b){b.UnrealisedTransactionLineView=la.views.BaseView.extend({tagName:"tr",mixins:[la.views.mixins.UnrealisedTransactionLineAddEmpty],events:{"click .delete":"deleteModel","change #unitPrice":"unitPriceChangeEvent"},initialize:function(a){this.accounts=a.accounts.allocatables();this.items=a.items;this.allItems=a.allItems;this.invoice=a.invoice;this.model.set("type",this.invoice.get("type"));this.model.set("layoutType",this.invoice.get("layoutType"));this.unitTypes=new la.collections.invoices.UnitTypes;
this.model.has("totalExcludingGst")&&this.model.makeImmutable(this.invoice.get("gstInclusive"));_.bindAll(this);this.listenTo(this.model,"change:unitPrice",this.updateTotal);this.listenTo(this.model,"change:taxCode",this.taxCodeChanged);this.listenTo(this.model,"change:quantity",this.quantityChanged);this.listenTo(this.model,"change:accountId",this.accountIdChanged);this.listenTo(this.model,"change:description",this.updateDescription);this.listenTo(this.model,"change:itemId",this.itemIdChanged);this.listenTo(this.model,
"change:quantity",this.updateQuantity);this.listenTo(this.model,"change",this.updateView);this.listenTo(this.invoice,"change:issueDate",this.issueDateChanged);this.listenTo(this.invoice,"change:gstInclusive",this.unitPriceNeedsToBeRecalculated)},remove:function(){$(this.$("textarea").data("mirror")).remove();this._super()},updateView:function(){if(this.model.isEmpty())this.$(".invalid").removeClass("invalid");else{_(this.model.get("unitOfMeasure")).isBlank()&&this.model.set("unitOfMeasure","Qty");
var a=_(this.model.validation).keys();_(a).each(function(a){this.model.isValid(a)?(this.$("[name="+a+"]").removeClass("invalid"),this.$("[name="+a+"]").parents("td").removeClass("invalid"),this.$("."+a).removeClass("invalid")):(this.$("[name="+a+"]").addClass("invalid"),this.$("[name="+a+"]").parents("td").addClass("invalid"),this.$("."+a).addClass("invalid"))},this)}},render:function(){var a=this.invoice.get("issueDate");this.gstTypes=la.collections.commons.GstTypes.getAll("all",a);this.$el.attr("id",
this.model.cid);this.renderHandlebars("invoices/unrealised_transaction_line",this.model,{gstInclusive:this.invoice.get("gstInclusive")});this.updateView();return this},issueDateChanged:function(a,b){if(DateUtils.isBackendDateValid(b)){var c=this.model.get("taxCode"),d=this._convertTaxCode(c);d!==c&&this.model.set("taxCode",d).trigger("change");this.render()}},hideAccounts:function(){this.$("[name=accountId] optgroup").each(function(){var a=$(this).attr("label");"Income"!==a&&"Other Income"!==a&&($(this).hide(),
$(this).find("option").hide())})},makeLineChangable:function(){this.model.makeMutable()},taxCodeChanged:function(){this.makeLineChangable();_(this.model.get("unitPrice")).isBlank()||this.model.newUnitPrice(this.model.get("unitPrice"),this.invoice.get("gstInclusive"))},quantityChanged:function(){this.makeLineChangable();this.updateTotal()},unitPriceNeedsToBeRecalculated:function(){this.model.recalculateUnitPrice(this.invoice.get("gstInclusive"));this._updateUnitPrice();this.updateTotal()},updateTotal:function(){var a,
b,c;if(_(this.model.get("unitPrice")).isBlank()||_(this.model.get("quantity")).isBlank())c="";else{c=this.model.getTotal(this.invoice.get("gstInclusive"));b=parseFloat(this.model.getGst(this.invoice.get("gstInclusive")));var d=parseFloat(c);this.invoice.get("gstInclusive")?(a=d,b=d-b):(a=d+b,b=d);c=$.money.formatNumeric(c,2)}this.$(".total").text(c);this.model.set({total:a,totalExcludingGst:b},{silent:!0})},updateDescription:function(){_(this.$("[name=description]").val()).isBlank()&&this.$("[name=description]").val(this.model.get("description"))},
updateQuantity:function(){_(this.$("[name=quantity]").val()).isBlank()&&this.$("[name=quantity]").val(this.model.get("quantity"))},itemIdChanged:function(a,b){if(!_(b).isBlank()){var c=this.allItems.get(b);this.items.add(c);var d=this.invoice.get("saleOrPurchase"),f=la.BusinessSettings.isRegisteredForGst()?c.get(d+"GstCode"):"";this.model.set({quantity:1,accountId:c.get(d+"AccountId"),unitOfMeasure:c.get("unitOfMeasure"),unitPrice:c.get(d+"Price"),description:c.description(),taxCode:f},{silent:!0});
this.model.newUnitPrice(c.get(d+"Price"),!1);this.unitPriceNeedsToBeRecalculated();this.render();this.updateTotal();this._delayAndFocusOnQuantity()}},accountIdChanged:function(a,b){if(!_(b).isBlank()){if(la.BusinessSettings.isRegisteredForGst()){var c=this._convertTaxCode(this._getTaxCode());this.model.set({taxCode:c})}_(this.model.get("quantity")).isBlank()&&(this.model.set({quantity:1}),this._delayAndFocusOnQuantity())}},inputChanged:function(a){a=$(a.target);this.model.set(a.attr("name"),a.val())},
deleteModel:function(){1<this.collection.size()&&this.collection.remove(this.model)},addItem:function(){var a=new la.views.invoices.AddItemView({model:new la.models.invoices.InvoiceItem({businessId:this.businessId,saleOrPurchase:this.invoice.get("saleOrPurchase")}),saleAccounts:this.accounts.sales(),purchaseAccounts:this.accounts.purchases(),buyGstTypes:la.collections.commons.GstTypes.getAll("buy"),sellGstTypes:la.collections.commons.GstTypes.getAll("sell"),businessId:this.businessId,invoiceLine:this.model,
items:this.allItems,container:this});a.show();return a},_getTaxCode:function(){var a=this.model.get("itemId"),b=this.model.get("accountId"),c=this.items.get(a),d=this.accounts.get(b);if(a&&c&&c.get("saleAccountId")===b)return c.get("saleGstCode");if(d)return d.get("gstCode")},_updateUnitPrice:function(){var a=this.$("[name=unitPrice]"),b=$.money.formatNumeric(this.model.get("unitPrice"),a.parent().data("decimal-places")),b=b.replace(/(\.\d{2,3})0*$/,"$1"),b=b.replace(/(\.\d{2})0*$/,"$1");a.val(b)},
unitPriceChangeEvent:function(){this.model.newUnitPrice(this.model.get("unitPrice"),this.invoice.get("gstInclusive"));this.unitPriceNeedsToBeRecalculated()},_convertTaxCode:function(a){return la.collections.commons.GstTypes.getByCode(a,this.invoice.get("issueDate")).get("gstCode")},_delayAndFocusOnQuantity:function(){_.delay(function(){this._focusOnQuantity()}.bind(this),0)},_focusOnQuantity:function(){this.$("#quantity").focus();this.$("#quantity").select();this.showInsertRowAction()}})});
ns("la.views.items",function(b){b.ItemTableHeaderView=la.views.commons.TableHeaderView.extend({templateName:"items/item_header"});b.ItemRowView=la.views.commons.TableRowFormView.extend({templateName:"items/item_row",initialize:function(a){this._super(a)}});b.ItemTableView=la.views.commons.SortableTableView.extend({headerView:"la.views.items.ItemTableHeaderView",rowView:"la.views.items.ItemRowView",initialize:function(a){this._super(a);this.noRecordMessage="There are no items.";this.menu=a.menu},createRowView:function(a){return createObject(this.rowView,
{businessId:this.businessId,model:a,container:this,menu:this.menu})}});b.ItemListView=la.views.FormView.extend({mixins:[la.views.mixins.TableContainerView],id:"itemList",className:"items",tableViewName:"la.views.items.ItemTableView",templateName:"items/items",events:{"click #createButton":"navigateToCreatePage"},initialize:function(a){this.model=new la.models.Model;a.model=this.model;this._super(a);this.model.set("filter",la.BusinessSettings.getPreference("dataTable","itemListStatus"));this.menu=
a.menu;this.filters=this._getFilters();this.listenTo(this.model,"change:filter",this.filter);this.listenTo(this.model,"change:search",this.search)},filter:function(){la.BusinessSettings.setPreference("dataTable","itemListStatus",this.model.get("filter"));this.search()},search:function(){this.collection.setFieldFilter(this._getFilters())},_getFilters:function(){var a=[],b=this.model.get("filter");"INACTIVE"!==b&&"ALL"!==b&&a.push({field:"active",type:"equalTo",value:!0});"SELL"===b?a.push({field:"saleAccountId",
type:"min",value:1}):"BUY"===b?a.push({field:"purchaseAccountId",type:"min",value:1}):"BUY_AND_SELL"===b?(a.push({field:"saleAccountId",type:"min",value:1}),a.push({field:"purchaseAccountId",type:"min",value:1})):"INACTIVE"===b?a.push({field:"active",type:"equalTo",value:!1}):"STOCK"===b?a.push({field:"type",type:"equalTo",value:"Stock"}):"SERVICE"===b&&a.push({field:"type",type:"equalTo",value:"Service"});var c=this.model.get("search"),d=this;_.isBlank(c)||a.push({field:"searchableField",type:"function",
value:function(a,b){return _.str.contains(d.formatFields(a).toLowerCase(),c.toLowerCase())}});return a},formatFields:function(a){a=a.split(",");a[3]=Handlebars.helpers.moneyValueFormat2or4DecimalPlaces(a[3]);return a.join(",")},showSpinner:function(a){this.$(".loadingSpinner").toggle(a);this.$("#page").toggle(!a)},navigateToCreatePage:function(){UrlUtils.navigateToRoute(this.businessId,"/"+this.menu+"/items/new")}})});
ns("la.views.items",function(b){b.ItemView=la.views.ValidatedFormView.extend({mixins:[la.views.items.ItemFormEventsMixin],templateName:"items/item",id:"item",focusElementId:"number",events:{"click #cancel":"_navigateToList","mouseup #cancel":"_navigateToList","click #save":"_save","click #saveAddAnother":"_saveAddAnother","click #destroy":"_destroy","click #makeInactive":"_makeInactive","click #makeActive":"_makeActive"},initialize:function(a){this._super(a);this.saleAccounts=a.accounts.sales();this.purchaseAccounts=
a.accounts.purchases();this.buyGstTypes=la.collections.commons.GstTypes.getAll("buy");this.sellGstTypes=la.collections.commons.GstTypes.getAll("sell");this.model.collection=a.items;this.menu=a.menu;this.listenTo(this.model,"change:saleAccountId",this._saleAccountChanged);this.listenTo(this.model,"change:purchaseAccountId",this._purchaseAccountChanged);this.listenTo(this.model,"change:purchasePrice",this._validateBuyingDetails);this.listenTo(this.model,"change",this._updateRequiredFields);this.listenTo(this.model,
"change:unitOfMeasure",this._updateUnitOfMeasureDescription);_.bindAll(this);this._updateRequiredFields()},render:function(){var a=this.renderHandlebars(this.templateName,this.model,{saleAccounts:this.saleAccounts,purchaseAccounts:this.purchaseAccounts,buyGstTypes:this.buyGstTypes,sellGstTypes:this.sellGstTypes});this._updateRequiredFields();return a},_updateRequiredFields:function(){var a=this.model.updateRequiredFields();this.$("#unitOfMeasure").prop("disabled",!a)},_updateUnitOfMeasureDescription:function(){this.$("#unitOfMeasureDescription").text("This is a "+
("Hrs"===this.model.get("unitOfMeasure")?"service":"stock")+" item")},_save:function(){var a=this;this.saveAndCallback({message:"Item saved",success:function(){a._navigateToList()}})},_saveAddAnother:function(){var a=this;this.saveAndCallback({message:"Item saved",success:function(){a._navigateToCreateItem()}})},_destroy:function(){this.$("#destroy").hasClass("disabled")||this.confirmDestroyAndCallFunction(this._navigateToList,I18n.t("itemConfirmDeleteTitle",{item:"item"}),I18n.t("itemConfirmDeleteSingle",
{item:"item"}),I18n.t("itemConfirmDeleteNotification",{item:"Item"}))},_makeInactive:function(){this._toggleActiveStateAndSave(!1)},_makeActive:function(){this._toggleActiveStateAndSave(!0)},_toggleActiveStateAndSave:function(a){this.model.set("active",a);var b=this;this.saveAndCallback({success:function(){b._navigateToList()}})},_navigateToList:function(){UrlUtils.redirect(la.breadcrumb.getPreviousUrl())},_navigateToCreateItem:function(){UrlUtils.callRouteHandler(UrlUtils.appFragment(this.businessId,
"/"+this.menu+"/items/new"))}})});
ns("la.views",function(b){b.MeetTheTeamView=la.views.DialogView.extend({templateName:"meettheteam/meet_the_team",id:"meet-the-team-dialog",attributes:{tabindex:"-1","data-backdrop":"static","aria-labelledby":"modal-meet-the-team-dialog",role:"dialog","aria-hidden":"false"},events:{"click #closeButton":"closeDialog","click .lucky-button":"reRender"},initialize:function(a){this._super(a);_.bindAll(this);this.model=new la.models.MeetTheTeam;this.initTeam()},render:function(){this._super();this.bindEvents();
return this},bindEvents:function(){Mousetrap.bind("r",function(a){this.reRender()}.bind(this));Mousetrap.bind("c",function(a){this.closeDialog()}.bind(this))},reRender:function(){this.initTeam();this.render()},initTeam:function(){var a=this.model.getTeamEA(),b=a.length;this.model.set("teamCollection",a);a=this.selectRandomTeamMembers(b,this.model.get("totalNumberRequired"));this.model.set("randomTeamCollection",a)},getRandomInt:function(a,b){return Math.floor(Math.random()*(b-a))+a},selectRandomTeamMembers:function(a,
b){for(var c=this.model.get("teamCollection"),d=[],f=[];d.length<b;){var g=this.getRandomInt(0,a);0<=d.indexOf(g)||(d.push(g),f.push(c[g]))}return f},closeDialog:function(){this.hide()}})});ns("la.views.payroll.employees",function(b){b.EmployeeAddView=la.views.BaseIFrameView.extend({templateName:"commons/iframe_container",initialize:function(a){this._super(a);this._setId("employeeAddFrame");this._setUrl(UrlUtils.webUrl(la.BusinessSettings.getBusinessId(),"/employees/add"))}})});
ns("la.views.payroll.employees",function(b){b.EmployeeEditView=la.views.BaseIFrameView.extend({templateName:"commons/iframe_container",initialize:function(a){this._super(a);this._setId("employeeEditFrame");this._setUrl(UrlUtils.webUrl(la.BusinessSettings.getBusinessId(),"/employeesOld/"+a.employeeId))}})});
ns("la.views.payroll.employees",function(b){b.EmployeeListView=la.views.BaseIFrameView.extend({templateName:"commons/iframe_container",initialize:function(a){this._super(a);this._setId("employeeListFrame");this._setUrl(UrlUtils.webUrl(la.BusinessSettings.getBusinessId(),"/employees"))}})});
ns("la.views.payroll.employees",function(b){b.EmployeeSuperFundDetailsView=la.views.BaseView.extend({mixins:[la.views.mixins.Validatable],templateName:"payroll/employees/super_fund_details",initialize:function(a){this._super(a);this.options=this.options||{};this.superApraFunds=a.superApraFunds;this.electronicServiceAddresses=a.electronicServiceAddresses;this.model.set("superFundTypes",new la.collections.Collection([{name:"Standard (APRA-regulated)",value:"APRA"},{name:"Self-managed",value:"SMSF"}]));
this.model.set("apraFunds",this.superApraFunds);this.model.set("electronicServiceAddresses",this.electronicServiceAddresses);this.model.set("nonEditable",this.superApraFunds.isEmpty()||this.electronicServiceAddresses.isEmpty());this.listenTo(this.model,"change:fundType",this._displayBlockBasedOnFundType);this.listenTo(this.model,"change:fundNameSelect",this._setAPRAFundFieldsDetail)},render:function(){this._super();this._displayBlockBasedOnFundType();this._toggleSuperFundAlertBlock();this._toggleFormEditable();
return this},_displayBlockBasedOnFundType:function(){var a=this.$("#SMSFGroup"),b=this.$("#APRAGroup");"SMSF"===this.model.get("fundType")?(a.removeClass("hidden"),b.addClass("hidden")):(a.addClass("hidden"),b.removeClass("hidden"))},_toggleSuperFundAlertBlock:function(){var a=this.model.get("superFundNameOld"),b=this.model.get("superFundNumber");this.model.get("fundType");_.isBlank(a)||this.$("div.superFundAlert").removeClass("hidden");_.isBlank(b)||this.$("div.superFundNumberAlert").removeClass("hidden")},
_setAPRAFundFieldsDetail:function(){var a=this.model.get("fundNameSelect"),b=this.superApraFunds.where({name:a}),c=a="";_(b).isBlank()||(b=b[0],a=b.get("usi"),c=b.get("abn"));this.model.set("apraUsi",a);this.model.set("fundABNOfAPRA",c);this.model.set("fundType","APRA");this.model.set("employerMembershipNumber","");this.model.set("employeeMembershipNumber","")},_toggleFormEditable:function(){this.model.get("nonEditable")?(this.disableForm(),this.$(".nonEditableAlert").removeClass("hidden")):(this.enableForm(),
this.$(".nonEditableAlert").addClass("hidden"))}})});ns("la.views.payroll.employees",function(b){b.EmployeeSuperGuaranteeView=la.views.BaseView.extend({templateName:"payroll/employees/super_guarantee",initialize:function(a){this._super(a);this.options=this.options||{}}})});
ns("la.views.payroll.ird",function(b){b.IRDMonthlyReturnsOldView=la.views.BaseIFrameView.extend({templateName:"commons/iframe_container",initialize:function(a){this._super(a);this._setId("irdMonthlyReturnFrame");this._setUrl(UrlUtils.webUrl(la.BusinessSettings.getBusinessId(),"/IRDMonthlyReturns"))}})});
ns("la.views.payroll.ird",function(b){b.IRDMonthlyReturnsView=la.views.BaseView.extend({templateName:"payroll/ird/ird_monthly_returns",mixins:[la.views.mixins.Validatable],events:{"click #downloadMonthlySchedule":"_downloadMonthlySchedule","click #downloadDeductionForm":"_downloadDeductionForm","click #downloadIrFile":"_tryDownloadIrFile"},initialize:function(a){this._super(a);this.months=this._buildMonthsCollection();this.years=this._buildYearsCollection();this._setPaymentDateAsLastDayOfFilterMonth();
this.listenTo(this.model,"change:month",this._reportingPeriodChanged);this.listenTo(this.model,"change:year",this._reportingPeriodChanged)},_buildMonthsCollection:function(){return new Backbone.Collection([{id:"01",name:"January"},{id:"02",name:"February"},{id:"03",name:"March"},{id:"04",name:"April"},{id:"05",name:"May"},{id:"06",name:"June"},{id:"07",name:"July"},{id:"08",name:"August"},{id:"09",name:"September"},{id:"10",name:"October"},{id:"11",name:"November"},{id:"12",name:"December"}])},_buildYearsCollection:function(){for(var a=
new Backbone.Collection,b=DateUtils.parseBackendDate(la.BusinessSettings.get("openingBalanceDate")).year(),c=DateUtils.serverDate().year();b<=c;b++)a.add({id:b},{at:0});return a},_downloadMonthlySchedule:function(){var a=this.model.get("month"),b=this.model.get("year");UrlUtils.openWindow(UrlUtils.webUrl(la.BusinessSettings.getBusinessId(),"/IR348-"+a+b+".pdf"))},_downloadDeductionForm:function(){var a=this.model.get("month"),b=this.model.get("year");UrlUtils.openWindow(UrlUtils.webUrl(la.BusinessSettings.getBusinessId(),
"/IR345-"+a+b+".pdf"))},_reportingPeriodChanged:function(){this._setPaymentDateAsLastDayOfFilterMonth();this.render()},_setPaymentDateAsLastDayOfFilterMonth:function(){this.model.set({paymentDate:DateUtils.getLastDayOfMonthString(this.model.get("year"),this.model.get("month"),"DD/MM/YYYY")})},_enableReportingPeriodDropDown:function(){this.$("#year, #month").prop("disabled",!1)},_disableReportingPeriodDropDown:function(){this.$("#year, #month").prop("disabled",!0)},_tryDownloadIrFile:function(){this._disableReportingPeriodDropDown();
$.ajax({type:"GET",dataType:"json",url:UrlUtils.webUrl(la.BusinessSettings.getBusinessId(),"/IR-File-"+this.model.get("month")+this.model.get("year")+"/has-data.json"),success:function(a){this._enableReportingPeriodDropDown();a?this._downloadIrFile():this.$("#no-ird-data").removeClass("hidden")}.bind(this),error:function(){this._enableReportingPeriodDropDown();ErrorUtils.showErrorMessages({errorMessage:"An error occurred."})}.bind(this)})},_downloadIrFile:function(){UrlUtils.redirect(UrlUtils.webUrl(la.BusinessSettings.getBusinessId(),
"/IR-File-"+this.model.get("month")+this.model.get("year")+".zip?contactName="+encodeURIComponent(this.model.get("contactName").trim())+"&contactPhone="+encodeURIComponent(this.model.get("contactPhone").trim())+"&contactEmail="+encodeURIComponent(this.model.get("contactEmail").trim())+"&paymentDate="+this.model.get("paymentDate")))}})});
ns("la.views.payroll.pay_runs",function(b){b.PastPayRunView=la.views.BaseIFrameView.extend({templateName:"commons/iframe_container",initialize:function(a){this._super(a);this._setId("pastPayRunFrame");this._setUrl(UrlUtils.webUrl(la.BusinessSettings.getBusinessId(),"/pastpayruns"))}})});var PayrollFrontend=PayrollFrontend||{};
ns("la.views.payroll.pay_runs",function(b){b.PayCentreView=la.views.BaseIFrameView.extend({templateName:"commons/iframe_container",billboardContentId:"billboard",initialize:function(a){this._super(a);la.BusinessSettings.attributes.payrollStandalone&&"SUSPENDED"!==la.BusinessSettings.attributes.accountStatus&&this.addSubview(new la.views.home.SubscribeAlertView(a),"#alert-container");this._setId("payCentreFrame");this._setUrl(UrlUtils.webUrl(la.BusinessSettings.getBusinessId(),"/payroll"))},onDomReady:function(){this._super();
var a;if(this._isSuspendedStandaloneBusiness())a=PayrollFrontend.React.createElement(PayrollFrontend.suspendedBusinessBanner,{days:Math.abs(la.BusinessSettings.get("trialDaysRemaining")),subscriptionUrl:UrlUtils.businessUrl("/settings/subscription")});else{var b={};["INTERMEDIARY_BANNER_A","INTERMEDIARY_BANNER_B"].forEach(function(a){b[a]=FeatureTagUtils.isFeatureAvailable(a)&&!this._getDismissedCookie(a)},this);a=PayrollFrontend.React.createElement(PayrollFrontend.intermediaryBillboard,{businessId:la.BusinessSettings.getBusinessId(),
banners:b,bannerTracker:this._bannerTracker,setDismissed:this._setDismissedCookie,shouldGoToRegistrationPage:FeatureTagUtils.isFeatureAvailable("PAYAGENT_REGISTRATION")})}PayrollFrontend.ReactDOM.render(a,document.getElementById(this.billboardContentId))},_bannerTracker:function(a,b){analytics.track("INTERMEDIARY_BANNER",{action:a,banner:b})},remove:function(){this._isSuspendedStandaloneBusiness()&&PayrollFrontend.ReactDOM.unmountComponentAtNode(document.getElementById(this.billboardContentId));this._super()},
_isSuspendedStandaloneBusiness:function(){return la.BusinessSettings.attributes.payrollStandalone&&"SUSPENDED"===la.BusinessSettings.attributes.accountStatus},_setDismissedCookie:function(a){$.cookie(a,"dismissed",{path:"/"})},_getDismissedCookie:function(a){return null!==$.cookie(a)}})});PayrollFrontend=PayrollFrontend||{};
ns("la.views.payroll.pay_runs",function(b){b.PayrunView=la.views.ReactView.extend({initialize:function(a){this._super(a);this.reactLib=PayrollFrontend;this.component=PayrollFrontend.payrunPage;this.params={businessId:a.businessId,payrunId:a.payrunId}}})});
ns("la.views.payroll.paysuper",function(b){b.DownloadSuperDialogView=la.views.DialogView.extend({templateName:"payroll/paysuper/pay_super_download",id:"downloadSuperModalDialog",attributes:{tabindex:"-1","data-backdrop":"static","aria-labelledby":"modal-title-download-super-dialog",role:"dialog","aria-hidden":"false"},events:{"click #cancelButton, #closeButton":"closeDialog","submit #submitForm":"submitForm","click #register-super-portal-btn":"registerSuperPortal"},initialize:function(a){this._super(a);
this.container=a.container;this.model=new Backbone.Model;_.bindAll(this)},onDomReady:function(){this.container.showToolTipForRegister(this.$("#register-super-portal-btn"))},submitForm:function(){this.model.set("submitted",!0);this.$("#downloadButton").attr("disabled",!0);_.delay(function(){this.$("#downloadButton").attr("disabled",!1)},1E3);this._trackSubmitDownload();return!0},_trackRegisterSuperPortal:function(){analytics.track("pay_super",{target_id:"register-super-portal-button"})},_trackSubmitDownload:function(){analytics.track("pay_super",
{target_id:"download-super-button",number_of_payrun_employees:this.model.get("payrunEmployeeIds").length})},closeDialog:function(){!0===this.model.get("submitted")&&this.container.filter();this.hide()},registerSuperPortal:function(){UrlUtils.openWindow(this.container.getUrlForPaymentSuperPortal());this._trackRegisterSuperPortal()},setPayrunEmployeeInfo:function(a){var b=this.container.model;this.model.set("payrunEmployeeIds",a);this.model.set("numberOfEmployees",b.get("employeeNumber"));this.model.set("totalSuper",
b.get("totalSuper"));this.render()}})});
ns("la.views.payroll.paysuper",function(b){b.PaysuperTableHeaderView=la.views.commons.TableHeaderSelectableView.extend({templateName:"payroll/paysuper/pay_super_table_header"});b.PaysuperTableRowView=la.views.BaseView.extend({tagName:"tr",templateName:"payroll/paysuper/pay_super_table_row"});b.PaysuperTableView=la.views.commons.SortableTableView.extend({headerView:"la.views.payroll.paysuper.PaysuperTableHeaderView",rowView:"la.views.payroll.paysuper.PaysuperTableRowView",noRecordMessage:"We couldn\u2019t find any super payments."});
b.PaySuperEmployeeView=la.views.BaseView.extend({mixins:[la.views.mixins.TableContainerView,la.views.mixins.Searchable,la.views.mixins.Validatable,la.views.mixins.DateRangeFilterView],id:"paySuperEmployeeView",tableViewName:"la.views.payroll.paysuper.PaysuperTableView",templateName:"payroll/paysuper/pay_super",events:{"keyup #search":"search","click #paySuperButton":"runPaySuper"},initialize:function(a){this.model=new la.models.payroll.paysuper.PaysuperFilter;this.initDownloadedCollection();this.collection.setSort("payDate",
"desc");this._setEmployeesPaginatorUrl();this.listenTo(this.model,"change:isDownloaded",this.filter);this._super(_(a).extend({model:this.model}));this.listenTo(this.collection,"change",this.togglePaySuperButton);this.listenTo(this.collection,"sync",this.togglePaySuperButton);this.listenTo(this.collection,"sync",this._updateMaskHeight);this.onBordingView=this.addSubview(new la.views.payroll.paysuper.PaysuperOnboardingView({container:this,model:this.model,businessId:this.businessId}),"#pay-super-onboarding")},
render:function(){this._super();this._toggleTable();this._toggleOnboardingSession();return this},_toggleOnboardingSession:function(){this.onBordingView.model.get("updateBusinessSettings")||this.onBordingView.model.get("updateBankDetails")||this.onBordingView.model.get("updateEmployee")||this.$("#pay-super-onboarding").hide()},_toggleTable:function(){this.onBordingView.model.get("updateBusinessSettings")||this.onBordingView.model.get("updateBankDetails")?this.$("#overlay").click(function(){this.$("#overlay-message").removeClass("slow-fadein");
this.$("#overlay-message").addClass("fast-fadein")}.bind(this)):(this.$("#overlay-message").hide(),this.$("#overlay").hide())},_updateMaskHeight:function(){this.$("#overlay").height(this.$("#page").height())},initDownloadedCollection:function(){this.downloadedCollection=new Backbone.Collection([{id:"0",name:"Not downloaded"},{id:"1",name:"Downloaded"},{id:"",name:"All"}]);this.model.set("isDownloaded","0")},filter:function(){if(!this.model.isValid())return!1;this._setEmployeesPaginatorUrl();this.toggleSpinner(!0);
this.collection.fetch({success:function(){this.toggleSpinner(!1);this.model.saveDatePreference()}.bind(this),silent:!1});this.search()},toggleSpinner:function(a){this.$(".loadingSpinner").toggle(a);this.$("#page").toggle(!a)},_setEmployeesPaginatorUrl:function(){var a="?from="+this.model.get("from")+"&to="+this.model.get("to")+"&isDownloaded="+this.model.get("isDownloaded");this.collection.paginator_core.url=UrlUtils.apiUrl(this.businessId,"/pastpayrun/employees.json"+a)},_getSelectedPayrunEmployeeIds:function(){var a=
[],b=[],c=0,d=this.collection.selectedItems();_.each(d,function(d){if(!0===d.get("paySuperAllowed")){var g=d.get("employeeId");0>b.indexOf(g)&&b.push(g);a.push(d.get("payrunEmployeeId"));c+=parseFloat(d.get("total"))}});this.model.set("totalSuper",c.toFixed(2));this.model.set("employeeNumber",b.length);return a},togglePaySuperButton:function(){var a=this._getSelectedPayrunEmployeeIds();_.isEmpty(a)?this.$("#paySuperButton").attr("disabled",!0):this.$("#paySuperButton").removeAttr("disabled")},runPaySuper:function(){var a=
this._getSelectedPayrunEmployeeIds(),b=new la.views.payroll.paysuper.DownloadSuperDialogView({container:this,businessId:this.businessId});b.setPayrunEmployeeInfo(a);b.show()},getUrlForRegisterSuperPortal:function(){return"https://super.myob.com/register?sn="+la.BusinessSettings.get("businessSerialNumber").replace(/\s+/g,"")+"&prod_type=ea&cfid=0"},getUrlForPaymentSuperPortal:function(){return"https://super.myob.com/super_payment?sn="+la.BusinessSettings.get("businessSerialNumber").replace(/\s+/g,
"")+"&prod_type=ea&cfid=0"},showToolTipForRegister:function(a){FeatureTagUtils.isFeatureAvailable(FeatureTag.PAY_SUPER_PORTAL_REGISTRATION)&&!la.BusinessSettings.get("businessSerialNumber")&&(a.addClass("disabled"),a.attr("rel","tooltip"),a.attr("data-original-title","You need a serial number to use MYOB's super portal"),$(a).bind("click",function(){return!1}))}})});
ns("la.views.payroll.paysuper",function(b){b.PaysuperOnboardingView=la.views.BaseView.extend({templateName:"payroll/paysuper/pay_super_onboarding",events:{"click #business-details-btn":"_redirectBusinessDetails","click #super-bank-account-btn":"_redirectSuperBankAccountPage","click #show-all-employees-btn":"_toggleShowAllEmployees","click #register-myob-super-portal-btn":"_registerSuperPortal","click #super-stream-link":"_superStreamPage","click #learn-more-link":"_learnMorePage"},initialize:function(a){this._super(a);
this.container=a.container;this.model=new la.models.payroll.paysuper.PaySuperOnboarding(a);this.model.fetch({async:!1,success:function(){this._render()}.bind(this)})},_render:function(){0<this.model.get("missingBusinessDetails").length&&this.model.set("updateBusinessSettings",!0);0<this.model.get("missingSuperBankAccount").length&&this.model.set("updateBankDetails",!0);var a=" ",a=this.model.get("missingEmployeeDetails").length;0<a?(this.model.set("updateEmployee",!0),a=1===a?"Complete details for "+
a+" employee":"Complete details for "+a+" employees"):a="Complete details for employees";this.model.set("missingEmployeeLabel",a);this.render()},onDomReady:function(){this.container.showToolTipForRegister(this.$("#register-myob-super-portal-btn"))},_toggleShowAllEmployees:function(){var a=this.$("#list-of-employees"),b=this.$("#show-all-employees-btn"),c=this;a.slideToggle("slow",function(){$(this).is(":visible")?(b.text("Hide all"),c._trackSuperEmployees("missing-employee-count")):b.text("Show all")})},
_trackSuperEvent:function(a){analytics.track("pay_super",{target_id:a})},_trackSuperEmployees:function(a){analytics.track("pay_super",{target_id:a,number_of_payrun_employees:this.model.get("missingEmployeeDetails").length})},_redirectBusinessDetails:function(){UrlUtils.redirect(UrlUtils.businessUrl("/settings/businessDetails?show-alert=true"));this._trackSuperEvent("update-business-details")},_redirectSuperBankAccountPage:function(){UrlUtils.redirect(UrlUtils.businessUrl("/settings/payrollSettings?show-alert=true"));
this._trackSuperEvent("update-bank-account-details")},_registerSuperPortal:function(){UrlUtils.openWindow(this.container.getUrlForRegisterSuperPortal());this._trackSuperEvent("register-super-portal-banner")},_learnMorePage:function(){UrlUtils.openWindow("http://community.myob.com/t5/The-MYOB-Essentials-Blog/How-to-make-compliant-super-payments-with-MYOB-Essentials/ba-p/360162")},_superStreamPage:function(){UrlUtils.openWindow("https://www.ato.gov.au/Super/SuperStream/")}})});
ns("la.views.payroll.payment_summaries",function(b){b.EmployeeDetailsStepView=la.views.ValidatedFormView.extend({initialize:function(a){this._super(a);this.paymentSummary=a.paymentSummary;_.bindAll(this)},completeAndShowStep:function(a){a=_.extend({validation:!0},a);this.getTopParentView().$(".accordion-group").hasClass("invalid")||a.step>this.model.get("completed")||(a.validation&&(Backbone.Validation.unbind(this),Backbone.Validation.bind(this)),this.model.set({step:a.step},{silent:!0}),this.stepComplete())},
stepComplete:function(){this.model.trigger("change:step")},validated:function(){}})});
ns("la.views.payroll.payment_summaries",function(b){b.PAYGSummaryView=b.EmployeeDetailsStepView.extend({templateName:"payroll/payment_summaries/PAYG_summary",events:{"click .accordion-heading":"editPAYGSummary","click #step2Next":"next","click [name=workWholeYear]":"showWorkPeriod"},initialize:function(a){this._super(a);this.setDefault()},setDefault:function(){var a=this.model.get("lodgedStatus");(_(a).isUndefined()||_(a).isNull())&&this.model.set({lodgedStatus:"ORIGINAL"});a=this.model.get("workWholeYear");
(_(a).isUndefined()||_(a).isNull())&&this.model.set({workWholeYear:!0})},next:function(a){2<this.model.get("completed")?this.model.set({step:3},{silent:!0}):this.model.set({completed:2,step:3},{silent:!0});!0===this.model.get("workWholeYear")&&this.resetWorkingPeriod();this.model.url=this.model.getUpdateUrl(this.businessId,this.paymentSummary.get("employees").year);this.saveAndCallFunction(this.stepComplete,{model:this.model,message:"Updated"})},editPAYGSummary:function(){this.completeAndShowStep({step:2})},
resetWorkingPeriod:function(){this.$("#workPeriodStart").val(DateUtils.backendStringToFrontend(this.model.getDefaultDate("workPeriodStart"))).change();this.$("#workPeriodEnd").val(DateUtils.backendStringToFrontend(this.model.getDefaultDate("workPeriodEnd"))).change()},setWorkingPeriodBasedOnEmployedAndTerminatedDate:function(){this.$("#workPeriodStart").val(this._getWorkStartPeriodBasedOnEmployedDate()).change();this.$("#workPeriodEnd").val(this._getWorkEndPeriodBasedOnTerminatedDate()).change()},
_getWorkStartPeriodBasedOnEmployedDate:function(){var a="",b=this.model.get("dateEmployed");null!==b&&DateUtils.isBackendDateValid(b)&&(a=this.model.getDefaultDate("workPeriodStart"),a=this._isFirstDateBefore(b,a)?DateUtils.backendStringToFrontend(a):DateUtils.backendStringToFrontend(b));return a},_getWorkEndPeriodBasedOnTerminatedDate:function(){var a="",b=this.model.get("dateTerminated");null!==b&&DateUtils.isBackendDateValid(b)&&(a=this.model.getDefaultDate("workPeriodEnd"),a=this._isFirstDateBefore(b,
a)?DateUtils.backendStringToFrontend(b):DateUtils.backendStringToFrontend(a));return a},_isFirstDateBefore:function(a,b){var c=DateUtils.parseBackendDate(a),d=DateUtils.parseBackendDate(b);return c<d},showWorkPeriod:function(a){"true"===$(a.target).val()?(this.resetWorkingPeriod(),this.model.set({workWholeYear:!0}),this.$("#workingPeriod").removeClass("show").addClass("hide")):(this.setWorkingPeriodBasedOnEmployedAndTerminatedDate(),this.model.set({workWholeYear:!1}),this.$("#workingPeriod").removeClass("hide").addClass("show"))}})});
ns("la.views.payroll.payment_summaries",function(b){b.AllowanceAndDeductionView=b.EmployeeDetailsStepView.extend({templateName:"payroll/payment_summaries/allowance_and_deduction",events:{"click .accordion-heading":"editAssignments","click button":"next"},initialize:function(a){this._super(a);this.addSubview(new b.AllowanceListView({businessId:this.businessId,collection:this.model.get("allowances"),container:this}),"#allowances");this.addSubview(new b.DeductionListView({businessId:this.businessId,
collection:this.model.get("deductions"),container:this}),"#deductions")},editAssignments:function(a){this.completeAndShowStep({step:3,validation:!1})},next:function(){3<this.model.get("completed")?this.model.set({step:4},{silent:!0}):this.model.set({completed:3,step:4},{silent:!0});this.model.url=this.model.getUpdateUrl(this.businessId,this.paymentSummary.get("employees").year);this.saveAndCallFunction(this.stepComplete,{model:this.model,message:"Updated"})}})});
ns("la.views.payroll.payment_summaries",function(b){b.AllowanceHeaderView=la.views.commons.TableHeaderView.extend({render:function(){this.$el.html(HandlebarsTemplates["payroll/payment_summaries/allowance_header"]());return this}});b.AllowanceRowView=la.views.ValidatedFormView.extend({tagName:"tr",templateName:"payroll/payment_summaries/allowance_row"});b.AllowanceTableView=la.views.commons.TableView.extend({noRecordMessage:"There are no allowance.",headerView:"la.views.payroll.payment_summaries.AllowanceHeaderView",
rowView:"la.views.payroll.payment_summaries.AllowanceRowView"});b.AllowanceListView=la.views.ListView.extend({initialize:function(a){this._super(a);this.tableView=this.addSubview(new b.AllowanceTableView({collection:this.collection,businessId:this.businessId,container:this}),"#table")},render:function(){this.renderHandlebars("payroll/payment_summaries/allowances");this.renderSubviews();this.tableView.renderRows();return this}})});
ns("la.views.payroll.payment_summaries",function(b){b.AssignmentOverrideHeaderView=la.views.commons.TableHeaderView.extend({render:function(){this.$el.html(HandlebarsTemplates["payroll/payment_summaries/assignment_override_header"]({}));return this}});b.AssignmentOverrideRowView=la.views.BaseView.extend({tagName:"tr",templateName:"payroll/payment_summaries/assignment_override_row"});b.AssignmentOverrideTableView=la.views.commons.TableView.extend({className:"override-amount",headerView:"la.views.payroll.payment_summaries.AssignmentOverrideHeaderView",
rowView:"la.views.payroll.payment_summaries.AssignmentOverrideRowView",initialize:function(a){this._super(a);this.addListeners()},addListeners:function(){this.listenTo(this.collection,"change:allocationType",this.renderRows)}});b.AssignmentOverrideView=la.views.BaseView.extend({viewName:"la.views.payroll.payment_summaries.AssignmentOverrideTableView",tableName:"table",initialize:function(a){this._super(a);this.tableView=this.addSubview(createObject(this.viewName,{collection:this.collection,businessId:this.businessId,
container:this}),"#"+this.tableName)},render:function(){this.renderHandlebars("payroll/payment_summaries/total_assignment",new Backbone.Model({name:this.tableName}));this.renderSubviews();this.tableView.renderRows();return this}})});
ns("la.views.payroll.payment_summaries",function(b){b.AllowanceOverrideTableView=b.AssignmentOverrideTableView.extend({getCollection:function(){return this.collection.getAllowance()}});b.AllowanceOverrideView=b.AssignmentOverrideView.extend({tableName:"allowanceOverrideTable",viewName:"la.views.payroll.payment_summaries.AllowanceOverrideTableView"})});
ns("la.views.payroll.payment_summaries",function(b){b.AssignmentVerificationView=b.EmployeeDetailsStepView.extend({templateName:"payroll/payment_summaries/assignment_verification",events:{"click .accordion-heading":"editAssignments","click button.btn.action":"next"},initialize:function(a){this._super(a);this.listenTo(this.model.get("allowances"),"change",this.validated);this.listenTo(this.model.get("deductions"),"change",this.validated);this.listenTo(this.model.get("additionalRateItems"),"change",
this.validated);this.addSubview(new b.PaygWithheldView({businessId:this.businessId,model:this.model,container:this}),"#paygWithheld");this.addSubview(new b.PaygWithheldOverrideView({businessId:this.businessId,model:this.model,container:this}),"#paygWithheld-override");this.addSubview(new b.GrossPaymentView({businessId:this.businessId,model:this.model,container:this}),"#grossPayment");this.addSubview(new b.GrossPaymentOverrideView({businessId:this.businessId,model:this.model,container:this}),"#grossPayment-override");
this.addSubview(new b.TotalAllowanceView({businessId:this.businessId,collection:this.model.get("allowances"),container:this}),"#allowances");this.addSubview(new b.AllowanceOverrideView({businessId:this.businessId,collection:this.model.get("allowances"),container:this}),"#allowances-override");this.addSubview(new b.TotalUnionFeeDeductionView({businessId:this.businessId,collection:this.model.get("deductions"),container:this}),"#union-fees");this.addSubview(new b.UnionFeeDeductionOverrideView({businessId:this.businessId,
collection:this.model.get("deductions"),container:this}),"#union-fees-override");this.addSubview(new b.TotalWorkplaceGivingDeductionView({businessId:this.businessId,collection:this.model.get("deductions"),container:this}),"#workplace-giving");this.addSubview(new b.WorkplaceGivingDeductionOverrideView({businessId:this.businessId,collection:this.model.get("deductions"),container:this}),"#workplace-giving-override");this.addSubview(new b.TotalSuperDeductionView({businessId:this.businessId,collection:this.model.get("deductions"),
container:this}),"#super");this.addSubview(new b.SuperDeductionOverrideView({businessId:this.businessId,collection:this.model.get("deductions"),container:this}),"#super-override");this.addSubview(new b.TotalAmountErrorView({businessId:this.businessId,model:this.model,container:this}),"#total-errors")},next:function(){4<this.model.get("completed")?this.model.set({step:5},{silent:!0}):this.model.set({completed:4,step:5},{silent:!0});this.model.url=this.model.getUpdateUrl(this.businessId,this.paymentSummary.get("employees").year);
this.saveAndCallFunction(this.stepComplete,{model:this.model,message:"Updated"})},editAssignments:function(){this.completeAndShowStep({step:4,validation:!1})},validated:function(){this.isValid()?(this.$("button.action:not(.formDisabled)").prop("disabled",!1),this.$(".form-group").removeClass("focused")):this.$("button.action:not(.formDisabled)").prop("disabled",!0)},isValid:function(){return this.model.areAllTotalsValid()}})});
ns("la.views.payroll.payment_summaries",function(b){b.BaseLodgingDetailsView=la.views.ValidatedFormView.extend({events:{"click #createReportButton":"createReport"},initialize:function(a){this.businessId=a.businessId;this.listenTo(this.model,"change:thirdParty",this.toggleThirdParty);_.bindAll(this)},render:function(){this.renderHandlebars(this.templateName,this.model);this.addBusinessDetailsView();this.addThirdPartyDetailsView();return this},addBusinessDetailsView:function(){var a=this.model.get("businessDetails");
a.set("generate_tpar",this.generateTpar);a.set("third_pary",!1);this.businessDetailsView=this.addSubview(new la.views.payroll.payment_summaries.PaymentSummaryBusinessDetailsView({model:this.model.get("businessDetails"),template:"payroll/payment_summaries/payment_summary_business_details",container:this}),"#businessDetails");this.renderSubviews(this.businessDetailsView)},addThirdPartyDetailsView:function(){var a=this.model.get("thirdPartyDetails");a.set("third_party",!0);this.thirdPartyDetailsView=
this.addSubview(new la.views.payroll.payment_summaries.PaymentSummaryBusinessDetailsView({model:a,template:"payroll/payment_summaries/payment_summary_third_party_details",container:this}),"#thirdPartyDetails");this.renderSubviews(this.thirdPartyDetailsView)},toggleThirdParty:function(a,b){this.$("#thirdPartyDetails").toggleClass("hidden",!b);this.$("#businessDetails label[for$='postalAddressDifferentAsBusinessAddress']").toggleClass("hidden",b);this.$("#businessDetails .postalAddressContainer").toggleClass("hidden",
b||!this.model.get("businessDetails").get("postalAddressDifferentAsBusinessAddress"));this.businessDetailsView.model.contactDetailsMandatory=!b;this.validateAllViews()},isValid:function(){var a=this.model.get("businessDetails"),b=this.model.get("thirdPartyDetails"),c,d=!0;this.model.get("thirdParty")?(c=!b.get("postalAddressDifferentAsBusinessAddress")||b.get("postalAddress").isValid(),d=b.isValid()&&b.get("address").isValid()):c=!a.get("postalAddressDifferentAsBusinessAddress")||a.get("postalAddress").isValid();
return this.model.isValid()&&a.isValid()&&a.get("address").isValid()&&d&&c},createReport:function(){this.model.save({},{async:!1,success:this.downloadReport})},downloadReport:function(a){this.showNotification(a&&a.message||"Created");$("html").hasClass("ie")?UrlUtils.redirect(this.model.url()):UrlUtils.openWindow(this.model.url())}})});
ns("la.views.payroll.payment_summaries",function(b){b.CheckboxEmailField={whenValidated:function(a,b){var c=this.validStateChanged(a),d=this.emailFromOrToBlank(b.get(this.emailAttribute));(c||d)&&this.disableCheckboxIfEmailInvalid(a,b)},emailFromOrToBlank:function(a){if(this.lastEmailEmpty===_.isEmpty(a))return!1;this.lastEmailEmpty=_.isEmpty(a);return!0},validStateChanged:function(a){if(this.lastValid===a)return!1;this.lastValid=a;return!0},disableCheckboxIfEmailInvalid:function(a,b){var c=this.$('input[name="'+
this.emailCheckboxAttribute+'"]'),d=a&&!_.isEmpty(b.get(this.emailAttribute));c.attr("checked",d).attr("disabled",!d);b.set(this.emailCheckboxAttribute,d);this.checkBoxEmailCallback&&this.checkBoxEmailCallback()}}});
ns("la.views.payroll.payment_summaries",function(b){b.DeductionHeaderView=la.views.commons.TableHeaderView.extend({render:function(){this.$el.html(HandlebarsTemplates["payroll/payment_summaries/deduction_header"]());return this}});b.DeductionRowView=la.views.ValidatedFormView.extend({tagName:"tr",templateName:"payroll/payment_summaries/deduction_row"});b.DeductionTableView=la.views.commons.TableView.extend({noRecordMessage:"There is no deduction.",headerView:"la.views.payroll.payment_summaries.DeductionHeaderView",
rowView:"la.views.payroll.payment_summaries.DeductionRowView"});b.DeductionListView=la.views.ListView.extend({initialize:function(a){this._super(a);this.tableView=this.addSubview(new b.DeductionTableView({collection:this.collection,businessId:this.businessId,container:this}),"#table")},render:function(){this.renderHandlebars("payroll/payment_summaries/deductions");this.renderSubviews();this.tableView.renderRows();return this}})});
ns("la.views.payroll.payment_summaries",function(b){b.EmailTableHeaderView=la.views.commons.TableHeaderSelectableView.extend({templateName:"payroll/payment_summaries/email_header"});b.EmailRowView=la.views.commons.TableRowFormView.extend({templateName:"payroll/payment_summaries/email_row",emailAttribute:"email",emailCheckboxAttribute:"selected",checkBoxEmailCallback:function(){this.container.container.checkboxChangedByValidation()},initialize:function(a){this._super(a);this.listenTo(this.model,"validated",
this.whenValidated);this.events=this._mergeEvents(this.formViewEvents,this.events)}});_.extend(b.EmailRowView.prototype,b.CheckboxEmailField);b.EmailTableView=la.views.commons.TableView.extend({noRecordMessage:"There are no payment summaries.",headerView:"la.views.payroll.payment_summaries.EmailTableHeaderView",rowView:"la.views.payroll.payment_summaries.EmailRowView"});b.EmailFormView=la.views.ValidatedFormView.extend({emailAttribute:"bcc",emailCheckboxAttribute:"sendBcc",templateName:"payroll/payment_summaries/email_form",
initialize:function(a){this._super(a,a.model);this.listenTo(this.model,"validated",this.whenValidated)},render:function(){return this.renderHandlebars(this.templateName,this.model,this.options)}});_.extend(b.EmailFormView.prototype,b.CheckboxEmailField);b.EmailView=la.views.BaseView.extend({mixins:[la.views.mixins.TableContainerView],templateName:"payroll/payment_summaries/email",tableViewName:"la.views.payroll.payment_summaries.EmailTableView",events:{"click #emailButton":"emailPaymentSummary","click #continueButton":"next",
"click .back":"navigateToStep0","click a":"resetEmailContent"},initialize:function(a){_.bindAll(this);this.model=new la.models.payroll.payment_summaries.Email({businessId:a.businessId,year:a.year,businessDetails:a.businessDetails});var e=la.BusinessSettings.getPreference("paymentSummary","emailBody");void 0!==e&&this.model.set("body",e);a.model=this.model;this._super(a);this.year=a.year;this.formView=new b.EmailFormView({model:this.model});this.addSubview(this.formView,"#emailForm");this.events=this._mergeEvents(this.baseViewEvents,
this.events);this._addModelEvents()},_addModelEvents:function(){this.listenTo(this.collection,"change",this.validateForm);this.listenTo(this.model,"change:bcc",this.validateBcc)},onDomReady:function(){this.$("#emailForm").html(this.formView.$el);this.$('textarea[name="body"]').change()},emailPaymentSummary:function(){la.BusinessSettings.setPreference("paymentSummary","emailBody",this.model.get("body"));this.sendDialog=new la.views.payroll.payment_summaries.EmailSendView({model:this.model,container:this});
this.sendDialog.showAndSendEmails(this.tableView.collection.selectedItems(),this.model.get("body"))},validateForm:function(){this.tableView.collection.isSomeSelected()?(this.$("#emailButton").removeClass("hidden"),this.$("#continueButton").addClass("hidden")):(this.$("#emailButton").addClass("hidden"),this.$("#continueButton").removeClass("hidden"))},validateBcc:function(){this.model.preValidate("bcc",this.model.get("bcc"))?this.$("button").attr("disabled","disabled"):this.$("button").removeAttr("disabled")},
checkboxChangedByValidation:function(){this.validateForm();this.tableView.header&&this.tableView.header.setSelectAll()},navigateToStep0:function(){UrlUtils.navigateToRoute(this.businessId,"/paymentSummaries/"+this.year+"/review")},next:function(){UrlUtils.navigateToRoute(this.model.get("businessId"),"/paymentSummaryLodgingDetails/"+this.model.get("year"))},resetEmailContent:function(){this.model.resetBody();this.$('textarea[name="body"]').val(this.model.get("body"))}})});
ns("la.views.payroll.payment_summaries",function(b){b.EmailSendView=la.views.ValidatedFormDialogView.extend({templateName:"payroll/payment_summaries/email_send",id:"emailSendDialog",focusElementId:"",events:{"click #closeButton":"hide","click #continueButton":"next"},initialize:function(a){this._super(a);this.attributes["data-keyboard"]=!1;_.bindAll(this)},showAndSendEmails:function(a,b){this.show();this.emailBody=b;this.total=a.length;this.sentCount=0;this.$(".smallLoadingSpinner").show();this.updateSentMessage();
util.Queue(a,this.sendEmail,this.emailsSent)},sendEmail:function(a,b){this.model.set({to:a.get("email"),employeeId:a.get("employeeId")});var c=this;this.model.save([],{success:function(){c.sentCount++;c.updateSentMessage()},error:function(){c.$("#failed").append("Failed to send to "+a.get("name")+"("+a.get("email")+").<br />").removeClass("hidden");c.hasErrors=!0},complete:function(){b()}})},updateSentMessage:function(){this.$("#successCount").text(this.sentCount+" of "+this.total+" sent.")},emailsSent:function(){this.$(".smallLoadingSpinner").hide();
this.$("#continueButton").removeClass("hidden");this.hasErrors&&this.$("#closeButton").removeClass("hidden")},next:function(){this.$el.on("hidden.bs.modal",function(){UrlUtils.navigateToRoute(this.model.get("businessId"),"/paymentSummaryLodgingDetails/"+this.model.get("year"))}.bind(this));this.hide()}})});
ns("la.views.payroll.payment_summaries",function(b){b.GrossPaymentOverrideView=la.views.BaseView.extend({initialize:function(){this.listenTo(this.model.get("allowances"),"change:allocationType",this.render)},render:function(){this.renderHandlebars("payroll/payment_summaries/gross_payment_override",this.model);this.renderRows();return this},renderRows:function(){this.model.get("additionalRateItems").each(this.addOneAdditionalRateItemRow,this);this.model.get("allowances").getGross().each(this.addOneAllowanceRow,
this)},addOneAllowanceRow:function(a){a=createObject("la.views.payroll.payment_summaries.AssignmentOverrideRowView",{businessId:this.businessId,model:a,container:this});this.$("tbody").append(a.render().el)},addOneAdditionalRateItemRow:function(a,b){var c=createObject("la.views.payroll.payment_summaries.AssignmentOverrideRowView",{businessId:this.businessId,model:a,container:this});this.$("tbody tr:nth("+b+")").after(c.render().el)}})});
ns("la.views.payroll.payment_summaries",function(b){b.GrossPaymentView=la.views.BaseView.extend({id:"grossPaymentTable",initialize:function(){this.listenTo(this.model.get("allowances"),"change",this.render);this.listenTo(this.model.get("deductions"),"change",this.render);this.listenTo(this.model.get("additionalRateItems"),"change:overriddenAmount",this.render);this.listenTo(this.model,"change:overriddenNormalPay change:overriddenAnnualLeave",this.render);this.listenTo(this.model,"change:overriddenSickLeave change:overriddenBonus change:overriddenCommission",
this.render)},render:function(){this.renderHandlebars("payroll/payment_summaries/gross_payment",this.model,{name:"grossPaymentTable",headerTitle:"Gross payments",footerTitle:"Total gross payments:",normalPayWithSuper:this.model.normalPayWithSuper(),total:this.model.calculateTotalGross()});return this}})});
ns("la.views.payroll.payment_summaries",function(b){b.OtherIncomeView=b.EmployeeDetailsStepView.extend({events:{"click .accordion-heading":"editAssignments","click .action":"next"},initialize:function(a){this._super(a);this.listenTo(this.model,"change:otherIncomeLumpSumEPreviousYear change:otherIncomeLumpSumEBeforePreviousYear",this.updateLumpSumETotal);this.listenTo(this.model,"change",this.hideAmountInvalidError);this.listenTo(this.model,"change:step",this.hideAmountInvalidErrorWithDelay)},render:function(){this.renderHandlebars("payroll/payment_summaries/other_income",
this.model,{hasNextNotCompletedEmployee:this._hasNextNotCompletedEmployee()});this.hideAmountInvalidError();return this},_hasNextNotCompletedEmployee:function(){var a=this.model.collection.selectedItems();return 0===_.filter(a,function(a){return!a.isCompleted()&&a!==this.model},this).length},updateLumpSumETotal:function(){this.model.set({otherIncomeLumpSumE:this.model.lumpSumETotal()},{silent:!0});this.$("#otherIncomeLumpSumETotal").text($.money.formatNumeric(this.model.get("otherIncomeLumpSumE"),
0))},editAssignments:function(){this.completeAndShowStep({step:5});this.hideAmountInvalidError()},hideAmountInvalidError:function(){this.$("#noNonZeroAmountError").hide();this.$("#onlyLumpSumDError").hide();this.$("#lumpSumEInvalidError").hide();this.$("#totalTaxWithheldError").hide()},hideAmountInvalidErrorWithDelay:function(){_.delay(this.hideAmountInvalidError,250)},showError:function(){var a=this.model.invalidAmountType();this.$("#"+a).show()},next:function(a){this.model.isAmountInvalid()?this.showError():
(5<this.model.get("completed")?this.model.set({step:6},{silent:!0}):this.model.set({completed:5,step:6},{silent:!0}),this.model.url=this.model.getUpdateUrl(this.businessId,this.paymentSummary.get("employees").year),this.model.unset("otherIncomeLumpSumE",{silent:!0}),this.saveAndCallFunction(this.step5Complete,{model:this.model,message:"Updated"}))},step5Complete:function(){this.model.set({otherIncomeLumpSumE:this.model.lumpSumETotal()},{silent:!0});this.model.trigger("change:step");this.paymentSummary.trigger("nextEmployee")}})});
ns("la.views.payroll.payment_summaries",function(b){b.PaygWithheldOverrideView=la.views.BaseView.extend({tagName:"table",className:"override-amount",templateName:"payroll/payment_summaries/payg_withheld_override"})});ns("la.views.payroll.payment_summaries",function(b){b.PaygWithheldView=la.views.BaseView.extend({tagName:"table",className:"table",templateName:"payroll/payment_summaries/payg_withheld",initialize:function(){this.listenTo(this.model,"change:overriddenTotalTaxWithheld",this.render)}})});
ns("la.views.payroll.payment_summaries",function(b){b.PaymentSummaryBusinessDetailsView=la.views.ValidatedFormView.extend({initialize:function(a){this.businessId=a.businessId;this.template=a.template;this.listenTo(this.model,"change:abnOrWpn",this.toggleAbnOrWpn);this.addressesView=this.addSubview(new la.views.commons.AddressesView({addressTemplate:"payroll/payment_summaries/payment_summary_address",model:this.model,container:this}),".addresses");_.bindAll(this)},render:function(){this.renderHandlebars(this.template,
this.model);this.renderSubviews();return this},toggleAbnOrWpn:function(a,b){this.$(".wpn").toggleClass("hidden","wpn"!==b);this.$(".abn").toggleClass("hidden","abn"!==b);this.$("[name="+b+"]").focus();this.model.validate()}})});
ns("la.views.payroll.payment_summaries",function(b){b.EmployeeHeaderView=la.views.commons.TableHeaderSelectableView.extend({templateName:"payroll/payment_summaries/employee_header"});b.EmployeeRowView=la.views.commons.TableRowFormView.extend({templateName:"payroll/payment_summaries/employee_row"});b.EmployeeTableView=la.views.commons.SortableTableView.extend({noRecordMessage:"There are no employees.",headerView:"la.views.payroll.payment_summaries.EmployeeHeaderView",rowView:"la.views.payroll.payment_summaries.EmployeeRowView"});
b.PaymentSummaryCentreView=la.views.BaseView.extend({mixins:[la.views.mixins.TableContainerView],id:"employeeTable",className:"employees",templateName:"payroll/payment_summaries/payment_summary_centre",tableViewName:"la.views.payroll.payment_summaries.EmployeeTableView",events:{"change [name=financialYear]":"updateYear","click #enterPAYGInfo .stepButton":"updateSelectionNavigateToStepOne","click #reviewPAYGSummary .stepButton":"updateSelectionNavigateToStepTwo","click #createEMPDUPE .stepButton":"updateSelectionNavigateToStepThree"},
initialize:function(a){_.bindAll(this);this.collection=new la.collections.payroll.payment_summaries.Employees([],{businessId:this.businessId});this.years=new la.collections.payroll.payment_summaries.FinancialYears({businessId:this.businessId});this.years.fetch();this.paymentSummary=new la.models.payroll.payment_summaries.PaymentSummary({employees:this.collection,businessId:this.businessId,financialYear:la.BusinessSettings.getPreference("paymentSummary","selectedYear")||la.BusinessSettings.getFinancialYear()});
a.model=this.paymentSummary;this._super(a);this.listenTo(this.collection,"reset change",this.updateButtons)},onDomReady:function(){this.collection.year=this.getFinancialYear();this.tableView.renderRows()},updateYear:function(){this.collection.year=this.getFinancialYear();la.BusinessSettings.setPreference("paymentSummary","selectedYear",this.collection.year);this.collection.fetch({reset:!0})},updateButtons:function(){this.tableView.renderRows();this.setComplete("",!1);this.$(".stepButton").attr("disabled",
!0);this.collection.isSomeSelected()&&(this.$("#enterPAYGInfo .stepButton").removeAttr("disabled"),this.collection.isAllSelectedReviewed()&&(this.setComplete("#enterPAYGInfo",!0),this.setComplete("#reviewPAYGSummary",!0),this.$("#reviewPAYGSummary .stepButton").removeAttr("disabled"),this.$("#createEMPDUPE .stepButton").removeAttr("disabled")),this.collection.isAllSelectedWithDupeFile()&&this.setComplete("#createEMPDUPE",!0))},getFinancialYear:function(){return this.model.get("financialYear")},setComplete:function(a,
b){this.$(a+" .pending").toggleClass("hidden",b);this.$(a+" .completed").toggleClass("hidden",!b)},updateSelectionNavigateToStepOne:function(){this.saveAndCallFunction(this.navigateToPaymentSummaryInfo,{model:this.paymentSummary,noMessage:!0})},navigateToPaymentSummaryInfo:function(){UrlUtils.navigateToRoute(this.businessId,"/paymentSummaryInfo/"+this.getFinancialYear())},updateSelectionNavigateToStepTwo:function(){this.saveAndCallFunction(this.navigateToReview,{model:this.paymentSummary,noMessage:!0})},
navigateToReview:function(){UrlUtils.navigateToRoute(this.businessId,"/paymentSummaries/"+this.getFinancialYear()+"/review")},updateSelectionNavigateToStepThree:function(){this.saveAndCallFunction(this.navigateToCreateEmpdupe,{model:this.paymentSummary,noMessage:!0})},navigateToCreateEmpdupe:function(){UrlUtils.navigateToRoute(this.businessId,"/paymentSummaryLodgingDetails/"+this.getFinancialYear())}})});
ns("la.views.payroll.payment_summaries",function(b){b.PaymentSummaryEmployeeDetailsView=b.EmployeeDetailsStepView.extend({templateName:"payroll/payment_summaries/payment_summary_employee_details",events:{"click .accordion-heading":"editEmployee","click #step1Next":"next"},initialize:function(a){this._super(a);this.addressView=this.addSubview(new la.views.commons.AddressView({template:"payroll/payment_summaries/payment_summary_address",address:this.model.get("address"),container:this}),"#employeeAddress")},
next:function(){1<this.model.get("completed")?this.model.set({step:2},{silent:!0}):this.model.set({completed:1,step:2},{silent:!0});this.model.url=this.model.getUpdateUrl(this.businessId,this.paymentSummary.get("employees").year);this.saveAndCallFunction(this.stepComplete,{model:this.model,message:"Updated"})},editEmployee:function(){this.completeAndShowStep({step:1})}})});
ns("la.views.payroll.payment_summaries",function(b){b.PaymentSummaryEmployeeView=la.views.ValidatedFormView.extend({events:{"click #saveAndClose":"saveAndClose"},initialize:function(a){this.year=a.year;this.paymentSummary=a.paymentSummary;_.bindAll(this);this.listenTo(this.model,"change:step change:completed",this.updateDisplay);this.listenTo(this.model,"change:step",this.validated);this.listenTo(this.model.get("allowances"),"change",this.validated);this.listenTo(this.model.get("deductions"),"change",
this.validated);this.listenTo(this.model.get("additionalRateItems"),"change",this.validated);this.listenTo(this.model.get("address"),"change",this.validated);this.employeeDetailsView=this.addSubview(new la.views.payroll.payment_summaries.PaymentSummaryEmployeeDetailsView({businessId:this.businessId,model:this.model,paymentSummary:this.paymentSummary,container:this}),"#employeeDetails");this.employeePAYGSummaryView=this.addSubview(new la.views.payroll.payment_summaries.PAYGSummaryView({businessId:this.businessId,
model:this.model,paymentSummary:this.paymentSummary,container:this}),"#employeePAYGSummary");this.employeeAllowanceAndDeductionView=this.addSubview(new la.views.payroll.payment_summaries.AllowanceAndDeductionView({businessId:this.businessId,model:this.model,paymentSummary:this.paymentSummary,container:this}),"#employeeAllowanceAndDeduction");this.employeeAssignmentVerificationView=this.addSubview(new la.views.payroll.payment_summaries.AssignmentVerificationView({businessId:this.businessId,model:this.model,
paymentSummary:this.paymentSummary,container:this}),"#employeeAssignmentVerification");this.employeeOtherIncomeView=this.addSubview(new la.views.payroll.payment_summaries.OtherIncomeView({businessId:this.businessId,model:this.model,paymentSummary:this.paymentSummary,container:this}),"#employeeOtherIncome");this.signatureView=this.addSubview(new la.views.payroll.payment_summaries.SignatureView({businessId:this.businessId,model:this.paymentSummary,container:this}),"#signatureReview")},render:function(){this.paymentSummary.set({authorisedSignatory:this.model.get("authorisedSignatory")});
this.renderHandlebars("payroll/payment_summaries/payment_summary_employee");this.renderSubviews();this.updateDisplay();return this},updateDisplay:function(){var a=this.model.get("completed"),b=this.model.get("step");5<=b&&this.model.isAmountInvalid()&&(b=5,this.model.set({step:b},{silent:!0}));this.$(".in").removeClass("in");this.$(".done").removeClass("done");this.$(".invalid").removeClass("invalid");this.$("#step"+b).parent().addClass("in");for(var c=1;c<a+1;c++)this.model.isValidForStep(c)&&this.$("[name=step"+
c+"]").addClass("done");this.rebindValidationForStep(b);this.showOrHideReviewButtonOrCompletedMessageSection()},showOrHideReviewButtonOrCompletedMessageSection:function(){this.model.isCompleted()||this.paymentSummary.get("employees").isAllSelectedCompleted()?(this.$("#reviewOrCompleted").show(),this.showOrHideCompletedMessage(),this.showOrHideReviewButton()):this.$("#reviewOrCompleted").hide()},showOrHideCompletedMessage:function(){this.model.isCompleted()&&!this.paymentSummary.get("employees").isAllSelectedCompleted()?
this.$("#completedMessage").show():this.$("#completedMessage").hide()},showOrHideReviewButton:function(){var a=this.paymentSummary.get("employees").isAllSelectedCompleted();this.$("#reviewContainer").toggle(a)},rebindValidationForStep:function(a){if(a=this.getSubViews()[a-1])Backbone.Validation.unbind(a),Backbone.Validation.bind(a)},saveAndClose:function(){this.$("#saveAndClose").hasClass("disabled")||(this.model.isAmountInvalid()?this.employeeOtherIncomeView.showError():(this.model.url=this.model.getUpdateUrl(this.businessId,
this.year),this.saveAndCallFunction(this.navigateToStep0,{model:this.model,message:"Updated"})))},navigateToStep0:function(){UrlUtils.navigateToRoute(this.businessId,"/paymentSummaryCentre")},isValid:function(){var a=this.model.get("step"),b=this.model.isValidForStep(a);6>a?(a=this.getTopParentView(),a.$(".accordion-group").toggleClass("invalid",!b),a.$("#saveAndClose").toggleClass("disabled",!b)):b=this.paymentSummary.isValid();return b}})});
ns("la.views.payroll.payment_summaries",function(b){b.PaymentSummaryInfoView=la.views.BaseView.extend({events:{"click .nextEmployee":"nextEmployee","click div.employeeMenuToggle":"navigateToEmployee"},initialize:function(a){_.bindAll(this);this.businessId=a.businessId;this.year=a.year;this.employeeIndex=0;this.employees=this.model.get("employees");this.listenTo(this.model,"nextEmployee",this.nextEmployee)},render:function(){this.employees=new la.collections.payroll.payment_summaries.Employees(this.employees.selectedItems());
$(this.el).html(HandlebarsTemplates["payroll/payment_summaries/payment_summary_info"]({employees:this.employees.toJSON()}));this.renderEmployee();return this},navigateToEmployee:function(a){a=$(a.target).data("index");a!==this.employeeIndex&&(this.employeeIndex=a,this.renderEmployee())},renderEmployee:function(){this.$(".employeeMenuHeading").removeClass("selected");this.$('[data-index="'+this.employeeIndex+'"]').parents(".employeeMenuHeading").addClass("selected");this.currentEmployee=this.employees.at(this.employeeIndex);
this.currentEmployee.updateFromToDate();var a=this.employeeView;_(a).isUndefined()||this.removeSubview(a);this.employeeView=this.addSubview(new la.views.payroll.payment_summaries.PaymentSummaryEmployeeView({businessId:this.businessId,year:this.year,model:this.currentEmployee,container:this,paymentSummary:this.model}),"#employeeSummary");this.renderSubviews()},nextEmployee:function(){this.employeeIndex=this.nextEmployeeIndex();this.renderEmployee()},nextEmployeeIndex:function(){return(this.employeeIndex+
1)%this.employees.size()}})});
ns("la.views.payroll.payment_summaries",function(b){b.PaymentSummaryLodgingDetailsView=b.BaseLodgingDetailsView.extend({generateTpar:!1,templateName:"payroll/payment_summaries/payment_summary_lodging_details",events:_.extend({"click .back":"backToCentre"},b.BaseLodgingDetailsView.prototype.events),initialize:function(a){this._super(a)},backToCentre:function(){UrlUtils.navigateToRoute(this.businessId,"/paymentSummaryCentre")},toggleThirdParty:function(a,b){this._super(a,b);this.$("#businessDetails input[name='email']").parents(".form-group").toggleClass("hidden",
b)},downloadReport:function(){this._super({message:"EMPDUPE file created"})}})});
ns("la.views.payroll.payment_summaries",function(b){b.PaymentSummaryReviewTableHeaderView=la.views.commons.TableHeaderView.extend({templateName:"payroll/payment_summaries/review_header"});b.PaymentSummaryReviewRowView=la.views.commons.TableRowView.extend({templateName:"payroll/payment_summaries/review_row"});b.PaymentSummaryReviewTableView=la.views.commons.TableView.extend({noRecordMessage:"There are no payment summaries.",headerView:"la.views.payroll.payment_summaries.PaymentSummaryReviewTableHeaderView",
rowView:"la.views.payroll.payment_summaries.PaymentSummaryReviewRowView",getCollection:function(){return new la.collections.payroll.payment_summaries.Employees(this.collection.selectedItems())}});b.PaymentSummaryReviewView=la.views.BaseView.extend({mixins:[la.views.mixins.TableContainerView],templateName:"payroll/payment_summaries/review",tableViewName:"la.views.payroll.payment_summaries.PaymentSummaryReviewTableView",events:{"click .pdf":"previewIndividualSummary","click .back":"navigateToStep0",
"click .review button":"next"},initialize:function(a){this._super(a);this.year=a.year},previewIndividualSummary:function(a){a=$(a.target).data("employeeId");a=UrlUtils.webUrl(this.businessId,"/paymentsummaries/"+this.collection.year+"/employees/"+a+".pdf");UrlUtils.openWindow(a,"Payment_summary_preview")},navigateToStep0:function(){UrlUtils.navigateToRoute(this.businessId,"/paymentSummaryCentre")},next:function(){UrlUtils.navigateToRoute(this.businessId,"/paymentSummaries/"+this.year+"/email")}})});
ns("la.views.payroll.payment_summaries",function(b){b.SignatureView=la.views.ValidatedFormView.extend({events:{"click button.action":"completeReview"},initialize:function(a){this._super(a);_.bindAll(this)},render:function(){this.renderHandlebars("payroll/payment_summaries/signature");this.validated();return this},completeReview:function(a){var b=this.model.get("authorisedSignatory");this.model.get("employees").each(function(a){!0===a.get("selected")&&a.set({authorisedSignatory:b},{silent:!0})});this.model.url=
this.model.getByYearUrl(this.model.get("employees").year);this.saveAndCallFunction(this.navigateToReview,{model:this.model,message:"Employees details completed"})},navigateToReview:function(){UrlUtils.navigateToRoute(this.businessId,"/paymentSummaries/"+this.model.get("employees").year+"/review")}})});
ns("la.views.payroll.payment_summaries",function(b){b.SuperDeductionOverrideTableView=b.AssignmentOverrideTableView.extend({getCollection:function(){return this.collection.employerSuper()}});b.SuperDeductionOverrideView=b.AssignmentOverrideView.extend({tableName:"superDeductionOverrideTable",viewName:"la.views.payroll.payment_summaries.SuperDeductionOverrideTableView"})});
ns("la.views.payroll.payment_summaries",function(b){b.TotalAssignmentHeaderView=la.views.commons.TableHeaderView.extend({render:function(){this.$el.html(HandlebarsTemplates["payroll/payment_summaries/total_assignment_header"]({headerTitle:this.headerTitle}));return this}});b.TotalAssignmentFooterView=la.views.commons.TableFooterView.extend({initialize:function(a){this._super(a);this.listenTo(this.collection,"change",this.render)},render:function(){this.$el.html(HandlebarsTemplates["payroll/payment_summaries/total_assignment_footer"]({footerTitle:this.footerTitle,
total:this.getTotal()}));return this},getTotal:function(){}});b.TotalAssignmentRowView=la.views.BaseView.extend({tagName:"tr",templateName:"payroll/payment_summaries/total_assignment_row",initialize:function(){this.listenTo(this.model,"change:overriddenAmount",this.render)}});b.TotalAssignmentTableView=la.views.commons.TableView.extend({noRecordMessage:"There is no deduction.",rowView:"la.views.payroll.payment_summaries.TotalAssignmentRowView",initialize:function(a){this._super(a);this.listenTo(this.collection,
"change",this.renderRows)},render:function(){this.$el.append($('<colgroup><col style="width:343px;"><col style="width:128px;"></colgroup>'));this.renderHeader();this.$tbody=$('<tbody class="tbody"></tbody>');this.$el.append(this.$tbody);this.renderFooter();this.showMessage("Loading...");return this},showMessage:function(a){this.$tbody.html('<tr><td colspan="2" class="center">'+_.escape(a)+"</td></tr>")}});b.TotalAssignmentView=la.views.ListView.extend({initialize:function(a){this._super(a);this.tableView=
this.addSubview(createObject(this.viewName,{collection:this.collection,businessId:this.businessId,container:this}),"#"+this.tableName)},render:function(){this.renderHandlebars("payroll/payment_summaries/total_assignment",new Backbone.Model({name:this.tableName}));this.renderSubviews();this.tableView.renderRows();return this}})});
ns("la.views.payroll.payment_summaries",function(b){b.TotalAllowanceHeaderView=b.TotalAssignmentHeaderView.extend({headerTitle:"Total allowances"});b.TotalAllowanceFooterView=b.TotalAssignmentFooterView.extend({footerTitle:"Total allowances:",getTotal:function(){return this.collection.getAllowance().total()}});b.TotalAllowanceTableView=b.TotalAssignmentTableView.extend({noRecordMessage:"There is no allowance.",headerView:"la.views.payroll.payment_summaries.TotalAllowanceHeaderView",footerView:"la.views.payroll.payment_summaries.TotalAllowanceFooterView",
getCollection:function(){return this.collection.getAllowance()}});b.TotalAllowanceView=b.TotalAssignmentView.extend({tableName:"totalAllowanceTable",viewName:"la.views.payroll.payment_summaries.TotalAllowanceTableView"})});
ns("la.views.payroll.payment_summaries",function(b){b.TotalAmountErrorView=la.views.BaseView.extend({events:{"click #previousStep":"previousStep"},initialize:function(){this.listenTo(this.model,"change",this.render);this.listenTo(this.model.get("allowances"),"change",this.render);this.listenTo(this.model.get("deductions"),"change",this.render);this.listenTo(this.model.get("additionalRateItems"),"change",this.render)},render:function(){return this.renderHandlebars("payroll/payment_summaries/total_amount_error",
this.model,{errors:this._validateTotalAmounts()})},previousStep:function(){this.model.set({step:3}).trigger("change:step")},_validateTotalGross:function(){if(!this.model.isTotalGrossValid())return this._buildErrorMessage("Gross payments");if(!this.model.isTotalGrossGreaterThanOrEqualZero())return'The Total gross payments cannot be negative. The amount you entered towards Employer super contributions has reduced the Total gross payments to a negative amount. To fix this, you can use the override fields or click on <a id="previousStep" class=".saveAndClose">this link</a> to go to the previous step to update the assignments.'},
_validateTotalAllowances:function(){if(!this.model.isTotalAllowanceValid())return this._buildErrorMessage("Allowances")},_validateTotalUnionFee:function(){if(!this.model.isTotalUnionFeeValid())return this._buildErrorMessage("Union/Professional association fees")},_validateTotalWorkplaceGiving:function(){if(!this.model.isTotalWorkplaceGivingValid())return this._buildErrorMessage("Workplace giving")},_validateTotalEmployerSuper:function(){if(!this.model.isTotalEmployerSuperValid())return this._buildErrorMessage("Reportable employer super contributions")},
_buildErrorMessage:function(a){return"Total "+a+" cannot be greater than 8 digits."},_validateTotalAmounts:function(){var a=[];a.push(this._validateTotalGross());a.push(this._validateTotalAllowances());a.push(this._validateTotalUnionFee());a.push(this._validateTotalWorkplaceGiving());a.push(this._validateTotalEmployerSuper());return _(a).compact()}})});
ns("la.views.payroll.payment_summaries",function(b){b.TotalSuperDeductionHeaderView=b.TotalAssignmentHeaderView.extend({headerTitle:"Reportable employer super contributions"});b.TotalSuperFooterView=b.TotalAssignmentFooterView.extend({footerTitle:"Total contributions:",getTotal:function(){return this.collection.employerSuper().total()}});b.TotalSuperDeductionTableView=b.TotalAssignmentTableView.extend({noRecordMessage:"There is no super contribution.",headerView:"la.views.payroll.payment_summaries.TotalSuperDeductionHeaderView",
footerView:"la.views.payroll.payment_summaries.TotalSuperFooterView",getCollection:function(){return this.collection.employerSuper()}});b.TotalSuperDeductionView=b.TotalAssignmentView.extend({tableName:"totalSuperDeductionTable",viewName:"la.views.payroll.payment_summaries.TotalSuperDeductionTableView"})});
ns("la.views.payroll.payment_summaries",function(b){b.TotalUnionFeeDeductionHeaderView=b.TotalAssignmentHeaderView.extend({headerTitle:"Union / Professional association fees"});b.TotalUnionFeeDeductionFooterView=b.TotalAssignmentFooterView.extend({footerTitle:"Total fees:",getTotal:function(){return this.collection.unionFees().total()}});b.TotalUnionFeeDeductionTableView=b.TotalAssignmentTableView.extend({noRecordMessage:"There is no union fee.",headerView:"la.views.payroll.payment_summaries.TotalUnionFeeDeductionHeaderView",
footerView:"la.views.payroll.payment_summaries.TotalUnionFeeDeductionFooterView",getCollection:function(){return this.collection.unionFees()}});b.TotalUnionFeeDeductionView=b.TotalAssignmentView.extend({tableName:"totalUnionFeeDeductionTable",viewName:"la.views.payroll.payment_summaries.TotalUnionFeeDeductionTableView"})});
ns("la.views.payroll.payment_summaries",function(b){b.TotalWorkplaceGivingDeductionHeaderView=b.TotalAssignmentHeaderView.extend({headerTitle:"Workplace giving"});b.TotalWorkplaceGivingDeductionFooterView=b.TotalAssignmentFooterView.extend({footerTitle:"Total workplace giving:",getTotal:function(){return this.collection.workplaceGiving().total()}});b.TotalWorkplaceGivingDeductionTableView=b.TotalAssignmentTableView.extend({noRecordMessage:"There is no workplace giving.",headerView:"la.views.payroll.payment_summaries.TotalWorkplaceGivingDeductionHeaderView",
footerView:"la.views.payroll.payment_summaries.TotalWorkplaceGivingDeductionFooterView",getCollection:function(){return this.collection.workplaceGiving()}});b.TotalWorkplaceGivingDeductionView=b.TotalAssignmentView.extend({tableName:"totalWorkplaceGivingDeductionTable",viewName:"la.views.payroll.payment_summaries.TotalWorkplaceGivingDeductionTableView"})});
ns("la.views.payroll.payment_summaries",function(b){b.TparLodgingDetailsView=b.BaseLodgingDetailsView.extend({events:_.extend({"click .back":"returnToReport"},b.BaseLodgingDetailsView.prototype.events),generateTpar:!0,templateName:"payroll/payment_summaries/tpar_lodging_details",returnToReport:function(){this.$(history.back(-1))}})});
ns("la.views.payroll.payment_summaries",function(b){b.UnionFeeDeductionOverrideTableView=b.AssignmentOverrideTableView.extend({getCollection:function(){return this.collection.unionFees()}});b.UnionFeeDeductionOverrideView=b.AssignmentOverrideView.extend({tableName:"unionFeeOverrideTable",viewName:"la.views.payroll.payment_summaries.UnionFeeDeductionOverrideTableView"})});
ns("la.views.payroll.payment_summaries",function(b){b.WorkplaceGivingDeductionOverrideTableView=b.AssignmentOverrideTableView.extend({getCollection:function(){return this.collection.workplaceGiving()}});b.WorkplaceGivingDeductionOverrideView=b.AssignmentOverrideView.extend({tableName:"workplaceGivingOverrideTable",viewName:"la.views.payroll.payment_summaries.WorkplaceGivingDeductionOverrideTableView"})});
ns("la.views.payroll.reports",function(b){b.LeaveReportView=la.views.BaseView.extend({mixins:[la.views.mixins.Validatable,la.views.mixins.Focusable],templateName:"payroll/reports/leave_report",events:{"click .input-group-addon":"enableDateRange","click #generateDetailedButton":"generateDetailedReport","click #generateSummaryButton":"generateSummaryReport"},initialize:function(a){this.model=new la.models.reports.payroll.LeaveReport;this.focusElementId="leaveType";this.employeeList=new la.collections.payroll.EmployeeList;
this.employeeList.fetch({async:!1});this.activeList=this.employeeList.activeEmployees();this.addSelectItem(this.activeList);this.allList=this.employeeList.allEmployees();this.addSelectItem(this.allList);this.model.set("employees",this.activeList);this.listenTo(this.model,"change:periodSelection",this.changePeriodSelection);this.listenTo(this.model,"change:from",this.storeValidPeriodInSession);this.listenTo(this.model,"change:to",this.storeValidPeriodInSession);this.listenTo(this.model,"change:showInactive",
this.refreshEmployees)},onDomReady:function(){this._super();this.updateDateFields()},updateDateFields:function(){"YTD"===this.model.get("periodSelection")?(this.$("#from, #to").prop("disabled",!0),this.model.set("from",""),this.model.set("to",""),sessionStore.remove("periodSelection"),sessionStore.remove("leaveReportFrom"),sessionStore.remove("leaveReportTo")):(this.$("#from, #to").prop("disabled",!1),sessionStore.set("periodSelection","DATERANGE"))},enableDateRange:function(){this.$("#from").prop("disabled")&&
this.$("#daterange").click()},generateDetailedReport:function(){var a=this.model.get("leaveType");this.generateReport(a+"-leave-detailed-report.pdf")},generateSummaryReport:function(){var a=this.model.get("leaveType");this.generateReport(a+"-leave-summary-report.pdf")},generateReport:function(a){$.ajax({type:"get",url:this.model._recordCountUrl(),async:!1,success:function(b){0<b?(la.notification.hideFixedNotification(),UrlUtils.openWindow(this.model.pdfUrl(a))):la.notification.showFixedNotification("Nothing to see here. Try changing the filters to include at least one pay run.",
"warning")}.bind(this)})},changePeriodSelection:function(){this.updateDateFields();this.model.validate()},storeValidPeriodInSession:function(){this._storeDateInSession("from","leaveReportFrom");this._storeDateInSession("to","leaveReportTo")},_storeDateInSession:function(a,b){this.model.isValid(a)&&sessionStore.set(b,DateUtils.convertToBackendFormat(this.model.get(a)))},refreshEmployees:function(){this.model.get("showInactive")?this.model.set("employees",this.allList):this.model.set("employees",this.activeList);
this.model.set("employeeId",void 0);this.render();this.updateDateFields()},addSelectItem:function(a){var b=new Backbone.Model({id:void 0,active:!0,displayName:"All employees"});a.unshift(b,[{at:0}])}})});
ns("la.views.registration",function(b){b.InvitationView=la.views.ValidatedFormView.extend({templateName:"registration/user_invitation",initialize:function(a){this._super(a);this.options=a;this._showLoadingSpinner();AuthenticationUtils.cleanCookie();this._loadInvitation(this.options.invitationId)},_loadInvitation:function(a){this.model=new la.models.invitation.Invitation({id:a});this.model.fetch({success:function(){this._hideLoadingSpinner();this.render();this.acceptInvitation()}.bind(this),statusCode:{404:function(){this._hideLoadingSpinner();
this.render()}.bind(this)}})},acceptInvitation:function(){},_showLoadingSpinner:function(){this.options.isLoading=!0},_hideLoadingSpinner:function(){this.model.set("isLoading",!1)}})});
ns("la.views.registration",function(b){b.AdvisorInvitationView=la.views.registration.InvitationView.extend({acceptInvitation:function(){InvitationUtils.getInviteeDetails(this.model.id).then(function(a){0<a.partnerBusinessIds.length?AuthenticationUtils.acceptOrgInvitation(this.model.attributes.email,this.model.id):InvitationUtils.navigateToPartnerSignupPage(this.model.id,this.model.attributes.email)}.bind(this))}})});
ns("la.views.registration",function(b){b.PartnerSignupView=la.views.BaseView.extend({templateName:"registration/partner_signup",events:{"click #loginLink":"_loginAction"},initialize:function(a){this._super(a);this.options=a;this._loadConfig()},_loadConfig:function(){var a=this;b.Config=new la.models.commons.Config;b.Config.fetch({success:function(b){la.AuthenticationContext=new AuthenticationContext({authority:b.get("idamAuthority"),clientId:b.get("idamClientId"),brandingId:b.get("brandingId"),postLogoutRedirectUri:b.get("idamPostLogoutRedirectUri"),
redirectUri:b.get("idamRedirectUri"),storageLocation:"localStorage"});a._updateSignupLink(b.get("partnerProgramUrl"))}})},_updateSignupLink:function(a){this.options.signupUrl=a;this.render()},_loginAction:function(){AuthenticationUtils.acceptOrgInvitationWithoutEmail(this.options.invitationId)}})});
ns("la.views.registration",function(b){b.SelectBusinessDialog=la.views.ValidatedFormDialogView.extend({templateName:"registration/select_business",id:"selectBusinessDialog",focusElementId:"business",events:{"click #selectButton":"_acceptInvitation"},initialize:function(a){_.bindAll(this);this.model=new Backbone.Model({inviter:a.inviter});this.businesses=a.businesses;this.callback=a.callback},_acceptInvitation:function(){this.callback(this.model.get("business"));this.hide()}})});
ns("la.views.registration",function(b){b.UserInvitationView=la.views.registration.InvitationView.extend({acceptInvitation:function(){AuthenticationUtils.acceptUserInvitation(this.model.attributes.email,this.model.attributes.id)}})});
ns("la.views.reports",function(b){b.AccountsFilterView=la.views.ListView.extend({events:{"change #select":"handleSelectAllTick","change li .accountTypeLabel input":"handleAccountTypeTick","change .listItem input":"handleAccountTick","updateModel input":"updateModel"},render:function(){var a=_.groupBy(this.collection.toJSON(),function(a){return a.type});$(this.el).html(HandlebarsTemplates["reports/accounts"]({grouping:a}));this.updateSelectAll();this.updateMinHeight();return this},updateMinHeight:function(){var a=
this.collection.getAccountTypeCount(),a=22*(this.collection.length+a)+215;$("#pageContents").css("min-height",a+"px")},handleSelectAllTick:function(a){this.$(".accountType input").prop("checked",$(a.target).is(":checked")).filter(".listItem input").trigger("updateModel")},handleAccountTypeTick:function(a){$(a.target).parents("li").first().find(".listItem input").prop("checked",$(a.target).is(":checked")).trigger("updateModel");this.updateSelectAll()},handleAccountTick:function(a){a=$(a.target);a.trigger("updateModel");
a=a.parents(".accountType > li");var b=0===a.find(".listItem input:not(:checked)").length;a.find(".accountTypeLabel input").prop("checked",b);this.updateSelectAll()},updateSelectAll:function(){0===this.$(".accountType input:not(:checked)").length?this.$("#select").prop("checked",!0):this.$("#select").prop("checked",!1)},updateModel:function(a){a=$(a.target);this.collection.get(a.data("id")).set("selected",a.is(":checked"))},onDomReady:function(){},getSelectedAccountsAsString:function(){return _.pluck(this.collection.where({selected:!0}),
"id").join(",")}})});
ns("la.views.reports.banking",function(b){b.BankingTransactionsReportView=la.views.ValidatedFormView.extend({templateName:"reports/banking/banking_transactions_report",events:{"click #generateButton":"generateReport"},initialize:function(a){a=la.BusinessSettings.getBusinessId();this.model=new la.models.reports.banking.BankingTransactionsReport;this.accounts=new la.collections.commons.Accounts([],{businessId:a});this.accounts.fetch();this.contacts=new la.collections.ContactsLite([],{businessId:a});
this.contacts.fetch();this.transactionTypes=new Backbone.Collection([new Backbone.Model({value:"-1",name:"All"}),new Backbone.Model({value:"1",name:"Spend Money"}),new Backbone.Model({value:"2",name:"Receive Money"}),new Backbone.Model({value:"4",name:"Journal"}),new Backbone.Model({value:"14",name:"Transfer"}),new Backbone.Model({value:"16",name:"Customer Payment"}),new Backbone.Model({value:"18",name:"Customer Refund"}),new Backbone.Model({value:"23",name:"Supplier Payment"}),new Backbone.Model({value:"25",
name:"Supplier Refund"}),new Backbone.Model({value:"29",name:"Payroll"})],{comparator:!1})},generateReport:function(){this.model.saveLocalPreferences();UrlUtils.openWindow(this.model.pdfUrl())}})});
ns("la.views.reports.bill",function(b){b.BillTransactionsReportView=la.views.ValidatedFormView.extend({templateName:"reports/bill/bill_transactions_report",events:{"click #generateButton":"generateReport"},initialize:function(a){a=la.BusinessSettings.getBusinessId();this.model=new la.models.reports.bill.BillTransactionsReport;this.contacts=new la.collections.ContactsLite([],{businessId:a});this.contacts.fetch()},generateReport:function(){this.model.saveLocalPreferences();UrlUtils.openWindow(this.model.pdfUrl())}})});
ns("la.views.reports.bill",function(b){b.BillsBySupplierReportView=la.views.ValidatedFormView.extend({templateName:"reports/bill/bills_by_supplier_report",events:{"click #generateButton":"generateReport","change #isItemDetailIncluded":"updateCheckboxes"},initialize:function(a){a=la.BusinessSettings.getBusinessId();this.model=new la.models.reports.bill.BillsBySupplierReport;this.contacts=new la.collections.ContactsLite([],{businessId:a});this.contacts.fetch();this.statuses=new Backbone.Collection([new Backbone.Model({value:"-1",
name:"All"}),new Backbone.Model({value:"2",name:"Open"}),new Backbone.Model({value:"4",name:"Debit"}),new Backbone.Model({value:"5",name:"Paid"})],{comparator:!1})},generateReport:function(){this.model.saveLocalPreferences();UrlUtils.openWindow(this.model.pdfUrl())},updateCheckboxes:function(){this.model.get("isItemDetailIncluded")?(this.$("#isSubTotalByItem").prop("checked",!1).change(),this.$("#isSubTotalByItem").prop("disabled",!0).change()):this.$("#isSubTotalByItem").prop("disabled",!1).change()}})});
ns("la.views.reports.bill",function(b){b.BillsReconciliationReportView=la.views.ValidatedFormView.extend({templateName:"reports/bill/bills_reconciliation_report",events:{"click #generateButton":"generateReport"},initialize:function(a){this.model=new la.models.reports.bill.BillsReconciliationReport},generateReport:function(){this.model.saveLocalPreferences();UrlUtils.openWindow(this.model.pdfUrl())}})});
ns("la.views.reports.bill",function(b){b.BillsReportView=la.views.ValidatedFormView.extend({templateName:"reports/bill/bills_report",events:{"click #generateButton":"generateReport"},initialize:function(a){a=la.BusinessSettings.getBusinessId();this.model=new la.models.reports.bill.BillsReport;this.statuses=new Backbone.Collection([new Backbone.Model({value:"-1",name:"All"}),new Backbone.Model({value:"2",name:"Open"}),new Backbone.Model({value:"4",name:"Debit"}),new Backbone.Model({value:"5",name:"Paid"})],
{comparator:!1});this.contacts=new la.collections.ContactsLite([],{businessId:a});this.suppliers=new Backbone.Collection;this.populateSuppliers()},generateReport:function(){this.model.saveLocalPreferences();UrlUtils.openWindow(this.model.pdfUrl())},populateSuppliers:function(){this.contacts.fetch({success:function(){this.suppliers.add(this.contacts.suppliers().models)}.bind(this)})}})});
ns("la.views.reports.bill",function(b){b.SupplierPaymentsReportView=la.views.ValidatedFormView.extend({templateName:"reports/bill/supplier_payments_report",events:{"click #generateButton":"generateReport"},initialize:function(a){a=la.BusinessSettings.getBusinessId();this.model=new la.models.reports.bill.SupplierPaymentsReport;this.contacts=new la.collections.ContactsLite([],{businessId:a});this.contacts.fetch()},generateReport:function(){this.model.saveLocalPreferences();UrlUtils.openWindow(this.model.pdfUrl())}})});
ns("la.views.reports.bill",function(b){b.UnpaidBillsReportView=la.views.ValidatedFormView.extend({templateName:"reports/bill/unpaid_bills_report",events:{"click #generateButton":"generateReport"},initialize:function(a){a=la.BusinessSettings.getBusinessId();this.model=new la.models.reports.bill.UnpaidBillsReport;this.contacts=new la.collections.ContactsLite([],{businessId:a});this.contacts.fetch()},generateReport:function(){this.model.saveLocalPreferences();UrlUtils.openWindow(this.model.pdfUrl())}})});
ns("la.views.reports.business",function(b){b.AccountListReportView=la.views.ValidatedFormView.extend({templateName:"reports/business/account_list_report",events:{"click #generateButton":"generateReport"},initialize:function(a){this.model=new la.models.reports.business.AccountListReport},generateReport:function(){this.model.saveLocalPreferences();UrlUtils.openWindow(this.model.pdfUrl())}})});
ns("la.views.reports.business",function(b){b.BalanceSheetDataView=la.views.BaseView.extend({id:"balance-sheet-data-view",templateName:"reports/business/balance_sheet_data",expandedAccountIdKey:"BalanceSheetView.expandedAccountId",highlightedTransactionIdKey:"BalanceSheetView.highlightedTransactionIdKey",events:{},initialize:function(a){this.model=new la.models.reports.business.BalanceSheetData({businessId:a.businessId,showCents:a.showCents,showAccountNumbers:a.showAccountNumbers,to:a.to,includeOpeningBalance:!0});
this.listenTo(this.model,"sync",this.renderData);this.initializeDrillable(a)},render:function(){this.renderHandlebars(this.templateName);this.showSpinner(!0);this.model.fetch();return this},renderData:function(){this.showSpinner(!1);this.renderHandlebars(this.templateName,this.model,{precision:this.model.get("showCents")?2:0,showAccountNumbers:this.model.get("showAccountNumbers")});return this},refresh:function(a,b,c){this.showSpinner(!0);this.model.set({to:a,showCents:c,showAccountNumbers:b},{silent:!0});
this.model.fetch()},showSpinner:function(a){this.$(".loadingSpinner").toggle(a);this.$(".drillableReport").toggle(!a)}});_.extend(la.views.reports.business.BalanceSheetDataView.prototype,la.views.DrillableAccountsView)});
ns("la.views.reports.business",function(b){b.BalanceSheetView=la.views.ValidatedFormView.extend({id:"balance-sheet-report",templateName:"reports/business/balance_sheet",events:{"click #updateButton":"updateReport","click .btn-xls":"showXls","click .btn-pdf":"showPdf"},initialize:function(a){this.businessId=a.businessId;this.reportPreference=this.addSubview(new la.views.reports.ReportPreferenceView({container:this}),"#reportPreferenceAnchor");this.listenTo(this.reportPreference.model,"change",this.updateReport);
this.model=new la.models.reports.business.BalanceSheet({showCents:this.reportPreference.model.get("showCents"),showAccountNumbers:this.reportPreference.model.get("showAccountNumbers")});this.balanceSheetDataView=this.addSubview(new la.views.reports.business.BalanceSheetDataView({businessId:this.businessId,showCents:this.reportPreference.model.get("showCents"),showAccountNumbers:this.reportPreference.model.get("showAccountNumbers"),container:this,to:this.model.get("to")}),"#balanceSheetReportAnchor");
this.listenTo(this.model,"change",this.toggleOptions)},toggleOptions:function(){var a=!this.model.isValid(!0,{silent:!0});this.$(".btn-xls").attr("disabled",a);this.$(".btn-pdf").attr("disabled",a);a?this.reportPreference.disable():this.reportPreference.enable()},render:function(){this.renderHandlebars(this.templateName);this.renderSubviews();this.trackReport();return this},updateReport:function(){this.model.savePreference();var a=this.reportPreference.model.get("showAccountNumbers"),b=this.reportPreference.model.get("showCents");
this.balanceSheetDataView.refresh(this.model.get("to"),a,b);this.trackReport()},buildExportReportUrl:function(a){var b=DateUtils.convertToBackendFormat(this.model.get("to")),c=this.reportPreference.model.get("showCents")?2:0,d=this.reportPreference.model.get("showAccountNumbers");this.trackReport(a);return UrlUtils.webUrl(this.businessId,"/balanceSheetReport/BalanceSheetReport."+a)+"?reportDate="+b+"&precision="+c+"&showAccountNumbers="+d},showPdf:function(){UrlUtils.openWindow(this.buildExportReportUrl("pdf"))},
showXls:function(){UrlUtils.openXls(this.buildExportReportUrl("xls"))},trackReport:function(a){var b=DateUtils.convertToBackendFormat(this.model.get("to")),c=this.reportPreference.model.get("showCents"),d=this.reportPreference.model.get("showAccountNumbers");analytics.track(this.id,{format:void 0===a?"html":a,date:b,showAccountNumbers:d,showCents:c})}})});
ns("la.views.reports.business",function(b){b.BakingReconciliationView=la.views.BaseIFrameView.extend({templateName:"commons/iframe_container",initialize:function(a){this._super(a);this._setId("bankingReconciliationReportFrame");this._setUrl(UrlUtils.webUrl(la.BusinessSettings.getBusinessId(),"/pastbankrecs"))}})});
ns("la.views.reports.business",function(b){b.ContactReportView=la.views.ValidatedFormView.extend({templateName:"reports/business/contact_report",events:{"click #generateButton":"generateReport"},initialize:function(a){this.model=new la.models.reports.business.ContactReport},generateReport:function(){this.model.saveLocalPreferences();UrlUtils.openWindow(this.model.pdfUrl())}})});
ns("la.views.reports.business",function(b){b.GstLodgementView=la.views.BaseView.extend({templateName:"reports/business/gst_lodgement",preferencePrefix:"gstLodgementView",initialize:function(a){this.model=new la.models.Model({apiKey:la.Config.getPracticeOnlineApiKey(),iframeUrl:la.Config.getPracticeOnlineIFrameUrl()})}})});
ns("la.views.reports.business",function(b){b.GstReportView=la.views.ValidatedFormView.extend({templateName:"reports/business/gst_report",preferencePrefix:"gstReportView",events:{"click #generateButton":"generateReport","change #type":"updateReportingPeriod","change #year":"updateMonthEndingSelect"},updateReportingPeriod:function(){la.Config.isNZ()&&"form"===this.$("#type").val()?(this.$("#ird-form-fields").show(),this.$("#date-picker-form-fields").hide()):(this.$("#ird-form-fields").hide(),this.$("#date-picker-form-fields").show())},
updateMonthEndingSelect:function(){if(la.Config.isNZ()){var a=this.model.get("year"),a=moment().year(a);this.$("#end option").remove();for(var b=0;12>b;b++)a.month(b).endOf("month"),this.$("#end").append($("<option/>").val(a.format("YYYY-MM-DD")).text(a.format("DD MMMM")));this.$("#end").val(this.model.get("end"))}},getAuReportingDates:function(){var a=la.BusinessSettings.get("gstReportingPeriod"),b=DateUtils.serverDate().month(),c=DateUtils.serverDate(),d=DateUtils.serverDate();"MONTHLY"===a?(c.startOf("month"),
d.endOf("month")):"QUARTERLY"===a?3>b?(c.month("Jan").startOf("month"),d.month("Mar").endOf("month")):6>b?(c.month("Apr").startOf("month"),d.month("Jun").endOf("month")):9>b?(c.month("Jul").startOf("month"),d.month("Sep").endOf("month")):(c.month("Oct").startOf("month"),d.month("Dec").endOf("month")):"ANNUALLY"===a&&(6>b?(c.subtract("year",1).month("Jul").startOf("month"),d.month("Jun").endOf("month")):(c.month("Jul").startOf("month"),d.add("year",1).month("Jun").endOf("month")));return{from:DateUtils.formatAsBackend(c),
to:DateUtils.formatAsBackend(d)}},getNzReportingPeriod:function(){switch(la.BusinessSettings.get("gstReportingPeriod")){case "MONTHLY":return 1;case "TWO_MONTHLY":return 2;case "HALF_YEARLY":return 6}throw"Unknown GST reporting period";},getNzReportingDates:function(){var a=DateUtils.serverDate(),b=DateUtils.serverDate();3>DateUtils.serverDate().month()?(a.subtract("year",1).month("Apr").startOf("month"),b.month("Mar").endOf("month")):(a.month("Apr").startOf("month"),b.add("year",1).month("Mar").endOf("month"));
return{from:DateUtils.formatAsBackend(a),to:DateUtils.formatAsBackend(b),period:this.getNzReportingPeriod()}},initialize:function(){var a=_.join(".",this.preferencePrefix,la.BusinessSettings.getBusinessId(),"reportingPeriod"),b=sessionStore.get(a),c=la.BusinessSettings.get("gstReportingPeriod");b===c?(a=la.Config.isAU()?void 0:this.getNzReportingPeriod(),this.model=new la.models.reports.business.GstReport({period:a})):(sessionStore.set(a,c),a=la.Config.isAU()?this.getAuReportingDates:this.getNzReportingDates,
a=_.bind(a,this),this.model=new la.models.reports.business.GstReport(a()),this.model.saveDateFilterPreferences())},onDomReady:function(){this._super();this.updateReportingPeriod();this.updateMonthEndingSelect();var a=this.$("#type").val();this.model.set("type",a?a:this.model.get("type"))},generateReport:function(){var a=this;this.model.saveLocalPreferences();la.Config.isAU()?UrlUtils.openWindow(this.model.pdfUrl()):this.checkIfReportHasEntries(this.model.checkUrl(),function(){UrlUtils.openWindow(a.model.pdfUrl())})},
checkIfReportHasEntries:function(a,b){var c=this;$.ajax({url:a,context:document.body,success:function(a){a["has-entries"]?b():c.showInformationDialog("GST report",["There are no transactions available for this period."])},error:function(){c.showInformationDialog("GST report",["Failed to run the requested report. Please try again."])}})}})});
ns("la.views.reports.business",function(b){b.JournalReportView=la.views.ValidatedFormView.extend({templateName:"reports/business/journal_report",events:{"click #generateButton":"generateReport"},initialize:function(a){this.model=new la.models.reports.business.JournalReport},generateReport:function(){this.model.saveDateFilterPreferences();UrlUtils.openWindow(this.model.pdfUrl())}})});
ns("la.views.reports.business",function(b){b.TaxablePaymentsView=la.views.BaseIFrameView.extend({templateName:"commons/iframe_container",initialize:function(a){this._super(a);this._setId("taxablePaymentsReportFrame");this._setUrl(UrlUtils.webUrl(la.BusinessSettings.getBusinessId(),"/report/taxablePayments"))}})});
ns("la.views.reports.business",function(b){b.TrialBalanceView=la.views.ValidatedFormView.extend({templateName:"reports/business/trial_balance",events:{"click #generateButton":"generateReport"},initialize:function(a){this.model=new la.models.reports.business.TrialBalanceReport},generateReport:function(){this.model.saveLocalPreferences();UrlUtils.openWindow(this.model.pdfUrl())}})});
ns("la.views.reports",function(b){b.DateFilterView=la.views.ValidatedFormView.extend({templateName:"reports/date_filter",initialize:function(a){this.model=new la.models.reports.DateFilter({from:a.from,to:a.to,preferenceName:a.preferenceName})}})});
ns("la.views.reports",function(b){b.GeneralLedgerReportView=la.views.ListView.extend({id:"general-ledger-report",events:{"click a.dropdown-toggle":"toggle","click #datePickerUpdateButton":"showReport","click .btn-xls":"showXls","click .btn-pdf":"showPdf","click .detailRow a":"addClickedJournalToBreadcrumb"},accountsListLoaded:!1,initialize:function(a){a=a||{};a.preferenceName="generalLedgerReport";this.accountId=a.accountId;this.transactionId=a.transactionId;this.reportPreferenceView=new la.views.reports.ReportPreferenceView({container:this});
this.listenTo(this.reportPreferenceView.model,"change",this.render);this.accountList=new la.collections.commons.Accounts([],{businessId:a.businessId});var b=this;this.accountList.fetch({success:function(a){b.accountsListLoaded=!0;var d=la.BusinessSettings.getPreference("generalLedgerReport","accountsSelected");a.each(function(a){var b=a.get("id");-1===d.indexOf(b)&&"all"!==d||a.set("selected",!0)},this);b.render()}});this.dateFilter=new la.views.reports.DateFilterView({from:a.from,to:a.to,preferenceName:a.preferenceName,
container:this});this.accountFilter=new la.views.reports.AccountsFilterView({businessId:this.businessId,collection:this.accountList,container:this});this.listenTo(this.dateFilter.model,"change",this.updatePage)},addClickedJournalToBreadcrumb:function(a){var b=$(a.target);a=b.data("transactionId");b=b.parents("tbody:first").find(".tableTotal").attr("id");la.breadcrumb.updateUrlToIncludeAccountAndTransaction("generalLedgerReportForm",b,a)},render:function(){this.$el.html(HandlebarsTemplates["reports/general_ledger_report"]({cashBasis:this.reportPreferenceView.cashBasis}));
this.$("#dateFilter").html(this.dateFilter.render().el);this.$(".dropdown-menu").html(this.accountFilter.render().el);this.reportPreferenceView.setElement(this.$("#reportPreferenceAnchor")).render();this.dateFilter.delegateEvents();this.accountFilter.delegateEvents();this.fetchTransactions();this.bgImageStyle=this.$("#selectAccounts").css("background-image");return this},enablePage:function(){this.$(".loadingSpinner").hide();this.enableForm()},disablePage:function(){this.$(".loadingSpinner").show();
this.disableForm()},updatePage:function(a){this.dateFilter.model.isValid(!0)?(this.$("#selectAccounts").attr("disabled",!1),this.$("#selectAccounts").css("background-image",this.bgImageStyle),this.$(".btn-xls").attr("disabled",!1),this.$(".btn-pdf").attr("disabled",!1),this.$("#changeBasis").removeAttr("disabled"),this.$("#changeBasis").removeClass("disabled"),this.reportPreferenceView.enable()):(this.$("#selectAccounts").attr("disabled",!0),this.$("#selectAccounts").css("background-image","none"),
this.$(".btn-xls").attr("disabled",!0),this.$(".btn-pdf").attr("disabled",!0),this.$("#changeBasis").attr("disabled","disabled"),this.$("#changeBasis").addClass("disabled"),this.reportPreferenceView.disable())},toggle:function(a){var b=this.$(".dropdown-toggle"),c=b.parent(".dropdown"),d=this.$("i.fa");"disabled"!==b.attr("disabled")&&(b=this.accountList.getSelectedAccountsAsString(),c.hasClass("open")?(this.isAnyAccountSelected()&&this.selectedAccounts!==b&&this.showReport(),d.removeClass("fa-caret-down").addClass("fa-caret-right")):
d.removeClass("fa-caret-right").addClass("fa-caret-down"),c.toggleClass("open"),this.selectedAccounts=b,a.stopPropagation())},fetchTransactions:function(){if(this.isAnyAccountSelected()){var a=this.dateFilter.model.get("from"),b=this.dateFilter.model.get("to");this.$("#generalLedgerReportAnchor").html("");this.disablePage();this.getDateFiltersAndShowSpinner();this.collection=new la.collections.reports.AccountJournalEntries(void 0,{businessId:this.businessId});var c=this;this.collection.fetchByDateAccountIds(a,
b,this.accountList.getSelectedAccountsAsString(),this.reportPreferenceView.cashBasis,{success:function(){c.journalTable=new la.views.reports.JournalTableView({businessId:c.businessId,collection:c.collection,transactionId:c.transactionId,accountId:c.accountId,container:c});c.$("#generalLedgerReportAnchor").html(c.journalTable.render().el);c.enablePage()},error:function(){c.enablePage()}})}},onDomReady:function(){},isAnyAccountSelected:function(){return 0===this.accountList.getSelectedAccountsAsString().length?
(this.$("#generalLedgerReportAnchor").html(""),this.accountsListLoaded&&this.showNotification("Please select at least one account","danger"),!1):!0},showReport:function(){this.isAnyAccountSelected()&&(this.dateFilter.model.saveDateFilterPreferences(),this.saveSelectedAccountsPreference(),this.fetchTransactions())},getDateFiltersAndShowSpinner:function(){var a=this.dateFilter.model.get("from"),b=this.dateFilter.model.get("to");this.$("#generalLedgerReportAnchor").html("");this.disablePage();return{fromDate:a,
toDate:b}},showXls:function(a){this.isAnyAccountSelected()&&(UrlUtils.openXls(this.processUrl("/generalLedgerReport.xls","")),this.showReport())},showPdf:function(a){this.isAnyAccountSelected()&&(this.showReport(),a="GL Report - "+moment().format("YYYY-MM-DD HH-mm")+".pdf",UrlUtils.openWindow(this.processUrl("/generalLedgerReport/print/",a)))},processUrl:function(a,b){var c=this.dateFilter.model.get("from"),d=this.dateFilter.model.get("to");return UrlUtils.webUrl(this.businessId,a+b+"?from="+c+"&to="+
d+"&accountIds="+this.accountList.getSelectedAccountsAsString()+"&isCashBasis="+this.reportPreferenceView.cashBasis)},saveSelectedAccountsPreference:function(){var a=this.accountList.getSelectedAccountsAsString();la.BusinessSettings.setPreference("generalLedgerReport","accountsSelected",a)}})});
ns("la.views.reports",function(b){b.GstDetailedReportView=la.views.ListView.extend({id:"gst-detailed-report",events:{"click button":"showReport","click .btn-xls":"showXls","click .btn-pdf":"showPdf"},initialize:function(a){a=a||{};a.preferenceName="gstDetailedReport";var b=la.BusinessSettings,c=a.preferenceName+"."+b.get("businessId")+".reportingPeriod",d=sessionStore.get(c),b=b.get("gstReportingPeriod");d===b?this.dateFilter=new la.views.reports.DateFilterView({preferenceName:a.preferenceName,container:this}):
(sessionStore.set(c,b),c="QUARTERLY"===b?this.getDefaultGstReportDateQuarterly():this.getDefaultGstReportDateMonthlyAnnually(),this.dateFilter=new la.views.reports.DateFilterView($.extend(c,{preferenceName:a.preferenceName,container:this})),this.dateFilter.model.saveDateFilterPreferences());this.reportPreference=new la.views.reports.ReportPreferenceView({container:this});this.listenTo(this.reportPreference.model,"change",this.onReportPreferenceChanged);this.listenTo(this.dateFilter.model,"validated",
this.updatePage)},render:function(){this.$el.html(HandlebarsTemplates["reports/gst_detailed_report"]());this.$("#dateFilter").html(this.dateFilter.render().el);this.reportPreference.setElement(this.$("#reportPreferenceAnchor")).render();this.dateFilter.delegateEvents();this.disablePage();this.fetchTransactions();return this},getDefaultGstReportDateQuarterly:function(){var a=DateUtils.serverDate();28>=a.date()&&a.subtract("days",28);0===a.month()&&a.subtract("months",1);a.month(3*Math.floor(a.month()/
3));return{from:DateUtils.formatAsBackend(a.startOf("month")),to:DateUtils.formatAsBackend(a.add("months",2).endOf("month").startOf("day"))}},getDefaultGstReportDateMonthlyAnnually:function(){var a=DateUtils.serverDate();21>=a.date()&&a.subtract("days",22);return{from:DateUtils.formatAsBackend(a.startOf("month")),to:DateUtils.formatAsBackend(a.endOf("month").startOf("day"))}},enablePage:function(){this.hideLoadingSpinner();this.enableForm()},disablePage:function(){this.showLoadingSpinner();this.disableForm()},
updatePage:function(a){this.dateFilter.model.isValid(!1)?(this.$(".btn-xls").attr("disabled",!1),this.$(".btn-pdf").attr("disabled",!1),this.$("#changeBasis").removeAttr("disabled"),this.$("#changeBasis").removeClass("disabled"),this.reportPreference.enable()):(this.$(".btn-xls").attr("disabled",!0),this.$(".btn-pdf").attr("disabled",!0),this.$("#changeBasis").attr("disabled","disabled"),this.$("#changeBasis").addClass("disabled"),this.reportPreference.disable())},onReportPreferenceChanged:function(){this.dateFilter.model.saveDateFilterPreferences();
this.fetchTransactions()},fetchTransactions:function(){this.showLoadingSpinner();this.collection=new la.collections.reports.GstReportJournalEntries(void 0,{businessId:this.businessId});var a=this.getReportOption("cashBasis"),b=this;this.collection.fetchByFilters(this.dateFilter.model.get("from"),this.dateFilter.model.get("to"),!0,a,{success:function(){b.gstDetailedTable=new la.views.reports.GstDetailedTableView({businessId:b.businessId,collection:b.collection,container:b});b.$("#gstDetailedReportAnchor").html(b.gstDetailedTable.render().el);
b.enablePage();b.hideLoadingSpinner()},error:function(){b.enablePage();b.hideLoadingSpinner()}})},onDomReady:function(){},showReport:function(){this.dateFilter.model.saveDateFilterPreferences();this.fetchTransactions()},getDateFiltersAndShowSpinner:function(){var a=this.dateFilter.model.get("from"),b=this.dateFilter.model.get("to");this.$("#gstDetailedReportAnchor table").html("");this.disablePage();return{fromDate:a,toDate:b}},showXls:function(a){this.showReport();a="GST Detailed Report - "+moment().format("YYYY-MM-DD HH-mm")+
".xls";UrlUtils.openXls(this.processUrl("/gstDetailedReport/print/",a));this.showReport()},showPdf:function(a){this.showReport();a="GST Detailed Report - "+moment().format("YYYY-MM-DD HH-mm")+".pdf";UrlUtils.openWindow(this.processUrl("/gstDetailedReport/print/",a))},getReportOption:function(a){return this.reportPreference.model.get(a)},processUrl:function(a,b){var c=this.dateFilter.model.get("from"),d=this.dateFilter.model.get("to"),f=this.getReportOption("cashBasis");return UrlUtils.webUrl(this.businessId,
a+b+"?from="+c+"&to="+d+"&isCashBasis="+f+"&isTaxInclusive=1")},handlerLoginSuccess:function(){this.showNotification("Please try to run the report again","error");la.AJAX_EVENT_TRIGGER.off(la.AJAX_LOGIN_SUCCESS,this.handlerLoginSuccess,this)},showLoadingSpinner:function(){this.$("#gstDetailedReportAnchor table").html("");this.$(".loadingSpinner").show()},hideLoadingSpinner:function(){this.$(".loadingSpinner").hide()}})});
ns("la.views.reports",function(b){b.GstDetailedTableView=la.views.ListView.extend({className:"table tabularReport",tagName:"table",initialize:function(a){this.collection.bind("reset",this.render,this);this.hideAccountHeader=a.hideAccountHeader||!1;this.hideBlank=a.hideBlank||!1},render:function(){$(this.el).html(HandlebarsTemplates["reports/gst_type_tables"]({majorheadings:this.collection.toJSON()}));this.renderEntries(this,0,0,0);this.renderEntries(this,0,0,1);return this},renderEntries:function(a,
b,c,d){var f=a.collection.at(d).get("taxCodeSections")[b];f?(a.$("#"+d+"-"+f.taxType).before(HandlebarsTemplates["reports/gst_report_journal_entries"]({entries:f.journals.slice(c,c+100),taxTypeId:f.taxType})),c+=100,f.journals.length>c?_.delay(a.renderEntries,10,a,b,c,d):(b+=1,c=0,a.collection.at(d).get("taxCodeSections").length>b&&_.delay(a.renderEntries,10,a,b,c,d))):0===b&&a.$(".section-"+d).after('<tr><td colspan="8"><div class="alert alert-info">There is no data for this section</div></td></tr>')},
onDomReady:function(){}})});
ns("la.views.reports",function(b){b.JournalTableView=la.views.ListView.extend({className:"table tabularReport",tagName:"table",initialize:function(a){this.collection.bind("reset",this.render,this);this.hideAccountHeader=a.hideAccountHeader||!1;this.hideBlank=a.hideBlank||!1;this.scrollToAccountId=a.accountId;this.scrollToTransactionId=a.transactionId},render:function(){$(this.el).html(HandlebarsTemplates["reports/journal_tables"]({accounts:this.collection.toJSON(),hideAccountHeader:this.hideAccountHeader,hideBlank:this.hideBlank}));
this.renderEntries(this,0,0);return this},renderEntries:function(a,b,c){a.verifyEmptyTransaction();var d=a.collection.at(b);d&&(a.$("#"+d.get("id")).before(HandlebarsTemplates["reports/journal_entries"]({entries:d.get("journalEntries").slice(c,c+100),accountId:d.get("id")})),c+=100,d.get("journalEntries").length>c?_.delay(a.renderEntries,10,a,b,c):(b+=1,c=0,a.collection.size()>b&&_.delay(a.renderEntries,10,a,b,c)),d.get("id")===parseInt(a.scrollToAccountId,10)&&a.scrollToTransaction())},verifyEmptyTransaction:function(){0===
this.collection.size()&&this.showNotification("No transaction found","info")},scrollToTransaction:function(){if(this.scrollToTransactionId)try{var a=this.$("tbody.account"+this.scrollToAccountId+" .detailRow:has(a[data-transaction-id="+this.scrollToTransactionId+"])");if(0===a.length){var b=$("#"+this.scrollToAccountId).offset().top-$(window).height()/2;$("html, body").animate({scrollTop:b},200)}else{var c=a.offset().top-$(window).height()/2;$("html, body").animate({scrollTop:c},200);a.addClass("highlight");
window.setTimeout(function(){a.addClass("fadeOutHighlight")},2E3)}}catch(d){this.scrollToAccountId=void 0}},onDomReady:function(){}})});
ns("la.views.reports.payroll",function(b){b.PayrollReportView=la.views.ValidatedFormView.extend({templateName:"reports/payroll/payroll_report",events:{"click #generateSummaryButton":"generateSummaryReport","click #generateDetailedButton":"generateDetailedReport"},initialize:function(a){this.model=new la.models.reports.payroll.PayrollReport;this.listenTo(this.model,"change:periodSelection",this.changePeriodSelection)},onDomReady:function(){this._super();this.updateDateFields()},generateSummaryReport:function(){this.model.saveLocalPreferences();
UrlUtils.openWindow(this.model.summaryPdfUrl())},generateDetailedReport:function(){this.model.saveLocalPreferences();UrlUtils.openWindow(this.model.detailedPdfUrl())},updateDateFields:function(){"YTD"===this.model.get("periodSelection")?this.$("#from, #to").prop("disabled",!0):this.$("#from, #to").prop("disabled",!1)},changePeriodSelection:function(){this.model.isValid("from")||this.model.set("from",DateUtils.startOfCurrentFinancialYear());this.model.isValid("to")||this.model.set("to",DateUtils.today());
this.model.validate();this.updateDateFields()}})});ns("la.views.reports",function(b){b.PLReportFinancialYearDateFilterView=b.DateFilterView.extend({templateName:"reports/pl_report_date_filter",initialize:function(a){this.model=new la.models.reports.PLReportFinancialYearDateFilter({from:a.from,to:a.to,preferenceName:a.preferenceName,invalidMessagePrefix:a.invalidMessagePrefix,breakdown:a.breakdown||"YEAR",showDisplayPeriods:a.showDisplayPeriods})}})});
ns("la.views.reports",function(b){b.JournalEntryClickEventHandler={events:{"click a":"addExpandedAccountToBreadcrumb"},addExpandedAccountToBreadcrumb:function(a){var b=$(a.target);a=b.parents(".journalEntries").parents("tr:eq(0)").prev().children("td.highlight").children("a").attr("id");var b=b.data("transactionId"),c=la.views.reports.ProfitLossReportTableView.INVISIBLE_CLASS_NAME,c=!1===$("#preButton").hasClass(c)&&$("#nextButton").hasClass(c)?1:0;la.breadcrumb.updateUrlToIncludeAccountAndTransaction("profitLoss",
a,b,c)}};b.ProfitLossReportTableView=la.views.BaseView.extend({tagName:"div",INVISIBLE_CLASS_NAME:"invisible",events:{"click #nextButton,#preButton":"togglePage","click .accountBalance":"showAccountTransactions","click .accountPeriodBalance":"showAccountTransactions","click .closeAccountTransactions":"hideAccountTransactions","hover .journalEntriesContainer tr":"rowHighlight"},initialize:function(a){this.options=a||{};this.options.showAccountNumbers=a.showAccountNumbers||!1;this.reportPreference=
a.reportPreference;this.breakdown=this.options.breakdown;this.monthPageIndex=this.options.monthPageIndex;this.from=this.options.from;this.to=this.options.to;$(window).scroll(this.detectScroll);this.expandedAccountId=this.options.expandedAccountId;this.highlightedTransactionId=this.options.highlightedTransactionId;this.shouldScroll=!0;this.fetchSuccessHandler=this.options.fetchSuccessHandler},renderPageWithIndex:function(a){var b=this.reportPreference.model,c=a.profitLossReport.get("columnLabels");
$(a.el).html(HandlebarsTemplates["reports/profit_loss_report_table_breakdown"]({companyName:la.BusinessSettings.get("businessName"),rangeDescription:a.profitLossReport.get("dateRangeDescription"),groups:a.profitLossReport.get("profitLossAccountGroups"),showAccountNumbers:b.get("showAccountNumbers"),breakdownLabels:c,breakdown:a.breakdown,startIndex:6*a.monthPageIndex}));"MONTH"===a.breakdown&&!_(c).isUndefined()&&6<_(c).size()?0===a.monthPageIndex?a.showNextButton():a.showPreButton():a.hideNavigationButton()},
render:function(){var a=this.reportPreference.model;this.profitLossReport=new la.collections.reports.ProfitLossReport({businessId:this.businessId,from:this.from,to:this.to,cashBasis:a.get("cashBasis"),showAccountNumbers:a.get("showAccountNumbers"),showCents:a.get("showCents"),parenthesisNegative:a.get("parenthesisNegative"),breakdown:this.breakdown});var b=this;this.profitLossReport.fetch({success:function(){b.renderPageWithIndex(b);_.isUndefined(b.fetchSuccessHandler)||b.fetchSuccessHandler(b.profitLossReport);
b.$('a[id="'+b.expandedAccountId+'"]').click()},error:function(){b.$(".loadingSpinner").hide()}});$(b.el).html(HandlebarsTemplates["reports/profit_loss_report_loading"]());b.$(".loadingSpinner").show();return this},showAccountTransactionContainer:function(a,b){var c=this.$("#journalEntriesContainer"+b);$("#journalEntries"+b,a).html('<div class="smallLoadingSpinner"></div>');c.show();var d=["#journalEntriesContainer"+b,"#blankTopRow"+b,"#blankRow"+b].join();this.$(d).parents(".journalEntriesContainerRow").show();
$("div.smallLoadingSpinner",c).show()},showAccountTransactions:function(a){var e=this,c=$(a.target),d=c.data("accountid"),f=c.data("from"),g=c.data("to"),h=e.$("#journalEntriesContainer"+d),l=h.is(":visible"),k=this.$(".highlight [data-accountid="+d+"]");this.setAmountHighlight(d,f,!1);if(l&&k.data("accountid")===c.data("accountid")&&k.data("from")===c.data("from"))this.hideAccountTransactions(a);else{this.showAccountTransactionContainer(h,d);this.setAmountHighlight(d,f,!0);var m=this.collection=
new la.collections.reports.JournalEntries(void 0,{businessId:e.businessId,from:_(f).isUndefined()?e.from:f,to:_(g).isUndefined()?e.to:g,cashBasis:e.reportPreference.model.get("cashBasis"),accountId:d});m.fetch({success:function(a){var c="[data-accountid="+a.accountId+"]";e.$(".accountPeriodBalance"+c+",.accountBalance"+c).closest("td").hasClass("highlight")&&(e.journalTable=new la.views.reports.JournalTableView({businessId:e.businessId,collection:m,hideAccountHeader:!0,hideBlank:!0,container:e}),
e.journalTable=_.extend(e.journalTable,b.JournalEntryClickEventHandler),e.$("#journalEntries"+a.accountId).html(e.journalTable.render().el),e.journalTable.delegateEvents(),e.toggleTransactionContainer(a.accountId,!0),e.scrollToExpandedAccountAndHighlightedTransaction())}})}},hideAccountTransactions:function(a){var b=$(a.target).data("accountid");a=$(a.target).data("from");this.setAmountHighlight(b,a,!1);this.toggleTransactionContainer(b,!1);this.setAmountHighlight(b,a,!1)},setAmountHighlight:function(a,
b,c){c?_(b).isUndefined()?this.$(".accountBalance[data-accountid="+a+"]").closest("td").addClass("highlight"):this.$(".accountPeriodBalance[data-accountid="+a+'][data-from="'+b+'"]').closest("td").addClass("highlight"):this.$(".accountBalance[data-accountid="+a+"],.accountPeriodBalance[data-accountid="+a+"]").closest("td").removeClass("highlight")},toggleTransactionContainer:function(a,b){var c=["#journalEntriesContainer"+a,"#blankTopRow"+a,"#blankRow"+a].join(),d=this.$(c);b?(d.parents(".journalEntriesContainerRow").show(),
d.show({duration:200})):d.slideUp(function(){d.parents(".journalEntriesContainerRow").hide()})},scrollToExpandedAccountAndHighlightedTransaction:function(){if(this.highlightedTransactionId&&this.shouldScroll&&this.expandedAccountId){this.shouldScroll=!1;try{var a=this.$("#"+this.expandedAccountId).data("accountid"),b=$("#journalEntries"+a+" tr:has(a[data-transaction-id="+this.highlightedTransactionId+"])");if(0===b.length){var c=$("#"+this.expandedAccountId).offset().top-$(window).height()/2;$("html, body").animate({scrollTop:c},
200)}else{var d=b.offset().top-$(window).height()/2;$("html, body").animate({scrollTop:d},200);b.addClass("highlight");window.setTimeout(function(){b.addClass("fadeOutHighlight")},2E3)}}catch(f){this.expandedAccountId=void 0}}},showPreButton:function(){this.$("#nextButton").addClass(this.INVISIBLE_CLASS_NAME);this.$("#preButton").removeClass(this.INVISIBLE_CLASS_NAME)},showNextButton:function(){this.$("#nextButton").removeClass(this.INVISIBLE_CLASS_NAME);this.$("#preButton").addClass(this.INVISIBLE_CLASS_NAME)},
hideNavigationButton:function(){this.$("#preButton").addClass(this.INVISIBLE_CLASS_NAME);this.$("#nextButton").addClass(this.INVISIBLE_CLASS_NAME)},togglePage:function(){this.monthPageIndex=0===this.monthPageIndex?1:0;this.renderPageWithIndex(this);0===this.monthPageIndex?this.showNextButton():this.showPreButton();return!1},detectScroll:function(){if(0<this.$(".highlight").length)for(var a=this.$("td div.journalEntriesContainer button"),b=a.length,c=0;c<b;c++){var d=$(a[c]),f=d.offset().top,g=d.parents("td").find("#blankRow"+
d.data("accountid")).offset().top,h=d.parents("td").find("#blankTopRow"+d.data("accountid")).offset().top,f=ScrollUtils.getYInViewPosition(h+17,g-24,f,24);d.offset({top:f})}},rowHighlight:function(a){$(a.target).parent().hover(function(){$(this).find("td").css("background-color","#EFEFEF")},function(){$(this).find("td").css("background-color","#FFFFFF")})}});b.ProfitLossReportTableView.INVISIBLE_CLASS_NAME="invisible"});
ns("la.views.reports",function(b){b.ProfitLossReportView=la.views.BaseView.extend({id:"profit-loss-report",events:{"click button#datePickerUpdateButton":"showReport","click .btn-pdf":"showPdf","click .btn-xls":"showXls","change select#quickLinks":"updateQuickLinks","change select#dateRangeBreakdown":"updateDisplay"},initialize:function(a){this.breakdown=sessionStore.get("PL.breakdown")||"YEAR";a=a||{};a.preferenceName="profitLossReport";a.invalidMessagePrefix="Profit & Loss Report can only be generated";
a.breakdown=this.breakdown;a.showDisplayPeriods=!0;this.expandedAccountId=a.expandedAccountId;this.highlightedTransactionId=a.highlightedTransactionId;this.monthPageIndex=_(a.monthPageIndex).isUndefined()?0:parseInt(a.monthPageIndex,10)||0;this.dateFilter=new la.views.reports.PLReportFinancialYearDateFilterView({from:a.from,to:a.to,preferenceName:a.preferenceName,invalidMessagePrefix:a.invalidMessagePrefix,breakdown:a.breakdown,showDisplayPeriods:a.showDisplayPeriods,container:this});this.reportPreference=
new la.views.reports.ReportPreferenceView({container:this});this.listenTo(this.reportPreference.model,"change",this.onReportPreferenceChanged);this.showAccountNumbers=sessionStore.get("PL.showAccountNumbers")||!1;this.listenTo(this.dateFilter.model,"validated",this.updatePage);this.listenTo(this.dateFilter.model,"change",this.dateChanged);this.startIndex=0},updatePage:function(){this.$("#dateFilterError").hide();var a=this.dateFilter.model;if(a.isValid(!1,{silent:!0}))this.$(".btn-xls").attr("disabled",
!1),this.$(".btn-pdf").attr("disabled",!1),this.$("#changeBasis").removeAttr("disabled"),this.$("#changeBasis").removeClass("disabled"),this.reportPreference.enable();else{var b=a.preValidate("from",a.get("from")),c=a.preValidate("to",a.get("to"));b&&_(b).startsWith(a.get("invalidMessagePrefix"))&&c&&_(c).startsWith(a.get("invalidMessagePrefix"))&&this.$("#dateFilterError").html(_.escape(b)).show();this.$(".btn-xls").attr("disabled",!0);this.$(".btn-pdf").attr("disabled",!0);this.$("#changeBasis").attr("disabled",
"disabled");this.$("#changeBasis").addClass("disabled");this.reportPreference.disable()}},onReportPreferenceChanged:function(){this.expandedAccountId=void 0;this.fetchDetailsAndRender()},fetchDetailsAndRender:function(){this.$("#profitLossReportAnchor").html("");this.profitLossReportTableView=new la.views.reports.ProfitLossReportTableView({businessId:this.businessId,breakdown:this.dateFilter.model.get("breakdown"),monthPageIndex:this.monthPageIndex,container:this,reportPreference:this.reportPreference,
from:this.dateFilter.model.get("from"),to:this.dateFilter.model.get("to"),expandedAccountId:this.expandedAccountId,highlightedTransactionId:this.highlightedTransactionId,fetchSuccessHandler:this.fetchSuccessHandler});this.$("#profitLossReportAnchor").html(this.profitLossReportTableView.render().el);this.trackReport()},fetchSuccessHandler:function(a){$("#rangeDescription").html("<h2>"+a.get("dateRangeDescription")+"</h2>")},render:function(){$("#pageContents").css("min-height","");$(this.el).html(HandlebarsTemplates["reports/profit_loss_report_breakdown"]({showAccountNumbers:this.showAccountNumbers,
breakdown:this.breakdown}));this.renderQuickLinks();this.$("#dateFilter").html(this.dateFilter.render().el);this.reportPreference.setElement(this.$("#reportPreferenceAnchor")).render().enable();this.dateFilter.delegateEvents();this.fetchDetailsAndRender();return this},renderQuickLinks:function(){var a=sessionStore.get("PL.breakdownSelector"),b=sessionStore.get("PL.breakdown"),c="NONE";_.isUndefined(a)&&_.isUndefined(b)?c=this.breakdown:b&&"QUICK_LINKS"===a&&(c=b);this.$("#quickLinksContainer").html(HandlebarsTemplates["reports/profit_loss_quick_links"]({breakdown:c}))},
showReport:function(){this.dateFilter.model.saveDateFilterPreferences();window.app.navigate("businesses/"+this.businessId+"/reports/profitLoss",!0);this.fetchDetailsAndRender();return!0},getReportOption:function(a){return this.reportPreference.model.get(a)},processUrl:function(a,b){var c=this.dateFilter.model.get("from"),d=this.dateFilter.model.get("to"),f=this.getReportOption("cashBasis"),g=this.getReportOption("showAccountNumbers"),h=this.getReportOption("showCents"),l=this.dateFilter.model.get("breakdown"),
k=this.getReportOption("parenthesisNegative");this.trackReport(b);return UrlUtils.webUrl(this.businessId,a+b+"?from="+c+"&to="+d+"&cashBasis="+f+"&showAccountNumbers="+g+"&showCents="+h+"&breakdown="+l+"&parenthesisNegative="+k)},showPdf:function(){if(this.showReport()){var a="PL Report - "+moment().format("YYYY-MM-DD HH-mm")+".pdf";UrlUtils.openWindow(this.processUrl("/profitLossReportBreakdown/print/",a))}},showXls:function(){if(this.showReport()){var a="PL Report - "+moment().format("YYYY-MM-DD HH-mm")+
".xls";UrlUtils.openXls(this.processUrl("/profitLossReportBreakdown/print/",a))}},updateBreakdown:function(a,b){"NONE"===a?(this.breakdown="YEAR",b.active()):(this.breakdown=a,b.inactive());sessionStore.set("PL.breakdown",this.breakdown)},updateQuickLinks:function(a){var b=this;this.updateBreakdown($(a.target).val(),{active:function(){sessionStore.set("PL.breakdownSelector","DATE_RANGE");b.dateFilter.model.set({breakdown:b.breakdown,showDisplayPeriods:!0},{silent:!0}).validate()},inactive:function(){sessionStore.set("PL.breakdownSelector",
"QUICK_LINKS");b.dateFilter.model.set({from:DateUtils.startOfCurrentFinancialYear(),to:DateUtils.today(),breakdown:$(a.target).val(),showDisplayPeriods:!0},{silent:!0}).validate();b.expandedAccountId=void 0}});this.dateFilter.render();this.fetchDetailsAndRender()},updateDisplay:function(a){this.updateBreakdown($(a.target).val(),{active:function(){sessionStore.set("PL.breakdownSelector","QUICK_LINKS")},inactive:function(){sessionStore.set("PL.breakdownSelector","DATE_RANGE")}});this.renderQuickLinks()},
dateChanged:function(){this.$("#quickLinks").val("NONE");sessionStore.set("PL.breakdownSelector","DATE_RANGE")},trackReport:function(a){var b=this.dateFilter.model.get("from"),c=this.dateFilter.model.get("to"),d=this.getReportOption("cashBasis"),f=this.getReportOption("showAccountNumbers"),g=this.getReportOption("showCents"),h=this.dateFilter.model.get("breakdown");analytics.track(this.id,{format:void 0===a?"html":a.substr(a.length-3),breakdown:h,cashBasis:d,fromDate:b,toDate:c,showAccountNumbers:f,
showCents:g})}})});la.views.reports.CASH_BASIS_KEY="RP.cashBasis";la.views.reports.SHOW_CENTS_KEY="RP.showCents";la.views.reports.PARENTHESIS_NEGATIVE="RP.parenthesisNegative";la.views.reports.REPORT_PREFERENCE_KEY="reportPreference";la.views.reports.SHOW_ACCOUNT_NUMBERS="RP.showAccountNumbers";
ns("la.views.reports",function(b){b.ReportPreferenceView=la.views.BaseView.extend({events:{"click .reportOption a":"toggleOption","click #parenthesisNegativeTrue,#parenthesisNegativeFalse":"changeParenthesisNegative","click #dropdownMenu":"toggle"},close:function(a){var b=$(a.target);a=b.attr("id");var c=b.attr("name"),b=b.attr("for");"dropdownMenu"===a||"parenthesisNegative"===c||_.str.include(b,"parenthesisNegative")||($(".preference").removeClass("opened"),$(".dropdown").removeClass("open"),$("#dropdownMenu").removeClass("expanded").removeClass("collapsed").addClass("collapsed"),
$("body").unbind(this.close))},initializeCashBasisOption:function(){if(la.Config.isNZ())this.cashBasis=la.BusinessSettings.get("gstAccountingCashBased");else{var a=la.BusinessSettings.getPreference(la.views.reports.REPORT_PREFERENCE_KEY,la.views.reports.CASH_BASIS_KEY);_(a).isUndefined()?this.cashBasis=la.BusinessSettings.get("gstAccountingCashBased"):this.cashBasis=la.BusinessSettings.getPreferenceAsBoolean(la.views.reports.REPORT_PREFERENCE_KEY,la.views.reports.CASH_BASIS_KEY)}},initializeOptions:function(a){this.initializeCashBasisOption();
this.showCents=la.BusinessSettings.getPreferenceAsBoolean(la.views.reports.REPORT_PREFERENCE_KEY,la.views.reports.SHOW_CENTS_KEY);this.parenthesisNegative=la.BusinessSettings.getPreferenceAsBoolean(la.views.reports.REPORT_PREFERENCE_KEY,la.views.reports.PARENTHESIS_NEGATIVE);this.showAccountNumbers=la.BusinessSettings.getPreferenceAsBoolean(la.views.reports.REPORT_PREFERENCE_KEY,la.views.reports.SHOW_ACCOUNT_NUMBERS)},initialize:function(a){this.initializeOptions(a);this.model=new la.models.reports.ReportPreferences({cashBasis:this.cashBasis,
showCents:this.showCents,parenthesisNegative:this.parenthesisNegative,showAccountNumbers:this.showAccountNumbers})},toggleOption:function(a){a=$(a.target).attr("id");this[a]=!this[a];this.model.set(a,this[a]);this.notCashBasisOptionInNZ(a)&&this.persistPreference("RP."+a,this[a]);this.render(!0);return!1},notCashBasisOptionInNZ:function(a){return!la.Config.isNZ()||la.Config.isNZ()&&"RP."+a!==la.views.reports.CASH_BASIS_KEY},toggle:function(a){var b=$(a.target);if("disabled"!==b.attr("disabled")){var c=
b.parents(".preference");c.toggleClass("opened");c=c.hasClass("opened")?"expanded":"collapsed";b.removeClass("expanded").removeClass("collapsed").addClass(c);b.parents(".dropdown").toggleClass("open");"expanded"===c&&$("body").click(this.close);a.stopPropagation()}},render:function(a){$(this.el).html(HandlebarsTemplates["reports/report_preferences"](this.model.toJSON()));a?(this.$(".preference").addClass("opened"),this.$(".dropdown").addClass("open"),this.$("#dropdownMenu").addClass("expanded")):
this.$("#dropdownMenu").addClass("collapsed");return this},changeParenthesisNegative:function(a){a="true"===$(a.target).val();this.model.set("parenthesisNegative",a);this.persistPreference(la.views.reports.PARENTHESIS_NEGATIVE,a)},persistPreference:function(a,b){la.BusinessSettings.setPreference(la.views.reports.REPORT_PREFERENCE_KEY,a,b)},toggleReportOption:function(a,b){this[b]=!this[b];this.persistPreference(a,this[b])},enable:function(){this.$("#dropdownMenu").removeAttr("disabled","disabled");
this.$("#dropdownMenu").removeClass("disabled","disabled")},disable:function(){this.$("#dropdownMenu").attr("disabled","disabled");this.$("#dropdownMenu").addClass("disabled","disabled")}})});ns("la.views.reports",function(b){b.ReportsListView=la.views.ListView.extend({id:"reports-list",events:{"click #taxable-payments-annual-report":"clearTparValues"},templateName:"reports/reports-list",initialize:function(){$.get(UrlUtils.apiUrl(this.businessId,"/noOp"))},clearTparValues:function(){sessionStore.remove("taxablePayments.selectedPeriod")}})});
ns("la.views.reports.sales",function(b){b.CustomerInvoicesReportView=la.views.ValidatedFormView.extend({templateName:"reports/sales/customer_invoices_report",events:{"click #generateButton":"generateReport"},initialize:function(a){a=la.BusinessSettings.getBusinessId();this.model=new la.models.reports.sales.CustomerInvoicesReport;this.contacts=new la.collections.ContactsLite([],{businessId:a});this.contacts.fetch();this.statuses=new Backbone.Collection([new Backbone.Model({value:"-1",name:"All"}),
new Backbone.Model({value:"2",name:"Open"}),new Backbone.Model({value:"3",name:"Credit"}),new Backbone.Model({value:"5",name:"Paid"})],{comparator:!1})},generateReport:function(){this.model.saveLocalPreferences();UrlUtils.openWindow(this.model.pdfUrl())}})});
ns("la.views.reports.sales",function(b){b.CustomerPaymentsReportView=la.views.ValidatedFormView.extend({templateName:"reports/sales/customer_payments_report",events:{"click #generateButton":"generateReport"},initialize:function(a){a=la.BusinessSettings.getBusinessId();this.model=new la.models.reports.sales.CustomerPaymentsReport;this.statuses=new Backbone.Collection([new Backbone.Model({value:"-1",name:"All"}),new Backbone.Model({value:"2",name:"Open"}),new Backbone.Model({value:"3",name:"Credit"}),
new Backbone.Model({value:"5",name:"Paid"})],{comparator:!1});this.contacts=new la.collections.ContactsLite([],{businessId:a});this.customers=new Backbone.Collection;this.populateCustomers()},generateReport:function(){this.model.saveLocalPreferences();UrlUtils.openWindow(this.model.pdfUrl())},populateCustomers:function(){this.contacts.fetch({success:function(){this.customers.add(this.contacts.customers().models)}.bind(this)})}})});
ns("la.views.reports.sales",function(b){b.ItemListReportView=la.views.ValidatedFormView.extend({templateName:"reports/sales/item_list_report",events:{"click #generateButton":"generateReport"},initialize:function(a){this.model=new la.models.reports.sales.ItemListReport},generateReport:function(){this.model.saveLocalPreferences();UrlUtils.openWindow(this.model.pdfUrl())}})});
ns("la.views.reports.sales",function(b){b.PaymentTimeByCustomerReportView=la.views.ValidatedFormView.extend({templateName:"reports/sales/payment_time_by_customer_report",events:{"click #generateButton":"generateReport"},initialize:function(a){a=la.BusinessSettings.getBusinessId();this.model=new la.models.reports.sales.PaymentTimeByCustomerReport;this.contacts=new la.collections.ContactsLite([],{businessId:a});this.contacts.fetch();this.statuses=new Backbone.Collection([new Backbone.Model({value:"-1",
name:"All"}),new Backbone.Model({value:"2",name:"Open"}),new Backbone.Model({value:"3",name:"Credit"}),new Backbone.Model({value:"5",name:"Paid"})],{comparator:!1})},generateReport:function(){this.model.saveLocalPreferences();UrlUtils.openWindow(this.model.pdfUrl())}})});
ns("la.views.reports.sales",function(b){b.SalesByCustomerReportView=la.views.ValidatedFormView.extend({templateName:"reports/sales/sales_by_customer_report",events:{"click #generateButton":"generateReport","change #isItemDetailIncluded":"updateCheckboxes"},initialize:function(a){a=la.BusinessSettings.getBusinessId();this.model=new la.models.reports.sales.SalesByCustomerReport;this.contacts=new la.collections.ContactsLite([],{businessId:a});this.contacts.fetch();this.statuses=new Backbone.Collection([new Backbone.Model({value:"-1",
name:"All"}),new Backbone.Model({value:"2",name:"Open"}),new Backbone.Model({value:"3",name:"Credit"}),new Backbone.Model({value:"5",name:"Paid"})],{comparator:!1})},generateReport:function(){this.model.saveLocalPreferences();UrlUtils.openWindow(this.model.pdfUrl())},updateCheckboxes:function(){this.model.get("isItemDetailIncluded")?(this.$("#isSubTotalByItem").prop("checked",!1).change(),this.$("#isSubTotalByItem").prop("disabled",!0).change()):this.$("#isSubTotalByItem").prop("disabled",!1).change()}})});
ns("la.views.reports.sales",function(b){b.SalesByItemReportView=la.views.ValidatedFormView.extend({templateName:"reports/sales/sales_by_item_report",events:{"click #generateButton":"generateReport","change #isCustomerDetailIncluded":"updateCheckboxes"},initialize:function(a){a=la.BusinessSettings.getBusinessId();this.model=new la.models.reports.sales.SalesByItemReport;this.items=new la.collections.items.Items([],{businessId:a});this.items.fetch();this.statuses=new Backbone.Collection([new Backbone.Model({value:"-1",
name:"All"}),new Backbone.Model({value:"2",name:"Open"}),new Backbone.Model({value:"3",name:"Credit"}),new Backbone.Model({value:"5",name:"Paid"})],{comparator:!1})},generateReport:function(){this.model.saveLocalPreferences();UrlUtils.openWindow(this.model.pdfUrl())},updateCheckboxes:function(){this.model.get("isCustomerDetailIncluded")?(this.$("#isSubTotalByCustomer").prop("checked",!1).change(),this.$("#isSubTotalByCustomer").prop("disabled",!0).change()):this.$("#isSubTotalByCustomer").prop("disabled",
!1).change()}})});ns("la.views.reports.sales",function(b){b.SalesReconciliationReportView=la.views.ValidatedFormView.extend({templateName:"reports/sales/sales_reconciliation_report",events:{"click #generateButton":"generateReport"},initialize:function(a){this.model=new la.models.reports.sales.SalesReconciliationReport},generateReport:function(){this.model.saveLocalPreferences();UrlUtils.openWindow(this.model.pdfUrl())}})});
ns("la.views.reports.sales",function(b){b.SalesTransactionsReportView=la.views.ValidatedFormView.extend({templateName:"reports/sales/sales_transactions_report",events:{"click #generateButton":"generateReport"},initialize:function(a){a=la.BusinessSettings.getBusinessId();this.model=new la.models.reports.sales.SalesTransactionsReport;this.statuses=new Backbone.Collection([new Backbone.Model({value:"-1",name:"All"}),new Backbone.Model({value:"2",name:"Open"}),new Backbone.Model({value:"3",name:"Credit"}),
new Backbone.Model({value:"5",name:"Paid"})],{comparator:!1});this.customers=new Backbone.Collection;this.contacts=new la.collections.ContactsLite([],{businessId:a});this.populateCustomers()},generateReport:function(){this.model.saveLocalPreferences();UrlUtils.openWindow(this.model.pdfUrl())},populateCustomers:function(){this.contacts.fetch({success:function(){this.customers.add(this.contacts.customers().models)}.bind(this)})}})});
ns("la.views.reports.sales",function(b){b.UnpaidInvoicesReportView=la.views.ValidatedFormView.extend({templateName:"reports/sales/unpaid_invoices_report",events:{"click #generateButton":"generateReport"},initialize:function(a){a=la.BusinessSettings.getBusinessId();this.model=new la.models.reports.sales.UnpaidInvoicesReport;this.statuses=new Backbone.Collection([new Backbone.Model({value:"-1",name:"All"}),new Backbone.Model({value:"2",name:"Open"}),new Backbone.Model({value:"3",name:"Credit"}),new Backbone.Model({value:"5",
name:"Paid"})],{comparator:!1});this.contacts=new la.collections.ContactsLite([],{businessId:a});this.customers=new Backbone.Collection;this.populateCustomers()},generateReport:function(){this.model.saveLocalPreferences();UrlUtils.openWindow(this.model.pdfUrl())},populateCustomers:function(){this.contacts.fetch({success:function(){this.customers.add(this.contacts.customers().models)}.bind(this)})}})});ns("la.views.settings.accounts",function(b){b.ImportSuccessView=la.views.BaseView.extend({templateName:"settings/account/import_success"})});
ns("la.views.settings.accounts",function(b){b.ImportView=la.views.BaseView.extend({templateName:"settings/account/import",events:{"change #attach-file-button":"_handleFileAttachment","click #cancel-upload-button":"_cancelUpload","click #import-accounts-button":"_importAccounts","click #cancel":"_trackCancel","click #expand-imported-button":"_trackExpandImportedButton","click #expand-unsupported-tax-codes-button":"_trackExpandUnsupportedTaxCodesButton","click #expand-not-imported-button":"_trackExpandNotImportedButton"},
initialize:function(a){this.model=new la.models.settings.account.ImportPreview(a);this.businessId=la.BusinessSettings.getBusinessId();this._super(a)},_trackCancel:function(){analytics.track("account_list_import",{target_id:"cancel-upload-button"})},_trackExpandImportedButton:function(){analytics.track("account_list_import",{target_id:"expand-imported-button"})},_trackExpandUnsupportedTaxCodesButton:function(){analytics.track("account_list_import",{target_id:"expand-unsupported-tax-codes-button"})},
_trackExpandNotImportedButton:function(){analytics.track("account_list_import",{target_id:"expand-not-imported-button"})},_handleFileAttachment:function(){analytics.track("account_list_import",{target_id:"attach-file-button"});this.$(".loadingSpinner").show();this.model.set("fileInput",this.$("#attach-file-button")[0]);this.$("#attach-file-button")[0].files[0]&&this.model.set("fileName",this.$("#attach-file-button")[0].files[0].name);util.readFile(this.$("#attach-file-button")[0],this._previewFile.bind(this))},
_previewFile:function(a){var b=this;$.ajax({type:"POST",url:UrlUtils.apiUrl(la.BusinessSettings.getBusinessId(),"/coa/accounts/import/validate"),contentType:"application/json;charset=utf-8",dataType:"json",data:JSON.stringify({fileContent:a}),success:function(a){b.model.set("preview",a);b.model.set("totalImported",a.imported.length+a.importedWithWarnings.length);b.render()},error:function(c){var d=a.split("\n");analytics.track("account_list_import",{target_id:"validation-error",error:c.responseText,
name:b.model.get("fileName"),size:b.model.get("fileInput").files[0].size,header:d[0]+d[1]})},complete:function(){b.$(".loadingSpinner").hide()}})},_cancelUpload:function(){analytics.track("account_list_import",{target_id:"cancel-import-button"});this.model.unset("preview");this.model.unset("fileName");this.model.unset("fileInput");this.model.unset("totalImported");this.render()},_importAccounts:function(){analytics.track("account_list_import",{target_id:"import-accounts-button"});this._importFile(this.model.get("preview"));
this.disableForm()},_importFile:function(a){$.ajax({type:"POST",url:UrlUtils.apiUrl(la.BusinessSettings.getBusinessId(),"/coa/accounts/importAccounts"),contentType:"application/json;charset=utf-8",dataType:"json",data:JSON.stringify(a.imported.concat(a.importedWithWarnings.concat(a.notImported))),success:function(a){a="/p1-true/p2-"+(a.imported.length+a.importedWithWarnings.length)+"/p3-"+a.importedWithWarnings.length+"/p4-"+a.notImported.length;UrlUtils.redirect(UrlUtils.appUrl(la.BusinessSettings.getBusinessId(),
"/settings/accounts"+a))},error:function(a){analytics.track("account_list_import",{target_id:"import-error",error:a.responseText,name:self.model.get("fileName"),size:self.model.get("fileInput").files[0].size})}})}})});
ns("la.views.settings",function(b){b.AccountsView=la.views.BaseIFrameView.extend({templateName:"settings/account/list_iframe_container",initialize:function(a){this._super(a);this.options=a;this._setId("accountsFrame");this._setUrl(UrlUtils.url("/VerificationProxy?request=/JSP/Accounts/Account.jsp&access=menu"));a=la.models.commons.OnboardingNavigation.Accounts;FeatureTagUtils.isFeatureAvailable(FeatureTag.COA_SERVICE)&&(a.previousUrl="/settings/newCoa?show-onboarding=true");this.addSubview(new la.views.commons.OnboardingNavigationView({model:a}),
"#onboarding-navigation-container")},render:function(a){this._super(a);return this}})});ns("la.views.settings",function(b){b.AdvisorView=la.views.BaseIFrameView.extend({templateName:"commons/iframe_container",initialize:function(a){this._super(a);this._setId("advisorFrame");this._setUrl(UrlUtils.url("/VerificationProxy?request=/JSP/Setup/Setup.jsp&which=1"))}})});var LINKING_TYPE_POST_LINK="postLinking",LINKING_TYPE_MIGRATE="migrate";
ns("la.views.settings",function(b){b.BankFeedApplicationTableHeaderView=la.views.commons.TableHeaderView.extend({templateName:"settings/bank_feed_application_header"});b.BankFeedApplicationRowView=la.views.commons.TableRowFormView.extend({templateName:"settings/bank_feed_application_row",events:{"click span.cancel-button":"confirmCancelBankFeedApplication"},initialize:function(a){this._super(a);this.collection=a.collection;this.accountsToExclude=BankFeedApplicationAccountUtils.getAccountsToExclude(this.collection,
this.model);this.accounts=new la.collections.commons.Accounts([],a);this.allAccounts=a.accounts;this.allAccounts.on("sync",this.filterAccountsDropDown,this);0<this.allAccounts.size()&&this.filterAccountsDropDown();this.model.set("account",this.model.get("linkedChartAccount")?this.model.get("linkedChartAccount").id:-1);this.listenTo(this.model,"change:account",this.confirmLinking)},render:function(){this._super();this.model.get("unlinked")&&this.$el.addClass("unlinked");return this},filterAccountsDropDown:function(){var a=
this.allAccounts.allBankingAccounts().excludes(this.accountsToExclude).models,b=this;this.accounts.set(a.filter(function(a){return a.get("active")||!a.get("active")&&null!==b.model.get("linkedChartAccount")&&a.get("id")===b.model.get("linkedChartAccount").id}))},_getLinkingActionParameters:function(a){if(a===LINKING_TYPE_MIGRATE)return{messages:["All transactions from this bank feed will be moved to the new linked account. Are you sure you want to change the linked account for this bank feed?"],title:"Change linked account",
url:UrlUtils.apiUrl(la.BusinessSettings.getBusinessId(),"/bankfeed/applications/"+this.model.get("bankAccountId")+"/migrateAccount/"+this.model.get("account")),successMessage:"The linked account has been changed.",data:{}};a=this.model.get("account");var b=this.accounts.get(a).get("name");return{messages:["All transactions from this bank feed will be moved to the new linked account. Are you sure you want to link the account for this bank feed?"],title:"Linked account",url:UrlUtils.apiUrl(la.BusinessSettings.getBusinessId(),
"/bankfeed/applications"),successMessage:'Account "'+b+'" has been successfully linked.',data:{bankFeedId:this.model.get("bankFeedId"),accountName:this.model.get("accountName"),bsb:this.model.get("bsb"),accountNumber:this.model.get("accountNumber"),accountNumberSuffix:this.model.get("accountNumberSuffix"),financialInstitutionName:this.model.get("financialInstitution"),applicationDate:this.model.get("applicationDate"),linkedChartAccountId:a}}},confirmLinking:function(a){var b=this;a=b.model.get("unlinked")?
LINKING_TYPE_POST_LINK:LINKING_TYPE_MIGRATE;var c=this._getLinkingActionParameters(a);this.confirmAndAction({messages:c.messages,title:c.title,yesAction:function(){b.performLinking(c)},noAction:function(){b.confirmationDialog.hide()},afterHide:function(){b.container.collection.fetch()}})},performLinking:function(a){var b=this;$.ajax({type:"POST",url:a.url,data:JSON.stringify(a.data),contentType:"application/json",success:function(){b.confirmationDialog.hide();b.showNotification(a.successMessage);
b.container.collection.fetch()}.bind(this),error:function(a){b.confirmationDialog.onError();a=$.parseJSON(a.responseText);b.confirmationDialog.showMessage({processedErrors:a.errors},"settings/bank_feed_linking_error")}.bind(this),statusCode:{400:this._handleMigrateAccount400Error}})},_handleMigrateAccount400Error:function(a){a=$.parseJSON(a.responseText);a=_.map(a.errors,function(a){var b={code:a.code,message:a.message};if(ErrorUtils.isBusinessLockDateError(a)||ErrorUtils.isAccountReconciliationError(a))b=
null;return b});ErrorUtils.showErrorMessages({errors:a})},confirmCancelBankFeedApplication:function(a){this.confirmAndDestroy({title:"Cancel bank feed",messageTemplate:"settings/bank_feed_cancellation_confirmation",messageModel:this.model,success:function(){this.cancelBankFeed()}.bind(this)})},cancelBankFeed:function(a){this.container.collection.fetch();this._showSuccessfulNotification(null,{message:"Bank feed cancelled"})}});b.BankFeedApplicationTableView=la.views.commons.TableView.extend({headerView:"la.views.settings.BankFeedApplicationTableHeaderView",
rowView:"la.views.settings.BankFeedApplicationRowView",initialize:function(a){this._super(a);this.noRecordMessage="There are no bank feed applications.";this.menu=a.menu},getCollection:function(){return this.collection.nonCancelledBankFeeds()}});b.BankFeedApplicationListView=la.views.FormView.extend({mixins:[la.views.mixins.TableContainerView],id:"bankFeedApplicationList",className:"bankFeedApplications",tableViewName:"la.views.settings.BankFeedApplicationTableView",templateName:"settings/bank_feed_applications",
events:{"click #setupButton":"_showBankFeedApplicationForm"},initialize:function(a){this.collection=new la.collections.settings.BankFeedApplications([],{businessId:this.businessId});this.accounts=new la.collections.commons.Accounts([],a);_(a).extend({accounts:this.accounts});this._super(a);this.addSubview(new la.views.commons.OnboardingNavigationView({model:la.models.commons.OnboardingNavigation.BankFeeds}),"#onboarding-navigation-container")},_showBankFeedApplicationForm:function(){this.signupView||
((new la.views.banking.BankFeedApplicationChecker).isBankFeedApplicationPossible()?this.signupView=new la.views.banking.BankFeedSignupContainerView({container:this.$("#pageContentHeader"),bankFeeds:this.collection}):this.signupView=new la.views.banking.BankFeedSignupUnableView({container:this.$("#pageContentHeader")}),this.listenTo(this.signupView,"slidable:hide",function(){this.$("#setupButton").removeClass("disabled")}));this.$("#setupButton").addClass("disabled");this.signupView.show()},showSpinner:function(a){this.$(".loadingSpinner").toggle(a);
this.$("#page").toggle(!a)},onDomReady:function(){this.accounts.fetch();this._super();return this}})});
ns("la.views.settings",function(b){b.ExportView=la.views.ValidatedFormView.extend({templateName:"settings/export",events:{"click #exportButton":"_ftTagHandler"},initialize:function(a){this.result="";this._super(a);this.model=new la.models.settings.Export({name:a.name});this.formats=new Backbone.Collection([new Backbone.Model({value:"mye",name:"Mye"}),new Backbone.Model({value:"ceedata",name:"CeeData"}),new Backbone.Model({value:"myobao",name:"MyobAO"})])},_exportMYE:function(){UrlUtils.openWindow(this.model.url())},
_newExportMYE:function(){var a=this;$(".exportSpinner").show();$.ajax({url:this.model.newUrl(),dataType:"text",success:function(b,c){a.timeCount=0;a.jobUrl=b;a.timer=setInterval(function(){a.timeCount+=1;a._checkForCompletedConversion(b,a.timeCount)},2E3);setTimeout(a.timer,18E4)},type:"POST",error:function(){clearInterval(this.timer);$("#exportButton").prop("disabled",!1);$(".smallLoadingSpinner").hide()}})},_checkForCompletedConversion:function(a,b){this.time=b;$.ajax({type:"GET",beforeSend:function(a){a.setRequestHeader("Accept",
"application/vnd.api+json;data-converter.version=1.0")},url:a,processData:!1,success:this._handlePollResult.bind(this),error:function(){clearInterval(this.timer);$("#exportButton").prop("disabled",!1);$(".smallLoadingSpinner").hide()}})},_handlePollResult:function(a){a=a.data;"PENDING"!==a.attributes.status.code&&(clearInterval(this.timer),$("#exportButton").prop("disabled",!1),$(".smallLoadingSpinner").hide(),"ERROR"===a.attributes.status.code?console.log(a.attributes.status.code):(analytics.track("Click",
{productFamily:"Essentials",product:la.PreselectBusiness.get("productId")||"*",module:"Settings",feature:"Import/export data.export",category:"Essentials."+(la.PreselectBusiness.get("productId")||"*")+".Settings.Import/export data.export",label:"Export",format:this.model.get("format"),secondsTaken:2*this.time,fromDate:this.model.get("from"),toDate:this.model.get("to"),name:this.model.get("name")}),this._download(a.links.downloadResult.href)))},_download:function(a){window.location.href=a},_ftTagHandler:function(){$("#exportButton").prop("disabled",
!0);FeatureTagUtils.isFeatureAvailable(FeatureTag.DATACONVERTER)?this._newExportMYE():this._exportMYE()}})});ns("la.views.settings",function(b){b.GeneralJournalAddView=la.views.BaseIFrameView.extend({templateName:"commons/iframe_container",initialize:function(a){this._super(a);this._setId("generalJournalAddFrame");this._setUrl(UrlUtils.url("/VerificationProxy?request=/JSP/Banking/JournalEntry/JournalEntry.jsp&bCallDatabase=1"))}})});
ns("la.views.settings",function(b){b.GeneralJournalEditView=la.views.BaseIFrameView.extend({templateName:"commons/iframe_container",initialize:function(a){this._super(a);this._setId("generalJournalEditFrame");this._setUrl(UrlUtils.url("/VerificationProxy?request=/JSP/Banking/JournalEntry/JournalEntry.jsp&bCallDatabase=1&journalSysId="+a.journalSysId))}})});
ns("la.views.settings",function(b){b.GeneralJournalsView=la.views.BaseIFrameView.extend({templateName:"commons/iframe_container",initialize:function(a){this._super(a);this._setId("generalJournalsFrame");this._setUrl(UrlUtils.webUrl(a.businessId,"/journals/general"))}})});ns("la.views.settings",function(b){b.IEAlertView=la.views.DialogView.extend({templateName:"settings/ie_alert_dialog",id:"ieAlertDialog",events:{"click #cancelButton":"hide"}})});
ns("la.views.settings",function(b){b.ImportView=la.views.ValidatedFormView.extend({templateName:"settings/import",events:{"click #importButton":"_import","change #importFile":"_validateFile"},initialize:function(a){this._super(a);this.toggleImportItemsView=a.toggleImportItemsView;this.model=new la.models.settings.Import;this.accounts=new la.collections.commons.Accounts([],{businessId:la.BusinessSettings.getBusinessId()});this.accounts.fetch();this.listenTo(this.model,"change:importType",this._toggleAdditionalFilters);
_.bindAll(this)},_toggleAdditionalFilters:function(){"contacts"===this.model.get("importType")?this.$("#contactType").slideDown():this.$("#contactType").slideUp()},_import:function(){"contacts"===this.model.get("importType")?this._uploadContactsFile():this._uploadItemsFile();return!1},_validateFile:function(){this.$("#importFile").parent().find(".error-message").remove();return 0===this.$("#importFile")[0].files.length?(this.$("#importFile").parent().append('<span class="help-inline error-message">This field is required.</span>'),
!1):!0},_uploadItemsFile:function(){IE9.isEqualOrLessThanIE9()?(new la.views.settings.IEAlertView({container:this})).show():this._validateFile()&&util.readFile(this.$("#importFile")[0],this._readItemsFileAndAllocateAccounts)},_readItemsFileAndAllocateAccounts:function(a){try{var b=(new util.ItemFileReader(this.accounts)).read(a),c=new la.models.items.ItemImportFile({items:b});c.isValid()?c.save():this.toggleImportItemsView(b)}catch(d){this._showImportFailed()}},_uploadContactsFile:function(){if(this._validateFile()){var a=
this.$("#importForm");a.attr("action",this.model.url());this.$(".importSpinner").show();a.submit();$("#uploadTarget").contents().find("body").text("");this.timer=setInterval(this._checkForUploadResponse,500)}},_checkForUploadResponse:function(){if(!this._uploadInProgress()){var a=this._getUploadResponse();a.success&&0<=a.uploadedTransactionCount?this.showNotification(a.uploadedTransactionCount+" "+this.model.get("importType")+" successfully imported."):this._showImportFailed();this.$(".importSpinner").hide();
clearInterval(this.timer)}},_showImportFailed:function(){this.showNotification("Unable to import "+this.model.get("importType")+".  The file format is not valid.","danger")},_getUploadResponse:function(){var a=this._getUploadResponseText();return JSON.parse(a.replace(/\{/g,'{"').replace(/\:/g,'":').replace(/\, /g,', "'))},_getUploadResponseText:function(){return $("#uploadTarget").contents().find("body").text().trim()},_uploadInProgress:function(){return _(this._getUploadResponseText()).isEmpty()}})});
ns("la.views.settings",function(b){b.ImportExportView=la.views.BaseView.extend({templateName:"settings/import_export",mixins:[la.views.mixins.TabbedView],initialize:function(a){this._super(a);this.importItemAllocationView=new la.views.settings.ImportItemAllocateView({toggleImportItemsView:this.toggleImportItemsView.bind(this)});this.addSubview(new la.views.settings.ImportView({toggleImportItemsView:this.toggleImportItemsView.bind(this)}),"#importContainer");this.addSubview(new la.views.settings.ExportView({name:a.name}),
"#exportContainer");this.addSubview(this.importItemAllocationView,"#importItemContainer")},toggleImportItemsView:function(a){this.showImportItems=!this.showImportItems;a&&this.importItemAllocationView.setItems(a);this.$("#importContainer").toggleClass("hidden",this.showImportItems);this.$("#importItemContainer").toggleClass("hidden",!this.showImportItems)}})});
ns("la.views.settings",function(b){b.ImportItemAllocateTableHeaderView=la.views.commons.TableHeaderView.extend({templateName:"settings/import_item_header"});b.ImportItemAllocateRowView=la.views.BaseView.extend({tagName:"tr",templateName:"settings/import_item_row",initialize:function(a){this._super(a);this.buyAccounts=a.buyAccounts;this.buyGstTypes=a.buyGstTypes;this.sellAccounts=a.sellAccounts;this.sellGstTypes=a.sellGstTypes;this.listenTo(this.model,"change",this._updateRequiredFields);Backbone.Validation.bind(this)},
_updateRequiredFields:function(){this.model.updateRequiredFields()}});b.ImportItemAllocateTableView=la.views.commons.TableView.extend({headerView:"la.views.settings.ImportItemAllocateTableHeaderView",rowView:"la.views.settings.ImportItemAllocateRowView",noRecordMessage:"There are no items."});b.ImportItemAllocateView=la.views.ValidatedFormView.extend({id:"importItemAllocate",className:"col-xs-24",templateName:"settings/import_item",events:{"click #saveButton":"_save","click #cancelButton":"_cancel"},
initialize:function(a){this.toggleImportItemsView=a.toggleImportItemsView;this.model=new la.models.items.ItemImportFile({items:new la.collections.items.Items([],{businessId:la.BusinessSettings.getBusinessId()})});this.buyGstTypes=la.collections.commons.GstTypes.getAll("buy");this.sellGstTypes=la.collections.commons.GstTypes.getAll("sell");this.accounts=new la.collections.commons.Accounts([],{businessId:la.BusinessSettings.getBusinessId()});this.accounts.fetch({success:this._setSaleAndPurchaseAccounts.bind(this)});
this.listenTo(this.model.get("items"),"change",this._validateModel);this._super(a)},_validateModel:function(){this.model.validate()},_setSaleAndPurchaseAccounts:function(){this.tableView=new la.views.settings.ImportItemAllocateTableView({collection:this.model.get("items"),businessId:this.businessId,container:this,buyGstTypes:this.buyGstTypes,sellGstTypes:this.sellGstTypes,sellAccounts:this.accounts.sales(),buyAccounts:this.accounts.purchases()});this.addSubview(this.tableView,"#table");this.renderSubviews(this.tableView)},
_save:function(){this.saveAndCallback({message:"Items imported",success:function(){this.toggleImportItemsView()}.bind(this)})},_cancel:function(){this.toggleImportItemsView()},setItems:function(a){this.model.get("items").reset(a);this.tableView.renderRows();this.model.validate()}})});
ns("la.views.settings.invoice",function(b){b.BasePaymentOptionsView=la.views.BaseView.extend({mixins:[la.views.mixins.Validatable],events:{"click .btn-primary":"save"},initialize:function(a){this._super(a);this.model.fetch();this.accounts=new la.collections.commons.Accounts;this.listenTo(this.accounts,"sync",this._renderCOA);this.listenTo(this.model,"sync",this.render);this.listenTo(this.model,"change:paymentTermType",this._switchPaymentTermType);this.listenTo(this.model,"change:directDeposit",this._enableDisableBankFields);
this.listenTo(this.model,"change:mail",this._enableDisableMailFields);this.listenTo(this.model,"change:onlineInvoicing",this._toggleAttachmentOptions);this.listenTo(this,"tab-focused",this._focusOnFirstBankField);this.paymentTerms=new Backbone.Collection([new Backbone.Model({value:"NO_TERMS",name:"Due on"}),new Backbone.Model({value:"INVOICE_DATE",name:"From invoice date"}),new Backbone.Model({value:"END_OF_THIS_MONTH",name:"From end of this month"})],{comparator:!1});this._refreshOnlineInvoicingPreferences();
a=la.BusinessSettings.getPreference("global","onlineInvoicingOptInCutOffDate");a=moment(la.BusinessSettings.getDateCreated()).isAfter(moment(a,"MMM DD YYYY HH:mmA"));this.model.set("hideOnlineInvoicingOptIn",a);this.accounts.fetch()},render:function(){this.model.fetched&&(this._super(),this.listenTo(this.model,"change:directDeposit",this._focusOnFirstBankField),this._enableDisableBankFields(),this._enableDisableMailFields(),this._switchPaymentTermType(),this._toggleAttachmentOptions());return this},
_renderCOA:function(){this.accounts.set(this.accounts.bankingTransactions().models)},_refreshOnlineInvoicingPreferences:function(){FeatureTagUtils.isFeatureAvailable(FeatureTag.ONLINE_PAYMENTS)&&OnlinePaymentOptionsCache.getModel();var a=la.BusinessSettings.findOrCreatePreference("invoices","onlineInvoicing").getBooleanPreferenceValue();this.model.set("onlineInvoicing",a);a=la.BusinessSettings.findOrCreatePreference("invoices","attachInvoiceToEmail").getBooleanPreferenceValue();this.model.set("emailAttachments",
a);FeatureTagUtils.isFeatureAvailable(FeatureTag.ONLINE_PAYMENTS)&&(a=la.BusinessSettings.findOrCreatePreference("invoices","lockOnlineInvoicing").getBooleanPreferenceValue(),this.model.set("lockOnlineInvoicing",a))},_updateOnlineInvoicingPreferences:function(){var a=la.BusinessSettings.findOrCreatePreference("invoices","onlineInvoicing"),b=la.BusinessSettings.findOrCreatePreference("invoices","attachInvoiceToEmail");FeatureTagUtils.isFeatureAvailable(FeatureTag.ONLINE_PAYMENTS)?(this._getOnlinePaymentsPreferenceValue()&&
!this.model.get("onlineInvoicing")||a.updateBooleanPreference(this.model.get("onlineInvoicing")),b.updateBooleanPreference(this.model.get("emailAttachments")),this._refreshOnlineInvoicingPreferences()):(a.updateBooleanPreference(this.model.get("onlineInvoicing")),b.updateBooleanPreference(this.model.get("emailAttachments")))},save:function(){this.saveAndCallback({message:"Payment options saved",success:this._updateOnlineInvoicingPreferences.bind(this)})},disableField:function(a){a.attr("disabled",
"disabled");a.parents(".form-control-wrapper").first().attr("data-disabled",!0)},enableField:function(a){a.removeAttr("disabled","disabled");a.parents(".form-control-wrapper").first().removeAttr("data-disabled")},_switchPaymentTermType:function(){"NO_TERMS"===this.model.get("paymentTermType")?(this.model.set("paymentTermDays",void 0,{validate:!0}),this._disablePaymentTermDays()):("INVOICE_DATE"===this.model.get("paymentTermType")?_.isBlank(this.model.get("paymentTermDays"))&&this.model.set("paymentTermDays",
30,{validate:!0}):_.isBlank(this.model.get("paymentTermDays"))&&this.model.set("paymentTermDays",20,{validate:!0}),this._enablePaymentTermDays())},_disablePaymentTermDays:function(){this.disableField(this.$("#paymentTermDays"));this.$("#payment-term-days-text").addClass("text-muted");this.$("label[for='paymentTermDays']").addClass("text-muted")},_enablePaymentTermDays:function(){this.enableField(this.$("#paymentTermDays"));this.$("#payment-term-days-text").removeClass("text-muted");this.$("label[for='paymentTermDays']").removeClass("text-muted")},
_enableDisableBankFields:function(){this.model.get("directDeposit")?_.each(this.$(".bank-data"),function(a){this.enableField($(a))}.bind(this)):_.each(this.$(".bank-data"),function(a){this.disableField($(a))}.bind(this))},_enableDisableMailFields:function(){this.model.get("mail")?_.each(this.$(".mail-data"),function(a){this.enableField($(a))}.bind(this)):_.each(this.$(".mail-data"),function(a){this.disableField($(a))}.bind(this))},_focusOnFirstBankField:function(){this.model.get("directDeposit")&&
(this.$(".bank-data")[0].focus(),this.$(".bank-data")[0].select())},_toggleAttachmentOptions:function(){this.model.get("onlineInvoicing")?this.$("#attachmentOptions").removeClass("hidden"):(this.$("#attachmentOptions").addClass("hidden"),this.model.set("emailAttachments",!1));FeatureTagUtils.isFeatureAvailable(FeatureTag.ONLINE_PAYMENTS)&&this.model.get("lockOnlineInvoicing")&&this.model.get("onlineInvoicing")&&this.$("#onlineInvoicingOptions").addClass("hidden")},_getOnlinePaymentsPreferenceValue:function(){return la.BusinessSettings.findOrCreatePreference("invoices",
"lockOnlineInvoicing").getBooleanPreferenceValue()}})});
ns("la.views.settings.invoice",function(b){b.CustomBusinessDetailsView=la.views.BaseView.extend({templateName:"settings/invoice/custom_business_details",initialize:function(a){this._super(a);this.businessId=a.businessId;this.listenTo(this.model,"change:businessDetailOptions",this._toggleBusinessDetailsInPreview);this.businessDetails=new la.models.business.Details({id:this.businessId,businessId:this.businessId});this.listenTo(this.businessDetails,"sync",this.render);this.businessDetails.fetch()},render:function(){this.renderHandlebars(this.templateName,
this.model,this.businessDetails.toJSON());this._toggleBusinessDetailsInPreview();return this},_toggleBusinessDetailsInPreview:function(){this._toggleMissingInformationIndicators();var a=this.model.get("businessDetailOptions");this.$("#businessNamePreview").toggle(a.get("includeBusinessName"));this.$("#tradingNamePreview").toggle(a.get("includeTradingName"));this.$("#addressPreview").toggle(a.get("includeAddress"));this.$("#phonePreview").toggle(a.get("includePhone"));this.$("#emailPreview").toggle(a.get("includeEmail"));
this.$("#websitePreview").toggle(a.get("includeWebsite"));la.Config.isAU()?this.$("#abnPreview").toggle(a.get("includeAbn")):this.$("#gstNumberPreview").toggle(a.get("includeGstNumber"));!0!==a.get("includeTradingName")&&"true"!==a.get("includeTradingName")||_.isEmpty(this.businessDetails.get("tradingName"))?(this.$("#businessNamePreview").addClass("bold-text"),this.$("#tradingNamePreview").removeClass("bold-text")):(this.$("#businessNamePreview").removeClass("bold-text"),this.$("#tradingNamePreview").addClass("bold-text"))},
_toggleMissingInformationIndicators:function(){this.$(".missing-information").remove();var a=this;_.forEach(a.$("input[type=checkbox]"),function(b){var c=$(b).attr("id").replace("businessDetailOptions.include",""),c=c.charAt(0).toLowerCase()+c.substring(1);_.isBlank(a.businessDetails.get(c))&&"gstNumber"!==c&&a.$("label[for='"+$(b).attr("id")+"']").append("<span class='missing-information'>&nbsp;</span>")});la.Config.isNZ()&&_.isBlank(this.businessDetails.get("irdNumber"))&&this.$("label[for='businessDetailOptions.includeGstNumber']").append("<span class='missing-information'>&nbsp;</span>");
0<this.$(".missing-information").length?this.$("#missing-details-notice").show():this.$("#missing-details-notice").hide()}})});
ns("la.views.settings.invoice",function(b){b.CustomHeaderView=la.views.BaseView.extend({templateName:"settings/invoice/custom_header",events:{"click .deleteHeader":"confirmDeleteHeaderImage"},initialize:function(a){this.model=a.model;this.businessId=a.businessId;this.addSubview(new la.views.settings.invoice.LogoSettingsView({businessId:this.businessId,model:this.model}),"#logo-settings");this.listenTo(this.model,"change:addressEnvelopePosition",this._toggleHelpText);this.listenTo(this.model,"activate-view",
this._checkAndInitUploader)},render:function(){this._super();this._initNoImageHeaderErrorHandler();this._toggleHelpText();return this},_toggleHelpText:function(){this.$("#helpTextWithWindowedEnvelope").toggleClass("hidden",!this.model.get("addressEnvelopePosition"));this.$("#helpTextWithoutWindowedEnvelope").toggleClass("hidden",this.model.get("addressEnvelopePosition"))},_checkAndInitUploader:function(){0===this.$(".plupload").length&&this._initUploader()},_initUploader:function(){var a=this,b=function(){a.$(".progress").hide();
a.$(".progress .bar").remove()},c=new plupload.Uploader({runtimes:"html5,flash",browse_button:"selectHeader",container:"selectHeaderContainer",max_file_size:"2mb",url:UrlUtils.webUrl(this.businessId,"/settings/invoiceTemplate/headerImage"),flash_swf_url:UrlUtils.assetPath()+"/plupload/plupload.flash.swf",urlstream_upload:!0,filters:[{title:"Image files",extensions:"jpg,jpeg,gif,png,bmp,JPG,JPEG,GIF,PNG,BMP"}]});c.bind("Error",function(c,f){b();f.code===plupload.FILE_SIZE_ERROR?a.showInformationDialog("Image too big",
["Please select an image that is smaller than 2MB in size."]):f.code===plupload.FILE_EXTENSION_ERROR?a.showInformationDialog("Incorrect file format",["Please select an image that is a jpg, gif, png or bmp file."]):a.showInformationDialog("Problem with custom header image",["Sorry but we could not process your header image. This can be because the header image was designed for print (e.g. CMYK). One way to resolve this is to open the header image in a program like Paint and save it as a PNG file, then try to load it again."],
function(){location.reload(!0)});a.$("#selectHeader").prop("disabled",!1)});c.bind("FilesAdded",function(b,c){a.$(".progress").html("<div class='bar'></div>");a.$(".progress").show();a.$("#selectHeader").prop("disabled",!0);_.defer(function(){b.start()})});c.bind("UploadProgress",function(b,c){a.$(".progress .bar").css({width:c.percent+"%"})});c.bind("FileUploaded",function(c,f,g){a.$(".headerPreview img").attr("src",UrlUtils.webUrl(a.businessId,"/settings/invoiceTemplate/headerImage")+"?"+Math.random());
a.showNotification("Header image saved");b();a.$(".deleteHeader").show()});c.init();this.$(".headerPreview img").load(function(){a.$("#selectHeader").prop("disabled",!1)})},_initNoImageHeaderErrorHandler:function(){var a=this;this.$(".headerPreview img").error(function(){a.showNoHeader.call(a)})},showNoHeader:function(){this.$(".headerPreview img").attr("src",UrlUtils.assetPath()+"/no-header.png");this.$(".deleteHeader").hide()},deleteHeaderImage:function(){(new la.models.settings.invoice.TemplateHeaderImage({businessId:this.businessId})).destroy({success:function(){this.showNoHeader();
this.showNotification(I18n.t("header.deleteNotification"))}.bind(this)})},confirmDeleteHeaderImage:function(){this.confirmAndAction({title:I18n.t("header.deleteDialogTitle"),messages:[I18n.t("header.deleteDialogMessage")],yesAction:function(){this.confirmationDialog.hide();this.deleteHeaderImage()}.bind(this)})}})});
ns("la.views.settings.invoice",function(b){b.DefaultHeaderView=la.views.BaseView.extend({templateName:"settings/invoice/default_header",initialize:function(a){this.model=a.model;this.businessId=a.businessId;this.addSubview(new la.views.settings.invoice.LogoSettingsView({businessId:this.businessId,model:this.model}),"#logo-settings-container");this.addSubview(new la.views.settings.invoice.CustomBusinessDetailsView({businessId:this.businessId,model:this.model}),"#custom-business-details-container")}})});
ns("la.views.settings.invoice",function(b){b.EmailOptionsView=la.views.BaseView.extend({templateName:"settings/invoice/email_options",initialize:function(a){this._super(a);this.addSubview(new la.views.settings.invoice.EmailTemplateInvoiceView(a),"#invoice-email-template-body");this.addSubview(new la.views.settings.invoice.EmailTemplateQuoteView(a),"#quote-email-template-body")},onDomReady:function(){_(this.subviews).each(function(a){var b=a.subview;$.when(b.model.fetch()).done(function(){b.render()})});
this._super();return this}})});
ns("la.views.settings.invoice",function(b){b.EmailTemplateInvoiceView=la.views.BaseView.extend({templateName:"settings/invoice/email_template_invoice",mixins:[la.views.mixins.Validatable],events:{"click .email-template-save":"save","click .email-template-clear":"clear","click .email-variable":"insertEmailVariableIntoTemplate","focus #email-template-invoice-subject":"setSubjectAsDestination","focus #email-template-invoice-body":"setBodyAsDestination"},initialize:function(a){this._super(a);this.model=
new la.models.settings.invoice.EmailTemplate({type:"invoice"})},render:function(){this.model.fetched&&this._super();return this},setSubjectAsDestination:function(){this.$("#email-template-invoice-body").removeClass("emailVariableDestination");this.$("#email-template-invoice-subject").addClass("emailVariableDestination")},setBodyAsDestination:function(){this.$("#email-template-invoice-subject").removeClass("emailVariableDestination");this.$("#email-template-invoice-body").addClass("emailVariableDestination")},
setCaretAtEndOfBody:function(){var a=0;this.model.get("body")&&(a=this.model.get("body").length);this.$("#email-template-invoice-body").caret("pos",a)},insertEmailVariableIntoTemplate:function(a){0===this.$(".emailVariableDestination").length&&(this.setBodyAsDestination(),this.setCaretAtEndOfBody());var b=this.$(".emailVariableDestination"),c=b.caret("pos");a="{{"+$(a.currentTarget).data("email-variable")+"}}";var d=b.attr("name"),f=_(this.model.get(d)).insert(c,a);f.length<=b.parent().data("maxlength")&&
(this.model.set(d,f),b.caret("pos",c+a.length))},save:function(){this.saveAndCallback({message:"Invoice email template saved"})},clear:function(){this.model.fetch({async:!1,validate:!0})}})});
ns("la.views.settings.invoice",function(b){b.EmailTemplateQuoteView=la.views.BaseView.extend({templateName:"settings/invoice/email_template_quote",events:{"click .email-template-save":"save","click .email-template-clear":"clear","click .email-variable":"insertEmailVariableIntoTemplate","focus #email-template-quote-subject":"setSubjectAsDestination","focus #email-template-quote-body":"setBodyAsDestination"},mixins:[la.views.mixins.Validatable],initialize:function(a){this._super(a);this.model=new la.models.settings.invoice.EmailTemplate({type:"quote"})},
render:function(){this.model.fetched&&this._super();return this},setSubjectAsDestination:function(){this.$("#email-template-quote-body").removeClass("emailVariableDestination");this.$("#email-template-quote-subject").addClass("emailVariableDestination")},setBodyAsDestination:function(){this.$("#email-template-quote-subject").removeClass("emailVariableDestination");this.$("#email-template-quote-body").addClass("emailVariableDestination")},setCaretAtEndOfBody:function(){var a=0;this.model.get("body")&&
(a=this.model.get("body").length);this.$("#email-template-quote-body").caret("pos",a)},insertEmailVariableIntoTemplate:function(a){0===this.$(".emailVariableDestination").length&&(this.setBodyAsDestination(),this.setCaretAtEndOfBody());var b=this.$(".emailVariableDestination"),c=b.caret("pos");a="{{"+$(a.currentTarget).data("email-variable")+"}}";var d=b.attr("name"),f=_(this.model.get(d)).insert(c,a);f.length<=b.parent().data("maxlength")&&(this.model.set(d,f),b.caret("pos",c+a.length))},save:function(){this.saveAndCallback({message:"Quote email template saved"})},
clear:function(){this.model.fetch({async:!1,validate:!0})}})});
ns("la.views.settings.invoice",function(b){b.HeaderOptionsView=la.views.BaseView.extend({templateName:"settings/invoice/header_options",initialize:function(a){this.model=a.model;this.businessId=a.businessId;this.addSubview(new la.views.settings.invoice.DefaultHeaderView({businessId:this.businessId,model:this.model}),"#default-header-options-container");this.addSubview(new la.views.settings.invoice.CustomHeaderView({businessId:this.businessId,model:this.model}),"#custom-header-options-container");
this.listenTo(this.model,"change:customHeader",this._toggleHeaderOptions)},render:function(){this._super();this._toggleHeaderOptions();return this},_toggleHeaderOptions:function(){"true"===this.model.get("customHeader")||!0===this.model.get("customHeader")?(this.$("#custom-header-options-container").show(),this.$("#default-header-options-container").hide()):(this.$("#default-header-options-container").show(),this.$("#custom-header-options-container").hide())}})});
ns("la.views.settings.invoice",function(b){b.LineItemLayoutView=la.views.BaseView.extend({templateName:"settings/invoice/line_item_layout",events:{"click .line-item-layout-save":"_save"},initialize:function(a){this._super(a);this.layoutTypes=new Backbone.Collection([new Backbone.Model({value:"COMBINED",name:"Items and services"}),new Backbone.Model({value:"SERVICE",name:"Services"})],{comparator:!1});this.listenTo(this.model,"change:layoutType",this.render);this.listenTo(this.model,"sync",this.render)},
render:function(){this._super();this._previewLayoutType();return this},_previewLayoutType:function(){var a="",b=this.$("#layoutType option");_.each(b,function(b){a+="invoice-line-item-layout-"+$(b).val().toLowerCase()+" "});b="invoice-line-item-layout-"+this.model.get("layoutType").toLowerCase();this.$(".previewImage").removeClass(a).addClass(b)},_save:function(){this.saveAndCallback({message:"Layout type saved"})}})});
ns("la.views.settings.invoice",function(b){b.LogoSettingsView=la.views.BaseView.extend({templateName:"settings/invoice/logo_settings",events:{"slideStop .invoice-styling-and-layout-slide":"updateSliderValue"},initialize:function(a){this._super(a);this.model=a.model;this.businessId=a.businessId;this.listenTo(this.model,"resetSlider",this._resetSlider);this.listenTo(this.model,"change:logoPlacementLeft",this._togglePreview)},render:function(){this.model.fetched&&(this._super(),this.model.get("hasALogo")&&
this._instantiateSlider(),this._togglePreview());return this},_togglePreview:function(){"true"===this.model.get("logoPlacementLeft")||!0===this.model.get("logoPlacementLeft")?(this.$(".headerBusinessDetails").removeClass("pull-left"),this.$(".logoPreview img").removeClass("pull-right"),this.$(".headerBusinessDetails").addClass("pull-right"),this.$(".logoPreview img").addClass("pull-left")):(this.$(".logoPreview img").removeClass("pull-left"),this.$(".headerBusinessDetails").removeClass("pull-right"),
this.$(".logoPreview img").addClass("pull-right"),this.$(".headerBusinessDetails").addClass("pull-left"))},_instantiateSlider:function(){return this.$("#logoSizeSlider").slider()},_resetSlider:function(){this.model.get("hasALogo")&&this._instantiateSlider().slider("setValue",this.model.get("logoSize"))},updateSliderValue:function(a){this.model.set("logoSize",a.value);var b=this.$("div.logoPreview img");2<=b.width()/b.height()?b.width(a.value):b.height(a.value/2)}})});
ns("la.views.settings.invoice",function(b){b.OnlinePaymentOptionsView=la.views.BaseView.extend({templateName:"settings/invoice/online_payment_options",events:{"click #setupOnlinePaymentButton":"onlinePaymentSetup","click #duplicateSnDialog":"duplicateSnDialogClicked"},initialize:function(a){this._super(a);this.model=new la.models.Model;this.model.set("status",OnlinePaymentOptionsCache.getModel().hasApplied());this.model.set("duplicateSn",OnlinePaymentOptionsCache.getModel().get("withDuplicateSN"));
this.listenTo(OnlinePaymentOptionsCache.getModel(),"change",this._handleStatusChange)},onlinePaymentSetup:function(){_.isEmpty(la.BusinessSettings.get("businessSerialNumber"))?(new la.views.home.MissingSNWarningModalView({})).show():(UrlUtils.navigateToOnlinePaymentSetupPortal(),OnlinePaymentOptionsCache.clearCache())},_handleStatusChange:function(){this.model.set("status",OnlinePaymentOptionsCache.getModel().hasApplied());this.model.set("duplicateSn",OnlinePaymentOptionsCache.getModel().get("withDuplicateSN"));
this.render()},duplicateSnDialogClicked:function(){(new la.views.home.DuplicateSnWarningModalView({})).show()}})});
ns("la.views.settings.invoice",function(b){b.PaymentOptionsAUView=b.BasePaymentOptionsView.extend({templateName:"settings/invoice/payment_options_au",initialize:function(a){this.model=new la.models.settings.invoice.PaymentOptionsAU(a);this._super(a);FeatureTagUtils.isFeatureAvailable(FeatureTag.ONLINE_PAYMENTS)&&this.addSubview(new la.views.settings.invoice.OnlinePaymentOptionsView({businessId:this.businessId}),"#online-payment-options")}})});
ns("la.views.settings.invoice",function(b){b.PaymentOptionsNZView=b.BasePaymentOptionsView.extend({templateName:"settings/invoice/payment_options_nz",initialize:function(a){this.model=new la.models.settings.invoice.PaymentOptionsNZ(a);this._super(a);FeatureTagUtils.isFeatureAvailable(FeatureTag.ONLINE_PAYMENTS)&&this.addSubview(new la.views.settings.invoice.OnlinePaymentOptionsView({businessId:this.businessId}),"#online-payment-options")}})});
ns("la.views.settings.invoice",function(b){b.SettingsView=la.views.BaseView.extend({templateName:"settings/invoice/settings",mixins:[la.views.mixins.TabbedView],initialize:function(a){this._super(a);this.invoiceTemplateSettings=new la.models.settings.invoice.Template(a);this.invoiceTemplateSettings.fetch();this.addSubview(new la.views.settings.invoice.LineItemLayoutView({businessId:this.businessId,model:this.invoiceTemplateSettings}),"#line-item-layout-container");this.addSubview(new la.views.settings.invoice.TemplateView({businessId:this.businessId,
model:this.invoiceTemplateSettings}),"#invoice-template-container");la.Config.isAU()?this.addSubview(new la.views.settings.invoice.PaymentOptionsAUView(a),"#invoice-payment-options-container"):this.addSubview(new la.views.settings.invoice.PaymentOptionsNZView(a),"#invoice-payment-options-container");this.addSubview(new la.views.settings.invoice.EmailOptionsView(a),"#invoice-email-options-container")}})});
ns("la.views.settings.invoice",function(b){b.TemplateView=la.views.ValidatedFormView.extend({id:"invoiceTemplates",templateName:"settings/invoice/template",events:{"click .invoice-styling-and-layout-save":"save","click .invoice-styling-and-layout-cancel":"cancel","click .invoice-styling-and-layout-preview":"preview"},initialize:function(a){this._super(a);this.model=a.model;this.businessId=a.businessId;this.addSubview(new la.views.settings.invoice.HeaderOptionsView({businessId:this.businessId,model:this.model}),
"#header-options-container");this.addSubview(new la.views.settings.invoice.ThemeView({businessId:this.businessId,model:this.model}),"#theme-container");this.listenTo(this.model,"sync",this.render)},showTab:function(){this.model.trigger("activate-view");this._initImageSize()},_initImageSize:function(){var a=this.$("div.logoPreview img"),b=$("#logoSizeSlider").data("slider-value");2<a.width()/a.height()?a.width(b):a.height(b/2)},save:function(){la.BusinessSettings.setPreference("task","updateTemplate",
!0);this.saveAndCallback({message:"Invoice and quote settings saved"})},cancel:function(){this.model.fetch({async:!1});this.model.trigger("resetSlider")},preview:function(){var a=$.cookie(la.AUTH_TOKEN_KEY),b="",b=this.model.get("businessDetailOptions"),b="&logoSize="+encodeURIComponent(this.model.get("logoSize"))+"&customHeader="+encodeURIComponent(this.model.get("customHeader"))+"&businessDetailOptions.includeAbn="+encodeURIComponent(b.get("includeAbn"))+"&businessDetailOptions.includeBusinessName="+
encodeURIComponent(b.get("includeBusinessName"))+"&businessDetailOptions.includeGstNumber="+encodeURIComponent(b.get("includeGstNumber"))+"&businessDetailOptions.includePhone="+encodeURIComponent(b.get("includePhone"))+"&businessDetailOptions.includeAddress="+encodeURIComponent(b.get("includeAddress"))+"&businessDetailOptions.includeTradingName="+encodeURIComponent(b.get("includeTradingName"))+"&businessDetailOptions.includeEmail="+encodeURIComponent(b.get("includeEmail"))+"&businessDetailOptions.includeWebsite="+
encodeURIComponent(b.get("includeWebsite")),b=UrlUtils.apiUrl(this.businessId,"/settings/invoiceTemplate/preview.pdf?AuthToken="+a+"&template="+encodeURIComponent(this.model.get("template"))+"&logoPlacementLeft="+this.model.get("logoPlacementLeft")+"&addressEnvelopePosition="+this.model.get("addressEnvelopePosition")+"&headerColour="+encodeURIComponent(this.model.get("headerColour"))+"&headerTextColour="+encodeURIComponent(this.model.get("headerTextColour"))+b);UrlUtils.openWindow(b,"invoicePreview")}})});
ns("la.views.settings.invoice",function(b){b.ThemeView=la.views.ValidatedFormView.extend({templateName:"settings/invoice/theme",events:{"click .invoice-styling-and-layout-reset-colour":"reset"},initialize:function(a){this._super(a);this.model=a.model;this.businessId=a.businessId;this.templates=new Backbone.Collection([new Backbone.Model({value:"ABSTRACT",name:"Abstract"}),new Backbone.Model({value:"BAROQUE",name:"Baroque"}),new Backbone.Model({value:"IMPRESSIONIST",name:"Impressionist"}),new Backbone.Model({value:"PASTEL",
name:"Pastel"}),new Backbone.Model({value:"RENAISSANCE",name:"Renaissance"})],{comparator:!1});this.listenTo(this.model,"change:template",this.updateTemplateImage)},render:function(){this.model.fetched&&this._super();return this},_instantiateSlider:function(){return this.$("#logoSizeSlider").slider()},reset:function(a){this.model.set({headerColour:this.model.defaults.headerColour,headerTextColour:this.model.defaults.headerTextColour})},updateTemplateImage:function(a){var b="";a=this.$("#template option");
_.each(a,function(a){b+="invoice-template-"+$(a).val().toLowerCase()+" "});a="invoice-template-"+this.model.get("template").toLowerCase();this.$(".previewImage").removeClass(b).addClass(a)}})});
ns("la.views.settings",function(b){b.LogoView=la.views.FormView.extend({id:"logo",templateName:"settings/logo",events:{"click .deleteLogo":"destroy"},initialize:function(){this.model=new la.models.settings.Logo({businessId:this.businessId})},render:function(){this.renderHandlebars(this.templateName);this.$("#logoLink").addClass("active");return this},onDomReady:function(){var a=this;this.$(".logoPreview img").error(function(){a.showNoLogo.call(a)});var b=function(){a.$(".progress").hide();a.$(".progress .bar").remove()},
c=new plupload.Uploader({runtimes:"html5,flash",browse_button:"selectLogo",container:"selectLogoContainer",max_file_size:"1mb",url:UrlUtils.webUrl(this.businessId,"/logo"),flash_swf_url:UrlUtils.assetPath()+"/plupload/plupload.flash.swf",urlstream_upload:!0,filters:[{title:"Image files",extensions:"jpg,jpeg,gif,png,bmp,JPG,JPEG,GIF,PNG,BMP"}]});c.bind("Error",function(c,f){b();f.code===plupload.FILE_SIZE_ERROR?a.showInformationDialog("Image too big",["Please select an image that is smaller than 1MB in size."]):
f.code===plupload.FILE_EXTENSION_ERROR?a.showInformationDialog("Incorrect file format",["Please select an image that is a jpg, gif, png or bmp file."]):a.showInformationDialog("Problem with logo image",["Sorry but we could not process your logo. This can be because the logo was designed for print (e.g. CMYK). One way to resolve this is to open the logo in a program like Paint and save it as a PNG file, then try to load it again."],function(){location.reload(!0)});a.$("#selectLogo").prop("disabled",
!1)});c.bind("FilesAdded",function(b,c){a.$(".progress").html("<div class='bar'></div>");a.$(".progress").show();a.$("#selectLogo").prop("disabled",!0);_.defer(function(){b.start()})});c.bind("UploadProgress",function(b,c){a.$(".progress .bar").css({width:c.percent+"%"});100===c.percent&&a.$(".resizingMessage").show()});c.bind("FileUploaded",function(c,f,g){a.$(".logoPreview img").attr("src",UrlUtils.webUrl(a.businessId,"/logo")+"?"+Math.random());a.showNotification("Logo saved");b();a.$(".deleteLogo").show()});
c.init();this.$(".logoPreview img").load(function(){a.$(".resizingMessage").hide();a.$("#selectLogo").prop("disabled",!1)})},showNoLogo:function(){this.$(".logoPreview img").attr("src",UrlUtils.assetPath()+"/no-logo.jpg");this.$(".deleteLogo").hide()},destroy:function(){this.confirmDestroyAndCallFunction(this.showNoLogo,I18n.t("logo.deleteDialogTitle"),I18n.t("logo.deleteDialogMessage"),I18n.t("logo.deleteNotification"))}})});
ns("la.views.settings",function(b){b.OpeningBalancesView=la.views.BaseIFrameView.extend({templateName:"commons/iframe_container",initialize:function(a){this._super(a);this._setId("openingBalancesFrame");this._setUrl(UrlUtils.webUrl(a.businessId,"/openingbalances/"))}})});PayrollFrontend=PayrollFrontend||{};
ns("la.views.settings",function(b){b.PayrollSettingsView=la.views.ReactView.extend({initialize:function(a){this._super(a);this.reactLib=PayrollFrontend;this.component=PayrollFrontend.payrollSettingsPage;this.params={businessId:a.businessId,isAU:a.isAU,isIntermediaryBusiness:a.isIntermediaryBusiness,isEssentialsPayroll:a.isEssentialsPayroll,isActiveAccount:a.isActiveAccount}}})});
ns("la.views.settings",function(b){b.UsersView=la.views.BaseIFrameView.extend({templateName:"commons/iframe_container",initialize:function(a){this._super(a);this._setId("usersFrame");this._setUrl(UrlUtils.url("/VerificationProxy?request=/JSP/Setup/Setup.jsp&which=7"))}})});var spotLightView;
la.showSpotLight=function(){void 0===spotLightView&&(spotLightView=new la.views.spotlight.SpotLightView({routeInfo:window.app.businessRouter.routeInfo}),spotLightView.addCustomCandidates([{actionName:"Opt in online invoicing",action:"/settings/invoiceSettings"}]),$("#spotLight").html(spotLightView.render().el),spotLightView.$("input").click(function(b){b.preventDefault();b.stopPropagation()}));spotLightView.show()};Mousetrap.bind("ctrl+shift+k",function(){la.showSpotLight()});
$(document).click(function(){spotLightView&&spotLightView.hide()});
ns("la.views.spotlight",function(b){b.SpotLightView=la.views.BaseView.extend({templateName:"spotLight/spot_light",actionUrlPattern:/(businesses\/:business[Ii]d)([^\(]*)(\(.*\)$)*/,actionUrlExcludePattern:/(businesses\/:business[Ii]d).*([^(]\/:[a-zA-z0-9\-]+)/,events:{"keydown input":"_handleHide"},initialize:function(a){this._super(a);this.model=new la.models.Model({});this.actions=new la.collections.Collection;var b=a.routeInfo||{};_(Object.keys(b)).each(function(a){this.processSingleRoute(b[a],
a)}.bind(this));this.addCustomCandidates();this.listenTo(this.model,"change",this._goToAndClose)},processSingleRoute:function(a,b){var c=this.actionUrlPattern.exec(b),d=this.actionUrlExcludePattern.exec(b);null!==d&&!_(d[2]).isUndefined()||4!==c.length||this.actions.add(new Backbone.Model({id:this.actions.length,actionName:a.pageTitle,action:c[2]}))},addCustomCandidates:function(a){_(a).each(function(a){this.actions.add(new Backbone.Model({id:this.actions.length,actionName:a.actionName,action:a.action}))}.bind(this))},
show:function(){this.$el.addClass("spot-light");this.$el.show();this.$("input").val("");this.$("input").focus()},_handleHide:function(a){27!==a.keyCode&&9!==a.keyCode||this.hide();a.stopPropagation()},_goToAndClose:function(){UrlUtils.navigateToRoute(UrlUtils.getBusinessIdFromURI(),this.model.get("action"));this.hide()},hide:function(){this.$el.removeClass("spot-light");this.$el.hide()}})});FrontendNew=FrontendNew||{};
ns("la.views.sso",function(b){b.PartnerNotFound=la.views.ReactView.extend({initialize:function(a){this._super(a);this.reactLib=FrontendNew;this.component=FrontendNew.partnerUserNotFound;this.params={region:la.Config.getRegion()}}})});FrontendNew=FrontendNew||{};
ns("la.views.subscription",function(b){b.SubscriptionView=la.views.ReactView.extend({initialize:function(a){this._super(a);this.reactLib=FrontendNew;this.component=FrontendNew.subscriptionPage;this.params={isAu:la.Config.isAU(),cardPortalUrl:la.Config.get("cardPortalUrl"),bankFeedsInfoUrl:la.Config.get("bankFeedsInfoUrl"),partnerAddBusinessHelpUrl:la.Config.get("partnerAddBusinessHelpUrl"),supportUrl:la.Config.get("supportUrl"),privacyUrl:la.Config.get("privacyUrl"),business:{trialDaysRemaining:la.BusinessSettings.get("trialDaysRemaining"),
accountStatus:la.BusinessSettings.get("accountStatus"),subscriptionStatus:la.PreselectBusiness.get("subscriptionStatus"),payingEntity:la.BusinessSettings.get("payingEntity"),entitlements:la.BusinessSettings.get("entitlements"),canUpdatePayment:la.BusinessSettings.get("canUpdatePayment"),businessId:a.businessId,archieClientId:la.BusinessSettings.get("myobCrmId"),serialNumber:la.BusinessSettings.get("businessSerialNumber"),paid:la.BusinessSettings.get("paid"),registeredSourceSystem:la.BusinessSettings.get("registeredSourceSystem"),
orderInProgress:la.BusinessSettings.get("orderInProgress")},user:{isPartnerUser:la.BusinessSettings.isPartner(),ssoId:la.CurrentUserDetails.get("ssoId")}}}})});
ns("la.views.users",function(b){b.UserView=la.views.ValidatedFormView.extend({mixins:[la.views.mixins.Slidable,la.views.mixins.ResettingView],className:"rowForm",focusElementId:"firstName",id:"inviteUserForm",events:{"click #saveButton":"_submitAction"},initialize:function(a){this.model=a.model;this._initHandlebarsData(a);this._super(a);_.bindAll(this);this.listenTo(this.model,"change:email",this.checkEmailAvailability);this.listenTo(this.model,"change:password",this.validateModel);this.listenTo(this.model,
"change:confirmPassword",this.validateModel)},_getTemplateName:function(){return this.model.isNew()||this._isInvitation()?"users/invite_user":"users/edit_user"},validateModel:function(){this.model.isValid(!0)},addModelAndHide:function(a,b){var c=new la.models.users.UserInvitation({},{source:this.model.clone()});this.collection.remove(this.collection.get(this.oldId));this.collection.add(c);this.collection.resort();this.hide()},afterShown:function(){this.setFocus()},_initHandlebarsData:function(a){this.privileges=
new Backbone.Collection([new Backbone.Model({value:"ADMINISTRATOR",name:"Administrator"}),new Backbone.Model({value:"STANDARD_USER",name:"Standard user"})],{comparator:!1});this.activeoptions=new Backbone.Collection([new Backbone.Model({value:!1,name:"No"}),new Backbone.Model({value:!0,name:"Yes"})],{comparator:!1});this.options={isCurrentUser:la.CurrentUserDetails.get("id")===this.model.get("id")}},_submitAction:function(){this.oldId=this.model.get("id");this.saveAndCallback({message:this._successMessage(),
success:this.addModelAndHide})},_isInvitation:function(){return"invitation"===this.model.get("sourceType")},_successMessage:function(){return this._isInvitation()?"Invitation has been sent to "+this.model.get("email"):"User saved"}})});
ns("la.views.users",function(b){b.UserListItemView=la.views.BaseView.extend({templateName:"users/user_list_item",className:"item",events:{"click .editUser":"showEditUserForm","click .deleteButton":"confirmDeleteUser","click .resendInvite":"showResendInviteForm"},initialize:function(a){this._super(a)},createHandlebarsContext:function(a,b){var c=this._super(a,b);c.isCurrentUser=la.CurrentUserDetails.get("id")===a.id;c.canUpdate="user"===a.get("type")&&"MYOB Support "!==a.get("name")&&(c.isCurrentUser||
"ADMINISTRATOR"===la.BusinessSettings.get("currentUserPrivilege"));return c},showEditUserForm:function(){this.editUserView=this.editUserView||new la.views.users.UserView({model:this.model.source,container:this.$el,collection:this.collection});this.editUserView.toggle()},showResendInviteForm:function(){this.resendInviteView=this.resendInviteView||new la.views.users.UserView({model:this.model.source,container:this.$el,collection:this.collection});this.resendInviteView.toggle()},confirmDeleteUser:function(a){a=
la.BusinessSettings.isPartner()?"Deleting this user means they will no longer be able to access the partner dashboard and open the companies listed.":"Deleting this user means they will no longer be able to log in to this business.";this.confirmAndAction({title:I18n.t("users.delete.title"),messages:[a],yesAction:function(){this.confirmationDialog.hide();this.deleteUser()}.bind(this),afterHide:function(){$("body").removeClass("modal-open")}.bind(this)})},deleteUser:function(){this.showNotification(I18n.t("users.delete.notification.one",
{username:this.model.get("username")}));this.model.destroy();this.collection.remove(this.model);this.collection.resort()}});b.UserListView=la.views.BaseView.extend({mixins:[la.views.mixins.List,la.views.mixins.Listable],rowView:"la.views.users.UserListItemView",noItemsMessage:"There are no users."});b.UsersView=la.views.BaseView.extend({id:"UsersView",templateName:"users/users",events:{"click #addUser":"showAddUserForm","click #inviteAccountant":"inviteAccountant","click #changePassword":"_changePassword"},
initialize:function(a){this.model=new Backbone.Model;this.addSubview(new la.views.users.UserListView(a),"#userList");this.addSubview(new la.views.commons.OnboardingNavigationView({model:la.models.commons.OnboardingNavigation.InviteUsers}),"#onboarding-navigation-container")},showAddUserForm:function(){var a="PP"===la.BusinessSettings.get("clientType")?"ADVISOR_INVITE_USER":"SME_INVITE_USER",a=new la.models.invitation.BusinessInvitation({invitationType:a});this.addUserView=this.addUserView||new la.views.users.UserView({container:this.$("#pageContentHeader"),
collection:this.collection,model:a});this.addUserView.toggle()},_changePassword:function(){AuthenticationUtils.changePassword(la.BusinessSettings.getBusinessId())},inviteAccountant:function(){UrlUtils.navigateToRoute(this.businessId,"/settings/advisor")}})});
ns("la.routers",function(b){b.RouteInfoCreator=function(){this.routes={};this.routeInfo={}};_.extend(b.RouteInfoCreator.prototype,{route:function(a,b){this.routes[a]=this._getHandler(a,b);if(!this.routes[a])throw"No handler specified for route '"+a+"'";this.routeInfo[a]=b},addRouteMap:function(a){_(a).each(function(a,b){this.route(b,a)},this)},_getHandler:function(a,b){if(b.handler)return b.handler;if(b.view)return b.library?this._createViewHandlerWithLibraryPrefetch(a,b):this._createViewHandler(a,
b)},_createView:function(a,b,c){a=this.createParametersForRoute(a,c);this.showView(new b.view(a),b.menuName)},_createViewHandler:function(a,b){var c=this;return function(){c._createView.bind(this)(a,b,arguments)}},_createViewHandlerWithLibraryPrefetch:function(a,b){var c=this;return function(){var d=arguments,f=b.delayed?eval(b.library):b.library;head.load(f,function(){c._createView.bind(this)(a,b,d)}.bind(this))}}})});
ns("la.routers.helpers",function(b){b.RouterHelper={showLoadingSpinner:function(){$("#pageContents").html('<div class="loadingSpinner" style="display:block;"></div>')},before:function(a){a={url:UrlUtils.requestHash()};ErrorUtils.removeErrorMessages();this.removeCurrentComponent();la.BusinessSettings&&la.BusinessSettings.getBusinessId()&&$.ajax({url:UrlUtils.anonymousApiUrl("/trace/route-change"),type:"POST",data:JSON.stringify(a),contentType:"application/json"})},renderHeader:function(a,b){la.HeaderService.render(a,
b);this.setWindowView("header",a)},renderFooter:function(a){la.FooterService.render(a);this.setWindowView("footer",a)},getWindowViewName:function(a){return a+"View"},setWindowView:function(a,b){var c=this.getWindowViewName(a);window[c]&&window[c]!==b&&_.isFunction(window[c].remove)&&window[c].remove();window[c]=b},getWindowView:function(a){return window[this.getWindowViewName(a)]},renderWindowView:function(a,b){this.setWindowView(a,b);var c=this.getWindowView(a);$("#"+a+"Container").html(c.el);c.render()},
openAction:function(a,b,c,d,f,g,h){h?this.editAction(a,h,b,c,d,f,g):this.newAction(a,b,c,d,f,g)},newAction:function(a,b,c,d,f,g,h){var l={businessId:a};_(f).isObject()&&(l=$.extend(l,f));c=createObject(c,l);a={businessId:a,model:c};_(g).isObject()&&(a=$.extend(a,g));h?this.showViewInContainer(createObject(d,a),h):this.showView(createObject(d,a),b)},editAction:function(a,b,c,d,f,g,h){b={id:b,businessId:a};_(g).isObject()&&(b=$.extend(b,g));var l=this,k=createObject(d,b);k.fetch({success:function(){var b=
{businessId:a,model:k};_(h).isObject()&&(b=$.extend(b,h));l.showView(createObject(f,b),c)}})},listAction:function(a,b,c,d,f,g,h,l){h=h||{};d=createObject(d,[],{url:g||UrlUtils.apiUrl(a,"/"+c+"s"),businessId:a});a=createObject(f,_(h).extend({businessId:a,collection:d,modelName:c}));l?this.showViewInContainer(a,l):this.showView(a,b)},showView:function(a,b){this.removeCurrentView();this.header&&this.header.set({menuName:b});window.currentView=a;$("#pageContents").html(window.currentView.render().el);
window.currentView.onDomReady();$("html, body").animate({scrollTop:0})},showViewInContainer:function(a,b){window.currentViewInContainer=a;1===$(b).length?$(b).html(a.render().el):$("#pageContents").html(a.render().el);a.onDomReady()},removeCurrentView:function(){window.currentView&&window.currentView.remove();window.currentViewInContainer&&(window.currentViewInContainer.remove(),window.currentViewInContainer=null)},removeCurrentComponent:function(){window.currentComponent&&window.currentComponent.remove&&
window.currentComponent.remove()},parseExternalRoutes:function(a){return a.reduce(function(a,b){a[b.url]={menuName:b.menuName,helpTopic:b.helpTopic,pageTitle:b.pageTitle,handler:function(a,e){this.loadComponentPackage(a,e,b)}};return a},{})},loadRoutesFrom:function(a){var b=new la.routers.RouteInfoCreator;_(a).each(function(a){b.addRouteMap(a)});this.routes=b.routes;this.routeInfo=b.routeInfo;this._bindRoutes()},applyRouteInfo:function(a){clearInterval($("body").data("iframe-active-set-interval"));
la.fixedNotification.trigger("hideImmediate");this.setTitle(this.routeInfo[a].pageTitle);this.trackPageRouteInGA(a);this.trackPageView(a);this.renderHeaderAndFooter(a);this.removeGettingStartedView()},renderGettingStartedView:function(a){GettingStartedUtils.isGettingStartedFeatureOn()&&(a=new la.views.gettingStarted.GettingStartedView({helpId:this.routeInfo[a].welcomeWagonId,headerView:window.headerView}),a.render(),window.gettingStartedView=a)},removeGettingStartedView:function(){var a=window.gettingStartedView;
a&&(a.remove(),window.gettingStartedView=void 0)},createParametersForRoute:function(a,b){return _.object(this._extractParameterNames(a),b)},_extractParameterNames:function(a){return _(this._matchRouteParameterInfo(a)).map(function(a){return a.slice(1)})},_matchRouteParameterInfo:function(a){a=this._routeToRegExp(a).exec(this._sanitiseRouteParameterNames(a)).slice(1);_(a[a.length-1]).isUndefined()&&a.pop();return a},_sanitiseRouteParameterNames:function(a){return a.replace(/[()]/g,"")},setTitle:function(a){a&&
(window.document.title="MYOB Essentials - "+a)},trackPageRouteInGA:function(a){a={url:this.routeInfo[a].gaUrl,domain:UrlUtils.domain().replace(/[^.]*\./,".")};var b=la.Config.get("gaTrackingCode");_.isBlank(b)||$.trackPage(b,a)},trackPageView:function(a){FeatureTagUtils.isFeatureAvailable(FeatureTag.SEGMENT_TRACK)&&(window.analytics||Segment.load(la.Config.get("segmentioWriteKey")),a=this.routeInfo[a],analytics.page({url:a.gaUrl,title:a.pageTitle?a.pageTitle:document.title}))},importExportView:function(a,
b){var c=new la.views.settings.ImportExportView({businessId:a,name:b.get("businessName")});this.showView(c,"Import/export data")}}});
ns("la.routers.routes.admin",function(b){b.AdminRoutes={"contextual-help":{view:la.views.admin.ContextualHelpView,menuName:"Manage stuff",gaUrl:"/contextual-help",pageTitle:"Contextual help"},noticeboard:{view:la.views.admin.NoticeboardView,menuName:"Manage stuff",gaUrl:"/noticeboard",pageTitle:"Noticeboard"},"delete-bank-statement":{view:la.views.admin.DeleteBankStatementView,menuName:"Manage stuff",gaUrl:"/delete-bank-statement",pageTitle:"Delete bank statement"},"queue-users":{view:la.views.admin.QueueUsersView,
menuName:"Manage stuff",gaUrl:"/queue-users",pageTitle:"Queue users (to MyDot)"},"demote-partner-businesses":{view:la.views.admin.DemotePartnerBusnessesView,menuName:"Manage stuff",gaUrl:"/demote-partner-businesses",pageTitle:"Demote partner businesses"},"health-check-reports":{view:la.views.admin.HealthCheckReportsView,menuName:"Reports & Info",gaUrl:"/health-check-reports",pageTitle:"Health check reports"},"health-check/:reportName":{view:la.views.admin.HealthCheckView,menuName:"Reports & Info",
gaUrl:"/health-check",pageTitle:"Health check report"},"pm-reports":{view:la.views.admin.PMReportsView,menuName:"Reports & Info",gaUrl:"/pm-reports",pageTitle:"PM reports"},"advisor-details-report":{view:la.views.admin.AdvisorDetailsReportView,menuName:"Reports & Info",gaUrl:"/advisor-details-report",pageTitle:"Advisor details report"},"intermediary-eps":{view:la.views.admin.IntermediaryEpsView,menuName:"Intermediary",gaUrl:"/intermediary-eps",pageTitle:"Electronic Payment Schedule (EPS)"},"intermediary-scf":{view:la.views.admin.IntermediaryScfView,
menuName:"Intermediary",gaUrl:"/intermediary-scf",pageTitle:"Subsidy Claim Form (SCF)"},"intermediary-ird-bank-file":{view:la.views.admin.IntermediaryIrdBankFileView,menuName:"Intermediary",gaUrl:"/intermediary-ird-bank-file",pageTitle:"Direct Credit Bank File (IRD)"},"feature-tags":{view:la.views.admin.FeatureTagsView,menuName:"Manage stuff",gaUrl:"/feature-tags",pageTitle:"Feature tags",library:la.FRONTEND_NEW_URL},"business-feature-tags":{view:la.views.admin.BusinessFeatureTagsView,menuName:"Manage stuff",
gaUrl:"/business-feature-tags",pageTitle:"Business feature tags",library:la.FRONTEND_NEW_URL},"manage-businesses":{view:la.views.admin.ManageBusinessesView,menuName:"Manage businesses",gaUrl:"/manage-businesses",pageTitle:"Manage businesses",library:la.FRONTEND_NEW_URL},"partner-program":{view:la.views.admin.PartnerProgramView,menuName:"Partner Program",gaUrl:"/partner-program",pageTitle:"Partner Program",library:la.FRONTEND_NEW_URL},"user-feature-tags":{view:la.views.admin.UserFeatureTagsView,menuName:"Manage stuff",
gaUrl:"/user-feature-tags",pageTitle:"User feature tags",library:la.FRONTEND_NEW_URL},"*path":{view:la.views.admin.FeatureTagsView,menuName:"Manage stuff",gaUrl:"/feature-tags",pageTitle:"Feature tags",library:la.FRONTEND_NEW_URL}}});
ns("la.routers",function(b){b.AdminRouter=Backbone.Router.extend({id:"AdminRouter",mixins:[la.routers.helpers.RouterHelper],initialize:function(a){this.header=new Backbone.Model;this.loadRoutesFrom([la.routers.routes.admin.AdminRoutes])},before:function(a){var b=la.CurrentUserDetails.get("roles");_.contains(b,"ROLE_HELPDESKUSER")||_.contains(b,"ROLE_HELPDESKADMINISTRATOR")?this.applyRouteInfo(a):UrlUtils.redirect(UrlUtils.homeUrl())},renderHeaderAndFooter:function(){this.renderHeader(new la.views.commons.AdminHeaderView({model:this.header}))}})});
ns("la.routers.helpers",function(b){b.BalanceSheetHelper={componentName:"BalanceSheetComponent",bundlerUrlConfigName:"balanceSheetScriptUrl",createComponent:function(a){if(window.BalanceSheet.api){var b=la.Config.get("balanceSheetApiUrl");window.BalanceSheet.api.setUrl(b)}b=new window.BalanceSheet.Navigators.BackboneNavigator(Backbone.history);return new window.BalanceSheet.BalanceSheetComponent(b,a)},breadcrumbRenderer:function(a){var b="businesses/:businessId/reports",c="Reports";if(!a.isRootPage)var d=
"/"===a.parentBreadcrumb.pageUrl?"":a.parentBreadcrumb.pageUrl,c=a.parentBreadcrumb.pageTitle,b=b+"/compBalanceSheet"+d;b=_({pattern:b}).extend({pageTitle:c});la.breadcrumb.onPageRoute(a.pageTitle,b)}}});
ns("la.routers.helpers",function(b){b.BudgetingHelper={componentName:"BudgetComponent",bundlerUrlConfigName:"budgetingScriptUrl",createComponent:function(a){var b=la.Config.get("budgetingApiUrl");window.Budgeting.api.setUrl(b);b=new window.Budgeting.Navigators.BackboneNavigator(Backbone.history);return new window.Budgeting.BudgetComponent(b,a)},breadcrumbRenderer:function(a){var b="businesses/:businessId/reports",c="Reports";if(!a.isRootPage)var d="/"===a.parentBreadcrumb.pageUrl?"":a.parentBreadcrumb.pageUrl,
c=a.parentBreadcrumb.pageTitle,b=b+"/budgets"+d;b=_({pattern:b}).extend({pageTitle:c});la.breadcrumb.onPageRoute(a.pageTitle,b)}}});
ns("la.routers.helpers",function(b){b.CoaHelper={CoaBundleUrl:function(){return la.Config.get("coaScriptUrl")},renderCOA:function(a,b,c){this.CoaComponent||(this.CoaComponent=this.createCoaComponent());c=c||document.getElementById("pageContents");this.CoaComponent.render(c,this.coaComponentDefaultOptions(a,b));window.currentComponent=this.CoaComponent},setEventTracker:function(a,b,c,d){analytics.track(a,b,c,d)},setPageLoadTracker:function(a,b,c,d,f){analytics.page(a,b,c,d,f)},setPreference:function(a,
b,c,d){la.BusinessSettings.setPreference(a,b,c,d)},loadCoaPackage:function(a,b){var c=function(){this.removeCurrentView();this.renderCOA(a,b)}.bind(this);this.loadCoaBundle(c)},loadCoaBundle:function(a){head.load(this.CoaBundleUrl(),a)},createCoaComponent:function(){return new window.COA.CoaComponent},coaComponentDefaultOptions:function(a,b){return{businessId:a,region:la.Config.getRegion(),authToken:$.cookie(la.AUTH_TOKEN_KEY),baseRoute:b,setPreference:this.setPreference,eventTracker:this.setEventTracker,
pageLoadTracker:this.setPageLoadTracker,featureTag:FeatureTagUtils,uncategorisedAccountsChecker:UncategorisedAccountsChecker,businessSettings:la.BusinessSettings.toJSON()}}}});
ns("la.routers.helpers",function(b){b.ExternalComponentLoader={bundlerUrl:function(a){return la.Config.get(a)},getAuthHeader:function(a){la.AuthenticationContext&&la.AuthenticationContext.getUser()?la.AuthenticationContext.acquireToken(la.AuthenticationContext.options.clientId,function(b,c){if(c)throw Error(c);var d={};d[la.IDS_TOKEN_KEY]="Bearer "+b;a(d)}):a()},renderComponent:function(a,b,c){this.getAuthHeader(function(d){this.removeCurrentView();var f=this.getComponent(c);d={businessId:a,region:la.Config.getRegion(),
authToken:$.cookie(la.AUTH_TOKEN_KEY),authHeader:d,businessSettings:la.BusinessSettings};f.render(document.getElementById("pageContents"),b,d);this.setCurrentComponent(f,b)}.bind(this))},getComponent:function(a){if(!this[a.componentName]){var b=this.getComponentOptions(a);this[a.componentName]=a.createComponent?a.createComponent(b):new window[a.namespace][a.componentName](b)}return this[a.componentName]},setCurrentComponent:function(a,b){window.currentComponent=a;a.getPageTitle&&this.setTitle(a.getPageTitle(b))},
loadComponentPackage:function(a,b,c){head.load(c.libraryUrl||this.bundlerUrl(c.bundlerUrlConfigName),function(){this.renderComponent(a,b,c)}.bind(this))},eventTracker:function(a,b,c,d){analytics.track(a,b,c,d)},pageLoadTracker:function(a,b,c,d,f){analytics.page(a,b,c,d,f)},getParentRoute:function(a){return a.breadcrumbParentRoute?{pattern:a.breadcrumbParentRoute,pageTitle:this.routeInfo[a.breadcrumbParentRoute].pageTitle}:null},getBreadcrumbRenderer:function(a,b){return a.breadcrumbRenderer||function(a){la.breadcrumb.onPageRoute(a.pageTitle,
a.parentBreadcrumb||b)}},getComponentOptions:function(a){var b=this.getParentRoute(a);a=this.getBreadcrumbRenderer(a,b);return{errorHandlers:{notFound:function(a){console.log("Component could not route to "+a);UrlUtils.navigateToPublicRoute("businesses")},apiError:function(a,b){b||(b="A system error occurred, please try again.");ErrorUtils.showErrorMessages({errorMessage:b})}},parentRoute:b,titleRenderer:this.setTitle,breadcrumbRenderer:a,eventTracker:this.eventTracker,pageLoadTracker:this.pageLoadTracker,
feedback:la.feedback}}}});
ns("la.routers.helpers",function(b){b.IaHelper={IaBundleUrl:function(){return la.Config.get("iaScriptUrl")},setIAApiUrl:function(){window.IA.apiConfig.setApiUrl(la.Config.get("iaApiUrl"))},loadIAComponent:function(a,b){var c=function(){this.renderIA(a,b)}.bind(this);head.load(this.IaBundleUrl(),c)},renderIA:function(a,b){this.IaComponent||(this.IaComponent=this.createIaComponent());this.setIAApiUrl();this.IaComponent.render(b,{businessId:a,region:la.Config.getRegion(),authToken:$.cookie(la.AUTH_TOKEN_KEY)});window.currentComponent=
this.IaComponent},setEventTracker:function(a,b,c,d){analytics.track(a,b,c,d)},setPageLoadTracker:function(a,b,c,d,f){analytics.page(a,b,c,d,f)},createIaComponent:function(){return new window.IA.IaComponent(this.iaComponentDefaultOptions())},iaComponentDefaultOptions:function(){return{ajaxErrorHandler:ajaxErrorHandlers,eventTracker:this.setEventTracker,pageLoadTracker:this.setPageLoadTracker,businessSettings:la.BusinessSettings}}}});
ns("la.routers.helpers",function(b){b.InvoiceHelper={editInvoiceWithType:function(a,b,c,d,f){this.showLoadingSpinner();var g=new la.collections.commons.Accounts([],{businessId:a});g.setSortType(this._getAccountSortType());var h=new la.collections.items.Items([],{businessId:a}),l=new la.collections.ContactsLite([],{businessId:a}),k=this;$.when(l.fetch(),g.fetch(),h.fetch()).done(function(){k.editAction(a,b,"bill"===c?"Bills":"Sales",f,d,{},{accounts:g,items:h,contacts:l,type:c})})},newBillAction:function(a,
b,c,d,f,g){this.newInvoiceAction(a,c,d,f,{documentId:b},g)},_getAccountSortType:function(a){return"bill"===a?ACCOUNTS_SORT_TYPE.SPENDING_FIRST:ACCOUNTS_SORT_TYPE.INCOME_FIRST},newInvoiceAction:function(a,b,c,d,f,g){var h=new la.collections.commons.Accounts([],{businessId:a});h.setSortType(this._getAccountSortType(b));var l=new la.collections.items.Items([],{businessId:a}),k=new la.collections.ContactsLite([],{businessId:a}),m=new la.models.commons.NextNumber({businessId:a,type:b}),n=this;$.when(k.fetch(),
h.fetch(),l.fetch(),m.fetch()).done(function(){var q=la.BusinessSettings.getPreferenceAsBoolean("invoices",b+"GstInclusive"),p={accounts:h,items:l,contacts:k,type:b},q={gstInclusive:q,invoiceNumber:m.get("number")};f&&(q=_.extend(q,f));n.newAction(a,"bill"===b?"Bills":"Sales",d,c,q,p,g)})},historyAction:function(a,b,c,d,f){var g=new la.collections.ContactsLite([],{businessId:a});$.when(g.fetch()).done(function(){var h=new la.views.invoices.HistoryView({businessId:a,contacts:g[d](),historyType:b,heading:c});
this.showView(h,f)}.bind(this))}}});ns("la.routers.helpers",function(b){b.ItemHelper={openItem:function(a,b,c){this.showLoadingSpinner();var d=new la.collections.commons.Accounts([],{businessId:a}),f=new la.collections.items.Items([],{businessId:a}),g=this;$.when(d.fetch(),f.fetch()).done(function(){g.openAction(a,_(b).capitalize(),"la.models.items.Item","la.views.items.ItemView",{},{accounts:d,items:f,menu:b},c)})}}});
ns("la.routers.helpers",function(b){b.NewAllocationRulesHelper={showLoadingSpinner:function(){$("#pageContents").html('<div class="loadingSpinner" style="display:block;"></div>')},hideLoadingSpinner:function(){$("#pageContents").html("")},newAllocationRulesUrl:function(){return la.Config.isProduction()?"https://s3-ap-southeast-2.amazonaws.com/essentials-banking-rules-ui-prod/prod/bankingRules.js":la.Config.isStaging()?"https://essentials-banking-rules-ui-dev.s3.amazonaws.com/staging/bankingRules.js":
la.Config.isTesting()?"https://essentials-banking-rules-ui-dev.s3.amazonaws.com/test/bankingRules.js":"https://essentials-banking-rules-ui-dev.s3.amazonaws.com/dev/bankingRules.js"},renderNewAllocationRules:function(a){this.BankingRulesComponent=this.getBankingRulesComponent();a.eaUtils={urlUtils:UrlUtils,notificationUtils:la.notification,businessSettings:la.BusinessSettings};this.BankingRulesComponent.init(a);this.BankingRulesComponent.render(a.path)},loadNewAllocationRulesPackage:function(a,b,c){this.removeCurrentView();
this.showLoadingSpinner();head.load(this.newAllocationRulesUrl(),function(){this.hideLoadingSpinner();this.renderNewAllocationRules({domElement:document.getElementById("pageContents"),businessId:a,path:b,context:c,renderHeader:!0})}.bind(this))},loadAllocationRulesPopup:function(a,b,c,d){$("#banking-rules-popup-wrapper")[0]||(window.location.href=c);head.load(this.newAllocationRulesUrl(),function(){$("#banking-rules-popup-wrapper").html("");this.renderNewAllocationRules({domElement:document.getElementById("banking-rules-popup-wrapper"),
businessId:a,path:b,context:c,createRuleOptions:{ruleDescription:d,successCallback:this.createRuleSuccessCallback,errorCallback:this.createRuleErrorCallback,cancelCallback:this.createRuleCancelCallback,renderHeader:!1,transaction:this._getBankTransactionData()}})}.bind(this))},_getBankTransactionData:function(){var a={};window.bankTransaction&&(a.date=window.bankTransaction.get("formattedDate"),a.description=window.bankTransaction.get("description"),a.amount=window.bankTransaction.get("formattedAmount"),
a.accountName=window.bankTransaction.get("accountName"),window.bankTransaction=null);return a},createRuleSuccessCallback:function(){$(".banking-rules-modal").modal("toggle");la.notification.showNotification("Rule successfully created.")},createRuleCancelCallback:function(){$(".banking-rules-modal").modal("toggle")},createRuleErrorCallback:function(a){throw a;},getBankingRulesComponent:function(){return window.BankingRules}}});
ns("la.routers.helpers",function(b){b.PayAgentHelper={componentName:"PayAgentComponent",bundlerUrlConfigName:"payAgentClientURL",createComponent:function(a){window.PayAgent.ApiConfig.setUrl(la.Config.get("payAgentApiURL"));return new window.PayAgent.PayAgentComponent(a)},breadcrumbRenderer:function(a){var b=_({pattern:"businesses/:businessId/payroll/payCentre"}).extend({pageTitle:"Enter pay"});la.breadcrumb.onPageRoute(a.pageTitle,b)}}});
ns("la.routers.helpers",function(b){b.PayrollHelper={showPaymentSummaryInfo:function(a,b,c){c=new la.models.payroll.payment_summaries.PaymentSummary({businessId:a,employees:c});a=new la.views.payroll.payment_summaries.PaymentSummaryInfoView({businessId:a,year:b,model:c});this.showView(a,"Payroll")},getBusinessDetails:function(a,b){(new la.models.payroll.payment_summaries.BusinessDetails({businessId:a})).fetch({success:b})},showPaymentSummaryLodgingDetails:function(a,b,c){a=new la.models.payroll.payment_summaries.LodgingDetails({year:a,
businessDetails:b,businessId:c,lodgingType:"empdupe"});c=new la.views.payroll.payment_summaries.PaymentSummaryLodgingDetailsView({businessId:c,model:a});this.showView(c,"Payroll")},showTparLodgingDetails:function(a,b,c){a=new la.models.payroll.payment_summaries.LodgingDetails({year:a,businessDetails:b,businessId:c,lodgingType:"tpar"});c=new la.views.payroll.payment_summaries.TparLodgingDetailsView({businessId:c,model:a});this.showView(c,"Reports")},showIrdReportView:function(a){var b=createObject("la.models.payroll.ird.IRDMonthlyReturns",
{businessId:a}),c=this;b.fetch({success:function(){c.showView(createObject("la.views.payroll.ird.IRDMonthlyReturnsView",{businessId:a,model:b}),"Reports")}})}}});
ns("la.routers.helpers",function(b){b.ReportWithBudgetHelper={componentName:"ReportWithBudgetComponent",bundlerUrlConfigName:"reportingWithBudgetScriptUrl",createComponent:function(a){if(window.Reporting.api){var b=la.Config.get("reportingWithBudgetApiUrl");window.Reporting.api.setUrl(b)}b=new window.Reporting.Navigators.BackboneNavigator(Backbone.history);return new window.Reporting.ReportComponent(b,a)},breadcrumbRenderer:function(a){var b="businesses/:businessId/reports",c="Reports";if(!a.isRootPage)var d=
"/"===a.parentBreadcrumb.pageUrl?"":a.parentBreadcrumb.pageUrl,c=a.parentBreadcrumb.pageTitle,b=b+"/budgets"+d;b=_({pattern:b}).extend({pageTitle:c});la.breadcrumb.onPageRoute(a.pageTitle,b)}}});
ns("la.routers.routes.advisor",function(b){b.AdvisorCentreRoutes={"businesses/:businessId/advisor":{view:la.views.advisor.AdvisorDashboardView,gaUrl:"/advisor/dashboard",pageTitle:"Partner Dashboard",helpTopic:"7oER"},"businesses/:businessId/advisor/details":{gaUrl:"/advisor/details",pageTitle:"My profile",helpTopic:"SYIR",handler:function(a){(new la.models.advisor.AdvisorDetails({id:a})).fetch({success:function(a){this.showView(new la.views.advisor.AdvisorBusinessDetailsView({model:a}),"My profile")}.bind(this)})}},
"businesses/:businessId/advisor/users":{gaUrl:"/advisor/users",pageTitle:"Users",helpTopic:"SoIR",handler:function(a){this.listAction(a,"Users","user","la.collections.users.UsersAndInvitations","la.views.users.UsersView",UrlUtils.apiUrl(a,"/users"))}},"businesses/:businessId/advisor/invitations":{gaUrl:"/advisor/invitations",pageTitle:"Invitations",handler:function(a){this.listAction(a,"Invitations","invitation","la.collections.advisor.InvitedBusinesses","la.views.advisor.BusinessInvitationsView",
UrlUtils.apiUrl(a,"/advisor/invitations"))}}}});
ns("la.routers.routes.business",function(b){b.BankingRoutes={"businesses/:businessId/banking/reconcileTransactions(/p1-:states)(/p2-:accountId)(/p3-:startDate)(/p4-:endDate)(/p5-:accountName)(/p6-:prevAccountId)(/p7-:transId)(/p8-:lastTxnDate)(/p9-:strAccId)(/p10-:displayFilter)":{view:la.views.banking.ReconcileTransactionsView,menuName:"Banking",gaUrl:"/banking/reconcile-transactions",pageTitle:"Bank Transaction",welcomeWagonId:"BANKING_01",helpTopic:"xYER"},"businesses/:businessId/banking/transactionHistory(/p1-:accountName)":{menuName:"Banking",
gaUrl:"/banking/transaction-history",pageTitle:"Transaction history",helpTopic:"zoER",handler:function(a,b){var c=new la.collections.commons.Accounts([],{businessId:a});$.when(c.fetch()).done(function(){var d=new la.views.banking.TransactionHistoryView({businessId:a,accounts:c,accountName:b});this.showView(d,"Banking")}.bind(this))}},"businesses/:businessId/banking/transactions":{menuName:"Banking",gaUrl:"/banking/transactions",pageTitle:"Bank transactions",welcomeWagonId:"BANKING_05",helpTopic:"xYER",
handler:function(a){a=new la.views.banking.transactions.BankTransactionsView({businessId:a});this.showView(a,"Banking")}},"businesses/:businessId/banking/transactions/(:path)(/:ruleDesc)":{menuName:"Banking",gaUrl:"/banking/transactions",pageTitle:"Bank transactions",welcomeWagonId:"BANKING_05",helpTopic:"xYER",handler:function(a,b,c){var d="";b&&(d+=b);this.loadAllocationRulesPopup(a,d,"#businesses/"+a+"/banking/transactions",c)}},"businesses/:businessId/banking/manageRules/(:path)(/:ruleId)":{menuName:"Banking",
gaUrl:"/banking/new-allocation-rules",pageTitle:"Manage rules",breadcrumbParentRoute:"businesses/:businessId/banking/transactions",helpTopic:"EoIR",handler:function(a,b,c){var d="";b&&(d+=b);c&&(d+="/"+c);this.loadNewAllocationRulesPackage(a,d,"#businesses/"+a+"/banking/manageRules")}},"businesses/:businessId/banking/importHistory(/:id)(/ai-:accId/an-:accName)":{view:la.views.banking.ImportHistoryView,menuName:"Banking",gaUrl:"/banking/import-history",pageTitle:"Import history",breadcrumbParentRoute:"businesses/:businessId/banking/transactions",
helpTopic:"D4IR"},"businesses/:businessId/banking/accounts/:accountId/payrollTransaction/:transactionId":{view:la.views.banking.PayrollTransactionView,menuName:"Banking",gaUrl:"/banking/payroll-transaction",pageTitle:"Payroll transaction",breadcrumbParentRoute:"businesses/:businessId/banking/transactionHistory(/p1-:accountName)",helpTopic:"3IER"},"businesses/:businessId/banking/spendMoney(/p1-:bCallDatabase)(/p2-:prevScreenURL)(/p3-:journalSysId)(/p4-:accountSysId)(/p5-:defaultDate)":{view:la.views.banking.SpendMoneyView,
gaUrl:"/banking/spendMoney",pageTitle:"Spend Money",breadcrumbParentRoute:"businesses/:businessId/banking/transactionHistory(/p1-:accountName)",welcomeWagonId:"BANKING_03",helpTopic:"FIIR"},"businesses/:businessId/banking/depositMoney(/p1-:bCallDatabase)(/p2-:prevScreenURL)(/p3-:journalSysId)(/p4-:accountSysId)(/p5-:defaultDate)(/p6-:flgContinue)(/p7-:isInclusive)":{view:la.views.banking.DepositMoneyView,gaUrl:"/banking/depositMoney",pageTitle:"Receive Money",breadcrumbParentRoute:"businesses/:businessId/banking/transactionHistory(/p1-:accountName)",
welcomeWagonId:"BANKING_04",helpTopic:"y4ER"},"businesses/:businessId/banking/transferFunds(/jsi-:journalSysId)":{view:la.views.banking.TransferFundsView,gaUrl:"/banking/transfer-funds",pageTitle:"Transfer funds",breadcrumbParentRoute:"businesses/:businessId/banking/transactionHistory(/p1-:accountName)",helpTopic:"FYIR"},"businesses/:businessId/banking/reconciliation":{view:la.views.banking.ReconciliationView,gaUrl:"/banking/reconciliations",pageTitle:"Bank reconciliation",helpTopic:"zIER"}}});
ns("la.routers.routes.business",function(b){b.BillflowRoutes={"businesses/:businessId/documents":{view:la.views.billflow.DocumentsView,menuName:"In tray",gaUrl:"/billflow/documents",pageTitle:"In tray",welcomeWagonId:"PURCHASE_03",helpTopic:"OgAx"}}});
ns("la.routers.routes.business",function(b){b.BillsRoutes={"businesses/:businessId/bills/history":{menuName:"Bills",gaUrl:"/bills/history",pageTitle:"Purchase history",helpTopic:"vIER",handler:function(a){this.historyAction(a,"bill","Purchase","suppliers","Bills")}},"businesses/:businessId/bills/payment/new(/to-:cardSysId)":{view:la.views.bills.PaymentAddView,menuName:"Bills",gaUrl:"/bills/payment/new",pageTitle:"Pay bills",helpTopic:"BIIR",breadcrumbParentRoute:"businesses/:businessId/bills"},"businesses/:businessId/bills/payment/view/:journalSysId":{view:la.views.bills.PaymentDetailView,
menuName:"Bills",gaUrl:"/bills/payment/view",pageTitle:"View pay bill",helpTopic:"BIIR",breadcrumbParentRoute:"businesses/:businessId/bills"},"businesses/:businessId/bills/payment/edit/:journalSysId":{view:la.views.bills.PaymentEditView,menuName:"Bills",gaUrl:"/bills/payment/edit",pageTitle:"Edit pay bill",helpTopic:"BIIR",breadcrumbParentRoute:"businesses/:businessId/bills"},"businesses/:businessId/bills/return/new":{view:la.views.bills.ReturnAddView,menuName:"Bills",gaUrl:"/bills/return/new",pageTitle:"Create supplier return",
helpTopic:"uIER",breadcrumbParentRoute:"businesses/:businessId/bills"},"businesses/:businessId/bills/return/:journalSysId(/pi-:printInvoice)(/es-:emailSentSuccessfully)(/et-:emailTo)":{view:la.views.bills.ReturnEditView,menuName:"Bills",gaUrl:"/bills/return/edit",pageTitle:"Edit supplier return",helpTopic:"uIER",breadcrumbParentRoute:"businesses/:businessId/bills"},"businesses/:businessId/bills/processReturn":{view:la.views.bills.ProcessReturnView,menuName:"Bills",gaUrl:"/bills/process-return",pageTitle:"Process returns and debits",
helpTopic:"B4IR",breadcrumbParentRoute:"businesses/:businessId/bills"},"businesses/:businessId/bills/applyReturnToBill(/jsi-:journalSysId)(/isi-:invoiceSysId)(/to-:cardSysId)":{view:la.views.bills.ApplyReturnToBillView,menuName:"Bills",gaUrl:"/bills/apply-return-to-bill",pageTitle:"Apply to a bill",helpTopic:"B4IR",breadcrumbParentRoute:"businesses/:businessId/bills"},"businesses/:businessId/bills/refundFromSupplier(/jsi-:journalSysId)(/isi-:invoiceSysId)(/to-:cardSysId)":{view:la.views.bills.RefundFromSupplierView,
menuName:"Bills",gaUrl:"/bills/refund-from-supplier",pageTitle:"Refund from supplier",helpTopic:"B4IR",breadcrumbParentRoute:"businesses/:businessId/bills"},"businesses/:businessId/bills":{gaUrl:"/invoices/bill-list",pageTitle:"Bills",welcomeWagonId:"PURCHASE_01",helpTopic:"vIER",handler:function(a){var b="?type="+la.BusinessSettings.getPreference("dataTable","billListStatus"),b=UrlUtils.apiUrl(a,"/bills"+b);this.listAction(a,"Bills","bill","la.collections.invoices.InvoicesPager","la.views.invoices.InvoiceListView",
b)}},"businesses/:businessId/bills/new":{gaUrl:"/invoices/new-bill",pageTitle:"New Bill",welcomeWagonId:"PURCHASE_02",helpTopic:"t4ER",breadcrumbParentRoute:"businesses/:businessId/bills",handler:function(a,b){this.newInvoiceAction(a,"bill","la.views.bills.BillView","la.models.invoices.Bill")}},"businesses/:businessId/bills/:id":{gaUrl:"/invoices/new-bill",pageTitle:"Edit bill",welcomeWagonId:"PURCHASE_02",helpTopic:"t4ER",breadcrumbParentRoute:"businesses/:businessId/bills",handler:function(a,b){this.editInvoiceWithType(a,
b,"bill","la.views.bills.BillView","la.models.invoices.Bill")}},"businesses/:businessId/documents/:documentId/bills/new":{pageTitle:"New bill document",menuName:"In tray",breadcrumbParentRoute:"businesses/:businessId/documents",handler:function(a,b){0===$("#billflow").length?window.location="#businesses/"+a+"/documents":this.newBillAction(a,b,"bill","la.views.bills.BillView","la.models.invoices.Bill","#newBillPanel")}},"businesses/:businessId/documents/:documentId/bills":{pageTitle:"Attach to bill",
menuName:"In tray",breadcrumbParentRoute:"businesses/:businessId/documents",handler:function(a,b){if(0===$("#billflow").length)window.location="#businesses/"+a+"/documents";else{var c="?type="+la.BusinessSettings.getPreference("dataTable","billListStatus"),c=UrlUtils.apiUrl(a,"/bills"+c);this.listAction(a,"Bills","bill","la.collections.invoices.InvoicesPager","la.views.invoices.AttachToBillView",c,{documentId:b},"#newBillPanel")}}}}});
ns("la.routers.routes.business",function(b){b.ContactsRoutes={"businesses/:businessId/contacts":{gaUrl:"/contacts/contact-list",pageTitle:"Contacts",helpTopic:"v4ER",handler:function(a){this.listAction(a,"Contacts","contact","la.collections.ContactsPager","la.views.contacts.ContactListView")}},"businesses/:businessId/contacts/new":{gaUrl:"/contacts/new-contact",pageTitle:"New contact",helpTopic:"v4ER",breadcrumbParentRoute:"businesses/:businessId/contacts",handler:function(a){this.newAction(a,"Contacts",
"la.models.Contact","la.views.contacts.ContactView")}},"businesses/:businessId/contacts/:id":{gaUrl:"/contacts/edit-contact",pageTitle:"Edit contact",helpTopic:"v4ER",breadcrumbParentRoute:"businesses/:businessId/contacts",handler:function(a,b){this.editAction(a,b,"Contacts","la.models.Contact","la.views.contacts.ContactView")}}}});
ns("la.routers.routes.business",function(b){b.onlyBanking=function(){var a=_(la.BusinessSettings.get("entitlements"));return a.contains("BANKING")&&!a.contains("INVOICES")&&!a.contains("PAYROLL")};b.onlyPayroll=function(){var a=_(la.BusinessSettings.get("entitlements"));return!a.contains("BANKING")&&!a.contains("INVOICES")&&a.contains("PAYROLL")};b.DashboardRoutes={"businesses/:businessId/home":{menuName:"Dashboard",gaUrl:"/home",pageTitle:"Dashboard",welcomeWagonId:"HOME_01",helpTopic:"p4ER",handler:function(a){"CANCELLED"===
la.PreselectBusiness.get("serviceAccountStatus")?UrlUtils.redirect(UrlUtils.url("/app.htm#myBusinesses")):b.onlyPayroll()?(la.breadcrumb.clear(),UrlUtils.redirect(UrlUtils.url("/app.htm#businesses/"+a+"/payroll/payCentre/payrun"))):b.onlyBanking()?(la.breadcrumb.clear(),UrlUtils.redirect(UrlUtils.url("/app.htm#businesses/"+a+"/banking/transactions"))):(a=new la.views.home.DashboardView({businessId:a}),this.showView(a))}}}});
ns("la.routers.routes.business",function(b){b.InvoicesRoutes={"businesses/:businessId/invoices/history":{menuName:"Sales",gaUrl:"/invoices/history",pageTitle:"Sales history",helpTopic:"qIER",handler:function(a){this.historyAction(a,"invoice","Sales","customers","Sales")}},"businesses/:businessId/invoices/statements-old":{view:la.views.invoices.CustomerStatementsView,menuName:"Sales",gaUrl:"/invoices/statements-old",pageTitle:"Customer statements",helpTopic:"tIER"},"businesses/:businessId/invoices/payment/new(/to-:cardSysId)":{view:la.views.invoices.PaymentAddView,
menuName:"Invoices",gaUrl:"/invoices/payment/new",pageTitle:"Take payments",helpTopic:"-4ER",breadcrumbParentRoute:"businesses/:businessId/invoices"},"businesses/:businessId/invoices/payment/view/:journalSysId":{view:la.views.invoices.PaymentDetailView,menuName:"Invoices",gaUrl:"/invoices/payment/view",pageTitle:"View payment",helpTopic:"-4ER",breadcrumbParentRoute:"businesses/:businessId/invoices"},"businesses/:businessId/invoices/payment/edit/:journalSysId":{view:la.views.invoices.PaymentEditView,
menuName:"Invoices",gaUrl:"/invoices/payment/edit",pageTitle:"Edit payment",helpTopic:"-4ER",breadcrumbParentRoute:"businesses/:businessId/invoices"},"businesses/:businessId/invoices/return/new":{view:la.views.invoices.ReturnAddView,menuName:"Invoices",gaUrl:"/invoices/return/new",pageTitle:"Create customer return",helpTopic:"r4ER",breadcrumbParentRoute:"businesses/:businessId/invoices"},"businesses/:businessId/invoices/return/:journalSysId(/pi-:printInvoice)(/es-:emailSentSuccessfully)(/et-:emailTo)":{view:la.views.invoices.ReturnEditView,
menuName:"Invoices",gaUrl:"/invoices/return/edit",pageTitle:"Edit customer return",helpTopic:"r4ER",breadcrumbParentRoute:"businesses/:businessId/invoices"},"businesses/:businessId/invoices/processReturn":{view:la.views.invoices.ProcessReturnView,menuName:"Invoices",gaUrl:"/invoices/process-return",pageTitle:"Process returns and credits",helpTopic:"AYIR",breadcrumbParentRoute:"businesses/:businessId/invoices"},"businesses/:businessId/invoices/applyReturnToInvoice(/jsi-:journalSysId)(/isi-:invoiceSysId)(/to-:cardSysId)":{view:la.views.invoices.ApplyReturnToInvoiceView,
menuName:"Invoices",gaUrl:"/invoices/apply-return-to-invoice",pageTitle:"Apply to an invoice",helpTopic:"AYIR",breadcrumbParentRoute:"businesses/:businessId/invoices"},"businesses/:businessId/invoices/refundToCustomer(/jsi-:journalSysId)(/isi-:invoiceSysId)(/to-:cardSysId)":{view:la.views.invoices.RefundToCustomerView,menuName:"Invoices",gaUrl:"/invoices/refund-to-customer",pageTitle:"Refund to customer",helpTopic:"AYIR",breadcrumbParentRoute:"businesses/:businessId/invoices"},"businesses/:businessId/invoices":{gaUrl:"/invoices/invoice-list",
pageTitle:"Invoices",welcomeWagonId:"SALES_01",helpTopic:"qIER",handler:function(a){var b="?type="+la.BusinessSettings.getPreference("dataTable","invoiceListStatus"),b=UrlUtils.apiUrl(a,"/invoices"+b);this.listAction(a,"Sales","invoice","la.collections.invoices.InvoicesPager","la.views.invoices.InvoiceListView",b)}},"businesses/:businessId/invoices/new":{gaUrl:"/invoices/new-invoice",pageTitle:"New invoice",welcomeWagonId:"SALES_02",helpTopic:"qIER",breadcrumbParentRoute:"businesses/:businessId/invoices",
handler:function(a){this.newInvoiceAction(a,"invoice","la.views.invoices.InvoiceView","la.models.invoices.Invoice")}},"businesses/:businessId/invoices/:id":{gaUrl:"/invoices/edit-invoice",pageTitle:"Edit invoice",welcomeWagonId:"SALES_02",helpTopic:"qIER",breadcrumbParentRoute:"businesses/:businessId/invoices",handler:function(a,b){this.editInvoiceWithType(a,b,"invoice","la.views.invoices.InvoiceView","la.models.invoices.Invoice")}}}});
ns("la.routers.routes.business",function(b){b.ItemsRoutes={"businesses/:businessId/:menu/items/new":{gaUrl:"/invoices/new-item",pageTitle:"New item",helpTopic:"KYIR",breadcrumbParentRoute:"businesses/:businessId/:menu/items",handler:function(a,b){this.openItem(a,b)}},"businesses/:businessId/:menu/items/:id":{gaUrl:"/invoices/edit-item",pageTitle:"Edit item",helpTopic:"KYIR",breadcrumbParentRoute:"businesses/:businessId/:menu/items",handler:function(a,b,c){this.openItem(a,b,c)}},"businesses/:businessId/:menu/items":{gaUrl:"/invoices/item-list",
pageTitle:"Items",helpTopic:"4IER",handler:function(a,b){var c=UrlUtils.apiUrl(a,"/prime/items");this.listAction(a,_(b).capitalize(),"item","la.collections.items.ItemsPager","la.views.items.ItemListView",c,{menu:b})}}}});
ns("la.routers.routes.business",function(b){b.PAYROLL_FRONTEND_URL="la.Config.get('payrollFrontendClientUrl')";b.PayrollRoutes={"businesses/:businessId/payroll/payCentre":{pageTitle:"Enter pay",handler:function(a){"CANCELLED"===la.PreselectBusiness.attributes.serviceAccountStatus?UrlUtils.redirect(UrlUtils.url("/app.htm#myBusinesses")):this.navigate("businesses/"+a+"/payroll/payCentre/payrun",{trigger:!0,replace:!0})},helpTopic:"2YER"},"businesses/:businessId/payroll/paySuper":{view:la.views.payroll.paysuper.PaySuperEmployeeView,
menuName:"Payroll",gaUrl:"/payroll/paysuper",pageTitle:"Pay superannuation",helpTopic:"mICB",handler:function(a){this.listAction(a,"Payroll","","la.collections.paysuper.PaySuperEmployeesPager","la.views.payroll.paysuper.PaySuperEmployeeView")}},"businesses/:businessId/payroll/payCentre/payrun":{menuName:"Payroll",gaUrl:"/payroll/pay-centre",pageTitle:"Enter pay",welcomeWagonId:"PAYROLL_05",helpTopic:"2YER",view:la.views.payroll.pay_runs.PayCentreView,library:la.routers.routes.business.PAYROLL_FRONTEND_URL,
delayed:!0},"businesses/:businessId/payroll/payrun/:payrunId":{view:la.views.payroll.pay_runs.PayrunView,menuName:"Payroll",gaUrl:"/payroll/pay-centre",pageTitle:"Enter pay",welcomeWagonId:"PAYROLL_05",helpTopic:"2YER",library:la.routers.routes.business.PAYROLL_FRONTEND_URL,delayed:!0},"businesses/:businessId/payroll/payAgent/registration":{menuName:"Payroll",gaUrl:"/payAgent/registration",helpTopic:"2YER",handler:function(a,b){this.loadComponentPackage(a,"PayAgent Registration",la.routers.helpers.PayAgentHelper)}},
"businesses/:businessId/payroll/employees":{view:la.views.payroll.employees.EmployeeListView,menuName:"Payroll",gaUrl:"/payroll/employees",pageTitle:"Employees",welcomeWagonId:"PAYROLL_02",helpTopic:"1YER"},"businesses/:businessId/payroll/employees/add":{view:la.views.payroll.employees.EmployeeAddView,menuName:"Payroll",gaUrl:"/payroll/employees/add",pageTitle:"New employee",welcomeWagonId:"PAYROLL_03",helpTopic:"1YER"},"businesses/:businessId/payroll/employees/:employeeId":{view:la.views.payroll.employees.EmployeeEditView,
menuName:"Payroll",gaUrl:"/payroll/employees/edit",pageTitle:"Edit employee",welcomeWagonId:"PAYROLL_03",helpTopic:"1YER"},"businesses/:businessId/payroll/IRDMonthlyReturnsOld":{view:la.views.payroll.ird.IRDMonthlyReturnsOldView,menuName:"Payroll",gaUrl:"/payroll/ird-monthly-returns",pageTitle:"IRD monthly returns",helpTopic:"J4IR"},"businesses/:businessId/payroll/IRDMonthlyReturns":{gaUrl:"/payroll/ird-monthly-returns",pageTitle:"IRD monthly returns",helpTopic:"J4IR",handler:function(a){this.showIrdReportView(a)}},
"businesses/:businessId/payroll/pastPayRuns":{view:la.views.payroll.pay_runs.PastPayRunView,menuName:"Payroll",gaUrl:"/payroll/pastPayRuns",pageTitle:"Past pay runs",welcomeWagonId:"PAYROLL_27"},"businesses/:businessId/payroll/payrollReport":{view:la.views.reports.payroll.PayrollReportView,menuName:"Payroll",gaUrl:"/payroll/payroll-report",pageTitle:"Payroll summaries",helpTopic:"JoIR"},"businesses/:businessId/paymentSummaryCentre":{view:la.views.payroll.payment_summaries.PaymentSummaryCentreView,
menuName:"Payroll",gaUrl:"/payroll/payment-summary-centre",pageTitle:"PAYG Payment Summary Centre",helpTopic:"3oER"},"businesses/:businessId/paymentSummaryInfo/:year":{gaUrl:"/payroll/payment-summary-info",pageTitle:"Enter payment summary info",helpTopic:"3oER",handler:function(a,b){var c=this;(new la.collections.payroll.payment_summaries.Employees([],{businessId:a,year:b})).fetch({success:function(d){c.showPaymentSummaryInfo(a,b,d)}})}},"businesses/:businessId/paymentSummaries/:year/review":{gaUrl:"/payroll/payment-summary/review",
pageTitle:"Review payment summaries",helpTopic:"3oER",handler:function(a,b){var c=new la.collections.payroll.payment_summaries.Employees([],{businessId:a,year:b}),c=createObject("la.views.payroll.payment_summaries.PaymentSummaryReviewView",{businessId:a,collection:c,year:b});this.showView(c,"Payroll")}},"businesses/:businessId/paymentSummaries/:year/email":{gaUrl:"/payroll/payment-summary/email",pageTitle:"Email payment summaries",helpTopic:"3oER",handler:function(a,b){var c=this;this.getBusinessDetails(a,
function(d,f){var g=new la.collections.payroll.payment_summaries.PaymentSummaryEmailList([],{businessId:a,year:b}),g=createObject("la.views.payroll.payment_summaries.EmailView",{businessId:a,collection:g,year:b,businessDetails:d});c.showView(g,"Payroll")})}},"businesses/:businessId/paymentSummaryLodgingDetails/:year":{gaUrl:"/payroll/payment-summary-lodging-details",pageTitle:"Create file for online lodgement",helpTopic:"3oER",handler:function(a,b){var c=this;this.getBusinessDetails(a,function(d){c.showPaymentSummaryLodgingDetails(b,
d,a)})}},"businesses/:businessId/tpar/:year/lodgingDetails":{gaUrl:"/reports/tpar/lodging-details",pageTitle:"Taxable payments annual reporting assistant",helpTopic:"CIIR",handler:function(a,b){var c=this;this.getBusinessDetails(a,function(d){c.showTparLodgingDetails(b,d,a)})}}}});
ns("la.routers.routes.business",function(b){b.QuotesRoutes={"businesses/:businessId/quotes":{gaUrl:"/invoices/quote-list",pageTitle:"Quotes",helpTopic:"qYER",handler:function(a){var b="?type="+la.BusinessSettings.getPreference("dataTable","quoteListStatus"),b=UrlUtils.apiUrl(a,"/quotes"+b);this.listAction(a,"Sales","quote","la.collections.invoices.InvoicesPager","la.views.invoices.InvoiceListView",b)}},"businesses/:businessId/quotes/new":{gaUrl:"/invoices/new-quote",pageTitle:"New quote",helpTopic:"qYER",
breadcrumbParentRoute:"businesses/:businessId/quotes",handler:function(a){this.newInvoiceAction(a,"quote","la.views.invoices.QuoteView","la.models.invoices.Quote")}},"businesses/:businessId/quotes/:id":{gaUrl:"/invoices/edit-quote",pageTitle:"Edit quote",helpTopic:"qYER",breadcrumbParentRoute:"businesses/:businessId/quotes",handler:function(a,b){this.editInvoiceWithType(a,b,"quote","la.views.invoices.QuoteView","la.models.invoices.Quote")}}}});
ns("la.routers.routes.business",function(b){b.ReportsRoutes={"businesses/:businessId/reports":{view:la.views.reports.ReportsListView,menuName:"Reports",gaUrl:"/reports/home",pageTitle:"Reports",helpTopic:"z4ER"},"businesses/:businessId/reports/budgets(/:path)":{menuName:"Reports",gaUrl:"/reports/budgets",helpTopic:"mJWi",welcomeWagonId:"BUDGETING_01",handler:function(a,b){this.loadComponentPackage(a,b,la.routers.helpers.BudgetingHelper)}},"businesses/:businessId/reports/compProfitLoss(/:path)":{menuName:"Reports",
gaUrl:"/reports/compProfitLoss",helpTopic:"mpWi",welcomeWagonId:"PROFITANDLOSS_01",handler:function(a,b){this.loadComponentPackage(a,b,la.routers.helpers.ReportWithBudgetHelper)}},"businesses/:businessId/reports/balanceSheet":{view:la.views.reports.business.BalanceSheetView,menuName:"Reports",gaUrl:"/reports/balance-sheet",pageTitle:"Balance sheet",helpTopic:"GoIR",breadcrumbParentRoute:"businesses/:businessId/reports"},"businesses/:businessId/reports/compBalanceSheet(/:path)":{menuName:"Reports",
gaUrl:"/reports/compBalanceSheet",helpTopic:"GoIR",handler:function(a,b){this.loadComponentPackage(a,b,la.routers.helpers.BalanceSheetHelper)}},"businesses/:businessId/reports/gstDetailedReport":{view:la.views.reports.GstDetailedReportView,menuName:"Reports",gaUrl:"/reports/gst-detailed-report",pageTitle:"GST detailed report",helpTopic:"GoIR",breadcrumbParentRoute:"businesses/:businessId/reports"},"businesses/:businessId/reports/generalLedgerReportForm(/:accountId)(/:transactionId)":{view:la.views.reports.GeneralLedgerReportView,
menuName:"Reports",gaUrl:"/reports/general-ledger-details-report",pageTitle:"General ledger details report",helpTopic:"GoIR",breadcrumbParentRoute:"businesses/:businessId/reports"},"businesses/:businessId/reports/profitLoss(/:expandedAccountId)(/:highlightedTransactionId)(/page-:monthPageIndex)":{view:la.views.reports.ProfitLossReportView,menuName:"Reports",gaUrl:"/reports/profit-loss",pageTitle:"Profit & loss",helpTopic:"GoIR",breadcrumbParentRoute:"businesses/:businessId/reports"},"businesses/:businessId/reports/journals":{view:la.views.reports.business.JournalReportView,
menuName:"Reports",gaUrl:"/reports/journals",pageTitle:"Journal report",helpTopic:"GoIR",breadcrumbParentRoute:"businesses/:businessId/reports"},"businesses/:businessId/reports/trialBalance":{view:la.views.reports.business.TrialBalanceView,menuName:"Reports",gaUrl:"/reports/trial-balance",pageTitle:"Trial balance",helpTopic:"GoIR",breadcrumbParentRoute:"businesses/:businessId/reports"},"businesses/:businessId/reports/contacts":{view:la.views.reports.business.ContactReportView,menuName:"Reports",gaUrl:"/reports/contacts",
pageTitle:"Contact report",helpTopic:"GoIR",breadcrumbParentRoute:"businesses/:businessId/reports"},"businesses/:businessId/reports/gstReport":{view:la.views.reports.business.GstReportView,menuName:"Reports",gaUrl:"/reports/gst-report",pageTitle:"GST report",helpTopic:"GoIR",breadcrumbParentRoute:"businesses/:businessId/reports"},"businesses/:businessId/reports/gstLodgement":{view:la.views.reports.business.GstLodgementView,menuName:"Reports",gaUrl:"/reports/gst-lodgement",pageTitle:"GST lodgement",
helpTopic:"GoIR",breadcrumbParentRoute:"businesses/:businessId/reports"},"businesses/:businessId/reports/pastPayRuns":{view:la.views.payroll.pay_runs.PastPayRunView,menuName:"Reports",gaUrl:"/reports/past-pay-runs",pageTitle:"Past pay runs",helpTopic:"JoIR",breadcrumbParentRoute:"businesses/:businessId/reports"},"businesses/:businessId/reports/IRDMonthlyReturnsOld":{view:la.views.payroll.ird.IRDMonthlyReturnsOldView,menuName:"Reports",gaUrl:"/reports/ird-monthly-returns",pageTitle:"IRD monthly returns",
helpTopic:"J4IR",breadcrumbParentRoute:"businesses/:businessId/reports"},"businesses/:businessId/reports/IRDMonthlyReturns":{gaUrl:"/reports/ird-monthly-returns",pageTitle:"IRD monthly returns",helpTopic:"J4IR",breadcrumbParentRoute:"businesses/:businessId/reports",handler:function(a){this.showIrdReportView(a)}},"businesses/:businessId/reports/payrollReport":{view:la.views.reports.payroll.PayrollReportView,menuName:"Reports",gaUrl:"/reports/payroll-report",pageTitle:"Payroll reports",helpTopic:"JoIR"},
"businesses/:businessId/reports/accountList":{view:la.views.reports.business.AccountListReportView,menuName:"Reports",gaUrl:"/reports/account-list-report",pageTitle:"Account list report",helpTopic:"GoIR",breadcrumbParentRoute:"businesses/:businessId/reports"},"businesses/:businessId/reports/unpaidInvoices":{view:la.views.reports.sales.UnpaidInvoicesReportView,menuName:"Reports",gaUrl:"/reports/unpaid-invoices-report",pageTitle:"Unpaid invoices report",helpTopic:"0YER"},"businesses/:businessId/reports/unpaidBills":{view:la.views.reports.bill.UnpaidBillsReportView,
menuName:"Reports",gaUrl:"/reports/unpaid-bills-report",pageTitle:"Unpaid bills report",helpTopic:"0oER",breadcrumbParentRoute:"businesses/:businessId/reports"},"businesses/:businessId/reports/bankingReconciliation":{view:la.views.reports.business.BakingReconciliationView,menuName:"Reports",gaUrl:"/reports/banking-reconciliation",pageTitle:"Bank Reconciliation Reports",helpTopic:"0IER",breadcrumbParentRoute:"businesses/:businessId/reports"},"businesses/:businessId/reports/salesReconciliation":{view:la.views.reports.sales.SalesReconciliationReportView,
menuName:"Reports",gaUrl:"/reports/sales-reconciliation-report",pageTitle:"Sales reconciliation report",helpTopic:"0YER",breadcrumbParentRoute:"businesses/:businessId/reports"},"businesses/:businessId/reports/billsReconciliation":{view:la.views.reports.bill.BillsReconciliationReportView,menuName:"Reports",gaUrl:"/reports/bills-reconciliation-report",pageTitle:"Bills reconciliation report",helpTopic:"0oER",breadcrumbParentRoute:"businesses/:businessId/reports"},"businesses/:businessId/reports/itemList":{view:la.views.reports.sales.ItemListReportView,
menuName:"Reports",gaUrl:"/reports/item-list-report",pageTitle:"Item list report",helpTopic:"0YER",breadcrumbParentRoute:"businesses/:businessId/reports"},"businesses/:businessId/reports/taxablePayments":{view:la.views.reports.business.TaxablePaymentsView,menuName:"Reports",gaUrl:"/reports/taxable-payments",pageTitle:"Taxable payments annual report",helpTopic:"CIIR",breadcrumbParentRoute:"businesses/:businessId/reports"},"businesses/:businessId/reports/supplierPayments":{view:la.views.reports.bill.SupplierPaymentsReportView,
menuName:"Reports",gaUrl:"/reports/supplier-payments-report",pageTitle:"Pay bills report",helpTopic:"0oER",breadcrumbParentRoute:"businesses/:businessId/reports"},"businesses/:businessId/reports/billTransactions":{view:la.views.reports.bill.BillTransactionsReportView,menuName:"Reports",gaUrl:"/reports/bill-transactions-report",pageTitle:"Bill transactions report",helpTopic:"0oER",breadcrumbParentRoute:"businesses/:businessId/reports"},"businesses/:businessId/reports/customerPayments":{view:la.views.reports.sales.CustomerPaymentsReportView,
menuName:"Reports",gaUrl:"/reports/customer-payments-report",pageTitle:"Take payments report",helpTopic:"0YER",breadcrumbParentRoute:"businesses/:businessId/reports"},"businesses/:businessId/reports/customerInvoices":{view:la.views.reports.sales.CustomerInvoicesReportView,menuName:"Reports",gaUrl:"/reports/customer-invoices-report",pageTitle:"Customer invoices report",helpTopic:"0YER",breadcrumbParentRoute:"businesses/:businessId/reports"},"businesses/:businessId/reports/salesByCustomer":{view:la.views.reports.sales.SalesByCustomerReportView,
menuName:"Reports",gaUrl:"/reports/sales-by-customer-report",pageTitle:"Sales by customer report",helpTopic:"0YER",breadcrumbParentRoute:"businesses/:businessId/reports"},"businesses/:businessId/reports/salesByItem":{view:la.views.reports.sales.SalesByItemReportView,menuName:"Reports",gaUrl:"/reports/sales-by-item-report",pageTitle:"Sales by item report",helpTopic:"0YER",breadcrumbParentRoute:"businesses/:businessId/reports"},"businesses/:businessId/reports/billsBySupplier":{view:la.views.reports.bill.BillsBySupplierReportView,
menuName:"Reports",gaUrl:"/reports/bills-by-supplier-report",pageTitle:"Bills by supplier report",helpTopic:"0oER",breadcrumbParentRoute:"businesses/:businessId/reports"},"businesses/:businessId/reports/paymentTimeByCustomer":{view:la.views.reports.sales.PaymentTimeByCustomerReportView,menuName:"Reports",gaUrl:"/reports/payment-time-by-customer-report",pageTitle:"Payment time by customer report",helpTopic:"0YER",breadcrumbParentRoute:"businesses/:businessId/reports"},"businesses/:businessId/reports/salesTransactions":{view:la.views.reports.sales.SalesTransactionsReportView,
menuName:"Reports",gaUrl:"/reports/sales-transactions-report",pageTitle:"Sales transactions report",helpTopic:"0YER",breadcrumbParentRoute:"businesses/:businessId/reports"},"businesses/:businessId/reports/bills":{view:la.views.reports.bill.BillsReportView,menuName:"Reports",gaUrl:"/reports/bills-report",pageTitle:"Bills report",helpTopic:"0oER",breadcrumbParentRoute:"businesses/:businessId/reports"},"businesses/:businessId/reports/leave":{view:la.views.payroll.reports.LeaveReportView,menuName:"Reports",
gaUrl:"/reports/leave-report",pageTitle:"Leave",helpTopic:"G4IR",breadcrumbParentRoute:"businesses/:businessId/reports"},"businesses/:businessId/reports/bankingTransactions":{view:la.views.reports.banking.BankingTransactionsReportView,menuName:"Reports",gaUrl:"/reports/banking-transactions-report",pageTitle:"Banking transactions report",helpTopic:"0IER",breadcrumbParentRoute:"businesses/:businessId/reports"}}});
ns("la.routers.routes.business",function(b){b.SettingsRoutes={"businesses/:businessId/settings/businessDetails":{gaUrl:"/settings/business-details",pageTitle:"Business details",welcomeWagonId:"SETTINGS_01",helpTopic:"LIIR",handler:function(a){var b=new la.models.business.Details({id:a}),c=new la.models.business.PrimaryContactCandidates({id:a});$.when(b.fetch(),c.fetch()).done(function(){this.showView(new la.views.business.BusinessDetailsView({model:b,primaryContactCandidates:c}),"Business Details")}.bind(this))}},
"businesses/:businessId/settings/users":{gaUrl:"/settings/users",pageTitle:"Users",welcomeWagonId:"SETTINGS_04",helpTopic:"L4IR",handler:function(a){this.listAction(a,"Users","user","la.collections.users.UsersAndInvitations","la.views.users.UsersView",UrlUtils.apiUrl(a,"/users"))}},"businesses/:businessId/settings/advisor":{view:la.views.settings.AdvisorView,gaUrl:"/settings/advisor",pageTitle:"Invite advisor",helpTopic:"M4IR"},"businesses/:businessId/settings/logo":{view:la.views.settings.LogoView,
gaUrl:"/settings/logo",pageTitle:"Logo",helpTopic:"NIIR"},"businesses/:businessId/settings/gstSettings":{gaUrl:"/business/gst-settings",pageTitle:"GST settings",welcomeWagonId:"SETTINGS_02",helpTopic:"5YER",handler:function(a){var b=new la.models.gst.Settings({businessId:a}),c=this;$.when(b.fetch()).done(function(){var d;d=la.Config.isAU()?new la.views.gst.AuSettingsView({businessId:a,model:b}):new la.views.gst.SettingsView({businessId:a,model:b});c.showView(d,"GST settings")})}},"businesses/:businessId/settings/payrollSettings":{gaUrl:"/settings/payroll-settings",
pageTitle:"Payroll settings",welcomeWagonId:"PAYROLL_01",helpTopic:"HYIR",handler:function(a){var b=this;head.load(eval(la.routers.routes.business.PAYROLL_FRONTEND_URL),function(){var c=new la.views.settings.PayrollSettingsView({businessId:a,isAU:la.Config.isAU(),isIntermediaryBusiness:FeatureTagUtils.isFeatureAvailable("PAYROLL_INTERMEDIARY"),isEssentialsPayroll:la.BusinessSettings.attributes.payrollStandalone,isActiveAccount:"ACTIVE"===la.BusinessSettings.get("accountStatus")});b.showView(c)})}},
"businesses/:businessId/settings/invoiceSettings":{view:la.views.settings.invoice.SettingsView,gaUrl:"/invoice-settings",pageTitle:"Invoice and quote settings",welcomeWagonId:"SETTINGS_03",helpTopic:"6IER"},"businesses/:businessId/settings/newCoa(/*action)":{menuName:"Settings",gaUrl:"/settings/coa",pageTitle:"Accounts list",handler:function(a){this.loadCoaPackage(a,"businesses/:businessId/settings")}},"businesses/:businessId/settings/accounts(/p1-:importSuccess)(/p2-:importedCount)(/p3-:importedWithWarningsCount)(/p4-:notImportedCount)":{view:la.views.settings.AccountsView,
gaUrl:"/settings/accounts",pageTitle:"Accounts list",welcomeWagonId:"ACCOUNTS_01",helpTopic:"64ER"},"businesses/:businessId/settings/accounts/import":{view:la.views.settings.accounts.ImportView,gaUrl:"/settings/accounts/import",pageTitle:"Import an account list"},"businesses/:businessId/settings/openingBalances":{view:la.views.settings.OpeningBalancesView,gaUrl:"/settings/opening-balances",pageTitle:"Opening Balances",welcomeWagonId:"ACCOUNTS_02",helpTopic:"QYIR",breadcrumbParentRoute:"businesses/:businessId/settings/accounts"},
"businesses/:businessId/settings/generalJournals":{view:la.views.settings.GeneralJournalsView,gaUrl:"/settings/general-journals",pageTitle:"General journals",welcomeWagonId:"ACCOUNTS_03",helpTopic:"QoIR"},"businesses/:businessId/settings/generalJournals/new":{view:la.views.settings.GeneralJournalAddView,gaUrl:"/settings/general-journals/new",pageTitle:"Journal entry",helpTopic:"Q4IR"},"businesses/:businessId/settings/generalJournals/:journalSysId":{view:la.views.settings.GeneralJournalEditView,gaUrl:"/settings/general-journals/edit",
pageTitle:"Journal entry",helpTopic:"Q4IR"},"businesses/:businessId/settings/subscription":{view:la.views.subscription.SubscriptionView,gaUrl:"/settings/subscription",pageTitle:"Subscription details",helpTopic:"6YER",library:la.FRONTEND_NEW_URL},"businesses/:businessId/settings/importExport":{gaUrl:"/settings/import-export",pageTitle:"Import/export data",helpTopic:"OoIR",handler:function(a){var b=new la.models.business.Details({id:a}),c=this;$.when(b.fetch()).done(function(){c.importExportView(a,
b)})}},"businesses/:businessId/settings/bankFeeds":{view:la.views.settings.BankFeedApplicationListView,gaUrl:"/settings/manage-bank-feeds",pageTitle:"Manage bank feeds",welcomeWagonId:"BANKING_02",helpTopic:"CoIR"},"businesses/:businessId/banklink-connected-ledger-migration-upload":{view:la.views.admin.BanklinkConnectedLedgerMigrationView,menuName:"Bank link to Connected Ledger Migration",gaUrl:"/banklink-connected-ledger-migration-upload",pageTitle:"Banklink Connected Ledger Migration",library:la.FRONTEND_NEW_URL}}});
ns("la.routers.routes.businesses",function(b){b.BusinessRoutes={"myBusinesses(/autoRedirect-:autoRedirect)":{view:la.views.businesses.SwitchBusinessView,gaUrl:"/my-businesses",pageTitle:"My businesses"},"selectAdvisorBusiness/:invitationId":{view:la.views.home.PartnerBusinessSelectView,gaUrl:"/advisor_business_selection",pageTitle:"Invitation - Select Advisor Business"},"businesses/:businessId/advisor/verify":{view:la.views.advisor.VerifyAdvisorMainView,gaUrl:"/advisor/verify",pageTitle:"Verify advisor details"},
"*path":{view:la.views.businesses.SwitchBusinessView,gaUrl:"/my-businesses",pageTitle:"My businesses"}}});ns("la.routers.routes",function(b){b.DefaultRoutes={"*path":{view:la.views.commons.LoginView,gaUrl:"/login",pageTitle:"Login"}}});ns("la.routers.routes",function(b){b.LoginRoutes={"partner-not-found":{view:la.views.sso.PartnerNotFound,gaUrl:"/partner-not-found",pageTitle:"Partner not found",library:la.FRONTEND_NEW_URL}}});
ns("la.routers.routes",function(b){b.RegistrationRoutes={"handovertosme/:invitationId/:email":{view:la.views.registration.UserInvitationView,gaUrl:"/handover_to_sme_invitation",pageTitle:"Sign up for MYOB Essentials"},"invitations/smetoadvisor/:invitationId/:email":{view:la.views.registration.AdvisorInvitationView,gaUrl:"/sme_to_advisor_invitation",pageTitle:"Invitation to MYOB Essentials Accounting"},"invitations/smetouser/:invitationId/:email":{view:la.views.registration.UserInvitationView,gaUrl:"/sme_to_user_invitation",
pageTitle:"Invitation to MYOB Essentials Accounting"},"invitations/:invitationId/:email":{view:la.views.registration.UserInvitationView,gaUrl:"/user_invitation",pageTitle:"Invitation to MYOB Essentials Accounting"},"invitations/advisor/:invitationId/:email":{view:la.views.registration.AdvisorInvitationView,gaUrl:"/advisor_invitation",pageTitle:"Invitation to MYOB Essentials Accounting"},"invitations/partnersignup/:invitationId/:email":{view:la.views.registration.PartnerSignupView,gaUrl:"/partner_signup",
pageTitle:"Invitation to MYOB Essentials Accounting"}}});
ns("la.routers",function(b){b.AdvisorCentreRouter=Backbone.Router.extend({id:"AdvisorCentreRouter",mixins:[la.routers.helpers.RouterHelper],initialize:function(a){this.hasRouterChanged=a.hasRouterChanged;this.header=new Backbone.Model;this.loadRoutesFrom([la.routers.routes.advisor.AdvisorCentreRoutes]);this.on("all",function(){$("#pageContents").css("min-height","")})},before:function(a){la.BusinessSettings.setSelectedBusiness(UrlUtils.getBusinessIdFromURI());la.BusinessSettings.updateBusinessSettings(UrlUtils.getBusinessIdFromURI());
this.applyRouteInfo(a)},renderHeaderAndFooter:function(a){a=this.routeInfo[a].helpTopic||"doER";this.hasRouterChanged(this.id)?(this.renderHeader(new la.views.commons.AdvisorCentreHeaderView({model:this.header}),a),this.renderFooter(new la.views.commons.FooterView)):this.renderHeader(this.getWindowView("header"),a);this.header.set({helpTopicId:a})}})});
ns("la.routers",function(b){b.BusinessRouter=Backbone.Router.extend({id:"BusinessRouter",mixins:[la.routers.helpers.RouterHelper,la.routers.helpers.InvoiceHelper,la.routers.helpers.ItemHelper,la.routers.helpers.PayrollHelper,la.routers.helpers.ExternalComponentLoader,la.routers.helpers.NewAllocationRulesHelper,la.routers.helpers.CoaHelper],initialize:function(a){this.hasRouterChanged=a.hasRouterChanged;this.header=new Backbone.Model;this.on("all",function(){$("#pageContents").css("min-height","")})},
before:function(a){var b=UrlUtils.getBusinessIdFromURI();la.PreselectBusiness.select(b);FeatureTagUtils.isFeatureAvailable(FeatureTag.SUBSCRIPTION_STATUS)&&"CANCELLED"===la.PreselectBusiness.attributes.serviceAccountStatus||(Activation.sendActivationMessage(b),la.BusinessSettings.setSelectedBusiness(b),la.BusinessSettings.updateBusinessSettings(b),FeatureTagUtils.isFeatureAvailable(FeatureTag.NOTIFICATION_SERVICE)&&!_.isBlank(la.BusinessSettings.get("businessSerialNumber"))&&(NotificationServiceUtils.isClientActive()?
la.BusinessSettings.get("businessSerialNumber")!==la.NotificationServiceClient.serialNumber&&la.NotificationServiceClient.reset():(la.NotificationServiceClient=new la.models.notification.NotificationServiceClient,(new la.models.notification.BankTransactionRuleMetricEventHandler(la.NotificationServiceClient)).initialize()),la.NotificationServiceClient.resetEventListeners()),this.applyRouteInfo(a),this.renderGettingStartedView(a),FeatureTagUtils.isFeatureAvailable(FeatureTag.ONLINE_PAYMENTS)&&OnlinePaymentOptionsCache.getModel())},
initRoutes:function(a){this.loadRoutesFrom([this.parseExternalRoutes(a),la.routers.routes.business.BankingRoutes,la.routers.routes.business.DashboardRoutes,la.routers.routes.business.ContactsRoutes,la.routers.routes.business.QuotesRoutes,la.routers.routes.business.ItemsRoutes,la.routers.routes.business.InvoicesRoutes,la.routers.routes.business.BillsRoutes,la.routers.routes.business.BillflowRoutes,la.routers.routes.business.PayrollRoutes,la.routers.routes.business.ReportsRoutes,la.routers.routes.business.SettingsRoutes])},
renderHeaderAndFooter:function(a){var b=this.routeInfo[a].helpTopic||"doER",c=this.routeInfo[a].pageTitle;this.hasRouterChanged(this.id)?(this.renderHeader(new la.views.commons.BusinessHeaderView({model:this.header}),b),this.renderFooter(new la.views.commons.BusinessFooterView)):this.renderHeader(this.getWindowView("header"),b);if(c)la.breadcrumb.onPageRoute(c,this.buildParentRoute(this.routeInfo[a]));this.header.set({helpTopicId:b,currentRouteUrl:window.location.href})},buildParentRoute:function(a){if(a.breadcrumbParentRoute)return _({pattern:a.breadcrumbParentRoute}).extend(this.routeInfo[a.breadcrumbParentRoute])}})});
ns("la.routers",function(b){b.BusinessesRouter=Backbone.Router.extend({id:"BusinessesRouter",mixins:[la.routers.helpers.RouterHelper],initialize:function(a){this.hasRouterChanged=a.hasRouterChanged;this.loadRoutesFrom([la.routers.routes.businesses.BusinessRoutes]);this.on("all",function(){$("#pageContents").css("min-height","")})},before:function(a){this.applyRouteInfo(a)},renderHeaderAndFooter:function(){this.hasRouterChanged(this.id)?(this.renderHeader(new la.views.commons.BusinessesHeaderView),
this.renderFooter(new la.views.commons.FooterView)):this.renderHeader(this.getWindowView("header"))}})});ns("la.routers",function(b){b.PublicRouter=Backbone.Router.extend({id:"PublicRouter",mixins:[la.routers.helpers.RouterHelper],initialize:function(a){this.header=new Backbone.Model;this.loadRoutesFrom([la.routers.routes.LoginRoutes,la.routers.routes.RegistrationRoutes,la.routers.routes.DefaultRoutes])},before:function(a){this.applyRouteInfo(a)},renderHeaderAndFooter:function(){this.renderHeader(new la.views.commons.PublicHeaderView)}})});
_.extend(Backbone.Validation.validators,{afterDate:function(b,a,e,c,d){return this._dateRangeValidation(b,e,d,function(b,c){if(c.isBefore(b))return e.message||a+" cannot be before "+e.from})},maximumOneYearRange:function(b,a,e,c,d){return this._dateRangeValidation(b,e,d,function(a,b){if(365<b.diff(a)/1E3/60/60/24)return"Date range must be no more than one year"})},_dateRangeValidation:function(b,a,e,c){try{var d=this._parseDate(b);try{var f=this._parseDate(e[a.from]);return c(f,d)}catch(g){}}catch(g){return g}}});
ns("la",function(b){b.Application=function(){$.cookie.defaults={path:"/"+UrlUtils.context()+"/"};var a=this;this.navigate=function(a,b){Backbone.history.navigate(a,b)};this.callRouteHandler=function(a){Backbone.history.loadUrl(Backbone.history.getFragment(a))};this.hasRouterChanged=function(a){return window.routerId!==a?(window.routerId=a,!0):!1};this.segmentIdentityTraits=function(){return{businessCreationDate:la.BusinessSettings.get("createdDate"),businessId:la.BusinessSettings.get("businessId").toString(),
region:la.Config.get("region"),accountStatus:la.BusinessSettings.get("accountStatus"),serialNumber:la.BusinessSettings.get("businessSerialNumber"),myobCrmId:la.BusinessSettings.get("myobCrmId"),userType:la.BusinessSettings.isPartner()?"Advisor":"SME",env:la.Config.get("environment"),essentialsUserId:la.CurrentUserDetails.get("id").toString()}};this.loadSegment=function(){window.analytics||Segment.load(la.Config.get("segmentioWriteKey"));analytics.identify(la.CurrentUserDetails.get("ssoId"),this.segmentIdentityTraits())};
this.businessesRouter=new la.routers.BusinessesRouter({hasRouterChanged:this.hasRouterChanged});this.businessRouter=new la.routers.BusinessRouter({hasRouterChanged:this.hasRouterChanged});this.advisorCentreRouter=new la.routers.AdvisorCentreRouter({hasRouterChanged:this.hasRouterChanged});this.setUpBusinessSettingsOnSync=function(){b.BusinessSettings.on("sync",function(){la.feedback.init();a.loadSegment()})};this.setUpAdminRedirect=function(){b.CurrentUserDetails.on("sync",function(){var a=b.CurrentUserDetails.get("roles");
(_.contains(a,"ROLE_HELPDESKUSER")||_.contains(a,"ROLE_HELPDESKADMINISTRATOR"))&&setTimeout(function(){UrlUtils.redirect(UrlUtils.url("/admin.htm"))},100)})};this.setUpNotifications=function(){$("#fixedNotification").html((new la.views.commons.NotificationView({model:la.fixedNotification})).el);$("#defaultNotification").html((new la.views.commons.NotificationView({model:la.notification})).el)};this.initComponents=function(e){b.ComponentService.init({HeaderFooter:la.Config.get("headerAndFooterScriptUrl")},
function(){var b=[];window.HeaderFooter&&(b=window.HeaderFooter.routes);a.businessRouter.initRoutes(b);e&&e()})};this.startApp=function(e){b.BusinessSettings=new la.models.commons.BusinessSettings;b.CurrentUserDetails=new la.models.commons.CurrentUserDetails;b.PreselectBusiness=new la.models.commons.PreselectBusiness;e&&a.setUpAdminRedirect();b.CurrentUserDetails.fetch();a.setUpBusinessSettingsOnSync();a.setUpNotifications();a.initComponents(function(){Backbone.history.start({pushState:!1})})};b.Config=
new la.models.commons.Config;b.Config.fetch({success:function(a){b.Idam.authenticate(a,this.startApp)}.bind(this)})}});
